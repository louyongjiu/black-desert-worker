function Hj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function wk(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const Xj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yj=wk(Xj);function RD(e){return!!e||e===""}function Xl(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=hr(n)?Kj(n):Xl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(hr(e))return e;if(ir(e))return e}}const qj=/;(?![^(]*\))/g,Zj=/:(.+)/;function Kj(e){const t={};return e.split(qj).forEach(r=>{if(r){const n=r.split(Zj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ir(e){let t="";if(hr(e))t=e;else if(Bt(e))for(let r=0;r<e.length;r++){const n=Ir(e[r]);n&&(t+=n+" ")}else if(ir(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Jj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=ou(e[n],t[n]);return r}function ou(e,t){if(e===t)return!0;let r=rA(e),n=rA(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=ep(e),n=ep(t),r||n)return e===t;if(r=Bt(e),n=Bt(t),r||n)return r&&n?Jj(e,t):!1;if(r=ir(e),n=ir(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!ou(e[s],t[s]))return!1}}return String(e)===String(t)}function Sk(e,t){return e.findIndex(r=>ou(r,t))}const C=e=>hr(e)?e:e==null?"":Bt(e)||ir(e)&&(e.toString===FD||!Xt(e.toString))?JSON.stringify(e,DD,2):String(e),DD=(e,t)=>t&&t.__v_isRef?DD(e,t.value):Hc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:Tf(t)?{[`Set(${t.size})`]:[...t.values()]}:ir(t)&&!Bt(t)&&!$D(t)?String(t):t,Le={},Gc=[],Ni=()=>{},Qj=()=>!1,tG=/^on[^a-z]/,B1=e=>tG.test(e),Tk=e=>e.startsWith("onUpdate:"),an=Object.assign,kk=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},eG=Object.prototype.hasOwnProperty,fe=(e,t)=>eG.call(e,t),Bt=Array.isArray,Hc=e=>Gp(e)==="[object Map]",Tf=e=>Gp(e)==="[object Set]",rA=e=>Gp(e)==="[object Date]",Xt=e=>typeof e=="function",hr=e=>typeof e=="string",ep=e=>typeof e=="symbol",ir=e=>e!==null&&typeof e=="object",ND=e=>ir(e)&&Xt(e.then)&&Xt(e.catch),FD=Object.prototype.toString,Gp=e=>FD.call(e),rG=e=>Gp(e).slice(8,-1),$D=e=>Gp(e)==="[object Object]",Pk=e=>hr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zg=wk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),V1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},nG=/-(\w)/g,Oo=V1(e=>e.replace(nG,(t,r)=>r?r.toUpperCase():"")),iG=/\B([A-Z])/g,kf=V1(e=>e.replace(iG,"-$1").toLowerCase()),U1=V1(e=>e.charAt(0).toUpperCase()+e.slice(1)),xy=V1(e=>e?`on${U1(e)}`:""),rp=(e,t)=>!Object.is(e,t),Bg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Am=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Mm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let nA;const oG=()=>nA||(nA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let _o;class zD{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&_o&&(this.parent=_o,this.index=(_o.scopes||(_o.scopes=[])).push(this)-1)}run(t){if(this.active){const r=_o;try{return _o=this,t()}finally{_o=r}}}on(){_o=this}off(){_o=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function BD(e){return new zD(e)}function sG(e,t=_o){t&&t.active&&t.effects.push(e)}const Ck=e=>{const t=new Set(e);return t.w=0,t.n=0,t},VD=e=>(e.w&Ma)>0,UD=e=>(e.n&Ma)>0,aG=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ma},lG=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];VD(i)&&!UD(i)?i.delete(e):t[r++]=i,i.w&=~Ma,i.n&=~Ma}t.length=r}},mS=new WeakMap;let ad=0,Ma=1;const _S=30;let Mi;const Yl=Symbol(""),yS=Symbol("");class Ek{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,sG(this,n)}run(){if(!this.active)return this.fn();let t=Mi,r=Sa;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Mi,Mi=this,Sa=!0,Ma=1<<++ad,ad<=_S?aG(this):iA(this),this.fn()}finally{ad<=_S&&lG(this),Ma=1<<--ad,Mi=this.parent,Sa=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Mi===this?this.deferStop=!0:this.active&&(iA(this),this.onStop&&this.onStop(),this.active=!1)}}function iA(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Sa=!0;const WD=[];function Pf(){WD.push(Sa),Sa=!1}function Cf(){const e=WD.pop();Sa=e===void 0?!0:e}function Dn(e,t,r){if(Sa&&Mi){let n=mS.get(e);n||mS.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Ck()),jD(i)}}function jD(e,t){let r=!1;ad<=_S?UD(e)||(e.n|=Ma,r=!VD(e)):r=!e.has(Mi),r&&(e.add(Mi),Mi.deps.push(e))}function _s(e,t,r,n,i,o){const s=mS.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(r==="length"&&Bt(e))s.forEach((l,u)=>{(u==="length"||u>=n)&&a.push(l)});else switch(r!==void 0&&a.push(s.get(r)),t){case"add":Bt(e)?Pk(r)&&a.push(s.get("length")):(a.push(s.get(Yl)),Hc(e)&&a.push(s.get(yS)));break;case"delete":Bt(e)||(a.push(s.get(Yl)),Hc(e)&&a.push(s.get(yS)));break;case"set":Hc(e)&&a.push(s.get(Yl));break}if(a.length===1)a[0]&&bS(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);bS(Ck(l))}}function bS(e,t){const r=Bt(e)?e:[...e];for(const n of r)n.computed&&oA(n);for(const n of r)n.computed||oA(n)}function oA(e,t){(e!==Mi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const uG=wk("__proto__,__v_isRef,__isVue"),GD=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ep)),cG=Ak(),fG=Ak(!1,!0),hG=Ak(!0),sA=dG();function dG(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=de(this);for(let o=0,s=this.length;o<s;o++)Dn(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(de)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Pf();const n=de(this)[t].apply(this,r);return Cf(),n}}),e}function Ak(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?MG:ZD:t?qD:YD).get(n))return n;const s=Bt(n);if(!e&&s&&fe(sA,i))return Reflect.get(sA,i,o);const a=Reflect.get(n,i,o);return(ep(i)?GD.has(i):uG(i))||(e||Dn(n,"get",i),t)?a:Je(a)?s&&Pk(i)?a:a.value:ir(a)?e?KD(a):Ef(a):a}}const pG=HD(),vG=HD(!0);function HD(e=!1){return function(r,n,i,o){let s=r[n];if(np(s)&&Je(s)&&!Je(i))return!1;if(!e&&!np(i)&&(wS(i)||(i=de(i),s=de(s)),!Bt(r)&&Je(s)&&!Je(i)))return s.value=i,!0;const a=Bt(r)&&Pk(n)?Number(n)<r.length:fe(r,n),l=Reflect.set(r,n,i,o);return r===de(o)&&(a?rp(i,s)&&_s(r,"set",n,i):_s(r,"add",n,i)),l}}function gG(e,t){const r=fe(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&_s(e,"delete",t,void 0),n}function mG(e,t){const r=Reflect.has(e,t);return(!ep(t)||!GD.has(t))&&Dn(e,"has",t),r}function _G(e){return Dn(e,"iterate",Bt(e)?"length":Yl),Reflect.ownKeys(e)}const XD={get:cG,set:pG,deleteProperty:gG,has:mG,ownKeys:_G},yG={get:hG,set(e,t){return!0},deleteProperty(e,t){return!0}},bG=an({},XD,{get:fG,set:vG}),Mk=e=>e,W1=e=>Reflect.getPrototypeOf(e);function M0(e,t,r=!1,n=!1){e=e.__v_raw;const i=de(e),o=de(t);r||(t!==o&&Dn(i,"get",t),Dn(i,"get",o));const{has:s}=W1(i),a=n?Mk:r?Lk:ip;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function x0(e,t=!1){const r=this.__v_raw,n=de(r),i=de(e);return t||(e!==i&&Dn(n,"has",e),Dn(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function I0(e,t=!1){return e=e.__v_raw,!t&&Dn(de(e),"iterate",Yl),Reflect.get(e,"size",e)}function aA(e){e=de(e);const t=de(this);return W1(t).has.call(t,e)||(t.add(e),_s(t,"add",e,e)),this}function lA(e,t){t=de(t);const r=de(this),{has:n,get:i}=W1(r);let o=n.call(r,e);o||(e=de(e),o=n.call(r,e));const s=i.call(r,e);return r.set(e,t),o?rp(t,s)&&_s(r,"set",e,t):_s(r,"add",e,t),this}function uA(e){const t=de(this),{has:r,get:n}=W1(t);let i=r.call(t,e);i||(e=de(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&_s(t,"delete",e,void 0),o}function cA(){const e=de(this),t=e.size!==0,r=e.clear();return t&&_s(e,"clear",void 0,void 0),r}function L0(e,t){return function(n,i){const o=this,s=o.__v_raw,a=de(s),l=t?Mk:e?Lk:ip;return!e&&Dn(a,"iterate",Yl),s.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function O0(e,t,r){return function(...n){const i=this.__v_raw,o=de(i),s=Hc(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=i[e](...n),c=r?Mk:t?Lk:ip;return!t&&Dn(o,"iterate",l?yS:Yl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Fs(e){return function(...t){return e==="delete"?!1:this}}function wG(){const e={get(o){return M0(this,o)},get size(){return I0(this)},has:x0,add:aA,set:lA,delete:uA,clear:cA,forEach:L0(!1,!1)},t={get(o){return M0(this,o,!1,!0)},get size(){return I0(this)},has:x0,add:aA,set:lA,delete:uA,clear:cA,forEach:L0(!1,!0)},r={get(o){return M0(this,o,!0)},get size(){return I0(this,!0)},has(o){return x0.call(this,o,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:L0(!0,!1)},n={get(o){return M0(this,o,!0,!0)},get size(){return I0(this,!0)},has(o){return x0.call(this,o,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:L0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=O0(o,!1,!1),r[o]=O0(o,!0,!1),t[o]=O0(o,!1,!0),n[o]=O0(o,!0,!0)}),[e,r,t,n]}const[SG,TG,kG,PG]=wG();function xk(e,t){const r=t?e?PG:kG:e?TG:SG;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(fe(r,i)&&i in n?r:n,i,o)}const CG={get:xk(!1,!1)},EG={get:xk(!1,!0)},AG={get:xk(!0,!1)},YD=new WeakMap,qD=new WeakMap,ZD=new WeakMap,MG=new WeakMap;function xG(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function IG(e){return e.__v_skip||!Object.isExtensible(e)?0:xG(rG(e))}function Ef(e){return np(e)?e:Ik(e,!1,XD,CG,YD)}function LG(e){return Ik(e,!1,bG,EG,qD)}function KD(e){return Ik(e,!0,yG,AG,ZD)}function Ik(e,t,r,n,i){if(!ir(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=IG(e);if(s===0)return e;const a=new Proxy(e,s===2?n:r);return i.set(e,a),a}function ps(e){return np(e)?ps(e.__v_raw):!!(e&&e.__v_isReactive)}function np(e){return!!(e&&e.__v_isReadonly)}function wS(e){return!!(e&&e.__v_isShallow)}function JD(e){return ps(e)||np(e)}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function Ei(e){return Am(e,"__v_skip",!0),e}const ip=e=>ir(e)?Ef(e):e,Lk=e=>ir(e)?KD(e):e;function QD(e){Sa&&Mi&&(e=de(e),jD(e.dep||(e.dep=Ck())))}function t9(e,t){e=de(e),e.dep&&bS(e.dep)}function Je(e){return!!(e&&e.__v_isRef===!0)}function j1(e){return e9(e,!1)}function Vg(e){return e9(e,!0)}function e9(e,t){return Je(e)?e:new OG(e,t)}class OG{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:de(t),this._value=r?t:ip(t)}get value(){return QD(this),this._value}set value(t){t=this.__v_isShallow?t:de(t),rp(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:ip(t),t9(this))}}function Cr(e){return Je(e)?e.value:e}const RG={get:(e,t,r)=>Cr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Je(i)&&!Je(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function r9(e){return ps(e)?e:new Proxy(e,RG)}function SS(e){const t=Bt(e)?new Array(e.length):{};for(const r in e)t[r]=Ug(e,r);return t}class DG{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Ug(e,t,r){const n=e[t];return Je(n)?n:new DG(e,t,r)}class NG{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ek(t,()=>{this._dirty||(this._dirty=!0,t9(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=de(this);return QD(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function FG(e,t,r=!1){let n,i;const o=Xt(e);return o?(n=e,i=Ni):(n=e.get,i=e.set),new NG(n,i,o||!i,r)}function Ta(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){G1(o,t,r)}return i}function Fi(e,t,r,n){if(Xt(e)){const o=Ta(e,t,r,n);return o&&ND(o)&&o.catch(s=>{G1(s,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Fi(e[o],t,r,n));return i}function G1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,a=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Ta(l,null,10,[e,s,a]);return}}$G(e,r,i,n)}function $G(e,t,r,n=!0){console.error(e)}let xm=!1,TS=!1;const xn=[];let ls=0;const Pd=[];let ld=null,Cc=0;const Cd=[];let ua=null,Ec=0;const n9=Promise.resolve();let Ok=null,kS=null;function su(e){const t=Ok||n9;return e?t.then(this?e.bind(this):e):t}function zG(e){let t=ls+1,r=xn.length;for(;t<r;){const n=t+r>>>1;op(xn[n])<e?t=n+1:r=n}return t}function i9(e){(!xn.length||!xn.includes(e,xm&&e.allowRecurse?ls+1:ls))&&e!==kS&&(e.id==null?xn.push(e):xn.splice(zG(e.id),0,e),o9())}function o9(){!xm&&!TS&&(TS=!0,Ok=n9.then(l9))}function BG(e){const t=xn.indexOf(e);t>ls&&xn.splice(t,1)}function s9(e,t,r,n){Bt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),o9()}function VG(e){s9(e,ld,Pd,Cc)}function UG(e){s9(e,ua,Cd,Ec)}function H1(e,t=null){if(Pd.length){for(kS=t,ld=[...new Set(Pd)],Pd.length=0,Cc=0;Cc<ld.length;Cc++)ld[Cc]();ld=null,Cc=0,kS=null,H1(e,t)}}function a9(e){if(H1(),Cd.length){const t=[...new Set(Cd)];if(Cd.length=0,ua){ua.push(...t);return}for(ua=t,ua.sort((r,n)=>op(r)-op(n)),Ec=0;Ec<ua.length;Ec++)ua[Ec]();ua=null,Ec=0}}const op=e=>e.id==null?1/0:e.id;function l9(e){TS=!1,xm=!0,H1(e),xn.sort((r,n)=>op(r)-op(n));const t=Ni;try{for(ls=0;ls<xn.length;ls++){const r=xn[ls];r&&r.active!==!1&&Ta(r,null,14)}}finally{ls=0,xn.length=0,a9(),xm=!1,Ok=null,(xn.length||Pd.length||Cd.length)&&l9(e)}}function WG(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in n){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(Mm))}let a,l=n[a=xy(t)]||n[a=xy(Oo(t))];!l&&o&&(l=n[a=xy(kf(t))]),l&&Fi(l,e,6,i);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Fi(u,e,6,i)}}function u9(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!Xt(e)){const l=u=>{const c=u9(u,t,!0);c&&(a=!0,an(s,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(n.set(e,null),null):(Bt(o)?o.forEach(l=>s[l]=null):an(s,o),n.set(e,s),s)}function X1(e,t){return!e||!B1(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,kf(t))||fe(e,t))}let Xr=null,Y1=null;function Im(e){const t=Xr;return Xr=e,Y1=e&&e.type.__scopeId||null,t}function $e(e){Y1=e}function ze(){Y1=null}function be(e,t=Xr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&wA(-1);const o=Im(t),s=e(...i);return Im(o),n._d&&wA(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Iy(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let m,g;const y=Im(e);try{if(r.shapeFlag&4){const w=i||n;m=So(c.call(w,w,f,o,d,h,p)),g=l}else{const w=t;m=So(w.length>1?w(o,{attrs:l,slots:a,emit:u}):w(o,null)),g=t.props?l:jG(l)}}catch(w){Ad.length=0,G1(w,e,1),m=ft(xa)}let b=m;if(g&&v!==!1){const w=Object.keys(g),{shapeFlag:T}=b;w.length&&T&7&&(s&&w.some(Tk)&&(g=GG(g,s)),b=sf(b,g))}return r.dirs&&(b=sf(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),m=b,Im(y),m}const jG=e=>{let t;for(const r in e)(r==="class"||r==="style"||B1(r))&&((t||(t={}))[r]=e[r]);return t},GG=(e,t)=>{const r={};for(const n in e)(!Tk(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function HG(e,t,r){const{props:n,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?fA(n,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(s[h]!==n[h]&&!X1(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===s?!1:n?s?fA(n,s,u):!0:!!s;return!1}function fA(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!X1(r,o))return!0}return!1}function XG({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const YG=e=>e.__isSuspense;function qG(e,t){t&&t.pendingBranch?Bt(e)?t.effects.push(...e):t.effects.push(e):UG(e)}function Wg(e,t){if(_r){let r=_r.provides;const n=_r.parent&&_r.parent.provides;n===r&&(r=_r.provides=Object.create(n)),r[e]=t}}function Ln(e,t,r=!1){const n=_r||Xr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Xt(t)?t.call(n.proxy):t}}function hA(e,t){return Rk(e,null,t)}const dA={};function Co(e,t,r){return Rk(e,t,r)}function Rk(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:s}=Le){const a=_r;let l,u=!1,c=!1;if(Je(e)?(l=()=>e.value,u=wS(e)):ps(e)?(l=()=>e,n=!0):Bt(e)?(c=!0,u=e.some(g=>ps(g)||wS(g)),l=()=>e.map(g=>{if(Je(g))return g.value;if(ps(g))return Bl(g);if(Xt(g))return Ta(g,a,2)})):Xt(e)?t?l=()=>Ta(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Fi(e,a,3,[h])}:l=Ni,t&&n){const g=l;l=()=>Bl(g())}let f,h=g=>{f=m.onStop=()=>{Ta(g,a,4)}};if(ap)return h=Ni,t?r&&Fi(t,a,3,[l(),c?[]:void 0,h]):l(),Ni;let d=c?[]:dA;const p=()=>{if(!!m.active)if(t){const g=m.run();(n||u||(c?g.some((y,b)=>rp(y,d[b])):rp(g,d)))&&(f&&f(),Fi(t,a,3,[g,d===dA?void 0:d,h]),d=g)}else m.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>pn(p,a&&a.suspense):v=()=>VG(p);const m=new Ek(l,v);return t?r?p():d=m.run():i==="post"?pn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&kk(a.scope.effects,m)}}function ZG(e,t,r){const n=this.proxy,i=hr(e)?e.includes(".")?c9(n,e):()=>n[e]:e.bind(n,n);let o;Xt(t)?o=t:(o=t.handler,r=t);const s=_r;af(this);const a=Rk(i,o.bind(n),r);return s?af(s):ql(),a}function c9(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Bl(e,t){if(!ir(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Je(e))Bl(e.value,t);else if(Bt(e))for(let r=0;r<e.length;r++)Bl(e[r],t);else if(Tf(e)||Hc(e))e.forEach(r=>{Bl(r,t)});else if($D(e))for(const r in e)Bl(e[r],t);return e}function Dk(e){return Xt(e)?{setup:e,name:e.name}:e}const Ed=e=>!!e.type.__asyncLoader,f9=e=>e.type.__isKeepAlive;function KG(e,t){h9(e,"a",t)}function JG(e,t){h9(e,"da",t)}function h9(e,t,r=_r){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(q1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)f9(i.parent.vnode)&&QG(n,t,r,i),i=i.parent}}function QG(e,t,r,n){const i=q1(t,e,n,!0);Z1(()=>{kk(n[t],i)},r)}function q1(e,t,r=_r,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;Pf(),af(r);const a=Fi(t,r,e,s);return ql(),Cf(),a});return n?i.unshift(o):i.push(o),o}}const As=e=>(t,r=_r)=>(!ap||e==="sp")&&q1(e,t,r),tH=As("bm"),d9=As("m"),eH=As("bu"),rH=As("u"),nH=As("bum"),Z1=As("um"),iH=As("sp"),oH=As("rtg"),sH=As("rtc");function aH(e,t=_r){q1("ec",e,t)}function tt(e,t){const r=Xr;if(r===null)return e;const n=Q1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,a,l,u=Le]=t[o];Xt(s)&&(s={mounted:s,updated:s}),s.deep&&Bl(a),i.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function el(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[n];l&&(Pf(),Fi(l,r,8,[e.el,a,e,t]),Cf())}}const Nk="components";function Ot(e,t){return v9(Nk,e,!0,t)||e}const p9=Symbol();function lH(e){return hr(e)?v9(Nk,e,!1)||e:e||p9}function v9(e,t,r=!0,n=!1){const i=Xr||_r;if(i){const o=i.type;if(e===Nk){const a=$H(o,!1);if(a&&(a===t||a===Oo(t)||a===U1(Oo(t))))return o}const s=pA(i[e]||o[e],t)||pA(i.appContext[e],t);return!s&&n?o:s}}function pA(e,t){return e&&(e[t]||e[Oo(t)]||e[U1(Oo(t))])}function mt(e,t,r,n){let i;const o=r&&r[n];if(Bt(e)||hr(e)){i=new Array(e.length);for(let s=0,a=e.length;s<a;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(ir(e))if(e[Symbol.iterator])i=Array.from(e,(s,a)=>t(s,a,void 0,o&&o[a]));else{const s=Object.keys(e);i=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];i[a]=t(e[u],u,a,o&&o[a])}}else i=[];return r&&(r[n]=i),i}function uH(e,t,r={},n,i){if(Xr.isCE||Xr.parent&&Ed(Xr.parent)&&Xr.parent.isCE)return ft("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),E();const s=o&&g9(o(r)),a=Or(W,{key:r.key||`_${t}`},s||(n?n():[]),s&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function g9(e){return e.some(t=>Rm(t)?!(t.type===xa||t.type===W&&!g9(t.children)):!0)?e:null}const PS=e=>e?A9(e)?Q1(e)||e.proxy:PS(e.parent):null,Lm=an(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>PS(e.parent),$root:e=>PS(e.root),$emit:e=>e.emit,$options:e=>_9(e),$forceUpdate:e=>e.f||(e.f=()=>i9(e.update)),$nextTick:e=>e.n||(e.n=su.bind(e.proxy)),$watch:e=>ZG.bind(e)}),cH={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&fe(n,t))return s[t]=1,n[t];if(i!==Le&&fe(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&fe(u,t))return s[t]=3,o[t];if(r!==Le&&fe(r,t))return s[t]=4,r[t];CS&&(s[t]=0)}}const c=Lm[t];let f,h;if(c)return t==="$attrs"&&Dn(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(r!==Le&&fe(r,t))return s[t]=4,r[t];if(h=l.config.globalProperties,fe(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&fe(i,t)?(i[t]=r,!0):n!==Le&&fe(n,t)?(n[t]=r,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},s){let a;return!!r[s]||e!==Le&&fe(e,s)||t!==Le&&fe(t,s)||(a=o[0])&&fe(a,s)||fe(n,s)||fe(Lm,s)||fe(i.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:fe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let CS=!0;function fH(e){const t=_9(e),r=e.proxy,n=e.ctx;CS=!1,t.beforeCreate&&vA(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:y,destroyed:b,unmounted:w,render:T,renderTracked:S,renderTriggered:k,errorCaptured:x,serverPrefetch:A,expose:I,inheritAttrs:L,components:N,directives:z,filters:V}=t;if(u&&hH(u,n,null,e.appContext.config.unwrapInjectedRef),s)for(const K in s){const q=s[K];Xt(q)&&(n[K]=q.bind(r))}if(i){const K=i.call(r,r);ir(K)&&(e.data=Ef(K))}if(CS=!0,o)for(const K in o){const q=o[K],rt=Xt(q)?q.bind(r,r):Xt(q.get)?q.get.bind(r,r):Ni,At=!Xt(q)&&Xt(q.set)?q.set.bind(r):Ni,Ft=Ze({get:rt,set:At});Object.defineProperty(n,K,{enumerable:!0,configurable:!0,get:()=>Ft.value,set:Pt=>Ft.value=Pt})}if(a)for(const K in a)m9(a[K],n,r,K);if(l){const K=Xt(l)?l.call(r):l;Reflect.ownKeys(K).forEach(q=>{Wg(q,K[q])})}c&&vA(c,e,"c");function G(K,q){Bt(q)?q.forEach(rt=>K(rt.bind(r))):q&&K(q.bind(r))}if(G(tH,f),G(d9,h),G(eH,d),G(rH,p),G(KG,v),G(JG,m),G(aH,x),G(sH,S),G(oH,k),G(nH,y),G(Z1,w),G(iH,A),Bt(I))if(I.length){const K=e.exposed||(e.exposed={});I.forEach(q=>{Object.defineProperty(K,q,{get:()=>r[q],set:rt=>r[q]=rt})})}else e.exposed||(e.exposed={});T&&e.render===Ni&&(e.render=T),L!=null&&(e.inheritAttrs=L),N&&(e.components=N),z&&(e.directives=z)}function hH(e,t,r=Ni,n=!1){Bt(e)&&(e=ES(e));for(const i in e){const o=e[i];let s;ir(o)?"default"in o?s=Ln(o.from||i,o.default,!0):s=Ln(o.from||i):s=Ln(o),Je(s)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function vA(e,t,r){Fi(Bt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function m9(e,t,r,n){const i=n.includes(".")?c9(r,n):()=>r[n];if(hr(e)){const o=t[e];Xt(o)&&Co(i,o)}else if(Xt(e))Co(i,e.bind(r));else if(ir(e))if(Bt(e))e.forEach(o=>m9(o,t,r,n));else{const o=Xt(e.handler)?e.handler.bind(r):t[e.handler];Xt(o)&&Co(i,o,e)}}function _9(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>Om(l,u,s,!0)),Om(l,t,s)),o.set(t,l),l}function Om(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&Om(e,o,r,!0),i&&i.forEach(s=>Om(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const a=dH[s]||r&&r[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const dH={data:gA,props:Il,emits:Il,methods:Il,computed:Il,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:Il,directives:Il,watch:vH,provide:gA,inject:pH};function gA(e,t){return t?e?function(){return an(Xt(e)?e.call(this,this):e,Xt(t)?t.call(this,this):t)}:t:e}function pH(e,t){return Il(ES(e),ES(t))}function ES(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function tn(e,t){return e?[...new Set([].concat(e,t))]:t}function Il(e,t){return e?an(an(Object.create(null),e),t):t}function vH(e,t){if(!e)return t;if(!t)return e;const r=an(Object.create(null),e);for(const n in t)r[n]=tn(e[n],t[n]);return r}function gH(e,t,r,n=!1){const i={},o={};Am(o,K1,1),e.propsDefaults=Object.create(null),y9(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);r?e.props=n?i:LG(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function mH(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=de(i),[l]=e.propsOptions;let u=!1;if((n||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(X1(e.emitsOptions,h))continue;const d=t[h];if(l)if(fe(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Oo(h);i[p]=AS(l,a,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{y9(e,t,i,o)&&(u=!0);let c;for(const f in a)(!t||!fe(t,f)&&((c=kf(f))===f||!fe(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=AS(l,a,f,void 0,e,!0)):delete i[f]);if(o!==a)for(const f in o)(!t||!fe(t,f)&&!0)&&(delete o[f],u=!0)}u&&_s(e,"set","$attrs")}function y9(e,t,r,n){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(zg(l))continue;const u=t[l];let c;i&&fe(i,c=Oo(l))?!o||!o.includes(c)?r[c]=u:(a||(a={}))[c]=u:X1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,s=!0)}if(o){const l=de(r),u=a||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=AS(i,l,f,u[f],e,!fe(u,f))}}return s}function AS(e,t,r,n,i,o){const s=e[r];if(s!=null){const a=fe(s,"default");if(a&&n===void 0){const l=s.default;if(s.type!==Function&&Xt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(af(i),n=u[r]=l.call(null,t),ql())}else n=l}s[0]&&(o&&!a?n=!1:s[1]&&(n===""||n===kf(r))&&(n=!0))}return n}function b9(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,s={},a=[];let l=!1;if(!Xt(e)){const c=f=>{l=!0;const[h,d]=b9(f,t,!0);an(s,h),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Gc),Gc;if(Bt(o))for(let c=0;c<o.length;c++){const f=Oo(o[c]);mA(f)&&(s[f]=Le)}else if(o)for(const c in o){const f=Oo(c);if(mA(f)){const h=o[c],d=s[f]=Bt(h)||Xt(h)?{type:h}:h;if(d){const p=bA(Boolean,d.type),v=bA(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||fe(d,"default"))&&a.push(f)}}}const u=[s,a];return n.set(e,u),u}function mA(e){return e[0]!=="$"}function _A(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function yA(e,t){return _A(e)===_A(t)}function bA(e,t){return Bt(t)?t.findIndex(r=>yA(r,e)):Xt(t)&&yA(t,e)?0:-1}const w9=e=>e[0]==="_"||e==="$stable",Fk=e=>Bt(e)?e.map(So):[So(e)],_H=(e,t,r)=>{if(t._n)return t;const n=be((...i)=>Fk(t(...i)),r);return n._c=!1,n},S9=(e,t,r)=>{const n=e._ctx;for(const i in e){if(w9(i))continue;const o=e[i];if(Xt(o))t[i]=_H(i,o,n);else if(o!=null){const s=Fk(o);t[i]=()=>s}}},T9=(e,t)=>{const r=Fk(t);e.slots.default=()=>r},yH=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=de(t),Am(t,"_",r)):S9(t,e.slots={})}else e.slots={},t&&T9(e,t);Am(e.slots,K1,1)},bH=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,s=Le;if(n.shapeFlag&32){const a=t._;a?r&&a===1?o=!1:(an(i,t),!r&&a===1&&delete i._):(o=!t.$stable,S9(t,i)),s=t}else t&&(T9(e,t),s={default:1});if(o)for(const a in i)!w9(a)&&!(a in s)&&delete i[a]};function k9(){return{app:null,config:{isNativeTag:Qj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wH=0;function SH(e,t){return function(n,i=null){Xt(n)||(n=Object.assign({},n)),i!=null&&!ir(i)&&(i=null);const o=k9(),s=new Set;let a=!1;const l=o.app={_uid:wH++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:BH,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&Xt(u.install)?(s.add(u),u.install(l,...c)):Xt(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const h=ft(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),a=!0,l._container=u,u.__vue_app__=l,Q1(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function MS(e,t,r,n,i=!1){if(Bt(e)){e.forEach((h,d)=>MS(h,t&&(Bt(t)?t[d]:t),r,n,i));return}if(Ed(n)&&!i)return;const o=n.shapeFlag&4?Q1(n.component)||n.component.proxy:n.el,s=i?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Le?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(hr(u)?(c[u]=null,fe(f,u)&&(f[u]=null)):Je(u)&&(u.value=null)),Xt(l))Ta(l,a,12,[s,c]);else{const h=hr(l),d=Je(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Bt(v)&&kk(v,o):Bt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],fe(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=s,fe(f,l)&&(f[l]=s)):d&&(l.value=s,e.k&&(c[e.k]=s))};s?(p.id=-1,pn(p,r)):p()}}}const pn=qG;function TH(e){return kH(e)}function kH(e,t){const r=oG();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ni,cloneNode:p,insertStaticContent:v}=e,m=(B,j,X,Q=null,et=null,dt=null,bt=!1,ct=null,at=!!j.dynamicChildren)=>{if(B===j)return;B&&!lh(B,j)&&(Q=yt(B),Ct(B,et,dt,!0),B=null),j.patchFlag===-2&&(at=!1,j.dynamicChildren=null);const{type:it,ref:$t,shapeFlag:Lt}=j;switch(it){case $k:g(B,j,X,Q);break;case xa:y(B,j,X,Q);break;case jg:B==null&&b(j,X,Q,bt);break;case W:z(B,j,X,Q,et,dt,bt,ct,at);break;default:Lt&1?S(B,j,X,Q,et,dt,bt,ct,at):Lt&6?V(B,j,X,Q,et,dt,bt,ct,at):(Lt&64||Lt&128)&&it.process(B,j,X,Q,et,dt,bt,ct,at,xt)}$t!=null&&et&&MS($t,B&&B.ref,dt,j||B,!j)},g=(B,j,X,Q)=>{if(B==null)n(j.el=a(j.children),X,Q);else{const et=j.el=B.el;j.children!==B.children&&u(et,j.children)}},y=(B,j,X,Q)=>{B==null?n(j.el=l(j.children||""),X,Q):j.el=B.el},b=(B,j,X,Q)=>{[B.el,B.anchor]=v(B.children,j,X,Q,B.el,B.anchor)},w=({el:B,anchor:j},X,Q)=>{let et;for(;B&&B!==j;)et=h(B),n(B,X,Q),B=et;n(j,X,Q)},T=({el:B,anchor:j})=>{let X;for(;B&&B!==j;)X=h(B),i(B),B=X;i(j)},S=(B,j,X,Q,et,dt,bt,ct,at)=>{bt=bt||j.type==="svg",B==null?k(j,X,Q,et,dt,bt,ct,at):I(B,j,et,dt,bt,ct,at)},k=(B,j,X,Q,et,dt,bt,ct)=>{let at,it;const{type:$t,props:Lt,shapeFlag:zt,transition:Vt,patchFlag:ee,dirs:me}=B;if(B.el&&p!==void 0&&ee===-1)at=B.el=p(B.el);else{if(at=B.el=s(B.type,dt,Lt&&Lt.is,Lt),zt&8?c(at,B.children):zt&16&&A(B.children,at,null,Q,et,dt&&$t!=="foreignObject",bt,ct),me&&el(B,null,Q,"created"),Lt){for(const Pe in Lt)Pe!=="value"&&!zg(Pe)&&o(at,Pe,null,Lt[Pe],dt,B.children,Q,et,J);"value"in Lt&&o(at,"value",null,Lt.value),(it=Lt.onVnodeBeforeMount)&&ro(it,Q,B)}x(at,B,B.scopeId,bt,Q)}me&&el(B,null,Q,"beforeMount");const _e=(!et||et&&!et.pendingBranch)&&Vt&&!Vt.persisted;_e&&Vt.beforeEnter(at),n(at,j,X),((it=Lt&&Lt.onVnodeMounted)||_e||me)&&pn(()=>{it&&ro(it,Q,B),_e&&Vt.enter(at),me&&el(B,null,Q,"mounted")},et)},x=(B,j,X,Q,et)=>{if(X&&d(B,X),Q)for(let dt=0;dt<Q.length;dt++)d(B,Q[dt]);if(et){let dt=et.subTree;if(j===dt){const bt=et.vnode;x(B,bt,bt.scopeId,bt.slotScopeIds,et.parent)}}},A=(B,j,X,Q,et,dt,bt,ct,at=0)=>{for(let it=at;it<B.length;it++){const $t=B[it]=ct?ha(B[it]):So(B[it]);m(null,$t,j,X,Q,et,dt,bt,ct)}},I=(B,j,X,Q,et,dt,bt)=>{const ct=j.el=B.el;let{patchFlag:at,dynamicChildren:it,dirs:$t}=j;at|=B.patchFlag&16;const Lt=B.props||Le,zt=j.props||Le;let Vt;X&&rl(X,!1),(Vt=zt.onVnodeBeforeUpdate)&&ro(Vt,X,j,B),$t&&el(j,B,X,"beforeUpdate"),X&&rl(X,!0);const ee=et&&j.type!=="foreignObject";if(it?L(B.dynamicChildren,it,ct,X,Q,ee,dt):bt||rt(B,j,ct,null,X,Q,ee,dt,!1),at>0){if(at&16)N(ct,j,Lt,zt,X,Q,et);else if(at&2&&Lt.class!==zt.class&&o(ct,"class",null,zt.class,et),at&4&&o(ct,"style",Lt.style,zt.style,et),at&8){const me=j.dynamicProps;for(let _e=0;_e<me.length;_e++){const Pe=me[_e],Fr=Lt[Pe],Qi=zt[Pe];(Qi!==Fr||Pe==="value")&&o(ct,Pe,Fr,Qi,et,B.children,X,Q,J)}}at&1&&B.children!==j.children&&c(ct,j.children)}else!bt&&it==null&&N(ct,j,Lt,zt,X,Q,et);((Vt=zt.onVnodeUpdated)||$t)&&pn(()=>{Vt&&ro(Vt,X,j,B),$t&&el(j,B,X,"updated")},Q)},L=(B,j,X,Q,et,dt,bt)=>{for(let ct=0;ct<j.length;ct++){const at=B[ct],it=j[ct],$t=at.el&&(at.type===W||!lh(at,it)||at.shapeFlag&70)?f(at.el):X;m(at,it,$t,null,Q,et,dt,bt,!0)}},N=(B,j,X,Q,et,dt,bt)=>{if(X!==Q){for(const ct in Q){if(zg(ct))continue;const at=Q[ct],it=X[ct];at!==it&&ct!=="value"&&o(B,ct,it,at,bt,j.children,et,dt,J)}if(X!==Le)for(const ct in X)!zg(ct)&&!(ct in Q)&&o(B,ct,X[ct],null,bt,j.children,et,dt,J);"value"in Q&&o(B,"value",X.value,Q.value)}},z=(B,j,X,Q,et,dt,bt,ct,at)=>{const it=j.el=B?B.el:a(""),$t=j.anchor=B?B.anchor:a("");let{patchFlag:Lt,dynamicChildren:zt,slotScopeIds:Vt}=j;Vt&&(ct=ct?ct.concat(Vt):Vt),B==null?(n(it,X,Q),n($t,X,Q),A(j.children,X,$t,et,dt,bt,ct,at)):Lt>0&&Lt&64&&zt&&B.dynamicChildren?(L(B.dynamicChildren,zt,X,et,dt,bt,ct),(j.key!=null||et&&j===et.subTree)&&P9(B,j,!0)):rt(B,j,X,$t,et,dt,bt,ct,at)},V=(B,j,X,Q,et,dt,bt,ct,at)=>{j.slotScopeIds=ct,B==null?j.shapeFlag&512?et.ctx.activate(j,X,Q,bt,at):F(j,X,Q,et,dt,bt,at):G(B,j,at)},F=(B,j,X,Q,et,dt,bt)=>{const ct=B.component=OH(B,Q,et);if(f9(B)&&(ct.ctx.renderer=xt),RH(ct),ct.asyncDep){if(et&&et.registerDep(ct,K),!B.el){const at=ct.subTree=ft(xa);y(null,at,j,X)}return}K(ct,B,j,X,et,dt,bt)},G=(B,j,X)=>{const Q=j.component=B.component;if(HG(B,j,X))if(Q.asyncDep&&!Q.asyncResolved){q(Q,j,X);return}else Q.next=j,BG(Q.update),Q.update();else j.el=B.el,Q.vnode=j},K=(B,j,X,Q,et,dt,bt)=>{const ct=()=>{if(B.isMounted){let{next:$t,bu:Lt,u:zt,parent:Vt,vnode:ee}=B,me=$t,_e;rl(B,!1),$t?($t.el=ee.el,q(B,$t,bt)):$t=ee,Lt&&Bg(Lt),(_e=$t.props&&$t.props.onVnodeBeforeUpdate)&&ro(_e,Vt,$t,ee),rl(B,!0);const Pe=Iy(B),Fr=B.subTree;B.subTree=Pe,m(Fr,Pe,f(Fr.el),yt(Fr),B,et,dt),$t.el=Pe.el,me===null&&XG(B,Pe.el),zt&&pn(zt,et),(_e=$t.props&&$t.props.onVnodeUpdated)&&pn(()=>ro(_e,Vt,$t,ee),et)}else{let $t;const{el:Lt,props:zt}=j,{bm:Vt,m:ee,parent:me}=B,_e=Ed(j);if(rl(B,!1),Vt&&Bg(Vt),!_e&&($t=zt&&zt.onVnodeBeforeMount)&&ro($t,me,j),rl(B,!0),Lt&&vt){const Pe=()=>{B.subTree=Iy(B),vt(Lt,B.subTree,B,et,null)};_e?j.type.__asyncLoader().then(()=>!B.isUnmounted&&Pe()):Pe()}else{const Pe=B.subTree=Iy(B);m(null,Pe,X,Q,B,et,dt),j.el=Pe.el}if(ee&&pn(ee,et),!_e&&($t=zt&&zt.onVnodeMounted)){const Pe=j;pn(()=>ro($t,me,Pe),et)}(j.shapeFlag&256||me&&Ed(me.vnode)&&me.vnode.shapeFlag&256)&&B.a&&pn(B.a,et),B.isMounted=!0,j=X=Q=null}},at=B.effect=new Ek(ct,()=>i9(it),B.scope),it=B.update=()=>at.run();it.id=B.uid,rl(B,!0),it()},q=(B,j,X)=>{j.component=B;const Q=B.vnode.props;B.vnode=j,B.next=null,mH(B,j.props,Q,X),bH(B,j.children,X),Pf(),H1(void 0,B.update),Cf()},rt=(B,j,X,Q,et,dt,bt,ct,at=!1)=>{const it=B&&B.children,$t=B?B.shapeFlag:0,Lt=j.children,{patchFlag:zt,shapeFlag:Vt}=j;if(zt>0){if(zt&128){Ft(it,Lt,X,Q,et,dt,bt,ct,at);return}else if(zt&256){At(it,Lt,X,Q,et,dt,bt,ct,at);return}}Vt&8?($t&16&&J(it,et,dt),Lt!==it&&c(X,Lt)):$t&16?Vt&16?Ft(it,Lt,X,Q,et,dt,bt,ct,at):J(it,et,dt,!0):($t&8&&c(X,""),Vt&16&&A(Lt,X,Q,et,dt,bt,ct,at))},At=(B,j,X,Q,et,dt,bt,ct,at)=>{B=B||Gc,j=j||Gc;const it=B.length,$t=j.length,Lt=Math.min(it,$t);let zt;for(zt=0;zt<Lt;zt++){const Vt=j[zt]=at?ha(j[zt]):So(j[zt]);m(B[zt],Vt,X,null,et,dt,bt,ct,at)}it>$t?J(B,et,dt,!0,!1,Lt):A(j,X,Q,et,dt,bt,ct,at,Lt)},Ft=(B,j,X,Q,et,dt,bt,ct,at)=>{let it=0;const $t=j.length;let Lt=B.length-1,zt=$t-1;for(;it<=Lt&&it<=zt;){const Vt=B[it],ee=j[it]=at?ha(j[it]):So(j[it]);if(lh(Vt,ee))m(Vt,ee,X,null,et,dt,bt,ct,at);else break;it++}for(;it<=Lt&&it<=zt;){const Vt=B[Lt],ee=j[zt]=at?ha(j[zt]):So(j[zt]);if(lh(Vt,ee))m(Vt,ee,X,null,et,dt,bt,ct,at);else break;Lt--,zt--}if(it>Lt){if(it<=zt){const Vt=zt+1,ee=Vt<$t?j[Vt].el:Q;for(;it<=zt;)m(null,j[it]=at?ha(j[it]):So(j[it]),X,ee,et,dt,bt,ct,at),it++}}else if(it>zt)for(;it<=Lt;)Ct(B[it],et,dt,!0),it++;else{const Vt=it,ee=it,me=new Map;for(it=ee;it<=zt;it++){const Jr=j[it]=at?ha(j[it]):So(j[it]);Jr.key!=null&&me.set(Jr.key,it)}let _e,Pe=0;const Fr=zt-ee+1;let Qi=!1,w0=0;const Ja=new Array(Fr);for(it=0;it<Fr;it++)Ja[it]=0;for(it=Vt;it<=Lt;it++){const Jr=B[it];if(Pe>=Fr){Ct(Jr,et,dt,!0);continue}let zn;if(Jr.key!=null)zn=me.get(Jr.key);else for(_e=ee;_e<=zt;_e++)if(Ja[_e-ee]===0&&lh(Jr,j[_e])){zn=_e;break}zn===void 0?Ct(Jr,et,dt,!0):(Ja[zn-ee]=it+1,zn>=w0?w0=zn:Qi=!0,m(Jr,j[zn],X,null,et,dt,bt,ct,at),Pe++)}const S0=Qi?PH(Ja):Gc;for(_e=S0.length-1,it=Fr-1;it>=0;it--){const Jr=ee+it,zn=j[Jr],Qa=Jr+1<$t?j[Jr+1].el:Q;Ja[it]===0?m(null,zn,X,Qa,et,dt,bt,ct,at):Qi&&(_e<0||it!==S0[_e]?Pt(zn,X,Qa,2):_e--)}}},Pt=(B,j,X,Q,et=null)=>{const{el:dt,type:bt,transition:ct,children:at,shapeFlag:it}=B;if(it&6){Pt(B.component.subTree,j,X,Q);return}if(it&128){B.suspense.move(j,X,Q);return}if(it&64){bt.move(B,j,X,xt);return}if(bt===W){n(dt,j,X);for(let Lt=0;Lt<at.length;Lt++)Pt(at[Lt],j,X,Q);n(B.anchor,j,X);return}if(bt===jg){w(B,j,X);return}if(Q!==2&&it&1&&ct)if(Q===0)ct.beforeEnter(dt),n(dt,j,X),pn(()=>ct.enter(dt),et);else{const{leave:Lt,delayLeave:zt,afterLeave:Vt}=ct,ee=()=>n(dt,j,X),me=()=>{Lt(dt,()=>{ee(),Vt&&Vt()})};zt?zt(dt,ee,me):me()}else n(dt,j,X)},Ct=(B,j,X,Q=!1,et=!1)=>{const{type:dt,props:bt,ref:ct,children:at,dynamicChildren:it,shapeFlag:$t,patchFlag:Lt,dirs:zt}=B;if(ct!=null&&MS(ct,null,X,B,!0),$t&256){j.ctx.deactivate(B);return}const Vt=$t&1&&zt,ee=!Ed(B);let me;if(ee&&(me=bt&&bt.onVnodeBeforeUnmount)&&ro(me,j,B),$t&6)ot(B.component,X,Q);else{if($t&128){B.suspense.unmount(X,Q);return}Vt&&el(B,null,j,"beforeUnmount"),$t&64?B.type.remove(B,j,X,et,xt,Q):it&&(dt!==W||Lt>0&&Lt&64)?J(it,j,X,!1,!0):(dt===W&&Lt&384||!et&&$t&16)&&J(at,j,X),Q&&Zt(B)}(ee&&(me=bt&&bt.onVnodeUnmounted)||Vt)&&pn(()=>{me&&ro(me,j,B),Vt&&el(B,null,j,"unmounted")},X)},Zt=B=>{const{type:j,el:X,anchor:Q,transition:et}=B;if(j===W){Y(X,Q);return}if(j===jg){T(B);return}const dt=()=>{i(X),et&&!et.persisted&&et.afterLeave&&et.afterLeave()};if(B.shapeFlag&1&&et&&!et.persisted){const{leave:bt,delayLeave:ct}=et,at=()=>bt(X,dt);ct?ct(B.el,dt,at):at()}else dt()},Y=(B,j)=>{let X;for(;B!==j;)X=h(B),i(B),B=X;i(j)},ot=(B,j,X)=>{const{bum:Q,scope:et,update:dt,subTree:bt,um:ct}=B;Q&&Bg(Q),et.stop(),dt&&(dt.active=!1,Ct(bt,B,j,X)),ct&&pn(ct,j),pn(()=>{B.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},J=(B,j,X,Q=!1,et=!1,dt=0)=>{for(let bt=dt;bt<B.length;bt++)Ct(B[bt],j,X,Q,et)},yt=B=>B.shapeFlag&6?yt(B.component.subTree):B.shapeFlag&128?B.suspense.next():h(B.anchor||B.el),Et=(B,j,X)=>{B==null?j._vnode&&Ct(j._vnode,null,null,!0):m(j._vnode||null,B,j,null,null,null,X),a9(),j._vnode=B},xt={p:m,um:Ct,m:Pt,r:Zt,mt:F,mc:A,pc:rt,pbc:L,n:yt,o:e};let ht,vt;return t&&([ht,vt]=t(xt)),{render:Et,hydrate:ht,createApp:SH(Et,ht)}}function rl({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function P9(e,t,r=!1){const n=e.children,i=t.children;if(Bt(n)&&Bt(i))for(let o=0;o<n.length;o++){const s=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=ha(i[o]),a.el=s.el),r||P9(s,a))}}function PH(e){const t=e.slice(),r=[0];let n,i,o,s,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,s=r.length-1;o<s;)a=o+s>>1,e[r[a]]<u?o=a+1:s=a;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,s=r[o-1];o-- >0;)r[o]=s,s=t[s];return r}const CH=e=>e.__isTeleport,W=Symbol(void 0),$k=Symbol(void 0),xa=Symbol(void 0),jg=Symbol(void 0),Ad=[];let xi=null;function E(e=!1){Ad.push(xi=e?null:[])}function EH(){Ad.pop(),xi=Ad[Ad.length-1]||null}let sp=1;function wA(e){sp+=e}function C9(e){return e.dynamicChildren=sp>0?xi||Gc:null,EH(),sp>0&&xi&&xi.push(e),e}function M(e,t,r,n,i,o){return C9(_(e,t,r,n,i,o,!0))}function Or(e,t,r,n,i){return C9(ft(e,t,r,n,i,!0))}function Rm(e){return e?e.__v_isVNode===!0:!1}function lh(e,t){return e.type===t.type&&e.key===t.key}const K1="__vInternal",E9=({key:e})=>e!=null?e:null,Gg=({ref:e,ref_key:t,ref_for:r})=>e!=null?hr(e)||Je(e)||Xt(e)?{i:Xr,r:e,k:t,f:!!r}:e:null;function _(e,t=null,r=null,n=0,i=null,o=e===W?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&E9(t),ref:t&&Gg(t),scopeId:Y1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(zk(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=hr(r)?8:16),sp>0&&!s&&xi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&xi.push(l),l}const ft=AH;function AH(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===p9)&&(e=xa),Rm(e)){const a=sf(e,t,!0);return r&&zk(a,r),sp>0&&!o&&xi&&(a.shapeFlag&6?xi[xi.indexOf(e)]=a:xi.push(a)),a.patchFlag|=-2,a}if(zH(e)&&(e=e.__vccOpts),t){t=MH(t);let{class:a,style:l}=t;a&&!hr(a)&&(t.class=Ir(a)),ir(l)&&(JD(l)&&!Bt(l)&&(l=an({},l)),t.style=Xl(l))}const s=hr(e)?1:YG(e)?128:CH(e)?64:ir(e)?4:Xt(e)?2:0;return _(e,t,r,n,i,s,o,!0)}function MH(e){return e?JD(e)||K1 in e?an({},e):e:null}function sf(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:s}=e,a=t?xH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&E9(a),ref:t&&t.ref?r&&i?Bt(i)?i.concat(Gg(t)):[i,Gg(t)]:Gg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sf(e.ssContent),ssFallback:e.ssFallback&&sf(e.ssFallback),el:e.el,anchor:e.anchor}}function R(e=" ",t=0){return ft($k,null,e,t)}function J1(e,t){const r=ft(jg,null,e);return r.staticCount=t,r}function Z(e="",t=!1){return t?(E(),Or(xa,null,e)):ft(xa,null,e)}function So(e){return e==null||typeof e=="boolean"?ft(xa):Bt(e)?ft(W,null,e.slice()):typeof e=="object"?ha(e):ft($k,null,String(e))}function ha(e){return e.el===null||e.memo?e:sf(e)}function zk(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Bt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),zk(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(K1 in t)?t._ctx=Xr:i===3&&Xr&&(Xr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Xt(t)?(t={default:t,_ctx:Xr},r=32):(t=String(t),n&64?(r=16,t=[R(t)]):r=8);e.children=t,e.shapeFlag|=r}function xH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ir([t.class,n.class]));else if(i==="style")t.style=Xl([t.style,n.style]);else if(B1(i)){const o=t[i],s=n[i];s&&o!==s&&!(Bt(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=n[i])}return t}function ro(e,t,r,n=null){Fi(e,t,7,[r,n])}const IH=k9();let LH=0;function OH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||IH,o={uid:LH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new zD(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:b9(n,i),emitsOptions:u9(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=WG.bind(null,o),e.ce&&e.ce(o),o}let _r=null;const Bk=()=>_r||Xr,af=e=>{_r=e,e.scope.on()},ql=()=>{_r&&_r.scope.off(),_r=null};function A9(e){return e.vnode.shapeFlag&4}let ap=!1;function RH(e,t=!1){ap=t;const{props:r,children:n}=e.vnode,i=A9(e);gH(e,r,i,t),yH(e,n);const o=i?DH(e,t):void 0;return ap=!1,o}function DH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ei(new Proxy(e.ctx,cH));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?FH(e):null;af(e),Pf();const o=Ta(n,e,0,[e.props,i]);if(Cf(),ql(),ND(o)){if(o.then(ql,ql),t)return o.then(s=>{SA(e,s,t)}).catch(s=>{G1(s,e,0)});e.asyncDep=o}else SA(e,o,t)}else M9(e,t)}function SA(e,t,r){Xt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ir(t)&&(e.setupState=r9(t)),M9(e,r)}let TA;function M9(e,t,r){const n=e.type;if(!e.render){if(!t&&TA&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,u=an(an({isCustomElement:o,delimiters:a},s),l);n.render=TA(i,u)}}e.render=n.render||Ni}af(e),Pf(),fH(e),Cf(),ql()}function NH(e){return new Proxy(e.attrs,{get(t,r){return Dn(e,"get","$attrs"),t[r]}})}function FH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=NH(e))},slots:e.slots,emit:e.emit,expose:t}}function Q1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(r9(Ei(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Lm)return Lm[r](e)}}))}function $H(e,t=!0){return Xt(e)?e.displayName||e.name:e.name||t&&e.__name}function zH(e){return Xt(e)&&"__vccOpts"in e}const Ze=(e,t)=>FG(e,t,ap);function Vk(e,t,r){const n=arguments.length;return n===2?ir(t)&&!Bt(t)?Rm(t)?ft(e,null,[t]):ft(e,t):ft(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Rm(r)&&(r=[r]),ft(e,t,r))}const BH="3.2.37",VH="http://www.w3.org/2000/svg",Fl=typeof document<"u"?document:null,kA=Fl&&Fl.createElement("template"),UH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Fl.createElementNS(VH,e):Fl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Fl.createTextNode(e),createComment:e=>Fl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const s=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{kA.innerHTML=n?`<svg>${e}</svg>`:e;const a=kA.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function WH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function jH(e,t,r){const n=e.style,i=hr(r);if(r&&!i){for(const o in r)xS(n,o,r[o]);if(t&&!hr(t))for(const o in t)r[o]==null&&xS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const PA=/\s*!important$/;function xS(e,t,r){if(Bt(r))r.forEach(n=>xS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=GH(e,t);PA.test(r)?e.setProperty(kf(n),r.replace(PA,""),"important"):e[n]=r}}const CA=["Webkit","Moz","ms"],Ly={};function GH(e,t){const r=Ly[t];if(r)return r;let n=Oo(t);if(n!=="filter"&&n in e)return Ly[t]=n;n=U1(n);for(let i=0;i<CA.length;i++){const o=CA[i]+n;if(o in e)return Ly[t]=o}return t}const EA="http://www.w3.org/1999/xlink";function HH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(EA,t.slice(6,t.length)):e.setAttributeNS(EA,t,r);else{const o=Yj(t);r==null||o&&!RD(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function XH(e,t,r,n,i,o,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let a=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=RD(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(t)}const[x9,YH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let IS=0;const qH=Promise.resolve(),ZH=()=>{IS=0},KH=()=>IS||(qH.then(ZH),IS=x9());function us(e,t,r,n){e.addEventListener(t,r,n)}function JH(e,t,r,n){e.removeEventListener(t,r,n)}function QH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),s=o[t];if(n&&s)s.value=n;else{const[a,l]=tX(t);if(n){const u=o[t]=eX(n,i);us(e,a,u,l)}else s&&(JH(e,a,s,l),o[t]=void 0)}}const AA=/(?:Once|Passive|Capture)$/;function tX(e){let t;if(AA.test(e)){t={};let r;for(;r=e.match(AA);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[kf(e.slice(2)),t]}function eX(e,t){const r=n=>{const i=n.timeStamp||x9();(YH||i>=r.attached-1)&&Fi(rX(n,r.value),t,5,[n])};return r.value=e,r.attached=KH(),r}function rX(e,t){if(Bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const MA=/^on[a-z]/,nX=(e,t,r,n,i=!1,o,s,a,l)=>{t==="class"?WH(e,n,i):t==="style"?jH(e,r,n):B1(t)?Tk(t)||QH(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):iX(e,t,n,i))?XH(e,t,n,o,s,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),HH(e,t,n,i))};function iX(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&MA.test(t)&&Xt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||MA.test(t)&&hr(r)?!1:t in e}const Ia=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Bt(t)?r=>Bg(t,r):t};function oX(e){e.target.composing=!0}function xA(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Dt={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Ia(i);const o=n||i.props&&i.props.type==="number";us(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;r&&(a=a.trim()),o&&(a=Mm(a)),e._assign(a)}),r&&us(e,"change",()=>{e.value=e.value.trim()}),t||(us(e,"compositionstart",oX),us(e,"compositionend",xA),us(e,"change",xA))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Ia(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&Mm(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},Ne={deep:!0,created(e,t,r){e._assign=Ia(r),us(e,"change",()=>{const n=e._modelValue,i=lf(e),o=e.checked,s=e._assign;if(Bt(n)){const a=Sk(n,i),l=a!==-1;if(o&&!l)s(n.concat(i));else if(!o&&l){const u=[...n];u.splice(a,1),s(u)}}else if(Tf(n)){const a=new Set(n);o?a.add(i):a.delete(i),s(a)}else s(I9(e,o))})},mounted:IA,beforeUpdate(e,t,r){e._assign=Ia(r),IA(e,t,r)}};function IA(e,{value:t,oldValue:r},n){e._modelValue=t,Bt(t)?e.checked=Sk(t,n.props.value)>-1:Tf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=ou(t,I9(e,!0)))}const Md={created(e,{value:t},r){e.checked=ou(t,r.props.value),e._assign=Ia(r),us(e,"change",()=>{e._assign(lf(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Ia(n),t!==r&&(e.checked=ou(t,n.props.value))}},He={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=Tf(t);us(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>r?Mm(lf(s)):lf(s));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Ia(n)},mounted(e,{value:t}){LA(e,t)},beforeUpdate(e,t,r){e._assign=Ia(r)},updated(e,{value:t}){LA(e,t)}};function LA(e,t){const r=e.multiple;if(!(r&&!Bt(t)&&!Tf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],s=lf(o);if(r)Bt(t)?o.selected=Sk(t,s)>-1:o.selected=t.has(s);else if(ou(lf(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function lf(e){return"_value"in e?e._value:e.value}function I9(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const sX=["ctrl","shift","alt","meta"],aX={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>sX.some(r=>e[`${r}Key`]&&!t.includes(r))},lp=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=aX[t[i]];if(o&&o(r,t))return}return e(r,...n)},lX={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):uh(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),uh(e,!0),n.enter(e)):n.leave(e,()=>{uh(e,!1)}):uh(e,t))},beforeUnmount(e,{value:t}){uh(e,t)}};function uh(e,t){e.style.display=t?e._vod:"none"}const uX=an({patchProp:nX},UH);let OA;function cX(){return OA||(OA=TH(uX))}const fX=(...e)=>{const t=cX().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=hX(n);if(!i)return;const o=t._component;!Xt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function hX(e){return hr(e)?document.querySelector(e):e}var dX=!1;function R0(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function Oy(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function pX(){return L9().__VUE_DEVTOOLS_GLOBAL_HOOK__}function L9(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const vX=typeof Proxy=="function",gX="devtools-plugin:setup",mX="plugin:settings:set";let Hu,LS;function _X(){var e;return Hu!==void 0||(typeof window<"u"&&window.performance?(Hu=!0,LS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Hu=!0,LS=global.perf_hooks.performance):Hu=!1),Hu}function yX(){return _X()?LS.now():Date.now()}class bX{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const s in t.settings){const a=t.settings[s];n[s]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const s=localStorage.getItem(i),a=JSON.parse(s);Object.assign(o,a)}catch{}this.fallbacks={getSettings(){return o},setSettings(s){try{localStorage.setItem(i,JSON.stringify(s))}catch{}o=s},now(){return yX()}},r&&r.on(mX,(s,a)=>{s===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(s,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function O9(e,t){const r=e,n=L9(),i=pX(),o=vX&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(gX,e,t);else{const s=o?new bX(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let OS;const up=e=>OS=e,R9=Symbol("pinia");function au(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var xo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(xo||(xo={}));const pa=typeof window<"u",RA=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function wX(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function Uk(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){F9(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function D9(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Xg=typeof navigator=="object"?navigator:{userAgent:""},N9=(()=>/Macintosh/.test(Xg.userAgent)&&/AppleWebKit/.test(Xg.userAgent)&&!/Safari/.test(Xg.userAgent))(),F9=pa?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!N9?SX:"msSaveOrOpenBlob"in Xg?TX:kX:()=>{};function SX(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?D9(n.href)?Uk(e,t,r):(n.target="_blank",Hg(n)):Hg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Hg(n)},0))}function TX(e,t="download",r){if(typeof e=="string")if(D9(e))Uk(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Hg(n)})}else navigator.msSaveOrOpenBlob(wX(e,r),t)}function kX(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Uk(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(RA.HTMLElement))||"safari"in RA,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o||N9)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=s?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},a.readAsDataURL(e)}else{const a=URL.createObjectURL(e);n?n.location.assign(a):location.href=a,n=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function gr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function Wk(e){return"_a"in e&&"install"in e}function $9(){if(!("clipboard"in navigator))return gr("Your browser doesn't support the Clipboard API","error"),!0}function z9(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(gr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function PX(e){if(!$9())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),gr("Global state copied to clipboard.")}catch(t){if(z9(t))return;gr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function CX(e){if(!$9())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),gr("Global state pasted from clipboard.")}catch(t){if(z9(t))return;gr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function EX(e){try{F9(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){gr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Xo;function AX(){Xo||(Xo=document.createElement("input"),Xo.type="file",Xo.accept=".json");function e(){return new Promise((t,r)=>{Xo.onchange=async()=>{const n=Xo.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Xo.oncancel=()=>t(null),Xo.onerror=r,Xo.click()})}return e}async function MX(e){try{const r=await(await AX())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),gr(`Global state imported from "${i.name}".`)}catch(t){gr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function Ti(e){return{_custom:{display:e}}}const B9="\u{1F34D} Pinia (root)",RS="_root";function xX(e){return Wk(e)?{id:RS,label:B9}:{id:e.$id,label:e.$id}}function IX(e){if(Wk(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const s=n.get(o);return{editable:!1,key:o,value:s._getters.reduce((a,l)=>(a[l]=s[l],a),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function LX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Ti(e.type),key:Ti(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function OX(e){switch(e){case xo.direct:return"mutation";case xo.patchFunction:return"$patch";case xo.patchObject:return"$patch";default:return"unknown"}}let Oc=!0;const Yg=[],Ll="pinia:mutations",Vr="pinia",Dm=e=>"\u{1F34D} "+e;function RX(e,t){O9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yg,app:e},r=>{typeof r.now!="function"&&gr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:Ll,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Vr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{PX(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await CX(t),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{EX(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await MX(t),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),gr(`Store "${n}" reset.`)):gr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):gr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const s=n.componentInstance.proxy._pStores;Object.values(s).forEach(a=>{n.instanceData.state.push({type:Dm(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:de(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,u)=>(l[u]=a.$state[u],l),{})}),a._getters&&a._getters.length&&n.instanceData.state.push({type:Dm(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,u)=>{try{l[u]=a[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Vr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):B9.toLowerCase().includes(n.filter.toLowerCase())):i).map(xX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Vr){const i=n.nodeId===RS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=IX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Vr){const o=n.nodeId===RS?t:t._s.get(n.nodeId);if(!o)return gr(`store "${n.nodeId}" not found`,"error");const{path:s}=n;Wk(o)?s.unshift("state"):(s.length!==1||!o._customProperties.has(s[0])||s[0]in o.$state)&&s.unshift("$state"),Oc=!1,n.set(o,s,n.state.value),Oc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return gr(`store "${i}" not found`,"error");const{path:s}=n;if(s[0]!=="state")return gr(`Invalid path for store "${i}":
${s}
Only state can be modified.`);s[0]="$state",Oc=!1,n.set(o,s,n.state.value),Oc=!0}})})}function DX(e,t){Yg.includes(Dm(t.$id))||Yg.push(Dm(t.$id)),O9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:s,onError:a,name:l,args:u})=>{const c=V9++;r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:Ti(t.$id),action:Ti(l),args:u},groupId:c}}),s(f=>{$l=void 0,r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:Ti(t.$id),action:Ti(l),args:u,result:f},groupId:c}})}),a(f=>{$l=void 0,r.addTimelineEvent({layerId:Ll,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:Ti(t.$id),action:Ti(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(s=>{Co(()=>Cr(t[s]),(a,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Vr),Oc&&r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"Change",subtitle:s,data:{newValue:a,oldValue:l},groupId:$l}})},{deep:!0})}),t.$subscribe(({events:s,type:a},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Vr),!Oc)return;const u={time:n(),title:OX(a),data:{store:Ti(t.$id),...LX(s)},groupId:$l};$l=void 0,a===xo.patchFunction?u.subtitle="\u2935\uFE0F":a===xo.patchObject?u.subtitle="\u{1F9E9}":s&&!Array.isArray(s)&&(u.subtitle=s.type),s&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:s}}),r.addTimelineEvent({layerId:Ll,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=Ei(s=>{i(s),r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:Ti(t.$id),info:Ti("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr),r.getSettings().logStoreChanges&&gr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr),r.getSettings().logStoreChanges&&gr(`"${t.$id}" store installed \u{1F195}`)})}let V9=0,$l;function DA(e,t){const r=t.reduce((n,i)=>(n[i]=de(e)[i],n),{});for(const n in r)e[n]=function(){const i=V9,o=new Proxy(e,{get(...s){return $l=i,Reflect.get(...s)},set(...s){return $l=i,Reflect.set(...s)}});return r[n].apply(o,arguments)}}function NX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){DA(t,Object.keys(r.actions));const n=t._hotUpdate;de(t)._hotUpdate=function(i){n.apply(this,arguments),DA(t,Object.keys(i._hmrPayload.actions))}}DX(e,t)}}function FX(){const e=BD(!0),t=e.run(()=>j1({}));let r=[],n=[];const i=Ei({install(o){up(i),i._a=o,o.provide(R9,i),o.config.globalProperties.$pinia=i,pa&&RX(o,i),n.forEach(s=>r.push(s)),n=[]},use(o){return!this._a&&!dX?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return pa&&!0&&typeof Proxy<"u"&&i.use(NX),i}function U9(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];au(i)&&au(n)&&!Je(n)&&!ps(n)?e[r]=U9(i,n):e[r]=n}return e}const $X=()=>{};function NA(e,t,r,n=$X){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&Bk()&&Z1(i),i}function Xu(e,...t){e.slice().forEach(r=>{r(...t)})}function DS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];au(i)&&au(n)&&e.hasOwnProperty(r)&&!Je(n)&&!ps(n)?e[r]=DS(i,n):e[r]=n}return e}const zX=Symbol("pinia:skipHydration");function BX(e){return!au(e)||!e.hasOwnProperty(zX)}const{assign:Ci}=Object;function FA(e){return!!(Je(e)&&e.effect)}function $A(e,t,r,n){const{state:i,actions:o,getters:s}=t,a=r.state.value[e];let l;function u(){!a&&!n&&(r.state.value[e]=i?i():{});const c=SS(n?j1(i?i():{}).value:r.state.value[e]);return Ci(c,o,Object.keys(s||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=Ei(Ze(()=>{up(r);const d=r._s.get(e);return s[h].call(d,d)})),f),{}))}return l=NS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{Ci(h,f)})},l}function NS(e,t,r={},n,i,o){let s;const a=Ci({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!k._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=Ei([]),h=Ei([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=j1({});let m;function g(A){let I;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),I={type:xo.patchFunction,storeId:e,events:d}):(DS(n.state.value[e],A),I={type:xo.patchObject,payload:A,storeId:e,events:d});const L=m=Symbol();su().then(()=>{m===L&&(u=!0)}),c=!0,Xu(f,I,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function b(){s.stop(),f=[],h=[],n._s.delete(e)}function w(A,I){return function(){up(n);const L=Array.from(arguments),N=[],z=[];function V(K){N.push(K)}function F(K){z.push(K)}Xu(h,{args:L,name:A,store:k,after:V,onError:F});let G;try{G=I.apply(this&&this.$id===e?this:k,L)}catch(K){throw Xu(z,K),K}return G instanceof Promise?G.then(K=>(Xu(N,K),K)).catch(K=>(Xu(z,K),Promise.reject(K))):(Xu(N,G),G)}}const T=Ei({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:NA.bind(null,h),$patch:g,$reset:y,$subscribe(A,I={}){const L=NA(f,A,I.detached,()=>N()),N=s.run(()=>Co(()=>n.state.value[e],z=>{(I.flush==="sync"?c:u)&&A({storeId:e,type:xo.direct,events:d},z)},Ci({},l,I)));return L},$dispose:b},k=Ef(Ci(pa?{_customProperties:Ei(new Set),_hmrPayload:T}:{},S));n._s.set(e,k);const x=n._e.run(()=>(s=BD(),s.run(()=>t())));for(const A in x){const I=x[A];if(Je(I)&&!FA(I)||ps(I))i?R0(v.value,A,Ug(x,A)):o||(p&&BX(I)&&(Je(I)?I.value=p[A]:DS(I,p[A])),n.state.value[e][A]=I),T.state.push(A);else if(typeof I=="function"){const L=i?I:w(A,I);x[A]=L,T.actions[A]=I,a.actions[A]=I}else FA(I)&&(T.getters[A]=o?r.getters[A]:I,pa&&(x._getters||(x._getters=Ei([]))).push(A))}Ci(k,x),Ci(de(k),x),Object.defineProperty(k,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");g(I=>{Ci(I,A)})}});{k._hotUpdate=Ei(I=>{k._hotUpdating=!0,I._hmrPayload.state.forEach(L=>{if(L in k.$state){const N=I.$state[L],z=k.$state[L];typeof N=="object"&&au(N)&&au(z)?U9(N,z):I.$state[L]=z}R0(k,L,Ug(I.$state,L))}),Object.keys(k.$state).forEach(L=>{L in I.$state||Oy(k,L)}),u=!1,c=!1,n.state.value[e]=Ug(I._hmrPayload,"hotState"),c=!0,su().then(()=>{u=!0});for(const L in I._hmrPayload.actions){const N=I[L];R0(k,L,w(L,N))}for(const L in I._hmrPayload.getters){const N=I._hmrPayload.getters[L],z=o?Ze(()=>(up(n),N.call(k,k))):N;R0(k,L,z)}Object.keys(k._hmrPayload.getters).forEach(L=>{L in I._hmrPayload.getters||Oy(k,L)}),Object.keys(k._hmrPayload.actions).forEach(L=>{L in I._hmrPayload.actions||Oy(k,L)}),k._hmrPayload=I._hmrPayload,k._getters=I._getters,k._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};pa&&["_p","_hmrPayload","_getters","_customProperties"].forEach(I=>{Object.defineProperty(k,I,{value:k[I],...A})})}return n._p.forEach(A=>{if(pa){const I=s.run(()=>A({store:k,app:n._a,pinia:n,options:a}));Object.keys(I||{}).forEach(L=>k._customProperties.add(L)),Ci(k,I)}else Ci(k,s.run(()=>A({store:k,app:n._a,pinia:n,options:a})))}),k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),p&&o&&r.hydrate&&r.hydrate(k.$state,p),u=!0,c=!0,k}function Hp(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function s(a,l){const u=Bk();if(a=a||u&&Ln(R9),a&&up(a),!OS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=OS,a._s.has(n)||(o?NS(n,t,i,a):$A(n,i,a),s._pinia=a);const c=a._s.get(n);if(l){const f="__hot:"+n,h=o?NS(f,t,i,a,!0):$A(f,Ci({},i),a,!0);l._hotUpdate(h),delete a.state.value[f],a._s.delete(f)}if(pa&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return s.$id=n,s}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ac=typeof window<"u";function VX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function Ry(e,t){const r={};for(const n in t){const i=t[n];r[n]=Vi(i)?i.map(e):e(i)}return r}const xd=()=>{},Vi=Array.isArray,UX=/\/$/,WX=e=>e.replace(UX,"");function Dy(e,t,r="/"){let n,i={},o="",s="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),s=t.slice(a,t.length)),n=XX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+s,path:n,query:i,hash:s}}function jX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function zA(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function GX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&uf(t.matched[n],r.matched[i])&&W9(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function uf(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function W9(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!HX(e[r],t[r]))return!1;return!0}function HX(e,t){return Vi(e)?BA(e,t):Vi(t)?BA(t,e):e===t}function BA(e,t){return Vi(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function XX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var cp;(function(e){e.pop="pop",e.push="push"})(cp||(cp={}));var Id;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Id||(Id={}));function YX(e){if(!e)if(Ac){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),WX(e)}const qX=/^[^#]+#/;function ZX(e,t){return e.replace(qX,"#")+t}function KX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const t_=()=>({left:window.pageXOffset,top:window.pageYOffset});function JX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=KX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function VA(e,t){return(history.state?history.state.position-t:-1)+e}const FS=new Map;function QX(e,t){FS.set(e,t)}function tY(e){const t=FS.get(e);return FS.delete(e),t}let eY=()=>location.protocol+"//"+location.host;function j9(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),zA(l,"")}return zA(r,e)+n+i}function rY(e,t,r,n){let i=[],o=[],s=null;const a=({state:h})=>{const d=j9(e,location),p=r.value,v=t.value;let m=0;if(h){if(r.value=d,t.value=h,s&&s===p){s=null;return}m=v?h.position-v.position:0}else n(d);i.forEach(g=>{g(r.value,p,{delta:m,type:cp.pop,direction:m?m>0?Id.forward:Id.back:Id.unknown})})};function l(){s=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:t_()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function UA(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?t_():null}}function nY(e){const{history:t,location:r}=window,n={value:j9(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:eY()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function s(l,u){const c=Ae({},t.state,UA(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function a(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:t_()});o(c.current,c,!0);const f=Ae({},UA(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:a,replace:s}}function iY(e){e=YX(e);const t=nY(e),r=rY(e,t.state,t.location,t.replace);function n(o,s=!0){s||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:ZX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function oY(e){return typeof e=="string"||e&&typeof e=="object"}function G9(e){return typeof e=="string"||typeof e=="symbol"}const $s={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H9=Symbol("");var WA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(WA||(WA={}));function cf(e,t){return Ae(new Error,{type:e,[H9]:!0},t)}function Yo(e,t){return e instanceof Error&&H9 in e&&(t==null||!!(e.type&t))}const jA="[^/]+?",sY={sensitive:!1,strict:!1,start:!0,end:!0},aY=/[.+*?^${}()[\]/\\]/g;function lY(e,t){const r=Ae({},sY,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(aY,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:m,regexp:g}=h;o.push({name:p,repeatable:v,optional:m});const y=g||jA;if(y!==jA){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let b=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=m&&u.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),i+=b,d+=20,m&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function a(u){const c=u.match(s),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:m}=d,g=p in u?u[p]:"";if(Vi(g)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Vi(g)?g.join("/"):g;if(!y)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:s,score:n,keys:o,parse:a,stringify:l}}function uY(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function cY(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=uY(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(GA(n))return 1;if(GA(i))return-1}return i.length-n.length}function GA(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const fY={type:0,value:""},hY=/[a-zA-Z0-9_]/;function dY(e){if(!e)return[[]];if(e==="/")return[[fY]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),s()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:hY.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),s(),i}function pY(e,t,r){const n=lY(dY(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function vY(e,t){const r=[],n=new Map;t=XA({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=mY(c);p.aliasOf=h&&h.record;const v=XA(t,c),m=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)m.push(Ae({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let g,y;for(const b of m){const{path:w}=b;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";b.path=f.record.path+(w&&S+w)}if(g=pY(b,f,v),h?h.alias.push(g):(y=y||g,y!==g&&y.alias.push(g),d&&c.name&&!HA(g)&&s(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],g,h&&h.children[S])}h=h||g,l(g)}return y?()=>{s(y)}:xd}function s(c){if(G9(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(s),c.alias.forEach(s))}}function a(){return r}function l(c){let f=0;for(;f<r.length&&cY(c,r[f])>=0&&(c.record.path!==r[f].record.path||!X9(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!HA(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw cf(1,{location:c});v=h.record.name,d=Ae(gY(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw cf(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const m=[];let g=h;for(;g;)m.unshift(g.record),g=g.parent;return{name:v,path:p,params:d,matched:m,meta:yY(m)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:i}}function gY(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function mY(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:_Y(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function _Y(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function HA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function yY(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function XA(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function X9(e,t){return t.children.some(r=>r===e||X9(e,r))}const Y9=/#/g,bY=/&/g,wY=/\//g,SY=/=/g,TY=/\?/g,q9=/\+/g,kY=/%5B/g,PY=/%5D/g,Z9=/%5E/g,CY=/%60/g,K9=/%7B/g,EY=/%7C/g,J9=/%7D/g,AY=/%20/g;function jk(e){return encodeURI(""+e).replace(EY,"|").replace(kY,"[").replace(PY,"]")}function MY(e){return jk(e).replace(K9,"{").replace(J9,"}").replace(Z9,"^")}function $S(e){return jk(e).replace(q9,"%2B").replace(AY,"+").replace(Y9,"%23").replace(bY,"%26").replace(CY,"`").replace(K9,"{").replace(J9,"}").replace(Z9,"^")}function xY(e){return $S(e).replace(SY,"%3D")}function IY(e){return jk(e).replace(Y9,"%23").replace(TY,"%3F")}function LY(e){return e==null?"":IY(e).replace(wY,"%2F")}function Nm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function OY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(q9," "),s=o.indexOf("="),a=Nm(s<0?o:o.slice(0,s)),l=s<0?null:Nm(o.slice(s+1));if(a in t){let u=t[a];Vi(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function YA(e){let t="";for(let r in e){const n=e[r];if(r=xY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Vi(n)?n.map(o=>o&&$S(o)):[n&&$S(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function RY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Vi(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const DY=Symbol(""),qA=Symbol(""),Gk=Symbol(""),Q9=Symbol(""),zS=Symbol("");function ch(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function da(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,a)=>{const l=f=>{f===!1?a(cf(4,{from:r,to:t})):f instanceof Error?a(f):oY(f)?a(cf(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>a(f))})}function Ny(e,t,r,n){const i=[];for(const o of e)for(const s in o.components){let a=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(NY(a)){const u=(a.__vccOpts||a)[t];u&&i.push(da(u,r,n,o,s))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const c=VX(u)?u.default:u;o.components[s]=c;const h=(c.__vccOpts||c)[t];return h&&da(h,r,n,o,s)()}))}}return i}function NY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ZA(e){const t=Ln(Gk),r=Ln(Q9),n=Ze(()=>t.resolve(Cr(e.to))),i=Ze(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(uf.bind(null,c));if(h>-1)return h;const d=KA(l[u-2]);return u>1&&KA(c)===d&&f[f.length-1].path!==d?f.findIndex(uf.bind(null,l[u-2])):h}),o=Ze(()=>i.value>-1&&zY(r.params,n.value.params)),s=Ze(()=>i.value>-1&&i.value===r.matched.length-1&&W9(r.params,n.value.params));function a(l={}){return $Y(l)?t[Cr(e.replace)?"replace":"push"](Cr(e.to)).catch(xd):Promise.resolve()}return{route:n,href:Ze(()=>n.value.href),isActive:o,isExactActive:s,navigate:a}}const FY=Dk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ZA,setup(e,{slots:t}){const r=Ef(ZA(e)),{options:n}=Ln(Gk),i=Ze(()=>({[JA(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[JA(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:Vk("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),Mc=FY;function $Y(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function zY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Vi(i)||i.length!==n.length||n.some((o,s)=>o!==i[s]))return!1}return!0}function KA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const JA=(e,t,r)=>e!=null?e:t!=null?t:r,BY=Dk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Ln(zS),i=Ze(()=>e.route||n.value),o=Ln(qA,0),s=Ze(()=>{let u=Cr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=Ze(()=>i.value.matched[s.value]);Wg(qA,Ze(()=>s.value+1)),Wg(DY,a),Wg(zS,i);const l=j1();return Co(()=>[l.value,a.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!uf(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=a.value,h=f&&f.components[c];if(!h)return QA(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,m=Vk(h,Ae({},p,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return QA(r.default,{Component:m,route:u})||m}}});function QA(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const t7=BY;function VY(e){const t=vY(e.routes,e),r=e.parseQuery||OY,n=e.stringifyQuery||YA,i=e.history,o=ch(),s=ch(),a=ch(),l=Vg($s);let u=$s;Ac&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ry.bind(null,Y=>""+Y),f=Ry.bind(null,LY),h=Ry.bind(null,Nm);function d(Y,ot){let J,yt;return G9(Y)?(J=t.getRecordMatcher(Y),yt=ot):yt=Y,t.addRoute(yt,J)}function p(Y){const ot=t.getRecordMatcher(Y);ot&&t.removeRoute(ot)}function v(){return t.getRoutes().map(Y=>Y.record)}function m(Y){return!!t.getRecordMatcher(Y)}function g(Y,ot){if(ot=Ae({},ot||l.value),typeof Y=="string"){const vt=Dy(r,Y,ot.path),B=t.resolve({path:vt.path},ot),j=i.createHref(vt.fullPath);return Ae(vt,B,{params:h(B.params),hash:Nm(vt.hash),redirectedFrom:void 0,href:j})}let J;if("path"in Y)J=Ae({},Y,{path:Dy(r,Y.path,ot.path).path});else{const vt=Ae({},Y.params);for(const B in vt)vt[B]==null&&delete vt[B];J=Ae({},Y,{params:f(Y.params)}),ot.params=f(ot.params)}const yt=t.resolve(J,ot),Et=Y.hash||"";yt.params=c(h(yt.params));const xt=jX(n,Ae({},Y,{hash:MY(Et),path:yt.path})),ht=i.createHref(xt);return Ae({fullPath:xt,hash:Et,query:n===YA?RY(Y.query):Y.query||{}},yt,{redirectedFrom:void 0,href:ht})}function y(Y){return typeof Y=="string"?Dy(r,Y,l.value.path):Ae({},Y)}function b(Y,ot){if(u!==Y)return cf(8,{from:ot,to:Y})}function w(Y){return k(Y)}function T(Y){return w(Ae(y(Y),{replace:!0}))}function S(Y){const ot=Y.matched[Y.matched.length-1];if(ot&&ot.redirect){const{redirect:J}=ot;let yt=typeof J=="function"?J(Y):J;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=y(yt):{path:yt},yt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in yt?{}:Y.params},yt)}}function k(Y,ot){const J=u=g(Y),yt=l.value,Et=Y.state,xt=Y.force,ht=Y.replace===!0,vt=S(J);if(vt)return k(Ae(y(vt),{state:Et,force:xt,replace:ht}),ot||J);const B=J;B.redirectedFrom=ot;let j;return!xt&&GX(n,yt,J)&&(j=cf(16,{to:B,from:yt}),At(yt,yt,!0,!1)),(j?Promise.resolve(j):A(B,yt)).catch(X=>Yo(X)?Yo(X,2)?X:rt(X):K(X,B,yt)).then(X=>{if(X){if(Yo(X,2))return k(Ae({replace:ht},y(X.to),{state:Et,force:xt}),ot||B)}else X=L(B,yt,!0,ht,Et);return I(B,yt,X),X})}function x(Y,ot){const J=b(Y,ot);return J?Promise.reject(J):Promise.resolve()}function A(Y,ot){let J;const[yt,Et,xt]=UY(Y,ot);J=Ny(yt.reverse(),"beforeRouteLeave",Y,ot);for(const vt of yt)vt.leaveGuards.forEach(B=>{J.push(da(B,Y,ot))});const ht=x.bind(null,Y,ot);return J.push(ht),Yu(J).then(()=>{J=[];for(const vt of o.list())J.push(da(vt,Y,ot));return J.push(ht),Yu(J)}).then(()=>{J=Ny(Et,"beforeRouteUpdate",Y,ot);for(const vt of Et)vt.updateGuards.forEach(B=>{J.push(da(B,Y,ot))});return J.push(ht),Yu(J)}).then(()=>{J=[];for(const vt of Y.matched)if(vt.beforeEnter&&!ot.matched.includes(vt))if(Vi(vt.beforeEnter))for(const B of vt.beforeEnter)J.push(da(B,Y,ot));else J.push(da(vt.beforeEnter,Y,ot));return J.push(ht),Yu(J)}).then(()=>(Y.matched.forEach(vt=>vt.enterCallbacks={}),J=Ny(xt,"beforeRouteEnter",Y,ot),J.push(ht),Yu(J))).then(()=>{J=[];for(const vt of s.list())J.push(da(vt,Y,ot));return J.push(ht),Yu(J)}).catch(vt=>Yo(vt,8)?vt:Promise.reject(vt))}function I(Y,ot,J){for(const yt of a.list())yt(Y,ot,J)}function L(Y,ot,J,yt,Et){const xt=b(Y,ot);if(xt)return xt;const ht=ot===$s,vt=Ac?history.state:{};J&&(yt||ht?i.replace(Y.fullPath,Ae({scroll:ht&&vt&&vt.scroll},Et)):i.push(Y.fullPath,Et)),l.value=Y,At(Y,ot,J,ht),rt()}let N;function z(){N||(N=i.listen((Y,ot,J)=>{if(!Zt.listening)return;const yt=g(Y),Et=S(yt);if(Et){k(Ae(Et,{replace:!0}),yt).catch(xd);return}u=yt;const xt=l.value;Ac&&QX(VA(xt.fullPath,J.delta),t_()),A(yt,xt).catch(ht=>Yo(ht,12)?ht:Yo(ht,2)?(k(ht.to,yt).then(vt=>{Yo(vt,20)&&!J.delta&&J.type===cp.pop&&i.go(-1,!1)}).catch(xd),Promise.reject()):(J.delta&&i.go(-J.delta,!1),K(ht,yt,xt))).then(ht=>{ht=ht||L(yt,xt,!1),ht&&(J.delta&&!Yo(ht,8)?i.go(-J.delta,!1):J.type===cp.pop&&Yo(ht,20)&&i.go(-1,!1)),I(yt,xt,ht)}).catch(xd)}))}let V=ch(),F=ch(),G;function K(Y,ot,J){rt(Y);const yt=F.list();return yt.length?yt.forEach(Et=>Et(Y,ot,J)):console.error(Y),Promise.reject(Y)}function q(){return G&&l.value!==$s?Promise.resolve():new Promise((Y,ot)=>{V.add([Y,ot])})}function rt(Y){return G||(G=!Y,z(),V.list().forEach(([ot,J])=>Y?J(Y):ot()),V.reset()),Y}function At(Y,ot,J,yt){const{scrollBehavior:Et}=e;if(!Ac||!Et)return Promise.resolve();const xt=!J&&tY(VA(Y.fullPath,0))||(yt||!J)&&history.state&&history.state.scroll||null;return su().then(()=>Et(Y,ot,xt)).then(ht=>ht&&JX(ht)).catch(ht=>K(ht,Y,ot))}const Ft=Y=>i.go(Y);let Pt;const Ct=new Set,Zt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:v,resolve:g,options:e,push:w,replace:T,go:Ft,back:()=>Ft(-1),forward:()=>Ft(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:F.add,isReady:q,install(Y){const ot=this;Y.component("RouterLink",Mc),Y.component("RouterView",t7),Y.config.globalProperties.$router=ot,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Cr(l)}),Ac&&!Pt&&l.value===$s&&(Pt=!0,w(i.location).catch(Et=>{}));const J={};for(const Et in $s)J[Et]=Ze(()=>l.value[Et]);Y.provide(Gk,ot),Y.provide(Q9,Ef(J)),Y.provide(zS,l);const yt=Y.unmount;Ct.add(Y),Y.unmount=function(){Ct.delete(Y),Ct.size<1&&(u=$s,N&&N(),N=null,l.value=$s,Pt=!1,G=!1),yt()}}};return Zt}function Yu(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function UY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const a=t.matched[s];a&&(e.matched.find(u=>uf(u,a))?n.push(a):r.push(a));const l=e.matched[s];l&&(t.matched.find(u=>uf(u,l))||i.push(l))}return[r,n,i]}function WY(e){return`data/icons/item/${e}.webp`}function jY(e){return`<img src="${WY(e)}" class="iconitem" />`}function st(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function va(e,t){return e+(t-e)*Math.random()}function GY(e){return typeof e=="number"&&isFinite(e)}function ei(e){return!isNaN(e)&&isFinite(e)}function HY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function XY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function YY(e,t,r,n=.5,i=120,o=0){var s=1,a=r-t;return a!=0&&(s=(e-t)/a),`hsla(${s*(i-o)+o}, 100%, 50%, ${n})`}function qY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function t4(e){const t=/\d+/g;return e.match(t).join("-")}function e_(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function Ld(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let s=t.level+1;s<=n;s++)t.level=s,t.wspdSheet+=va(i.wspd_lo,i.wspd_hi)/1e6,o+=va(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=va(i.luck_lo,i.luck_hi)/1e4,s%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}function e4(e){const t=Math.floor(e*3600),r=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60,o=String(r).padStart(2,"0"),s=String(n).padStart(2,"0"),a=String(i).padStart(2,"0");return`${o}:${s}:${a}`}const Wt=Hp({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionResources:{},allowFloating:!1,useFloatingResources:{},regionResources2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,farmingP2WShare:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:1},mapHideInactive:0,mapIconSize:30,wasmRouting:!1,palaceEnable:!1,palaceProfit:0,tradeDestinations:{},tradeRouteAlwaysOn:{},tradeInfraCp:{},tradeRouteCp:{},tradingLevel:91}),actions:{migrate(e){var n;if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([i,o])=>o===!0).map(([i,o])=>Number(i)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(i=>{i.job==1049&&(i.job=null,r=!0)}),"grindTakenList"in t){const i=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),o=t.grindTakenList.filter(s=>!i.has(s));t.grindTakenList.length>o.length&&(t.grindTakenList=o,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(i=>{var o;if(typeof i.job=="number"){const s=i.job;i.job={kind:"plantzone",pzk:s,storage:i.tnk},r=!0}else((o=i==null?void 0:i.job)==null?void 0:o.kind)==="plantzone"&&("storage"in i.job||(i.job.storage=i.tnk,r=!0));Array.isArray(i.job)&&(i.job={kind:"custom",profit:i.job[1],cp:i.job[2],label:i.job[3]})}),"farmingP2W"in t&&(t.farmingP2WShare=t.farmingP2W?80:0,delete t.farmingP2W,r=!0),"regionModifiers"in t&&(t.regionResources=t.regionModifiers,delete t.regionModifiers),"useFloatingModifiers"in t&&(t.useFloatingResources=t.useFloatingModifiers,delete t.useFloatingModifiers),"regionModifiers2"in t&&(t.regionResources2=t.regionModifiers2,delete t.regionModifiers2),((n=t==null?void 0:t.defaultUserWorkshop)==null?void 0:n.manualCp)==0&&(t.defaultUserWorkshop.manualCp=1),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=gt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){if(console.log("assigning",e.label,"to",e.job),(t==null?void 0:t.kind)=="plantzone"&&t.storage==null)throw Error("storage undefined");var r=this.userWorkers.indexOf(e);this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t},chanceAtResource(e,t){if(t==0)return 100;if(!gt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined resource% at rgk",e);const n=HY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const s=this.modSorteds[e][n],a=this.modTimes[e][s];if(n==i)return a;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-s)/(l-s);return a+c*(u-a)},tierResources(e,t,r){const n=[];let i=0;const o=t,s=2*o,a=Math.ceil(o/r),l=Math.ceil(s/r);for(let u=a;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtResource(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const s=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingResources[t])for(const a of this.tierResources(t,e,r)){const l=Math.ceil(a.wld/r),u=10*l+s;o+=24*60*a.time/100/u}else{const a=e*(2-this.productivity(t)),l=Math.ceil(a/r),u=10*l+s;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]},workerLabel(e){let t=this.displayWorkerNames?e.label:"";const r=gt();return r&&r.ready&&(t+=r.speciesIcons[r.workerStatic[e.charkey].species]),t+=e.level,t},getUserWorkshop(e){return e in this.userWorkshops||(this.userWorkshops[e]={...this.defaultUserWorkshop}),this.userWorkshops[e]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=gt();return Object.keys(e.regionGroups).filter(r=>this.useFloatingResources.hasOwnProperty(r)&&this.useFloatingResources[r])},modHists(){const e={},t=gt();for(const r of Object.keys(t.regionGroups))this.regionResources.hasOwnProperty(r)?e[r]=[this.regionResources[r]]:e[r]=[0];for(const r of this.floatingRegionGroups){this.regionResources2.hasOwnProperty(r)||(this.regionResources2[r]=[0]);const n=this.regionResources2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}return e},medianResources(){const e={};for(const[t,r]of Object.entries(this.modHists)){let n=0;const i=r.length;if(i%2)n=r[(i-1)/2];else{const o=r[(i-1-1)/2],s=r[(i-1+1)/2];n=(o+s)/2}e[t]=n}return e},medianWorkloads(){const e={},t=gt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianResources[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=gt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},s=this.modHists[n][0],a=this.modHists[n][i-1];if(s==a)o[s]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==s){o[f]=100*c/(i-1);continue}if(f==a){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=gt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionResources?e.regionResources[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=gt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=gt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=gt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=gt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=gt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=gt().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?gt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},routing(e){return e.wasmRouting?this.routingWasm:this.routingOld},routingOld(e){return{autotakenGrindNodes:this.autotakenGrindNodes,pzWsJobs:this.pzWsJobs}},routingWasm(e){const t={autotakenGrindNodes:new Set,pzWsJobs:{pz:{},ws:[],map:[],nodeUsedbyJob:{}}},r=gt();if(!r.ready)return t;const n=[],i=[];for(const a of e.grindTakenList)n.push([a,99999]);this.workingWorkers.forEach(a=>{const l=a.tnk;var u;if(r.jobIsPz(a.job))u=a.job.pzk;else if(r.jobIsWorkshop(a.job)){const c=a.job.hk,f=r.houseInfo[c].affTown;u=r.tk2tnk(f)}else return;i.push(n.length),n.push([u,l])});let o=[];if(n.length>0){const a=performance.now();o=r.wasmRouter.solveForTerminalPairs(n);const l=performance.now()-a;console.log("wasm took",l.toFixed(2),"ms")}o=this.applyWorkarounds(o,n);const s={};for(const a of e.grindTakenList){const[l,u]=r.miniDijkstra(o,a,99999);l.forEach(c=>t.autotakenGrindNodes.add(c))}return console.log("autotakenGrindNodes",t.autotakenGrindNodes),i.forEach(a=>{const[l,u]=n[a],[c,f]=r.miniDijkstra(o,l,u),h={usedPath:c,usedPathCost:f};u in s||(s[u]={}),s[u][l]=h}),this.workingWorkers.forEach(a=>{if(r.jobIsPz(a.job)){const l=a.job.pzk;if(!l)return;const u=r.workerStatsOnPlantzone(a),c=r.profitPzTownStats(l,a.tnk,u.wspd,u.mspd,u.luck,r.isGiant(a.charkey)),f=s[a.tnk][l],h={pzk:l,worker:a,profit:c,...f};t.pzWsJobs.pz[l]=h,t.pzWsJobs.map.push(h)}else if(r.jobIsWorkshop(a.job)){const l=a.job.hk,u=this.getUserWorkshop(l),c=r.houseInfo[l].affTown,f=r.tk2tnk(c),h=r.profitWorkshopWorker(l,u,a),d=s[a.tnk][f],p={hk:l,worker:a,profit:h,...d};t.pzWsJobs.ws.push(p),t.pzWsJobs.map.push(p)}}),t},grindTakenDesc(e){let t="";const r=gt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=gt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!1,!0).sort((u,c)=>u[1]-c[1]),[s,a,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes",t),t},autotakenGrindNodesCP(e){const t=gt();return[...e.routing.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0)},autotakenNodes(e){const t=new Set([...e.routing.autotakenGrindNodes]);for(const n of e.mapJobs)n.usedPath&&n.usedPath.forEach(i=>t.add(i));const r=gt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!1,!0).sort((l,u)=>l[1]-u[1]),[o,s,a]=i[0];a.forEach(l=>t.add(l))}return t},autotakenNodesCP(e){const t=gt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzWsJobs(e){const t={pz:{},ws:[],map:[],nodeUsedbyJob:{}},r=gt();if(!r.ready)return t;const n=[];this.workingWorkers.forEach(o=>{const s={source:o.tnk};if(r.jobIsPz(o.job)){const a=o.job.pzk;s.target=a}else if(r.jobIsWorkshop(o.job)){const a=o.job.hk,l=r.houseInfo[a].affTown,u=r.tk2tnk(l);s.target=u}else return;n.push(s)});var i;return e.wasmRouting?i=r.routeWasm(e.grindTakenList,n).routeInfos:i=r.routeOld(e.autotakenGrindNodes,n).routeInfos,this.workingWorkers.forEach(o=>{if(r.jobIsPz(o.job)){const s=o.job.pzk;if(!s)return;const a=r.workerStatsOnPlantzone(o),l=r.profitPzTownStats(s,o.tnk,a.wspd,a.mspd,a.luck,r.isGiant(o.charkey)),u=i[o.tnk][s],c={pzk:s,worker:o,profit:l,...u};t.pz[s]=c,t.map.push(c)}else if(r.jobIsWorkshop(o.job)){const s=o.job.hk,a=this.getUserWorkshop(s),l=r.houseInfo[s].affTown,u=r.tk2tnk(l),c=r.profitWorkshopWorker(s,a,o);let f=0,h=!1;const d=o.job.recipe;if(r.craftInputs&&d in r.craftInputs){const m=r.craftInputs[d];for(const g of Object.keys(m))m[g]>=10&&(h=!0);if(h)for(const g of o.skills)g>0&&("thrifty5"in r.skillData[g]&&(f+=5),"thrifty7"in r.skillData[g]&&(f+=7),"thrifty10"in r.skillData[g]&&(f+=10))}const p=i[o.tnk][u],v={hk:s,worker:o,profit:c,thriftyPercent:f,...p};t.ws.push(v),t.map.push(v)}}),t},pzJobs(e){return e.pzWsJobs.pz},wsJobs(e){return e.pzWsJobs.ws},mapJobs(e){return e.pzWsJobs.map},currentNodesJobs(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n].push(r):t[n]=[r]);return t},currentNodesCashflow(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n]+=r.profit.priceDaily:t[n]=r.profit.priceDaily);return t},pzjobsSharedConnectionCP(e){const t={},r=gt();for(const[n,i]of Object.entries(e.pzJobs))t[n]={value:0,tooltip:""},i.usedPath&&i.usedPath.forEach(function(o){if(e.routing.autotakenGrindNodes.has(o))return t;const s=i.profit.priceDaily/e.currentNodesCashflow[o],a=r.nodes[o].CP*s;t[n].value+=a,t[n].tooltip+=`${st(a,3)} ${r.nodeName(o)}
`});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedConnectionCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},newWorkerName:e=>t=>{const n=gt().uloc.town[t].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),i=e.townWorkers(t).length+1;return n+i},workerBringsItemkeys:e=>t=>{const r=gt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=gt();return r.ready&&(r.townsWithRedirectableStorage.forEach(n=>t[r.tnk2tk(n)]=new Set([])),e.workingWorkers.forEach(n=>{if(r.jobIsPz(n.job)){const i=r.tnk2tk(n.job.storage);t[i]=new Set([...t[i],...r.plantzones[n.job.pzk].itemkeys])}})),t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=gt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,s=n+(n>0?1:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,s)},townInfraAddCost:e=>(t,r,n,i)=>{if(i&&t==i){const o=t,s=e.townsInfra[o],a=new Set([...e.townsStoreItemkeys[o],...n]).size,l=e.townInfra(o,e.townWorkingWorkers(o).length+r,a),c=gt().uloc.town[o]+` housing:
old: ${Math.max(0,s.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,s.wantStorage)}\u{1F4E6} = ${st(s.cost)} CP
new: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${st(l.cost)} CP`;return{cost:l.cost-s.cost,tooltip:c,storageTk:i}}else{const o=e.townsInfra[t],s=e.townsStoreItemkeys[t].size,a=e.townInfra(t,e.townWorkingWorkers(t).length+r,s),l=[],u=[],c={};if(i)u.push(i);else{c.sameTown=e.townInfraAddCost(t,r,n,t);for(const y of Object.keys(e.townsInfra))y!=t&&u.push(y)}for(const y of u){const b=e.townsInfra[y],w=new Set([...e.townsStoreItemkeys[y],...n]).size,T=e.townInfra(y,e.townWorkingWorkers(y).length+r,w);if(T.errL||T.errS)continue;const S=isNaN(T.cost)?Number.POSITIVE_INFINITY:T.cost-b.cost;if(l.push({storTk:y,storageOldInfra:b,storageNewInfra:T,storageCostDelta:S}),S==0)break}l.sort((y,b)=>y.storageCostDelta-b.storageCostDelta);const{storTk:f,storageOldInfra:h,storageNewInfra:d,storageCostDelta:p}=l[0],v=p+a.cost-o.cost,m=gt();if(c.sameTown&&c.sameTown.cost<=v)return c.sameTown;const g=m.uloc.town[t]+` lodging:
old: ${Math.max(0,o.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,o.wantStorage)}\u{1F4E6} = ${st(o.cost)} CP
new: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${st(a.cost)} CP
`+m.uloc.town[f]+` storage:
old: ${Math.max(0,h.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,h.wantStorage)}\u{1F4E6} = ${st(h.cost)} CP
new: ${Math.max(0,d.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,d.wantStorage)}\u{1F4E6} = ${st(d.cost)} CP`;return{cost:p+a.cost-o.cost,tooltip:g,storageTk:f}}},townsInfra(e){const t={},r=gt();return r.ready&&r.townsWithRedirectableStorage.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},townsTopIncomeWorkers(e){const t={},r=gt();if(!r.ready)return t;r.townsWithLodging.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,s)=>e.workerIncome(s)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=gt();if(!n.ready)return r;const i=[];n.townsWithRedirectableStorage.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let v=-1/0,m=null;var o,s,a;for(const g of u){const y=e.workerIncome(g),b=e.workerBringsItemkeys(g),w=new Set([...f,...b]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+y)/(T.cost-p);(S>v||!(S<v)&&y>s)&&(v=S,m=g,o=w,s=y,a=T.cost)}if(!m)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=s,r[l].push({w:m,curL:c,curS:f.size,addI:s,curI:h,cost:a,eff:v}),u.splice(u.indexOf(m),1)}for(let v=0;v<r[l].length;v++){const m=r[l][v];let g=v-1;for(;g>=0&&r[l][g].cost==m.cost;)g--;const y=g>=0?r[l][g]:{curI:0,cost:p};m.delta_eff=(m.curI-y.curI)/(m.cost-y.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},workerIncome:e=>t=>{const r=gt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job)){if(e.pzJobs[t.job.pzk]==null)throw Error(`pzjob ${t.job.pzk} is undefined`);return e.pzJobs[t.job.pzk].profit.priceDaily}if(r.jobIsFarming(t.job))return e.farmingProfitPerWorker;if(r.jobIsCustom(t.job))return t.job.profit;if(r.jobIsWorkshop(t.job)){const n=t.job.hk,i=e.getUserWorkshop(n);return r.profitWorkshopWorker(n,i,t).priceDaily}},workerSharedConnectionCP:e=>t=>{let r;const n=gt();if(n.jobIsPz(t.job)&&(r=e.pzjobsSharedConnectionCP[t.job.pzk].value),n.jobIsFarming(t.job)&&(r=0),n.jobIsCustom(t.job)&&(r=t.job.cp),n.jobIsWorkshop(t.job)){const i=e.workersWorkshop.filter(o=>o.job.hk==t.job.hk).length;r=e.getUserWorkshop(t.job.hk).manualCp/i}return r},workerSharedLodgageCP:e=>t=>{const r={value:void 0,tooltip:"?"},n=gt();if(!n.ready)return r;const i=e.workerIncome(t),o=n.tnk2tk(t.tnk),s=e.townsInfra[o].cost,a=e.userWorkers.filter(u=>n.tnk2tk(u.tnk)==o).length,l=e.townsTotalIncome[o].income;return e.townsTotalIncome[o].hasNegativeJob||l==0?(r.value=s/a,r.tooltip=`= total lodgage costs of hometown shared equally between all active jobs from that town:
${s}CP / ${a}`):a==1?(r.value=s,r.tooltip=`= all costs of ${n.nodeName(t.tnk)} lodgage`):(r.value=s*(i/l),r.tooltip=`= total lodgage costs of hometown shared proportionally between all active jobs from that town:
${s}CP * (${st(i,3)} / ${st(l,3)})`),r},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t),n=e.workerSharedConnectionCP(t),i=e.workerSharedLodgageCP(t).value,o=r/(n+i);return isNaN(o)&&console.log(`workerIncomePerCp: ${st(r,2)} / (${st(n,2)} + ${st(i,2)}) = ${st(o,2)} for worker ${t.label}`),o},workersSortedByIncomePerCp(e){const t=[];return e.workingWorkers.forEach(r=>{t.push({w:r,i:e.workerIncome(r),ipc:e.workerIncomePerCp(r)})}),t.sort((r,n)=>isNaN(r.ipc)?-1:isNaN(n.ipc)||!isFinite(r.ipc)?1:isFinite(n.ipc)?r.ipc-n.ipc:-1),t},townsTotalIncome(e){const t={},r=gt();if(!r.ready)return t;r.townsWithLodging.forEach(n=>{const i=r.tnk2tk(n);t[i]={income:0,mapCp:0,hasNegativeJob:!1}});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk),s=e.workerIncome(i);t[o].income+=s,t[o].mapCp+=e.workerSharedConnectionCP(i),s<0&&(t[o].hasNegativeJob=!0)}for(const[n,i]of Object.entries(t)){const o=e.townsInfra[n].cost;i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgageCP(n.worker).value;return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80-e.farmingP2WShare:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=gt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.getUserWorkshop(r).manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=gt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.profit),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.cp),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},customJobsCp(e){const t={},r=gt();return r.ready&&(e.workersCustom.forEach(n=>{const i=r.tnk2tk(n.tnk);i in t||(t[i]=0),t[i]+=n.job.cp}),console.log("customJobsCp",t)),t},totalCP(e){return e.autotakenNodesCP+e.farmingCP+e.lodgage+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},workerPzStats(e){const t=gt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=gt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],s=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=s/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return t},cyclesTally(e){let t={pz:0,workshop:0,chicken:0};const r=gt();return r.ready&&(this.workingWorkers.forEach(n=>{if(!!n){if(r.jobIsPz(n.job)){const i=e.pzJobs[n.job.pzk];t.pz+=i.profit.cyclesDaily}if(r.jobIsWorkshop(n.job)){const i=n.job.hk,o=e.getUserWorkshop(i);t.workshop+=r.measureWorkshopWorker(i,o,n).cyclesDaily}}}),t.chicken=(t.pz+t.workshop)/3),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t},bargainBonus(){return this.tradingLevel*.005},applyWorkarounds:e=>(t,r)=>{const n=gt(),i={1152:1002};for(const o of e.grindTakenList)if(o in i){const s=o,a=i[o],l=[];for(const h of r)l.push(h[0]==s&&h[1]==99999?[s,a]:h);const u=n.wasmRouter.solveForTerminalPairs(l),c=u.reduce((h,d)=>h+n.nodes[d].CP,0),f=t.reduce((h,d)=>h+n.nodes[d].CP,0);if(c<f)return console.log(`workaround applied (${c} < ${f})`),u}return t}}}),wn=Hp({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=Wt(),n=`https://apiv2.bdolytics.com/${t.selectedLang=="jp"?"ja":t.selectedLang}/${t.selectedRegion}/market/central-market-data`,i=await(await fetch(n)).json(),o=gt(),s=new Set(o.itemKeys);s.add(9492);const a={};i.data.forEach(l=>{(s.has(l.item_id)||o.ready&&o.craftInputItemKeySet.has(l.item_id))&&(a[l.item_id]=l.price)});for(const l of Object.keys(o.vendorPrices))t.keepItems[l]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4202 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:Wt().itemUrl+e},priceBunch(e){const t={val:null,desc:""};if(e===null||typeof e>"u")return t;t.val=0;for(const[r,n]of Object.entries(e))if(r in this.prices){const i=this.prices[r]*n;t.val+=i;const o=this.prices[r],s=`${o}`.length<8?`${o}`:st(o,3),a=`${n}`.length<8?`${n}`:st(n,3),l=`${i}`.length<8?`${i}`:st(i);t.desc+=`${s} x ${a} = ${l}
`}else t.val=NaN,t.desc+=`??? x ${n} = ???
`;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky).val;if(e.lucky){const n=this.priceBunch(e.lucky).val;return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=Wt(),r=gt();let n={};for(const[i,o]of Object.entries(t.customPrices))o!==""&&(n[i]=o);for(const[i,o]of Object.entries(this.apiPrices))i in n||(n[i]=o);for(const[i,o]of Object.entries(r.vendorPrices))i in n||(n[i]=o);for(const i of Object.keys(n))i in t.keepItems&&t.keepItems[i]||i in r.vendorPrices||(n[i]*=t.selectedTax);for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[s,a]of Object.entries(o))n[i]+=n[s]*a}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var BS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e7={exports:{}},r7={exports:{}};(function(e,t){(function(){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m;i=Math.floor,f=Math.min,n=function(g,y){return g<y?-1:g>y?1:0},c=function(g,y,b,w,T){var S;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)S=i((b+w)/2),T(y,g[S])<0?w=S:b=S+1;return[].splice.apply(g,[b,b-b].concat(y)),y},a=function(g,y,b){return b==null&&(b=n),g.push(y),v(g,0,g.length-1,b)},s=function(g,y){var b,w;return y==null&&(y=n),b=g.pop(),g.length?(w=g[0],g[0]=b,m(g,0,y)):w=b,w},u=function(g,y,b){var w;return b==null&&(b=n),w=g[0],g[0]=y,m(g,0,b),w},l=function(g,y,b){var w;return b==null&&(b=n),g.length&&b(g[0],y)<0&&(w=[g[0],y],y=w[0],g[0]=w[1],m(g,0,b)),y},o=function(g,y){var b,w,T,S,k,x;for(y==null&&(y=n),S=function(){x=[];for(var A=0,I=i(g.length/2);0<=I?A<I:A>I;0<=I?A++:A--)x.push(A);return x}.apply(this).reverse(),k=[],w=0,T=S.length;w<T;w++)b=S[w],k.push(m(g,b,y));return k},p=function(g,y,b){var w;if(b==null&&(b=n),w=g.indexOf(y),w!==-1)return v(g,0,w,b),m(g,w,b)},h=function(g,y,b){var w,T,S,k,x;if(b==null&&(b=n),T=g.slice(0,y),!T.length)return T;for(o(T,b),x=g.slice(y),S=0,k=x.length;S<k;S++)w=x[S],l(T,w,b);return T.sort(b).reverse()},d=function(g,y,b){var w,T,S,k,x,A,I,L,N;if(b==null&&(b=n),y*10<=g.length){if(S=g.slice(0,y).sort(b),!S.length)return S;for(T=S[S.length-1],I=g.slice(y),k=0,A=I.length;k<A;k++)w=I[k],b(w,T)<0&&(c(S,w,0,null,b),S.pop(),T=S[S.length-1]);return S}for(o(g,b),N=[],x=0,L=f(y,g.length);0<=L?x<L:x>L;0<=L?++x:--x)N.push(s(g,b));return N},v=function(g,y,b,w){var T,S,k;for(w==null&&(w=n),T=g[b];b>y;){if(k=b-1>>1,S=g[k],w(T,S)<0){g[b]=S,b=k;continue}break}return g[b]=T},m=function(g,y,b){var w,T,S,k,x;for(b==null&&(b=n),T=g.length,x=y,S=g[y],w=2*y+1;w<T;)k=w+1,k<T&&!(b(g[w],g[k])<0)&&(w=k),g[y]=g[w],y=w,w=2*y+1;return g[y]=S,v(g,x,y,b)},r=function(){g.push=a,g.pop=s,g.replace=u,g.pushpop=l,g.heapify=o,g.updateItem=p,g.nlargest=h,g.nsmallest=d;function g(y){this.cmp=y!=null?y:n,this.nodes=[]}return g.prototype.push=function(y){return a(this.nodes,y,this.cmp)},g.prototype.pop=function(){return s(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},g.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},g.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},g.prototype.heapify=function(){return o(this.nodes,this.cmp)},g.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var y;return y=new g,y.nodes=this.nodes.slice(0),y},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,y){return e.exports=y()}(this,function(){return r})}).call(BS)})(r7);(function(e){e.exports=r7.exports})(e7);const ud=ZY(e7.exports);let We,Od=0,cd=null;function qg(){return(cd===null||cd.byteLength===0)&&(cd=new Uint8Array(We.memory.buffer)),cd}const Zg=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},KY=typeof Zg.encodeInto=="function"?function(e,t){return Zg.encodeInto(e,t)}:function(e,t){const r=Zg.encode(e);return t.set(r),{read:e.length,written:r.length}};function Fy(e,t,r){if(r===void 0){const a=Zg.encode(e),l=t(a.length,1)>>>0;return qg().subarray(l,l+a.length).set(a),Od=a.length,l}let n=e.length,i=t(n,1)>>>0;const o=qg();let s=0;for(;s<n;s++){const a=e.charCodeAt(s);if(a>127)break;o[i+s]=a}if(s!==n){s!==0&&(e=e.slice(s)),i=r(i,n,n=s+e.length*3,1)>>>0;const a=qg().subarray(i+s,i+n);s+=KY(e,a).written,i=r(i,n,s,1)>>>0}return Od=s,i}let Ol=null;function no(){return(Ol===null||Ol.buffer.detached===!0||Ol.buffer.detached===void 0&&Ol.buffer!==We.memory.buffer)&&(Ol=new DataView(We.memory.buffer)),Ol}function JY(e){const t=We.__externref_table_alloc();return We.__wbindgen_export_4.set(t,e),t}function $y(e,t){try{return e.apply(this,t)}catch(r){const n=JY(r);We.__wbindgen_exn_store(n)}}function fh(e){return e==null}function VS(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let o="[";i>0&&(o+=VS(e[0]));for(let s=1;s<i;s++)o+=", "+VS(e[s]);return o+="]",o}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(r&&r.length>1)n=r[1];else return toString.call(e);if(n=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:n}const n7=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&n7.decode();function zy(e,t){return e=e>>>0,n7.decode(qg().subarray(e,e+t))}function By(e){const t=We.__wbindgen_export_4.get(e);return We.__externref_table_dealloc(e),t}const r4=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>We.__wbg_wasmnoderouter_free(e>>>0,1));class QY{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,r4.unregister(this),t}free(){const t=this.__destroy_into_raw();We.__wbg_wasmnoderouter_free(t,0)}solveForTerminalPairs(t){const r=We.wasmnoderouter_solveForTerminalPairs(this.__wbg_ptr,t);if(r[2])throw By(r[1]);return By(r[0])}constructor(t){const r=We.wasmnoderouter_new(t);if(r[2])throw By(r[1]);return this.__wbg_ptr=r[0]>>>0,r4.register(this,this.__wbg_ptr,this),this}}async function tq(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function eq(){const e={};return e.wbg={},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,r){const n=String(r),i=Fy(n,We.__wbindgen_malloc,We.__wbindgen_realloc),o=Od;no().setInt32(t+4*1,o,!0),no().setInt32(t+4*0,i,!0)},e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return $y(function(t,r){return t.call(r)},arguments)},e.wbg.__wbg_done_769e5ede4b31c67b=function(t){return t.done},e.wbg.__wbg_entries_3265d4158b33e5dc=function(t){return Object.entries(t)},e.wbg.__wbg_from_2a5d3e218e67aa85=function(t){return Array.from(t)},e.wbg.__wbg_get_67b2ba62fc30de12=function(){return $y(function(t,r){return Reflect.get(t,r)},arguments)},e.wbg.__wbg_get_b9b93047fe3cf45b=function(t,r){return t[r>>>0]},e.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(t){let r;try{r=t instanceof ArrayBuffer}catch{r=!1}return r},e.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(t){let r;try{r=t instanceof Map}catch{r=!1}return r},e.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(t){let r;try{r=t instanceof Uint8Array}catch{r=!1}return r},e.wbg.__wbg_isArray_a1eab7e0d067391b=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},e.wbg.__wbg_length_a446193dc22c12f8=function(t){return t.length},e.wbg.__wbg_length_e2d2a49132c1b256=function(t){return t.length},e.wbg.__wbg_new_78feb108b6472713=function(){return new Array},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_next_25feadfc0913fea9=function(t){return t.next},e.wbg.__wbg_next_6574e1a8a62d1055=function(){return $y(function(t){return t.next()},arguments)},e.wbg.__wbg_push_737cfc8c1432c2c6=function(t,r){return t.push(r)},e.wbg.__wbg_set_65595bdd868b3009=function(t,r,n){t.set(r,n>>>0)},e.wbg.__wbg_value_cd1ffa7b1ab794f1=function(t){return t.value},e.wbg.__wbindgen_as_number=function(t){return+t},e.wbg.__wbindgen_bigint_from_i64=function(t){return t},e.wbg.__wbindgen_bigint_from_u64=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_bigint_get_as_i64=function(t,r){const n=r,i=typeof n=="bigint"?n:void 0;no().setBigInt64(t+8*1,fh(i)?BigInt(0):i,!0),no().setInt32(t+4*0,!fh(i),!0)},e.wbg.__wbindgen_boolean_get=function(t){const r=t;return typeof r=="boolean"?r?1:0:2},e.wbg.__wbindgen_debug_string=function(t,r){const n=VS(r),i=Fy(n,We.__wbindgen_malloc,We.__wbindgen_realloc),o=Od;no().setInt32(t+4*1,o,!0),no().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_error_new=function(t,r){return new Error(zy(t,r))},e.wbg.__wbindgen_in=function(t,r){return t in r},e.wbg.__wbindgen_init_externref_table=function(){const t=We.__wbindgen_export_4,r=t.grow(4);t.set(0,void 0),t.set(r+0,void 0),t.set(r+1,null),t.set(r+2,!0),t.set(r+3,!1)},e.wbg.__wbindgen_is_bigint=function(t){return typeof t=="bigint"},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){const r=t;return typeof r=="object"&&r!==null},e.wbg.__wbindgen_jsval_eq=function(t,r){return t===r},e.wbg.__wbindgen_jsval_loose_eq=function(t,r){return t==r},e.wbg.__wbindgen_memory=function(){return We.memory},e.wbg.__wbindgen_number_get=function(t,r){const n=r,i=typeof n=="number"?n:void 0;no().setFloat64(t+8*1,fh(i)?0:i,!0),no().setInt32(t+4*0,!fh(i),!0)},e.wbg.__wbindgen_number_new=function(t){return t},e.wbg.__wbindgen_string_get=function(t,r){const n=r,i=typeof n=="string"?n:void 0;var o=fh(i)?0:Fy(i,We.__wbindgen_malloc,We.__wbindgen_realloc),s=Od;no().setInt32(t+4*1,s,!0),no().setInt32(t+4*0,o,!0)},e.wbg.__wbindgen_string_new=function(t,r){return zy(t,r)},e.wbg.__wbindgen_throw=function(t,r){throw new Error(zy(t,r))},e}function rq(e,t){return We=e.exports,i7.__wbindgen_wasm_module=t,Ol=null,cd=null,We.__wbindgen_start(),We}async function i7(e){if(We!==void 0)return We;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/workerman/assets/noderouter_bg.b4ca84fd.wasm",self.location));const t=eq();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await tq(await e,t);return rq(r,n)}const gt=Hp({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},regionInfo:{},townsConnectionRoots:new Set,townsWithLodging:[],townsWithRentableStorage:[],townsWithRedirectableStorage:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{},_tk2tnk:{},_tnk2tk:{},craftInputs:{},craftOutputs:{},wasmNodesLinks:{},wasmBaseTowns:new Set,wasmRouter:null}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]),"wspd_refine"in i&&t.startsWith("pack_")&&(r+=i.wspd_refine))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=Wt(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,a=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:a,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(r=>+r)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),console.log("plantzoneStatic",this.plantzoneStatic[1879]),this.itemInfo=await(await fetch("data/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.tk2hk=await(await fetch("data/distances_tk2hk.json")).json(),this.regionInfo=await(await fetch("data/regioninfo.json")).json(),Object.values(this.regionInfo).forEach(({key:r,waypoint:n})=>{n!==0&&(this._tk2tnk[r]=n,this._tnk2tk[n]=r)}),this.townsConnectionRoots=new Set(Object.keys(this.nodes).filter(r=>this.nodes[r].kind>0&&this.nodes[r].kind<3&&this.nodes[r].CP===0).map(r=>this.nodes[r].key)),this.townsWithLodging=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795,1853,1857,1858,1834,1843,2001],this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.townsWithRentableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1853,1857,1834,1843,2001],this.townsWithRedirectableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1834,1843,1850,1853,1857,1858,2001],this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this.industries={unk:"unknown",jewelry:"jewelry",mass:"mass production",weap:"weapon",tool:"tool",furn:"furniture",costume:"costume",refine:"refine",siege:"siege",mount:"mount",exclus:"exclusive",pack_produce:"pack_produce",pack_herb:"pack_herb",pack_mushr:"pack_mushr",pack_fish:"pack_fish",pack_timber:"pack_timber",pack_ore:"pack_ore"};const t={};for(const[r,n]of Object.entries(this.plantzoneStatic))if(r in this.plantzoneDrops){const i=n.regiongroup;i in t?t[i].push(r):t[i]=[r]}this.regionGroups=t,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[r,n]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[r]=Object.keys(n).sort((i,o)=>i-o);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.craftInputs=await(await fetch("data/house_craft_inputs.json")).json(),this.craftOutputs=await(await fetch("data/house_craft_outputs.json")).json(),this.craftInfo=await(await fetch("data/house_craft_info.json")).json(),this.craftInputItemKeySet=new Set;for(const r of Object.values(this.craftInputs))for(const n of Object.keys(r))this.craftInputItemKeySet.add(Number(n));this.traders=await(await fetch("data/manual/traders.json")).json(),await this.initWasmRouter(),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},async initWasmRouter(){this.wasmBaseTowns=new Set;const e={};for(const[t,r]of Object.entries(this.links))e[t]={link_list:r};for(const[t,r]of Object.entries(this.nodes))if(t in e){const n=0<r.kind&&r.kind<3&&r.CP==0;n&&this.wasmBaseTowns.add(r.key),e[t].waypoint_key=r.key,e[t].need_exploration_point=r.CP,e[t].is_base_town=n}await i7(),this.wasmRouter=new QY(e)},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e)}},tnk2tk(e){if(this.ready)return this._tnk2tk[e]},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=Wt();let n=new Set;const i={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},s=new ud((u,c)=>i[u]-i[c]);s.push(e);for(var a;s.size()&&(a=s.pop(),!(this.pzdSet.has(a)&&!r.autotakenNodes.has(a)&&(n.add(a),n.size==t)));)this.links[a].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,o[u]=a):(i[u]=f,o[u]=a,s.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new ud((u,c)=>i[u]-i[c]);o.push(e);for(var s;o.size()&&(s=o.pop(),s!=t);)this.links[s].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,n[u]=s):(i[u]=f,n[u]=s,o.push(u))});const a=[t];let l=t;for(;n[l]!==null;)a.push(n[l]),l=n[l];return[a.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n,i,o){if(!this.ready)return;let s=new Set;const a={[e]:null},l={[e]:r&&r.has(e)?0:this.nodes[e].CP},u=new ud((h,d)=>l[h]-l[d]);u.push(e);for(var c;u.size()&&(c=u.pop(),!(this.townsConnectionRoots.has(c)&&(!n||this.townsWithLodgingSet.has(c))&&(c!=1343||!i)&&(s.add(c),s.size==t)));)this.links[c].forEach(h=>{if(this.nodes[h]==null)throw Error(`dijkstraNearestTowns: unknown exploration node ${h}`);if(o&&(c==1727&&h==1800||c==1800&&h==1727))return;const d=r&&r.has(h)?0:this.nodes[h].CP,p=l[c]+d;h in l?p<l[h]&&(l[h]=p,a[h]=c):(l[h]=p,a[h]=c,u.push(h))});const f=[];return s.forEach(h=>{const d=[h];let p=h;for(;a[p]!==null;)d.push(a[p]),p=a[p];f.push([h,l[h],d])}),f},pzSelectionEntry(e,t,r,n,i,o,s,a){const l=Wt(),u=this.profitPzTownStats(e,r,s.wspd,s.mspd,s.luck,this.isGiant(o.charkey)),c=l.townInfraAddCost(t,1,this.plantzones[e].itemkeys,a),f={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:c.cost,infraTooltip:c.tooltip,cp:n+c.cost,profit:u,w:o,statsOnPz:s,storageTnk:this.tk2tnk(c.storageTk)};return f.dailyPerCp=f.profit.priceDaily/(n+c.cost),f.effDelta=l.jobEfficiencyDelta(f.profit.priceDaily,n+c.cost),f},workshopSelectionEntry(e,t,r,n,i,o,s){const a=Wt(),l=a.userWorkshops[e],u=this.profitWorkshopWorker(e,l,i),c=a.townInfraAddCost(t,1,[]),f=o+s+c.cost,h={hk:e,tnk:r,mapCp:o,houseCp:s,path:n,townCp:c.cost,infraTooltip:c.tooltip,cp:f,profit:u,w:i,workshop:l};return h.dailyPerCp=h.profit.priceDaily/f,h.effDelta=a.jobEfficiencyDelta(h.profit.priceDaily,f),h},addBedInfo(e){return Wt().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=Wt(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const s=Wt(),a=wn(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:a.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=s.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"},a=this.medianGiant(t);o=this.profitPzTownStats(e,t,a.wspd+5,a.mspd,a.luck,!0),o.charkey=a.charkey,o.wspd=a.wspd;const l={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},u=l&&l.dailyPerCp>s.dailyPerCp?l:s,c=this.medianHuman(t);o=this.profitPzTownStats(e,t,c.wspd+5,c.mspd,c.luck,!1),o.charkey=c.charkey,o.wspd=c.wspd;const f={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},h=f&&f.dailyPerCp>u.dailyPerCp?f:u,d={[l.charkey]:l.priceDaily,[f.charkey]:f.priceDaily,[s.charkey]:s.priceDaily},p=Object.entries(d).map(([v,m])=>({charkey:v,priceDaily:m}));return p.sort((v,m)=>v&&m&&m.priceDaily-v.priceDaily),h.alt_workers_profits=d,h.alt_workers=p,h.connected=!0,h.cycleValue_gob=s.cycleValue,h.cycleValue_gi=l.cycleValue,h},makeMedianChar(e){const t={level:40},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let a=2;a<=40;a++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let s=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(s)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):e==1857?this.makeMedianChar(8050):e==1858?this.makeMedianChar(8050):e==1853?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):e==1857?this.makeMedianChar(8058):e==1858?this.makeMedianChar(8058):e==1853?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):e==1857?this.makeMedianChar(8054):e==1858?this.makeMedianChar(8054):e==1853?this.makeMedianChar(8054):this.makeMedianChar(7573)},measureWorkshopWorker(e,t,r){const n=Wt(),i=this.workerStatsOnIndustry(r,t.industry),o={statsOnWs:i,distance:999,cyclesDaily:0};if(!this.ready)return o;const s=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(s,i.mspd);let l=NaN;r.job.recipe&&r.job.recipe in this.craftInfo&&(l=this.craftInfo[r.job.recipe].wl);const u=t.manualWorkload?t.manualWorkload:l,c=Math.ceil(u/i.wspd),f=5*c+a,h=24*60/f;return{statsOnWs:i,distance:s,cyclesDaily:h}},repeatsWorkshopWorker(e,t){let r=1;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&t in i&&(r+=i[t])}),r},profitWorkshopWorker(e,t,r){const{statsOnWs:n,distance:i,cyclesDaily:o}=this.measureWorkshopWorker(e,t,r),a=this.repeatsWorkshopWorker(r,t.industry)*o*t.manualCycleIncome/1e6;return{statsOnWs:n,distance:i,cyclesDaily:o,priceDaily:a}},isLodgingTown(e){return typeof e=="string"&&(e=Number(e)),this.tnk2tk(e)in this.lodgingPerTown},isPlantzone(e){return e in this.plantzoneDrops},isConnectionNode(e){return!this.isLodgingTown(e)&&!this.isPlantzone(e)},itemName(e){if(!this.ready)return e;const t=Wt();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=Wt();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){if(t in this.pzk2tk){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1]}else throw new Error(`no distances for pzk ${t}`);return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this._tnk2tk[e];return this.tk2hk[r][t]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return(e==null?void 0:e.kind)=="custom"},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=XY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,s=t>this.townUpperLimits[e].lodging,a=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:s,warnS:a,errS:l},i},routeOld(e,t){const r={routeInfos:{},totalCost:0},n=performance.now(),i=new Set([...e]);t.forEach(s=>{const[a,l]=this.dijkstraPath(s.target,s.source,i);if(!a)return;a.forEach(c=>i.add(c));const u={usedPath:a,usedPathCost:l};s.source in r.routeInfos||(r.routeInfos[s.source]={}),r.routeInfos[s.source][s.target]=u});for(const s of i)r.totalCost+=this.nodes[s].CP;const o=performance.now()-n;return console.log("routeOld took",o.toFixed(2),"ms"),r},routeWasm(e,t){const r={routeInfos:{},totalCost:0},n=[];for(const a of t)n.push([a.target,a.source]);for(const a of e)n.push([a,99999]);if(n.length==0)return r;const i=performance.now(),o=this.wasmRouter.solveForTerminalPairs(n),s=performance.now()-i;console.log("routeWasm took",s.toFixed(2),"ms"),t.forEach(a=>{const[l,u]=this.miniDijkstra(o,a.target,a.source),c={usedPath:l,usedPathCost:u};a.source in r.routeInfos||(r.routeInfos[a.source]={}),r.routeInfos[a.source][a.target]=c});for(const a of o)r.totalCost+=this.nodes[a].CP;return r},miniDijkstra(e,t,r){const n=new Set(e),i={[t]:null},o={[t]:this.nodes[t].CP},s=new ud((c,f)=>o[c]-o[f]);s.push(t);for(var a;s.size()&&(a=s.pop(),!(a==r||r==99999&&this.wasmBaseTowns.has(a)));)this.links[a].forEach(c=>{if(n.has(c)){const f=this.nodes[c].CP,h=o[a]+f;c in o?h<o[c]&&(o[c]=h,i[c]=a):(o[c]=h,i[c]=a,s.push(c))}});const l=[a];let u=a;for(;i[u]!==null;)l.push(i[u]),u=i[u];return[l.reverse(),o[r]]}},getters:{uloc(){const e=Wt();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{},recipe:{}}},townsWithLodgingSet(){return new Set(this.townsWithLodging)},townsWithRentableStorageSet(){return new Set(this.townsWithRentableStorage)},townsWithRedirectableStorageSet(){return new Set(this.townsWithRedirectableStorage)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};this.townsWithRedirectableStorage.forEach(t=>e[this.tnk2tk(t)]=[]);for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=wn(),r=Wt();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const s={...o,...this.plantzoneStatic[i]};s.name=this.plantzoneName(i);const a=t.priceBunch(s.lucky).val;s.unluckyValue=t.priceBunch(s.unlucky).val,s.luckyValue=s.unluckyValue+a,s.unluckyValue_gi=t.priceBunch(s.unlucky_gi).val,s.luckyValue_gi=s.unluckyValue_gi+a,s.activeWorkload=s.workload*(2-r.productivity(s.regiongroup)),s.itemkeys=new Set([...Object.keys(s.unlucky),...Object.keys(s.lucky)]),n[i]=s}return console.log("plantzones getter took",Date.now()-e,"ms"),n},itemkeyPlantzones(){const e={};if(!this.ready)return e;for(const[t,r]of Object.entries(this.plantzones))r.itemkeys.forEach(n=>{n in e||(e[n]=new Set([])),e[n].add(Number(t))});return e}}}),Xp=Hp({id:"map",state:()=>({target:[0,0],zoom:-8})});const Gt=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},nq={class:"wrapper"},iq=R("Home"),oq=R("Plantzones"),sq=R("Resources"),aq=R("Settings"),lq=R("About"),uq={async beforeCreate(){const e=Wt(),t=localStorage.getItem("user");e.migrate(t);const r=Xp(),n=localStorage.getItem("map");r.$patch(JSON.parse(n)),await gt().fetchData();const o=wn(),s=localStorage.getItem("market");s&&o.$patch(JSON.parse(s));const a=3600*1e3;o.apiDatetime+a<Date.now()&&o.fetchData()}},cq=Object.assign(uq,{__name:"App",setup(e){return(t,r)=>(E(),M(W,null,[_("header",null,[_("div",nq,[_("nav",null,[ft(Cr(Mc),{to:"/"},{default:be(()=>[iq]),_:1}),ft(Cr(Mc),{to:"/plantzones"},{default:be(()=>[oq]),_:1}),ft(Cr(Mc),{to:"/resources"},{default:be(()=>[sq]),_:1}),ft(Cr(Mc),{to:"/settings"},{default:be(()=>[aq]),_:1}),ft(Cr(Mc),{to:"/about"},{default:be(()=>[lq]),_:1})])])]),ft(Cr(t7))],64))}}),fq=Gt(cq,[["__scopeId","data-v-d7c97319"]]),hq="modulepreload",dq=function(e){return"/workerman/"+e},n4={},pq=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=dq(i),i in n4)return;n4[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":hq,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},vq={setup(){const e=Wt(),t=gt();return{userStore:e,gameStore:t}},props:{ik:Number,external_link:{type:Boolean,default:!1},with_name:{type:Boolean,default:!1}}},gq=["href"],mq=["src","data-key"];function _q(e,t,r,n,i,o){return E(),M("a",{href:n.userStore.itemUrl+r.ik},[_("img",{src:`data/icons/item/${r.ik}.webp`,class:"iconitem","data-key":r.ik},null,8,mq),r.with_name&&n.gameStore.ready?(E(),M(W,{key:0},[R(C(n.gameStore.uloc.item[r.ik]),1)],64)):Z("",!0)],8,gq)}const fi=Gt(vq,[["render",_q]]),yq={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{w:Object},components:{ItemIcon:fi},methods:{formatFixed:st,extractNumbers:t4,workshop_text(e){const t=e.tnk,r=this.gameStore.uloc.char[e.job.hk];let n=t4(r);if(t){const i=this.gameStore.houseInfo[e.job.hk].affTown,o=this.gameStore.tk2tnk(i);t!=o&&(n=this.gameStore.nodeName(o)+" "+n)}return`${n} ${this.userStore.userWorkshops[e.job.hk].label}`}}},bq=R(" idle "),wq=R(" UNKNOWN_JOBTYPE ");function Sq(e,t,r,n,i,o){const s=Ot("ItemIcon");return n.gameStore.jobIsIdle(r.w.job)?(E(),M(W,{key:0},[bq],64)):n.gameStore.jobIsPz(r.w.job)?(E(),M(W,{key:1},[R(C(n.gameStore.uloc.node[r.w.job.pzk]),1)],64)):n.gameStore.jobIsFarming(r.w.job)?(E(),M(W,{key:2},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)):n.gameStore.jobIsCustom(r.w.job)?(E(),M(W,{key:3},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] "+C(r.w.job.label),1)],64)):n.gameStore.jobIsWorkshop(r.w.job)?(E(),M(W,{key:4},[r.w.job.recipe&&n.gameStore.craftOutputs[r.w.job.recipe]?(E(!0),M(W,{key:0},mt(n.gameStore.craftOutputs[r.w.job.recipe],a=>(E(),Or(s,{ik:a},null,8,["ik"]))),256)):(E(),M(W,{key:1},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)),R(" "+C(o.workshop_text(r.w)),1)],64)):(E(),M(W,{key:5},[wq],64))}const r_=Gt(yq,[["render",Sq]]);const Tq={setup(){const e=gt(),t=Wt();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},emits:["panToPaPos","send","edit"],components:{WorkerJobDescription:r_},data:()=>({}),methods:{formatFixed:st,percentageToColor:YY}},kq=e=>($e("data-v-df4b03fd"),e=e(),ze(),e),Pq={key:0,class:"fss"},Cq={key:1},Eq={key:0,class:"fss"},Aq={key:1},Mq={key:0,class:"fss"},xq={key:1},Iq={class:"center"},Lq=R(" @ "),Oq=R(" idle "),Rq={class:"center"},Dq={key:0},Nq=kq(()=>_("button",{title:"Ancado is not activated, can't house workers",disabled:"true"},"send",-1)),Fq=[Nq];function $q(e,t,r,n,i,o){const s=Ot("WorkerJobDescription");return E(),M("tr",null,[_("td",null,[_("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),_("td",null,C(n.userStore.workerLabel(r.w)),1),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",Pq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(E(),M("span",Cq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",Eq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(E(),M("span",Aq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",Mq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(E(),M("span",xq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),_("td",Iq,[_("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),_("td",null,[r.w.job?(E(),M(W,{key:0},[n.gameStore.jobIsPz(r.w.job)?(E(),M("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("panToPaPos",this.gameStore.nodes[r.w.job.pzk].pos)),class:"clickable"},[ft(s,{w:r.w},null,8,["w"])])):(E(),Or(s,{key:1,w:r.w},null,8,["w"])),Lq,n.userStore.displayProfitPerCp?(E(),M(W,{key:2},[R(C(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:3},[R(C(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(E(),M(W,{key:1},[Oq],64))]),_("td",Rq,[r.w.job?(E(),M("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(E(),M(W,{key:1},[r.unsendable?(E(),M("div",Dq,Fq)):(E(),M("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))],64))])])}const Hk=Gt(Tq,[["render",$q],["__scopeId","data-v-df4b03fd"]]);const zq={setup(){const e=gt(),t=Wt();return{gameStore:e,userStore:t}},props:{o:Object,tk:Number},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:Hk},data:()=>({}),computed:{infra(){if(this.tk in this.userStore.townsInfra)return this.userStore.townsInfra[this.tk];throw console.log(this.userStore.townsInfra),new Error(`no infra for town: ${this.tk}`)}},methods:{formatFixed:st,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},Xk=e=>($e("data-v-bae92347"),e=e(),ze(),e),Bq={colspan:"2"},Vq=R(" worker "),Uq=R(" workers not hireable "),Wq=Xk(()=>_("th",{class:"center"},"\u{1F528}",-1)),jq=Xk(()=>_("th",{class:"center"},"\u{1F9B6}",-1)),Gq=Xk(()=>_("th",{class:"center"},"\u{1F340}",-1)),Hq=R(" \xA0 ");function Xq(e,t,r,n,i,o){const s=Ot("Worker");return E(),M(W,null,[_("thead",null,[_("tr",null,[_("th",Bq,[r.o?(E(),M(W,{key:0},[Vq,_("button",{onClick:t[0]||(t[0]=a=>this.$emit("hireWorker",r.tk))}," hire ")],64)):(E(),M(W,{key:1},[Uq],64))]),Wq,jq,Gq,_("th",{colspan:"3",class:Ir({unresolved:n.gameStore.ready&&o.infra.success==!1})},[_("span",{onClick:t[1]||(t[1]=a=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},C(n.gameStore.nodeName(n.gameStore.tk2tnk(r.tk))),1),R(" "+C()+" ",1),n.userStore.displayProfitPerCp?(E(),M(W,{key:0},[R(C(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),Hq,_("span",null,[R(C(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),_("span",null,C(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),R(" \u{1F4E6} "+C(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost+(r.tk in n.userStore.customJobsCp?n.userStore.customJobsCp[r.tk]:0))+" CP ",1),_("button",{onClick:t[2]||(t[2]=a=>this.$emit("selectHouses",r.tk)),class:Ir({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})}," config ",2)])],2)])]),_("tbody",null,[(E(!0),M(W,null,mt(n.userStore.userWorkers.filter(a=>n.gameStore.tnk2tk(a.tnk)==r.tk),(a,l)=>(E(),Or(s,{w:a,homeless:!0,class:Ir({homeless:0}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(a),onEdit:u=>this.$emit("editWorker",a),onSend:u=>this.$emit("sendWorker",a),onPanToPaPos:t[3]||(t[3]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256))])],64)}const o7=Gt(zq,[["render",Xq],["__scopeId","data-v-bae92347"]]);const Yq={setup(){const e=gt(),t=Wt();return{gameStore:e,userStore:t}},props:{pzk:Number,redirect:Number},emits:[],data:()=>({homeTnk:1,workerKind:"gob",selectedWorkerIndices:{},selectedWorkerPZSEs:{}}),methods:{formatFixed:st,workerStats(e,t){return e=="gia"?this.gameStore.medianGiant(t):e=="hum"?this.gameStore.medianHuman(t):this.gameStore.medianGoblin(t)},profitTownStats(e,t){return this.gameStore.profitPzTownStats(this.pzk,e,t.wspd+5,t.mspd,t.luck,t.isGiant)},assignWorker(e){if(!e.storageTnk)throw Error("no storage");const t=JSON.parse(JSON.stringify(e.w));this.userStore.userWorkers.push(t),this.userStore.assignWorker(t,{kind:"plantzone",pzk:e.pz.key,storage:e.storageTnk})}},computed:{workerKinds(){const e=[];for(const t of["gia","hum","gob"]){const r={kind:t,stats:this.workerStats(t,this.homeTnk)};r.profit=this.profitTownStats(this.homeTnk,r.stats),e.push(r)}return e.sort((t,r)=>r.profit.priceDaily-t.profit.priceDaily),e},selectedWorkerStats(){return this.workerStats(this.workerKind,this.homeTnk)},nearestTowns(){const t=[];return this.gameStore.dijkstraNearestTowns(this.pzk,5,this.userStore.autotakenNodes,!0).forEach(([n,i,o])=>{const s=[],a=this.gameStore._tnk2tk[n],l=this.redirect==-1?a:this.gameStore.tnk2tk(this.redirect),u=this.userStore.townInfraAddCost(a,1,this.gameStore.plantzones[this.pzk].itemkeys,l);for(const c of["gia","hum","gob"]){const f=this.workerStats(c,n),h={tk:a,tnk:n,charkey:f.charkey,label:this.userStore.newWorkerName(a),level:f.level,wspdSheet:f.wspd,mspdSheet:f.mspd,luckSheet:f.luck,skills:[],job:null};h.skills.push(1011);const d=this.gameStore.workerStatsOnPlantzone(h),p=this.gameStore.profitPzTownStats(this.pzk,n,d.wspd,d.mspd,d.luck,this.gameStore.isGiant(h.charkey));if(p.dist>1e6)return;const v={pz:this.gameStore.plantzones[this.pzk],tnk:n,mapCp:i,path:o,townCp:u.cost,infraTooltip:u.tooltip,cp:i+u.cost,profit:p,w:h,statsOnPz:d,storageTnk:this.gameStore.tk2tnk(u.storageTk)};v.dailyPerCp=v.profit.priceDaily/(i+u.cost),v.effDelta=this.userStore.jobEfficiencyDelta(v.profit.priceDaily,i+u.cost);const m={kind:c,stats:f,PZSE:v};s.push(m)}s.length!=0&&(s.sort((c,f)=>f.PZSE.profit.priceDaily-c.PZSE.profit.priceDaily),this.selectedWorkerIndices[n]=0,t.push({tnk:n,workerKinds:s}))}),t.sort((n,i)=>i.workerKinds[0].PZSE.dailyPerCp-n.workerKinds[0].PZSE.dailyPerCp),t}}},s7=e=>($e("data-v-45b5b74e"),e=e(),ze(),e),qq=s7(()=>_("h4",null,"Nearest towns with hireable workers:",-1)),Zq={key:0},Kq=s7(()=>_("tr",null,[_("th",null,"\u{1F6CF}\uFE0Ftown"),_("th",null,"walk"),_("th",null,[R("make new level 40 artisan "),_("abbr",{class:"tooltip",title:"with median stats and a single +5\u{1F528} skill"},"\u2139")]),_("th",null,[R("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),Jq={class:"center"},Qq=["onUpdate:modelValue"],tZ=["value"],eZ={class:"center"},rZ=["title"],nZ=R("+"),iZ=["title"],oZ={class:"center"},sZ={key:0,title:"plantzone already occupied",disabled:"true"},aZ={key:1,title:"Can't find housing, try P2W",disabled:"true"},lZ={key:2,title:"No walk path",disabled:"true"},uZ={key:3,title:"Ancado is not activated, can't house workers",disabled:"true"},cZ=["onClick"],fZ={key:1};function hZ(e,t,r,n,i,o){return E(),M("div",null,[qq,this.nearestTowns?(E(),M("table",Zq,[Kq,(E(!0),M(W,null,mt(this.nearestTowns,s=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.node[s.tnk]),1),_("td",Jq,C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)),1),_("td",null,[tt(_("select",{"onUpdate:modelValue":a=>e.selectedWorkerIndices[s.tnk]=a},[(E(!0),M(W,null,mt(s.workerKinds,(a,l)=>(E(),M("option",{value:l},C(n.gameStore.uloc.char[a.stats.charkey])+" ("+C(o.formatFixed(a.PZSE.profit.priceDaily,2))+" M$/day) ",9,tZ))),256))],8,Qq),[[He,e.selectedWorkerIndices[s.tnk]]])]),_("td",eZ,[_("abbr",{class:"tooltip",title:Array.from(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},C(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.mapCp),9,rZ),nZ,_("abbr",{class:"tooltip",title:s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.infraTooltip},C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)),9,iZ),R("="+C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.cp)),1)]),_("td",oZ,C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M("button",sZ,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)?(E(),M("button",aZ,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)?(E(),M("button",lZ,"hire+assign")):n.gameStore.tnk2tk(s.tnk)&&n.gameStore.tnk2tk(s.tnk)==619&&!n.userStore.activateAncado?(E(),M("button",uZ,"hire+assign")):(E(),M("button",{key:4,onClick:a=>o.assignWorker(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE)}," hire+assign ",8,cZ))])]))),256))])):(E(),M("span",fZ," None "))])}const dZ=Gt(Yq,[["render",hZ],["__scopeId","data-v-45b5b74e"]]);const pZ={setup(){const e=gt(),t=Wt(),r=wn();return{gameStore:e,userStore:t,marketStore:r}},props:{pzk:Number},emits:["showResourceDialog","editWorker"],components:{MakeAWorker:dZ,ItemIcon:fi},data:()=>({selectedRedirect:-1}),methods:{formatFixed:st,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.userStore.autotakenNodes,!0).forEach(([i,o,s])=>{const a=this.gameStore._tnk2tk[i];this.userStore.getFreeWorkers(a).forEach(u=>{const c=this.gameStore.workerStatsOnPlantzone(u),f=this.selectedRedirect==-1?a:this.gameStore.tnk2tk(this.selectedRedirect),h=this.gameStore.pzSelectionEntry(e,a,i,o,s,u,c,f);r.push(h)})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter(n=>n.profit.dist<1e6).filter((n,i,o)=>i===o.findIndex(s=>s.tnk===n.tnk&&JSON.stringify(s.statsOnPz)===JSON.stringify(n.statsOnPz)))}}},Ba=e=>($e("data-v-1a852e24"),e=e(),ze(),e),vZ={key:0},gZ=["title"],mZ=Ba(()=>_("abbr",{class:"tooltip",title:"how much more $ a lucky cycle brings vs unlucky"},"x",-1)),_Z=R("] "),yZ=R(" workload: "),bZ=R("% resource "),wZ={id:"plantzoneWorkerInfo"},SZ=Ba(()=>_("br",null,null,-1)),TZ=["title"],kZ=Ba(()=>_("br",null,null,-1)),PZ=["title"],CZ=Ba(()=>_("br",null,null,-1)),EZ=Ba(()=>_("abbr",{class:"tooltip",title:"income / (connectionCost + lodgageCost)"},"\u2139",-1)),AZ=R(" worker: none "),MZ={class:"spaced-columns"},xZ=R("Nearest towns with idle workers: "),IZ=R("None"),LZ={style:{"margin-right":"6px"}},OZ=R("stash at: "),RZ=Ba(()=>_("option",{value:"-1"},"worker hometown",-1)),DZ=Ba(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),NZ=["value"],FZ={key:0},$Z=Ba(()=>_("tr",null,[_("th",null,"town"),_("th",null,"walk"),_("th",null,[R("worker "),_("abbr",{class:"tooltip",title:"same town&stat workers are hidden in this view"},"\u2139")]),_("th",null,"+M$/day"),_("th",null,[R("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),zZ={class:"fsxs"},BZ={class:"center"},VZ=["title"],UZ=R("+"),WZ=["title"],jZ={class:"center"},GZ={key:0,title:"plantzone already occupied",disabled:"true"},HZ={key:1,title:"Can't resolve housing",disabled:"true"},XZ={key:2,title:"Ancado is not activated, can't house workers",disabled:"true"},YZ=["onClick"];function qZ(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon"),l=Ot("MakeAWorker");return E(),M(W,null,[_("div",null,[ft(s,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:be(()=>[R(C(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),R(" "+C(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(E(),M("span",vZ,[(E(!0),M(W,null,mt(this.gameStore.plantzones[r.pzk].itemkeys,u=>(E(),Or(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[_("abbr",{title:n.gameStore.itemName(u)+" "+o.formatFixed(n.marketStore.prices[u])+"$"},[ft(a,{ik:Number(u)},null,8,["ik"])],8,gZ)]),_:2},1032,["to"]))),256)),R(" [\u{1F340}"+C(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2)),1),mZ,_Z])):Z("",!0)]),_("div",null,[yZ,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.pzk].regiongroup]?(E(),M(W,{key:0},[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),_("button",{onClick:t[0]||(t[0]=u=>e.$emit("showResourceDialog",r.pzk))},"review")],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 ",1),tt(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=u=>n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup]=u),min:"0",max:"100",step:"0.1",class:"w42em"},null,512),[[Dt,n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]]),bZ],64))]),_("div",wZ,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M(W,{key:0},[R(" worker: "+C(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+C(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M(W,{key:0},[_("button",{onClick:t[2]||(t[2]=u=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),_("button",{onClick:t[3]||(t[3]=u=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):Z("",!0),SZ,R(" connection cost: "+C(o.formatFixed(n.userStore.pzjobsSharedConnectionCP[r.pzk].value,3))+" CP ",1),_("abbr",{class:"tooltip",title:`full cost of this node + \u03A3 of connection nodes costs shared proportionally between all active jobs using them
`+n.userStore.pzjobsSharedConnectionCP[r.pzk].tooltip},"\u2139",8,TZ),kZ,R(" lodgage cost: "+C(o.formatFixed(n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).value,3))+" CP ",1),_("abbr",{class:"tooltip",title:n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).tooltip},"\u2139",8,PZ),CZ,R(" efficiency: "+C(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),EZ],64)):(E(),M(W,{key:1},[AZ],64))]),_("div",null,[_("div",MZ,[_("div",null,[_("h4",null,[xZ,o.freeWorkers.length==0?(E(),M(W,{key:0},[IZ],64)):Z("",!0)])]),_("div",LZ,[OZ,tt(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.selectedRedirect=u)},[RZ,DZ,(E(!0),M(W,null,mt(n.gameStore.townsWithRedirectableStorage,u=>(E(),M("option",{value:u},C(n.gameStore.uloc.node[u]),9,NZ))),256))],512),[[He,e.selectedRedirect]])])]),o.freeWorkers.length>0?(E(),M("table",FZ,[$Z,(E(!0),M(W,null,mt(o.freeWorkers,u=>(E(),M("tr",null,[_("td",null,C(n.gameStore.nodeName(u.tnk)),1),_("td",null,C(o.formatFixed(u.profit.dist)),1),_("td",null,[R(C(u.w.label)+" ",1),_("span",zZ,C(o.formatFixed(u.statsOnPz.wspd,2))+"\u{1F528} "+C(o.formatFixed(u.statsOnPz.mspd,2))+"\u{1F9B6} "+C(o.formatFixed(u.statsOnPz.luck,2))+"\u{1F340} ",1)]),_("td",BZ,C(o.formatFixed(u.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:Array.from(u.path,c=>`${n.userStore.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`)},C(u.mapCp),9,VZ),UZ,_("abbr",{class:"tooltip",title:u.infraTooltip},C(o.formatFixed(u.townCp)),9,WZ),R("="+C(o.formatFixed(u.cp)),1)]),_("td",jZ,C(o.formatFixed(u.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M("button",GZ,"assign")):isNaN(u.townCp)?(E(),M("button",HZ,"assign")):n.gameStore.tnk2tk(u.w.tnk)&&n.gameStore.tnk2tk(u.w.tnk)==619&&!n.userStore.activateAncado?(E(),M("button",XZ,"assign")):(E(),M("button",{key:3,onClick:c=>n.userStore.assignWorker(u.w,{kind:"plantzone",pzk:u.pz.key,storage:u.storageTnk})}," assign ",8,YZ))])]))),256))])):Z("",!0),ft(l,{pzk:r.pzk,redirect:Number(e.selectedRedirect)},null,8,["pzk","redirect"])])],64)}const a7=Gt(pZ,[["render",qZ],["__scopeId","data-v-1a852e24"]]);const ZZ={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function KZ(e,t,r,n,i,o){return tt((E(),M("div",{onClick:t[1]||(t[1]=lp(s=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[_("div",{onClick:t[0]||(t[0]=lp(()=>{},["stop"])),class:"dialog_content"},[uH(e.$slots,"default",{},void 0,!0)])],512)),[[lX,r.show]])}const Yk=Gt(ZZ,[["render",KZ],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var US=function(e,t){return US=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},US(e,t)};function St(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");US(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var JZ=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),QZ=function(){function e(){this.browser=new JZ,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Rl=new QZ;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Rl.wxa=!0,Rl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Rl.worker=!0:typeof navigator>"u"?(Rl.node=!0,Rl.svgSupported=!0):tK(navigator.userAgent,Rl);function tK(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),s&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var a=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in a||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Kt=Rl;var qk=12,eK="sans-serif",lu=qk+"px "+eK,rK=20,nK=100,iK="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function oK(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-rK)/nK;t[n]=i}return t}var sK=oK(iK),Tu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=Tu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||lu),e.measureText(r);r=r||"",n=n||lu;var o=/^([0-9]*?)px$/.exec(n),s=+(o&&o[1])||qk,a=0;if(n.indexOf("mono")>=0)a=s*r.length;else for(var l=0;l<r.length;l++){var u=sK[r[l]];a+=u==null?s:u*s}return{width:a}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},l7=ku(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),u7=ku(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Af=Object.prototype.toString,n_=Array.prototype,aK=n_.forEach,lK=n_.filter,Zk=n_.slice,uK=n_.map,i4=function(){}.constructor,D0=i4?i4.prototype:null,Kk="__proto__",cK=2311;function c7(){return cK++}function Jk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Ut(e){if(e==null||typeof e!="object")return e;var t=e,r=Af.call(e);if(r==="[object Array]"){if(!Dd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=Ut(e[n])}}else if(u7[r]){if(!Dd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!l7[r]&&!Dd(e)&&!Fm(e)){t={};for(var s in e)e.hasOwnProperty(s)&&s!==Kk&&(t[s]=Ut(e[s]))}return t}function ue(e,t,r){if(!Nt(t)||!Nt(e))return r?Ut(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==Kk){var i=e[n],o=t[n];Nt(o)&&Nt(i)&&!pt(o)&&!pt(i)&&!Fm(o)&&!Fm(i)&&!o4(o)&&!o4(i)&&!Dd(o)&&!Dd(i)?ue(i,o,r):(r||!(n in e))&&(e[n]=Ut(t[n]))}return e}function fK(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=ue(r,e[n],t);return r}function ut(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==Kk&&(e[r]=t[r]);return e}function ie(e,t,r){for(var n=ge(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}Tu.createCanvas;function he(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function hK(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Hi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else ie(e,t,r)}function Zr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function $(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===aK)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function It(e,t,r){if(!e)return[];if(!t)return Qk(e);if(e.map&&e.map===uK)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function ku(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function Er(e,t,r){if(!e)return[];if(!t)return Qk(e);if(e.filter&&e.filter===lK)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ge(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function dK(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(Zk.call(arguments)))}}var jt=D0&&Ht(D0.bind)?D0.call.bind(D0.bind):dK;function we(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(Zk.call(arguments)))}}function pt(e){return Array.isArray?Array.isArray(e):Af.call(e)==="[object Array]"}function Ht(e){return typeof e=="function"}function Mt(e){return typeof e=="string"}function WS(e){return Af.call(e)==="[object String]"}function Te(e){return typeof e=="number"}function Nt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function o4(e){return!!l7[Af.call(e)]}function Nn(e){return!!u7[Af.call(e)]}function Fm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function i_(e){return e.colorStops!=null}function pK(e){return e.image!=null}function vK(e){return Af.call(e)==="[object RegExp]"}function $m(e){return e!==e}function Ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Qt(e,t){return e!=null?e:t}function Rd(e,t,r){return e!=null?e:t!=null?t:r}function Qk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Zk.apply(e,t)}function f7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Ui(e,t){if(!e)throw new Error(t)}function Eo(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var h7="__ec_primitive__";function zm(e){e[h7]=!0}function Dd(e){return e[h7]}var gK=function(){function e(t){this.data={};var r=pt(t);this.data={};var n=this;t instanceof e?t.each(i):t&&$(t,i);function i(o,s){r?n.set(o,s):n.set(s,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ge(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function Yt(e){return new gK(e)}function d7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function o_(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ut(r,t),r}function p7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function _t(e,t){return e.hasOwnProperty(t)}function Yr(){}var mK=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jS=function(e,t){return jS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},jS(e,t)};function Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Mf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function _K(e,t){return e[0]=t[0],e[1]=t[1],e}function yK(e){return[e[0],e[1]]}function s4(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function v7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function bK(e){return Math.sqrt(wK(e))}function wK(e){return e[0]*e[0]+e[1]*e[1]}function Vy(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function tP(e,t){var r=bK(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function GS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var SK=GS;function TK(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Xc=TK;function sn(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function Rc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Dc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var qu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),kK=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new qu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,s=i-this._y;this._x=n,this._y=i,r.drift(o,s,t),this.handler.dispatchToElement(new qu(r,t),"drag",t.event);var a=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=a,r!==a&&(l&&a!==l&&this.handler.dispatchToElement(new qu(l,t),"dragleave",t.event),a&&a!==l&&this.handler.dispatchToElement(new qu(a,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new qu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new qu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const PK=kK;var CK=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var s=this._$eventProcessor;r!=null&&s&&s.normalizeQuery&&(r=s.normalizeQuery(r)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,s=n[t].length;o<s;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=i.length,l=0;l<a;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=r[s-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(s){case 0:c.h.call(a);break;case 1:c.h.call(a,r[0]);break;case 2:c.h.call(a,r[0],r[1]);break;default:c.h.apply(a,r.slice(1,s-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Xi=CK;var EK=Math.log(2);function HS(e,t,r,n,i,o){var s=n+"-"+i,a=e.length;if(o.hasOwnProperty(s))return o[s];if(t===1){var l=Math.round(Math.log((1<<a)-1&~i)/EK);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<a;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*HS(e,t-1,c,u,i|p,o),d++)}return o[s]=f,f}function a4(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=HS(r,8,0,0,0,n);if(i!==0){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)o[a]==null&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*HS(r,7,s===0?1:0,1<<s,1<<a,n)/i*t[s];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var l4="___zrEVENTSAVED",Uy=[];function AK(e,t,r,n,i){return XS(Uy,t,n,i,!0)&&XS(e,r,Uy[0],Uy[1])}function XS(e,t,r,n,i){if(t.getBoundingClientRect&&Kt.domSupported&&!g7(t)){var o=t[l4]||(t[l4]={}),s=MK(t,o),a=xK(s,o,i);if(a)return a(e,r,n),!0}return!1}function MK(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=s.style,l=o%2,u=(o>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(s),r.push(s)}return r}function xK(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,s=[],a=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;s.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],a.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=s,t[n]=r?a4(a,s):a4(s,a))}function g7(e){return e.nodeName.toUpperCase()==="CANVAS"}var IK=/([&<>"'])/g,LK={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Qn(e){return e==null?"":(e+"").replace(IK,function(t,r){return LK[r]})}var OK=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Wy=[],RK=Kt.browser.firefox&&+Kt.browser.version.split(".")[0]<39;function YS(e,t,r,n){return r=r||{},n?u4(e,t,r):RK&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):u4(e,t,r),r}function u4(e,t,r){if(Kt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(g7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(XS(Wy,e,n,i)){r.zrX=Wy[0],r.zrY=Wy[1];return}}r.zrX=r.zrY=0}function eP(e){return e||window.event}function qn(e,t,r){if(t=eP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var s=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];s&&YS(e,s,t,r)}else{YS(e,t,t,r);var o=DK(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var a=t.button;return t.which==null&&a!==void 0&&OK.test(t.type)&&(t.which=a&1?1:a&2?3:a&4?2:0),t}function DK(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function NK(e,t,r,n){e.addEventListener(t,r,n)}function FK(e,t,r,n){e.removeEventListener(t,r,n)}var uu=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function c4(e){return e.which===2||e.which===3}var $K=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},s=0,a=i.length;s<a;s++){var l=i[s],u=YS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in jy)if(jy.hasOwnProperty(r)){var n=jy[r](this._track,t);if(n)return n}},e}();function f4(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function zK(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var jy={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=f4(n)/f4(i);!isFinite(o)&&(o=1),t.pinchScale=o;var s=zK(n);return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function ff(){return[1,0,0,1,0,0]}function rP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function m7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Yc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],s=t[1]*r[2]+t[3]*r[3],a=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e}function qS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function nP(e,t,r){var n=t[0],i=t[2],o=t[4],s=t[1],a=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+s*u,e[1]=-n*u+s*c,e[2]=i*c+a*u,e[3]=-i*u+c*a,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function BK(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function s_(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],s=t[3],a=t[5],l=r*s-o*n;return l?(l=1/l,e[0]=s*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*i)*l,e[5]=(o*i-r*a)*l,e):null}var VK=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const Ie=VK;var N0=Math.min,F0=Math.max,nl=new Ie,il=new Ie,ol=new Ie,sl=new Ie,hh=new Ie,dh=new Ie,UK=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=N0(t.x,this.x),n=N0(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=F0(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=F0(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=ff();return qS(o,o,[-r.x,-r.y]),BK(o,o,[n,i]),qS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,s=n.y,a=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||a<c||f<s);if(r){var d=1/0,p=0,v=Math.abs(o-l),m=Math.abs(u-i),g=Math.abs(a-c),y=Math.abs(f-s),b=Math.min(v,m),w=Math.min(g,y);o<l||u<i?b>p&&(p=b,v<m?Ie.set(dh,-v,0):Ie.set(dh,m,0)):b<d&&(d=b,v<m?Ie.set(hh,v,0):Ie.set(hh,-m,0)),a<c||f<s?w>p&&(p=w,g<y?Ie.set(dh,0,-g):Ie.set(dh,0,y)):b<d&&(d=b,g<y?Ie.set(hh,0,g):Ie.set(hh,0,-y))}return r&&Ie.copy(r,h?hh:dh),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],s=n[4],a=n[5];t.x=r.x*i+s,t.y=r.y*o+a,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}nl.x=ol.x=r.x,nl.y=sl.y=r.y,il.x=sl.x=r.x+r.width,il.y=ol.y=r.y+r.height,nl.transform(n),sl.transform(n),il.transform(n),ol.transform(n),t.x=N0(nl.x,il.x,ol.x,sl.x),t.y=N0(nl.y,il.y,ol.y,sl.y);var l=F0(nl.x,il.x,ol.x,sl.x),u=F0(nl.y,il.y,ol.y,sl.y);t.width=l-t.x,t.height=u-t.y},e}();const ce=UK;var _7="silent";function WK(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:jK}}function jK(){uu(this.event)}var GK=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Xi),ph=function(){function e(t,r){this.x=t,this.y=r}return e}(),HK=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Gy=new ce(0,0,0,0),y7=function(e){Ee(t,e);function t(r,n,i,o,s){var a=e.call(this)||this;return a._hovered=new ph(0,0),a.storage=r,a.painter=n,a.painterRoot=o,a._pointerSize=s,i=i||new GK,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new PK(a),a}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&($(HK,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=b7(this,n,i),s=this._hovered,a=s.target;a&&!a.__zr&&(s=this.findHover(s.x,s.y),a=s.target);var l=this._hovered=o?new ph(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(s,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==a&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new ph(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var s="on"+n,a=WK(n,r,i);o&&(o[s]&&(a.cancelBubble=!!o[s].call(o,a)),o.trigger(n,a),o=o.__hostTarget?o.__hostTarget:o.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(n,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,a),l.trigger&&l.trigger(n,a)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),s=new ph(r,n);if(h4(o,s,r,n,i),this._pointerSize&&!s.target){for(var a=[],l=this._pointerSize,u=l/2,c=new ce(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Gy.copy(h.getBoundingRect()),h.transform&&Gy.applyTransform(h.transform),Gy.intersect(c)&&a.push(h))}if(a.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=d)for(var g=0;g<v;g+=p){var y=r+m*Math.cos(g),b=n+m*Math.sin(g);if(h4(a,s,y,b,i),s.target)return s}}return s},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new $K);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var s=o.type;r.gestureEvent=s;var a=new ph;a.target=o.target,this.dispatchToElement(a,s,o.event)}},t}(Xi);$(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){y7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=b7(this,r,n),o,s;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),s=o.target),e==="mousedown")this._downEl=s,this._downPoint=[t.zrX,t.zrY],this._upEl=s;else if(e==="mouseup")this._upEl=s;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||SK(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function XK(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var s=n.getClipPath();if(s&&!s.contain(t,r))return!1;n.silent&&(i=!0)}var a=n.__hostTarget;n=a||n.parent}return i?_7:!0}return!1}function h4(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var s=e[o],a=void 0;if(s!==i&&!s.ignore&&(a=XK(s,r,n))&&(!t.topTarget&&(t.topTarget=s),a!==_7)){t.target=s;break}}}function b7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const YK=y7;var w7=32,vh=7;function qK(e){for(var t=0;e>=w7;)t|=e&1,e>>=1;return e+t}function d4(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;ZK(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function ZK(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function p4(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],s=t,a=n,l;s<a;)l=s+a>>>1,i(o,e[l])<0?a=l:s=l+1;var u=n-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=o}}function Hy(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])>0){for(a=n-i;l<a&&o(e,t[r+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}else{for(a=i+1;l<a&&o(e,t[r+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])>0?s=c+1:l=c}return l}function Xy(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])<0){for(a=i+1;l<a&&o(e,t[r+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}else{for(a=n-i;l<a&&o(e,t[r+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])<0?l=c:s=c+1}return l}function KK(e,t){var r=vh,n,i,o=0;e.length;var s=[];n=[],i=[];function a(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],m=n[d+1],g=i[d+1];i[d]=v+g,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=Xy(e[m],e,p,v,0,t);p+=y,v-=y,v!==0&&(g=Hy(e[p+v-1],e,m,g,g-1,t),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)s[g]=e[d+g];var y=0,b=v,w=d;if(e[w++]=e[b++],--m===0){for(g=0;g<p;g++)e[w+g]=s[y+g];return}if(p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[y];return}for(var T=r,S,k,x;;){S=0,k=0,x=!1;do if(t(e[b],s[y])<0){if(e[w++]=e[b++],k++,S=0,--m===0){x=!0;break}}else if(e[w++]=s[y++],S++,k=0,--p===1){x=!0;break}while((S|k)<T);if(x)break;do{if(S=Xy(e[b],s,y,p,0,t),S!==0){for(g=0;g<S;g++)e[w+g]=s[y+g];if(w+=S,y+=S,p-=S,p<=1){x=!0;break}}if(e[w++]=e[b++],--m===0){x=!0;break}if(k=Hy(s[y],e,b,m,0,t),k!==0){for(g=0;g<k;g++)e[w+g]=e[b+g];if(w+=k,b+=k,m-=k,m===0){x=!0;break}}if(e[w++]=s[y++],--p===1){x=!0;break}T--}while(S>=vh||k>=vh);if(x)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)e[w+g]=s[y+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)s[g]=e[v+g];var y=d+p-1,b=m-1,w=v+m-1,T=0,S=0;if(e[w--]=e[y--],--p===0){for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g];return}if(m===1){for(w-=p,y-=p,S=w+1,T=y+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b];return}for(var k=r;;){var x=0,A=0,I=!1;do if(t(s[b],e[y])<0){if(e[w--]=e[y--],x++,A=0,--p===0){I=!0;break}}else if(e[w--]=s[b--],A++,x=0,--m===1){I=!0;break}while((x|A)<k);if(I)break;do{if(x=p-Xy(s[b],e,d,p,p-1,t),x!==0){for(w-=x,y-=x,p-=x,S=w+1,T=y+1,g=x-1;g>=0;g--)e[S+g]=e[T+g];if(p===0){I=!0;break}}if(e[w--]=s[b--],--m===1){I=!0;break}if(A=m-Hy(e[y],s,0,m,m-1,t),A!==0){for(w-=A,b-=A,m-=A,S=w+1,T=b+1,g=0;g<A;g++)e[S+g]=s[T+g];if(m<=1){I=!0;break}}if(e[w--]=e[y--],--p===0){I=!0;break}k--}while(x>=vh||A>=vh);if(I)break;k<0&&(k=0),k+=2}if(r=k,r<1&&(r=1),m===1){for(w-=p,y-=p,S=w+1,T=y+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b]}else{if(m===0)throw new Error;for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:a}}function Kg(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<w7){o=d4(e,r,n,t),p4(e,r,n,r+o,t);return}var s=KK(e,t),a=qK(i);do{if(o=d4(e,r,n,t),o<a){var l=i;l>a&&(l=a),p4(e,r,r+l,r+o,t),o=l}s.pushRun(r,o),s.mergeRuns(),i-=o,r+=o}while(i!==0);s.forceMergeRuns()}}var In=1,fd=2,xc=4,v4=!1;function Yy(){v4||(v4=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function g4(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var JK=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=g4}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Kg(n,g4)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,s=t;o;)o.parent=s,o.updateTransform(),r.push(o),s=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),l=0;l<a.length;l++){var u=a[l];t.__dirty&&(u.__dirty|=In),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Yy(),c.z=0),isNaN(c.z2)&&(Yy(),c.z2=0),isNaN(c.zlevel)&&(Yy(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=he(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const QK=JK;var S7;S7=Kt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const ZS=S7;var Jg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Jg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Jg.bounceIn(e*2)*.5:Jg.bounceOut(e*2-1)*.5+.5}};const T7=Jg;var $0=Math.pow,ka=Math.sqrt,Bm=1e-8,k7=1e-4,m4=ka(3),z0=1/3,To=Mf(),ti=Mf(),qc=Mf();function ga(e){return e>-Bm&&e<Bm}function P7(e){return e>Bm||e<-Bm}function cr(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function _4(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Vm(e,t,r,n,i,o){var s=n+3*(t-r)-e,a=3*(r-t*2+e),l=3*(t-e),u=e-i,c=a*a-3*s*l,f=a*l-9*s*u,h=l*l-3*a*u,d=0;if(ga(c)&&ga(f))if(ga(a))o[0]=0;else{var p=-l/a;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(ga(v)){var m=f/c,p=-a/s+m,g=-m/2;p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g)}else if(v>0){var y=ka(v),b=c*a+1.5*s*(-f+y),w=c*a+1.5*s*(-f-y);b<0?b=-$0(-b,z0):b=$0(b,z0),w<0?w=-$0(-w,z0):w=$0(w,z0);var p=(-a-(b+w))/(3*s);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*a-3*s*f)/(2*ka(c*c*c)),S=Math.acos(T)/3,k=ka(c),x=Math.cos(S),p=(-a-2*k*x)/(3*s),g=(-a+k*(x+m4*Math.sin(S)))/(3*s),A=(-a+k*(x-m4*Math.sin(S)))/(3*s);p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g),A>=0&&A<=1&&(o[d++]=A)}}return d}function C7(e,t,r,n,i){var o=6*r-12*t+6*e,s=9*t+3*n-3*e-9*r,a=3*t-3*e,l=0;if(ga(s)){if(P7(o)){var u=-a/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*s*a;if(ga(c))i[0]=-o/(2*s);else if(c>0){var f=ka(c),u=(-o+f)/(2*s),h=(-o-f)/(2*s);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Um(e,t,r,n,i,o){var s=(t-e)*i+e,a=(r-t)*i+t,l=(n-r)*i+r,u=(a-s)*i+s,c=(l-a)*i+a,f=(c-u)*i+u;o[0]=e,o[1]=s,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function tJ(e,t,r,n,i,o,s,a,l,u,c){var f,h=.005,d=1/0,p,v,m,g;To[0]=l,To[1]=u;for(var y=0;y<1;y+=.05)ti[0]=cr(e,r,i,s,y),ti[1]=cr(t,n,o,a,y),m=Xc(To,ti),m<d&&(f=y,d=m);d=1/0;for(var b=0;b<32&&!(h<k7);b++)p=f-h,v=f+h,ti[0]=cr(e,r,i,s,p),ti[1]=cr(t,n,o,a,p),m=Xc(ti,To),p>=0&&m<d?(f=p,d=m):(qc[0]=cr(e,r,i,s,v),qc[1]=cr(t,n,o,a,v),g=Xc(qc,To),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=cr(e,r,i,s,f),c[1]=cr(t,n,o,a,f)),ka(d)}function eJ(e,t,r,n,i,o,s,a,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=cr(e,r,i,s,p),m=cr(t,n,o,a,p),g=v-u,y=m-c;f+=Math.sqrt(g*g+y*y),u=v,c=m}return f}function Ur(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function y4(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function rJ(e,t,r,n,i){var o=e-2*t+r,s=2*(t-e),a=e-n,l=0;if(ga(o)){if(P7(s)){var u=-a/s;u>=0&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*o*a;if(ga(c)){var u=-s/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ka(c),u=(-s+f)/(2*o),h=(-s-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function E7(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Wm(e,t,r,n,i){var o=(t-e)*n+e,s=(r-t)*n+t,a=(s-o)*n+o;i[0]=e,i[1]=o,i[2]=a,i[3]=a,i[4]=s,i[5]=r}function nJ(e,t,r,n,i,o,s,a,l){var u,c=.005,f=1/0;To[0]=s,To[1]=a;for(var h=0;h<1;h+=.05){ti[0]=Ur(e,r,i,h),ti[1]=Ur(t,n,o,h);var d=Xc(To,ti);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<k7);p++){var v=u-c,m=u+c;ti[0]=Ur(e,r,i,v),ti[1]=Ur(t,n,o,v);var d=Xc(ti,To);if(v>=0&&d<f)u=v,f=d;else{qc[0]=Ur(e,r,i,m),qc[1]=Ur(t,n,o,m);var g=Xc(qc,To);m<=1&&g<f?(u=m,f=g):c*=.5}}return l&&(l[0]=Ur(e,r,i,u),l[1]=Ur(t,n,o,u)),ka(f)}function iJ(e,t,r,n,i,o,s){for(var a=e,l=t,u=0,c=1/s,f=1;f<=s;f++){var h=f*c,d=Ur(e,r,i,h),p=Ur(t,n,o,h),v=d-a,m=p-l;u+=Math.sqrt(v*v+m*m),a=d,l=p}return u}var oJ=/cubic-bezier\(([0-9,\.e ]+)\)/;function A7(e){var t=e&&oJ.exec(e);if(t){var r=t[1].split(","),n=+Eo(r[0]),i=+Eo(r[1]),o=+Eo(r[2]),s=+Eo(r[3]);if(isNaN(n+i+o+s))return;var a=[];return function(l){return l<=0?0:l>=1?1:Vm(0,n,o,1,l,a)&&cr(0,i,s,1,a[0])}}}var sJ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Yr,this.ondestroy=t.ondestroy||Yr,this.onrestart=t.onrestart||Yr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var s=this.easingFunc,a=s?s(o):o;if(this.onframe(a),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ht(t)?t:T7[t]||A7(t)},e}();const aJ=sJ;var M7=function(){function e(t){this.value=t}return e}(),lJ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new M7(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),uJ=function(){function e(t){this._list=new lJ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var s=n.len(),a=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}a?a.value=r:a=new M7(r),a.key=t,n.insertEntry(a),i[t]=a}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const Yp=uJ;var b4={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $i(e){return e=Math.round(e),e<0?0:e>255?255:e}function cJ(e){return e=Math.round(e),e<0?0:e>360?360:e}function fp(e){return e<0?0:e>1?1:e}function qy(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?$i(parseFloat(t)/100*255):$i(parseInt(t,10))}function Zl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?fp(parseFloat(t)/100):fp(parseFloat(t))}function Zy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function ma(e,t,r){return e+(t-e)*r}function Yn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function KS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var x7=new Yp(20),B0=null;function Zu(e,t){B0&&KS(B0,t),B0=x7.put(e,B0||t.slice())}function ni(e,t){if(!!e){t=t||[];var r=x7.get(e);if(r)return KS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in b4)return KS(t,b4[n]),Zu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Yn(t,0,0,0,1);return}return Yn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Zu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Yn(t,0,0,0,1);return}return Yn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Zu(e,t),t}return}var s=n.indexOf("("),a=n.indexOf(")");if(s!==-1&&a+1===i){var l=n.substr(0,s),u=n.substr(s+1,a-(s+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Yn(t,+u[0],+u[1],+u[2],1):Yn(t,0,0,0,1);c=Zl(u.pop());case"rgb":if(u.length>=3)return Yn(t,qy(u[0]),qy(u[1]),qy(u[2]),u.length===3?c:Zl(u[3])),Zu(e,t),t;Yn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Yn(t,0,0,0,1);return}return u[3]=Zl(u[3]),JS(u,t),Zu(e,t),t;case"hsl":if(u.length!==3){Yn(t,0,0,0,1);return}return JS(u,t),Zu(e,t),t;default:return}}Yn(t,0,0,0,1)}}function JS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Zl(e[1]),i=Zl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,s=i*2-o;return t=t||[],Yn(t,$i(Zy(s,o,r+1/3)*255),$i(Zy(s,o,r)*255),$i(Zy(s,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function fJ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i,a=(o+i)/2,l,u;if(s===0)l=0,u=0;else{a<.5?u=s/(o+i):u=s/(2-o-i);var c=((o-t)/6+s/2)/s,f=((o-r)/6+s/2)/s,h=((o-n)/6+s/2)/s;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,a];return e[3]!=null&&d.push(e[3]),d}}function w4(e,t){var r=ni(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return vs(r,r.length===4?"rgba":"rgb")}}function Ky(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=t[i],a=t[o],l=n-i;return r[0]=$i(ma(s[0],a[0],l)),r[1]=$i(ma(s[1],a[1],l)),r[2]=$i(ma(s[2],a[2],l)),r[3]=fp(ma(s[3],a[3],l)),r}}function hJ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=ni(t[i]),a=ni(t[o]),l=n-i,u=vs([$i(ma(s[0],a[0],l)),$i(ma(s[1],a[1],l)),$i(ma(s[2],a[2],l)),fp(ma(s[3],a[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function Jy(e,t,r,n){var i=ni(e);if(e)return i=fJ(i),t!=null&&(i[0]=cJ(t)),r!=null&&(i[1]=Zl(r)),n!=null&&(i[2]=Zl(n)),vs(JS(i),"rgba")}function QS(e,t){var r=ni(e);if(r&&t!=null)return r[3]=fp(t),vs(r,"rgba")}function vs(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function jm(e,t){var r=ni(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function dJ(e){return e.type==="linear"}function pJ(e){return e.type==="radial"}(function(){return Kt.hasGlobalWindow&&Ht(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var t3=Array.prototype.slice;function is(e,t,r){return(t-e)*r+e}function Qy(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=is(t[o],r[o],n);return e}function vJ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=is(t[s][a],r[s][a],n)}return e}function V0(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function S4(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=t[s][a]+r[s][a]*n}return e}function gJ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),s=i[o-1]||{color:[0,0,0,0],offset:0},a=o;a<Math.max(r,n);a++)i.push({offset:s.offset,color:s.color.slice()})}function mJ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,s=i.length;if(o!==s){var a=o>s;if(a)n.length=s;else for(var l=o;l<s;l++)n.push(r===1?i[l]:t3.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function Nd(e){if(Zr(e)){var t=e.length;if(Zr(e[0])){for(var r=[],n=0;n<t;n++)r.push(t3.call(e[n]));return r}return t3.call(e)}return e}function Qg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function _J(e){return Zr(e&&e[0])?2:1}var U0=0,tm=1,I7=2,hd=3,e3=4,r3=5,T4=6;function k4(e){return e===e3||e===r3}function W0(e){return e===tm||e===I7}var gh=[0,0,0,0],yJ=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,s=!1,a=T4,l=r;if(Zr(r)){var u=_J(r);a=u,(u===1&&!Te(r[0])||u===2&&!Te(r[0][0]))&&(s=!0)}else if(Te(r)&&!$m(r))a=U0;else if(Mt(r))if(!isNaN(+r))a=U0;else{var c=ni(r);c&&(l=c,a=hd)}else if(i_(r)){var f=ut({},l);f.colorStops=It(r.colorStops,function(d){return{offset:d.offset,color:ni(d.color)}}),dJ(r)?a=e3:pJ(r)&&(a=r3),l=f}o===0?this.valType=a:(a!==this.valType||a===T4)&&(s=!0),this.discrete=this.discrete||s;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ht(n)?n:T7[n]||A7(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,m){return v.time-m.time});for(var i=this.valType,o=n.length,s=n[o-1],a=this.discrete,l=W0(i),u=k4(i),c=0;c<o;c++){var f=n[c],h=f.value,d=s.value;f.percent=f.time/t,a||(l&&c!==o-1?mJ(h,d,i):u&&gJ(h.colorStops,d.colorStops))}if(!a&&i!==r3&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===U0?n[c].additiveValue=n[c].value-p:i===hd?n[c].additiveValue=V0([],n[c].value,p,-1):W0(i)&&(n[c].additiveValue=i===tm?V0([],n[c].value,p,-1):S4([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,s=this.keyframes,a=s.length,l=this.propName,u=o===hd,c,f=this._lastFr,h=Math.min,d,p;if(a===1)d=p=s[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,a-1);for(c=v;c>=0&&!(s[c].percent<=r);c--);c=h(c,a-2)}else{for(c=f;c<a&&!(s[c].percent>r);c++);c=h(c-1,a-2)}p=s[c+1],d=s[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var m=p.percent-d.percent,g=m===0?1:h((r-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var y=n?this._additiveValue:u?gh:t[l];if((W0(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=g<1?d.rawValue:p.rawValue;else if(W0(o))o===tm?Qy(y,d[i],p[i],g):vJ(y,d[i],p[i],g);else if(k4(o)){var b=d[i],w=p[i],T=o===e3;t[l]={type:T?"linear":"radial",x:is(b.x,w.x,g),y:is(b.y,w.y,g),colorStops:It(b.colorStops,function(k,x){var A=w.colorStops[x];return{offset:is(k.offset,A.offset,g),color:Qg(Qy([],k.color,A.color,g))}}),global:w.global},T?(t[l].x2=is(b.x2,w.x2,g),t[l].y2=is(b.y2,w.y2,g)):t[l].r=is(b.r,w.r,g)}else if(u)Qy(y,d[i],p[i],g),n||(t[l]=Qg(y));else{var S=is(d[i],p[i],g);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===U0?t[n]=t[n]+i:r===hd?(ni(t[n],gh),V0(gh,gh,i,1),t[n]=Qg(gh)):r===tm?V0(t[n],t[n],i,1):r===I7&&S4(t[n],t[n],i,1)},e}(),bJ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){Jk("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ge(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,s=0;s<n.length;s++){var a=n[s],l=o[a];if(!l){l=o[a]=new yJ(a);var u=void 0,c=this._getAdditiveTrack(a);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===hd&&u&&(u=Qg(u))}else u=this._target[a];if(u==null)continue;t>0&&l.addKeyframe(0,Nd(u),i),this._trackKeys.push(a)}l.addKeyframe(t,Nd(r[a]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var s=this._trackKeys[o],a=this._tracks[s],l=this._getAdditiveTrack(s),u=a.keyframes,c=u.length;if(a.prepare(i,l),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var f=u[c-1];f&&(r._target[a.propName]=f.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var h=new aJ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var m=0;m<n.length;m++)n[m].step(r._target,d);var g=r._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return It(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var s=n[t[o]];s&&!s.isFinished()&&(r?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var a=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],s=this._tracks[o];if(!(!s||s.isFinished())){var a=s.keyframes,l=a[n?0:a.length-1];l&&(t[o]=Nd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ge(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var s=o.keyframes;if(s.length>1){var a=s.pop();o.addKeyframe(a.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const iP=bJ;function Nc(){return new Date().getTime()}var wJ=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=Nc()-this._pausedTime,i=n-this._time,o=this._head;o;){var s=o.next,a=o.step(n,i);a&&(o.ondestroy(),this.removeClip(o)),o=s}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(ZS(n),!r._paused&&r.update())}ZS(n)},t.prototype.start=function(){this._running||(this._time=Nc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Nc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Nc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new iP(r,n.loop);return this.addAnimator(i),i},t}(Xi);const SJ=wJ;var TJ=300,tb=Kt.domSupported,eb=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=It(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),P4={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},C4=!1;function n3(e){var t=e.pointerType;return t==="pen"||t==="touch"}function kJ(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function rb(e){e&&(e.zrByTouch=!0)}function PJ(e,t){return qn(e.dom,new CJ(e,t),!0)}function L7(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var CJ=function(){function e(t,r){this.stopPropagation=Yr,this.stopImmediatePropagation=Yr,this.preventDefault=Yr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),ki={mousedown:function(e){e=qn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=qn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=qn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=qn(this.dom,e);var t=e.toElement||e.relatedTarget;L7(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){C4=!0,e=qn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){C4||(e=qn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=qn(this.dom,e),rb(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),ki.mousemove.call(this,e),ki.mousedown.call(this,e)},touchmove:function(e){e=qn(this.dom,e),rb(e),this.handler.processGesture(e,"change"),ki.mousemove.call(this,e)},touchend:function(e){e=qn(this.dom,e),rb(e),this.handler.processGesture(e,"end"),ki.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<TJ&&ki.click.call(this,e)},pointerdown:function(e){ki.mousedown.call(this,e)},pointermove:function(e){n3(e)||ki.mousemove.call(this,e)},pointerup:function(e){ki.mouseup.call(this,e)},pointerout:function(e){n3(e)||ki.mouseout.call(this,e)}};$(["click","dblclick","contextmenu"],function(e){ki[e]=function(t){t=qn(this.dom,t),this.trigger(e,t)}});var i3={pointermove:function(e){n3(e)||i3.mousemove.call(this,e)},pointerup:function(e){i3.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function EJ(e,t){var r=t.domHandlers;Kt.pointerEventsSupported?$(eb.pointer,function(n){em(t,n,function(i){r[n].call(e,i)})}):(Kt.touchEventsSupported&&$(eb.touch,function(n){em(t,n,function(i){r[n].call(e,i),kJ(t)})}),$(eb.mouse,function(n){em(t,n,function(i){i=eP(i),t.touching||r[n].call(e,i)})}))}function AJ(e,t){Kt.pointerEventsSupported?$(P4.pointer,r):Kt.touchEventsSupported||$(P4.mouse,r);function r(n){function i(o){o=eP(o),L7(e,o.target)||(o=PJ(e,o),t.domHandlers[n].call(e,o))}em(t,n,i,{capture:!0})}}function em(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,NK(e.domTarget,t,r,n)}function nb(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&FK(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var E4=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),MJ=function(e){Ee(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new E4(r,ki),tb&&(i._globalHandlerScope=new E4(document,i3)),EJ(i,i._localHandlerScope),i}return t.prototype.dispose=function(){nb(this._localHandlerScope),tb&&nb(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,tb&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?AJ(this,n):nb(n)}},t}(Xi);const xJ=MJ;var O7=1;Kt.hasGlobalWindow&&(O7=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Gm=O7,o3=.4,s3="#333",a3="#ccc",IJ="#eee",A4=rP,M4=5e-5;function al(e){return e>M4||e<-M4}var ll=[],Ku=[],ib=ff(),ob=Math.abs,Vl=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return al(this.rotation)||al(this.x)||al(this.y)||al(this.scaleX-1)||al(this.scaleY-1)||al(this.skewX)||al(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&A4(n);return}n=n||ff(),r?this.getLocalTransform(n):A4(n),t&&(r?Yc(n,t,n):m7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(ll);var n=ll[0]<0?-1:1,i=ll[1]<0?-1:1,o=((ll[0]-n)*r+n)/ll[0]||0,s=((ll[1]-i)*r+i)/ll[1]||0;t[0]*=o,t[1]*=o,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||ff(),s_(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Yc(Ku,t.invTransform,r),r=Ku);var n=this.originX,i=this.originY;(n||i)&&(ib[4]=n,ib[5]=i,Yc(Ku,r,ib),Ku[4]-=n,Ku[5]-=i,r=Ku),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&sn(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&sn(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&ob(t[0]-1)>1e-10&&ob(t[3]-1)>1e-10?Math.sqrt(ob(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){LJ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,s=t.scaleY,a=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||a||l){var p=n+a,v=i+l;r[4]=-p*o-h*v*s,r[5]=-v*s-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=s,r[1]=d*o,r[2]=h*s,u&&nP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Ro=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function LJ(e,t){for(var r=0;r<Ro.length;r++){var n=Ro[r];e[n]=t[n]}}var x4={};function On(e,t){t=t||lu;var r=x4[t];r||(r=x4[t]=new Yp(500));var n=r.get(e);return n==null&&(n=Tu.measureText(e,t).width,r.put(e,n)),n}function I4(e,t,r,n){var i=On(e,t),o=sP(t),s=dd(0,i,r),a=Ic(0,o,n),l=new ce(s,a,i,o);return l}function oP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return I4(i[0],t,r,n);for(var s=new ce(0,0,0,0),a=0;a<i.length;a++){var l=I4(i[a],t,r,n);a===0?s.copy(l):s.union(l)}return s}function dd(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function Ic(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function sP(e){return On("\u56FD",e)}function ys(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Hm(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,s=r.width,a=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ys(n[0],r.width),u+=ys(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=a,c="right",f="middle";break;case"right":l+=i+s,u+=a,f="middle";break;case"top":l+=s/2,u-=i,c="center",f="bottom";break;case"bottom":l+=s/2,u+=o+i,c="center";break;case"inside":l+=s/2,u+=a,c="center",f="middle";break;case"insideLeft":l+=i,u+=a,f="middle";break;case"insideRight":l+=s-i,u+=a,c="right",f="middle";break;case"insideTop":l+=s/2,u+=i,c="center";break;case"insideBottom":l+=s/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=s-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=s-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var sb="__zr_normal__",ab=Ro.concat(["ignore"]),OJ=ku(Ro,function(e,t){return e[t]=!0,e},{ignore:!1}),Ju={},RJ=new ce(0,0,0,0),aP=function(){function e(t){this.id=c7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,s=void 0,a=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=RJ;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ju,n,c):Hm(Ju,n,c),o.x=Ju.x,o.y=Ju.y,s=Ju.align,a=Ju.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ys(f[0],c.width),d=ys(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,b=void 0;v&&this.canBeInsideText()?(g=n.insideFill,y=n.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),b=!0)):(g=n.outsideFill,y=n.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),b=!0)),g=g||"#000",(g!==m.fill||y!==m.stroke||b!==m.autoStroke||s!==m.align||a!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=y,m.autoStroke=b,m.align=s,m.verticalAlign=a,r.setDefaultTextStyle(m)),r.__dirty|=In,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?a3:s3},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&ni(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),s=0;s<3;s++)n[s]=n[s]*i+(o?0:255)*(1-i);return n[3]=1,vs(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ut(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Nt(t))for(var n=t,i=ge(n),o=0;o<i.length;o++){var s=i[o];this.attrKV(s,t[s])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==sb)){var s=i.targetName,a=s?r[s]:r;i.saveTo(a)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,ab)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(sb,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===sb,s=this.hasState();if(!(!s&&o)){var a=this.currentStates,l=this.stateTransition;if(!(he(a,t)>=0&&(r||a.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){Jk("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~In),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,s=t.length,a=s===o.length;if(a){for(var l=0;l<s;l++)if(t[l]!==o[l]){a=!1;break}}if(a)return;for(var l=0;l<s;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[s-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(t,r,h),m&&m.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~In)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=he(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=he(i,t),s=he(i,r)>=0;o>=0?s?i.splice(o,1):i[o]=r:n&&!s&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ut(r,o),o.textConfig&&(n=n||{},ut(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,s){var a=!(r&&i);r&&r.textConfig?(this.textConfig=ut({},i?this.textConfig:n.textConfig),ut(this.textConfig,r.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<ab.length;c++){var f=ab[c],h=o&&OJ[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:a&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,s)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Vl,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ut(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=In;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new iP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,s=he(o,t);s>=0&&o.splice(s,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],s=0;s<i;s++){var a=n[s];!t||t===a.scope?a.stop(r):o.push(a)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){lb(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){lb(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=lb(this,r,n,i),s=0;s<o.length;s++)o[s].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=In;function r(n,i,o,s){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];a(this,l)}return this[i]},set:function(l){this[o]=l[0],this[s]=l[1],this[i]=l,a(this,l)}});function a(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Hi(aP,Xi);Hi(aP,Vl);function lb(e,t,r,n,i){r=r||{};var o=[];R7(e,"",e,t,r,n,o,i);var s=o.length,a=!1,l=r.done,u=r.aborted,c=function(){a=!0,s--,s<=0&&(a?l&&l():u&&u())},f=function(){s--,s<=0&&(a?l&&l():u&&u())};s||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function ub(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function DJ(e){return Zr(e[0])}function NJ(e,t,r){if(Zr(t[r]))if(Zr(e[r])||(e[r]=[]),Nn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),ub(e[r],t[r],n))}else{var i=t[r],o=e[r],s=i.length;if(DJ(i))for(var a=i[0].length,l=0;l<s;l++)o[l]?ub(o[l],i[l],a):o[l]=Array.prototype.slice.call(i[l]);else ub(o,i,s);o.length=i.length}else e[r]=t[r]}function FJ(e,t){return e===t||Zr(e)&&Zr(t)&&$J(e,t)}function $J(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function R7(e,t,r,n,i,o,s,a){for(var l=ge(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Nt(o),p=e.animators,v=[],m=0;m<l.length;m++){var g=l[m],y=n[g];if(y!=null&&r[g]!=null&&(d||o[g]))if(Nt(y)&&!Zr(y)&&!i_(y)){if(t){a||(r[g]=y,e.updateDuringAnimation(t));continue}R7(e,g,r[g],y,i,o&&o[g],s,a)}else v.push(g);else a||(r[g]=y,e.updateDuringAnimation(t),v.push(g))}var b=v.length;if(!f&&b)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var k=he(p,T);p.splice(k,1)}}}if(i.force||(v=Er(v,function(L){return!FJ(n[L],r[L])}),b=v.length),b>0||i.force&&!s.length){var x=void 0,A=void 0,I=void 0;if(a){A={},h&&(x={});for(var w=0;w<b;w++){var g=v[w];A[g]=r[g],h?x[g]=n[g]:r[g]=n[g]}}else if(h){I={};for(var w=0;w<b;w++){var g=v[w];I[g]=Nd(r[g]),NJ(r,n,g)}}var T=new iP(r,!1,!1,f?Er(p,function(N){return N.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&x&&T.whenWithKeys(0,x,v),I&&T.whenWithKeys(0,I,v),T.whenWithKeys(u==null?500:u,a?A:n,v).delay(c||0),e.addAnimator(T,t),s.push(T)}}const D7=aP;var N7=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=he(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var s=this.__zr;s&&o.removeSelfFromZr(s),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=he(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var s=i[o];r.call(n,s,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],s=r.call(n,o);o.isGroup&&!s&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ce(0,0,0,0),i=r||this._children,o=[],s=null,a=0;a<i.length;a++){var l=i[a];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ce.applyTransform(n,u,c),s=s||n.clone(),s.union(n)):(s=s||u.clone(),s.union(u))}}return s||n},t}(D7);N7.prototype.type="group";const Fe=N7;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var rm={},F7={};function zJ(e){delete F7[e]}function BJ(e){if(!e)return!1;if(typeof e=="string")return jm(e,1)<o3;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=jm(t[i].color,1);return r/=n,r<o3}return!1}var VJ=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new QK,s=n.renderer||"canvas";rm[s]||(s=ge(rm)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var a=new rm[s](r,o,n,t),l=n.ssr||a.ssrOnly;this.storage=o,this.painter=a;var u=!Kt.node&&!Kt.worker&&!l?new xJ(a.getViewportRoot(),a.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Kt.touchEventsSupported:!!c,h=44,d;f&&(d=Qt(n.pointerSize,h)),this.handler=new YK(o,a,u,a.root,d),this.animation=new SJ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=BJ(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=Nc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=Nc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Fe&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,zJ(this.id)},e}();function L4(e,t){var r=new VJ(c7(),e,t);return F7[r.id]=r,r}function UJ(e,t){rm[e]=t}var O4=1e-4,$7=20;function WJ(e){return e.replace(/^\s+|\s+$/g,"")}function bs(e,t,r,n){var i=t[0],o=t[1],s=r[0],a=r[1],l=o-i,u=a-s;if(l===0)return u===0?s:(s+a)/2;if(n)if(l>0){if(e<=i)return s;if(e>=o)return a}else{if(e>=i)return s;if(e<=o)return a}else{if(e===i)return s;if(e===o)return a}return(e-i)/l*u+s}function Ke(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Mt(e)?WJ(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function tr(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),$7),e=(+e).toFixed(t),r?e:+e}function Xm(e){return e.sort(function(t,r){return t-r}),e}function Ao(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return jJ(e)}function jJ(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),s=o<0?0:i-1-o;return Math.max(0,s-n)}function GJ(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),s=Math.min(Math.max(-i+o,0),20);return isFinite(s)?s:20}function HJ(e,t){var r=Math.max(Ao(e),Ao(t)),n=e+t;return r>$7?n:tr(n,r)}function z7(e){var t=Math.PI*2;return(e%t+t)%t}function Ym(e){return e>-O4&&e<O4}var XJ=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ws(e){if(e instanceof Date)return e;if(Mt(e)){var t=XJ.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function YJ(e){return Math.pow(10,lP(e))}function lP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function B7(e,t){var r=lP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function R4(e){e.sort(function(l,u){return a(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,s=0;s<2;s++)i[s]<=t&&(i[s]=t,o[s]=s?1:1-r),t=i[s],r=o[s];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function a(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&a(l,u,1))}}function La(e){var t=parseFloat(e);return t==e&&(t!==0||!Mt(e)||e.indexOf("x")<=0)?t:NaN}function qJ(e){return!isNaN(La(e))}function V7(){return Math.round(Math.random()*9)}function U7(e,t){return t===0?e:U7(t,e%t)}function D4(e,t){return e==null?t:t==null?e:e*t/U7(e,t)}function se(e){throw new Error(e)}function N4(e,t,r){return(t-e)*r+e}var W7="series\0",ZJ="\0_ec_\0";function er(e){return e instanceof Array?e:e==null?[]:[e]}function l3(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var F4=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function qp(e){return Nt(e)&&!pt(e)&&!(e instanceof Date)?e.value:e}function KJ(e){return Nt(e)&&!(e instanceof Array)}function JJ(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var s=Yt();$(t,function(l,u){if(!Nt(l)){t[u]=null;return}});var a=QJ(e,s,r);return(n||i)&&tQ(a,e,s,t),n&&eQ(a,t),n||i?rQ(a,t,i):o&&nQ(a,t),iQ(a),a}function QJ(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||hp(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function tQ(e,t,r,n){$(n,function(i,o){if(!(!i||i.id==null)){var s=Fd(i.id),a=r.get(s);if(a!=null){var l=e[a];Ui(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=t[a],n[o]=null}}})}function eQ(e,t){$(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!hp(r)&&!hp(o)&&j7("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function rQ(e,t,r){$(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||hp(i.existing)||i.existing&&n.id!=null&&!j7("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function nQ(e,t){$(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function iQ(e){var t=Yt();$(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),$(e,function(r){var n=r.newOption;Ui(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),$(e,function(r,n){var i=r.existing,o=r.newOption,s=r.keyInfo;if(!!Nt(o)){if(s.name=o.name!=null?Fd(o.name):i?i.name:W7+n,i)s.id=Fd(i.id);else if(o.id!=null)s.id=Fd(o.id);else{var a=0;do s.id="\0"+s.name+"\0"+a++;while(t.get(s.id))}t.set(s.id,r)}})}function j7(e,t,r){var n=ii(t[e],null),i=ii(r[e],null);return n!=null&&i!=null&&n===i}function Fd(e){return ii(e,"")}function ii(e,t){return e==null?t:Mt(e)?e:Te(e)||WS(e)?e+"":t}function uP(e){var t=e.name;return!!(t&&t.indexOf(W7))}function hp(e){return e&&e.id!=null&&Fd(e.id).indexOf(ZJ)===0}function oQ(e,t,r){$(e,function(n){var i=n.newOption;Nt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=sQ(t,i,n.existing,r))})}function sQ(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function aQ(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(s,a,l){for(var u=0,c=s.length;u<c;u++){var f=ii(s[u].seriesId,null);if(f==null)return;for(var h=er(s[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var m=h[p];d&&d[m]?d[m]=null:(a[f]||(a[f]={}))[m]=1}}}function o(s,a){var l=[];for(var u in s)if(s.hasOwnProperty(u)&&s[u]!=null)if(a)l.push(+u);else{var c=o(s[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function cu(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return pt(t.dataIndex)?It(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return pt(t.name)?It(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Re(){var e="__ec_inner_"+lQ++;return function(t){return t[e]||(t[e]={})}}var lQ=V7();function cb(e,t,r){var n=cP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,s=n.others,a=s,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=Zp(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});a[c+"Models"]=f.models,a[c+"Model"]=f.models[0]}),a}function cP(e,t){var r;if(Mt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=Yt(),o={},s=!1;return $(r,function(a,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=a;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&he(t.includeMainTypes,c)<0)){s=s||!!c;var h=i.get(c)||i.set(c,{});h[f]=a}}),{mainTypeSpecified:s,queryOptionMap:i,others:o}}var Li={useDefault:!0,enableAll:!1,enableNone:!1};function Zp(e,t,r,n){n=n||Li;var i=r.index,o=r.id,s=r.name,a={models:null,specified:i!=null||o!=null||s!=null};if(!a.specified){var l=void 0;return a.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],a}return i==="none"||i===!1?(Ui(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(i==="all"&&(Ui(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=s=null),a.models=e.queryComponents({mainType:t,index:i,id:o,name:s}),a)}function G7(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function uQ(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function cQ(e){return e==="auto"?Kt.domSupported?"html":"richText":e||"html"}function fQ(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(Te(n)){var s=N4(r||0,n,i);return tr(s,o?Math.max(Ao(r||0),Ao(n)):t)}else{if(Mt(n))return i<1?r:n;for(var a=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")a[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],s=N4(d,p,i);a[f]=tr(s,o?Math.max(Ao(d),Ao(p)):t)}}return a}}var hQ=".",ul="___EC__COMPONENT__CONTAINER___",H7="___EC__EXTENDED_CLASS___";function Mo(e){var t={main:"",sub:""};if(e){var r=e.split(hQ);t.main=r[0]||"",t.sub=r[1]||""}return t}function dQ(e){Ui(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function pQ(e){return!!(e&&e[H7])}function fP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return vQ(n)?i=function(o){St(s,o);function s(){return o.apply(this,arguments)||this}return s}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},hK(i,this)),ut(i.prototype,r),i[H7]=!0,i.extend=this.extend,i.superCall=_Q,i.superApply=yQ,i.superClass=n,i}}function vQ(e){return Ht(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function X7(e,t){e.extend=t.extend}var gQ=Math.round(Math.random()*10);function mQ(e){var t=["__\0is_clz",gQ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function _Q(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function yQ(e,t,r){return this.superClass.prototype[t].apply(e,r)}function a_(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){dQ(i),n.prototype.type=i;var o=Mo(i);if(!o.sub)t[o.main]=n;else if(o.sub!==ul){var s=r(o);s[o.sub]=n}}return n},e.getClass=function(n,i,o){var s=t[n];if(s&&s[ul]&&(s=i?s[i]:null),o&&!s)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return s},e.getClassesByMainType=function(n){var i=Mo(n),o=[],s=t[i.main];return s&&s[ul]?$(s,function(a,l){l!==ul&&o.push(a)}):o.push(s),o},e.hasClass=function(n){var i=Mo(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return $(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=Mo(n),o=t[i.main];return o&&o[ul]};function r(n){var i=t[n.main];return(!i||!i[ul])&&(i=t[n.main]={},i[ul]=!0),i}}function dp(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var s={},a=0;a<e.length;a++){var l=e[a][1];if(!(i&&he(i,l)>=0||o&&he(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(s[e[a][0]]=u)}}return s}}var bQ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],wQ=dp(bQ),SQ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return wQ(this,t,r)},e}(),u3=new Yp(50);function TQ(e){if(typeof e=="string"){var t=u3.get(e);return t&&t.image}else return e}function Y7(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=u3.get(e),s={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!l_(t)&&o.pending.push(s)):(t=Tu.loadImage(e,$4,$4),t.__zrImageSrc=e,u3.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}else return e;else return t}function $4(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function l_(e){return e&&e.width&&e.height}var fb=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function kQ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=q7(t,r,n,i);for(var s=0,a=o.length;s<a;s++)o[s]=Z7(o[s],i);return o.join(`
`)}function q7(e,t,r,n){n=n||{};var i=ut({},n);i.font=t,r=Qt(r,"..."),i.maxIterations=Qt(n.maxIterations,2);var o=i.minChar=Qt(n.minChar,0);i.cnCharWidth=On("\u56FD",t);var s=i.ascCharWidth=On("a",t);i.placeholder=Qt(n.placeholder,"");for(var a=e=Math.max(0,e-1),l=0;l<o&&a>=s;l++)a-=s;var u=On(r,t);return u>a&&(r="",u=0),a=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=a,i.containerWidth=e,i}function Z7(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=On(e,n);if(o<=r)return e;for(var s=0;;s++){if(o<=i||s>=t.maxIterations){e+=t.ellipsis;break}var a=s===0?PQ(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,a),o=On(e,n)}return e===""&&(e=t.placeholder),e}function PQ(e,t,r,n){for(var i=0,o=0,s=e.length;o<s&&i<t;o++){var a=e.charCodeAt(o);i+=0<=a&&a<=127?r:n}return o}function CQ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",s=sP(i),a=Qt(t.lineHeight,s),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?K7(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*a,d=Qt(t.height,h);if(h>d&&u){var p=Math.floor(d/a);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=q7(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<f.length;m++)f[m]=Z7(f[m],v);for(var g=d,y=0,m=0;m<f.length;m++)y=Math.max(On(f[m],i),y);c==null&&(c=y);var b=y;return n&&(g+=n[0]+n[2],b+=n[1]+n[3],c+=n[1]+n[3]),l&&(b=c),{lines:f,height:d,outerWidth:b,outerHeight:g,lineHeight:a,calculatedLineHeight:s,contentWidth:y,contentHeight:h,width:c}}var EQ=function(){function e(){}return e}(),z4=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),AQ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function MQ(e,t){var r=new AQ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,s=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,a=fb.lastIndex=0,l;(l=fb.exec(e))!=null;){var u=l.index;u>a&&hb(r,e.substring(a,u),t,s),hb(r,l[2],t,s,l[1]),a=fb.lastIndex}a<e.length&&hb(r,e.substring(a,e.length),t,s);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function m(q,rt,At){q.width=rt,q.lineHeight=At,f+=At,h=Math.max(h,rt)}t:for(var g=0;g<r.lines.length;g++){for(var y=r.lines[g],b=0,w=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],k=S.styleName&&t.rich[S.styleName]||{},x=S.textPadding=k.padding,A=x?x[1]+x[3]:0,I=S.font=k.font||t.font;S.contentHeight=sP(I);var L=Qt(k.height,S.contentHeight);if(S.innerHeight=L,x&&(L+=x[0]+x[2]),S.height=L,S.lineHeight=Rd(k.lineHeight,t.lineHeight,L),S.align=k&&k.align||t.align,S.verticalAlign=k&&k.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),m(y,w,b),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break t}var N=k.width,z=N==null||N==="auto";if(typeof N=="string"&&N.charAt(N.length-1)==="%")S.percentWidth=N,c.push(S),S.contentWidth=On(S.text,I);else{if(z){var V=k.backgroundColor,F=V&&V.image;F&&(F=TQ(F),l_(F)&&(S.width=Math.max(S.width,F.width*L/F.height)))}var G=p&&n!=null?n-w:null;G!=null&&G<S.width?!z||G<A?(S.text="",S.width=S.contentWidth=0):(S.text=kQ(S.text,G-A,I,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=On(S.text,I)):S.contentWidth=On(S.text,I)}S.width+=A,w+=S.width,k&&(b=Math.max(b,S.lineHeight))}m(y,w,b)}r.outerWidth=r.width=Qt(n,h),r.outerHeight=r.height=Qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var S=c[g],K=S.percentWidth;S.width=parseInt(K,10)/100*r.width}return r}function hb(e,t,r,n,i){var o=t==="",s=i&&r.rich[i]||{},a=e.lines,l=s.font||r.font,u=!1,c,f;if(n){var h=s.padding,d=h?h[1]+h[3]:0;if(s.width!=null&&s.width!=="auto"){var p=ys(s.width,n.width)+d;a.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=K7(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],y=new EQ;if(y.styleName=i,y.text=g,y.isLineHolder=!g&&!o,typeof s.width=="number"?y.width=s.width:y.width=f?f[m]:On(g,l),!m&&!u){var b=(a[a.length-1]||(a[0]=new z4)).tokens,w=b.length;w===1&&b[0].isLineHolder?b[0]=y:(g||!w||o)&&b.push(y)}else a.push(new z4([y]))}}function xQ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var IQ=ku(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function LQ(e){return xQ(e)?!!IQ[e]:!0}function K7(e,t,r,n,i){for(var o=[],s=[],a="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(a+=l,c+=u),o.push(a),s.push(c),a="",l="",u=0,c=0;continue}var d=On(h,t),p=n?!1:!LQ(h);if(o.length?c+d>r:i+c+d>r){c?(a||l)&&(p?(a||(a=l,l="",u=0,c=u),o.push(a),s.push(c-u),l+=h,u+=d,a="",c=u):(l&&(a+=l,l="",u=0),o.push(a),s.push(c),a=h,c=d)):p?(o.push(l),s.push(u),l=h,u=d):(o.push(h),s.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(a+=l,l="",u=0),a+=h)}return!o.length&&!a&&(a=e,l="",u=0),l&&(a+=l),a&&(o.push(a),s.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:s}}var c3="__zr_style_"+Math.round(Math.random()*10),Kl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},u_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Kl[c3]=!0;var B4=["z","z2","invisible"],OQ=["invisible"],RQ=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&DQ(this,r,n)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,s=o.shadowBlur||0,a=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ce(0,0,0,0)),n?ce.applyTransform(r,i,n):r.copy(i),(s||a||l)&&(r.width+=s*2+Math.abs(a),r.height+=s*2+Math.abs(l),r.x=Math.min(r.x,r.x+a-s),r.y=Math.min(r.y,r.y+l-s));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ce(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ut(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=fd,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&fd)},t.prototype.styleUpdated=function(){this.__dirty&=~fd},t.prototype.createStyle=function(r){return o_(Kl,r)},t.prototype.useStyle=function(r){r[c3]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[c3]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,B4)},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.style?s?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ge(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ge(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},a,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?OQ:B4,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ut(r,n),r},t.prototype.getAnimationStyleProps=function(){return u_},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=In|fd}(),t}(D7),db=new ce(0,0,0,0),pb=new ce(0,0,0,0);function DQ(e,t,r){return db.copy(e.getBoundingRect()),e.transform&&db.applyTransform(e.transform),pb.width=t,pb.height=r,!db.intersect(pb)}const Pu=RQ;var vn=Math.min,gn=Math.max,vb=Math.sin,gb=Math.cos,cl=Math.PI*2,j0=Mf(),G0=Mf(),H0=Mf();function NQ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],s=n[1],a=n[1],l=1;l<e.length;l++)n=e[l],i=vn(i,n[0]),o=gn(o,n[0]),s=vn(s,n[1]),a=gn(a,n[1]);t[0]=i,t[1]=s,r[0]=o,r[1]=a}}function V4(e,t,r,n,i,o){i[0]=vn(e,r),i[1]=vn(t,n),o[0]=gn(e,r),o[1]=gn(t,n)}var U4=[],W4=[];function FQ(e,t,r,n,i,o,s,a,l,u){var c=C7,f=cr,h=c(e,r,i,s,U4);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,s,U4[d]);l[0]=vn(p,l[0]),u[0]=gn(p,u[0])}h=c(t,n,o,a,W4);for(var d=0;d<h;d++){var v=f(t,n,o,a,W4[d]);l[1]=vn(v,l[1]),u[1]=gn(v,u[1])}l[0]=vn(e,l[0]),u[0]=gn(e,u[0]),l[0]=vn(s,l[0]),u[0]=gn(s,u[0]),l[1]=vn(t,l[1]),u[1]=gn(t,u[1]),l[1]=vn(a,l[1]),u[1]=gn(a,u[1])}function $Q(e,t,r,n,i,o,s,a){var l=E7,u=Ur,c=gn(vn(l(e,r,i),1),0),f=gn(vn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);s[0]=vn(e,i,h),s[1]=vn(t,o,d),a[0]=gn(e,i,h),a[1]=gn(t,o,d)}function zQ(e,t,r,n,i,o,s,a,l){var u=Rc,c=Dc,f=Math.abs(i-o);if(f%cl<1e-4&&f>1e-4){a[0]=e-r,a[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(j0[0]=gb(i)*r+e,j0[1]=vb(i)*n+t,G0[0]=gb(o)*r+e,G0[1]=vb(o)*n+t,u(a,j0,G0),c(l,j0,G0),i=i%cl,i<0&&(i=i+cl),o=o%cl,o<0&&(o=o+cl),i>o&&!s?o+=cl:i<o&&s&&(i+=cl),s){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(H0[0]=gb(d)*r+e,H0[1]=vb(d)*n+t,u(a,H0,a),c(l,H0,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},fl=[],hl=[],io=[],zs=[],oo=[],so=[],mb=Math.min,_b=Math.max,dl=Math.cos,pl=Math.sin,qo=Math.abs,f3=Math.PI,ca=f3*2,yb=typeof Float32Array<"u",mh=[];function bb(e){var t=Math.round(e/f3*1e8)/1e8;return t%2*f3}function BQ(e,t){var r=bb(e[0]);r<0&&(r+=ca);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=ca?i=r+ca:t&&r-i>=ca?i=r-ca:!t&&r>i?i=r+(ca-bb(r-i)):t&&r<i&&(i=r-(ca-bb(i-r))),e[0]=r,e[1]=i}var VQ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=qo(n/Gm/t)||0,this._uy=qo(n/Gm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=qo(t-this._xi),i=qo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var s=n*n+i*i;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=s)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,s){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,s),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,s),this._xi=o,this._yi=s,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,s){this._drawPendingPt(),mh[0]=i,mh[1]=o,BQ(mh,s),i=mh[0],o=mh[1];var a=o-i;return this.addData(ye.A,t,r,n,n,i,a,0,s?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,s),this._xi=dl(o)*n+t,this._yi=pl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&yb&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();yb&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var s=t[o].data,a=0;a<s.length;a++)this.data[i++]=s[a];this._len=i},e.prototype.addData=function(t,r,n,i,o,s,a,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,yb&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){io[0]=io[1]=oo[0]=oo[1]=Number.MAX_VALUE,zs[0]=zs[1]=so[0]=so[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,s;for(s=0;s<this._len;){var a=t[s++],l=s===1;switch(l&&(r=t[s],n=t[s+1],i=r,o=n),a){case ye.M:r=i=t[s++],n=o=t[s++],oo[0]=i,oo[1]=o,so[0]=i,so[1]=o;break;case ye.L:V4(r,n,t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.C:FQ(r,n,t[s++],t[s++],t[s++],t[s++],t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.Q:$Q(r,n,t[s++],t[s++],t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.A:var u=t[s++],c=t[s++],f=t[s++],h=t[s++],d=t[s++],p=t[s++]+d;s+=1;var v=!t[s++];l&&(i=dl(d)*f+u,o=pl(d)*h+c),zQ(u,c,f,h,d,p,v,oo,so),r=dl(p)*f+u,n=pl(p)*h+c;break;case ye.R:i=r=t[s++],o=n=t[s++];var m=t[s++],g=t[s++];V4(i,o,i+m,o+g,oo,so);break;case ye.Z:r=i,n=o;break}Rc(io,io,oo),Dc(zs,zs,so)}return s===0&&(io[0]=io[1]=zs[0]=zs[1]=0),new ce(io[0],io[1],zs[0]-io[0],zs[1]-io[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,s=0,a=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],s=t[h+1],a=o,l=s);var v=-1;switch(d){case ye.M:o=a=t[h++],s=l=t[h++];break;case ye.L:{var m=t[h++],g=t[h++],y=m-o,b=g-s;(qo(y)>n||qo(b)>i||h===r-1)&&(v=Math.sqrt(y*y+b*b),o=m,s=g);break}case ye.C:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++],S=t[h++],k=t[h++];v=eJ(o,s,w,T,m,g,S,k,10),o=S,s=k;break}case ye.Q:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++];v=iJ(o,s,w,T,m,g,10),o=m,s=g;break}case ye.A:var x=t[h++],A=t[h++],I=t[h++],L=t[h++],N=t[h++],z=t[h++],V=z+N;h+=1,t[h++],p&&(a=dl(N)*I+x,l=pl(N)*L+A),v=_b(I,L)*mb(ca,Math.abs(z)),o=dl(V)*I+x,s=pl(V)*L+A;break;case ye.R:{a=o=t[h++],l=s=t[h++];var F=t[h++],G=t[h++];v=F*2+G*2;break}case ye.Z:{var y=a-o,b=l-s;v=Math.sqrt(y*y+b*b),o=a,s=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,s=this._len,a,l,u,c,f,h,d=r<1,p,v,m=0,g=0,y,b=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y))return;t:for(var S=0;S<s;){var k=n[S++],x=S===1;switch(x&&(u=n[S],c=n[S+1],a=u,l=c),k!==ye.L&&b>0&&(t.lineTo(w,T),b=0),k){case ye.M:a=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=qo(f-u),I=qo(h-c);if(A>i||I>o){if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;t.lineTo(u*(1-N)+f*N,c*(1-N)+h*N);break t}m+=L}t.lineTo(f,h),u=f,c=h,b=0}else{var z=A*A+I*I;z>b&&(w=f,T=h,b=z)}break}case ye.C:{var V=n[S++],F=n[S++],G=n[S++],K=n[S++],q=n[S++],rt=n[S++];if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;Um(u,V,G,q,N,fl),Um(c,F,K,rt,N,hl),t.bezierCurveTo(fl[1],hl[1],fl[2],hl[2],fl[3],hl[3]);break t}m+=L}t.bezierCurveTo(V,F,G,K,q,rt),u=q,c=rt;break}case ye.Q:{var V=n[S++],F=n[S++],G=n[S++],K=n[S++];if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;Wm(u,V,G,N,fl),Wm(c,F,K,N,hl),t.quadraticCurveTo(fl[1],hl[1],fl[2],hl[2]);break t}m+=L}t.quadraticCurveTo(V,F,G,K),u=G,c=K;break}case ye.A:var At=n[S++],Ft=n[S++],Pt=n[S++],Ct=n[S++],Zt=n[S++],Y=n[S++],ot=n[S++],J=!n[S++],yt=Pt>Ct?Pt:Ct,Et=qo(Pt-Ct)>.001,xt=Zt+Y,ht=!1;if(d){var L=p[g++];m+L>y&&(xt=Zt+Y*(y-m)/L,ht=!0),m+=L}if(Et&&t.ellipse?t.ellipse(At,Ft,Pt,Ct,ot,Zt,xt,J):t.arc(At,Ft,yt,Zt,xt,J),ht)break t;x&&(a=dl(Zt)*Pt+At,l=pl(Zt)*Ct+Ft),u=dl(xt)*Pt+At,c=pl(xt)*Ct+Ft;break;case ye.R:a=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var vt=n[S++],B=n[S++];if(d){var L=p[g++];if(m+L>y){var j=y-m;t.moveTo(f,h),t.lineTo(f+mb(j,vt),h),j-=vt,j>0&&t.lineTo(f+vt,h+mb(j,B)),j-=B,j>0&&t.lineTo(f+_b(vt-j,0),h+B),j-=vt,j>0&&t.lineTo(f,h+_b(B-j,0));break t}m+=L}t.rect(f,h,vt,B);break;case ye.Z:if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;t.lineTo(u*(1-N)+a*N,c*(1-N)+l*N);break t}m+=L}t.closePath(),u=a,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const fu=VQ;function Qu(e,t,r,n,i,o,s){if(i===0)return!1;var a=i,l=0,u=e;if(s>t+a&&s>n+a||s<t-a&&s<n-a||o>e+a&&o>r+a||o<e-a&&o<r-a)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=a/2;var c=l*o-s+u,f=c*c/(l*l+1);return f<=a/2*a/2}function UQ(e,t,r,n,i,o,s,a,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>a+f||c<t-f&&c<n-f&&c<o-f&&c<a-f||u>e+f&&u>r+f&&u>i+f&&u>s+f||u<e-f&&u<r-f&&u<i-f&&u<s-f)return!1;var h=tJ(e,t,r,n,i,o,s,a,u,c,null);return h<=f/2}function WQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||a>e+u&&a>r+u&&a>i+u||a<e-u&&a<r-u&&a<i-u)return!1;var c=nJ(e,t,r,n,i,o,a,l,null);return c<=u/2}var j4=Math.PI*2;function X0(e){return e%=j4,e<0&&(e+=j4),e}var _h=Math.PI*2;function jQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;a-=e,l-=t;var c=Math.sqrt(a*a+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%_h<1e-4)return!0;if(o){var f=n;n=X0(i),i=X0(f)}else n=X0(n),i=X0(i);n>i&&(i+=_h);var h=Math.atan2(l,a);return h<0&&(h+=_h),h>=n&&h<=i||h+_h>=n&&h+_h<=i}function vl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var s=(o-t)/(n-t),a=n<t?1:-1;(s===1||s===0)&&(a=n<t?.5:-.5);var l=s*(r-e)+e;return l===i?1/0:l>i?a:0}var Bs=fu.CMD,gl=Math.PI*2,GQ=1e-4;function HQ(e,t){return Math.abs(e-t)<GQ}var rn=[-1,-1,-1],Kn=[-1,-1];function XQ(){var e=Kn[0];Kn[0]=Kn[1],Kn[1]=e}function YQ(e,t,r,n,i,o,s,a,l,u){if(u>t&&u>n&&u>o&&u>a||u<t&&u<n&&u<o&&u<a)return 0;var c=Vm(t,n,o,a,u,rn);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=rn[v],g=m===0||m===1?.5:1,y=cr(e,r,i,s,m);y<l||(h<0&&(h=C7(t,n,o,a,Kn),Kn[1]<Kn[0]&&h>1&&XQ(),d=cr(t,n,o,a,Kn[0]),h>1&&(p=cr(t,n,o,a,Kn[1]))),h===2?m<Kn[0]?f+=d<t?g:-g:m<Kn[1]?f+=p<d?g:-g:f+=a<p?g:-g:m<Kn[0]?f+=d<t?g:-g:f+=a<d?g:-g)}return f}function qQ(e,t,r,n,i,o,s,a){if(a>t&&a>n&&a>o||a<t&&a<n&&a<o)return 0;var l=rJ(t,n,o,a,rn);if(l===0)return 0;var u=E7(t,n,o);if(u>=0&&u<=1){for(var c=0,f=Ur(t,n,o,u),h=0;h<l;h++){var d=rn[h]===0||rn[h]===1?.5:1,p=Ur(e,r,i,rn[h]);p<s||(rn[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=rn[0]===0||rn[0]===1?.5:1,p=Ur(e,r,i,rn[0]);return p<s?0:o<t?d:-d}}function ZQ(e,t,r,n,i,o,s,a){if(a-=t,a>r||a<-r)return 0;var l=Math.sqrt(r*r-a*a);rn[0]=-l,rn[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=gl-1e-4){n=0,i=gl;var c=o?1:-1;return s>=rn[0]+e&&s<=rn[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=gl,i+=gl);for(var h=0,d=0;d<2;d++){var p=rn[d];if(p+e>s){var v=Math.atan2(a,p),c=o?1:-1;v<0&&(v=gl+v),(v>=n&&v<=i||v+gl>=n&&v+gl<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function J7(e,t,r,n,i){for(var o=e.data,s=e.len(),a=0,l=0,u=0,c=0,f=0,h,d,p=0;p<s;){var v=o[p++],m=p===1;switch(v===Bs.M&&p>1&&(r||(a+=vl(l,u,c,f,n,i))),m&&(l=o[p],u=o[p+1],c=l,f=u),v){case Bs.M:c=o[p++],f=o[p++],l=c,u=f;break;case Bs.L:if(r){if(Qu(l,u,o[p],o[p+1],t,n,i))return!0}else a+=vl(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.C:if(r){if(UQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=YQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.Q:if(r){if(WQ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=qQ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.A:var g=o[p++],y=o[p++],b=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var k=!!(1-o[p++]);h=Math.cos(T)*b+g,d=Math.sin(T)*w+y,m?(c=h,f=d):a+=vl(l,u,h,d,n,i);var x=(n-g)*w/b+g;if(r){if(jQ(g,y,w,T,T+S,k,t,x,i))return!0}else a+=ZQ(g,y,w,T,T+S,k,x,i);l=Math.cos(T+S)*b+g,u=Math.sin(T+S)*w+y;break;case Bs.R:c=l=o[p++],f=u=o[p++];var A=o[p++],I=o[p++];if(h=c+A,d=f+I,r){if(Qu(c,f,h,f,t,n,i)||Qu(h,f,h,d,t,n,i)||Qu(h,d,c,d,t,n,i)||Qu(c,d,c,f,t,n,i))return!0}else a+=vl(h,f,h,d,n,i),a+=vl(c,d,c,f,n,i);break;case Bs.Z:if(r){if(Qu(l,u,c,f,t,n,i))return!0}else a+=vl(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!HQ(u,f)&&(a+=vl(l,u,c,f,n,i)||0),a!==0}function KQ(e,t,r){return J7(e,0,!1,t,r)}function JQ(e,t,r,n){return J7(e,t,!0,r,n)}var Q7=ie({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Kl),QQ={style:ie({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},u_.style)},wb=Ro.concat(["invisible","culling","z","z2","zlevel","parent"]),ttt=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var s in n)o[s]!==n[s]&&(o[s]=n[s]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var a=0;a<wb.length;++a)i[wb[a]]=this[wb[a]];i.__dirty|=In}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ge(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var s=n[o],a=r[s];s==="style"?this.style?ut(this.style,a):this.useStyle(a):s==="shape"?ut(this.shape,a):e.prototype.attrKV.call(this,s,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Mt(r)){var n=jm(r,0);return n>.5?s3:n>.2?IJ:a3}else if(r)return a3}return s3},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Mt(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),s=jm(r,0)<o3;if(o===s)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~xc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new fu(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var s=this.path;(o||this.__dirty&xc)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),r=s.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){a.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(a.width+=u/l,a.height+=u/l,a.x-=u/l/2,a.y-=u/l/2)}return a}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),s=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var a=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),JQ(a,l/u,r,n)))return!0}if(this.hasFill())return KQ(a,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=xc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ut(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&xc)},t.prototype.createStyle=function(r){return o_(Q7,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ut({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.shape?s?o?u=n.shape:(u=ut({},i.shape),ut(u,n.shape)):(u=ut({},o?this.shape:i.shape),ut(u,n.shape)):l&&(u=i.shape),u)if(s){this.shape=ut({},this.shape);for(var c={},f=ge(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},a)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return QQ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ee(s,o);function s(a){var l=o.call(this,a)||this;return r.init&&r.init.call(l,a),l}return s.prototype.getDefaultStyle=function(){return Ut(r.style)},s.prototype.getDefaultShape=function(){return Ut(r.shape)},s}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=In|fd|xc}(),t}(Pu);const pe=ttt;var ett=ie({strokeFirst:!0,font:lu,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Q7),tN=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return o_(ett,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=oP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Pu);tN.prototype.type="tspan";const h3=tN;var rtt=ie({x:0,y:0},Kl),ntt={style:ie({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},u_.style)};function itt(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var eN=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return o_(rtt,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=itt(n.image)?n.image:this.__image;if(!o)return 0;var s=r==="width"?"height":"width",a=n[s];return a==null?o[r]:o[r]/o[s]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return ntt},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ce(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Pu);eN.prototype.type="image";const Ms=eN;function ott(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,s=t.r,a,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof s=="number"?a=l=u=c=s:s instanceof Array?s.length===1?a=l=u=c=s[0]:s.length===2?(a=u=s[0],l=c=s[1]):s.length===3?(a=s[0],l=c=s[1],u=s[2]):(a=s[0],l=s[1],u=s[2],c=s[3]):a=l=u=c=0;var f;a+l>i&&(f=a+l,a*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),a+c>o&&(f=a+c,a*=o/f,c*=o/f),e.moveTo(r+a,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+a),a!==0&&e.arc(r+a,n+a,a,Math.PI,Math.PI*1.5)}var Fc=Math.round;function rN(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,s=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=s;var a=r&&r.lineWidth;return a&&(Fc(n*2)===Fc(i*2)&&(e.x1=e.x2=Ul(n,a,!0)),Fc(o*2)===Fc(s*2)&&(e.y1=e.y2=Ul(o,a,!0))),e}}function nN(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,s=t.height;e.x=n,e.y=i,e.width=o,e.height=s;var a=r&&r.lineWidth;return a&&(e.x=Ul(n,a,!0),e.y=Ul(i,a,!0),e.width=Math.max(Ul(n+o,a,!1)-e.x,o===0?0:1),e.height=Math.max(Ul(i+s,a,!1)-e.y,s===0?0:1)),e}}function Ul(e,t,r){if(!t)return e;var n=Fc(e*2);return(n+Fc(t))%2===0?n/2:(n+(r?1:-1))/2}var stt=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),att={},iN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new stt},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=nN(att,n,this.style);i=l.x,o=l.y,s=l.width,a=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,s=n.width,a=n.height;n.r?ott(r,n):r.rect(i,o,s,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(pe);iN.prototype.type="rect";const rr=iN;var G4={fill:"#000"},H4=2,ltt={style:ie({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},u_.style)},oN=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=G4,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,dtt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ce(0,0,0,0),n=this._children,i=[],o=null,s=0;s<n.length;s++){var a=n[s],l=a.getBoundingRect(),u=a.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||G4},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ut(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ge(n),o=0;o<i.length;o++){var s=i[o];r[s]=r[s]||{},ut(r[s],n[s])}},t.prototype.getAnimationStyleProps=function(){return ltt},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||lu,i=r.padding,o=Q4(r),s=CQ(o,r),a=Sb(r),l=!!r.backgroundColor,u=s.outerHeight,c=s.outerWidth,f=s.contentWidth,h=s.lines,d=s.lineHeight,p=this._defaultStyle,v=r.x||0,m=r.y||0,g=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",b=v,w=Ic(m,s.contentHeight,y);if(a||i){var T=dd(v,c,g),S=Ic(m,u,y);a&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(b=J4(v,g,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var k=0,x=!1,A=K4("fill"in r?r.fill:(x=!0,p.fill)),I=Z4("stroke"in r?r.stroke:!l&&(!p.autoStroke||x)?(k=H4,p.stroke):null),L=r.textShadowBlur>0,N=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),z=s.calculatedLineHeight,V=0;V<h.length;V++){var F=this._getOrCreateChild(h3),G=F.createStyle();F.useStyle(G),G.text=h[V],G.x=b,G.y=w,g&&(G.textAlign=g),G.textBaseline="middle",G.opacity=r.opacity,G.strokeFirst=!0,L&&(G.shadowBlur=r.textShadowBlur||0,G.shadowColor=r.textShadowColor||"transparent",G.shadowOffsetX=r.textShadowOffsetX||0,G.shadowOffsetY=r.textShadowOffsetY||0),G.stroke=I,G.fill=A,I&&(G.lineWidth=r.lineWidth||k,G.lineDash=r.lineDash,G.lineDashOffset=r.lineDashOffset||0),G.font=n,Y4(G,r),w+=d,N&&F.setBoundingRect(new ce(dd(G.x,r.width,G.textAlign),Ic(G.y,z,G.textBaseline),f,z))}},t.prototype._updateRichTexts=function(){var r=this.style,n=Q4(r),i=MQ(n,r),o=i.width,s=i.outerWidth,a=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=dd(u,s,h),v=Ic(c,a,d),m=p,g=v;l&&(m+=l[3],g+=l[0]);var y=m+o;Sb(r)&&this._renderBackground(r,r,p,v,s,a);for(var b=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,k=S.length,x=T.lineHeight,A=T.width,I=0,L=m,N=y,z=k-1,V=void 0;I<k&&(V=S[I],!V.align||V.align==="left");)this._placeToken(V,r,x,g,L,"left",b),A-=V.width,L+=V.width,I++;for(;z>=0&&(V=S[z],V.align==="right");)this._placeToken(V,r,x,g,N,"right",b),A-=V.width,N-=V.width,z--;for(L+=(o-(L-m)-(y-N)-A)/2;I<=z;)V=S[I],this._placeToken(V,r,x,g,L+V.width/2,"center",b),L+=V.width,I++;g+=x}},t.prototype._placeToken=function(r,n,i,o,s,a,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&Sb(u);h&&this._renderBackground(u,n,a==="right"?s-r.width:a==="center"?s-r.width/2:s,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(s=J4(s,a,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(h3),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,y=!1,b=0,w=K4("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,g.fill)),T=Z4("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!g.autoStroke||y)?(b=H4,g.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;m.text=r.text,m.x=s,m.y=f,S&&(m.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,m.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),m.textAlign=a,m.textBaseline="middle",m.font=r.font||lu,m.opacity=Rd(u.opacity,n.opacity,1),Y4(m,u),T&&(m.lineWidth=Rd(u.lineWidth,n.lineWidth,b),m.lineDash=Qt(u.lineDash,n.lineDash),m.lineDashOffset=n.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=r.contentWidth,x=r.contentHeight;v.setBoundingRect(new ce(dd(m.x,k,m.textAlign),Ic(m.y,x,m.textBaseline),k,x))},t.prototype._renderBackground=function(r,n,i,o,s,a){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,m;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(rr),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=o,g.width=s,g.height=a,g.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=Qt(r.fillOpacity,1)}else if(f){m=this._getOrCreateChild(Ms),m.onload=function(){p.dirtyStyle()};var b=m.style;b.image=l.image,b.x=i,b.y=o,b.width=s,b.height=a}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=Qt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=Rd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return htt(r)&&(n=[r.fontStyle,r.fontWeight,ftt(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Eo(n)||r.textFont||r.font},t}(Pu),utt={left:!0,right:1,center:1},ctt={top:1,bottom:1,middle:1},X4=["fontStyle","fontWeight","fontSize","fontFamily"];function ftt(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?qk+"px":e+"px"}function Y4(e,t){for(var r=0;r<X4.length;r++){var n=X4[r],i=t[n];i!=null&&(e[n]=i)}}function htt(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function dtt(e){return q4(e),$(e.rich,q4),e}function q4(e){if(e){e.font=oN.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||utt[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||ctt[r]?r:"top";var n=e.padding;n&&(e.padding=f7(e.padding))}}function Z4(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function K4(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function J4(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function Q4(e){var t=e.text;return t!=null&&(t+=""),t}function Sb(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const nr=oN;var le=Re(),ptt=function(e,t,r,n){if(n){var i=le(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var s=le(o);s.seriesIndex=e,s.dataIndex=r,s.dataType=t})}},tM=1,eM={},sN=Re(),hP=Re(),dP=0,Kp=1,c_=2,li=["emphasis","blur","select"],rM=["normal","emphasis","blur","select"],vtt=10,gtt=9,Jl="highlight",nm="downplay",$d="select",im="unselect",zd="toggleSelect";function tc(e){return e!=null&&e!=="none"}var nM=new Yp(100);function iM(e){if(Mt(e)){var t=nM.get(e);return t||(t=w4(e,-.1),nM.put(e,t)),t}else if(i_(e)){var r=ut({},e);return r.colorStops=It(e.colorStops,function(n){return{offset:n.offset,color:w4(n.color,-.1)}}),r}return e}function f_(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function aN(e){f_(e,"emphasis",c_)}function lN(e){e.hoverState===c_&&f_(e,"normal",dP)}function pP(e){f_(e,"blur",Kp)}function uN(e){e.hoverState===Kp&&f_(e,"normal",dP)}function mtt(e){e.selected=!0}function _tt(e){e.selected=!1}function oM(e,t,r){t(e,r)}function xs(e,t,r){oM(e,t,r),e.isGroup&&e.traverse(function(n){oM(n,t,r)})}function d3(e,t){switch(t){case"emphasis":e.hoverState=c_;break;case"normal":e.hoverState=dP;break;case"blur":e.hoverState=Kp;break;case"select":e.selected=!0}}function ytt(e,t,r,n){for(var i=e.style,o={},s=0;s<t.length;s++){var a=t[s],l=i[a];o[a]=l==null?n&&n[a]:l}for(var s=0;s<e.animators.length;s++){var u=e.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function btt(e,t,r,n){var i=r&&he(r,"select")>=0,o=!1;if(e instanceof pe){var s=sN(e),a=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(tc(a)||tc(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ut({},n),u=ut({},u),u.fill=a):!tc(u.fill)&&tc(a)?(o=!0,n=ut({},n),u=ut({},u),u.fill=iM(a)):!tc(u.stroke)&&tc(l)&&(o||(n=ut({},n),u=ut({},u)),u.stroke=iM(l)),n.style=u}}if(n&&n.z2==null){o||(n=ut({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:vtt)}return n}function wtt(e,t,r){if(r&&r.z2==null){r=ut({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:gtt)}return r}function Stt(e,t,r){var n=he(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:ytt(e,["opacity"],t,{opacity:1});r=r||{};var s=r.style||{};return s.opacity==null&&(r=ut({},r),s=ut({opacity:n?i:o.opacity*.1},s),r.style=s),r}function Tb(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return btt(this,e,t,r);if(e==="blur")return Stt(this,e,r);if(e==="select")return wtt(this,e,r)}return r}function vP(e){e.stateProxy=Tb;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Tb),r&&(r.stateProxy=Tb)}function sM(e,t){!dN(e,t)&&!e.__highByOuter&&xs(e,aN)}function aM(e,t){!dN(e,t)&&!e.__highByOuter&&xs(e,lN)}function pp(e,t){e.__highByOuter|=1<<(t||0),xs(e,aN)}function vp(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&xs(e,lN)}function cN(e){xs(e,pP)}function gP(e){xs(e,uN)}function fN(e){xs(e,mtt)}function hN(e){xs(e,_tt)}function dN(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function pN(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var s=hP(o),a=i==="series",l=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&n.push(l),s.isBlured&&(l.group.traverse(function(u){uN(u)}),a&&r.push(o)),s.isBlured=!1}),$(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function p3(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&gP(h)}}if(e!=null&&!(!t||t==="none")){var s=i.getSeriesByIndex(e),a=s.coordinateSystem;a&&a.master&&(a=a.master);var l=[];i.eachSeries(function(u){var c=s===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&a?f===a:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(m){pP(m)}),Zr(t))o(u.getData(),t);else if(Nt(t))for(var p=ge(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),hP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function v3(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){hP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){pP(o)})}}}function Ttt(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=cu(i,t);o=(pt(o)?o[0]:o)||0;var s=i.getItemGraphicEl(o);if(!s)for(var a=i.count(),l=0;!s&&l<a;)s=i.getItemGraphicEl(l++);if(s){var u=le(s);p3(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&p3(n,c,f,r)}}}function mP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var s=n.getViewOfComponentModel(o);if(!s||!s.findHighDownDispatchers)return i;for(var a=s.findHighDownDispatchers(r),l,u=0;u<a.length;u++)if(le(a[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:a}}function ktt(e,t,r){var n=le(e),i=mP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,s=i.focusSelf;o?(s&&v3(n.componentMainType,n.componentIndex,r),$(o,function(a){return sM(a,t)})):(p3(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&v3(n.componentMainType,n.componentIndex,r),sM(e,t))}function Ptt(e,t,r){pN(r);var n=le(e),i=mP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?$(i,function(o){return aM(o,t)}):aM(e,t)}function Ctt(e,t,r){if(!!_3(t)){var n=t.dataType,i=e.getData(n),o=cu(i,t);pt(o)||(o=[o]),e[t.type===zd?"toggleSelect":t.type===$d?"select":"unselect"](o,n)}}function lM(e){var t=e.getAllData();$(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,s){e.isSelected(s,i)?fN(o):hN(o)})})}function Ett(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();$(n,function(i){i.data;var o=i.type,s=r.getSelectedDataIndices();if(s.length>0){var a={dataIndex:s,seriesIndex:r.seriesIndex};o!=null&&(a.dataType=o),t.push(a)}})}),t}function g3(e,t,r){_P(e,!0),xs(e,vP),Mtt(e,t,r)}function Att(e){_P(e,!1)}function hu(e,t,r,n){n?Att(e):g3(e,t,r)}function Mtt(e,t,r){var n=le(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var uM=["emphasis","blur","select"],xtt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function gp(e,t,r,n){r=r||"itemStyle";for(var i=0;i<uM.length;i++){var o=uM[i],s=t.getModel([o,r]),a=e.ensureState(o);a.style=n?n(s):s[xtt[r]]()}}function _P(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function m3(e){return!!(e&&e.__highDownDispatcher)}function Itt(e){var t=eM[e];return t==null&&tM<=32&&(t=eM[e]=tM++),t}function _3(e){var t=e.type;return t===$d||t===im||t===zd}function cM(e){var t=e.type;return t===Jl||t===nm}function Ltt(e){var t=sN(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var ec=fu.CMD,Ott=[[],[],[]],fM=Math.sqrt,Rtt=Math.atan2;function Dtt(e,t){if(!!t){var r=e.data,n=e.len(),i,o,s,a,l,u,c=ec.M,f=ec.C,h=ec.L,d=ec.R,p=ec.A,v=ec.Q;for(s=0,a=0;s<n;){switch(i=r[s++],a=s,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var m=t[4],g=t[5],y=fM(t[0]*t[0]+t[1]*t[1]),b=fM(t[2]*t[2]+t[3]*t[3]),w=Rtt(-t[1]/b,t[0]/y);r[s]*=y,r[s++]+=m,r[s]*=b,r[s++]+=g,r[s++]*=y,r[s++]*=b,r[s++]+=w,r[s++]+=w,s+=2,a=s;break;case d:u[0]=r[s++],u[1]=r[s++],sn(u,u,t),r[a++]=u[0],r[a++]=u[1],u[0]+=r[s++],u[1]+=r[s++],sn(u,u,t),r[a++]=u[0],r[a++]=u[1]}for(l=0;l<o;l++){var T=Ott[l];T[0]=r[s++],T[1]=r[s++],sn(T,T,t),r[a++]=T[0],r[a++]=T[1]}}e.increaseVersion()}}var kb=Math.sqrt,Y0=Math.sin,q0=Math.cos,yh=Math.PI;function hM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function y3(e,t){return(e[0]*t[0]+e[1]*t[1])/(hM(e)*hM(t))}function dM(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(y3(e,t))}function pM(e,t,r,n,i,o,s,a,l,u,c){var f=l*(yh/180),h=q0(f)*(e-r)/2+Y0(f)*(t-n)/2,d=-1*Y0(f)*(e-r)/2+q0(f)*(t-n)/2,p=h*h/(s*s)+d*d/(a*a);p>1&&(s*=kb(p),a*=kb(p));var v=(i===o?-1:1)*kb((s*s*(a*a)-s*s*(d*d)-a*a*(h*h))/(s*s*(d*d)+a*a*(h*h)))||0,m=v*s*d/a,g=v*-a*h/s,y=(e+r)/2+q0(f)*m-Y0(f)*g,b=(t+n)/2+Y0(f)*m+q0(f)*g,w=dM([1,0],[(h-m)/s,(d-g)/a]),T=[(h-m)/s,(d-g)/a],S=[(-1*h-m)/s,(-1*d-g)/a],k=dM(T,S);if(y3(T,S)<=-1&&(k=yh),y3(T,S)>=1&&(k=0),k<0){var x=Math.round(k/yh*1e6)/1e6;k=yh*2+x%2*yh}c.addData(u,y,b,s,a,w,k,f,o)}var Ntt=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Ftt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $tt(e){var t=new fu;if(!e)return t;var r=0,n=0,i=r,o=n,s,a=fu.CMD,l=e.match(Ntt);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(Ftt)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,x=r,A=n,I=void 0,L=void 0;switch(f){case"l":r+=d[m++],n+=d[m++],h=a.L,t.addData(h,r,n);break;case"L":r=d[m++],n=d[m++],h=a.L,t.addData(h,r,n);break;case"m":r+=d[m++],n+=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[m++],n=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[m++],h=a.L,t.addData(h,r,n);break;case"H":r=d[m++],h=a.L,t.addData(h,r,n);break;case"v":n+=d[m++],h=a.L,t.addData(h,r,n);break;case"V":n=d[m++],h=a.L,t.addData(h,r,n);break;case"C":h=a.C,t.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),r=d[m-2],n=d[m-1];break;case"c":h=a.C,t.addData(h,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n),r+=d[m-2],n+=d[m-1];break;case"S":g=r,y=n,I=t.len(),L=t.data,s===a.C&&(g+=r-L[I-4],y+=n-L[I-3]),h=a.C,x=d[m++],A=d[m++],r=d[m++],n=d[m++],t.addData(h,g,y,x,A,r,n);break;case"s":g=r,y=n,I=t.len(),L=t.data,s===a.C&&(g+=r-L[I-4],y+=n-L[I-3]),h=a.C,x=r+d[m++],A=n+d[m++],r+=d[m++],n+=d[m++],t.addData(h,g,y,x,A,r,n);break;case"Q":x=d[m++],A=d[m++],r=d[m++],n=d[m++],h=a.Q,t.addData(h,x,A,r,n);break;case"q":x=d[m++]+r,A=d[m++]+n,r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,x,A,r,n);break;case"T":g=r,y=n,I=t.len(),L=t.data,s===a.Q&&(g+=r-L[I-4],y+=n-L[I-3]),r=d[m++],n=d[m++],h=a.Q,t.addData(h,g,y,r,n);break;case"t":g=r,y=n,I=t.len(),L=t.data,s===a.Q&&(g+=r-L[I-4],y+=n-L[I-3]),r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,g,y,r,n);break;case"A":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],x=r,A=n,r=d[m++],n=d[m++],h=a.A,pM(x,A,r,n,S,k,b,w,T,h,t);break;case"a":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],x=r,A=n,r+=d[m++],n+=d[m++],h=a.A,pM(x,A,r,n,S,k,b,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=a.Z,t.addData(h),r=i,n=o),s=h}return t.toStatic(),t}var vN=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(pe);function gN(e){return e.setData!=null}function mN(e,t){var r=$tt(e),n=ut({},t);return n.buildPath=function(i){if(gN(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){Dtt(r,i),this.dirtyShape()},n}function ztt(e,t){return new vN(mN(e,t))}function Btt(e,t){var r=mN(e,t),n=function(i){Ee(o,i);function o(s){var a=i.call(this,s)||this;return a.applyTransform=r.applyTransform,a.buildPath=r.buildPath,a}return o}(vN);return n}function Vtt(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var s=new pe(t);return s.createPathProxy(),s.buildPath=function(a){if(gN(a)){a.appendPath(r);var l=a.getContext();l&&a.rebuildPath(l,1)}},s}var Utt=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),_N=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Utt},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(pe);_N.prototype.type="circle";const yP=_N;var Wtt=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),yN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Wtt},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,s=n.cy,a=n.rx,l=n.ry,u=a*i,c=l*i;r.moveTo(o-a,s),r.bezierCurveTo(o-a,s-c,o-u,s-l,o,s-l),r.bezierCurveTo(o+u,s-l,o+a,s-c,o+a,s),r.bezierCurveTo(o+a,s+c,o+u,s+l,o,s+l),r.bezierCurveTo(o-u,s+l,o-a,s+c,o-a,s),r.closePath()},t}(pe);yN.prototype.type="ellipse";const bN=yN;var wN=Math.PI,Pb=wN*2,ml=Math.sin,rc=Math.cos,jtt=Math.acos,$r=Math.atan2,vM=Math.abs,Bd=Math.sqrt,pd=Math.max,ao=Math.min,Si=1e-4;function Gtt(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=f*l-c*u;if(!(h*h<Si))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Z0(e,t,r,n,i,o,s){var a=e-r,l=t-n,u=(s?o:-o)/Bd(a*a+l*l),c=u*l,f=-u*a,h=e+c,d=t+f,p=r+c,v=n+f,m=(h+p)/2,g=(d+v)/2,y=p-h,b=v-d,w=y*y+b*b,T=i-o,S=h*v-p*d,k=(b<0?-1:1)*Bd(pd(0,T*T*w-S*S)),x=(S*b-y*k)/w,A=(-S*y-b*k)/w,I=(S*b+y*k)/w,L=(-S*y+b*k)/w,N=x-m,z=A-g,V=I-m,F=L-g;return N*N+z*z>V*V+F*F&&(x=I,A=L),{cx:x,cy:A,x0:-c,y0:-f,x1:x*(i/T-1),y1:A*(i/T-1)}}function Htt(e){var t;if(pt(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Xtt(e,t){var r,n=pd(t.r,0),i=pd(t.r0||0,0),o=n>0,s=i>0;if(!(!o&&!s)){if(o||(n=i,i=0),i>n){var a=n;n=i,i=a}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=vM(u-l),p=d>Pb&&d%Pb;if(p>Si&&(d=p),!(n>Si))e.moveTo(c,f);else if(d>Pb-Si)e.moveTo(c+n*rc(l),f+n*ml(l)),e.arc(c,f,n,l,u,!h),i>Si&&(e.moveTo(c+i*rc(u),f+i*ml(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,x=void 0,A=void 0,I=void 0,L=void 0,N=void 0,z=void 0,V=void 0,F=n*rc(l),G=n*ml(l),K=i*rc(u),q=i*ml(u),rt=d>Si;if(rt){var At=t.cornerRadius;At&&(r=Htt(At),v=r[0],m=r[1],g=r[2],y=r[3]);var Ft=vM(n-i)/2;if(b=ao(Ft,g),w=ao(Ft,y),T=ao(Ft,v),S=ao(Ft,m),A=k=pd(b,w),I=x=pd(T,S),(k>Si||x>Si)&&(L=n*rc(u),N=n*ml(u),z=i*rc(l),V=i*ml(l),d<wN)){var Pt=Gtt(F,G,z,V,L,N,K,q);if(Pt){var Ct=F-Pt[0],Zt=G-Pt[1],Y=L-Pt[0],ot=N-Pt[1],J=1/ml(jtt((Ct*Y+Zt*ot)/(Bd(Ct*Ct+Zt*Zt)*Bd(Y*Y+ot*ot)))/2),yt=Bd(Pt[0]*Pt[0]+Pt[1]*Pt[1]);A=ao(k,(n-yt)/(J+1)),I=ao(x,(i-yt)/(J-1))}}}if(!rt)e.moveTo(c+F,f+G);else if(A>Si){var Et=ao(g,A),xt=ao(y,A),ht=Z0(z,V,F,G,n,Et,h),vt=Z0(L,N,K,q,n,xt,h);e.moveTo(c+ht.cx+ht.x0,f+ht.cy+ht.y0),A<k&&Et===xt?e.arc(c+ht.cx,f+ht.cy,A,$r(ht.y0,ht.x0),$r(vt.y0,vt.x0),!h):(Et>0&&e.arc(c+ht.cx,f+ht.cy,Et,$r(ht.y0,ht.x0),$r(ht.y1,ht.x1),!h),e.arc(c,f,n,$r(ht.cy+ht.y1,ht.cx+ht.x1),$r(vt.cy+vt.y1,vt.cx+vt.x1),!h),xt>0&&e.arc(c+vt.cx,f+vt.cy,xt,$r(vt.y1,vt.x1),$r(vt.y0,vt.x0),!h))}else e.moveTo(c+F,f+G),e.arc(c,f,n,l,u,!h);if(!(i>Si)||!rt)e.lineTo(c+K,f+q);else if(I>Si){var Et=ao(v,I),xt=ao(m,I),ht=Z0(K,q,L,N,i,-xt,h),vt=Z0(F,G,z,V,i,-Et,h);e.lineTo(c+ht.cx+ht.x0,f+ht.cy+ht.y0),I<x&&Et===xt?e.arc(c+ht.cx,f+ht.cy,I,$r(ht.y0,ht.x0),$r(vt.y0,vt.x0),!h):(xt>0&&e.arc(c+ht.cx,f+ht.cy,xt,$r(ht.y0,ht.x0),$r(ht.y1,ht.x1),!h),e.arc(c,f,i,$r(ht.cy+ht.y1,ht.cx+ht.x1),$r(vt.cy+vt.y1,vt.cx+vt.x1),h),Et>0&&e.arc(c+vt.cx,f+vt.cy,Et,$r(vt.y1,vt.x1),$r(vt.y0,vt.x0),!h))}else e.lineTo(c+K,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var Ytt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),SN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ytt},t.prototype.buildPath=function(r,n){Xtt(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(pe);SN.prototype.type="sector";const Jp=SN;var qtt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),TN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new qtt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,s,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,s,!0)},t}(pe);TN.prototype.type="ring";const kN=TN;function Ztt(e,t,r,n){var i=[],o=[],s=[],a=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)Rc(c,c,e[h]),Dc(f,f,e[h]);Rc(c,c,n[0]),Dc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(yK(e[h]));continue}else l=e[h-1],u=e[h+1];v7(o,u,l),Vy(o,o,t);var v=GS(p,l),m=GS(p,u),g=v+m;g!==0&&(v/=g,m/=g),Vy(s,o,-v),Vy(a,o,m);var y=s4([],p,s),b=s4([],p,a);n&&(Dc(y,y,c),Rc(y,y,f),Dc(b,b,c),Rc(b,b,f)),i.push(y),i.push(b)}return r&&i.push(i.shift()),i}function PN(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=Ztt(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,a=0;a<(r?s:s-1);a++){var l=o[a*2],u=o[a*2+1],c=i[(a+1)%s];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var a=1,f=i.length;a<f;a++)e.lineTo(i[a][0],i[a][1])}r&&e.closePath()}}var Ktt=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),CN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ktt},t.prototype.buildPath=function(r,n){PN(r,n,!0)},t}(pe);CN.prototype.type="polygon";const mp=CN;var Jtt=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),EN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Jtt},t.prototype.buildPath=function(r,n){PN(r,n,!1)},t}(pe);EN.prototype.type="polyline";const AN=EN;var Qtt={},tet=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),MN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tet},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=rN(Qtt,n,this.style);i=l.x1,o=l.y1,s=l.x2,a=l.y2}else i=n.x1,o=n.y1,s=n.x2,a=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(s=i*(1-u)+s*u,a=o*(1-u)+a*u),r.lineTo(s,a))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(pe);MN.prototype.type="line";const Oa=MN;var hn=[],eet=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function gM(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?_4:cr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?_4:cr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?y4:Ur)(e.x1,e.cpx1,e.x2,t),(r?y4:Ur)(e.y1,e.cpy1,e.y2,t)]}var xN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new eet},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,s=n.x2,a=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Wm(i,l,s,h,hn),l=hn[1],s=hn[2],Wm(o,u,a,h,hn),u=hn[1],a=hn[2]),r.quadraticCurveTo(l,u,s,a)):(h<1&&(Um(i,l,c,s,h,hn),l=hn[1],c=hn[2],s=hn[3],Um(o,u,f,a,h,hn),u=hn[1],f=hn[2],a=hn[3]),r.bezierCurveTo(l,u,c,f,s,a)))},t.prototype.pointAt=function(r){return gM(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=gM(this.shape,r,!0);return tP(n,n)},t}(pe);xN.prototype.type="bezier-curve";const h_=xN;var ret=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),IN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ret},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r,0),a=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(a),f=Math.sin(a);r.moveTo(c*s+i,f*s+o),r.arc(i,o,s,a,l,!u)},t}(pe);IN.prototype.type="arc";const bP=IN;var net=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),pe.prototype.getBoundingRect.call(this)},t}(pe);const iet=net;var oet=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const LN=oet;var set=function(e){Ee(t,e);function t(r,n,i,o,s,a){var l=e.call(this,s)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=a||!1,l}return t}(LN);const wP=set;var aet=function(e){Ee(t,e);function t(r,n,i,o,s){var a=e.call(this,o)||this;return a.x=r==null?.5:r,a.y=n==null?.5:n,a.r=i==null?.5:i,a.type="radial",a.global=s||!1,a}return t}(LN);const uet=aet;var _l=[0,0],yl=[0,0],K0=new Ie,J0=new Ie,cet=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Ie;for(var n=0;n<2;n++)this._axes[n]=new Ie;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,s=t.y,a=o+t.width,l=s+t.height;if(n[0].set(o,s),n[1].set(a,s),n[2].set(a,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);Ie.sub(i[0],n[1],n[0]),Ie.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return K0.set(1/0,1/0),J0.set(0,0),!this._intersectCheckOneSide(this,t,K0,J0,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,K0,J0,i,-1)&&(n=!1,i)||i||Ie.copy(r,n?K0:J0),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,s){for(var a=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,_l),this._getProjMinMaxOnAxis(l,r._corners,yl),_l[1]<yl[0]||_l[0]>yl[1]){if(a=!1,o)return a;var c=Math.abs(yl[0]-_l[1]),f=Math.abs(_l[0]-yl[1]);Math.min(c,f)>i.len()&&(c<f?Ie.scale(i,u,-c*s):Ie.scale(i,u,f*s))}else if(n){var c=Math.abs(yl[0]-_l[1]),f=Math.abs(_l[0]-yl[1]);Math.min(c,f)<n.len()&&(c<f?Ie.scale(n,u,c*s):Ie.scale(n,u,-f*s))}}return a},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,s=r[0].dot(i)+o[t],a=s,l=s,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];a=Math.min(c,a),l=Math.max(c,l)}n[0]=a,n[1]=l},e}();const qm=cet;var fet=[],het=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ce(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(fet)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var a=this._displayables[s];if(a.contain(r,n))return!0}return!1},t}(Pu);const det=het;var pet=Re();function SP(e,t,r,n,i){var o;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();o=s&&s.animation}var a=t&&t.isAnimationEnabled(),l=e==="update";if(a){var u=void 0,c=void 0,f=void 0;n?(u=Qt(n.duration,200),c=Qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ht(f)&&(f=f(r,i)),Ht(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function TP(e,t,r,n,i,o,s){var a=!1,l;Ht(i)?(s=o,o=i,i=null):Nt(i)&&(o=i.cb,s=i.during,a=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=SP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!s,setToFinal:!u,scope:e,during:s};a?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!a&&t.attr(r),s&&s(1),o&&o()}function yr(e,t,r,n,i,o){TP("update",e,t,r,n,i,o)}function Do(e,t,r,n,i,o){TP("enter",e,t,r,n,i,o)}function Vd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function du(e,t,r,n,i,o){Vd(e)||TP("leave",e,t,r,n,i,o)}function mM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),du(e,{style:{opacity:0}},t,r,n)}function b3(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||mM(i,t,r,n)}):mM(e,t,r,n)}function ON(e){pet(e).oldStyle=e.style}var Zm=Math.max,Km=Math.min,w3={};function vet(e){return pe.extend(e)}var get=Btt;function met(e,t){return get(e,t)}function Yi(e,t){w3[e]=t}function RN(e){if(w3.hasOwnProperty(e))return w3[e]}function d_(e,t,r,n){var i=ztt(e,t);return r&&(n==="center"&&(r=NN(r,i.getBoundingRect())),FN(i,r)),i}function DN(e,t,r){var n=new Ms({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(NN(t,o))}}});return n}function NN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,s=e.y+e.height/2;return{x:o-n/2,y:s-i/2,width:n,height:i}}var _et=Vtt;function FN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function _p(e,t){return rN(e,e,{lineWidth:t}),e}function yet(e){return nN(e.shape,e.shape,e.style),e}var bet=Ul;function om(e,t){for(var r=rP([]);e&&e!==t;)Yc(r,e.getLocalTransform(),r),e=e.parent;return r}function Zc(e,t,r){return t&&!Zr(t)&&(t=Vl.getLocalTransform(t)),r&&(t=s_([],t)),sn([],e,t)}function $N(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Zc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function _M(e){return!e.isGroup}function wet(e){return e.shape!=null}function zN(e,t,r){if(!e||!t)return;function n(s){var a={};return s.traverse(function(l){_M(l)&&l.anid&&(a[l.anid]=l)}),a}function i(s){var a={x:s.x,y:s.y,rotation:s.rotation};return wet(s)&&(a.shape=ut({},s.shape)),a}var o=n(e);t.traverse(function(s){if(_M(s)&&s.anid){var a=o[s.anid];if(a){var l=i(s);s.attr(i(a)),yr(s,l,r,le(s).dataIndex)}}})}function Tet(e,t){return It(e,function(r){var n=r[0];n=Zm(n,t.x),n=Km(n,t.x+t.width);var i=r[1];return i=Zm(i,t.y),i=Km(i,t.y+t.height),[n,i]})}function ket(e,t){var r=Zm(e.x,t.x),n=Km(e.x+e.width,t.x+t.width),i=Zm(e.y,t.y),o=Km(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function kP(e,t,r){var n=ut({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),ie(i,r),new Ms(n)):d_(e.replace("path://",""),n,r,"center")}function Pet(e,t,r,n,i){for(var o=0,s=i[i.length-1];o<i.length;o++){var a=i[o];if(BN(e,t,r,n,a[0],a[1],s[0],s[1]))return!0;s=a}}function BN(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=Cb(c,f,l,u);if(Cet(h))return!1;var d=e-i,p=t-o,v=Cb(d,p,l,u)/h;if(v<0||v>1)return!1;var m=Cb(d,p,c,f)/h;return!(m<0||m>1)}function Cb(e,t,r,n){return e*n-r*t}function Cet(e){return e<=1e-6&&e>=-1e-6}function PP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Mt(t)?{formatter:t}:t,o=r.mainType,s=r.componentIndex,a={componentType:o,name:n,$vars:["name"]};a[o+"Index"]=s;var l=e.formatterParamsExtra;l&&$(ge(l),function(c){_t(a,c)||(a[c]=l[c],a.$vars.push(c))});var u=le(e.el);u.componentMainType=o,u.componentIndex=s,u.tooltipConfig={name:n,option:ie({content:n,formatterParams:a},i)}}function yM(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function xf(e,t){if(e)if(pt(e))for(var r=0;r<e.length;r++)yM(e[r],t);else yM(e,t)}Yi("circle",yP);Yi("ellipse",bN);Yi("sector",Jp);Yi("ring",kN);Yi("polygon",mp);Yi("polyline",AN);Yi("rect",rr);Yi("line",Oa);Yi("bezierCurve",h_);Yi("arc",bP);const Eet=Object.freeze(Object.defineProperty({__proto__:null,updateProps:yr,initProps:Do,removeElement:du,removeElementWithFadeOut:b3,isElementRemoved:Vd,extendShape:vet,extendPath:met,registerShape:Yi,getShapeClass:RN,makePath:d_,makeImage:DN,mergePath:_et,resizePath:FN,subPixelOptimizeLine:_p,subPixelOptimizeRect:yet,subPixelOptimize:bet,getTransform:om,applyTransform:Zc,transformDirection:$N,groupTransition:zN,clipPointsByRect:Tet,clipRectByRect:ket,createIcon:kP,linePolygonIntersect:Pet,lineLineIntersect:BN,setTooltipConfig:PP,traverseElements:xf,Group:Fe,Image:Ms,Text:nr,Circle:yP,Ellipse:bN,Sector:Jp,Ring:kN,Polygon:mp,Polyline:AN,Rect:rr,Line:Oa,BezierCurve:h_,Arc:bP,IncrementalDisplayable:det,CompoundPath:iet,LinearGradient:wP,RadialGradient:uet,BoundingRect:ce,OrientedBoundingRect:qm,Point:Ie,Path:pe},Symbol.toStringTag,{value:"Module"}));var p_={};function Aet(e,t){for(var r=0;r<li.length;r++){var n=li[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function bM(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,s=t.normal,a;n&&(a=n.getFormattedLabel(i,"normal",null,o,s&&s.get("formatter"),r!=null?{interpolatedValue:r}:null)),a==null&&(a=Ht(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:a},u=0;u<li.length;u++){var c=li[u],f=t[c];l[c]=Qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,a)}return l}function If(e,t,r,n){r=r||p_;for(var i=e instanceof nr,o=!1,s=0;s<rM.length;s++){var a=t[rM[s]];if(a&&a.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new nr,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=bM(r,t),c=t.normal,f=!!c.getShallow("show"),h=yn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Jm(c,r,!1));for(var s=0;s<li.length;s++){var d=li[s],a=t[d];if(a){var p=l.ensureState(d),v=!!Qt(a.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=yn(a,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var m=e.ensureState(d);m.textConfig=Jm(a,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(v_(l).setLabelText=function(g){var y=bM(r,t,g);Aet(l,y)})}else l&&(l.ignore=!0);e.dirty()}function Cu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<li.length;n++){var i=li[n];r[i]=e.getModel([i,t])}return r}function yn(e,t,r,n,i){var o={};return Met(o,e,r,n,i),t&&ut(o,t),o}function Jm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),s=Qt(e.getShallow("distance"),r?null:5),a=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),a!=null&&(n.offset=a),o!=null&&(o*=Math.PI/180,n.rotation=o),s!=null&&(n.distance=s),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function Met(e,t,r,n,i){r=r||p_;var o=t.ecModel,s=o&&o.option.textStyle,a=xet(t),l;if(a){l={};for(var u in a)if(a.hasOwnProperty(u)){var c=t.getModel(["rich",u]);kM(l[u]={},c,s,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),kM(e,t,s,r,n,i,!0,!1)}function xet(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||p_).rich;if(r){t=t||{};for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var wM=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],SM=["align","lineHeight","width","height","tag","verticalAlign"],TM=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function kM(e,t,r,n,i,o,s,a){r=!i&&r||p_;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=Qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=Qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=Qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=Qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!a&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<wM.length;v++){var m=wM[v],g=Qt(t.getShallow(m),r[m]);g!=null&&(e[m]=g)}for(var v=0;v<SM.length;v++){var m=SM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!s||!n.disableBox){for(var v=0;v<TM.length;v++){var m=TM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}var b=t.getShallow("borderType");b!=null&&(e.borderDash=b),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function VN(e,t){var r=t&&t.getModel("textStyle");return Eo([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var v_=Re();function Iet(e,t,r,n){if(!!e){var i=v_(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var Let=["textStyle","color"],Eb=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Ab=new nr,Oet=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Let):null)},e.prototype.getFont=function(){return VN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Eb.length;n++)r[Eb[n]]=this.getShallow(Eb[n]);return Ab.useStyle(r),Ab.update(),Ab.getBoundingRect()},e}();const Ret=Oet;var UN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Det=dp(UN),Net=function(){function e(){}return e.prototype.getLineStyle=function(t){return Det(this,t)},e}(),WN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Fet=dp(WN),$et=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Fet(this,t,r)},e}(),Eu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){ue(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Ut(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Kt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();fP(Eu);mQ(Eu);Hi(Eu,Net);Hi(Eu,$et);Hi(Eu,SQ);Hi(Eu,Ret);const Mr=Eu;var zet=Math.round(Math.random()*10);function g_(e){return[e||"",zet++].join("_")}function Bet(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Mo(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=Mo(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function Vet(e,t){e.topologicalTravel=function(o,s,a,l){if(!o.length)return;var u=r(s),c=u.graph,f=u.noEntryList,h={};for($(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(a.call(l,d,p.originalDeps.slice()),delete h[d]),$(p.successor,v?g:m)}$(h,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function g(y){h[y]=!0,m(y)}};function r(o){var s={},a=[];return $(o,function(l){var u=n(s,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&a.push(l),$(f,function(h){he(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(s,h);he(d.successor,h)<0&&d.successor.push(l)})}),{graph:s,noEntryList:a}}function n(o,s){return o[s]||(o[s]={predecessor:[],successor:[]}),o[s]}function i(o,s){var a=[];return $(o,function(l){he(s,l)>=0&&a.push(l)}),a}}function m_(e,t){return ue(ue({},e,!0),t,!0)}const Uet={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Wet={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Qm="ZH",CP="EN",yp=CP,sm={},EP={},jN=Kt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Qm)>-1?Qm:yp}():yp;function GN(e,t){e=e.toUpperCase(),EP[e]=new Mr(t),sm[e]=t}function jet(e){if(Mt(e)){var t=sm[e.toUpperCase()]||{};return e===Qm||e===CP?Ut(t):ue(Ut(t),Ut(sm[yp]),!1)}else return ue(Ut(e),Ut(sm[yp]),!1)}function Get(e){return EP[e]}function Het(){return EP[yp]}GN(CP,Uet);GN(Qm,Wet);var AP=1e3,MP=AP*60,Ud=MP*60,ri=Ud*24,PM=ri*365,vd={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Q0="{yyyy}-{MM}-{dd}",CM={year:"{yyyy}",month:"{yyyy}-{MM}",day:Q0,hour:Q0+" "+vd.hour,minute:Q0+" "+vd.minute,second:Q0+" "+vd.second,millisecond:vd.none},Mb=["year","month","day","hour","minute","second","millisecond"],HN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function bl(e,t){return e+="","0000".substr(0,t-e.length)+e}function Kc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Xet(e){return e===Kc(e)}function Yet(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function __(e,t,r,n){var i=ws(e),o=i[xP(r)](),s=i[Jc(r)]()+1,a=Math.floor((s-1)/3)+1,l=i[y_(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[bp(r)](),f=(c-1)%12+1,h=i[b_(r)](),d=i[w_(r)](),p=i[S_(r)](),v=n instanceof Mr?n:Get(n||jN)||Het(),m=v.getModel("time"),g=m.get("month"),y=m.get("monthAbbr"),b=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,a+"").replace(/{MMMM}/g,g[s-1]).replace(/{MMM}/g,y[s-1]).replace(/{MM}/g,bl(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,bl(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,bl(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,bl(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,bl(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,bl(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,bl(p,3)).replace(/{S}/g,p+"")}function qet(e,t,r,n,i){var o=null;if(Mt(r))o=r;else if(Ht(r))o=r(e.value,t,{level:e.level});else{var s=ut({},vd);if(e.level>0)for(var a=0;a<Mb.length;++a)s[Mb[a]]="{primary|"+s[Mb[a]]+"}";var l=r?r.inherit===!1?r:ie(r,s):s,u=XN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=HN.indexOf(u),a=c-1;a>=0;--a)if(l[u]){o=l[u];break}o=o||s.none}if(pt(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return __(new Date(e.value),o,i,n)}function XN(e,t){var r=ws(e),n=r[Jc(t)]()+1,i=r[y_(t)](),o=r[bp(t)](),s=r[b_(t)](),a=r[w_(t)](),l=r[S_(t)](),u=l===0,c=u&&a===0,f=c&&s===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function EM(e,t,r){var n=Te(e)?ws(e):e;switch(t=t||XN(e,r),t){case"year":return n[xP(r)]();case"half-year":return n[Jc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Jc(r)]()+1)/4);case"month":return n[Jc(r)]();case"day":return n[y_(r)]();case"half-day":return n[bp(r)]()/24;case"hour":return n[bp(r)]();case"minute":return n[b_(r)]();case"second":return n[w_(r)]();case"millisecond":return n[S_(r)]()}}function xP(e){return e?"getUTCFullYear":"getFullYear"}function Jc(e){return e?"getUTCMonth":"getMonth"}function y_(e){return e?"getUTCDate":"getDate"}function bp(e){return e?"getUTCHours":"getHours"}function b_(e){return e?"getUTCMinutes":"getMinutes"}function w_(e){return e?"getUTCSeconds":"getSeconds"}function S_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function Zet(e){return e?"setUTCFullYear":"setFullYear"}function YN(e){return e?"setUTCMonth":"setMonth"}function qN(e){return e?"setUTCDate":"setDate"}function ZN(e){return e?"setUTCHours":"setHours"}function KN(e){return e?"setUTCMinutes":"setMinutes"}function JN(e){return e?"setUTCSeconds":"setSeconds"}function QN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function tF(e){if(!qJ(e))return Mt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function eF(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Qp=f7;function S3(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Eo(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=t==="time",a=e instanceof Date;if(s||a){var l=s?ws(e):e;if(isNaN(+l)){if(a)return"-"}else return __(l,n,r)}if(t==="ordinal")return WS(e)?i(e):Te(e)&&o(e)?e+"":"-";var u=La(e);return o(u)?tF(u):WS(e)?i(e):typeof e=="boolean"?e+"":"-"}var AM=["a","b","c","d","e","f","g"],xb=function(e,t){return"{"+e+(t==null?"":t)+"}"};function rF(e,t,r){pt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var s=AM[o];e=e.replace(xb(s),xb(s,0))}for(var a=0;a<n;a++)for(var l=0;l<i.length;l++){var u=t[a][i[l]];e=e.replace(xb(AM[l],a),r?Qn(u):u)}return e}function Ket(e,t){var r=Mt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Qn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Qn(n)+";"+(t||"")+'"></span>';var s=r.markerId||"markerX";return{renderMode:o,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function pu(e,t){return t=t||"transparent",Mt(e)?e:Nt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function MM(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var am=$,Jet=["left","right","top","bottom","width","height"],tv=[["width","left","right"],["height","top","bottom"]];function IP(e,t,r,n,i){var o=0,s=0;n==null&&(n=1/0),i==null&&(i=1/0);var a=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,s+=a+r,a=c.height):a=Math.max(a,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=s+m,p>i||l.newline?(o+=a+r,s=0,p=m,a=c.width):a=Math.max(a,c.width)}l.newline||(l.x=o,l.y=s,l.markRedraw(),e==="horizontal"?o=d+r:s=p+r)})}var Qc=IP;we(IP,"vertical");we(IP,"horizontal");function Ra(e,t,r){r=Qp(r||0);var n=t.width,i=t.height,o=Ke(e.left,n),s=Ke(e.top,i),a=Ke(e.right,n),l=Ke(e.bottom,i),u=Ke(e.width,n),c=Ke(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-a-h-o),isNaN(c)&&(c=i-l-f-s),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-a-u-h),isNaN(s)&&(s=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":s=i/2-c/2-r[0];break;case"bottom":s=i-c-f;break}o=o||0,s=s||0,isNaN(u)&&(u=n-h-o-(a||0)),isNaN(c)&&(c=i-f-s-(l||0));var p=new ce(o+r[3],s+r[0],u,c);return p.margin=r,p}function Qet(e,t,r,n,i,o){var s=!i||!i.hv||i.hv[0],a=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!s&&!a)return!1;var u;if(l==="raw")u=e.type==="group"?new ce(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ra(ie({width:u.width,height:u.height},t),r,n),h=s?f.x-u.x:0,d=a?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function wp(e){var t=e.layoutMode||e.constructor.layoutMode;return Nt(t)?t:t?{type:t}:null}function hf(e,t,r){var n=r&&r.ignoreSize;!pt(n)&&(n=[n,n]);var i=s(tv[0],0),o=s(tv[1],1);u(tv[0],e,i),u(tv[1],e,o);function s(c,f){var h={},d=0,p={},v=0,m=2;if(am(c,function(b){p[b]=e[b]}),am(c,function(b){a(t,b)&&(h[b]=p[b]=t[b]),l(h,b)&&d++,l(p,b)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var y=c[g];if(!a(h,y)&&a(e,y)){h[y]=e[y];break}}return h}function a(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){am(c,function(d){f[d]=h[d]})}}function T_(e){return trt({},e)}function trt(e,t){return t&&e&&am(Jet,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var ert=Re(),Lf=function(e){St(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=g_("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=wp(this),o=i?T_(r):{},s=n.getTheme();ue(r,s.get(this.mainType)),ue(r,this.getDefaultOption()),i&&hf(r,o,i)},t.prototype.mergeOption=function(r,n){ue(this.option,r,!0);var i=wp(this);i&&hf(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!pQ(r))return r.defaultOption;var n=ert(this);if(!n.defaultOption){for(var i=[],o=r;o;){var s=o.prototype.defaultOption;s&&i.push(s),o=o.superClass}for(var a={},l=i.length-1;l>=0;l--)a=ue(a,i[l],!0);n.defaultOption=a}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return Zp(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Mr);X7(Lf,Mr);a_(Lf);Bet(Lf);Vet(Lf,rrt);function rrt(e){var t=[];return $(Lf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=It(t,function(r){return Mo(r).main}),e!=="dataset"&&he(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=Lf;var nF="";typeof navigator<"u"&&(nF=navigator.platform||"");var nc="rgba(0, 0, 0, 0.2)";const nrt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:nc,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:nc,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:nc,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:nc,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:nc,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:nc,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:nF.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var iF=Yt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),hi="original",ln="arrayRows",qi="objectRows",Is="keyedColumns",Pa="typedArray",oF="unknown",Io="column",Of="row",En={Must:1,Might:2,Not:3},sF=Re();function irt(e){sF(e).datasetMap=Yt()}function ort(e,t,r){var n={},i=aF(t);if(!i||!e)return n;var o=[],s=[],a=t.ecModel,l=sF(a).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),$(e,function(v,m){var g=Nt(v)?v:e[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),n[g.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});$(e,function(v,m){var g=v.name,y=p(v);if(c==null){var b=h.valueWayDim;d(n[g],b,y),d(s,b,y),h.valueWayDim+=y}else if(c===m)d(n[g],0,y),d(o,0,y);else{var b=h.categoryWayDim;d(n[g],b,y),d(s,b,y),h.categoryWayDim+=y}});function d(v,m,g){for(var y=0;y<g;y++)v.push(m+y)}function p(v){var m=v.dimsDef;return m?m.length:1}return o.length&&(n.itemName=o),s.length&&(n.seriesName=s),n}function aF(e){var t=e.get("data",!0);if(!t)return Zp(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Li).models[0]}function srt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Zp(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Li).models}function lF(e,t){return art(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function art(e,t,r,n,i,o){var s,a=5;if(Nn(e))return En.Not;var l,u;if(n){var c=n[o];Nt(c)?(l=c.name,u=c.type):Mt(c)&&(l=c)}if(u!=null)return u==="ordinal"?En.Must:En.Not;if(t===ln){var f=e;if(r===Of){for(var h=f[o],d=0;d<(h||[]).length&&d<a;d++)if((s=w(h[i+d]))!=null)return s}else for(var d=0;d<f.length&&d<a;d++){var p=f[i+d];if(p&&(s=w(p[o]))!=null)return s}}else if(t===qi){var v=e;if(!l)return En.Not;for(var d=0;d<v.length&&d<a;d++){var m=v[d];if(m&&(s=w(m[l]))!=null)return s}}else if(t===Is){var g=e;if(!l)return En.Not;var h=g[l];if(!h||Nn(h))return En.Not;for(var d=0;d<h.length&&d<a;d++)if((s=w(h[d]))!=null)return s}else if(t===hi)for(var y=e,d=0;d<y.length&&d<a;d++){var m=y[d],b=qp(m);if(!pt(b))return En.Not;if((s=w(b[o]))!=null)return s}function w(T){var S=Mt(T);if(T!=null&&isFinite(T)&&T!=="")return S?En.Might:En.Not;if(S&&T!=="-")return En.Must}return En.Not}var lrt=Yt();function urt(e,t,r){var n=lrt.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var xM=Re();Re();var LP=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=er(this.get("color",!0)),o=this.get("colorLayer",!0);return frt(this,xM,i,o,t,r,n)},e.prototype.clearColorPalette=function(){hrt(this,xM)},e}();function crt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function frt(e,t,r,n,i,o,s){o=o||e;var a=t(o),l=a.paletteIdx||0,u=a.paletteNameMap=a.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=s==null||!n?r:crt(n,s);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),a.paletteIdx=(l+1)%c.length,f}}function hrt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var ev,bh,IM,LM="\0_ec_inner",drt=1,uF=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,s,a){o=o||{},this.option=null,this._theme=new Mr(o),this._locale=new Mr(s),this._optionManager=a},t.prototype.setOption=function(r,n,i){var o=DM(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,DM(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var s=o.mountOption(r==="recreate");!this.option||r==="recreate"?IM(this,s):(this.restoreData(),this._mergeOption(s,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var a=o.getTimelineOption(this);a&&(i=!0,this._mergeOption(a,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&$(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,s=this._componentsCount,a=[],l=Yt(),u=n&&n.replaceMergeMainTypeMap;irt(this),$(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(a.push(h),l.set(h,!0)):i[h]=i[h]==null?Ut(f):ue(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(a.push(h),l.set(h,!0))}),Me.topologicalTravel(a,Me.getAllClassMainTypes(),c,this);function c(f){var h=urt(this,f,er(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=JJ(d,h,p);oQ(v,f,Me),i[f]=null,o.set(f,null),s.set(f,0);var m=[],g=[],y=0,b;$(v,function(w,T){var S=w.existing,k=w.newOption;if(!k)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var x=f==="series",A=Me.getClass(f,w.keyInfo.subType,!x);if(!A)return;if(f==="tooltip"){if(b)return;b=!0}if(S&&S.constructor===A)S.name=w.keyInfo.name,S.mergeOption(k,this),S.optionUpdated(k,!1);else{var I=ut({componentIndex:T},w.keyInfo);S=new A(k,this,this,I),ut(S,I),w.brandNew&&(S.__requireNewView=!0),S.init(k,this,this),S.optionUpdated(null,!0)}}S?(m.push(S.option),g.push(S),y++):(m.push(void 0),g.push(void 0))},this),i[f]=m,o.set(f,g),s.set(f,y),f==="series"&&ev(this)}this._seriesIndices||ev(this)},t.prototype.getOption=function(){var r=Ut(this.option);return $(r,function(n,i){if(Me.hasClass(i)){for(var o=er(n),s=o.length,a=!1,l=s-1;l>=0;l--)o[l]&&!hp(o[l])?a=!0:(o[l]=null,!a&&s--);o.length=s,r[i]=o}}),delete r[LM],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,s=r.name,a=this._componentsMap.get(n);if(!a||!a.length)return[];var l;return i!=null?(l=[],$(er(i),function(u){a[u]&&l.push(a[u])})):o!=null?l=OM("id",o,a):s!=null?l=OM("name",s,a):l=Er(a,function(u){return!!u}),RM(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=a(n),s=o?this.queryComponents(o):Er(this._componentsMap.get(i),function(u){return!!u});return l(RM(s,r));function a(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?Er(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ht(r)){var s=n,a=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&a.call(s,h,p,p.componentIndex)}})}else for(var l=Mt(r)?o.get(r):Nt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ii(r,null);return Er(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Er(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Er(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){bh(this),$(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){$(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){bh(this),$(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];s.subType===r&&n.call(i,s,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return $(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return bh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){bh(this);var i=[];$(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];r.call(n,s,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=Yt(i)},t.prototype.restoreData=function(r){ev(this);var n=this._componentsMap,i=[];n.each(function(o,s){Me.hasClass(s)&&i.push(s)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){$(n.get(o),function(s){s&&(o!=="series"||!prt(s,r))&&s.restoreData()})})},t.internalField=function(){ev=function(r){var n=r._seriesIndices=[];$(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Yt(n)},bh=function(r){},IM=function(r,n){r.option={},r.option[LM]=drt,r._componentsMap=Yt({series:[]}),r._componentsCount=Yt();var i=n.aria;Nt(i)&&i.enabled==null&&(i.enabled=!0),vrt(n,r._theme.option),ue(n,nrt,!1),r._mergeOption(n,null)}}(),t}(Mr);function prt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function vrt(e,t){var r=e.color&&!e.colorLayer;$(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?ue(e[i],n,!1):Ut(n):e[i]==null&&(e[i]=n))})}function OM(e,t,r){if(pt(t)){var n=Yt();return $(t,function(o){if(o!=null){var s=ii(o,null);s!=null&&n.set(o,!0)}}),Er(r,function(o){return o&&n.get(o[e])})}else{var i=ii(t,null);return Er(r,function(o){return o&&i!=null&&o[e]===i})}}function RM(e,t){return t.hasOwnProperty("subType")?Er(e,function(r){return r&&r.subType===t.subType}):e}function DM(e){var t=Yt();return e&&$(er(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Hi(uF,LP);const cF=uF;var grt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],mrt=function(){function e(t){$(grt,function(r){this[r]=jt(t[r],t)},this)}return e}();const fF=mrt;var Ib={},_rt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];$(Ib,function(i,o){var s=i.create(t,r);n=n.concat(s||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){$(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){Ib[t]=r},e.get=function(t){return Ib[t]},e}();const OP=_rt;var yrt=/^(min|max)?(.+)$/,brt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&($(er(t.series),function(s){s&&s.data&&Nn(s.data)&&zm(s.data)}),$(er(t.dataset),function(s){s&&s.source&&Nn(s.source)&&zm(s.source)})),t=Ut(t);var i=this._optionBackup,o=wrt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Ut(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=Ut(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,s=[],a=[];if(!i.length&&!o)return a;for(var l=0,u=i.length;l<u;l++)Srt(i[l].query,r,n)&&s.push(l);return!s.length&&o&&(s=[-1]),s.length&&!krt(s,this._currentMediaIndices)&&(a=It(s,function(c){return Ut(c===-1?o.option:i[c].option)})),this._currentMediaIndices=s,a},e}();function wrt(e,t,r){var n=[],i,o,s=e.baseOption,a=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||a||s&&s.timeline);s?(o=s,o.timeline||(o.timeline=a)):((f||c)&&(e.options=e.media=null),o=e),c&&pt(u)&&$(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),$(l,function(d){return h(d)}),$(n,function(d){return h(d.option)});function h(d){$(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Srt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return $(e,function(o,s){var a=s.match(yrt);if(!(!a||!a[1]||!a[2])){var l=a[1],u=a[2].toLowerCase();Trt(n[u],o,l)||(i=!1)}}),i}function Trt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function krt(e,t){return e.join(",")===t.join(",")}const Prt=brt;var mi=$,Sp=Nt,NM=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Lb(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=NM.length;r<n;r++){var i=NM[r],o=t.normal,s=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?ue(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?ue(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function Wr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,ie(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function gd(e){Wr(e,"itemStyle"),Wr(e,"lineStyle"),Wr(e,"areaStyle"),Wr(e,"label"),Wr(e,"labelLine"),Wr(e,"upperLabel"),Wr(e,"edgeLabel")}function Qe(e,t){var r=Sp(e)&&e[t],n=Sp(r)&&r.textStyle;if(n)for(var i=0,o=F4.length;i<o;i++){var s=F4[i];n.hasOwnProperty(s)&&(r[s]=n[s])}}function Zn(e){e&&(gd(e),Qe(e,"label"),e.emphasis&&Qe(e.emphasis,"label"))}function Crt(e){if(!!Sp(e)){Lb(e),gd(e),Qe(e,"label"),Qe(e,"upperLabel"),Qe(e,"edgeLabel"),e.emphasis&&(Qe(e.emphasis,"label"),Qe(e.emphasis,"upperLabel"),Qe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(Lb(t),Zn(t));var r=e.markLine;r&&(Lb(r),Zn(r));var n=e.markArea;n&&Zn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!Nn(o))for(var s=0;s<o.length;s++)Zn(o[s]);$(e.categories,function(u){gd(u)})}if(i&&!Nn(i))for(var s=0;s<i.length;s++)Zn(i[s]);if(t=e.markPoint,t&&t.data)for(var a=t.data,s=0;s<a.length;s++)Zn(a[s]);if(r=e.markLine,r&&r.data)for(var l=r.data,s=0;s<l.length;s++)pt(l[s])?(Zn(l[s][0]),Zn(l[s][1])):Zn(l[s]);e.type==="gauge"?(Qe(e,"axisLabel"),Qe(e,"title"),Qe(e,"detail")):e.type==="treemap"?(Wr(e.breadcrumb,"itemStyle"),$(e.levels,function(u){gd(u)})):e.type==="tree"&&gd(e.leaves)}}function Zo(e){return pt(e)?e:e?[e]:[]}function FM(e){return(pt(e)?e[0]:e)||{}}function Ert(e,t){mi(Zo(e.series),function(n){Sp(n)&&Crt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),mi(r,function(n){mi(Zo(e[n]),function(i){i&&(Qe(i,"axisLabel"),Qe(i.axisPointer,"label"))})}),mi(Zo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Qe(i,"axisLabel"),Qe(i&&i.axisPointer,"label")}),mi(Zo(e.calendar),function(n){Wr(n,"itemStyle"),Qe(n,"dayLabel"),Qe(n,"monthLabel"),Qe(n,"yearLabel")}),mi(Zo(e.radar),function(n){Qe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),mi(Zo(e.geo),function(n){Sp(n)&&(Zn(n),mi(Zo(n.regions),function(i){Zn(i)}))}),mi(Zo(e.timeline),function(n){Zn(n),Wr(n,"label"),Wr(n,"itemStyle"),Wr(n,"controlStyle",!0);var i=n.data;pt(i)&&$(i,function(o){Nt(o)&&(Wr(o,"label"),Wr(o,"itemStyle"))})}),mi(Zo(e.toolbox),function(n){Wr(n,"iconStyle"),mi(n.feature,function(i){Wr(i,"iconStyle")})}),Qe(FM(e.axisPointer),"label"),Qe(FM(e.tooltip).axisPointer,"label")}function Art(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Mrt(e,t,r,n){for(var i=t.split(","),o=e,s,a=0;a<i.length-1;a++)s=i[a],o[s]==null&&(o[s]={}),o=o[s];(n||o[i[a]]==null)&&(o[i[a]]=r)}function $M(e){e&&$(xrt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var xrt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Irt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Ob=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function wh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<Ob.length;r++){var n=Ob[r][1],i=Ob[r][0];t[n]!=null&&(t[i]=t[n])}}function zM(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function BM(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function Lrt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function hF(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&hF(e[r].children,t)}function dF(e,t){Ert(e,t),e.series=er(e.series),$(e.series,function(r){if(!!Nt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),zM(r.label);var i=r.data;if(i&&!Nn(i))for(var o=0;o<i.length;o++)zM(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var s=Art(r,"pointer.color");s!=null&&Mrt(r,"itemStyle.color",s)}else if(n==="bar"){wh(r),wh(r.backgroundStyle),wh(r.emphasis);var i=r.data;if(i&&!Nn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(wh(i[o]),wh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var a=r.highlightPolicy;a&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=a)),BM(r),hF(r.data,BM)}else n==="graph"||n==="sankey"?Lrt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&ie(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),$M(r)}}),e.dataRange&&(e.visualMap=e.dataRange),$(Irt,function(r){var n=e[r];n&&(pt(n)||(n=[n]),$(n,function(i){$M(i)}))})}function Ort(e){var t=Yt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),s={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),t.each(Rrt)}function Rrt(e){$(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],s=t.data,a=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";s.modify(o,function(u,c,f){var h=s.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;a?p=s.getRawIndex(f):d=s.get(t.stackedByDimension,f);for(var v=NaN,m=r-1;m>=0;m--){var g=e[m];if(a||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=HJ(h,y),v=y;break}}}return n[0]=h,n[1]=v,n})})}var k_=function(){function e(t){this.data=t.data||(t.sourceFormat===Is?{}:[]),this.sourceFormat=t.sourceFormat||oF,this.seriesLayoutBy=t.seriesLayoutBy||Io,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&lF(this,n)===En.Must&&(i.type="ordinal")}}return e}();function RP(e){return e instanceof k_}function T3(e,t,r){r=r||pF(e);var n=t.seriesLayoutBy,i=Nrt(e,r,n,t.sourceHeader,t.dimensions),o=new k_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Ut(t)});return o}function DP(e){return new k_({data:e,sourceFormat:Nn(e)?Pa:hi})}function Drt(e){return new k_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Ut(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function pF(e){var t=oF;if(Nn(e))t=Pa;else if(pt(e)){e.length===0&&(t=ln);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(pt(i)){t=ln;break}else if(Nt(i)){t=qi;break}}}}else if(Nt(e)){for(var o in e)if(_t(e,o)&&Zr(e[o])){t=Is;break}}return t}function Nrt(e,t,r,n,i){var o,s;if(!e)return{dimensionsDefine:VM(i),startIndex:s,dimensionsDetectedCount:o};if(t===ln){var a=e;n==="auto"||n==null?UM(function(u){u!=null&&u!=="-"&&(Mt(u)?s==null&&(s=1):s=0)},r,a,10):s=Te(n)?n:n?1:0,!i&&s===1&&(i=[],UM(function(u,c){i[c]=u!=null?u+"":""},r,a,1/0)),o=i?i.length:r===Of?a.length:a[0]?a[0].length:null}else if(t===qi)i||(i=Frt(e));else if(t===Is)i||(i=[],$(e,function(u,c){i.push(c)}));else if(t===hi){var l=qp(e[0]);o=pt(l)&&l.length||1}return{startIndex:s,dimensionsDefine:VM(i),dimensionsDetectedCount:o}}function Frt(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return $(r,function(i,o){n.push(o)}),n}}function VM(e){if(!!e){var t=Yt();return It(e,function(r,n){r=Nt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function UM(e,t,r,n){if(t===Of)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function vF(e){var t=e.sourceFormat;return t===qi||t===Is}var wl,Sl,Tl,WM,jM,gF=function(){function e(t,r){var n=RP(t)?t:DP(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Pa&&(this._offset=0,this._dimSize=r,this._data=i),jM(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;jM=function(s,a,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=WM[NP(u,c)];if(ut(s,d),u===Pa)s.getItem=r,s.count=i,s.fillStorage=n;else{var p=mF(u,c);s.getItem=jt(p,null,a,f,h);var v=_F(u,c);s.count=jt(v,null,a,f,h)}};var r=function(s,a){s=s-this._offset,a=a||[];for(var l=this._data,u=this._dimSize,c=u*s,f=0;f<u;f++)a[f]=l[c+f];return a},n=function(s,a,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=a-s,g=l[h],y=0;y<m;y++){var b=c[y*f+h];g[s+y]=b,b<p&&(p=b),b>v&&(v=b)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};WM=(t={},t[ln+"_"+Io]={pure:!0,appendData:o},t[ln+"_"+Of]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[qi]={pure:!0,appendData:o},t[Is]={pure:!0,appendData:function(s){var a=this._data;$(s,function(l,u){for(var c=a[u]||(a[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[hi]={appendData:o},t[Pa]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(s){for(var a=0;a<s.length;a++)this._data.push(s[a])}}(),e}(),GM=function(e,t,r,n){return e[n]},$rt=(wl={},wl[ln+"_"+Io]=function(e,t,r,n){return e[n+t]},wl[ln+"_"+Of]=function(e,t,r,n,i){n+=t;for(var o=i||[],s=e,a=0;a<s.length;a++){var l=s[a];o[a]=l?l[n]:null}return o},wl[qi]=GM,wl[Is]=function(e,t,r,n,i){for(var o=i||[],s=0;s<r.length;s++){var a=r[s].name,l=e[a];o[s]=l?l[n]:null}return o},wl[hi]=GM,wl);function mF(e,t){var r=$rt[NP(e,t)];return r}var HM=function(e,t,r){return e.length},zrt=(Sl={},Sl[ln+"_"+Io]=function(e,t,r){return Math.max(0,e.length-t)},Sl[ln+"_"+Of]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},Sl[qi]=HM,Sl[Is]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},Sl[hi]=HM,Sl);function _F(e,t){var r=zrt[NP(e,t)];return r}var Rb=function(e,t,r){return e[t]},Brt=(Tl={},Tl[ln]=Rb,Tl[qi]=function(e,t,r){return e[r]},Tl[Is]=Rb,Tl[hi]=function(e,t,r){var n=qp(e);return n instanceof Array?n[t]:n},Tl[Pa]=Rb,Tl);function yF(e){var t=Brt[e];return t}function NP(e,t){return e===ln?e+"_"+t:e}function df(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var s=e.getDimensionIndex(r),a=i.getDimensionProperty(s);return yF(o)(n,s,a)}else{var l=n;return o===hi&&(l=qp(n)),l}}}}var Vrt=/\{@(.+?)\}/g,bF=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),s=n.getName(t),a=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:s,dataIndex:o,data:a,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,s){r=r||"normal";var a=this.getData(n),l=this.getDataParams(t,n);if(s&&(l.value=s.interpolatedValue),i!=null&&pt(l.value)&&(l.value=l.value[i]),!o){var u=a.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ht(o))return l.status=r,l.dimensionIndex=i,o(l);if(Mt(o)){var c=rF(o,l);return c.replace(Vrt,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=df(a,t,p);if(s&&pt(s.interpolatedValue)){var m=a.getDimensionIndex(p);m>=0&&(v=s.interpolatedValue[m])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return df(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function XM(e){var t,r;return Nt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Wd(e){return new Urt(e)}var Urt=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var s=c(this._modBy),a=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(s!==l||a!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(pt(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){YM.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:YM.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),pt(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),YM=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?a:s}};return o;function s(){return t<e?t++:null}function a(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function Ca(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Te(e)&&e!=null&&e!=="-"&&(e=+ws(e)),e==null||e===""?NaN:+e)}var Wrt=Yt({number:function(e){return parseFloat(e)},time:function(e){return+ws(e)},trim:function(e){return Mt(e)?Eo(e):e}});function wF(e){return Wrt.get(e)}var SF={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},jrt=function(){function e(t,r){if(!Te(r)){var n="";se(n)}this._opFn=SF[t],this._rvalFloat=La(r)}return e.prototype.evaluate=function(t){return Te(t)?this._opFn(t,this._rvalFloat):this._opFn(La(t),this._rvalFloat)},e}(),TF=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Te(t)?t:La(t),i=Te(r)?r:La(r),o=isNaN(n),s=isNaN(i);if(o&&(n=this._incomparable),s&&(i=this._incomparable),o&&s){var a=Mt(t),l=Mt(r);a&&(n=l?t:0),l&&(i=a?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),Grt=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=La(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=La(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function Hrt(e,t){return e==="eq"||e==="ne"?new Grt(e==="eq",t):_t(SF,e)?new jrt(e,t):null}var Xrt=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ca(t,r)},e}();function Yrt(e,t){var r=new Xrt,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,s="";e.seriesLayoutBy!==Io&&se(s);var a=[],l={},u=e.dimensionsDefine;if(u)$(u,function(v,m){var g=v.name,y={index:m,name:g,displayName:v.displayName};if(a.push(y),g!=null){var b="";_t(l,g)&&se(b),l[g]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)a.push({index:c});var f=mF(i,Io);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,a,v)},r.getRawData=jt(qrt,null,e)),r.cloneRawData=jt(Zrt,null,e);var h=_F(i,Io);r.count=jt(h,null,n,o,a);var d=yF(i);r.retrieveValue=function(v,m){var g=f(n,o,a,v);return p(g,m)};var p=r.retrieveValueFromItem=function(v,m){if(v!=null){var g=a[m];if(g)return d(v,m,g.name)}};return r.getDimensionInfo=jt(Krt,null,a,l),r.cloneAllDimensionInfo=jt(Jrt,null,a),r}function qrt(e){var t=e.sourceFormat;if(!FP(t)){var r="";se(r)}return e.data}function Zrt(e){var t=e.sourceFormat,r=e.data;if(!FP(t)){var n="";se(n)}if(t===ln){for(var i=[],o=0,s=r.length;o<s;o++)i.push(r[o].slice());return i}else if(t===qi){for(var i=[],o=0,s=r.length;o<s;o++)i.push(ut({},r[o]));return i}}function Krt(e,t,r){if(r!=null){if(Te(r)||!isNaN(r)&&!_t(t,r))return e[r];if(_t(t,r))return t[r]}}function Jrt(e){return Ut(e)}var kF=Yt();function Qrt(e){e=Ut(e);var t=e.type,r="";t||se(r);var n=t.split(":");n.length!==2&&se(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,kF.set(t,e)}function tnt(e,t,r){var n=er(e),i=n.length,o="";i||se(o);for(var s=0,a=i;s<a;s++){var l=n[s];t=ent(l,t),s!==a-1&&(t.length=Math.max(t.length,1))}return t}function ent(e,t,r,n){var i="";t.length||se(i),Nt(e)||se(i);var o=e.type,s=kF.get(o);s||se(i);var a=It(t,function(u){return Yrt(u,s)}),l=er(s.transform({upstream:a[0],upstreamList:a,config:Ut(e.config)}));return It(l,function(u,c){var f="";Nt(u)||se(f),u.data||se(f);var h=pF(u.data);FP(h)||se(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Io,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Io,sourceHeader:0,dimensions:u.dimensions};return T3(u.data,d,null)})}function FP(e){return e===ln||e===qi}var P_="undefined",rnt=typeof Uint32Array===P_?Array:Uint32Array,nnt=typeof Uint16Array===P_?Array:Uint16Array,PF=typeof Int32Array===P_?Array:Int32Array,qM=typeof Float64Array===P_?Array:Float64Array,CF={float:qM,int:PF,ordinal:Array,number:Array,time:qM},Db;function Sh(e){return e>65535?rnt:nnt}function ic(){return[1/0,-1/0]}function int(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function ZM(e,t,r,n,i){var o=CF[r||"float"];if(i){var s=e[t],a=s&&s.length;if(a!==n){for(var l=new o(n),u=0;u<a;u++)l[u]=s[u];e[t]=l}}else e[t]=new o(n)}var ont=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Yt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=Db[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],vF(i),this._dimensions=It(r,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new CF[r||"float"](this._rawCount),this._rawExtent[o]=ic(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,s=i.ordinalOffset||0,a=n.length;s===0&&(o[t]=ic());for(var l=o[t],u=s;u<a;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=a,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,s=this._rawExtent,a=this.count(),l=a+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];ZM(n,u,c.type,l,!0)}for(var f=[],h=a;h<l;h++)for(var d=h-a,p=0;p<o;p++){var c=i[p],v=Db.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var m=s[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:a,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,s=this._dimensions,a=s.length,l=this._rawExtent,u=It(s,function(y){return y.property}),c=0;c<a;c++){var f=s[c];l[c]||(l[c]=ic()),ZM(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<a;p++){var v=o[p],m=this._dimValueGetter(h,u[p],d,p);v[d]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,s=i.length;o<s;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var s=this.get(t,i);isNaN(s)||(n+=s)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,s){return o-s}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var s=(i+o)/2|0;if(r[s]<t)i=s+1;else if(r[s]>t)o=s-1;else return s}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],s=[];if(!o)return s;n==null&&(n=1/0);for(var a=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<a||p===a&&d>=0&&l<0)&&(a=p,l=d,u=0),d===l&&(s[u++]=c))}return s.length=u,s},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=Sh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=Sh(n._rawCount),s=new o(i),a=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var m=0;m<l;m++)a[m]=f[t[m]][p];a[m]=h,d=r.apply(null,a)}d&&(s[u++]=p)}return u<i&&(n._indices=s),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ge(t),o=i.length;if(!o)return this;var s=r.count(),a=Sh(r._rawCount),l=new a(s),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var m=d[i[0]],g=0;g<n;g++){var y=m[g];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var m=d[i[0]],b=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],g=0;g<n;g++){var y=m[g],S=b[g];(y>=f&&y<=h||isNaN(y))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var g=0;g<s;g++){var k=r.getRawIndex(g),y=d[i[0]][k];(y>=f&&y<=h||isNaN(y))&&(l[u++]=k)}else for(var g=0;g<s;g++){for(var x=!0,k=r.getRawIndex(g),A=0;A<o;A++){var I=i[A],y=d[I][k];(y<t[I][0]||y>t[I][1])&&(x=!1)}x&&(l[u++]=r.getRawIndex(g))}return u<s&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],s=r.length,a=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=ic();for(var f=0;f<a;f++){for(var h=t.getRawIndex(f),d=0;d<s;d++)l[d]=i[r[d]][h];l[s]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],m=p[c],g=u[v],y=i[v];y&&(y[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],s=this.count(),a=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(Sh(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));d[a++]=u;for(var p=1;p<s-1;p+=l){for(var v=Math.min(p+l,s-1),m=Math.min(p+l*2,s),g=(m+v)/2,y=0,b=v;b<m;b++){var w=this.getRawIndex(b),T=o[w];isNaN(T)||(y+=T)}y/=m-v;var S=p,k=Math.min(p+l,s),x=p-1,A=o[u];c=-1,h=S;for(var I=-1,L=0,b=S;b<k;b++){var w=this.getRawIndex(b),T=o[w];if(isNaN(T)){L++,I<0&&(I=w);continue}f=Math.abs((x-g)*(T-A)-(x-b)*(y-A)),f>c&&(c=f,h=w)}L>0&&L<k-S&&(d[a++]=Math.min(I,h),h=Math.max(I,h)),d[a++]=h,u=h}return d[a++]=this.getRawIndex(s-1),n._count=a,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),s=o._chunks,a=[],l=Math.floor(1/r),u=s[t],c=this.count(),f=o._rawExtent[t]=ic(),h=new(Sh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,a.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);a[v]=u[m]}var g=n(a),y=this.getRawIndex(Math.min(p+i(a,g)||0,c-1));u[y]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,s=this.count();o<s;o++){var a=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][a],o);break;case 2:r(i[t[0]][a],i[t[1]][a],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][a];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=ic();if(!r)return n;var i=this.count(),o=!this._indices,s;if(o)return this._rawExtent[t].slice();if(s=this._extent[t],s)return s.slice();s=n;for(var a=s[0],l=s[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<a&&(a=f),f>l&&(l=f)}return s=[a,l],this._extent[t]=s,s},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&ku(t,function(a,l){return a[l]=!0,a},{});if(o)for(var s=0;s<i.length;s++)n._chunks[s]=o[s]?int(i[s]):i[s];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Ut(this._extent),t._rawExtent=Ut(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return Ca(r[o],this._dimensions[o])}Db={arrayRows:t,objectRows:function(r,n,i,o){return Ca(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var s=r&&(r.value==null?r:r.value);return Ca(s instanceof Array?s[o]:s,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const k3=ont;var EF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(rv(t)){var s=t,a=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),a=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else a=s.get("data",!0),l=Nn(a)?Pa:hi,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=Qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Qt(f.sourceHeader,h.sourceHeader),v=Qt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[T3(a,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var g=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var b=g.get("source",!0);i=[T3(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&JM(o)}var s,a=[],l=[];return $(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&JM(f),a.push(c),l.push(u._getVersionSign())}),n?s=tnt(n,a,{datasetIndex:r.componentIndex}):i!=null&&(s=[Drt(a[0])]),{sourceList:s,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,s=o[i];s||(s=o[i]={});var a=s[n];if(!a){var l=this._getUpstreamSourceManagers()[0];rv(this._sourceHost)&&l?a=l._innerGetDataStore(t,r,n):(a=new k3,a.initData(new gF(r,t.length),t)),s[n]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(rv(t)){var r=aF(t);return r?[r.getSourceManager()]:[]}else return It(srt(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(rv(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function KM(e){var t=e.option.transform;t&&zm(e.option.transform)}function rv(e){return e.mainType==="series"}function JM(e){throw new Error(e)}var AF="line-height:1";function MF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",s=e.fontSize||14,a=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Qn(n+"")+"px;color:"+Qn(r)+";font-weight:"+Qn(i+""),valueStyle:"font-size:"+Qn(s+"")+"px;color:"+Qn(o)+";font-weight:"+Qn(a+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:s,fill:o,fontWeight:a}}}var snt=[0,10,20,30],ant=["",`
`,`

`,`


`];function Da(e,t){return t.type=e,t}function P3(e){return e.type==="section"}function xF(e){return P3(e)?lnt:unt}function IF(e){if(P3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return $(e.blocks,function(i){var o=IF(i);o>=t&&(t=o+ +(n&&(!o||P3(i)&&!i.noHeader)))}),t}return 0}function lnt(e,t,r,n){var i=t.noHeader,o=cnt(IF(t)),s=[],a=t.blocks||[];Ui(!a||pt(a)),a=a||[];var l=e.orderMode;if(t.sortBlocks&&l){a=a.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(_t(u,l)){var c=new TF(u[l],null);a.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&a.reverse()}$(a,function(p,v){var m=t.valueFormatter,g=xF(p)(m?ut(ut({},e),{valueFormatter:m}):e,p,v>0?o.html:0,n);g!=null&&s.push(g)});var f=e.renderMode==="richText"?s.join(o.richText):C3(s.join(""),i?r:o.html);if(i)return f;var h=S3(t.header,"ordinal",e.useUTC),d=MF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?LF(e,h,d)+o.richText+f:C3('<div style="'+d+";"+AF+';">'+Qn(h)+"</div>"+f,r)}function unt(e,t,r,n){var i=e.renderMode,o=t.noName,s=t.noValue,a=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=pt(w)?w:[w],It(w,function(T,S){return S3(T,pt(d)?d[S]:d,u)})};if(!(o&&s)){var f=a?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":S3(l,"ordinal",u),d=t.valueType,p=s?[]:c(t.value),v=!a||!o,m=!a&&o,g=MF(n,i),y=g.nameStyle,b=g.valueStyle;return i==="richText"?(a?"":f)+(o?"":LF(e,h,y))+(s?"":dnt(e,p,v,m,b)):C3((a?"":f)+(o?"":fnt(h,!a,y))+(s?"":hnt(p,v,m,b)),r)}}function QM(e,t,r,n,i,o){if(!!e){var s=xF(e),a={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return s(a,e,0,o)}}function cnt(e){return{html:snt[e],richText:ant[e]}}function C3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+AF+';">'+e+r+"</div>"}function fnt(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Qn(e)+"</span>"}function hnt(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=pt(e)?e:[e],'<span style="'+o+";"+n+'">'+It(e,function(s){return Qn(s)}).join("&nbsp;&nbsp;")+"</span>"}function LF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function dnt(e,t,r,n,i){var o=[i],s=n?10:20;return r&&o.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(pt(t)?t.join("  "):t,o)}function pnt(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return pu(n)}function OF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var Nb=function(){function e(){this.richTextStyles={},this._nextStyleNameId=V7()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=Ket({color:r,type:t,renderMode:n,markerId:i});return Mt(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};pt(r)?$(r,function(o){return ut(n,o)}):ut(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function vnt(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),s=o.length,a=t.getRawValue(r),l=pt(a),u=pnt(t,r),c,f,h,d;if(s>1||l&&!s){var p=gnt(a,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(s){var v=i.getDimensionInfo(o[0]);d=c=df(i,r,o[0]),f=v.type}else d=c=l?a[0]:a;var m=uP(t),g=m&&t.name||"",y=i.getName(r),b=n?g:y;return Da("section",{header:g,noHeader:n||!m,sortParam:d,blocks:[Da("nameValue",{markerType:"item",markerColor:u,name:b,noName:!Eo(b),value:c,valueType:f})].concat(h||[])})}function gnt(e,t,r,n,i){var o=t.getData(),s=ku(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),a=[],l=[],u=[];n.length?$(n,function(f){c(df(o,r,f),f)}):$(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(s?u.push(Da("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(a.push(f),l.push(d.type)))}return{inlineValues:a,inlineValueTypes:l,blocks:u}}var Vs=Re();function nv(e,t){return e.getName(t)||e.getId(t)}var mnt="__universalTransitionEnabled",C_=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Wd({count:ynt,reset:bnt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Vs(this).sourceManager=new EF(this);o.prepareSource();var s=this.getInitialData(r,i);e5(s,this),this.dataTask.context.data=s,Vs(this).dataBeforeProcessed=s,t5(this),this._initSelectedMapFromData(s)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=wp(this),o=i?T_(r):{},s=this.subType;Me.hasClass(s)&&(s+="Series"),ue(r,n.getTheme().get(this.subType)),ue(r,this.getDefaultOption()),l3(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&hf(r,o,i)},t.prototype.mergeOption=function(r,n){r=ue(this.option,r,!0),this.fillDataTextStyle(r.data);var i=wp(this);i&&hf(this.option,r,i);var o=Vs(this).sourceManager;o.dirty(),o.prepareSource();var s=this.getInitialData(r,n);e5(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Vs(this).dataBeforeProcessed=s,t5(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(r){if(r&&!Nn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&l3(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=E3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Vs(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=E3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Vs(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Yt(r)},t.prototype.getSourceManager=function(){return Vs(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Vs(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return vnt({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Kt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,s=LP.prototype.getColorFromPalette.call(this,r,n,i);return s||(s=o.getColorFromPalette(r,n,i)),s},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,s=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<r.length;a++){var l=r[a],u=nv(s,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ge(r),i=[],o=0;o<n.length;o++){var s=r[n[o]];s>=0&&i.push(s)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[nv(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[mnt])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,s=this.option,a=s.selectedMode,l=n.length;if(!(!a||!l)){if(a==="series")s.selectedMap="all";else if(a==="multiple"){Nt(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,c=0;c<l;c++){var f=n[c],h=nv(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(a==="single"||a===!0){var d=n[l-1],h=nv(r,d);s.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Hi(C_,bF);Hi(C_,LP);X7(C_,Me);function t5(e){var t=e.name;uP(e)||(e.name=_nt(e)||t)}function _nt(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return $(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function ynt(e){return e.model.getRawData().count()}function bnt(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),wnt}function wnt(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function e5(e,t){$(d7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,we(Snt,t))})}function Snt(e,t){var r=E3(e);return r&&r.setOutputEnd((t||this).count()),t}function E3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const No=C_;var $P=function(){function e(){this.group=new Fe,this.uid=g_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();fP($P);a_($P);const ui=$P;function zP(){var e=Re();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,s=r.large=!!(n&&n.large),a=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==s||o!==a)&&"reset"}}var RF=Re(),Tnt=zP(),BP=function(){function e(){this.group=new Fe,this.uid=g_("viewChart"),this.renderTask=Wd({plan:knt,reset:Pnt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||n5(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||n5(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){xf(this.group,t)},e.markUpdateMethod=function(t,r){RF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function r5(e,t,r){e&&m3(e)&&(t==="emphasis"?pp:vp)(e,r)}function n5(e,t,r){var n=cu(e,t),i=t&&t.highlightKey!=null?Itt(t.highlightKey):null;n!=null?$(er(n),function(o){r5(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){r5(o,r,i)})}fP(BP);a_(BP);function knt(e){return Tnt(e.model)}function Pnt(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,s=e.view,a=i&&RF(i).updateMethod,l=o?"incrementalPrepareRender":a&&s[a]?a:"render";return l!=="render"&&s[l](t,r,n,i),Cnt[l]}var Cnt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const oi=BP;var t1="\0__throttleOriginMethod",i5="\0__throttleRate",o5="\0__throttleType";function E_(e,t,r){var n,i=0,o=0,s=null,a,l,u,c;t=t||0;function f(){o=new Date().getTime(),s=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,m=c||r;c=null,a=n-(m?i:o)-v,clearTimeout(s),m?s=setTimeout(f,v):a>=0?f():s=setTimeout(f,-a),i=n};return h.clear=function(){s&&(clearTimeout(s),s=null)},h.debounceNextCall=function(d){c=d},h}function DF(e,t,r,n){var i=e[t];if(!!i){var o=i[t1]||i,s=i[o5],a=i[i5];if(a!==r||s!==n){if(r==null||!n)return e[t]=o;i=e[t]=E_(o,r,n==="debounce"),i[t1]=o,i[o5]=n,i[i5]=r}return i}}function A3(e,t){var r=e[t];r&&r[t1]&&(r.clear&&r.clear(),e[t]=r[t1])}var s5=Re(),a5={itemStyle:dp(WN,!0),lineStyle:dp(UN,!0)},Ent={lineStyle:"stroke",itemStyle:"fill"};function NF(e,t){var r=e.visualStyleMapper||a5[t];return r||(console.warn("Unkown style type '"+t+"'."),a5.itemStyle)}function FF(e,t){var r=e.visualDrawType||Ent[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Ant={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=NF(e,n),s=o(i),a=i.getShallow("decal");a&&(r.setVisual("decal",a),a.dirty=!0);var l=FF(e,n),u=s[l],c=Ht(u)?u:null,f=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());s[l]||(s[l]=h,r.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||Ht(s.fill)?h:s.fill,s.stroke=s.stroke==="auto"||Ht(s.stroke)?h:s.stroke}if(r.setVisual("style",s),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),m=ut({},s);m[l]=c(v),d.setItemVisual(p,"style",m)}}}},Th=new Mr,Mnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=NF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(s,a){var l=s.getRawDataItem(a);if(l&&l[n]){Th.option=l[n];var u=i(Th),c=s.ensureUniqueItemVisual(a,"style");ut(c,u),Th.option.decal&&(s.setItemVisual(a,"decal",Th.option.decal),Th.option.decal.dirty=!0),o in u&&s.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},xnt={performRawSeries:!0,overallReset:function(e){var t=Yt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),s5(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),s=s5(r).scope,a=r.visualStyleAccessPath||"itemStyle",l=FF(r,a);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,s,p)}})}})}},iv=Math.PI;function Int(e,t){t=t||{},ie(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Fe,n=new rr({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new nr({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new rr({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var s;return t.showSpinner&&(s=new bP({shape:{startAngle:-iv/2,endAngle:-iv/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:iv*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:iv*3/2}).delay(300).start("circularInOut"),r.add(s)),r.resize=function(){var a=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:l),c=e.getHeight()/2;t.showSpinner&&s.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var Lnt=function(){function e(t,r,n,i){this._stageTaskMap=Yt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,s=o?n.step:null,a=i&&i.modDataCount,l=a!=null?Math.ceil(a/s):null;return{step:s,modBy:l,modDataCount:a}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),s=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:s,modDataCount:l,large:a}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=Yt();t.eachSeries(function(i){var o=i.getProgressive(),s=i.uid;n.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;$(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),s="";Ui(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,s=o.context;s.model=r,s.ecModel=n,s.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,s=this;$(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){a(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),s.updatePayload(h,n);var v=s.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(m,g){a(i,m)&&m.dirty();var y=s.getPerformArgs(m,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),s.updatePayload(m,n),m.perform(y)&&(o=!0)})}});function a(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,s=r.seriesTaskMap,a=r.seriesTaskMap=Yt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=a.set(h,s&&s.get(h)||Wd({plan:Fnt,reset:$nt,count:Bnt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,s=r.overallTask=r.overallTask||Wd({reset:Ont});s.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var a=s.agentStubMap,l=s.agentStubMap=Yt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Ui(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,$(n.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,a&&a.get(m)||(h=!0,Wd({reset:Rnt,onDirty:Nnt})));g.context={model:v,overallProgress:f},g.agent=s,g.__block=f,o._pipe(v,g)}h&&s.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ht(t)&&(t={overallReset:t,seriesType:Vnt(t)}),t.uid=g_("stageHandler"),r&&(t.visualType=r),t},e}();function Ont(e){e.overallReset(e.ecModel,e.api,e.payload)}function Rnt(e){return e.overallProgress&&Dnt}function Dnt(){this.agent.dirty(),this.getDownstream().dirty()}function Nnt(){this.agent&&this.agent.dirty()}function Fnt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function $nt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=er(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?It(t,function(r,n){return $F(n)}):znt}var znt=$F(0);function $F(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function Bnt(e){return e.data.count()}function Vnt(e){e1=null;try{e(Tp,zF)}catch{}return e1}var Tp={},zF={},e1;BF(Tp,cF);BF(zF,fF);Tp.eachSeriesByType=Tp.eachRawSeriesByType=function(e){e1=e};Tp.eachComponent=function(e){e.mainType==="series"&&e.subType&&(e1=e.subType)};function BF(e,t){for(var r in t.prototype)e[r]=Yr}const VF=Lnt;var l5=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Unt={color:l5,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],l5]};var en="#B9B8CE",u5="#100C2A",ov=function(){return{axisLine:{lineStyle:{color:en}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},c5=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],UF={darkMode:!0,color:c5,backgroundColor:u5,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:en}},textStyle:{color:en},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:en}},dataZoom:{borderColor:"#71708A",textStyle:{color:en},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:en}},timeline:{lineStyle:{color:en},label:{color:en},controlStyle:{color:en,borderColor:en}},calendar:{itemStyle:{color:u5},dayLabel:{color:en},monthLabel:{color:en},yearLabel:{color:en}},timeAxis:ov(),logAxis:ov(),valueAxis:ov(),categoryAxis:ov(),line:{symbol:"circle"},graph:{color:c5},gauge:{title:{color:en},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:en},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};UF.categoryAxis.splitLine.show=!1;const Wnt=UF;var jnt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Mt(t)){var o=Mo(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var s=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};$(t,function(l,u){for(var c=!1,f=0;f<s.length;f++){var h=s[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}a.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,s=n.model,a=n.view;if(!s||!a)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),M3=["symbol","symbolSize","symbolRotate","symbolOffset"],f5=M3.concat(["symbolKeepAspect"]),Gnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,s=0;s<M3.length;s++){var a=M3[s],l=e.get(a);Ht(l)?(o=!0,i[a]=l):n[a]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ut({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ge(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var m=u[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:o?c:null}}},Hnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var s=i.getItemModel(o),a=0;a<f5.length;a++){var l=f5[a],u=s.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function WF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function A_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Xnt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function oc(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(s){for(var a=s.seriesIndex,l=s.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===a){var f=s.getData(),h=cu(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:s.id,name:pt(h)?f.getName(h[0]):f.getName(h),selected:Mt(l)?l:ut({},l)})}})}function Ynt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(oc("map","selectchanged",t,i,n),oc("pie","selectchanged",t,i,n)):n.fromAction==="select"?(oc("map","selected",t,i,n),oc("pie","selected",t,i,n)):n.fromAction==="unselect"&&(oc("map","unselected",t,i,n),oc("pie","unselected",t,i,n))})}function $c(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var qnt=Math.round(Math.random()*9),Znt=typeof Object.defineProperty=="function",Knt=function(){function e(){this._id="__ec_inner_"+qnt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return Znt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Jnt=Knt;var Qnt=pe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),tit=pe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),eit=pe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),s=i/2,a=s*s/(o-s),l=n-o+s+a,u=Math.asin(a/s),c=Math.cos(u)*s,f=Math.sin(u),h=Math.cos(u),d=s*.6,p=s*.7;e.moveTo(r-c,l+a),e.arc(r,l,s,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+a+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+a+h*d,r-c,l+a),e.closePath()}}),rit=pe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,s=n/3*2;e.moveTo(i,o),e.lineTo(i+s,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-s,o+r),e.lineTo(i,o),e.closePath()}}),nit={line:Oa,rect:rr,roundRect:rr,square:rr,circle:yP,diamond:tit,pin:eit,arrow:rit,triangle:Qnt},iit={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},x3={};$(nit,function(e,t){x3[t]=new e});var oit=pe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Hm(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=x3[n];i||(n="rect",i=x3[n]),iit[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function sit(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Wi(e,t,r,n,i,o,s){var a=e.indexOf("empty")===0;a&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=DN(e.slice(8),new ce(t,r,n,i),s?"center":"cover"):e.indexOf("path://")===0?l=d_(e.slice(7),{},new ce(t,r,n,i),s?"center":"cover"):l=new oit({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=a,l.setColor=sit,o&&l.setColor(o),l}function jF(e){return pt(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function VP(e,t){if(e!=null)return pt(e)||(e=[e,e]),[Ke(e[0],t[0])||0,Ke(Qt(e[1],e[0]),t[1])||0]}function Wl(e){return isFinite(e)}function ait(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,s=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,s=s*r.height+r.y),n=Wl(n)?n:0,i=Wl(i)?i:1,o=Wl(o)?o:0,s=Wl(s)?s:0;var a=e.createLinearGradient(n,o,i,s);return a}function lit(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),s=t.x==null?.5:t.x,a=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(s=s*n+r.x,a=a*i+r.y,l=l*o),s=Wl(s)?s:.5,a=Wl(a)?a:.5,l=l>=0&&Wl(l)?l:.5;var u=e.createRadialGradient(s,a,0,s,a,l);return u}function I3(e,t,r){for(var n=t.type==="radial"?lit(e,t,r):ait(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function uit(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function sv(e){return parseInt(e,10)}function av(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var a=document.defaultView.getComputedStyle(e);return(e[i]||sv(a[n])||sv(e.style[n]))-(sv(a[o])||0)-(sv(a[s])||0)|0}function cit(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Te(e)?[e]:pt(e)?e:null}function GF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&cit(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=It(r,function(o){return o/i}),n/=i)}return[r,n]}var fit=new fu(!0);function r1(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function h5(e){return typeof e=="string"&&e!=="none"}function n1(e){var t=e.fill;return t!=null&&t!=="none"}function d5(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function p5(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function L3(e,t,r){var n=Y7(t.image,t.__image,r);if(l_(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*mK),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function hit(e,t,r,n){var i,o=r1(r),s=n1(r),a=r.strokePercent,l=a<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||fit,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=s&&!!h.colorStops,v=o&&!!d.colorStops,m=s&&!!h.image,g=o&&!!d.image,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(y=f?I3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(b=f?I3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(w=f||!t.__canvasFillPattern?L3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),g&&(T=f||!t.__canvasStrokePattern?L3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=y:m&&(w?e.fillStyle=w:s=!1),v?e.strokeStyle=b:g&&(T?e.strokeStyle=T:o=!1)}var k=t.getGlobalScale();c.setScale(k[0],k[1],t.segmentIgnoreThreshold);var x,A;e.setLineDash&&r.lineDash&&(i=GF(t),x=i[0],A=i[1]);var I=!0;(u||f&xc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),I=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),I&&c.rebuildPath(e,l?a:1),x&&(e.setLineDash(x),e.lineDashOffset=A),n||(r.strokeFirst?(o&&p5(e,r),s&&d5(e,r)):(s&&d5(e,r),o&&p5(e,r))),x&&e.setLineDash([])}function dit(e,t,r){var n=t.__image=Y7(r.image,t.__image,t,t.onload);if(!(!n||!l_(n))){var i=r.x||0,o=r.y||0,s=t.getWidth(),a=t.getHeight(),l=n.width/n.height;if(s==null&&a!=null?s=a*l:a==null&&s!=null?a=s/l:s==null&&a==null&&(s=n.width,a=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,s,a)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=s-u,h=a-c;e.drawImage(n,u,c,f,h,i,o,s,a)}else e.drawImage(n,i,o,s,a)}}function pit(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||lu,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,s=void 0;e.setLineDash&&r.lineDash&&(n=GF(t),o=n[0],s=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=s),r.strokeFirst?(r1(r)&&e.strokeText(i,r.x,r.y),n1(r)&&e.fillText(i,r.x,r.y)):(n1(r)&&e.fillText(i,r.x,r.y),r1(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var v5=["shadowBlur","shadowOffsetX","shadowOffsetY"],g5=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function HF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){mn(e,i),o=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?Kl.opacity:s}(n||t.blend!==r.blend)&&(o||(mn(e,i),o=!0),e.globalCompositeOperation=t.blend||Kl.blend);for(var a=0;a<v5.length;a++){var l=v5[a];(n||t[l]!==r[l])&&(o||(mn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(mn(e,i),o=!0),e.shadowColor=t.shadowColor||Kl.shadowColor),o}function m5(e,t,r,n,i){var o=kp(t,i.inHover),s=n?null:r&&kp(r,i.inHover)||{};if(o===s)return!1;var a=HF(e,o,s,n,i);if((n||o.fill!==s.fill)&&(a||(mn(e,i),a=!0),h5(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==s.stroke)&&(a||(mn(e,i),a=!0),h5(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==s.opacity)&&(a||(mn(e,i),a=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(a||(mn(e,i),a=!0),e.lineWidth=u)}for(var c=0;c<g5.length;c++){var f=g5[c],h=f[0];(n||o[h]!==s[h])&&(a||(mn(e,i),a=!0),e[h]=o[h]||f[1])}return a}function vit(e,t,r,n,i){return HF(e,kp(t,i.inHover),r&&kp(r,i.inHover),n,i)}function XF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function git(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),XF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function mit(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var _5=1,y5=2,b5=3,w5=4;function _it(e){var t=n1(e),r=r1(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function mn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function kp(e,t){return t&&e.__hoverStyle||e.style}function YF(e,t){jl(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function jl(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~In,t.__isRendered=!1;return}var o=t.__clipPaths,s=r.prevElClipPaths,a=!1,l=!1;if((!s||uit(o,s))&&(s&&s.length&&(mn(e,r),e.restore(),l=a=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(mn(e,r),e.save(),git(o,e,r),a=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=a=!0);var c=t instanceof pe&&t.autoBatch&&_it(t.style);a||mit(i,u.transform)?(mn(e,r),XF(e,t)):c||mn(e,r);var f=kp(t,r.inHover);t instanceof pe?(r.lastDrawType!==_5&&(l=!0,r.lastDrawType=_5),m5(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),hit(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof h3?(r.lastDrawType!==b5&&(l=!0,r.lastDrawType=b5),m5(e,t,u,l,r),pit(e,t,f)):t instanceof Ms?(r.lastDrawType!==y5&&(l=!0,r.lastDrawType=y5),vit(e,t,u,l,r),dit(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==w5&&(l=!0,r.lastDrawType=w5),yit(e,t,r)),c&&n&&mn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function yit(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},s,a;for(s=t.getCursor(),a=n.length;s<a;s++){var l=n[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),jl(e,l,o,s===a-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),jl(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var Fb=new Jnt,S5=new Yp(100),T5=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function i1(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&Fb.delete(e);var o=Fb.get(e);if(o)return o;var s=ie(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var a={repeat:"repeat"};return l(a),a.rotation=s.rotation,a.scaleX=a.scaleY=i?1:1/r,Fb.set(e,a),e.dirty=!1,a;function l(u){for(var c=[r],f=!0,h=0;h<T5.length;++h){var d=s[T5[h]];if(d!=null&&!pt(d)&&!Mt(d)&&!Te(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=S5.get(p);v&&(i?u.svgElement=v:u.image=v)}var m=ZF(s.dashArrayX),g=bit(s.dashArrayY),y=qF(s.symbol),b=wit(m),w=KF(g),T=!i&&Tu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=A(),x;T&&(T.width=k.width*r,T.height=k.height*r,x=T.getContext("2d")),I(),f&&S5.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=k.width,u.svgHeight=k.height;function A(){for(var L=1,N=0,z=b.length;N<z;++N)L=D4(L,b[N]);for(var V=1,N=0,z=y.length;N<z;++N)V=D4(V,y[N].length);L*=V;var F=w*b.length*y.length;return{width:Math.max(1,Math.min(L,s.maxTileWidth)),height:Math.max(1,Math.min(F,s.maxTileHeight))}}function I(){x&&(x.clearRect(0,0,T.width,T.height),s.backgroundColor&&(x.fillStyle=s.backgroundColor,x.fillRect(0,0,T.width,T.height)));for(var L=0,N=0;N<g.length;++N)L+=g[N];if(L<=0)return;for(var z=-w,V=0,F=0,G=0;z<k.height;){if(V%2===0){for(var K=F/2%y.length,q=0,rt=0,At=0;q<k.width*2;){for(var Ft=0,N=0;N<m[G].length;++N)Ft+=m[G][N];if(Ft<=0)break;if(rt%2===0){var Pt=(1-s.symbolSize)*.5,Ct=q+m[G][rt]*Pt,Zt=z+g[V]*Pt,Y=m[G][rt]*s.symbolSize,ot=g[V]*s.symbolSize,J=At/2%y[K].length;yt(Ct,Zt,Y,ot,y[K][J])}q+=m[G][rt],++At,++rt,rt===m[G].length&&(rt=0)}++G,G===m.length&&(G=0)}z+=g[V],++F,++V,V===g.length&&(V=0)}function yt(Et,xt,ht,vt,B){var j=i?1:r,X=Wi(B,Et*j,xt*j,ht*j,vt*j,s.color,s.symbolKeepAspect);if(i){var Q=n.painter.renderOneToVNode(X);Q&&S.children.push(Q)}else YF(x,X)}}}}function qF(e){if(!e||e.length===0)return[["rect"]];if(Mt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Mt(e[r])){t=!1;break}if(t)return qF([e]);for(var n=[],r=0;r<e.length;++r)Mt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function ZF(e){if(!e||e.length===0)return[[0,0]];if(Te(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Te(e[n])){r=!1;break}if(r)return ZF([e]);for(var i=[],n=0;n<e.length;++n)if(Te(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=It(e[n],function(a){return Math.ceil(a)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function bit(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Te(e)){var t=Math.ceil(e);return[t,t]}var r=It(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function wit(e){return It(e,function(t){return KF(t)})}function KF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Sit(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(s){var a=n.getItemVisual(s,"decal");if(a){var l=n.ensureUniqueItemVisual(s,"style");l.decal=i1(a,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=i1(i,t)}}})}var Tit=new Xi;const Pi=Tit;var JF={};function kit(e,t){JF[e]=t}function Pit(e){return JF[e]}var Cit=typeof window<"u",Eit=1,Ait=800,Mit=900,xit=1e3,Iit=2e3,Lit=5e3,QF=1e3,Oit=1100,UP=2e3,t$=3e3,Rit=4e3,M_=4500,Dit=4600,Nit=5e3,Fit=6e3,e$=7e3,$it={PROCESSOR:{FILTER:xit,SERIES_FILTER:Ait,STATISTIC:Lit},VISUAL:{LAYOUT:QF,PROGRESSIVE_LAYOUT:Oit,GLOBAL:UP,CHART:t$,POST_CHART_LAYOUT:Dit,COMPONENT:Rit,BRUSH:Nit,CHART_ITEM:M_,ARIA:Fit,DECAL:e$}},zr="__flagInMainProcess",dn="__pendingUpdate",$b="__needsUpdateStatus",k5=/^[a-zA-Z0-9_]+$/,zb="__connectUpdateStatus",P5=0,zit=1,Bit=2;function r$(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return i$(this,e,t)}}function n$(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return i$(this,e,t)}}function i$(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Xi.prototype[t].apply(e,r)}var o$=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Xi),s$=o$.prototype;s$.on=n$("on");s$.off=n$("off");var sc,Bb,lv,Us,Vb,Ub,Wb,kh,Ph,C5,E5,jb,A5,uv,M5,a$,Vn,x5,l$=function(e){St(t,e);function t(r,n,i){var o=e.call(this,new jnt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Mt(n)&&(n=u$[n]),o._dom=r;var s="canvas",a="auto",l=!1,u=o._zr=L4(r,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Qt(i.useDirtyRect,l),useCoarsePointer:Qt(i.useCoarsePointer,a),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=E_(jt(u.flush,u),17),n=Ut(n),n&&dF(n,!0),o._theme=n,o._locale=jet(i.locale||jN),o._coordSysMgr=new OP;var c=o._api=M5(o);function f(h,d){return h.__prio-d.__prio}return Kg(s1,f),Kg(O3,f),o._scheduler=new VF(o,c,O3,s1),o._messageCenter=new o$,o._initEvents(),o.resize=jt(o.resize,o),u.animation.on("frame",o._onframe,o),C5(u,o),E5(u,o),zm(o),o}return t.prototype._onframe=function(){if(!this._disposed){x5(this);var r=this._scheduler;if(this[dn]){var n=this[dn].silent;this[zr]=!0;try{sc(this),Us.update.call(this,null,this[dn].updateParams)}catch(l){throw this[zr]=!1,this[dn]=null,l}this._zr.flush(),this[zr]=!1,this[dn]=null,kh.call(this,n),Ph.call(this,n)}else if(r.unfinished){var i=Eit,o=this._model,s=this._api;r.unfinished=!1;do{var a=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),Ub(this,o),r.performVisualTasks(o),uv(this,this._model,s,"remain",{}),i-=+new Date-a}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[zr]){if(this._disposed){this.id;return}var o,s,a;if(Nt(n)&&(i=n.lazyUpdate,o=n.silent,s=n.replaceMerge,a=n.transition,n=n.notMerge),this[zr]=!0,!this._model||n){var l=new Prt(this._api),u=this._theme,c=this._model=new cF;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:s},R3);var f={seriesTransition:a,optionChanged:!0};if(i)this[dn]={silent:o,updateParams:f},this[zr]=!1,this.getZr().wakeUp();else{try{sc(this),Us.update.call(this,null,f)}catch(h){throw this[dn]=null,this[zr]=!1,h}this._ssr||this._zr.flush(),this[dn]=null,this[zr]=!1,kh.call(this,o),Ph.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Cit&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Kt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return $(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],s=this;$(n,function(l){i.eachComponent({mainType:l},function(u){var c=s._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return $(o,function(l){l.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,s=Math.max,a=1/0;if(I5[i]){var l=a,u=a,c=-a,f=-a,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();$(Gd,function(b,w){if(b.group===i){var T=n?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(Ut(r)),S=b.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=s(S.right,c),f=s(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,m=Tu.createCanvas(),g=L4(m,{renderer:n?"svg":"canvas"});if(g.resize({width:p,height:v}),n){var y="";return $(h,function(b){var w=b.left-l,T=b.top-u;y+='<g transform="translate('+w+","+T+')">'+b.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&g.painter.setBackgroundColor(r.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return r.connectedBackgroundColor&&g.add(new rr({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),$(h,function(b){var w=new Ms({style:{x:b.left*d-l,y:b.top*d-u,image:b.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return Vb(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return Vb(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,s=cb(i,r);return $(s,function(a,l){l.indexOf("Models")>=0&&$(a,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=cb(i,r,{defaultMainType:"series"}),s=o.seriesModel,a=s.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return l!=null?WF(a,l,n):A_(a,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;$(Vit,function(n){var i=function(o){var s=r.getModel(),a=o.target,l,u=n==="globalout";if(u?l={}:a&&$c(a,function(p){var v=le(p);if(v&&v.dataIndex!=null){var m=v.dataModel||s.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ut({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&s.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:a,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),$(jd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),$(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Ynt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&G7(this.getDom(),jP,"");var n=this,i=n._api,o=n._model;$(n._componentsViews,function(s){s.dispose(o,i)}),$(n._chartsViews,function(s){s.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Gd[n.id]},t.prototype.resize=function(r){if(!this[zr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[dn]&&(o==null&&(o=this[dn].silent),i=!0,this[dn]=null),this[zr]=!0;try{i&&sc(this),Us.update.call(this,{type:"resize",animation:ut({duration:0},r&&r.animation)})}catch(s){throw this[zr]=!1,s}this[zr]=!1,kh.call(this,o),Ph.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Nt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!D3[r]){var i=D3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ut({},r);return n.type=jd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Nt(n)||(n={silent:!!n}),!!o1[r.type]&&!!this._model){if(this[zr]){this._pendingActions.push(r);return}var i=n.silent;Wb.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Kt.browser.weChat&&this._throttledZrFlush(),kh.call(this,i),Ph.call(this,i)}},t.prototype.updateLabelLayout=function(){Pi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){sc=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),Bb(f,!0),Bb(f,!1),h.plan()},Bb=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,y=f._api,b=0;b<v.length;b++)v[b].__alive=!1;h?d.eachComponent(function(S,k){S!=="series"&&w(k)}):d.eachSeries(w);function w(S){var k=S.__requireNewView;S.__requireNewView=!1;var x="_ec_"+S.id+"_"+S.type,A=!k&&m[x];if(!A){var I=Mo(S.type),L=h?ui.getClass(I.main,I.sub):oi.getClass(I.sub);A=new L,A.init(d,y),m[x]=A,v.push(A),g.add(A.group)}S.__viewId=A.__id=x,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,y)}for(var b=0;b<v.length;){var T=v[b];T.__alive?b++:(!h&&T.renderTask.dispose(),g.remove(T.group),T.dispose(d,y),v.splice(b,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},lv=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){$([].concat(f._componentsViews).concat(f._chartsViews),T);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var y={mainType:p,query:g};v&&(y.subType=v);var b=d.excludeSeriesId,w;b!=null&&(w=Yt(),$(er(b),function(S){var k=ii(S,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;if(!k)if(cM(d))if(S instanceof No)d.type===Jl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&Ttt(S,d,f._api);else{var x=mP(S.mainType,S.componentIndex,d.name,f._api),A=x.focusSelf,I=x.dispatchers;d.type===Jl&&A&&!d.notBlur&&v3(S.mainType,S.componentIndex,f._api),I&&$(I,function(L){d.type===Jl?pp(L):vp(L)})}else _3(d)&&S instanceof No&&(Ctt(S,d,f._api),lM(S),Vn(f))},f),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;k||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,m,f._api,d)}},Us={prepareAndUpdate:function(f){sc(this),Us.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(!!d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),Ub(this,d),m.update(d,p),r(d),g.performVisualTasks(d,f),jb(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",b=d.get("darkMode");v.setBackgroundColor(y),b!=null&&b!=="auto"&&v.setDarkMode(b),Pi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,y){if(g!=="series"){var b=h.getViewOfComponentModel(y);if(b&&b.__alive)if(b.updateTransform){var w=b.updateTransform(y,d,p,f);w&&w.update&&v.push(b)}else v.push(b)}});var m=Yt();d.eachSeries(function(g){var y=h._chartsMap[g.__viewId];if(y.updateTransform){var b=y.updateTransform(g,d,p,f);b&&b.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),uv(this,d,p,f,{},m),Pi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),oi.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),jb(this,h,this._api,f,{}),Pi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),oi.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),Pi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Us.update.call(this,f)}},Vb=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,y=cb(v,d),b=0;b<m.length;b++){var w=m[b];if(w[h]&&(g=w[h](v,y,p))!=null)return g}},Ub=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},Wb=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=o1[v],y=g.actionInfo,b=(y.update||"update").split(":"),w=b.pop(),T=b[0]!=null&&Mo(b[0]);this[zr]=!0;var S=[f],k=!1;f.batch&&(k=!0,S=It(f.batch,function(V){return V=ie(ut({},V),f),V.batch=null,V}));var x=[],A,I=_3(f),L=cM(f);if(L&&pN(this._api),$(S,function(V){if(A=g.action(V,d._model,d._api),A=A||ut({},V),A.type=y.event||A.type,x.push(A),L){var F=cP(f),G=F.queryOptionMap,K=F.mainTypeSpecified,q=K?G.keys()[0]:"series";lv(d,w,V,q),Vn(d)}else I?(lv(d,w,V,"series"),Vn(d)):T&&lv(d,w,V,T.main,T.sub)}),w!=="none"&&!L&&!I&&!T)try{this[dn]?(sc(this),Us.update.call(this,f),this[dn]=null):Us[w].call(this,f)}catch(V){throw this[zr]=!1,V}if(k?A={type:y.event||v,escapeConnect:m,batch:x}:A=x[0],this[zr]=!1,!h){var N=this._messageCenter;if(N.trigger(A.type,A),I){var z={type:"selectchanged",escapeConnect:m,selected:Ett(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};N.trigger(z.type,z)}}},kh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();Wb.call(this,d,f)}},Ph=function(f){!f&&this.trigger("updated")},C5=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[dn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},E5=function(f,h){f.on("mouseover",function(d){var p=d.target,v=$c(p,m3);v&&(ktt(v,d,h._api),Vn(h))}).on("mouseout",function(d){var p=d.target,v=$c(p,m3);v&&(Ptt(v,d,h._api),Vn(h))}).on("click",function(d){var p=d.target,v=$c(p,function(y){return le(y).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=le(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,b){var w=b.get("zlevel")||0,T=b.get("z")||0,S=b.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:w,z:T,idx:b.componentIndex,type:y,key:S})}),p){var v=h.concat(d),m,g;Kg(v,function(y,b){return y.zlevel===b.zlevel?y.z-b.z:y.zlevel-b.zlevel}),$(v,function(y){var b=f.getComponent(y.type,y.idx),w=y.zlevel,T=y.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==g&&w++,g=T):g&&(w===m&&w++,g=""),m=w,b.setZLevel(w)})}}jb=function(f,h,d,p,v){n(h),A5(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive=!1}),uv(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},A5=function(f,h,d,p,v,m){$(m||f._componentsViews,function(g){var y=g.__model;u(y,g),g.render(y,h,d,p),a(y,g),c(y,g)})},uv=function(f,h,d,p,v,m){var g=f._scheduler;v=ut(v||{},{updatedSeries:h.getSeries()}),Pi.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];w.__alive=!0;var T=w.renderTask;g.updatePayload(T,p),u(b,w),m&&m.get(b.uid)&&T.dirty(),T.perform(g.getPerformArgs(T))&&(y=!0),w.group.silent=!!b.get("silent"),s(b,w),lM(b)}),g.unfinished=y||g.unfinished,Pi.trigger("series:layoutlabels",h,d,v),Pi.trigger("series:transition",h,d,v),h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];a(b,w),c(b,w)}),o(f,h),Pi.trigger("series:afterupdate",h,d,v)},Vn=function(f){f[$b]=!0,f.getZr().wakeUp()},x5=function(f){!f[$b]||(f.getZr().storage.traverse(function(h){Vd(h)||i(h)}),f[$b]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===c_&&f.states.emphasis?h.push("emphasis"):f.hoverState===Kp&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Kt.node&&!Kt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function s(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function a(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var y=f.childrenRef(),b=0;b<y.length;b++)p=Math.max(l(y[b],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Vd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Vd(g))return;if(g instanceof pe&&Ltt(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=m;var b=g.getTextContent(),w=g.getTextGuideLine();b&&(b.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}M5=function(f){return new(function(h){St(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){pp(p,v),Vn(f)},d.prototype.leaveEmphasis=function(p,v){vp(p,v),Vn(f)},d.prototype.enterBlur=function(p){cN(p),Vn(f)},d.prototype.leaveBlur=function(p){gP(p),Vn(f)},d.prototype.enterSelect=function(p){fN(p),Vn(f)},d.prototype.leaveSelect=function(p){hN(p),Vn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(fF))(f)},a$=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[zb]=p}}$(jd,function(d,p){f._messageCenter.on(p,function(v){if(I5[f.group]&&f[zb]!==P5){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];$(Gd,function(y){y!==f&&y.group===f.group&&g.push(y)}),h(g,P5),$(g,function(y){y[zb]!==zit&&y.dispatchAction(m)}),h(g,Bit)}})})}}(),t}(Xi),WP=l$.prototype;WP.on=r$("on");WP.off=r$("off");WP.one=function(e,t,r){var n=this;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var Vit=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var o1={},jd={},O3=[],R3=[],s1=[],u$={},D3={},Gd={},I5={},Uit=+new Date-0,jP="_echarts_instance_";function Wit(e,t,r){var n=!(r&&r.ssr);if(n){var i=jit(e);if(i)return i}var o=new l$(e,t,r);return o.id="ec_"+Uit++,Gd[o.id]=o,n&&G7(e,jP,o.id),a$(o),Pi.trigger("afterinit",o),o}function jit(e){return Gd[uQ(e,jP)]}function c$(e,t){u$[e]=t}function f$(e){he(R3,e)<0&&R3.push(e)}function h$(e,t){HP(O3,e,t,Iit)}function Git(e){GP("afterinit",e)}function Hit(e){GP("afterupdate",e)}function GP(e,t){Pi.on(e,t)}function Au(e,t,r){Ht(t)&&(r=t,t="");var n=Nt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!jd[t]&&(Ui(k5.test(n)&&k5.test(t)),o1[n]||(o1[n]={action:r,actionInfo:e}),jd[t]=n)}function Xit(e,t){OP.register(e,t)}function Yit(e,t){HP(s1,e,t,QF,"layout")}function Mu(e,t){HP(s1,e,t,t$,"visual")}var L5=[];function HP(e,t,r,n,i){if((Ht(t)||Nt(t))&&(r=t,t=n),!(he(L5,r)>=0)){L5.push(r);var o=VF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function d$(e,t){D3[e]=t}function qit(e,t,r){var n=Pit("registerMap");n&&n(e,t,r)}var Zit=Qrt;Mu(UP,Ant);Mu(M_,Mnt);Mu(M_,xnt);Mu(UP,Gnt);Mu(M_,Hnt);Mu(e$,Sit);f$(dF);h$(Mit,Ort);d$("default",Int);Au({type:Jl,event:Jl,update:Jl},Yr);Au({type:nm,event:nm,update:nm},Yr);Au({type:$d,event:$d,update:$d},Yr);Au({type:im,event:im,update:im},Yr);Au({type:zd,event:zd,update:zd},Yr);c$("light",Unt);c$("dark",Wnt);function Ch(e){return e==null?0:e.length||1}function O5(e){return e}var Kit=function(){function e(t,r,n,i,o,s){this._old=t,this._new=r,this._oldKeyGetter=n||O5,this._newKeyGetter=i||O5,this.context=o,this._diffModeMultiple=s==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var s=0;s<t.length;s++){var a=i[s],l=n[a],u=Ch(l);if(u>1){var c=l.shift();l.length===1&&(n[a]=l[0]),this._update&&this._update(c,s)}else u===1?(n[a]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],s=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,s,"_newKeyGetter");for(var a=0;a<o.length;a++){var l=o[a],u=n[l],c=i[l],f=Ch(u),h=Ch(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(s,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],s=Ch(o);if(s>1)for(var a=0;a<s;a++)this._add&&this._add(o[a]);else s===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,s=0;s<t.length;s++){var a="_ec_"+this[i](t[s],s);if(o||(n[s]=a),!!r){var l=r[a],u=Ch(l);u===0?(r[a]=s,o&&n.push(a)):u===1?r[a]=[l,s]:l.push(s)}}},e}();const p$=Kit;var Jit=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Qit(e,t){var r={},n=r.encode={},i=Yt(),o=[],s=[],a={};$(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;Gb(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),eot(d.type)&&(o[0]=h),Gb(a,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&s.push(h)}iF.each(function(m,g){var y=Gb(n,g),b=d.otherDims[g];b!=null&&b!==!1&&(y[b]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=It(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?s=f.slice():s.length||(s=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=s,r.userOutput=new Jit(a,t),r}function Gb(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function tot(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function eot(e){return!(e==="ordinal"||e==="time")}var rot=function(){function e(t){this.otherDims={},t!=null&&ut(this,t)}return e}();const lm=rot;var not=Re(),iot={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},v$=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=_$(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=vF(this.source),n=!y$(t),i="",o=[],s=0,a=0;s<t;s++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[a];if(f&&f.storeDimIndex===s)l=r?f.name:null,u=f.type,c=f.ordinalMeta,a++;else{var h=this.getSourceDimension(s);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=iot[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var s=this.getSourceDimension(r);s&&(i=s.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function g$(e){return e instanceof v$}function m$(e){for(var t=Yt(),r=0;r<(e||[]).length;r++){var n=e[r],i=Nt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function _$(e){var t=not(e);return t.dimNameMap||(t.dimNameMap=m$(e.dimensionsDefine))}function y$(e){return e>30}var Eh=Nt,Ws=It,oot=typeof Int32Array>"u"?Array:Int32Array,sot="e\0\0",R5=-1,aot=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],lot=["_approximateExtent"],D5,cv,Ah,Mh,Hb,fv,Xb,uot=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;g$(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},s=[],a={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Mt(f)?new lm({name:f}):f instanceof lm?f:new lm(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};s.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(a[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=a,this._dimOmitted){var v=this._dimIdxToName=Yt();$(s,function(m){v.set(o[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Te(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof k3&&(o=t),!o){var s=this.dimensions,a=RP(t)||Zr(t)?new gF(t,s.length):t;o=new k3;var l=Ws(s,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(a,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Qit(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var a=i;a<o;a++){var l=a-i;this._nameList[a]=r[l],s&&Xb(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Pa&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,s=this._idList,a=i.getSource().sourceFormat,l=a===hi;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&KJ(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=ii(h,null));var d=f.id;s[c]==null&&d!=null&&(s[c]=ii(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)Xb(this,c);D5(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Eh(t)?ut(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=Ah(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return cv(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return pt(t)?i.getValues(Ws(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?R5:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ws(Mh(t),this._getStoreDimIndex,this);this._store.each(o,i?jt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ws(Mh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?jt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ge(t);return $(i,function(o){var s=r._getStoreDimIndex(o);n[s]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,s=Ws(Mh(t),this._getStoreDimIndex,this),a=fv(this);return a._store=this._store.map(s,o?jt(r,o):r),a},e.prototype.modify=function(t,r,n,i){var o=n||i||this,s=Ws(Mh(t),this._getStoreDimIndex,this);this._store.modify(s,o?jt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=fv(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=fv(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Mr(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new p$(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return cv(t,n)},function(n){return cv(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Eh(t)?ut(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),pt(o)?o=o.slice():Eh(o)&&(o=ut({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Eh(r)?ut(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Eh(t)?ut(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ut(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;ptt(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){$(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Ws(this.dimensions,this._getDimInfo,this),this.hostModel)),Hb(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ht(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(Qk(arguments)))})},e.internalField=function(){D5=function(t){var r=t._invertedIndicesMap;$(r,function(n,i){var o=t._dimInfos[i],s=o.ordinalMeta,a=t._store;if(s){n=r[i]=new oot(s.categories.length);for(var l=0;l<n.length;l++)n[l]=R5;for(var l=0;l<a.count();l++)n[a.get(o.storeDimIndex,l)]=l}})},Ah=function(t,r,n){return ii(t._getCategory(r,n),null)},cv=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=Ah(t,t._idDimIdx,r)),n==null&&(n=sot+r),n},Mh=function(t){return pt(t)||(t=t!=null?[t]:[]),t},fv=function(t){var r=new e(t._schema?t._schema:Ws(t.dimensions,t._getDimInfo,t),t.hostModel);return Hb(r,t),r},Hb=function(t,r){$(aot.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,$(lot,function(n){t[n]=Ut(r[n])}),t._calculationInfo=ut({},r._calculationInfo)},Xb=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,s=t._idDimIdx,a=n[r],l=i[r];if(a==null&&o!=null&&(n[r]=a=Ah(t,o,r)),l==null&&s!=null&&(i[r]=l=Ah(t,s,r)),l==null&&a!=null){var u=t._nameRepeatCount,c=u[a]=(u[a]||0)+1;l=a,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Ql=uot;function b$(e,t){RP(e)||(e=DP(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=Yt(),o=[],s=fot(e,r,n,t.dimensionsCount),a=t.canOmitUnusedDimensions&&y$(s),l=n===e.dimensionsDefine,u=l?_$(e):m$(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,s));for(var f=Yt(c),h=new PF(s),d=0;d<h.length;d++)h[d]=-1;function p(A){var I=h[A];if(I<0){var L=n[A],N=Nt(L)?L:{name:L},z=new lm,V=N.name;V!=null&&u.get(V)!=null&&(z.name=z.displayName=V),N.type!=null&&(z.type=N.type),N.displayName!=null&&(z.displayName=N.displayName);var F=o.length;return h[A]=F,z.storeDimIndex=A,o.push(z),z}return o[I]}if(!a)for(var d=0;d<s;d++)p(d);f.each(function(A,I){var L=er(A).slice();if(L.length===1&&!Mt(L[0])&&L[0]<0){f.set(I,!1);return}var N=f.set(I,[]);$(L,function(z,V){var F=Mt(z)?u.get(z):z;F!=null&&F<s&&(N[V]=F,m(p(F),I,V))})});var v=0;$(r,function(A){var I,L,N,z;if(Mt(A))I=A,z={};else{z=A,I=z.name;var V=z.ordinalMeta;z.ordinalMeta=null,z=ut({},z),z.ordinalMeta=V,L=z.dimsDef,N=z.otherDims,z.name=z.coordDim=z.coordDimIndex=z.dimsDef=z.otherDims=null}var F=f.get(I);if(F!==!1){if(F=er(F),!F.length)for(var G=0;G<(L&&L.length||1);G++){for(;v<s&&p(v).coordDim!=null;)v++;v<s&&F.push(v++)}$(F,function(K,q){var rt=p(K);if(l&&z.type!=null&&(rt.type=z.type),m(ie(rt,z),I,q),rt.name==null&&L){var At=L[q];!Nt(At)&&(At={name:At}),rt.name=rt.displayName=At.name,rt.defaultTooltip=At.defaultTooltip}N&&ie(rt.otherDims,N)})}});function m(A,I,L){iF.get(I)!=null?A.otherDims[I]=L:(A.coordDim=I,A.coordDimIndex=L,i.set(I,!0))}var g=t.generateCoord,y=t.generateCoordCount,b=y!=null;y=g?y||1:0;var w=g||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(a)$(o,function(A){T(A)}),o.sort(function(A,I){return A.storeDimIndex-I.storeDimIndex});else for(var S=0;S<s;S++){var k=p(S),x=k.coordDim;x==null&&(k.coordDim=hot(w,i,b),k.coordDimIndex=0,(!g||y<=0)&&(k.isExtraCoord=!0),y--),T(k),k.type==null&&(lF(e,S)===En.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return cot(o),new v$({source:e,dimensions:o,fullDimensionCount:s,dimensionOmitted:a})}function cot(e){for(var t=Yt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function fot(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return $(t,function(o){var s;Nt(o)&&(s=o.dimsDef)&&(i=Math.max(i,s.length))}),i}function hot(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var dot=function(){function e(t){this.coordSysDims=[],this.axisMap=Yt(),this.categoryAxisMap=Yt(),this.coordSysName=t}return e}();function pot(e){var t=e.get("coordinateSystem"),r=new dot(t),n=vot[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var vot={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Li).models[0],o=e.getReferringComponents("yAxis",Li).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),ac(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),ac(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Li).models[0];t.coordSysDims=["single"],r.set("single",i),ac(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Li).models[0],o=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",s),ac(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),ac(s)&&(n.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=o.dimensions.slice();$(o.parallelAxisIndex,function(a,l){var u=i.getComponent("parallelAxis",a),c=s[l];r.set(c,u),ac(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function ac(e){return e.get("type")==="category"}function got(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,s,a;mot(t)?o=t:(s=t.schema,o=s.dimensions,a=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if($(o,function(y,b){Mt(y)&&(o[b]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;$(o,function(y){y.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};s?(a&&(m.storeDimIndex=a.ensureCalculationDimension(h,p),g.storeDimIndex=a.ensureCalculationDimension(f,p)),s.appendCalculationDimension(m),s.appendCalculationDimension(g)):(o.push(m),o.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function mot(e){return!g$(e.schema)}function vu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function w$(e,t){return vu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function _ot(e,t){var r=e.get("coordinateSystem"),n=OP.get(r),i;return t&&t.coordSysDims&&(i=It(t.coordSysDims,function(o){var s={name:o},a=t.axisMap.get(o);if(a){var l=a.get("type");s.type=tot(l)}return s})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function yot(e,t,r){var n,i;return r&&$(e,function(o,s){var a=o.coordDim,l=r.categoryAxisMap.get(a);l&&(n==null&&(n=s),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function t0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=DP(e)):(i=n.getSource(),o=i.sourceFormat===hi);var s=pot(t),a=_ot(t,s),l=r.useEncodeDefaulter,u=Ht(l)?l:l?we(ort,a,t):null,c={coordDimensions:a,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=b$(i,c),h=yot(f.dimensions,r.createInvertedIndices,s),d=o?null:n.getSharedDataStore(f),p=got(t,{schema:f,store:d}),v=new Ql(f,t);v.setCalculationInfo(p);var m=h!=null&&bot(i)?function(g,y,b,w){return w===h?b:this.defaultDimValueGetter(g,y,b,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,m),v}function bot(e){if(e.sourceFormat===hi){var t=wot(e.data||[]);return!pt(qp(t))}}function wot(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var S$=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();a_(S$);const Ls=S$;var Sot=0,Tot=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Sot}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&It(n,kot);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Mt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Yt(this.categories))},e}();function kot(e){return Nt(e)&&e.value!=null?e.value:e+""}const N3=Tot;function F3(e){return e.type==="interval"||e.type==="log"}function Pot(e,t,r,n){var i={},o=e[1]-e[0],s=i.interval=B7(o/t,!0);r!=null&&s<r&&(s=i.interval=r),n!=null&&s>n&&(s=i.interval=n);var a=i.intervalPrecision=T$(s),l=i.niceTickExtent=[tr(Math.ceil(e[0]/s)*s,a),tr(Math.floor(e[1]/s)*s,a)];return Cot(l,e),i}function Yb(e){var t=Math.pow(10,lP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,tr(r*t)}function T$(e){return Ao(e)+2}function N5(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Cot(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),N5(e,0,t),N5(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function x_(e,t){return e>=t[0]&&e<=t[1]}function I_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function L_(e,t){return e*(t[1]-t[0])+t[0]}var k$=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new N3({})),pt(i)&&(i=new N3({categories:It(i,function(o){return Nt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Mt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),x_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),I_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(L_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],s=0,a=this._ordinalMeta.categories.length,l=Math.min(a,n.length);s<l;++s){var u=n[s];i[s]=u,o[u]=s}for(var c=0;s<a;++s){for(;o[c]!=null;)c++;i.push(c),o[c]=s}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ls);Ls.registerClass(k$);const P$=k$;var kl=tr,C$=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return x_(r,this._extent)},t.prototype.normalize=function(r){return I_(r,this._extent)},t.prototype.scale=function(r){return L_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=T$(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,s=this._intervalPrecision,a=[];if(!n)return a;var l=1e4;i[0]<o[0]&&(r?a.push({value:kl(o[0]-n,s)}):a.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(a.push({value:u}),u=kl(u+n,s),u!==a[a.length-1].value);)if(a.length>l)return[];var c=a.length?a[a.length-1].value:o[1];return i[1]>c&&(r?a.push({value:kl(c+n,s)}):a.push({value:i[1]})),a},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),s=1;s<n.length;s++){for(var a=n[s],l=n[s-1],u=0,c=[],f=a.value-l.value,h=f/r;u<r-1;){var d=kl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Ao(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=kl(r.value,i,!0);return tF(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,s=o[1]-o[0];if(!!isFinite(s)){s<0&&(s=-s,o.reverse());var a=Pot(o,r,n,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var s=this._interval;r.fixMin||(n[0]=kl(Math.floor(n[0]/s)*s)),r.fixMax||(n[1]=kl(Math.ceil(n[1]/s)*s))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ls);Ls.registerClass(C$);const e0=C$;var E$=typeof Float32Array<"u",Eot=E$?Float32Array:Array;function fs(e){return pt(e)?E$?new Float32Array(e):e:new Eot(e)}var $3="__ec_stack_";function XP(e){return e.get("stack")||$3+e.seriesIndex}function YP(e){return e.dim+e.index}function Aot(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(ie({bandWidth:i,axisKey:n,stackId:$3+o},e));for(var s=x$(t),a=[],o=0;o<e.count;o++){var l=s[n][$3+o];l.offsetCenter=l.offset+l.width/2,a.push(l)}return a}}function A$(e,t){var r=[];return t.eachSeriesByType(e,function(n){I$(n)&&r.push(n)}),r}function Mot(e){var t={};$(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);t[h]?t[h].push(g):t[h]=[g]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,s=1;s<i.length;++s){var a=i[s]-i[s-1];a>0&&(o=o===null?a:Math.min(o,a))}r[n]=o}}return r}function M$(e){var t=Mot(e),r=[];return $(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),s=o.getExtent(),a;if(o.type==="category")a=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(s[1]-s[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);a=u?c/h*u:c}else{var d=n.getData();a=Math.abs(s[1]-s[0])/d.count()}var p=Ke(n.get("barWidth"),a),v=Ke(n.get("barMaxWidth"),a),m=Ke(n.get("barMinWidth")||(L$(n)?.5:1),a),g=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:a,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:YP(o),stackId:XP(n)})}),x$(r)}function x$(e){var t={};$(e,function(n,i){var o=n.axisKey,s=n.bandWidth,a=t[o]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=a.stacks;t[o]=a;var u=n.stackId;l[u]||a.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(a.remainedWidth,c),a.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(a.gap=d);var p=n.barCategoryGap;p!=null&&(a.categoryGap=p)});var r={};return $(t,function(n,i){r[i]={};var o=n.stacks,s=n.bandWidth,a=n.categoryGap;if(a==null){var l=ge(o).length;a=Math.max(35-l*4,15)+"%"}var u=Ke(a,s),c=Ke(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),$(o,function(g){var y=g.maxWidth,b=g.minWidth;if(g.width){var w=g.width;y&&(w=Math.min(w,y)),b&&(w=Math.max(w,b)),g.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),b&&b>w&&(w=b),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;$(o,function(g,y){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;$(o,function(g,y){r[i][y]=r[i][y]||{bandWidth:s,offset:m,width:g.width},m+=g.width*(1+c)})}),r}function xot(e,t,r){if(e&&t){var n=e[YP(t)];return n!=null&&r!=null?n[XP(r)]:n}}function Iot(e,t){var r=A$(e,t),n=M$(r);$(r,function(i){var o=i.getData(),s=i.coordinateSystem,a=s.getBaseAxis(),l=XP(i),u=n[YP(a)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function Lot(e){return{seriesType:e,plan:zP(),reset:function(t){if(!!I$(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),s=r.getDimensionIndex(r.mapDimension(o.dim)),a=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=vu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=Oot(i,o),p=L$(t),v=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),g=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(b,w){for(var T=b.count,S=p&&fs(T*3),k=p&&l&&fs(T*3),x=p&&fs(T),A=n.master.getRect(),I=h?A.width:A.height,L,N=w.getStore(),z=0;(L=b.next())!=null;){var V=N.get(f?m:s,L),F=N.get(a,L),G=d,K=void 0;f&&(K=+V-N.get(s,L));var q=void 0,rt=void 0,At=void 0,Ft=void 0;if(h){var Pt=n.dataToPoint([V,F]);if(f){var Ct=n.dataToPoint([K,F]);G=Ct[0]}q=G,rt=Pt[1]+y,At=Pt[0]-G,Ft=g,Math.abs(At)<v&&(At=(At<0?-1:1)*v)}else{var Pt=n.dataToPoint([F,V]);if(f){var Ct=n.dataToPoint([F,K]);G=Ct[1]}q=Pt[0]+y,rt=G,At=g,Ft=Pt[1]-G,Math.abs(Ft)<v&&(Ft=(Ft<=0?-1:1)*v)}p?(S[z]=q,S[z+1]=rt,S[z+2]=h?At:Ft,k&&(k[z]=h?A.x:q,k[z+1]=h?rt:A.y,k[z+2]=I),x[L]=L):w.setItemLayout(L,{x:q,y:rt,width:At,height:Ft}),z+=3}p&&w.setLayout({largePoints:S,largeDataIndices:x,largeBackgroundPoints:k,valueAxisHorizontal:h})}}}}}}function I$(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function L$(e){return e.pipelineContext&&e.pipelineContext.large}function Oot(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Rot=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},O$=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return __(r.value,CM[Yet(Kc(this._minLevelUnit))]||CM.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),s=this.getSetting("locale");return qet(r,n,i,s,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),s=Vot(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(s),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=ri,n[1]+=ri),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-ri}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,s=o[1]-o[0];this._approxInterval=s/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var a=hv.length,l=Math.min(Rot(hv,this._approxInterval,0,a),a-1);this._interval=hv[l][1],this._minLevelUnit=hv[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return Te(r)?r:+ws(r)},t.prototype.contain=function(r){return x_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return I_(this.parse(r),this._extent)},t.prototype.scale=function(r){return L_(r,this._extent)},t.type="time",t}(e0),hv=[["second",AP],["minute",MP],["hour",Ud],["quarter-day",Ud*6],["half-day",Ud*12],["day",ri*1.2],["half-week",ri*3.5],["week",ri*7],["month",ri*31],["quarter",ri*95],["half-year",PM/2],["year",PM]];function Dot(e,t,r,n){var i=ws(t),o=ws(r),s=function(p){return EM(i,p,n)===EM(o,p,n)},a=function(){return s("year")},l=function(){return a()&&s("month")},u=function(){return l()&&s("day")},c=function(){return u()&&s("hour")},f=function(){return c()&&s("minute")},h=function(){return f()&&s("second")},d=function(){return h()&&s("millisecond")};switch(e){case"year":return a();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function Not(e,t){return e/=ri,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Fot(e){var t=30*ri;return e/=t,e>6?6:e>3?3:e>2?2:1}function $ot(e){return e/=Ud,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function F5(e,t){return e/=t?MP:AP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function zot(e){return B7(e,!0)}function Bot(e,t,r){var n=new Date(e);switch(Kc(t)){case"year":case"month":n[YN(r)](0);case"day":n[qN(r)](1);case"hour":n[ZN(r)](0);case"minute":n[KN(r)](0);case"second":n[JN(r)](0),n[QN(r)](0)}return n.getTime()}function Vot(e,t,r,n){var i=1e4,o=HN,s=0;function a(I,L,N,z,V,F,G){for(var K=new Date(L),q=L,rt=K[z]();q<N&&q<=n[1];)G.push({value:q}),rt+=I,K[V](rt),q=K.getTime();G.push({value:q,notAdd:!0})}function l(I,L,N){var z=[],V=!L.length;if(!Dot(Kc(I),n[0],n[1],r)){V&&(L=[{value:Bot(new Date(n[0]),I,r)},{value:n[1]}]);for(var F=0;F<L.length-1;F++){var G=L[F].value,K=L[F+1].value;if(G!==K){var q=void 0,rt=void 0,At=void 0,Ft=!1;switch(I){case"year":q=Math.max(1,Math.round(t/ri/365)),rt=xP(r),At=Zet(r);break;case"half-year":case"quarter":case"month":q=Fot(t),rt=Jc(r),At=YN(r);break;case"week":case"half-week":case"day":q=Not(t),rt=y_(r),At=qN(r),Ft=!0;break;case"half-day":case"quarter-day":case"hour":q=$ot(t),rt=bp(r),At=ZN(r);break;case"minute":q=F5(t,!0),rt=b_(r),At=KN(r);break;case"second":q=F5(t,!1),rt=w_(r),At=JN(r);break;case"millisecond":q=zot(t),rt=S_(r),At=QN(r);break}a(q,G,K,rt,At,Ft,z),I==="year"&&N.length>1&&F===0&&N.unshift({value:N[0].value-q})}}for(var F=0;F<z.length;F++)N.push(z[F]);return z}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&s++<i;++d){var p=Kc(o[d]);if(!!Xet(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Kc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(I,L){return I.value-L.value});for(var m=[],g=0;g<c.length;++g){var y=c[g].value;(g===0||c[g-1].value!==y)&&(m.push(c[g]),y>=n[0]&&y<=n[1]&&f++)}var b=(n[1]-n[0])/t;if(f>b*1.5&&h>b/1.5||(u.push(m),f>b||e===o[d]))break}c=[]}}}for(var w=Er(It(u,function(I){return Er(I,function(L){return L.value>=n[0]&&L.value<=n[1]&&!L.notAdd})}),function(I){return I.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var k=w[d],x=0;x<k.length;++x)T.push({value:k[x].value,level:S-d});T.sort(function(I,L){return I.value-L.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Ls.registerClass(O$);const Uot=O$;var $5=Ls.prototype,Hd=e0.prototype,Wot=tr,jot=Math.floor,Got=Math.ceil,dv=Math.pow,_i=Math.log,qP=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new e0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),s=Hd.getTicks.call(this,r);return It(s,function(a){var l=a.value,u=tr(dv(this.base,l));return u=l===i[0]&&this._fixMin?pv(u,o[0]):u,u=l===i[1]&&this._fixMax?pv(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=_i(this.base);r=_i(Math.max(0,r))/i,n=_i(Math.max(0,n))/i,Hd.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=$5.getExtent.call(this);n[0]=dv(r,n[0]),n[1]=dv(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=pv(n[0],o[0])),this._fixMax&&(n[1]=pv(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=_i(r[0])/_i(n),r[1]=_i(r[1])/_i(n),$5.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=YJ(i),s=r/i*o;for(s<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var a=[tr(Got(n[0]/o)*o),tr(jot(n[1]/o)*o)];this._interval=o,this._niceExtent=a}},t.prototype.calcNiceExtent=function(r){Hd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=_i(r)/_i(this.base),x_(r,this._extent)},t.prototype.normalize=function(r){return r=_i(r)/_i(this.base),I_(r,this._extent)},t.prototype.scale=function(r){return r=L_(r,this._extent),dv(this.base,r)},t.type="log",t}(Ls),R$=qP.prototype;R$.getMinorTicks=Hd.getMinorTicks;R$.getLabel=Hd.getLabel;function pv(e,t){return Wot(e,Ao(t))}Ls.registerClass(qP);const Hot=qP;var Xot=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ht(o)?this._modelMinNum=vv(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=vv(t,o));var s=this._modelMaxRaw=r.get("max",!0);if(Ht(s)?this._modelMaxNum=vv(t,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=vv(t,s)),i)this._axisDataLen=r.getCategories().length;else{var a=r.get("boundaryGap"),l=pt(a)?a:[a||0,a||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ys(l[0],1),ys(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,s=t?null:n-r||Math.abs(r),a=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=a!=null,c=l!=null;a==null&&(a=t?i?0:NaN:r-o[0]*s),l==null&&(l=t?i?i-1:NaN:n+o[1]*s),(a==null||!isFinite(a))&&(a=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=$m(a)||$m(l)||t&&!i;this._needCrossZero&&(a>0&&l>0&&!u&&(a=0),a<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(a=h,u=!0),d!=null&&(l=d,c=!0),{min:a,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[qot[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Yot[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Yot={min:"_determinedMin",max:"_determinedMax"},qot={min:"_dataMin",max:"_dataMax"};function Zot(e,t,r){var n=e.rawExtentInfo;return n||(n=new Xot(e,t,r),e.rawExtentInfo=n,n)}function vv(e,t){return t==null?null:$m(t)?NaN:e.parse(t)}function D$(e,t){var r=e.type,n=Zot(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,s=t.ecModel;if(s&&r==="time"){var a=A$("bar",s),l=!1;if($(a,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=M$(a),c=Kot(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function Kot(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],s=xot(n,r.axis);if(s===void 0)return{min:e,max:t};var a=1/0;$(s,function(d){a=Math.min(d.offset,a)});var l=-1/0;$(s,function(d){l=Math.max(d.offset+d.width,l)}),a=Math.abs(a),l=Math.abs(l);var u=a+l,c=t-e,f=1-(a+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(a/u),{min:e,max:t}}function z5(e,t){var r=t,n=D$(e,r),i=n.extent,o=r.get("splitNumber");e instanceof Hot&&(e.base=r.get("logBase"));var s=e.type,a=r.get("interval"),l=s==="interval"||s==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),a!=null&&e.setInterval&&e.setInterval(a)}function Jot(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new P$({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Uot({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ls.getClass(t)||e0)}}function Qot(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function r0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Mt(t)?function(n){return function(i){var o=e.scale.getLabel(i),s=n.replace("{value}",o!=null?o:"");return s}}(t):Ht(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(ZP(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function ZP(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function tst(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof P$?i=r.count():(n=r.getTicks(),i=n.length);var s=e.getLabelModel(),a=r0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=a(f,c),d=s.getTextRect(h),p=est(d,s.get("rotate")||0);l?l.union(p):l=p}return l}}function est(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),s=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),a=new ce(e.x,e.y,o,s);return a}function KP(e){var t=e.get("interval");return t==null?"auto":t}function N$(e){return e.type==="category"&&KP(e.getLabelModel())===0}function rst(e,t){var r={};return $(e.mapDimensionsAll(t),function(n){r[w$(e,n)]=!0}),ge(r)}var nst=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),B5=[],ist={registerPreprocessor:f$,registerProcessor:h$,registerPostInit:Git,registerPostUpdate:Hit,registerUpdateLifecycle:GP,registerAction:Au,registerCoordinateSystem:Xit,registerLayout:Yit,registerVisual:Mu,registerTransform:Zit,registerLoading:d$,registerMap:qit,registerImpl:kit,PRIORITY:$it,ComponentModel:Me,ComponentView:ui,SeriesModel:No,ChartView:oi,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){ui.registerClass(e)},registerSeriesModel:function(e){No.registerClass(e)},registerChartView:function(e){oi.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){UJ(e,t)}};function br(e){if(pt(e)){$(e,function(t){br(t)});return}he(B5,e)>=0||(B5.push(e),Ht(e)&&(e={install:e}),e.install(ist))}var Pp=Re();function ost(e){return e.type==="category"?ast(e):ust(e)}function sst(e,t){return e.type==="category"?lst(e,t):{ticks:It(e.scale.getTicks(),function(r){return r.value})}}function ast(e){var t=e.getLabelModel(),r=F$(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function F$(e,t){var r=$$(e,"labels"),n=KP(t),i=z$(r,n);if(i)return i;var o,s;return Ht(n)?o=U$(e,n):(s=n==="auto"?cst(e):n,o=V$(e,s)),B$(r,n,{labels:o,labelCategoryInterval:s})}function lst(e,t){var r=$$(e,"ticks"),n=KP(t),i=z$(r,n);if(i)return i;var o,s;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ht(n))o=U$(e,n,!0);else if(n==="auto"){var a=F$(e,e.getLabelModel());s=a.labelCategoryInterval,o=It(a.labels,function(l){return l.tickValue})}else s=n,o=V$(e,s,!0);return B$(r,n,{ticks:o,tickCategoryInterval:s})}function ust(e){var t=e.scale.getTicks(),r=r0(e);return{labels:It(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function $$(e,t){return Pp(e)[t]||(Pp(e)[t]=[])}function z$(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function B$(e,t,r){return e.push({key:t,value:r}),r}function cst(e){var t=Pp(e).autoInterval;return t!=null?t:Pp(e).autoInterval=e.calculateCategoryInterval()}function fst(e){var t=hst(e),r=r0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),s=i.count();if(o[1]-o[0]<1)return 0;var a=1;s>40&&(a=Math.max(1,Math.floor(s/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=a){var p=0,v=0,m=oP(r({value:l}),t.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,y=d/f;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(g,y))),w=Pp(e.model),T=e.getExtent(),S=w.lastAutoInterval,k=w.lastTickCount;return S!=null&&k!=null&&Math.abs(S-b)<=1&&Math.abs(k-s)<=1&&S>b&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?b=S:(w.lastTickCount=s,w.lastAutoInterval=b,w.axisExtent0=T[0],w.axisExtent1=T[1]),b}function hst(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function V$(e,t,r){var n=r0(e),i=e.scale,o=i.getExtent(),s=e.getLabelModel(),a=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=N$(e),h=s.get("showMinLabel")||f,d=s.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(m){var g={value:m};a.push(r?m:{formattedLabel:n(g),rawLabel:i.getLabel(g),tickValue:m})}return a}function U$(e,t,r){var n=e.scale,i=r0(e),o=[];return $(n.getTicks(),function(s){var a=n.getLabel(s),l=s.value;t(s.value,a)&&o.push(r?l:{formattedLabel:i(s),rawLabel:a,tickValue:l})}),o}var V5=[0,1],dst=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return GJ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),U5(n,i.count())),bs(t,V5,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),U5(n,i.count()));var o=bs(t,n,V5,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=sst(this,r),i=n.ticks,o=It(i,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),s=r.get("alignWithLabel");return pst(this,o,s,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=It(n,function(o){return It(o,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},e.prototype.getViewLabels=function(){return ost(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return fst(this)},e}();function U5(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function pst(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),s,a;if(i===1)t[0].coord=o[0],s=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;$(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();a=1+c[1]-t[i-1].tickValue,s={coord:t[i-1].coord+u*a},t.push(s)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],s.coord)&&(n?s.coord=o[1]:t.pop()),n&&h(s.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=tr(d),p=tr(p),f?d>p:d<p}}const vst=dst;function gst(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),s=i.getBoundingRect(),a=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=s.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=a?new qm(s,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:s,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:a,transform:o})}}return t}function mst(e){var t=[];e.sort(function(v,m){return m.priority-v.priority});var r=new ce(0,0,0,0);function n(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],s=o.axisAligned,a=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(s&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new qm(p.localRect,p.transform)),f||(f=new qm(a,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function W5(e,t,r){var n=Tu.createCanvas(),i=t.getWidth(),o=t.getHeight(),s=n.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var _st=function(e){Ee(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var s;i=i||Gm,typeof r=="string"?s=W5(r,n,i):Nt(r)&&(s=r,r=s.id),o.id=r,o.dom=s;var a=s.style;return a&&(p7(s),s.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=W5("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],a=this.maxRepaintRectCount,l=!1,u=new ce(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(s.length===0){var b=new ce(0,0,0,0);b.copy(y),s.push(b)}else{for(var w=!1,T=1/0,S=0,k=0;k<s.length;++k){var x=s[k];if(x.intersect(y)){var A=new ce(0,0,0,0);A.copy(x),A.union(y),s[k]=A,w=!0;break}else if(l){u.copy(y),u.union(x);var I=y.width*y.height,L=x.width*x.height,N=u.width*u.height,z=N-I-L;z<T&&(T=z,S=k)}}if(l&&(s[S].union(y),w=!0),!w){var b=new ce(0,0,0,0);b.copy(y),s.push(b)}l||(l=s.length>=a)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&In||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&In||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<s.length;){if(s[f].isZero()){s.splice(f,1);continue}for(var g=f+1;g<s.length;)s[f].intersect(s[g])?(m=!0,s[f].union(s[g]),s.splice(g,1)):g++;f++}}while(m);return this._paintRects=s,s},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,s=o.style,a=this.domBack;s&&(s.width=r+"px",s.height=n+"px"),o.width=r*i,o.height=n*i,a&&(a.width=r*i,a.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,s=this.ctx,a=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,a/f,l/f));var d=this.domBack;function p(v,m,g,y){if(s.clearRect(v,m,g,y),n&&n!=="transparent"){var b=void 0;i_(n)?(b=n.__canvasGradient||I3(s,n,{x:0,y:0,width:g,height:y}),n.__canvasGradient=b):pK(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,b=L3(s,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),s.save(),s.fillStyle=b||n,s.fillRect(v,m,g,y),s.restore()}u&&(s.save(),s.globalAlpha=c,s.drawImage(d,v,m,g,y),s.restore())}!i||u?p(0,0,a,l):i.length&&$(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Xi);const qb=_st;var j5=1e5,Pl=314159,gv=.01,yst=.001;function bst(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function wst(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Sst=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ut({},n||{}),this.dpr=n.devicePixelRatio||Gm,this._singleCanvas=o,this.root=t;var s=t.style;s&&(p7(t),t.innerHTML=""),this.storage=r;var a=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new qb(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Pl]=d,d.zlevel=Pl,a.push(Pl),this._domRoot=t}else{this._width=av(t,0,n),this._height=av(t,1,n);var u=this._domRoot=wst(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var s=i[o],a=this._layers[s];if(!a.__builtin__&&a.refresh){var l=o===0?this._backgroundColor:null;a.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,s=0;s<r;s++){var a=t[s];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(j5)),o||(o=n.ctx,o.save()),jl(o,a,i,s===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(j5)},e.prototype.paintOne=function(t,r){YF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),s=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;ZS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Pl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],s=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var l=this._zlevelList[a],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var m=o[v],g=m.ctx,y=s&&m.createRepaintRects(t,r,d._width,d._height),b=n?m.__startIndex:m.__drawIndex,w=!n&&m.incremental&&Date.now,T=w&&Date.now(),S=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,S,y);else if(b===m.__startIndex){var k=t[b];(!k.incremental||!k.notClear||n)&&m.clear(!1,S,y)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=m.__startIndex);var x,A=function(z){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(x=b;x<m.__endIndex;x++){var F=t[x];if(F.__inHover&&(f=!0),i._doPaintEl(F,m,s,z,V,x===m.__endIndex-1),w){var G=Date.now()-T;if(G>15)break}}V.prevElClipPaths&&g.restore()};if(y)if(y.length===0)x=m.__endIndex;else for(var I=d.dpr,L=0;L<y.length;++L){var N=y[L];g.save(),g.beginPath(),g.rect(N.x*I,N.y*I,N.width*I,N.height*I),g.clip(),A(N),g.restore()}else g.save(),A(),g.restore();m.__drawIndex=x,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Kt.wxa&&$(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,s){var a=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(jl(a,t,o,s),t.setPrevPaintRect(l))}else jl(a,t,o,s)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Pl);var n=this._layers[t];return n||(n=new qb("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ue(n,this._layerConfig[t],!0):this._layerConfig[t-gv]&&ue(n,this._layerConfig[t-gv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,s=this._domRoot,a=null,l=-1;if(!n[t]&&!!bst(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);a=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(a){var u=a.dom;u.nextSibling?s.insertBefore(r.dom,u.nextSibling):s.appendChild(r.dom)}else s.firstChild?s.insertBefore(r.dom,s.firstChild):s.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__&&t.call(r,s,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__||t.call(r,s,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,s=0,a,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;a!==u&&(a=u,s=0),i.incremental?(c=this.getLayer(u+yst,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(u+(s>0?gv:0),this._needsManuallyCompositing),c.__builtin__||Jk("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&In&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,$(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?ue(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+gv){var s=this._layers[o];ue(s,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(he(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=av(o,0,i),r=av(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Pl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Pl].dom;var r=new qb("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),l=0,u=a.length;l<u;l++){var c=a[l];jl(n,c,s,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Tst=Sst;function Va(e){e.registerPainter("canvas",Tst)}var kst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return t0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Fe,i=Wi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),a=o==="none"?"circle":o,l=r.itemHeight*.8,u=Wi(a,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?s:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),a.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(No);const Pst=kst;function Cp(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=df(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],s=0;s<r.length;s++)o.push(df(e,t,r[s]));return o.join(" ")}}function W$(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!pt(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Cst=function(e){St(t,e);function t(r,n,i,o){var s=e.call(this)||this;return s.updateData(r,n,i,o),s}return t.prototype._createSymbol=function(r,n,i,o,s){this.removeAll();var a=Wi(r,-1,-1,2,2,null,s);a.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),a.drift=Est,this._symbolType=r,this.add(a)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){pp(this.childAt(0))},t.prototype.downplay=function(){vp(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var s=r.getItemVisual(n,"symbol")||"circle",a=r.hostModel,l=t.getSymbolSize(r,n),u=s!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(s,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):yr(h,d,a,n),ON(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Do(h,d,a,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,s){var a=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,m,g;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,m=o.hoverScale,g=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),b=y.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),d=b.get("blurScope"),p=b.get("disabled"),v=Cu(y),m=b.getShallow("scale"),g=y.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");a.attr("rotation",(w||0)*Math.PI/180||0);var T=VP(r.getItemVisual(n,"symbolOffset"),i);T&&(a.x=T[0],a.y=T[1]),g&&a.attr("cursor",g);var S=r.getItemVisual(n,"style"),k=S.fill;if(a instanceof Ms){var x=a.style;a.useStyle(ut({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},S))}else a.__isEmptyBrush?a.useStyle(ut({},S)):a.useStyle(S),a.style.decal=null,a.setColor(k,s&&s.symbolInnerColor),a.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),I=this._z2;A!=null?I==null&&(this._z2=a.z2,a.z2+=A):I!=null&&(a.z2=I,this._z2=null);var L=s&&s.useNameLabel;If(a,v,{labelFetcher:l,labelDataIndex:n,defaultText:N,inheritColor:k,defaultOpacity:S.opacity});function N(F){return L?r.getName(F):Cp(r,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var z=a.ensureState("emphasis");z.style=u,a.ensureState("select").style=f,a.ensureState("blur").style=c;var V=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;z.scaleX=this._sizeX*V,z.scaleY=this._sizeY*V,this.setSymbolScale(1),hu(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),s=le(this).dataIndex,a=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&du(l,{style:{opacity:0}},n,{dataIndex:s,removeOpt:a,cb:function(){o.removeTextContent()}})}else o.removeTextContent();du(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:s,cb:r,removeOpt:a})},t.getSymbolSize=function(r,n){return jF(r.getItemVisual(n,"symbolSize"))},t}(Fe);function Est(e,t){this.parent.drift(e,t)}const O_=Cst;function Zb(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function G5(e){return e!=null&&!Nt(e)&&(e={isIgnore:e}),e||{}}function H5(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Cu(t),cursorStyle:t.get("cursor")}}var Ast=function(){function e(t){this.group=new Fe,this._SymbolCtor=t||O_}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=G5(r);var n=this.group,i=t.hostModel,o=this._data,s=this._SymbolCtor,a=r.disableAnimation,l=H5(t),u={disableAnimation:a},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(Zb(t,h,f,r)){var d=new s(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!Zb(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)n.remove(d),d=new s(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var g={x:p[0],y:p[1]};a?d.attr(g):yr(d,g,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=H5(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=G5(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=r.getItemLayout(o);if(Zb(r,s,o,n)){var a=new this._SymbolCtor(r,o,this._seriesScope);a.traverse(i),a.setPosition(s),this.group.add(a),r.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(t){xf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const j$=Ast;function G$(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Mst(i,r),s=n.dim,a=i.dim,l=t.mapDimension(a),u=t.mapDimension(s),c=a==="x"||a==="radius"?1:0,f=It(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return vu(t,f[0])&&(h=!0,f[0]=d),vu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:a,baseAxisDim:s,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Mst(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:Te(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function H$(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,s=[];return s[o]=r.get(e.baseDim,n),s[1-o]=i,t.dataToPoint(s)}function xst(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Ist(e,t,r,n,i,o,s,a){for(var l=xst(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],m=G$(i,t,s),g=e.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,S=void 0,k=void 0;switch(w.cmd){case"=":S=w.idx*2,k=w.idx1*2;var x=g[S],A=g[S+1],I=y[k],L=y[k+1];(isNaN(x)||isNaN(A))&&(x=I,A=L),u.push(x,A),c.push(I,L),f.push(r[S],r[S+1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var N=w.idx,z=m.dataDimsForPoint,V=i.dataToPoint([t.get(z[0],N),t.get(z[1],N)]);k=N*2,u.push(V[0],V[1]),c.push(y[k],y[k+1]);var F=H$(m,i,t,N);f.push(F[0],F[1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(N));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,ot){return v[Y]-v[ot]});for(var G=u.length,K=fs(G),q=fs(G),rt=fs(G),At=fs(G),Ft=[],b=0;b<p.length;b++){var Pt=p[b],Ct=b*2,Zt=Pt*2;K[Ct]=u[Zt],K[Ct+1]=u[Zt+1],q[Ct]=c[Zt],q[Ct+1]=c[Zt+1],rt[Ct]=f[Zt],rt[Ct+1]=f[Zt+1],At[Ct]=h[Zt],At[Ct+1]=h[Zt+1],Ft[b]=d[Pt]}return{current:K,next:q,stackedOnCurrent:rt,stackedOnNext:At,status:Ft}}var js=Math.min,Gs=Math.max;function tu(e,t){return isNaN(e)||isNaN(t)}function z3(e,t,r,n,i,o,s,a,l){for(var u,c,f,h,d,p,v=r,m=0;m<n;m++){var g=t[v*2],y=t[v*2+1];if(v>=i||v<0)break;if(tu(g,y)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](g,y),f=g,h=y;else{var b=g-u,w=y-c;if(b*b+w*w<.5){v+=o;continue}if(s>0){for(var T=v+o,S=t[T*2],k=t[T*2+1];S===g&&k===y&&m<n;)m++,T+=o,v+=o,S=t[T*2],k=t[T*2+1],g=t[v*2],y=t[v*2+1],b=g-u,w=y-c;var x=m+1;if(l)for(;tu(S,k)&&x<n;)x++,T+=o,S=t[T*2],k=t[T*2+1];var A=.5,I=0,L=0,N=void 0,z=void 0;if(x>=n||tu(S,k))d=g,p=y;else{I=S-u,L=k-c;var V=g-u,F=S-g,G=y-c,K=k-y,q=void 0,rt=void 0;if(a==="x"){q=Math.abs(V),rt=Math.abs(F);var At=I>0?1:-1;d=g-At*q*s,p=y,N=g+At*rt*s,z=y}else if(a==="y"){q=Math.abs(G),rt=Math.abs(K);var Ft=L>0?1:-1;d=g,p=y-Ft*q*s,N=g,z=y+Ft*rt*s}else q=Math.sqrt(V*V+G*G),rt=Math.sqrt(F*F+K*K),A=rt/(rt+q),d=g-I*s*(1-A),p=y-L*s*(1-A),N=g+I*s*A,z=y+L*s*A,N=js(N,Gs(S,g)),z=js(z,Gs(k,y)),N=Gs(N,js(S,g)),z=Gs(z,js(k,y)),I=N-g,L=z-y,d=g-I*q/rt,p=y-L*q/rt,d=js(d,Gs(u,g)),p=js(p,Gs(c,y)),d=Gs(d,js(u,g)),p=Gs(p,js(c,y)),I=g-d,L=y-p,N=g+I*rt/q,z=y+L*rt/q}e.bezierCurveTo(f,h,d,p,g,y),f=N,h=z}else e.lineTo(g,y)}u=g,c=y,v+=o}return m}var X$=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Lst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new X$},t.prototype.buildPath=function(r,n){var i=n.points,o=0,s=i.length/2;if(n.connectNulls){for(;s>0&&tu(i[s*2-2],i[s*2-1]);s--);for(;o<s&&tu(i[o*2],i[o*2+1]);o++);}for(;o<s;)o+=z3(r,i,o,s,s,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,s=fu.CMD,a,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0;switch(h){case s.M:a=o[f++],l=o[f++];break;case s.L:if(d=o[f++],p=o[f++],b=u?(r-a)/(d-a):(r-l)/(p-l),b<=1&&b>=0){var w=u?(p-l)*b+l:(d-a)*b+a;return u?[r,w]:[w,r]}a=d,l=p;break;case s.C:d=o[f++],p=o[f++],v=o[f++],m=o[f++],g=o[f++],y=o[f++];var T=u?Vm(a,d,v,g,r,c):Vm(l,p,m,y,r,c);if(T>0)for(var S=0;S<T;S++){var k=c[S];if(k<=1&&k>=0){var w=u?cr(l,p,m,y,k):cr(a,d,v,g,k);return u?[r,w]:[w,r]}}a=g,l=y;break}}},t}(pe),Ost=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(X$),Rst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Ost},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,s=0,a=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;a>0&&tu(i[a*2-2],i[a*2-1]);a--);for(;s<a&&tu(i[s*2],i[s*2+1]);s++);}for(;s<a;){var u=z3(r,i,s,a,a,1,n.smooth,l,n.connectNulls);z3(r,o,s+u-1,u,a,-1,n.stackedOnSmooth,l,n.connectNulls),s+=u+1,r.closePath()}},t}(pe);function Y$(e,t,r,n,i){var o=e.getArea(),s=o.x,a=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;s-=c/2,a-=c/2,l+=c,u+=c,s=Math.floor(s),l=Math.round(l);var f=new rr({shape:{x:s,y:a,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ht(i)?function(m){i(m,f)}:null;Do(f,{shape:{width:l,height:u,x:s,y:a}},r,null,n,v)}return f}function q$(e,t,r){var n=e.getArea(),i=tr(n.r0,1),o=tr(n.r,1),s=new Jp({shape:{cx:tr(e.cx,1),cy:tr(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var a=e.getBaseAxis().dim==="angle";a?s.shape.endAngle=n.startAngle:s.shape.r=i,Do(s,{shape:{endAngle:n.endAngle,r:o}},r)}return s}function Z$(e,t,r,n,i){if(e){if(e.type==="polar")return q$(e,t,r);if(e.type==="cartesian2d")return Y$(e,t,r,n,i)}else return null;return null}function Rf(e,t){return e.type===t}function X5(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function Y5(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var s=e[o++],a=e[o++];isNaN(s)||(t=Math.min(s,t),n=Math.max(s,n)),isNaN(a)||(r=Math.min(a,r),i=Math.max(a,i))}return[[t,r],[n,i]]}function q5(e,t){var r=Y5(e),n=r[0],i=r[1],o=Y5(t),s=o[0],a=o[1];return Math.max(Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]),Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))}function Z5(e){return Te(e)?e:e?.5:0}function Dst(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=fs(n*2),o=0;o<n;o++){var s=H$(r,e,t,o);i[o*2]=s[0],i[o*2+1]=s[1]}return i}function Hs(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,s=[],a=0,l=[],u=[],c=[],f=[];if(n){for(a=0;a<e.length;a+=2)!isNaN(e[a])&&!isNaN(e[a+1])&&f.push(e[a],e[a+1]);e=f}for(a=0;a<e.length-2;a+=2)switch(c[0]=e[a+2],c[1]=e[a+3],u[0]=e[a],u[1]=e[a+1],s.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],s.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],s.push(l[0],l[1])}return s.push(e[a++],e[a++]),s}function Nst(e,t){var r=[],n=e.length,i,o;function s(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=hJ(p,[c.color,f.color]);return{coord:h,color:v}}for(var a=0;a<n;a++){var l=e[a],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(s(o,l,t)):i&&r.push(s(i,l,0),s(i,l,t));break}else i&&(r.push(s(i,l,0)),i=null),r.push(l),o=l}return r}function Fst(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,s=n.length-1;s>=0;s--){var a=e.getDimensionInfo(n[s].dimension);if(i=a&&a.coordDim,i==="x"||i==="y"){o=n[s];break}}if(!!o){var l=t.getAxis(i),u=It(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=Nst(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";$(h,function(b){b.offset=(b.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new wP(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=m,y}}}function $st(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&zst(o,t))){var s=t.mapDimension(o.dim),a={};return $(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);a[u]=1}),function(l){return!a.hasOwnProperty(t.get(s,l))}}}}function zst(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),s=0;s<i;s+=o)if(O_.getSymbolSize(t,s)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function Bst(e,t){return isNaN(e)||isNaN(t)}function Vst(e){for(var t=e.length/2;t>0&&Bst(e[t*2-2],e[t*2-1]);t--);return t-1}function K5(e,t){return[e[t*2],e[t*2+1]]}function Ust(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,s,a=0,l=-1,u=0;u<n;u++)if(s=e[u*2+i],!(isNaN(s)||isNaN(e[u*2+1-i]))){if(u===0){o=s;continue}if(o<=t&&s>=t||o>=t&&s<=t){l=u;break}a=u,o=s}return{range:[a,l],t:(t-o)/(s-o)}}function K$(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<li.length;t++)if(e.get([li[t],"endLabel","show"]))return!0;return!1}function Kb(e,t,r,n){if(Rf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),s=n.getData(),a={lastFrameIndex:0},l=K$(n)?function(d,p){e._endLabelOnDuring(d,p,s,a,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=Y$(t,r,n,function(){var d=e._endLabel;d&&r&&a.originalX!=null&&d.attr({x:a.originalX,y:a.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return q$(t,r,n)}function Wst(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",s=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||s}}}var jst=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Fe,n=new j$;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,s=r.coordinateSystem,a=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=s.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,y=r.get("animation"),b=!c.isEmpty(),w=c.get("origin"),T=G$(s,l,w),S=b&&Dst(s,l,T),k=r.get("showSymbol"),x=r.get("connectNulls"),A=k&&!h&&$st(r,l,s),I=this._data;I&&I.eachItemGraphicEl(function(ot,J){ot.__temp&&(a.remove(ot),I.setItemGraphicEl(J,null))}),k||p.remove(),a.add(g);var L=h?!1:r.get("step"),N;s&&s.getArea&&r.get("clip",!0)&&(N=s.getArea(),N.width!=null?(N.x-=.1,N.y-=.1,N.width+=.2,N.height+=.2):N.r0&&(N.r0-=.5,N.r+=.5)),this._clipShapeForSymbol=N;var z=Fst(l,s,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===s.type&&L===this._step))k&&p.updateData(l,{isIgnore:A,clipShape:N,disableAnimation:!0,getSymbolPoint:function(ot){return[f[ot*2],f[ot*2+1]]}}),y&&this._initSymbolLabelAnimation(l,s,N),L&&(f=Hs(f,s,L,x),S&&(S=Hs(S,s,L,x))),v=this._newPolyline(f),b?m=this._newPolygon(f,S):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,pu(z)),g.setClipPath(Kb(this,s,!0,r));else{b&&!m?m=this._newPolygon(f,S):m&&!b&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,pu(z));var V=g.getClipPath();if(V){var F=Kb(this,s,!1,r);Do(V,{shape:F.shape},r)}else g.setClipPath(Kb(this,s,!0,r));k&&p.updateData(l,{isIgnore:A,clipShape:N,disableAnimation:!0,getSymbolPoint:function(ot){return[f[ot*2],f[ot*2+1]]}}),(!X5(this._stackedOnPoints,S)||!X5(this._points,f))&&(y?this._doUpdateAnimation(l,S,s,i,L,w,x):(L&&(f=Hs(f,s,L,x),S&&(S=Hs(S,s,L,x))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:S})))}var G=r.getModel("emphasis"),K=G.get("focus"),q=G.get("blurScope"),rt=G.get("disabled");if(v.useStyle(ie(u.getLineStyle(),{fill:"none",stroke:z,lineJoin:"bevel"})),gp(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var At=v.getState("emphasis").style;At.lineWidth=+v.style.lineWidth+1}le(v).seriesIndex=r.seriesIndex,hu(v,K,q,rt);var Ft=Z5(r.get("smooth")),Pt=r.get("smoothMonotone");if(v.setShape({smooth:Ft,smoothMonotone:Pt,connectNulls:x}),m){var Ct=l.getCalculationInfo("stackedOnSeries"),Zt=0;m.useStyle(ie(c.getAreaStyle(),{fill:z,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Ct&&(Zt=Z5(Ct.get("smooth"))),m.setShape({smooth:Ft,stackedOnSmooth:Zt,smoothMonotone:Pt,connectNulls:x}),gp(m,r,"areaStyle"),le(m).seriesIndex=r.seriesIndex,hu(m,K,q,rt)}var Y=function(ot){o._changePolyState(ot)};l.eachItemGraphicEl(function(ot){ot&&(ot.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=s,this._stackedOnPoints=S,this._points=f,this._step=L,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,n){le(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var s=r.getData(),a=cu(s,o);if(this._changePolyState("emphasis"),!(a instanceof Array)&&a!=null&&a>=0){var l=s.getLayout("points"),u=s.getItemGraphicEl(a);if(!u){var c=l[a*2],f=l[a*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new O_(s,a),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,s.setItemGraphicEl(a,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else oi.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var s=r.getData(),a=cu(s,o);if(this._changePolyState("normal"),a!=null&&a>=0){var l=s.getItemGraphicEl(a);l&&(l.__temp?(s.setItemGraphicEl(a,null),this.group.remove(l)):l.downplay())}else oi.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;d3(this._polyline,r),n&&d3(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Lst({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Rst({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,s,a=n.getBaseAxis(),l=a.inverse;n.type==="cartesian2d"?(o=a.isHorizontal(),s=!1):n.type==="polar"&&(o=a.dim==="angle",s=!0);var u=r.hostModel,c=u.get("animationDuration");Ht(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ht(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,y=void 0,b=void 0;if(i)if(s){var w=i,T=n.pointToCoord(m);o?(g=w.startAngle,y=w.endAngle,b=-T[1]/180*Math.PI):(g=w.r0,y=w.r,b=T[0])}else{var S=i;o?(g=S.x,y=S.x+S.width,b=d.x):(g=S.y+S.height,y=S.y,b=d.y)}var k=y===g?0:(b-g)/(y-g);l&&(k=1-k);var x=Ht(f)?f(p):c*k+h,A=v.getSymbolPath(),I=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),I&&I.animateFrom({style:{opacity:0}},{duration:300,delay:x}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(K$(r)){var s=r.getData(),a=this._polyline,l=s.getLayout("points");if(!l){a.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new nr({z2:200}),u.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var c=Vst(l);c>=0&&(If(a,Cu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?W$(s,d):Cp(s,f)},enableTextSetter:!0},Wst(o,n)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,s,a,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=a.get("precision"),v=a.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,b=n.shape,w=y?g?b.x:b.y+b.height:g?b.x+b.width:b.y,T=(g?v:0)*(y?-1:1),S=(g?0:-v)*(y?-1:1),k=g?"x":"y",x=Ust(f,w,k),A=x.range,I=A[1]-A[0],L=void 0;if(I>=1){if(I>1&&!d){var N=K5(f,A[0]);u.attr({x:N[0]+T,y:N[1]+S}),s&&(L=h.getRawValue(A[0]))}else{var N=c.getPointOn(w,k);N&&u.attr({x:N[0]+T,y:N[1]+S});var z=h.getRawValue(A[0]),V=h.getRawValue(A[1]);s&&(L=fQ(i,p,z,V,x.t))}o.lastFrameIndex=A[0]}else{var F=r===1||o.lastFrameIndex>0?A[0]:0,N=K5(f,F);s&&(L=h.getRawValue(F)),u.attr({x:N[0]+T,y:N[1]+S})}s&&v_(u).setLabelText(L)}},t.prototype._doUpdateAnimation=function(r,n,i,o,s,a,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Ist(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(s&&(d=Hs(h.current,i,s,l),p=Hs(h.stackedOnCurrent,i,s,l),v=Hs(h.next,i,s,l),m=Hs(h.stackedOnNext,i,s,l)),q5(d,v)>3e3||c&&q5(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),u.stopAnimation(),yr(u,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),yr(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],b=h.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var S=r.getItemGraphicEl(b[w].idx1);S&&y.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,x=0;x<y.length;x++){var A=y[x].el,I=y[x].ptIdx*2;A.x=k[I],A.y=k[I+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,s){o.__temp&&(n.remove(o),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(oi);const Gst=jst;function JP(e,t){return{seriesType:e,plan:zP(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,s=t||o.large;if(!!i){var a=It(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=a.length,u=n.getCalculationInfo("stackResultDimension");vu(n,a[0])&&(a[0]=u),vu(n,a[1])&&(a[1]=u);var c=n.getStore(),f=n.getDimensionIndex(a[0]),h=n.getDimensionIndex(a[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,m=s&&fs(v*l),g=[],y=[],b=d.start,w=0;b<d.end;b++){var T=void 0;if(l===1){var S=c.get(f,b);T=i.dataToPoint(S,null,y)}else g[0]=c.get(f,b),g[1]=c.get(h,b),T=i.dataToPoint(g,null,y);s?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(b,T.slice())}s&&p.setLayout("points",m)}}}}}}var Hst={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Xst=function(e){return Math.round(e.length/2)};function J$(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),s=t.coordinateSystem,a=i.count();if(a>10&&s.type==="cartesian2d"&&o){var l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(a/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Mt(o)?p=Hst[o]:Ht(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Xst))}}}}}function xu(e){e.registerChartView(Gst),e.registerSeriesModel(Pst),e.registerLayout(JP("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,J$("line"))}var Q$=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return t0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),s=o.getLayout("offset"),a=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=s+a/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(No);No.registerClass(Q$);const J5=Q$;var Yst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return t0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=m_(J5.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(J5);const qst=Yst;var Zst=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Kst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new Zst},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r0||0,0),a=Math.max(n.r,0),l=(a-s)*.5,u=s+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),y=Math.sin(f);p?(r.moveTo(v*s+i,m*s+o),r.arc(v*u+i,m*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*a+i,m*a+o),r.arc(i,o,a,c,f,!h),r.arc(g*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),s!==0&&r.arc(i,o,s,f,c,h)},t}(pe);const Q5=Kst;function Jst(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var s=i.position;if(!s||s instanceof Array)return Hm(n,i,o);var a=e(s),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,y=r?Math.abs(h-d)/2:0,b=Math.cos,w=Math.sin,T=c+h*b(v),S=f+h*w(v),k="left",x="top";switch(a){case"startArc":T=c+(d-l)*b(g),S=f+(d-l)*w(g),k="center",x="top";break;case"insideStartArc":T=c+(d+l)*b(g),S=f+(d+l)*w(g),k="center",x="bottom";break;case"startAngle":T=c+p*b(v)+mv(v,l+y,!1),S=f+p*w(v)+_v(v,l+y,!1),k="right",x="middle";break;case"insideStartAngle":T=c+p*b(v)+mv(v,-l+y,!1),S=f+p*w(v)+_v(v,-l+y,!1),k="left",x="middle";break;case"middle":T=c+p*b(g),S=f+p*w(g),k="center",x="middle";break;case"endArc":T=c+(h+l)*b(g),S=f+(h+l)*w(g),k="center",x="bottom";break;case"insideEndArc":T=c+(h-l)*b(g),S=f+(h-l)*w(g),k="center",x="top";break;case"endAngle":T=c+p*b(m)+mv(m,l+y,!0),S=f+p*w(m)+_v(m,l+y,!0),k="left",x="middle";break;case"insideEndAngle":T=c+p*b(m)+mv(m,-l+y,!0),S=f+p*w(m)+_v(m,-l+y,!0),k="right",x="middle";break;default:return Hm(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=k,n.verticalAlign=x,n}}function Qst(e,t,r,n){if(Te(n)){e.setTextConfig({rotation:n});return}else if(pt(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,a=(o+s)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=a;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=s;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function mv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function _v(e,t,r){return t*Math.cos(e)*(r?1:-1)}var Jb=Math.max,Qb=Math.min;function tat(e,t){var r=e.getArea&&e.getArea();if(Rf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var eat=function(e){St(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var s=r.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){xf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var s=this.group,a=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=rat(r,u);d&&this._enableRealtimeSort(d,a,i);var p=r.get("clip",!0)||d,v=tat(u,a);s.removeClipPath();var m=r.get("roundCap",!0),g=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),b=y.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,k=o&&o.type==="changeAxisOrder";function x(L){var N=yv[u.type](a,L),z=uat(u,f,N);return z.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&z.setShape("r",b),w[L]=z,z}a.diff(l).add(function(L){var N=a.getItemModel(L),z=yv[u.type](a,L,N);if(g&&x(L),!(!a.hasValue(L)||!i6[u.type](z))){var V=!1;p&&(V=t6[u.type](v,z));var F=e6[u.type](r,a,L,z,f,h,c.model,!1,m);d&&(F.forceLabelAnimation=!0),o6(F,a,L,N,z,r,f,u.type==="polar"),S?F.attr({shape:z}):d?r6(d,h,F,z,L,f,!1,!1):Do(F,{shape:z},r,L),a.setItemGraphicEl(L,F),s.add(F),F.ignore=V}}).update(function(L,N){var z=a.getItemModel(L),V=yv[u.type](a,L,z);if(g){var F=void 0;T.length===0?F=x(N):(F=T[N],F.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",b),w[L]=F);var G=yv[u.type](a,L),K=ez(f,G,u);yr(F,{shape:K},h,L)}var q=l.getItemGraphicEl(N);if(!a.hasValue(L)||!i6[u.type](V)){s.remove(q);return}var rt=!1;if(p&&(rt=t6[u.type](v,V),rt&&s.remove(q)),q?ON(q):q=e6[u.type](r,a,L,V,f,h,c.model,!!q,m),d&&(q.forceLabelAnimation=!0),k){var At=q.getTextContent();if(At){var Ft=v_(At);Ft.prevValue!=null&&(Ft.prevValue=Ft.value)}}else o6(q,a,L,z,V,r,f,u.type==="polar");S?q.attr({shape:V}):d?r6(d,h,q,V,L,f,!0,k):yr(q,{shape:V},r,L,null),a.setItemGraphicEl(L,q),q.ignore=rt,s.add(q)}).remove(function(L){var N=l.getItemGraphicEl(L);N&&b3(N,r,L)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new Fe);A.removeAll();for(var I=0;I<w.length;++I)A.add(w[I]);s.add(A),this._backgroundEls=w,this._data=a},t.prototype._renderLarge=function(r,n,i){this._clear(),a6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),a6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&Z$(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var s=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var a=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(s.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,a,s,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(s,a){var l=i(a);l=l==null?NaN:l,o.push({dataIndex:a,mappedValue:l,ordinalNumber:s})}),o.sort(function(s,a){return a.mappedValue-s.mappedValue}),{ordinalNumbers:It(o,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,s=r.mapDimension(i.dim),a=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(s,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>a)return!0;a=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),s=Math.max(0,o[0]),a=Math.min(o[1],i.getOrdinalMeta().categories.length-1);s<=a;++s)if(r.ordinalNumbers[s]!==i.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var s=this._dataSort(r,i,n);this._isOrderDifferentInView(s,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,s=this._dataSort(r,o,function(a){return r.get(r.mapDimension(n.otherAxis.dim),a)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:s})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){b3(o,r,le(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(oi),t6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,s=Jb(t.x,e.x),a=Qb(t.x+t.width,i),l=Jb(t.y,e.y),u=Qb(t.y+t.height,o),c=a<s,f=u<l;return t.x=c&&s>i?a:s,t.y=f&&l>o?u:l,t.width=c?0:a-s,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=Qb(t.r,e.r),o=Jb(t.r0,e.r0);t.r=i,t.r0=o;var s=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return s}},e6={cartesian2d:function(e,t,r,n,i,o,s,a,l){var u=new rr({shape:ut({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,s,a,l){var u=!i&&l?Q5:Jp,c=new u({shape:n,z2:1});c.name="item";var f=tz(i);if(c.calculateTextPosition=Jst(f,{isRoundCap:u===Q5}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(a?yr:Do)(c,{shape:p},o)}return c}};function rat(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function r6(e,t,r,n,i,o,s,a){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),a||(s?yr:Do)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(s?yr:Do)(r,{shape:u},c,i)}function n6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var nat=["x","y","width","height"],iat=["cx","cy","r","startAngle","endAngle"],i6={cartesian2d:function(e){return!n6(e,nat)},polar:function(e){return!n6(e,iat)}},yv={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?sat(r,n):0,o=n.width>0?1:-1,s=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+s*i/2,width:n.width-o*i,height:n.height-s*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function oat(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function tz(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function o6(e,t,r,n,i,o,s,a){var l=t.getItemVisual(r,"style");a||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=a?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=Cu(n);If(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:Cp(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(a&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,Qst(e,d==="outside"?c:d,tz(s),n.get(["label","rotate"]))}Iet(h,f,o.getRawValue(r),function(v){return W$(t,v)});var p=n.getModel(["emphasis"]);hu(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),gp(e,n),oat(i)&&(e.style.fill="none",e.style.stroke="none",$(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function sat(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var aat=function(){function e(){}return e}(),s6=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new aat},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,s=1-this.baseDimIdx,a=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[s]=i[c+2],a[o]=i[c+o],a[s]=i[c+s],r.rect(a[0],a[1],l[0],l[1])},t}(pe);function a6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),a=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new s6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=s,c.barWidth=a,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new s6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=s,f.barWidth=a,t.add(f),f.useStyle(i.getVisual("style")),le(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",l6),f.on("mousemove",l6)),r&&r.push(f)}var l6=E_(function(e){var t=this,r=lat(t,e.offsetX,e.offsetY);le(t).dataIndex=r>=0?r:null},30,!1);function lat(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,s=e.largeDataIndices,a=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],a[n]=o[h+n],a[i]=o[h+i],l[i]<0&&(a[i]+=l[i],l[i]=-l[i]),t>=a[0]&&t<=a[0]+l[0]&&r>=a[1]&&r<=a[1]+l[1])return s[c]}return-1}function ez(e,t,r){if(Rf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function uat(e,t,r){var n=e.type==="polar"?Jp:rr;return new n({shape:ez(t,r,e),silent:!0,z2:0})}const cat=eat;function Df(e){e.registerChartView(cat),e.registerSeriesModel(qst),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,we(Iot,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Lot("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,J$("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var fat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return t0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(No);const hat=fat;var rz=4,dat=function(){function e(){}return e}(),pat=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new dat},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,s=this.symbolProxy,a=s.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<rz,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(a.x=h-o[0]/2,a.y=d-o[1]/2,a.width=o[0],a.height=o[1],s.buildPath(r,a,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,s=this.softClipShape,a;if(!!o){for(a=this._off;a<n.length;){var l=n[a++],u=n[a++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=a,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,s=i.size,a=Math.max(s[0],4),l=Math.max(s[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-a/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+a&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var s=this.hoverDataIdx=this.findDataIndex(r,n);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,s=o[0],a=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ce(l-s/2,u-a/2,c-l+s,f-u+a)}return r},t}(pe),vat=function(){function e(){this.group=new Fe}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var a=s.length,l=new Float32Array(a+o.length);l.set(s),l.set(o,a),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new pat({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Wi(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<rz;t.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var a=r.getVisual("style"),l=a&&a.fill;l&&t.setColor(l);var u=le(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const gat=vat;var mat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var s=JP("").reset(r,n,i);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,s=o.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new gat:new j$,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(oi);const _at=mat;var yat=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const bat=yat;var B3=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Li).models[0]},t.type="cartesian2dAxis",t}(Me);Hi(B3,nst);var nz={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},wat=ue({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},nz),QP=ue({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},nz),Sat=ue({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},QP),Tat=ie({logBase:10},QP);const kat={category:wat,value:QP,time:Sat,log:Tat};var Pat={value:1,category:1,time:1,log:1};function u6(e,t,r,n){$(Pat,function(i,o){var s=ue(ue({},kat[o],!0),n,!0),a=function(l){St(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=wp(this),d=h?T_(c):{},p=f.getTheme();ue(c,p.get(o+"Axis")),ue(c,this.getDefaultOption()),c.type=c6(c),h&&hf(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=N3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=s,u}(r);e.registerComponentModel(a)}),e.registerSubTypeDefaulter(t+"Axis",c6)}function c6(e){return e.type||(e.data?"category":"value")}var Cat=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return It(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Er(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Eat=Cat;var V3=["x","y"];function f6(e){return e.type==="interval"||e.type==="time"}var Aat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=V3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!f6(r)||!f6(n))){var i=r.getExtent(),o=n.getExtent(),s=this.dataToPoint([i[0],o[0]]),a=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(a[0]-s[0])/l,f=(a[1]-s[1])/u,h=s[0]-i[0]*c,d=s[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=s_([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),s=this.getArea(),a=new ce(i[0],i[1],o[0]-i[0],o[1]-i[1]);return s.intersect(a)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],s=r[1];if(this._transform&&o!=null&&isFinite(o)&&s!=null&&isFinite(s))return sn(i,r,this._transform);var a=this.getAxis("x"),l=this.getAxis("y");return i[0]=a.toGlobalCoord(a.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(s,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,s=i.getExtent(),a=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),n[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return sn(i,r,this._invTransform);var o=this.getAxis("x"),s=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=s.coordToData(s.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),s=Math.max(r[0],r[1])-i,a=Math.max(n[0],n[1])-o;return new ce(i,o,s,a)},t}(Eat),Mat=function(e){St(t,e);function t(r,n,i,o,s){var a=e.call(this,r,n,i)||this;return a.index=0,a.type=o||"value",a.position=s||"bottom",a}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(vst);const xat=Mat;function U3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},s=i.getAxesOnZeroOf()[0],a=i.position,l=s?"onZero":a,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(s){var v=s.toGlobalCoord(s.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=m[a],o.labelOffset=s?p[h[a]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Ii(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var g=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-g:g,o.z2=1,o}function h6(e){return e.get("coordinateSystem")==="cartesian2d"}function d6(e){var t={xAxisModel:null,yAxisModel:null};return $(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Li).models[0];t[n]=o}),t}var t2=Math.log;function Iat(e,t,r){var n=e0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),s=i.length-1,a=n.getInterval.call(r),l=D$(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=t2(e.base);u=[t2(u[0])/h,t2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:s,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],m=u[1];if(c&&f)p=(m-v)/s;else if(c)for(m=u[0]+p*s;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=Yb(p),m=u[0]+p*s;else if(f)for(v=u[1]-p*s;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=Yb(p),v=u[1]-p*s;else{var g=e.getTicks().length-1;g>s&&(p=Yb(p));var y=p*s;m=Math.ceil(u[1]/p)*p,v=tr(m-y),v<0&&u[0]>=0?(v=0,m=tr(y)):m>0&&u[1]<=0&&(m=0,v=-tr(y))}var b=(i[0].value-o[0].value)/a,w=(i[s].value-o[s].value)/a;n.setExtent.call(e,v+p*b,m+p*w),n.setInterval.call(e,p),(b||w)&&n.setNiceExtent.call(e,v+p,m-p)}var Lat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=V3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(s){var a,l=ge(s),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=s[h],p=d.model,v=d.scale;F3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(z5(v,p),F3(v)&&(a=d))}c.length&&(a||(a=c.pop(),z5(a.scale,a.model)),$(c,function(m){Iat(m.scale,m.model,a.scale)}))}}i(n.x),i(n.y);var o={};$(n.x,function(s){p6(n,"y",s,o)}),$(n.y,function(s){p6(n,"x",s,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),s=Ra(i,{width:r.getWidth(),height:r.getHeight()});this._rect=s;var a=this._axesList;l(),o&&($(a,function(u){if(!u.model.get(["axisLabel","inside"])){var c=tst(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);s[f]-=c[f]+h,u.position==="top"?s.y+=c.height+h:u.position==="left"&&(s.x+=c.width+h)}}}),l()),$(this._coordsList,function(u){u.calcAffineTransform()});function l(){$(a,function(u){var c=u.isHorizontal(),f=c?[0,s.width]:[0,s.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Oat(u,c?s.x:s.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Nt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Li).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Li).models[0],o=t.gridModel,s=this._coordsList,a,l;if(r)a=r.coordinateSystem,he(s,a)<0&&(a=null);else if(n&&i)a=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(a=this._coordsList[0])}return{cartesian:a,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,s={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,$(a.x,function(c,f){$(a.y,function(h,d){var p="x"+f+"y"+d,v=new Aat(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!e2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=s.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=s.left?"right":"left"),s[d]=!0;var p=new xat(c,Jot(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),a[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){$(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(h6(i)){var o=d6(i),s=o.xAxisModel,a=o.yAxisModel;if(!e2(s,r)||!e2(a,r))return;var l=this.getCartesian(s.componentIndex,a.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){$(rst(i,o.dim),function(s){o.scale.unionExtentFromData(i,s)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return $(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),s=i.getOtherAxis(o);he(r,o)<0&&r.push(o),he(n,s)<0&&n.push(s)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var s=new e(i,t,r);s.name="grid_"+o,s.resize(i,r,!0),i.coordinateSystem=s,n.push(s)}),t.eachSeries(function(i){if(!!h6(i)){var o=d6(i),s=o.xAxisModel,a=o.yAxisModel,l=s.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(s.componentIndex,a.componentIndex)}}),n},e.dimensions=V3,e}();function e2(e,t){return e.getCoordSysModel()===t}function p6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,s=r.model,a=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(l!=null)v6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&v6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function v6(e){return e&&e.type!=="category"&&e.type!=="time"&&Qot(e)}function Oat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Rat=Lat;var _a=Math.PI,eu=function(){function e(t,r){this.group=new Fe,this.opt=r,this.axisModel=t,ie(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Fe({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!g6[t]},e.prototype.add=function(t){g6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=z7(r-t),o,s;return Ym(i)?(s=n>0?"top":"bottom",o="center"):Ym(i-_a)?(s=n>0?"bottom":"top",o="center"):(s="middle",i>0&&i<_a?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:s}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),g6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),s=n.transform,a=[o[0],0],l=[o[1],0],u=a[0]>l[0];s&&(sn(a,a,s),sn(l,l,s));var c=ut({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Oa({shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});_p(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Mt(h)&&(h=[h,h]),(Mt(d)||Te(d))&&(d=[d,d]);var p=VP(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];$([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1]))}],function(g,y){if(h[y]!=="none"&&h[y]!=null){var b=Wi(h[y],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,T=u?l:a;b.attr({rotation:g.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(e,t,r,n){var i=Fat(r,n,t,e),o=zat(r,n,t,e);if(Nat(t,o,i),$at(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var s=gst(It(o,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));mst(s)}},axisName:function(e,t,r,n){var i=Ii(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),s=e.nameDirection,a=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,_6(o)?e.labelOffset+s*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*_a/180);var p;_6(o)?h=eu.innerTextLayout(e.rotation,d!=null?d:e.rotation,s):(h=Dat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=a.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,y=Ii(e.nameTruncateMaxWidth,m.maxWidth,p),b=new nr({x:f[0],y:f[1],rotation:h.rotation,silent:eu.isLabelSilent(t),style:yn(a,{text:i,font:v,overflow:"truncate",width:y,ellipsis:g,fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:a.get("align")||h.textAlign,verticalAlign:a.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(PP({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var w=eu.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,le(b).eventData=w}n.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function Dat(e,t,r,n){var i=z7(r-e),o,s,a=n[0]>n[1],l=t==="start"&&!a||t!=="start"&&a;return Ym(i-_a/2)?(s=l?"bottom":"top",o="center"):Ym(i-_a*1.5)?(s=l?"top":"bottom",o="center"):(s="middle",i<_a*1.5&&i>_a/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:s}}function Nat(e,t,r){if(!N$(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],s=t[1],a=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Un(o),Un(u)):m6(o,s)&&(n?(Un(s),Un(c)):(Un(o),Un(u))),i===!1?(Un(a),Un(f)):m6(l,a)&&(i?(Un(l),Un(h)):(Un(a),Un(f)))}}function Un(e){e&&(e.ignore=!0)}function m6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=rP([]);return nP(i,i,-e.rotation),r.applyTransform(Yc([],i,e.getLocalTransform())),n.applyTransform(Yc([],i,t.getLocalTransform())),r.intersect(n)}}function _6(e){return e==="middle"||e==="center"}function iz(e,t,r,n,i){for(var o=[],s=[],a=[],l=0;l<e.length;l++){var u=e[l].coord;s[0]=u,s[1]=0,a[0]=u,a[1]=r,t&&(sn(s,s,t),sn(a,a,t));var c=new Oa({shape:{x1:s[0],y1:s[1],x2:a[0],y2:a[1]},style:n,z2:2,autoBatch:!0,silent:!0});_p(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function Fat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),s=o.get("show");if(s==="auto"&&n.handleAutoShown&&(s=n.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var a=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=iz(u,t.transform,l,ie(a.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function $at(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(!!s.length)for(var a=o.getModel("lineStyle"),l=n*o.get("length"),u=ie(a.getLineStyle(),ie(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var f=iz(s[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function zat(e,t,r,n){var i=r.axis,o=Ii(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var s=r.getModel("axisLabel"),a=s.get("margin"),l=i.getViewLabels(),u=(Ii(n.labelRotate,s.get("rotate"))||0)*_a/180,c=eu.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=eu.isLabelSilent(r),p=r.get("triggerEvent");return $(l,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,b=v.rawLabel,w=s;if(f&&f[g]){var T=f[g];Nt(T)&&T.textStyle&&(w=new Mr(T.textStyle,s,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(g),x=new nr({x:k,y:n.labelOffset+n.labelDirection*a,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:yn(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ht(S)?S(i.type==="category"?b:i.type==="value"?g+"":g,m):S})});if(x.anid="label_"+g,p){var A=eu.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=b,A.tickIndex=m,i.type==="category"&&(A.dataIndex=g),le(x).eventData=A}t.add(x),x.updateTransform(),h.push(x),e.add(x),x.decomposeTransform()}),h}}const oz=eu;function Bat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Vat(r,e,t),r.seriesInvolved&&Wat(r,e),r}function Vat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],s=[];$(r.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var l=Ep(a.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=a;var c=a.model,f=c.getModel("tooltip",n);if($(a.getAxes(),we(v,!1,null)),a.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=a.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&$(p.baseAxes,we(v,d?"cross":!0,h)),d&&$(p.otherAxes,we(v,"cross",!1))}function v(m,g,y){var b=y.model.getModel("axisPointer",i),w=b.get("show");if(!(!w||w==="auto"&&!m&&!W3(b))){g==null&&(g=b.get("triggerTooltip")),b=m?Uat(y,f,i,t,m,g):b;var T=b.get("snap"),S=Ep(y.model),k=g||T||y.type==="category",x=e.axesInfo[S]={key:S,axis:y,coordSys:a,axisPointerModel:b,triggerTooltip:g,involveSeries:k,snap:T,useHandle:W3(b),seriesModels:[],linkGroup:null};u[S]=x,e.seriesInvolved=e.seriesInvolved||k;var A=jat(o,y);if(A!=null){var I=s[A]||(s[A]={axesInfo:{}});I.axesInfo[S]=x,I.mapper=o[A].mapper,x.linkGroup=I}}}})}function Uat(e,t,r,n,i,o){var s=t.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};$(a,function(h){l[h]=Ut(s.get(h))}),l.snap=e.type!=="category"&&!!o,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=s.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=s.get("crossStyle");f&&ie(u,f.textStyle)}}return e.model.getModel("axisPointer",new Mr(l,r,n))}function Wat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||$(e.coordSysAxesInfo[Ep(n.model)],function(s){var a=s.axis;n.getAxis(a.dim)===a&&(s.seriesModels.push(r),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=r.getData().count())})})}function jat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(r2(o[n+"AxisId"],r.id)||r2(o[n+"AxisIndex"],r.componentIndex)||r2(o[n+"AxisName"],r.name))return i}}function r2(e,t){return e==="all"||pt(e)&&he(e,t)>=0||e===t}function Gat(e){var t=tC(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),s=r.get("value");s!=null&&(s=n.parse(s));var a=W3(r);o==null&&(i.status=a?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,a&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function tC(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ep(e)]}function Hat(e){var t=tC(e);return t&&t.axisPointerModel}function W3(e){return!!e.get(["handle","show"])}function Ep(e){return e.type+"||"+e.id}var y6={},Xat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&Gat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var s=Hat(r);s?(this._axisPointer||(this._axisPointer=new o)).render(r,s,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){y6[r]=n},t.getAxisPointerClass=function(r){return r&&y6[r]},t.type="axis",t}(ui);const sz=Xat;var j3=Re();function Yat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),s=o.getModel("areaStyle"),a=s.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=a.length,f=j3(e).splitAreaColors,h=Yt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),g=s.getAreaStyle();a=pt(a)?a:[a];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),b=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(b=m,w=l.y,T=y-b,S=l.height,m=b+T):(b=l.x,w=m,T=l.width,S=y-w,m=w+S);var k=u[p-1].tickValue;k!=null&&h.set(k,d),t.add(new rr({anid:k!=null?"area_"+k:null,shape:{x:b,y:w,width:T,height:S},style:ie({fill:a[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}j3(e).splitAreaColors=h}}}function qat(e){j3(e).splitAreaColors=null}var Zat=["axisLine","axisTickLabel","axisName"],Kat=["splitArea","splitLine","minorSplitLine"],az=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Fe,this.group.add(this._axisGroup),!!r.get("show")){var a=r.getCoordSysModel(),l=U3(a,r),u=new oz(r,ut({handleAutoShown:function(f){for(var h=a.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(F3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));$(Zat,u.add,u),this._axisGroup.add(u.getGroup()),$(Kat,function(f){r.get([f,"show"])&&Jat[f](this,this._axisGroup,r,a)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||zN(s,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){qat(this)},t.type="cartesianAxis",t}(sz),Jat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),s=o.getModel("lineStyle"),a=s.get("color");a=pt(a)?a:[a];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=s.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var g=c++%a.length,y=f[v].tickValue,b=new Oa({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:ie({stroke:a[g]},p),silent:!0});_p(b.shape,p.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),s=o.getModel("lineStyle"),a=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=s.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=a.y,f[0]=v,f[1]=a.y+a.height):(c[0]=a.x,c[1]=v,f[0]=a.x+a.width,f[1]=v);var m=new Oa({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});_p(m.shape,h.lineWidth),t.add(m)}},splitArea:function(e,t,r,n){Yat(e,t,r,n)}},lz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(az),Qat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=lz.type,r}return t.type="yAxis",t}(az),tlt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new rr({shape:r.coordinateSystem.getRect(),style:ie({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ui),b6={offset:0};function uz(e){e.registerComponentView(tlt),e.registerComponentModel(bat),e.registerCoordinateSystem("cartesian2d",Rat),u6(e,"x",B3,b6),u6(e,"y",B3,b6),e.registerComponentView(lz),e.registerComponentView(Qat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Iu(e){br(uz),e.registerSeriesModel(hat),e.registerChartView(_at),e.registerLayout(JP("scatter"))}var w6="\0_ec_interaction_mutex";function S6(e,t){return!!elt(e)[t]}function elt(e){return e[w6]||(e[w6]={})}Au({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Yr);var rlt=function(e){St(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=jt(n._mousedownHandler,n),o=jt(n._mousemoveHandler,n),s=jt(n._mouseupHandler,n),a=jt(n._mousewheelHandler,n),l=jt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=ie(Ut(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",s)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",a),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",s),r.off("mousewheel",a),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!c4(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!um("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||S6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,s=this._y,a=n-o,l=i-s;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&uu(r.event),cz(this,"pan","moveOnMouseMove",r,{dx:a,dy:l,oldX:o,oldY:s,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){c4(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=um("zoomOnMouseWheel",r,this._opt),i=um("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,s=Math.abs(o),a=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=s>3?1.4:s>1?1.2:1.1,c=o>0?u:1/u;n2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:a,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);n2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:a,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!S6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;n2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Xi);function n2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(uu(n.event),cz(e,t,r,n,i))}function cz(e,t,r,n,i){i.isAvailableBehavior=jt(um,null,r,n),e.trigger(t,i)}function um(e,t,r){var n=r[e];return!e||n&&(!Mt(n)||t.event[n+"Key"])}const nlt=rlt;function ilt(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function olt(e,t,r,n){var i=e.target,o=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,o){var a=o.min||0,l=o.max||1/0;s=Math.max(Math.min(l,s),a)}var u=s/e.zoom;e.zoom=s,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var slt={axisPointer:1,tooltip:1,brush:1};function alt(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!slt.hasOwnProperty(n.mainType)&&i&&i.model!==r}var T6=sn,llt=function(e){St(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Vl,n._rawTransformable=new Vl,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ce(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ce(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var s=this.getBoundingRect(),a=this._rawTransformable;a.transform=s.calculateTransform(new ce(r,n,i,o));var l=a.parent;a.parent=null,a.decomposeTransform(),a.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[Ke(r[0],n.getWidth()),Ke(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),s=this.getZoom();o=sn([],o,r),i=sn([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=s,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),m7(this.transform||(this.transform=[]),n.transform||ff()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],s_(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Vl;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?T6(i,r,o):_K(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?T6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=k6(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=k6(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Vl);function k6(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const ult=llt;function P6(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function clt(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),s=t.zoom,a=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(a[0]-=t.dx,a[1]-=t.dy,e.setCenter(P6(e,a),n)),s!=null){if(r){var l=r.min||0,u=r.max||1/0;s=Math.max(Math.min(i*s,u),l)/i}e.scaleX*=s,e.scaleY*=s;var c=(t.originX-e.x)*(s-1),f=(t.originY-e.y)*(s-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(P6(e,a),n),e.setZoom(s*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function flt(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,s=o-1;s>=0;s--){var a=i[s];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},r.push(a)}}function hlt(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){vlt(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=glt(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function dlt(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function C6(e){return arguments.length?e:ylt}function md(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function plt(e,t){return Ra(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function vlt(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function glt(e,t,r,n){if(t){for(var i=e,o=e,s=o.parentNode.children[0],a=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=s.hierNode.modifier,f=a.hierNode.modifier;a=i2(a),o=o2(o),a&&o;){i=i2(i),s=o2(s),i.hierNode.ancestor=e;var h=a.hierNode.prelim+f-o.hierNode.prelim-u+n(a,o);h>0&&(_lt(mlt(a,e,r),e,h),u+=h,l+=h),f+=a.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=s.hierNode.modifier}a&&!i2(i)&&(i.hierNode.thread=a,i.hierNode.modifier+=f-l),o&&!o2(s)&&(s.hierNode.thread=o,s.hierNode.modifier+=u-c,r=e)}return r}function i2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function o2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function mlt(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function _lt(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function ylt(e,t){return e.parentNode===t.parentNode?1:2}var blt=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),wlt=function(e){St(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new blt},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,s=n.parentPoint,a=i[0],l=i[o-1];if(o===1){r.moveTo(s[0],s[1]),r.lineTo(a[0],a[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=Ke(n.forkPosition,1),d=[];d[c]=s[c],d[f]=s[f]+(l[f]-s[f])*h,r.moveTo(s[0],s[1]),r.lineTo(d[0],d[1]),r.moveTo(a[0],a[1]),d[c]=a[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(pe),Slt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Fe,r}return t.prototype.init=function(r,n){this._controller=new nlt(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),s=r.layoutInfo,a=this._mainGroup,l=r.get("layout");l==="radial"?(a.x=s.x+s.width/2,a.y=s.y+s.height/2):(a.x=s.x,a.y=s.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){E6(o,c)&&A6(o,c,null,a,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!E6(o,c)){h&&x6(u,f,h,a,r);return}A6(o,c,h,a,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&x6(u,c,f,a,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var s=[],a=[];NQ(o,s,a);var l=this._min,u=this._max;a[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,a[0]=u?u[0]:a[0]+1),a[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,a[1]=u?u[1]:a[1]+1);var c=r.coordinateSystem=new ult;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(s[0],s[1],a[0]-s[0],a[1]-s[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=s,this._max=a},t.prototype._updateController=function(r,n,i){var o=this,s=this._controller,a=this._controllerHost,l=this.group;s.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!alt(u,i,r)}),s.enable(r.get("roam")),a.zoomLimit=r.get("scaleLimit"),a.zoom=r.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(u){ilt(a,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){olt(a,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,s){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,s=n.getZoom(),a=(s-1)*i+1;return a/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(oi);function E6(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function A6(e,t,r,n,i){var o=!r,s=e.tree.getNodeByDataIndex(t),a=s.getModel(),l=s.getVisual("style").fill,u=s.isExpand===!1&&s.children.length!==0?l:"#fff",c=e.tree.root,f=s.parentNode===c?s:s.parentNode||s,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=s.getLayout();o?(r=new O_(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,yr(r,{x:v.x,y:v.y},i);var m=r.getSymbolPath();if(i.get("layout")==="radial"){var g=c.children[0],y=g.getLayout(),b=g.children.length,w=void 0,T=void 0;if(v.x===y.x&&s.isExpand===!0&&g.children.length){var S={x:(g.children[0].getLayout().x+g.children[b-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[b-1].getLayout().y)/2};w=Math.atan2(S.y-y.y,S.x-y.x),w<0&&(w=Math.PI*2+w),T=S.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-y.y,v.x-y.x),w<0&&(w=Math.PI*2+w),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(T=v.x<y.x,T&&(w=w-Math.PI)):(T=v.x>y.x,T||(w=w-Math.PI));var k=T?"left":"right",x=a.getModel("label"),A=x.get("rotate"),I=A*(Math.PI/180),L=m.getTextContent();L&&(m.setTextConfig({position:x.get("position")||k,rotation:A==null?-w:I,origin:"center"}),L.setStyle("verticalAlign","middle"))}var N=a.get(["emphasis","focus"]),z=N==="relative"?d7(s.getAncestorsIndices(),s.getDescendantIndices()):N==="ancestor"?s.getAncestorsIndices():N==="descendant"?s.getDescendantIndices():null;z&&(le(r).focus=z),Tlt(i,s,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(V){if(V!=="blur"){var F=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);F&&F.hoverState===Kp||d3(r.__edge,V)}})}function Tlt(e,t,r,n,i,o,s,a){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new h_({shape:G3(c,f,h,i,i)})),yr(v,{shape:G3(c,f,h,o,s)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,g=[],y=0;y<m.length;y++){var b=m[y].getLayout();g.push([b.x,b.y])}v||(v=n.__edge=new wlt({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:f,forkPosition:d}})),yr(v,{shape:{parentPoint:[s.x,s.y],childPoints:g}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(ie({strokeNoScale:!0,fill:null},p)),gp(v,l,"lineStyle"),vP(v),a.add(v))}function M6(e,t,r,n,i){var o=t.tree.root,s=fz(o,e),a=s.source,l=s.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(a.dataIndex),f=c.__edge,h=u.__edge||(a.isExpand===!1||a.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),m=n.get(["lineStyle","curveness"]);h&&(d==="curve"?du(h,{shape:G3(p,v,m,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&du(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function fz(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function x6(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),s=e.tree.root,a=fz(s,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};du(r,{x:a.x+1,y:a.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){M6(u,e,n,i,l)}),M6(o,e,n,i,l)}function G3(e,t,r,n,i){var o,s,a,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=md(u,f),p=md(u,f+(h-f)*r),v=md(c,h+(f-h)*r),m=md(c,h);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,s=f,a=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,s=f+(h-f)*r,a=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:s,cpx2:a,cpy2:l}}const klt=Slt;var si=Re();function Plt(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,hz(t,r,e),$(r,function(n){$(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,we(Clt,e))})}),t.wrapMethod("cloneShallow",we(Alt,e)),$(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,we(Elt,e))}),Ui(r[t.dataType]===t)}function Clt(e,t){if(Ilt(this)){var r=ut({},si(this).datas);r[this.dataType]=t,hz(t,r,e)}else eC(t,this.dataType,si(this).mainData,e);return t}function Elt(e,t){return e.struct&&e.struct.update(),t}function Alt(e,t){return $(si(t).datas,function(r,n){r!==t&&eC(r.cloneShallow(),n,t,e)}),t}function Mlt(e){var t=si(this).mainData;return e==null||t==null?t:si(t).datas[e]}function xlt(){var e=si(this).mainData;return e==null?[{data:e}]:It(ge(si(e).datas),function(t){return{type:t,data:si(e).datas[t]}})}function Ilt(e){return si(e).mainData===e}function hz(e,t,r){si(e).datas={},$(t,function(n,i){eC(n,i,e,r)})}function eC(e,t,r,n){si(r).datas[t]=e,si(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Mlt,e.getLinkedDataAll=xlt}var Llt=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ht(t)&&(n=r,r=t,t=null),t=t||{},Mt(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],s;i==="preorder"&&(s=r.call(n,this));for(var a=0;!s&&a<o.length;a++)o[a].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Olt=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],s=1;a(t);function a(c,f){var h=c.value;s=Math.max(s,pt(h)?h.length:1),o.push(c);var d=new Llt(ii(c.name,""),i);f?Rlt(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)a(p[v],d)}i.root.updateDepthAndHeight(0);var l=b$(o,{coordDimensions:["value"],dimensionsCount:s}).dimensions,u=new Ql(l,r);return u.initData(o),n&&n(u),Plt({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Rlt(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const Dlt=Olt;function Nlt(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Flt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Mr(i,this,this.ecModel),s=Dlt.createTree(n,this,a);function a(f){f.wrapMethod("getItemModel",function(h,d){var p=s.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;s.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return s.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),s.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,s=o.root.children[0],a=o.getNodeByDataIndex(r),l=a.getValue(),u=a.name;a&&a!==s;)u=a.parentNode.name+"."+u,a=a.parentNode;return Da("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=Nlt(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(No);const $lt=Flt;function zlt(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var s=o.children;if(s.length)for(var a=0;a<s.length;a++)n.push(s[a])}for(;o=i.pop();)t(o,r)}function xh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function Blt(e,t){e.eachSeriesByType("tree",function(r){Vlt(r,t)})}function Vlt(e,t){var r=plt(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,s=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,s=C6(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(i=r.width,o=r.height,s=C6());var a=e.getData().tree.root,l=a.children[0];if(l){flt(a),zlt(l,hlt,s),a.hierNode.modifier=-l.hierNode.prelim,xh(l,dlt);var u=l,c=l,f=l;xh(l,function(b){var w=b.getLayout().x;w<u.getLayout().x&&(u=b),w>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var h=u===c?1:s(u,c)/2,d=h-u.getLayout().x,p=0,v=0,m=0,g=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),xh(l,function(b){m=(b.getLayout().x+d)*p,g=(b.depth-1)*v;var w=md(m,g);b.setLayout({x:w.x,y:w.y,rawX:m,rawY:g},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),xh(l,function(b){g=(b.getLayout().x+d)*v,m=y==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:m,y:g},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),xh(l,function(b){m=(b.getLayout().x+d)*p,g=y==="TB"?(b.depth-1)*v:o-(b.depth-1)*v,b.setLayout({x:m,y:g},!0)}))}}}function Ult(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),s=o.getModel("itemStyle").getItemStyle(),a=r.ensureUniqueItemVisual(i.dataIndex,"style");ut(a,s)})})}function Wlt(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,s=o.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,s=clt(o,t,void 0,n);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}function jlt(e){e.registerChartView(klt),e.registerSeriesModel($lt),e.registerLayout(Blt),e.registerVisual(Ult),Wlt(e)}var Ap=$,Glt=Nt,a1=-1,rC=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=Ut(t);this.type=n,this.mappingMethod=r,this._normalizeData=Ylt[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(s2(i),Hlt(i)):r==="category"?i.categories?Xlt(i):s2(i,!0):(Ui(r!=="linear"||i.dataExtent),s2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return jt(this._normalizeData,this)},e.listVisualTypes=function(){return ge(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Nt(t)?$(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=pt(t)?[]:Nt(t)?{}:(i=!0,null);return e.eachVisual(t,function(s,a){var l=r.call(n,s,a);i?o=l:o[a]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&Ap(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(pt(t))t=t.slice();else if(Glt(t)){var r=[];Ap(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,s=0,a=r.length;s<a;s++){var l=r[s].value;if(l!=null){if(l===t||Mt(l)&&l===t+"")return s;n&&h(l,s)}}for(var s=0,a=r.length;s<a;s++){var u=r[s],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(wv(f[1],t,c[1]))return s}else if(c[1]===1/0){if(wv(f[0],c[0],t))return s}else if(wv(f[0],c[0],t)&&wv(f[1],t,c[1]))return s;n&&h(c[0],s),n&&h(c[1],s)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:Ih("color"),getColorMapper:function(){var t=this.option;return jt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),_d.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=Ky(r,t.parsedVisual,i),o?i:vs(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return vs(Ky(t,this.option.parsedVisual),"rgba")},category:_d,piecewise:function(t,r){var n=X3.call(this,r);return n==null&&(n=vs(Ky(t,this.option.parsedVisual),"rgba")),n},fixed:Dl}},colorHue:bv(function(t,r){return Jy(t,r)}),colorSaturation:bv(function(t,r){return Jy(t,null,r)}),colorLightness:bv(function(t,r){return Jy(t,null,null,r)}),colorAlpha:bv(function(t,r){return QS(t,r)}),decal:{applyVisual:Ih("decal"),_normalizedToVisual:{linear:null,category:_d,piecewise:null,fixed:null}},opacity:{applyVisual:Ih("opacity"),_normalizedToVisual:H3([0,1])},liftZ:{applyVisual:Ih("liftZ"),_normalizedToVisual:{linear:Dl,category:Dl,piecewise:Dl,fixed:Dl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:I6,category:_d,piecewise:function(t,r){var n=X3.call(this,r);return n==null&&(n=I6.call(this,t)),n},fixed:Dl}},symbolSize:{applyVisual:Ih("symbolSize"),_normalizedToVisual:H3([0,1])}},e}();function Hlt(e){var t=e.pieceList;e.hasSpecialVisual=!1,$(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Xlt(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(Ap(t,function(s,a){r[s]=a}),!pt(n)){var i=[];Nt(n)?Ap(n,function(s,a){var l=r[a];i[l!=null?l:a1]=s}):i[a1]=n,n=dz(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function s2(e,t){var r=e.visual,n=[];Nt(r)?Ap(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),dz(e,n)}function bv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:H3([0,1])}}function I6(e){var t=this.option.visual;return t[Math.round(bs(e,[0,1],[0,t.length-1],!0))]||{}}function Ih(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function _d(e){var t=this.option.visual;return t[this.option.loop&&e!==a1?e%t.length:e]}function Dl(){return this.option.visual[0]}function H3(e){return{linear:function(t){return bs(t,e,this.option.visual,!0)},category:_d,piecewise:function(t,r){var n=X3.call(this,r);return n==null&&(n=bs(t,e,this.option.visual,!0)),n},fixed:Dl}}function X3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=rC.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function dz(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=It(t,function(r){var n=ni(r);return n||[0,0,0,1]})),t}var Ylt={linear:function(e){return bs(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=rC.findPieceIndex(e,t,!0);if(r!=null)return bs(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?a1:t},fixed:Yr};function wv(e,t,r){return e?t<=r:t<r}const bn=rC;var L6=Oa.prototype,a2=h_.prototype,pz=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(pz);function l2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var qlt=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new pz},t.prototype.buildPath=function(r,n){l2(n)?L6.buildPath.call(this,r,n):a2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return l2(this.shape)?L6.pointAt.call(this,r):a2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=l2(n)?[n.x2-n.x1,n.y2-n.y1]:a2.tangentAt.call(this,r);return tP(i,i)},t}(pe);const Zlt=qlt;var u2=["fromSymbol","toSymbol"];function O6(e){return"_"+e+"Type"}function R6(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),s=t.getItemVisual(r,e+"Offset"),a=t.getItemVisual(r,e+"KeepAspect"),l=jF(i),u=VP(s||0,l),c=Wi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,a);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function Klt(e){var t=new Zlt({name:"line",subPixelOptimize:!0});return Y3(t.shape,e),t}function Y3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Jlt=function(e){St(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,s=r.getItemLayout(n),a=Klt(s);a.shape.percent=0,Do(a,{shape:{percent:1}},o,n),this.add(a),$(u2,function(l){var u=R6(l,r,n);this.add(u),this[O6(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=r.getItemLayout(n),l={shape:{}};Y3(l.shape,a),yr(s,l,o,n),$(u2,function(u){var c=r.getItemVisual(n,u),f=O6(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=R6(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");a=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=Cu(p)}var m=r.getItemVisual(n,"style"),g=m.stroke;s.useStyle(m),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=a,s.ensureState("blur").style=l,s.ensureState("select").style=u,$(u2,function(S){var k=this.childOfName(S);if(k){k.setColor(g),k.style.opacity=m.opacity;for(var x=0;x<li.length;x++){var A=li[x],I=s.getState(A);if(I){var L=I.style||{},N=k.ensureState(A),z=N.style||(N.style={});L.stroke!=null&&(z[k.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(z.opacity=L.opacity)}}k.markRedraw()}},this);var y=o.getRawValue(n);If(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,k){return o.getFormattedLabel(S,k,r.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?tr(y):y)+""});var b=this.getTextContent();if(b){var w=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");pt(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),hu(this,h,d,f)},t.prototype.highlight=function(){pp(this)},t.prototype.downplay=function(){vp(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");Y3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var s=1,a=this.parent;a;)a.scaleX&&(s/=a.scaleX),a=a.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=v7([],f,c);tP(h,h);function d(I,L){var N=I.__specifiedRotation;if(N==null){var z=l.tangentAt(L);I.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(z[1],z[0]))}else I.attr("rotation",N)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=s*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=s*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,m=o.__labelDistance,g=m[0]*s,y=m[1]*s,b=u/2,w=l.tangentAt(b),T=[w[1],-w[0]],S=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var x=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(x=Math.PI+x),o.rotation=x}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*g+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*g+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=g*k+c[0],o.y=c[1]+A,p=w[0]<0?"right":"left",o.originX=-g*k,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-g*k+f[0],o.y=f[1]+A,p=w[0]>=0?"right":"left",o.originX=g*k,o.originY=-A;break}o.scaleX=o.scaleY=s,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(Fe);const Qlt=Jlt;var tut=function(){function e(t){this.group=new Fe,this._LineCtor=t||Qlt}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var s=D6(t);t.diff(o).add(function(a){r._doAdd(t,a,s)}).update(function(a,l){r._doUpdate(o,t,l,a,s)}).remove(function(a){i.remove(o.getItemGraphicEl(a))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=D6(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(a){!a.isGroup&&!eut(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(c2(o)){var s=new this._LineCtor(r,i,this._seriesScope);s.traverse(n),this.group.add(s),r.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){xf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!c2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var s=t.getItemGraphicEl(n);if(!c2(r.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(r,i,o):s=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,s),this.group.add(s)},e}();function eut(e){return e.animators&&e.animators.length>0}function D6(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Cu(t)}}function N6(e){return isNaN(e[0])||isNaN(e[1])}function c2(e){return e&&!N6(e[0])&&!N6(e[1])}const rut=tut;function nut(e,t,r,n,i,o){e=e||0;var s=r[1]-r[0];if(i!=null&&(i=lc(i,[0,s])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var a=Math.abs(t[1]-t[0]);a=lc(a,[0,s]),i=o=lc(a,[i,o]),n=0}t[0]=lc(t[0],r),t[1]=lc(t[1],r);var l=f2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=lc(t[n],c);var f;return f=f2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=f2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function f2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function lc(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var F6={color:"fill",borderColor:"stroke"},iut={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},gs=Re(),out=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return t0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=gs(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(No);const sut=out;function aut(e,t){return t=t||[0,0],It(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],s=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-s)-i.dataToCoord(o+s))},this)}function lut(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:jt(aut,e)}}}function uut(e,t){return t=t||[0,0],It([0,1],function(r){var n=t[r],i=e[r]/2,o=[],s=[];return o[r]=n-i,s[r]=n+i,o[1-r]=s[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(s)[r])},this)}function cut(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:jt(uut,e)}}}function fut(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function hut(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:jt(fut,e)}}}function dut(e,t){return t=t||[0,0],It(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),s=t[n],a=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-a)-o.dataToCoord(s+a));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function put(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),s=r.dataToAngle(i[1]),a=e.coordToPoint([o,s]);return a.push(o,s*Math.PI/180),a},size:jt(dut,e)}}}function vut(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function gut(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||_t(e,"text")))}function mut(e,t,r){var n=e,i,o,s;if(t==="text")s=n;else{s={},_t(n,"text")&&(s.text=n.text),_t(n,"rich")&&(s.rich=n.rich),_t(n,"textFill")&&(s.fill=n.textFill),_t(n,"textStroke")&&(s.stroke=n.textStroke),_t(n,"fontFamily")&&(s.fontFamily=n.fontFamily),_t(n,"fontSize")&&(s.fontSize=n.fontSize),_t(n,"fontStyle")&&(s.fontStyle=n.fontStyle),_t(n,"fontWeight")&&(s.fontWeight=n.fontWeight),o={type:"text",style:s,silent:!0},i={};var a=_t(n,"textPosition");r?i.position=a?n.textPosition:"inside":a&&(i.position=n.textPosition),_t(n,"textPosition")&&(i.position=n.textPosition),_t(n,"textOffset")&&(i.offset=n.textOffset),_t(n,"textRotation")&&(i.rotation=n.textRotation),_t(n,"textDistance")&&(i.distance=n.textDistance)}return $6(s,e),$(s.rich,function(l){$6(l,l)}),{textConfig:i,textContent:o}}function $6(e,t){!t||(t.font=t.textFont||t.font,_t(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),_t(t,"textAlign")&&(e.align=t.textAlign),_t(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),_t(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),_t(t,"textWidth")&&(e.width=t.textWidth),_t(t,"textHeight")&&(e.height=t.textHeight),_t(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),_t(t,"textPadding")&&(e.padding=t.textPadding),_t(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),_t(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),_t(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),_t(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),_t(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),_t(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),_t(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function z6(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";B6(n,t);var s=n.textFill==null;return i?s&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(s&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,$(t.rich,function(a){B6(a,a)}),n}function B6(e,t){!t||(_t(t,"fill")&&(e.textFill=t.fill),_t(t,"stroke")&&(e.textStroke=t.fill),_t(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),_t(t,"font")&&(e.font=t.font),_t(t,"fontStyle")&&(e.fontStyle=t.fontStyle),_t(t,"fontWeight")&&(e.fontWeight=t.fontWeight),_t(t,"fontSize")&&(e.fontSize=t.fontSize),_t(t,"fontFamily")&&(e.fontFamily=t.fontFamily),_t(t,"align")&&(e.textAlign=t.align),_t(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),_t(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),_t(t,"width")&&(e.textWidth=t.width),_t(t,"height")&&(e.textHeight=t.height),_t(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),_t(t,"padding")&&(e.textPadding=t.padding),_t(t,"borderColor")&&(e.textBorderColor=t.borderColor),_t(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),_t(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),_t(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),_t(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),_t(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),_t(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),_t(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),_t(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),_t(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),_t(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var vz={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},V6=ge(vz);ku(Ro,function(e,t){return e[t]=1,e},{});Ro.join(", ");var l1=["","style","shape","extra"],pf=Re();function nC(e,t,r,n,i){var o=e+"Animation",s=SP(e,n,i)||{},a=pf(t).userDuring;return s.duration>0&&(s.during=a?jt(kut,{el:t,userDuring:a}):null,s.setToFinal=!0,s.scope=e),ut(s,r[o]),s}function _ut(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,s=n.clearStyle,a=r.isAnimationEnabled(),l=pf(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Cut(e,t,f),W6("shape",t,f),W6("extra",t,f),!o&&a&&(Put(e,t,c),U6("shape",e,t,c),U6("extra",e,t,c),Eut(e,t,u,c)),f.style=u,but(e,f,s),Sut(e,t),a)if(o){var h={};$(l1,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ut(p?h[p]:h,v.enterFrom))});var d=nC("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else wut(e,t,i||0,r,c);yut(e,t),u?e.dirty():e.markRedraw()}function yut(e,t){for(var r=pf(e).leaveToProps,n=0;n<l1.length;n++){var i=l1[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=pf(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ut(i?r[i]:r,o.leaveTo))}}function iC(e,t,r,n){if(e){var i=e.parent,o=pf(e).leaveToProps;if(o){var s=nC("update",e,t,r,0);s.done=function(){i.remove(e),n&&n()},e.animateTo(o,s)}else i.remove(e),n&&n()}}function tf(e){return e==="all"}function but(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var s=i[o];s.targetName==="style"&&s.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function wut(e,t,r,n,i){if(i){var o=nC("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Sut(e,t){_t(t,"silent")&&(e.silent=t.silent),_t(t,"ignore")&&(e.ignore=t.ignore),e instanceof Pu&&_t(t,"invisible")&&(e.invisible=t.invisible),e instanceof pe&&_t(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var yo={},Tut={setTransform:function(e,t){return yo.el[e]=t,this},getTransform:function(e){return yo.el[e]},setShape:function(e,t){var r=yo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=yo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=yo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=yo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=yo.el.extra||(yo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=yo.el.extra;if(t)return t[e]}};function kut(){var e=this,t=e.el;if(!!t){var r=pf(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}yo.el=t,n(Tut)}}function U6(e,t,r,n){var i=r[e];if(!!i){var o=t[e],s;if(o){var a=r.transition,l=i.transition;if(l)if(!s&&(s=n[e]={}),tf(l))ut(s,o);else for(var u=er(l),c=0;c<u.length;c++){var f=u[c],h=o[f];s[f]=h}else if(tf(a)||he(a,e)>=0){!s&&(s=n[e]={});for(var d=ge(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Aut(i[f],h)&&(s[f]=h)}}}}}function W6(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ge(n),s=0;s<o.length;s++){var a=o[s];i[a]=Nd(n[a])}}function Put(e,t,r){for(var n=t.transition,i=tf(n)?Ro:er(n||[]),o=0;o<i.length;o++){var s=i[o];if(!(s==="style"||s==="shape"||s==="extra")){var a=e[s];r[s]=a}}}function Cut(e,t,r){for(var n=0;n<V6.length;n++){var i=V6[n],o=vz[i],s=t[i];s&&(r[o[0]]=s[0],r[o[1]]=s[1])}for(var n=0;n<Ro.length;n++){var a=Ro[n];t[a]!=null&&(r[a]=t[a])}}function Eut(e,t,r,n){if(!!r){var i=e.style,o;if(i){var s=r.transition,a=t.transition;if(s&&!tf(s)){var l=er(s);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(tf(a)||tf(s)||he(a,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ge(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Aut(e,t){return Zr(e)?e!==t:e!=null&&isFinite(e)}var gz=Re(),Mut=["percent","easing","shape","style","extra"];function xut(e){e.stopAnimation("keyframe"),e.attr(gz(e))}function mz(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(pt(t)){$(t,function(a){mz(e,a,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=SP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var s=gz(e);$(l1,function(a){if(!(a&&!e[a])){var l;n.sort(function(u,c){return u.percent-c.percent}),$(n,function(u){var c=e.animators,f=a?u[a]:u;if(!!f){var h=ge(f);if(a||(h=Er(h,function(v){return he(Mut,v)<0})),!!h.length){l||(l=e.animate(a,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);a&&(s[a]=s[a]||{});var p=a?s[a]:s;$(h,function(v){p[v]=((a?e[a]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var ms="emphasis",ya="normal",oC="blur",sC="select",Na=[ya,ms,oC,sC],h2={normal:["itemStyle"],emphasis:[ms,"itemStyle"],blur:[oC,"itemStyle"],select:[sC,"itemStyle"]},d2={normal:["label"],emphasis:[ms,"label"],blur:[oC,"label"],select:[sC,"label"]},Iut=["x","y"],Lut="e\0\0",Wn={normal:{},emphasis:{},blur:{},select:{}},Out={cartesian2d:lut,geo:cut,single:hut,polar:put,calendar:vut};function q3(e){return e instanceof pe}function Z3(e){return e instanceof Pu}function Rut(e,t){t.copyTransform(e),Z3(t)&&Z3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,q3(t)&&q3(e)&&t.setShape(e.shape))}var Dut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var s=this._data,a=r.getData(),l=this.group,u=j6(r,a,n,i);s||l.removeAll(),a.diff(s).add(function(f){p2(i,null,f,u(f,o),r,l,a)}).remove(function(f){var h=s.getItemGraphicEl(f);h&&iC(h,gs(h).option,r)}).update(function(f,h){var d=s.getItemGraphicEl(h);p2(i,d,f,u(f,o),r,l,a)}).execute();var c=r.get("clip",!0)?Z$(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,s){var a=n.getData(),l=j6(n,a,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=p2(null,null,f,l(f,s),n,this.group,a);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){xf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var s=n.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},t.type="custom",t}(oi);const Nut=Dut;function aC(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=bz(n);r=d_(o,null,i,n.layout||"center"),gs(r).customPathData=o}else if(t==="image")r=new Ms({}),gs(r).customImagePath=e.style.image;else if(t==="text")r=new nr({});else if(t==="group")r=new Fe;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=RN(t);if(!s){var a="";se(a)}r=new s}return gs(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function lC(e,t,r,n,i,o,s){xut(t);var a=i&&i.normal.cfg;a&&t.setTextConfig(a),n&&n.transition==null&&(n.transition=Iut);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;_t(u,"textFill")&&(u.fill=u.textFill),_t(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=q3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=i1(f,e)),l.__decalPattern=c}if(Z3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}_ut(t,n,o,{dataIndex:r,isInit:s,clearStyle:!0}),mz(t,n.keyframeAnimation,o)}function _z(e,t,r,n,i){var o=t.isGroup?null:t,s=i&&i[e].cfg;if(o){var a=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else a.style=n||null;s&&(a.textConfig=s),vP(o)}}function Fut(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var s=t.z2;s!=null&&(n.z2=s||0);for(var a=0;a<Na.length;a++)$ut(n,t,Na[a])}}function $ut(e,t,r){var n=r===ya,i=n?t:u1(t,r),o=i?i.z2:null,s;o!=null&&(s=n?e:e.ensureState(r),s.z2=o||0)}function j6(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,s={};o&&(s=o.prepareCustoms?o.prepareCustoms(o):Out[o.type](o));for(var a=ie({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:k,visual:I,barLayout:L,currentSeriesIndices:N,font:z},s.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:zut(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Na.length;v++){var m=Na[v];d[m]=e.getModel(h2[m]),p[m]=e.getModel(d2[m])}function g(V){return V===u?c||(c=t.getItemModel(V)):t.getItemModel(V)}function y(V,F){return t.hasItemOption?V===u?f[F]||(f[F]=g(V).getModel(h2[F])):g(V).getModel(h2[F]):d[F]}function b(V,F){return t.hasItemOption?V===u?h[F]||(h[F]=g(V).getModel(d2[F])):g(V).getModel(d2[F]):p[F]}return function(V,F){return u=V,c=null,f={},h={},i&&i(ie({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:F?F.type:null},l),a)};function w(V,F){return F==null&&(F=u),t.getStore().get(t.getDimensionIndex(V||0),F)}function T(V,F){F==null&&(F=u),V=V||0;var G=t.getDimensionInfo(V);if(!G){var K=t.getDimensionIndex(V);return K>=0?t.getStore().get(K,F):void 0}var q=t.get(G.name,F),rt=G&&G.ordinalMeta;return rt?rt.categories[q]:q}function S(V,F){F==null&&(F=u);var G=t.getItemVisual(F,"style"),K=G&&G.fill,q=G&&G.opacity,rt=y(F,ya).getItemStyle();K!=null&&(rt.fill=K),q!=null&&(rt.opacity=q);var At={inheritColor:Mt(K)?K:"#000"},Ft=b(F,ya),Pt=yn(Ft,null,At,!1,!0);Pt.text=Ft.getShallow("show")?Qt(e.getFormattedLabel(F,ya),Cp(t,F)):null;var Ct=Jm(Ft,At,!1);return A(V,rt),rt=z6(rt,Pt,Ct),V&&x(rt,V),rt.legacy=!0,rt}function k(V,F){F==null&&(F=u);var G=y(F,ms).getItemStyle(),K=b(F,ms),q=yn(K,null,null,!0,!0);q.text=K.getShallow("show")?Rd(e.getFormattedLabel(F,ms),e.getFormattedLabel(F,ya),Cp(t,F)):null;var rt=Jm(K,null,!0);return A(V,G),G=z6(G,q,rt),V&&x(G,V),G.legacy=!0,G}function x(V,F){for(var G in F)_t(F,G)&&(V[G]=F[G])}function A(V,F){V&&(V.textFill&&(F.textFill=V.textFill),V.textPosition&&(F.textPosition=V.textPosition))}function I(V,F){if(F==null&&(F=u),_t(F6,V)){var G=t.getItemVisual(F,"style");return G?G[F6[V]]:null}if(_t(iut,V))return t.getItemVisual(F,V)}function L(V){if(o.type==="cartesian2d"){var F=o.getBaseAxis();return Aot(ie({axis:F},V))}}function N(){return r.getCurrentSeriesIndices()}function z(V){return VN(V,r)}}function zut(e){var t={};return $(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function p2(e,t,r,n,i,o,s){if(!n){o.remove(t);return}var a=uC(e,t,r,n,i,o);return a&&s.setItemGraphicEl(r,a),a&&hu(a,n.focus,n.blurScope,n.emphasisDisabled),a}function uC(e,t,r,n,i,o){var s=-1,a=t;t&&yz(t,n,i)&&(s=he(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=aC(n),a&&Rut(a,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Wn.normal.cfg=Wn.normal.conOpt=Wn.emphasis.cfg=Wn.emphasis.conOpt=Wn.blur.cfg=Wn.blur.conOpt=Wn.select.cfg=Wn.select.conOpt=null,Wn.isLegacy=!1,Vut(u,r,n,i,l,Wn),But(u,r,n,i,l),lC(e,u,r,n,Wn,i,l),_t(n,"info")&&(gs(u).info=n.info);for(var c=0;c<Na.length;c++){var f=Na[c];if(f!==ya){var h=u1(n,f),d=cC(n,h,f);_z(f,u,h,d,Wn)}}return Fut(u,n,i),n.type==="group"&&Uut(e,u,r,n,i),s>=0?o.replaceAt(u,s):o.add(u),u}function yz(e,t,r){var n=gs(e),i=t.type,o=t.shape,s=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&Hut(o)&&bz(o)!==n.customPathData||i==="image"&&_t(s,"image")&&s.image!==n.customImagePath}function But(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var s=e.getClipPath();s&&yz(s,o,n)&&(s=null),s||(s=aC(o),e.setClipPath(s)),lC(null,s,t,o,null,n,i)}}function Vut(e,t,r,n,i,o){if(!e.isGroup){G6(r,null,o),G6(r,ms,o);var s=o.normal.conOpt,a=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(s!=null||a!=null||u!=null||l!=null){var c=e.getTextContent();if(s===!1)c&&e.removeTextContent();else{s=o.normal.conOpt=s||{type:"text"},c?c.clearStates():(c=aC(s),e.setTextContent(c)),lC(null,c,t,s,null,n,i);for(var f=s&&s.style,h=0;h<Na.length;h++){var d=Na[h];if(d!==ya){var p=o[d].conOpt;_z(d,c,p,cC(s,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function G6(e,t,r){var n=t?u1(e,t):e,i=t?cC(e,n,ms):e.style,o=e.type,s=n?n.textConfig:null,a=e.textContent,l=a?t?u1(a,t):a:null;if(i&&(r.isLegacy||gut(i,o,!!s,!!l))){r.isLegacy=!0;var u=mut(i,o,!t);!s&&u.textConfig&&(s=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=s,f.conOpt=l}function u1(e,t){return t?e?e[t]:null:e}function cC(e,t,r){var n=t&&t.style;return n==null&&r===ms&&e&&(n=e.styleEmphasis),n}function Uut(e,t,r,n,i){var o=n.children,s=o?o.length:0,a=n.$mergeChildren,l=a==="byName"||n.diffChildrenByName,u=a===!1;if(!(!s&&!l&&!u)){if(l){jut({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<s;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),uC(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);Wut(t,p,i)}}}function Wut(e,t,r){t&&iC(t,gs(e).option,r)}function jut(e){new p$(e.oldChildren,e.newChildren,H6,H6,e).add(X6).update(X6).remove(Gut).execute()}function H6(e,t){var r=e&&e.name;return r!=null?r:Lut+t}function X6(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;uC(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function Gut(e){var t=this.context,r=t.oldChildren[e];r&&iC(r,gs(r).option,t.seriesModel)}function bz(e){return e&&(e.pathData||e.d)}function Hut(e){return e&&(_t(e,"pathData")||_t(e,"d"))}function Xut(e){e.registerChartView(Nut),e.registerSeriesModel(sut)}var zl=Re(),Y6=Ut,v2=jt,Yut=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),s=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===s)){this._lastValue=o,this._lastStatus=s;var a=this._group,l=this._handle;if(!s||s==="hide"){a&&a.hide(),l&&l.hide();return}a&&a.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!a)a=this._group=new Fe,this.createPointerEl(a,u,t,r),this.createLabelEl(a,u,t,r),n.getZr().add(a);else{var h=we(q6,r,f);this.updatePointerEl(a,u,h),this.updateLabelEl(a,u,h,r)}K6(a,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",s=r.get("snap");if(!s&&!o)return!1;if(n==="auto"||n==null){var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(s){var l=tC(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>a}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var s=zl(t).pointerEl=new Eet[o.type](Y6(r.pointer));t.add(s)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=zl(t).labelEl=new nr(Y6(r.label));t.add(o),Z6(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=zl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=zl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),Z6(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),s=r.get("status");if(!o.get("show")||!s||s==="hide"){i&&n.remove(i),this._handle=null;return}var a;this._handle||(a=!0,i=this._handle=kP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){uu(u.event)},onmousedown:v2(this._onHandleDragMove,this,0,0),drift:v2(this._onHandleDragMove,this),ondragend:v2(this._onHandleDragEnd,this)}),n.add(i)),K6(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");pt(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,DF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},e.prototype._moveHandleToValue=function(t,r){q6(this._axisPointerModel,!r&&this._moveAnimation,this._handle,g2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(g2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(g2(i)),zl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),A3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function q6(e,t,r,n){wz(zl(r).lastProp,n)||(zl(r).lastProp=n,t?yr(r,n,e):(r.stopAnimation(),r.attr(n)))}function wz(e,t){if(Nt(e)&&Nt(t)){var r=!0;return $(t,function(n,i){r=r&&wz(e[i],n)}),!!r}else return e===t}function Z6(e,t){e[t.get(["label","show"])?"show":"hide"]()}function g2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function K6(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const qut=Yut;function Zut(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Kut(e,t,r,n,i){var o=r.get("value"),s=Sz(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),a=r.getModel("label"),l=Qp(a.get("padding")||0),u=a.getFont(),c=oP(s,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Jut(f,h,d,n);var m=a.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:yn(a,{text:s,font:u,fill:a.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Jut(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Sz(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var a={value:ZP(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};$(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&a.seriesData.push(f)}),Mt(s)?o=s.replace("{value}",o):Ht(s)&&(o=s(a))}return o}function Tz(e,t,r){var n=ff();return nP(n,n,r.rotation),qS(n,n,r.position),Zc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Qut(e,t,r,n,i,o){var s=oz.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Kut(t,n,i,o,{position:Tz(n.axis,e,r),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function tct(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function ect(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var rct=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,s){var a=i.axis,l=a.grid,u=o.get("type"),c=J6(l,a).getOtherAxis(a).getGlobalExtent(),f=a.toGlobalCoord(a.dataToCoord(n,!0));if(u&&u!=="none"){var h=Zut(o),d=nct[u](a,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=U3(l.model,i);Qut(n,r,p,i,o,s)},t.prototype.getHandleTransform=function(r,n,i){var o=U3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var s=Tz(n.axis,r,o);return{x:s[0],y:s[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var s=i.axis,a=s.grid,l=s.getGlobalExtent(!0),u=J6(a,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(qut);function J6(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var nct={line:function(e,t,r){var n=tct([t,r[0]],[t,r[1]],Q6(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:ect([t-n/2,r[0]],[n,i],Q6(e))}}};function Q6(e){return e.dim==="x"?0:1}const ict=rct;var oct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const sct=oct;var hs=Re(),act=$;function kz(e,t,r){if(!Kt.node){var n=t.getZr();hs(n).records||(hs(n).records={}),lct(n,t);var i=hs(n).records[e]||(hs(n).records[e]={});i.handler=r}}function lct(e,t){if(hs(e).initialized)return;hs(e).initialized=!0,r("click",we(tx,"click")),r("mousemove",we(tx,"mousemove")),r("globalout",cct);function r(n,i){e.on(n,function(o){var s=fct(t);act(hs(e).records,function(a){a&&i(a,o,s.dispatchAction)}),uct(s.pendings,t)})}}function uct(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function cct(e,t,r){e.handler("leave",null,r)}function tx(e,t,r,n){t.handler(e,r,n)}function fct(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function K3(e,t){if(!Kt.node){var r=t.getZr(),n=(hs(r).records||{})[e];n&&(hs(r).records[e]=null)}}var hct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),s=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";kz("axisPointer",i,function(a,l,u){s!=="none"&&(a==="leave"||s.indexOf(a)>=0)&&u({type:"updateAxisPointer",currTrigger:a,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){K3("axisPointer",n)},t.prototype.dispose=function(r,n){K3("axisPointer",n)},t.type="axisPointer",t}(ui);const dct=hct;function Pz(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),s=cu(o,e);if(s==null||s<0||pt(s))return{point:[]};var a=o.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,s),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),s),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(It(l.dimensions,function(g){return o.mapDimension(g)}),s))||[];else if(a){var m=a.getBoundingRect().clone();m.applyTransform(a.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:a}}var ex=Re();function pct(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,s=e.dispatchAction||jt(r.dispatchAction,r),a=t.getComponent("axisPointer").coordSysAxesInfo;if(!!a){cm(i)&&(i=Pz({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=cm(i),u=o.axesInfo,c=a.axesInfo,f=n==="leave"||cm(i),h={},d={},p={list:[],map:{}},v={showPointer:we(gct,d),showTooltip:we(mct,p)};$(a.coordSysMap,function(g,y){var b=l||g.containPoint(i);$(a.coordSysAxesInfo[y],function(w,T){var S=w.axis,k=wct(u,w);if(!f&&b&&(!u||k)){var x=k&&k.value;x==null&&!l&&(x=S.pointToData(i)),x!=null&&rx(w,x,v,!1,h)}})});var m={};return $(c,function(g,y){var b=g.linkGroup;b&&!d[y]&&$(b.axesInfo,function(w,T){var S=d[T];if(w!==g&&S){var k=S.value;b.mapper&&(k=g.axis.scale.parse(b.mapper(k,nx(w),nx(g)))),m[g.key]=k}})}),$(m,function(g,y){rx(c[y],g,v,!0,h)}),_ct(d,c,h),yct(p,i,e,s),bct(c,s,r),h}}function rx(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var s=vct(t,e),a=s.payloadBatch,l=s.snapToValue;a[0]&&i.seriesIndex==null&&ut(i,a[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,a),r.showTooltip(e,s,l)}}function vct(e,t){var r=t.axis,n=r.dim,i=e,o=[],s=Number.MAX_VALUE,a=-1;return $(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=s&&((v<s||p>=0&&a<0)&&(s=v,a=p,i=f,o.length=0),$(h,function(m){o.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:o,snapToValue:i}}function gct(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function mct(e,t,r,n){var i=r.payloadBatch,o=t.axis,s=o.model,a=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=Ep(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function _ct(e,t,r){var n=r.axesInfo=[];$(t,function(i,o){var s=i.axisPointerModel.option,a=e[o];a?(!i.useHandle&&(s.status="show"),s.value=a.value,s.seriesDataIndices=(a.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function yct(e,t,r,n){if(cm(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function bct(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=ex(n)[i]||{},s=ex(n)[i]={};$(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&$(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;s[d]=h})});var a=[],l=[];$(o,function(u,c){!s[c]&&l.push(u)}),$(s,function(u,c){!o[c]&&a.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),a.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function wct(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function nx(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function cm(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function Cz(e){sz.registerAxisPointerClass("CartesianAxisPointer",ict),e.registerComponentModel(sct),e.registerComponentView(dct),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!pt(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Bat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},pct)}function Lu(e){br(uz),br(Cz)}function Sct(e,t){var r=Qp(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new rr({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Tct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const kct=Tct;function Ez(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Az(e){if(!!Kt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var Mz=Az(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pct=Az(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function xz(e,t){if(!e)return t;t=eF(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Cct(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Ect=xz(Pct,"transition"),fC=xz(Mz,"transform"),Act="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Kt.transform3dSupported?"will-change:transform;":"");function Mct(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function xct(e,t,r){if(!Mt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=pu(t);var o=Mct(r),s=Math.max(Math.round(i)*1.5,6),a="",l=fC+":",u;he(["left","right"],o)>-1?(a+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(a+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=s+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;a+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+s+"px;height:"+s+"px;",a+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Ict(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Kt.transformSupported?","+fC+n:",left"+n+",top"+n),Ect+":"+i}function ix(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Kt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Kt.transform3dSupported,s="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+fC+":"+s+";":[["top",0],["left",0],[Mz,s]]}function Lct(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,a=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+s+"px "+a+"px "+o+"px "+i),$(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Oct(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),s=e.get("shadowBlur"),a=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=OF(e,"html"),h=l+"px "+u+"px "+s+"px "+a;return n.push("box-shadow:"+h),t&&i&&n.push(Ict(i,r)),o&&n.push("background-color:"+o),$(["width","color","radius"],function(d){var p="border-"+d,v=eF(p),m=e.get(v);m!=null&&n.push(p+":"+m+(d==="color"?"":"px"))}),n.push(Lct(c)),f!=null&&n.push("padding:"+Qp(f).join("px ")+"px"),n.join(";")+";"}function ox(e,t,r,n,i){var o=t&&t.painter;if(r){var s=o&&o.getViewportRoot();s&&AK(e,s,document.body,n,i)}else{e[0]=n,e[1]=i;var a=o&&o.getViewportRootOffset();a&&(e[0]+=a.offsetLeft,e[1]+=a.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Rct=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Kt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),s=this._appendToBody=n&&n.appendToBody;ox(this._styleCoord,o,s,r.getWidth()/2,r.getHeight()/2),s?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!a._enterable){var u=o.handler,c=o.painter.getViewportRoot();qn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Cct(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Act+Oct(t,!this._firstShow,this._longHide)+ix(o[0],o[1],!0)+("border-color:"+pu(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var s=this.el;if(t==null){s.innerHTML="";return}var a="";if(Mt(o)&&n.get("trigger")==="item"&&!Ez(n)&&(a=xct(n,i,o)),Mt(t))s.innerHTML=t+a;else if(t){s.innerHTML="",pt(t)||(t=[t]);for(var l=0;l<t.length;l++)Fm(t[l])&&t[l].parentNode!==s&&s.appendChild(t[l]);if(a&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=a,s.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(ox(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=ix(n[0],n[1]);$(o,function(s){i[s[0]]=s[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Kt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(jt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Dct=Rct;var Nct=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),ax(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var s=this;Nt(t)&&se(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new nr({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:OF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),$(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=n.get(u)}),$(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=a.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=sx(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;ax(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,s=fa(o.borderWidth||0),a=sx(o);n.x=t+s+a.left,n.y=r+s+a.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(jt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function fa(e){return Math.max(0,e)}function sx(e){var t=fa(e.shadowBlur||0),r=fa(e.shadowOffsetX||0),n=fa(e.shadowOffsetY||0);return{left:fa(t-r),right:fa(t+r),top:fa(t-n),bottom:fa(t+n)}}function ax(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const Fct=Nct;var $ct=new rr({shape:{x:-1,y:-1,width:2,height:2}}),zct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Kt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=cQ(i.get("renderMode"));this._tooltipContent=o==="richText"?new Fct(n):new Dct(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Kt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?DF(this,"_updatePosition",50,"fixRate"):A3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");kz("itemTooltip",this._api,jt(function(i,o,s){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,s):i==="leave"&&this._hide(s))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(r,n,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Kt.node||!i.getDom())){var s=lx(o,i);this._ticket="";var a=o.dataByCoordSys,l=Wct(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},s)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=$ct;c.x=o.x,c.y=o.y,c.update(),le(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},s)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:a,tooltipOption:o.tooltipOption},s);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=Pz(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},s)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},s))}},t.prototype.manuallyHideTip=function(r,n,i,o){var s=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(lx(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var s=o.seriesIndex,a=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||a==null||l==null)){var u=n.getSeriesByIndex(s);if(!!u){var c=u.getData(),f=Lh([c.getItemModel(a),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:a,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var s=r.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,r);else if(i){this._lastDataByCoordSys=null;var a,l;$c(i,function(u){if(le(u).dataIndex!=null)return a=u,!0;if(le(u).tooltipConfig!=null)return l=u,!0},!0),a?this._showSeriesItemTooltip(r,a,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=jt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,s=[n.offsetX,n.offsetY],a=Lh([n.tooltipOption],o),l=this._renderMode,u=[],c=Da("section",{blocks:[],noHeader:!0}),f=[],h=new Nb;$(r,function(y){$(y.dataByAxis,function(b){var w=i.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var S=Sz(T,w.axis,i,b.seriesDataIndices,b.valueLabelOpt),k=Da("section",{header:S,noHeader:!Eo(S),sortBlocks:!0,blocks:[]});c.blocks.push(k),$(b.seriesDataIndices,function(x){var A=i.getSeriesByIndex(x.seriesIndex),I=x.dataIndexInside,L=A.getDataParams(I);if(!(L.dataIndex<0)){L.axisDim=b.axisDim,L.axisIndex=b.axisIndex,L.axisType=b.axisType,L.axisId=b.axisId,L.axisValue=ZP(w.axis,{value:T}),L.axisValueLabel=S,L.marker=h.makeTooltipMarker("item",pu(L.color),l);var N=XM(A.formatTooltip(I,!0,null)),z=N.frag;if(z){var V=Lh([A],o).get("valueFormatter");k.blocks.push(V?ut({valueFormatter:V},z):z)}N.text&&f.push(N.text),u.push(L)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=a.get("order"),v=QM(c,h,l,p,i.get("useUTC"),a.get("textStyle"));v&&f.unshift(v);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(a,d,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(a,g,u,Math.random()+"",s[0],s[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,s=le(n),a=s.seriesIndex,l=o.getSeriesByIndex(a),u=s.dataModel||l,c=s.dataIndex,f=s.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=Lh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,f),y=new Nb;g.marker=y.makeTooltipMarker("item",pu(g.color),d);var b=XM(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=b.frag,k=S?QM(T?ut({valueFormatter:T},S):S,y,d,w,o.get("useUTC"),v.get("textStyle")):b.text,x="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,k,g,x,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=le(n),s=o.tooltipConfig,a=s.option||{};if(Mt(a)){var l=a;a={content:l,formatter:l}}var u=[a],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:a.content});var f=r.positionDefault,h=Lh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new Nb;this._showOrMove(h,function(){var m=Ut(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,s,a,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([s,a],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Mt(h)){var m=r.ecModel.get("useUTC"),g=pt(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,y&&(d=__(g.axisValue,d,m)),d=rF(d,i,!0)}else if(Ht(h)){var b=jt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,s,a,f,i,u))},this);this._ticket=o,d=h(i,o,b)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,s,a,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||pt(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!pt(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,s,a,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=s.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ht(n)&&(n=n([i,o],a,s.el,p,{viewSize:[u,c],contentSize:f.slice()})),pt(n))i=Ke(n[0],u),o=Ke(n[1],c);else if(Nt(n)){var v=n;v.width=f[0],v.height=f[1];var m=Ra(v,{width:u,height:c});i=m.x,o=m.y,h=null,d=null}else if(Mt(n)&&l){var g=Uct(n,p,f,r.get("borderWidth"));i=g[0],o=g[1]}else{var g=Bct(i,o,s,u,c,h?null:20,d?null:20);i=g[0],o=g[1]}if(h&&(i-=ux(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=ux(d)?f[1]/2:d==="bottom"?f[1]:0),Ez(r)){var g=Vct(i,o,s,u,c);i=g[0],o=g[1]}s.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,s=!!i&&i.length===r.length;return s&&$(i,function(a,l){var u=a.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];s=s&&u.length===f.length,s&&$(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];s=s&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,s&&$(v,function(g,y){var b=m[y];s=s&&g.seriesIndex===b.seriesIndex&&g.dataIndex===b.dataIndex}),o&&$(h.seriesDataIndices,function(g){var y=g.seriesIndex,b=n[y],w=o[y];b&&w&&w.data!==b.data&&(s=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!s},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Kt.node||!n.getDom()||(A3(this,"_updatePosition"),this._tooltipContent.dispose(),K3("itemTooltip",n))},t.type="tooltip",t}(ui);function Lh(e,t,r){var n=t.ecModel,i;r?(i=new Mr(r,n,n),i=new Mr(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var s=e[o];s&&(s instanceof Mr&&(s=s.get("tooltip",!0)),Mt(s)&&(s={formatter:s}),s&&(i=new Mr(s,i,n)))}return i}function lx(e,t){return e.dispatchAction||jt(t.dispatchAction,t)}function Bct(e,t,r,n,i,o,s){var a=r.getSize(),l=a[0],u=a[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),s!=null&&(t+u+s>i?t-=u+s:t+=s),[e,t]}function Vct(e,t,r,n,i){var o=r.getSize(),s=o[0],a=o[1];return e=Math.min(e+s,n)-s,t=Math.min(t+a,i)-a,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Uct(e,t,r,n){var i=r[0],o=r[1],s=Math.ceil(Math.SQRT2*n)+8,a=0,l=0,u=t.width,c=t.height;switch(e){case"inside":a=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":a=t.x+u/2-i/2,l=t.y-o-s;break;case"bottom":a=t.x+u/2-i/2,l=t.y+c+s;break;case"left":a=t.x-i-s,l=t.y+c/2-o/2;break;case"right":a=t.x+u+s,l=t.y+c/2-o/2}return[a,l]}function ux(e){return e==="center"||e==="middle"}function Wct(e,t,r){var n=cP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=Zp(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=o.models[0];if(!!s){var a=r.getViewOfComponentModel(s),l;if(a.group.traverse(function(u){var c=le(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}const jct=zct;function Ua(e){br(Cz),e.registerComponentModel(kct),e.registerComponentView(jct),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Yr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Yr)}var cx=$;function fx(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function hx(e,t,r){var n={};return cx(t,function(o){var s=n[o]=i();cx(e[o],function(a,l){if(!!bn.isValidType(l)){var u={type:l,visual:a};r&&r(u,o),s[l]=new bn(u),l==="opacity"&&(u=Ut(u),u.type="colorAlpha",s.__hidden.__alphaForOpacity=new bn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var s=new o;return s}}function Gct(e,t,r){var n;$(r,function(i){t.hasOwnProperty(i)&&fx(t[i])&&(n=!0)}),n&&$(r,function(i){t.hasOwnProperty(i)&&fx(t[i])?e[i]=Ut(t[i]):delete e[i]})}function Hct(e,t,r,n){var i={};return $(e,function(o){var s=bn.prepareVisualTypes(t[o]);i[o]=s}),{progress:function(s,a){var l;n!=null&&(l=a.getDimensionIndex(n));function u(T){return WF(a,f,T)}function c(T,S){Xnt(a,f,T,S)}for(var f,h=a.getStore();(f=s.next())!=null;){var d=a.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),m=t[v],g=i[v],y=0,b=g.length;y<b;y++){var w=g[y];m[w]&&m[w].applyVisual(p,u,c)}}}}}var Xct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),Yct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,s=r.getModel("textStyle"),a=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new nr({style:yn(s,{text:r.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new nr({style:yn(a,{text:h,fill:a.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!v&&!m,p&&c.on("click",function(){MM(p,"_"+r.get("target"))}),v&&d.on("click",function(){MM(v,"_"+r.get("subtarget"))}),le(c).eventData=le(d).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var g=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=g.width,y.height=g.height;var b=Ra(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),g=o.getBoundingRect();var T=b.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var k=new rr({shape:{x:g.x-T[3],y:g.y-T[0],width:g.width+T[1]+T[3],height:g.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(k)}},t.type="title",t}(ui);function Wa(e){e.registerComponentModel(Xct),e.registerComponentView(Yct)}function Iz(e,t){if(!e)return!1;for(var r=pt(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function Sv(e){l3(e,"label",["show"])}var Tv=Re(),Lz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Kt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var s=this.mainType;i||n.eachSeries(function(a){var l=a.get(this.mainType,!0),u=Tv(a)[s];if(!l||!l.data){Tv(a)[s]=null;return}u?u._mergeOption(l,n,!0):(o&&Sv(l),$(l.data,function(c){c instanceof Array?(Sv(c[0]),Sv(c[1])):Sv(c)}),u=this.createMarkerModelFromSeries(l,this,n),ut(u,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),u.__hostSeries=a),Tv(a)[s]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),s=this.getRawValue(r),a=o.getName(r);return Da("section",{header:this.name,blocks:[Da("nameValue",{name:a,value:s,noName:!a,noValue:s==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return Tv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Hi(Lz,bF.prototype);const vf=Lz;function J3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function qct(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function kv(e,t,r,n,i,o){var s=[],a=vu(t,n),l=a?t.getCalculationInfo("stackResultDimension"):n,u=hC(t,l,e),c=t.indicesOfNearest(l,u)[0];s[i]=t.get(r,c),s[o]=t.get(l,c);var f=t.get(n,c),h=Ao(t.get(n,c));return h=Math.min(h,20),h>=0&&(s[o]=+s[o].toFixed(h)),[s,f]}var m2={min:we(kv,"min"),max:we(kv,"max"),average:we(kv,"average"),median:we(kv,"median")};function c1(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!qct(t)&&!pt(t.coord)&&n){var i=n.dimensions,o=Oz(t,r,n,e);if(t=Ut(t),t.type&&m2[t.type]&&o.baseAxis&&o.valueAxis){var s=he(i,o.baseAxis.dim),a=he(i,o.valueAxis.dim),l=m2[t.type](r,o.baseDataDim,o.valueDataDim,s,a);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)m2[u[c]]&&(u[c]=hC(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function Oz(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(Zct(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function Zct(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function f1(e,t){return e&&e.containData&&t.coord&&!J3(t)?e.containData(t.coord):!0}function Kct(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!J3(t)&&!J3(r)?e.containZone(t.coord,r.coord):!0}function Jct(e,t){return e?function(r,n,i,o){var s=o<2?r.coord&&r.coord[o]:r.value;return Ca(s,t[o])}:function(r,n,i,o){return Ca(r.value,t[o])}}function hC(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,s){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var _2=Re(),Qct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Yt()},t.prototype.render=function(r,n,i){var o=this,s=this.markerGroupMap;s.each(function(a){_2(a).keep=!1}),n.eachSeries(function(a){var l=vf.getMarkerModelFromSeries(a,o.type);l&&o.renderSeries(a,l,n,i)}),s.each(function(a){!_2(a).keep&&o.group.remove(a.group)})},t.prototype.markKeep=function(r){_2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;$(r,function(o){var s=vf.getMarkerModelFromSeries(o,i.type);if(s){var a=s.getData();a.eachItemGraphicEl(function(l){l&&(n?cN(l):gP(l))})}})},t.type="marker",t}(ui);const Rz=Qct;var tft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(vf);const eft=tft;var Pv=Re(),rft=function(e,t,r,n){var i=e.getData(),o;if(pt(n))o=n;else{var s=n.type;if(s==="min"||s==="max"||s==="average"||s==="median"||n.xAxis!=null||n.yAxis!=null){var a=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)a=t.getAxis(n.yAxis!=null?"y":"x"),l=Ii(n.yAxis,n.xAxis);else{var u=Oz(n,i,t,e);a=u.valueAxis;var c=w$(i,u.valueDataDim);l=hC(i,c,s)}var f=a.dim==="x"?0:1,h=1-f,d=Ut(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&Te(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:s,valueIndex:n.valueIndex,value:l}]}else o=[]}var m=[c1(e,o[0]),c1(e,o[1]),ut({},o[2])];return m[2].type=m[2].type||null,ue(m[2],m[0]),ue(m[2],m[1]),m};function h1(e){return!isNaN(e)&&!isFinite(e)}function dx(e,t,r,n){var i=1-e,o=n.dimensions[e];return h1(t[i])&&h1(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function nft(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(dx(1,r,n,e)||dx(0,r,n,e)))return!0}return f1(e,t[0])&&f1(e,t[1])}function y2(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ke(s.get("x"),i.getWidth()),u=Ke(s.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);a=o.dataToPoint([f,h])}if(Rf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;h1(e.get(c[0],t))?a[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):h1(e.get(c[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}e.setItemLayout(t,a)}var ift=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=vf.getMarkerModelFromSeries(o,"markLine");if(s){var a=s.getData(),l=Pv(s).from,u=Pv(s).to;l.each(function(c){y2(l,c,!0,o,i),y2(u,c,!1,o,i)}),a.each(function(c){a.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,new rut);this.group.add(c.group);var f=oft(s,r,n),h=f.from,d=f.to,p=f.line;Pv(n).from=h,Pv(n).to=d,n.setData(p);var v=n.get("symbol"),m=n.get("symbolSize"),g=n.get("symbolRotate"),y=n.get("symbolOffset");pt(v)||(v=[v,v]),pt(m)||(m=[m,m]),pt(g)||(g=[g,g]),pt(y)||(y=[y,y]),f.from.each(function(w){b(h,w,!0),b(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){le(w).dataModel=n,w.traverse(function(T){le(T).dataModel=n})});function b(w,T,S){var k=w.getItemModel(T);y2(w,T,S,r,o);var x=k.getModel("itemStyle").getItemStyle();x.fill==null&&(x.fill=A_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:Qt(k.get("symbolOffset",!0),y[S?0:1]),symbolRotate:Qt(k.get("symbolRotate",!0),g[S?0:1]),symbolSize:Qt(k.get("symbolSize"),m[S?0:1]),symbol:Qt(k.get("symbol",!0),v[S?0:1]),style:x})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(Rz);function oft(e,t,r){var n;e?n=It(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ut(ut({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Ql(n,r),o=new Ql(n,r),s=new Ql([],r),a=It(r.get("data"),we(rft,t,e,r));e&&(a=Er(a,we(nft,e)));var l=Jct(!!e,n);return i.initData(It(a,function(u){return u[0]}),null,l),o.initData(It(a,function(u){return u[1]}),null,l),s.initData(It(a,function(u){return u[2]})),s.hasItemOption=!0,{from:i,to:o,line:s}}const sft=ift;function Nf(e){e.registerComponentModel(eft),e.registerComponentView(sft),e.registerPreprocessor(function(t){Iz(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var aft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(vf);const lft=aft;var Cv=Re(),uft=function(e,t,r,n){var i=c1(e,n[0]),o=c1(e,n[1]),s=i.coord,a=o.coord;s[0]=Ii(s[0],-1/0),s[1]=Ii(s[1],-1/0),a[0]=Ii(a[0],1/0),a[1]=Ii(a[1],1/0);var l=fK([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function d1(e){return!isNaN(e)&&!isFinite(e)}function px(e,t,r,n){var i=1-e;return d1(t[i])&&d1(r[i])}function cft(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return Rf(e,"cartesian2d")?r&&n&&(px(1,r,n)||px(0,r,n))?!0:Kct(e,i,o):f1(e,i)||f1(e,o)}function vx(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ke(s.get(r[0]),i.getWidth()),u=Ke(s.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),a=o.dataToPoint(h,!0)}if(Rf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);d1(c)?a[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):d1(f)&&(a[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}return a}var gx=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],fft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=vf.getMarkerModelFromSeries(o,"markArea");if(s){var a=s.getData();a.each(function(l){var u=It(gx,function(f){return vx(a,l,f,o,i)});a.setItemLayout(l,u);var c=a.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,{group:new Fe});this.group.add(c.group),this.markKeep(c);var f=hft(s,r,n);n.setData(f),f.each(function(h){var d=It(gx,function(x){return vx(f,h,x,r,o)}),p=s.getAxis("x").scale,v=s.getAxis("y").scale,m=p.getExtent(),g=v.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],b=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Xm(y),Xm(b);var w=!(m[0]>y[1]||m[1]<y[0]||g[0]>b[1]||g[1]<b[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),k=A_(l,"color");S.fill||(S.fill=k,Mt(S.fill)&&(S.fill=QS(S.fill,.4))),S.stroke||(S.stroke=k),f.setItemVisual(h,"style",S)}),f.diff(Cv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new mp({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=Cv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?yr(p,{shape:{points:v.points}},n,h):p=new mp({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=Cv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),If(h,Cu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Mt(v.fill)?QS(v.fill,1):"#000"}),gp(h,p),hu(h,null,null,p.get(["emphasis","disabled"])),le(h).dataModel=n}),Cv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(Rz);function hft(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var s=It(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ut(ut({},f),{name:u,ordinalMeta:null})});i=It(o,function(u,c){return{name:u,type:s[c%2].type}}),n=new Ql(i,r)}else i=[{name:"value",type:"float"}],n=new Ql(i,r);var a=It(r.get("data"),we(uft,t,e,r));e&&(a=Er(a,we(cft,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return Ca(d,i[h])}:function(u,c,f,h){return Ca(u.value,i[h])};return n.initData(a,null,l),n.hasItemOption=!0,n}const dft=fft;function Ou(e){e.registerComponentModel(lft),e.registerComponentView(dft),e.registerPreprocessor(function(t){Iz(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var pft=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},vft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),pt(n)&&$(n,function(o,s){Mt(o)&&(o={type:o}),n[s]=ue(o,pft(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(a){var l=a.name;i.push(l);var u;if(a.legendVisualProvider){var c=a.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(a)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&uP(a)&&n.push(a.name)}),this._availableNames=i;var o=this.get("data")||n,s=It(o,function(a){return(Mt(a)||Te(a))&&(a={name:a}),new Mr(a,this,this.ecModel)},this);this._data=s},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;$(o,function(s){n[s.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&he(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const Q3=vft;var uc=we,tT=$,Ev=Fe,gft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Ev),this.group.add(this._selectorGroup=new Ev),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var s=r.get("align"),a=r.get("orient");(!s||s==="auto")&&(s=r.get("left")==="right"&&a==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=a==="horizontal"?"end":"start"),this.renderInner(s,r,n,i,l,a,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ra(c,f,h),p=this.layoutInner(r,s,d,o,l,u),v=Ra(ie({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Sct(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this.getContentGroup(),c=Yt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),tT(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new Ev;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var y=g.getData(),b=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(g,v,p,d,n,r,b,T,w,f,o);S.on("click",uc(mx,v,null,o,h)).on("mouseover",uc(eT,g.name,null,o,h)).on("mouseout",uc(rT,g.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(k){if(!c.get(v)&&k.legendVisualProvider){var x=k.legendVisualProvider;if(!x.containName(v))return;var A=x.indexOfName(v),I=x.getItemVisual(A,"style"),L=x.getItemVisual(A,"legendIcon"),N=ni(I.fill);N&&N[3]===0&&(N[3]=.2,I=ut(ut({},I),{fill:vs(N,"rgba")}));var z=this._createItem(k,v,p,d,n,r,{},I,L,f,o);z.on("click",uc(mx,null,v,o,h)).on("mouseover",uc(eT,null,v,o,h)).on("mouseout",uc(rT,null,v,o,h)),c.set(v,!0)}},this)},this),s&&this._createSelector(s,n,o,a,l)},t.prototype._createSelector=function(r,n,i,o,s){var a=this.getSelectorGroup();tT(r,function(u){var c=u.type,f=new nr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});a.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);If(f,{normal:h,emphasis:d},{defaultText:u.title}),g3(f)})},t.prototype._createItem=function(r,n,i,o,s,a,l,u,c,f,h){var d=r.visualDrawType,p=s.get("itemWidth"),v=s.get("itemHeight"),m=s.isSelected(n),g=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),b=o.get("icon");c=b||c||"roundRect";var w=mft(c,o,l,u,d,m,h),T=new Ev,S=o.getModel("textStyle");if(Ht(r.getLegendIcon)&&(!b||b==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var k=b==="inherit"&&r.getData().getVisual("symbol")?g==="inherit"?r.getData().getVisual("symbolRotate"):g:0;T.add(_ft({itemWidth:p,itemHeight:v,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var x=a==="left"?p+5:-5,A=a,I=s.get("formatter"),L=n;Mt(I)&&I?L=I.replace("{name}",n!=null?n:""):Ht(I)&&(L=I(n));var N=o.get("inactiveColor");T.add(new nr({style:yn(S,{text:L,x,y:v/2,fill:m?S.getTextColor():N,align:A,verticalAlign:"middle"})}));var z=new rr({shape:T.getBoundingRect(),invisible:!0}),V=o.getModel("tooltip");return V.get("show")&&PP({el:z,componentModel:s,itemName:n,itemTooltipOption:V.option}),T.add(z),T.eachChild(function(F){F.silent=!0}),z.silent=!f,this.getContentGroup().add(T),g3(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getContentGroup(),u=this.getSelectorGroup();Qc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),s){Qc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",y=v===0?"y":"x";a==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[m]=c[m]+p+h[m],b[g]=Math.max(c[g],h[g]),b[y]=Math.min(0,h[y]+d[1-v]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ui);function mft(e,t,r,n,i,o,s){function a(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),tT(m,function(y,b){m[b]==="inherit"&&(m[b]=g[b])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:i1(f,s),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),a(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(a(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function _ft(e){var t=e.icon||"roundRect",r=Wi(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function mx(e,t,r,n){rT(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),eT(e,t,r,n)}function Dz(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function eT(e,t,r,n){Dz(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function rT(e,t,r,n){Dz(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const Nz=gft;function yft(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function Oh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(s){i&&o!=null?s[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?s[e]():(s[e](t.name),o=s.isSelected(t.name));var a=s.getData();$(a,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=s.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function bft(e){e.registerAction("legendToggleSelect","legendselectchanged",we(Oh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",we(Oh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",we(Oh,"inverseSelect")),e.registerAction("legendSelect","legendselected",we(Oh,"select")),e.registerAction("legendUnSelect","legendunselected",we(Oh,"unSelect"))}function Fz(e){e.registerComponentModel(Q3),e.registerComponentView(Nz),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,yft),e.registerSubTypeDefaulter("legend",function(){return"plain"}),bft(e)}var wft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=T_(r);e.prototype.init.call(this,r,n,i),_x(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),_x(this,this.option,r)},t.type="legend.scroll",t.defaultOption=m_(Q3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Q3);function _x(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,hf(t,r,{type:"box",ignoreSize:!!i})}const Sft=wft;var yx=Fe,b2=["width","height"],w2=["x","y"],Tft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new yx),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new yx)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,s,a,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=pt(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new nr({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",y=kP(n.get("pageIcons",!0)[n.getOrient().name][m],{onclick:jt(u._pageGo,u,g,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getSelectorGroup(),u=r.getOrient().index,c=b2[u],f=w2[u],h=b2[1-u],d=w2[1-u];s&&Qc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=Ut(i);s&&(g[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(r,o,g,u,c,h,d,f);if(s){if(a==="end")m[u]+=y[c]+p;else{var b=v[c]+p;m[u]-=b,y[f]-=b}y[c]+=v[c]+p,m[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,s,a,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Qc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Qc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[s]>i[s],m=[-d.x,-d.y];n||(m[o]=c[u]);var g=[0,0],y=[-p.x,-p.y],b=Qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?y[o]+=i[s]-p[s]:g[o]+=p[s]+b}y[1-o]+=d[a]/2-p[a]/2,c.setPosition(m),f.setPosition(g),h.setPosition(y);var T={x:0,y:0};if(T[s]=v?i[s]:d[s],T[a]=Math.max(d[a],p[a]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[s],v){var S={x:0,y:0};S[s]=Math.max(i[s]-p[s]-b,0),S[a]=T[a],f.setClipPath(new rr({shape:S})),f.__rectSize=S[s]}else h.eachChild(function(x){x.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(r);return k.pageIndex!=null&&yr(c,{x:k.contentPosition[0],y:k.contentPosition[1]},v?r:null),this._updatePageInfoView(r,k),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;$(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),s=r.get("pageFormatter"),a=n.pageIndex,l=a!=null?a+1:0,u=n.pageCount;o&&s&&o.setStyle("text",Mt(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,s=r.getOrient().index,a=b2[s],l=w2[s],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[s]=-v.s;for(var m=u+1,g=v,y=v,b=null;m<=h;++m)b=w(c[m]),(!b&&y.e>g.s+o||b&&!T(b,g.s))&&(y.i>g.i?g=y:g=b,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=b;for(var m=u-1,g=v,y=v,b=null;m>=-1;--m)b=w(c[m]),(!b||!T(y,b.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=b;return p;function w(S){if(S){var k=S.getBoundingRect(),x=k[l]+S[l];return{s:x,e:x+k[a],i:S.__legendDataIndex}}}function T(S,k){return S.e>=k&&S.s<=k+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(s,a){var l=s.__legendDataIndex;o==null&&l!=null&&(o=a),l===r&&(n=a)}),n!=null?n:o},t.type="legend.scroll",t}(Nz);const kft=Tft;function Pft(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Cft(e){br(Fz),e.registerComponentModel(Sft),e.registerComponentView(kft),Pft(e)}function ja(e){br(Fz),br(Cft)}var Eft={get:function(e,t,r){var n=Ut((Aft[e]||{})[t]);return r&&pt(n)?n[n.length-1]:n}},Aft={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const $z=Eft;var bx=bn.mapVisual,Mft=bn.eachVisual,xft=pt,Sx=$,Ift=Xm,Lft=bs,Oft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&Gct(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=jt(r,this),this.controllerVisuals=hx(this.option.controller,n,r),this.targetVisuals=hx(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=er(r),n},t.prototype.eachTargetSeries=function(r,n){$(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,s=o.precision,a=this.dataBound,l=o.formatter,u;i=i||["<",">"],pt(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Mt(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ht(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===a[0]?i[0]+" "+c[1]:r[1]===a[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===a[0]?"min":h===a[1]?"max":(+h).toFixed(Math.min(s,20))}},t.prototype.resetExtent=function(){var r=this.option,n=Ift([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var s=i[o],a=r.getDimensionInfo(s);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),s=n.controller||(n.controller={});ue(o,i),ue(s,i);var a=this.isCategory();l.call(this,o),l.call(this,s),u.call(this,o,"inRange","outOfRange"),c.call(this,s);function l(f){xft(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},Sx(p,function(m,g){if(!!bn.isValidType(g)){var y=$z.get(g,"inactive",a);y!=null&&(v[g]=y,g==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),m=v||"roundRect";Sx(this.stateList,function(g){var y=this.itemSize,b=f[g];b||(b=f[g]={color:a?p:[p]}),b.symbol==null&&(b.symbol=h&&Ut(h)||(a?m:[m])),b.symbolSize==null&&(b.symbolSize=d&&Ut(d)||(a?y[0]:[y[0],y[0]])),b.symbol=bx(b.symbol,function(S){return S==="none"?m:S});var w=b.symbolSize;if(w!=null){var T=-1/0;Mft(w,function(S){S>T&&(T=S)}),b.symbolSize=bx(w,function(S){return Lft(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const p1=Oft;var Tx=[20,140],Rft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=Tx[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=Tx[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):pt(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),$(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Xm((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(a,l){r[0]<=a&&a<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=kx(this,"outOfRange",this.getExtent()),i=kx(this,"inRange",this.option.range.slice()),o=[];function s(d,p){o.push({value:d,color:r(d,p)})}for(var a=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[a]&&s(n[l],"outOfRange");for(var f=1;a<u;a++,f=0)f&&o.length&&s(i[a],"outOfRange"),s(i[a],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&s(o[o.length-1].value,"outOfRange"),f=0),s(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=m_(p1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(p1);function kx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],s=[],a=0;a<=n&&o<r[1];a++)s.push(o),o+=i;return s.push(r[1]),s}const Dft=Rft;var Nft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=Qp(n.get("padding")||0),o=r.getBoundingRect();r.add(new rr({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,s=this.visualMapModel,a={};if(n==="color"){var l=s.get("contentColor");a.color=l}function u(d){return a[d]}function c(d,p){a[d]=p}var f=s.controllerVisuals[o||s.getValueState(r)],h=bn.prepareVisualTypes(f);return $(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),bn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),a[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;Qet(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ui);const zz=Nft;var Px=[["left","right","width"],["top","bottom","height"]];function Bz(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},s=n.orient==="horizontal"?1:0,a=Px[s],l=[0,null,10],u={},c=0;c<3;c++)u[Px[1-s][c]]=l[c],u[a[c]]=c===2?r[0]:n[a[c]];var f=[["x","width",3],["y","height",0]][s],h=Ra(u,o,n.padding);return a[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function fm(e,t){return $(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var bo=bs,Fft=$,Cx=Math.min,S2=Math.max,$ft=12,zft=6,Bft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var s=this.visualMapModel,a=s.get("textGap"),l=s.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-a:l[1]+a],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new nr({style:yn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,s=this._orient,a=this._useHandle,l=Bz(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new Fe;u.add(c),c.add(i.outOfRange=Ex()),c.add(i.inRange=Ex(null,a?Mx(this._orient):null,jt(this._dragHandle,this,"all",!1),jt(this._dragHandle,this,"all",!0))),c.setClipPath(new rr({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=S2(f.width,f.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,s),this._createHandle(n,u,1,o,h,s)),this._createIndicator(n,u,o,h,s),r.add(u)},t.prototype._createHandle=function(r,n,i,o,s,a){var l=jt(this._dragHandle,this,i,!1),u=jt(this._dragHandle,this,i,!0),c=ys(r.get("handleSize"),o[0]),f=Wi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=Mx(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(g){uu(g.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),_P(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new nr({cursor:h,draggable:!0,drift:l,onmousemove:function(g){uu(g.event)},ondragend:u,style:yn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],m=this._shapes;m.handleThumbs[i]=f,m.handleLabelPoints[i]=v,m.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,s){var a=ys(r.get("indicatorSize"),i[0]),l=Wi(r.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Ms){var c=l.style;l.useStyle(ut({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new nr({silent:!0,invisible:!0,style:yn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(s==="horizontal"?o/2:zft)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var s=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,s[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():Ax(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[bo(n[0],i,o,!0),bo(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,s=[0,i.itemSize[1]];nut(n,o,s,r,0);var a=i.getExtent();this._dataInterval=[bo(o[0],s,a,!0),bo(o[1],s,a,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,s=[0,n.itemSize[1]],a=r?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,a,"inRange"),u=this._createBarVisual(i,i,s,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(a,l)},t.prototype._createBarVisual=function(r,n,i,o){var s={forceState:o,convertOpacityToAlpha:!0},a=this._makeColorGradient(r,s),l=[this.getControllerVisual(r[0],"symbolSize",s),this.getControllerVisual(r[1],"symbolSize",s)],u=this._createBarPoints(i,l);return{barColor:new wP(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],s=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var a=1;a<i;a++){var l=r[0]+s*a;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:a/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new Fe(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,s=i.handleThumbs,a=i.handleLabels,l=o.itemSize,u=o.getExtent();Fft([0,1],function(c){var f=s[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=bo(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Zc(i.handleLabelPoints[c],om(f,this.group));a[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var s=this.visualMapModel,a=s.getExtent(),l=s.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=bo(r,a,u,!0),m=l[0]-p/2,g={x:f.x,y:f.y};f.y=v,f.x=m;var y=Zc(c.indicatorLabelPoint,om(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";b.setStyle({text:(i||"")+s.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var k={x:m,y:v,style:{fill:d}},x={style:{x:y[0],y:y[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=g.x,f.y=g.y,f.animateTo(k,A),b.animateTo(x,A)}else f.attr(k),b.attr(x);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var L=0;L<I.length;L++)this._api.enterBlur(I[L])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=Cx(S2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var s=[0,o[1]],a=i.getExtent();r=Cx(S2(s[0],r),s[1]);var l=Vft(i,a,s),u=[r-l,r+l],c=bo(r,s,a,!0),f=[bo(u[0],s,a,!0),bo(u[1],s,a,!0)];u[0]<s[0]&&(f[0]=-1/0),u[1]>s[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||Ax(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=aQ(h,d);this._dispatchHighDown("downplay",fm(p[0],i)),this._dispatchHighDown("highlight",fm(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if($c(r.target,function(l){var u=le(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var s=i.getData(n.dataType),a=s.getStore().get(o.getDataDimensionIndex(s),n.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",fm(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var s=om(n,o?null:this.group);return pt(r)?Zc(r,s,i):$N(r,s,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(zz);function Ex(e,t,r,n){return new mp({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){uu(i.event)},ondragend:n})}function Vft(e,t,r){var n=$ft/2,i=e.get("hoverLinkDataSize");return i&&(n=bo(i,t,r,!0)/2),n}function Ax(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function Mx(e){return e==="vertical"?"ns-resize":"ew-resize"}const Uft=Bft;var Wft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},jft=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},Gft=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(Hct(n.stateList,n.targetVisuals,jt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(jt(Hft,null,e,i))||{stops:[],outerColors:[]},s=i.getDataDimensionIndex(r);s>=0&&(o.dimension=s,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function Hft(e,t,r,n){for(var i=t.targetVisuals[n],o=bn.prepareVisualTypes(i),s={color:A_(e.getData(),"color")},a=0,l=o.length;a<l;a++){var u=o[a],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return s.color;function f(d){return s[d]}function h(d,p){s[d]=p}}var xx=$;function Xft(e){var t=e&&e.visualMap;pt(t)||(t=t?[t]:[]),xx(t,function(r){if(!!r){cc(r,"splitList")&&!cc(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&pt(n)&&xx(n,function(i){Nt(i)&&(cc(i,"start")&&!cc(i,"min")&&(i.min=i.start),cc(i,"end")&&!cc(i,"max")&&(i.max=i.end))})}})}function cc(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Ix=!1;function Vz(e){Ix||(Ix=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(Wft,jft),$(Gft,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(Xft))}function Yft(e){e.registerComponentModel(Dft),e.registerComponentView(Uft),Vz(e)}var qft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],Zft[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(s,a){i==="categories"?(s.mappingMethod="category",s.categories=Ut(o)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=It(this._pieceList,function(l){return l=Ut(l),a!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=bn.listVisualTypes(),o=this.isCategory();$(r.pieces,function(a){$(i,function(l){a.hasOwnProperty(l)&&(n[l]=1)})}),$(n,function(a,l){var u=!1;$(this.stateList,function(c){u=u||s(r,c,l)||s(r.target,c,l)},this),!u&&$(this.stateList,function(c){(r[c]||(r[c]={}))[l]=$z.get(l,c==="inRange"?"active":"inactive",o)})},this);function s(a,l,u){return a&&a[l]&&a[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,s=(n?i:r).selected||{};if(i.selected=s,$(o,function(l,u){var c=this.getSelectedMapKey(l);s.hasOwnProperty(c)||(s[c]=!0)},this),i.selectedMode==="single"){var a=!1;$(o,function(l,u){var c=this.getSelectedMapKey(l);s[c]&&(a?s[c]=!1:a=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=Ut(r)},t.prototype.getValueState=function(r){var n=bn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var s=[],a=o.getData();a.each(this.getDataDimensionIndex(a),function(l,u){var c=bn.findPieceIndex(l,i);c===r&&s.push(u)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function s(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var a=this._pieceList.slice();if(!a.length)a.push({interval:[-1/0,1/0]});else{var l=a[0].interval[0];l!==-1/0&&a.unshift({interval:[-1/0,l]}),l=a[a.length-1].interval[1],l!==1/0&&a.push({interval:[l,1/0]})}var u=-1/0;return $(a,function(c){var f=c.interval;f&&(f[0]>u&&s([u,f[0]],"outOfRange"),s(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=m_(p1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(p1),Zft={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var s=0,a=n[0];s<i;a+=o,s++){var l=s===i-1?n[1]:a+o;e.push({interval:[a,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),R4(e),$(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;$(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),Lx(t,e)},pieces:function(e){var t=this.option;$(t.pieces,function(r,n){Nt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var s=i.interval=[],a=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&s[f]==null;d++)s[f]=r[h[d]],a[f]=l[d],c[f]=d===2;s[f]==null&&(s[f]=u[f])}c[0]&&s[1]===1/0&&(a[0]=0),c[1]&&s[0]===-1/0&&(a[1]=0),s[0]===s[1]&&a[0]&&a[1]&&(i.value=s[0])}i.visual=bn.retrieveVisuals(r),e.push(i)},this),Lx(t,e),R4(e),$(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function Lx(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const Kft=qft;var Jft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,s=o.getFont(),a=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=Ii(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),$(c.viewPieceList,function(d){var p=d.piece,v=new Fe;v.onclick=jt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]]),h){var g=this.visualMapModel.getValueState(m);v.add(new nr({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:s,fill:a,opacity:g==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Qc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(s){var a=i.visualMapModel;a.option.hoverLink&&i.api.dispatchAction({type:s,batch:fm(a.findTargetDataIndices(n),a)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return Bz(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,s){if(!!n){var a=new Fe,l=this.visualMapModel.textStyleModel;a.add(new nr({style:yn(l,{x:o?s==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?s:"center",text:n})})),r.add(a)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=It(r.getPieceList(),function(a,l){return{piece:a,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),s=r.get("inverse");return(o==="horizontal"?s:!s)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Wi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var s=Ut(i.selected),a=n.getSelectedMapKey(r);o==="single"||o===!0?(s[a]=!0,$(s,function(l,u){s[u]=u===a})):s[a]=!s[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}(zz);const Qft=Jft;function tht(e){e.registerComponentModel(Kft),e.registerComponentView(Qft),Vz(e)}function eht(e){br(Yft),br(tht)}var Ox={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},rht=function(){function e(t){var r=this._condVal=Mt(t)?new RegExp(t):vK(t)?t:null;if(r==null){var n="";se(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Mt(r)?this._condVal.test(t):Te(r)?this._condVal.test(t+""):!1},e}(),nht=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),iht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),oht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),sht=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),aht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function dC(e,t){if(e===!0||e===!1){var r=new nht;return r.value=e,r}var n="";return Uz(e)||se(n),e.and?Rx("and",e,t):e.or?Rx("or",e,t):e.not?lht(e,t):uht(e,t)}function Rx(e,t,r){var n=t[e],i="";pt(n)||se(i),n.length||se(i);var o=e==="and"?new iht:new oht;return o.children=It(n,function(s){return dC(s,r)}),o.children.length||se(i),o}function lht(e,t){var r=e.not,n="";Uz(r)||se(n);var i=new sht;return i.child=dC(r,t),i.child||se(n),i}function uht(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ge(e),s=e.parser,a=s?wF(s):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=_t(Ox,u)?Ox[u]:u,f=e[u],h=a?a(f):f,d=Hrt(c,h)||c==="reg"&&new rht(h);d||se(r),i.push(d)}}i.length||se(r);var p=new aht;return p.valueGetterParam=n,p.valueParser=a,p.getValue=t.getValue,p.subCondList=i,p}function Uz(e){return Nt(e)&&!Zr(e)}var cht=function(){function e(t,r){this._cond=dC(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function fht(e,t){return new cht(e,t)}var hht={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=fht(e.config,{valueGetterAttrMap:Yt({dimension:!0}),prepareGetValue:function(a){var l="",u=a.dimension;_t(a,"dimension")||se(l);var c=t.getDimensionInfo(u);return c||se(l),{dimIdx:c.index}},getValue:function(a){return t.retrieveValueFromItem(r,a.dimIdx)}}),i=[],o=0,s=t.count();o<s;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},dht={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=er(r);i.length||se(n);var o=[];$(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&se(n),h!=="asc"&&h!=="desc"&&se(n),p&&p!=="min"&&p!=="max"){var v="";se(v)}if(h!=="asc"&&h!=="desc"){var m="";se(m)}var g=t.getDimensionInfo(f);g||se(n);var y=d?wF(d):null;d&&!y&&se(n),o.push({dimIdx:g.index,parser:y,comparator:new TF(h,p)})});var s=t.sourceFormat;s!==ln&&s!==qi&&se(n);for(var a=[],l=0,u=t.count();l<u;l++)a.push(t.getRawDataItem(l));return a.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var m=d.comparator.evaluate(p,v);if(m!==0)return m}return 0}),{data:a}}};function Ff(e){e.registerTransform(hht),e.registerTransform(dht)}var pht=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new EF(this),KM(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),KM(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Io},t}(Me),vht=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ui);function $f(e){e.registerComponentModel(pht),e.registerComponentView(vht)}var T2=null;function ght(e){return T2||(T2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),T2(e)}var k2=null;function mht(e){k2||(k2=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),k2(e)}function _ht(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Av(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function Wz(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function nT(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(Wz(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var yht='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',iT=0,hm=null;function bht(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Tht.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||v1(e)}),s=nT(e),a=s.detached,l=s.rendered;e.__resize_observer_triggered__=a===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){v1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(iT||(hm=_ht(yht)),kht(e),e.__resize_rendered__=nT(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),iT++}function wht(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",pC),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--iT&&hm&&hm.parentNode.removeChild(hm)}}function Sht(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Tht(){var e=nT(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(vC(this),this.addEventListener("scroll",pC,!0)),this.__resize_rendered__=t,v1(this))}function pC(){var e=this;vC(this),this.__resize_raf__&&mht(this.__resize_raf__),this.__resize_raf__=ght(function(){var t=Sht(e);t&&(e.__resize_last__=t,v1(e))})}function v1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function kht(e){var t=Wz(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Av("div",{className:"resize-triggers"}),n=Av("div",{className:"resize-expand-trigger"}),i=Av("div"),o=Av("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},vC(e),e.addEventListener("scroll",pC,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function vC(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,s=i.scrollHeight,a=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=s,n.style.width=a+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var os=function(){return os=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},os.apply(this,arguments)},Pht=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Cht(e){return t=Object.create(null),Pht.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Eht={autoresize:Boolean},Aht={loading:Boolean,loadingOptions:Object},Mht=/^on[^a-z]/,xht=function(e){return Mht.test(e)},Dx=[],Rh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=Dx.indexOf(o);s===-1&&(s=Dx.push(o)-1,Rh[s]={}),r=Rh[s]&&Rh[s][n]?Rh[s][n]:Rh[s][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var jz="ecTheme",Ga=Dk({name:"echarts",props:os(os({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Eht),Aht),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Vg(),i=Vg(),o=Vg(),s=Ln("ecTheme",null),a=Ln("ecInitOptions",null),l=Ln("ecUpdateOptions",null),u=SS(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ze(function(){return o.value||e.option||null}),v=Ze(function(){return e.theme||Cr(s)||{}}),m=Ze(function(){return e.initOptions||Cr(a)||{}}),g=Ze(function(){return e.updateOptions||Cr(l)||{}}),y=Ze(function(){return function(x){var A={};for(var I in x)xht(I)||(A[I]=x[I]);return A}(r)}),b=Bk().proxy.$listeners;function w(x){if(n.value){var A=i.value=Wit(n.value,v.value,m.value);e.group&&(A.group=e.group);var I=b;I||(I={},Object.keys(r).filter(function(N){return N.indexOf("on")===0&&N.length>2}).forEach(function(N){var z=N.charAt(2).toLowerCase()+N.slice(3);z.substring(z.length-4)==="Once"&&(z="~".concat(z.substring(0,z.length-4))),I[z]=r[N]})),Object.keys(I).forEach(function(N){var z=I[N];if(z){var V=N.toLowerCase();V.charAt(0)==="~"&&(V=V.substring(1),z.__once__=!0);var F=A;if(V.indexOf("zr:")===0&&(F=A.getZr(),V=V.substring(3)),z.__once__){delete z.__once__;var G=z;z=function(){for(var K=[],q=0;q<arguments.length;q++)K[q]=arguments[q];G.apply(void 0,K),F.off(V,z)}}F.on(V,z)}}),c.value?su(function(){A&&!A.isDisposed()&&A.resize(),L()}):L()}function L(){var N=x||p.value;N&&A.setOption(N,g.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;Co(f,function(x){typeof S=="function"&&(S(),S=null),x||(S=Co(function(){return e.option},function(A,I){A&&(i.value?i.value.setOption(A,os({notMerge:A.value!==(I==null?void 0:I.value)},g.value)):w())},{deep:!0}))},{immediate:!0}),Co([v,m],function(){T(),w()},{deep:!0}),hA(function(){e.group&&i.value&&(i.value.group=e.group)});var k=Cht(i);return function(x,A,I){var L=Ln("ecLoadingOptions",{}),N=Ze(function(){return os(os({},Cr(L)),I==null?void 0:I.value)});hA(function(){var z=x.value;z&&(A.value?z.showLoading(N.value):z.hideLoading())})}(i,h,d),function(x,A,I){var L=null;Co([I,x,A],function(N,z,V){var F=N[0],G=N[1],K=N[2];F&&G&&K&&(L=E_(function(){G.resize()},100),bht(F,L)),V(function(){L&&F&&wht(F,L)})})}(i,c,n),d9(function(){w()}),Z1(T),os({chart:i,root:n,setOption:function(x,A){e.manualUpdate&&(o.value=x),i.value?i.value.setOption(x,A||{}):w(x)},nonEventAttrs:y},k)},render:function(){var e=os({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Vk("x-vue-echarts",e)}});br([Va,xu,Iu,Wa,Ua,ja,Lu,eht,Ou]);const Iht={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},components:{VChart:Ga},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionResources2.hasOwnProperty(this.rgk)||(this.userStore.regionResources2[this.rgk]=[0]),this.userStore.regionResources2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianResource(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianResource",t,e),this.workload*(2-e/100)},tierResources(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let s=i;s<=o;s++){const a=Math.max(2-this.wspd*s/r,0),l=r*(2-a),u=this.userStore.chanceAtResource(this.rgk,a*100),c=u-t;e.push({wld:l,mod:a,tier:s,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtResource(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierResources){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOptionRotated(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>resource \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"resource",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray",tooltip:{show:!1}}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"x"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${st(n,1)}% chance to get<br/>${st(t,1)} or more resource %, or<br/>${st(r,1)} or less workload, or<br/>${st(i*10,1)} min \u2192 ${Math.ceil(i)*10} min cycle`},backgroundColor:"var(--color-background)",borderColor:"var(--color-border)",borderWidth:1,textStyle:{color:"var(--color-text)",fontSize:11}},confine:!0,legend:{show:!1}}}},methods:{formatFixed:st,updStore(e){this.userStore.regionResources2[this.rgk]=e.split(",")},spaceSep(e,t){return st(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},Ru=e=>($e("data-v-b9414618"),e=e(),ze(),e),Lht=R(" Observations: "),Oht=Ru(()=>_("abbr",{class:"tooltip",title:"Enter comma-separated resource values (0..100 range) observed evenly across all worker-active time.\nThe order does not matter, but repeat occurence of same value does.\nYou can sneak in newlines and comments like `evening,0,0.1,2, morning,3,22,0` - text will be stored, but ignored in calculations."},"\u2139",-1)),Rht=Ru(()=>_("br",null,null,-1)),Dht=["value"],Nht=Ru(()=>_("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),Fht={class:"fsxs tar"},$ht=Ru(()=>_("th",null,"work time",-1)),zht=Ru(()=>_("th",null,"workload \u2264",-1)),Bht=Ru(()=>_("th",null,"resource \u2265",-1)),Vht=Ru(()=>_("th",null,"chance",-1));function Uht(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[Lht,Oht,Rht,_("textarea",{value:this.userStore.regionResources2[this.rgk],onInput:t[0]||(t[0]=a=>o.updStore(a.target.value)),class:"multiline"},`
  `,40,Dht),_("div",null,[ft(s,{class:"chart hmid",option:o.chartOption},null,8,["option"])]),Nht,_("table",Fht,[_("tr",null,[$ht,(E(!0),M(W,null,mt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(10*a.tier)+" min",1))),256))]),_("tr",null,[zht,(E(!0),M(W,null,mt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(a.wld,2)),1))),256))]),_("tr",null,[Bht,(E(!0),M(W,null,mt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(100*a.mod,2)),1))),256))]),_("tr",null,[Vht,(E(!0),M(W,null,mt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(a.time,2))+"%",1))),256))])])],64)}const gC=Gt(Iht,[["render",Uht],["__scopeId","data-v-b9414618"]]);const Wht={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},components:{FloatingResourceEdit:gC,WorkerJobDescription:r_},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{formatFixed:st,randBetween:va,levelup:Ld,spaceSep(e,t){return st(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey))}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f}).priceDaily;if(n[c]={skills:f,daily:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d}).priceDaily;v>h&&(n[c]={skills:d,daily:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const s=["mspd","luck"],a=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))s.some(d=>f.hasOwnProperty(d))&&a.add(c);console.log("mlSkills",a);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of a){if(n[r-c].skills.some(m=>m==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p}).priceDaily;h.push({sk:d,daily:v})}if(h.length>0){h.sort((v,m)=>m.daily-v.daily);const d=h[0].sk,p=[...f,d];l[c]={skills:p,daily:h[0].daily},u.push(d),a.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.daily-c.daily),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,s=i.wspd_lo*r,a=i.wspd_hi*r,l=s+(a-s)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,Ld(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),Ld(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=va(t.wspd_lo,t.wspd_hi),n+=va(t.mspd_lo,t.mspd_hi),i+=va(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},dr=e=>($e("data-v-5cc5cbd2"),e=e(),ze(),e),jht={key:0,id:"columns"},Ght={id:"worker"},Hht={class:"borderless"},Xht=dr(()=>_("td",null,"name:",-1)),Yht={style:{float:"right"}},qht=dr(()=>_("td",null,"type:",-1)),Zht=["value"],Kht=["value"],Jht={key:0},Qht=dr(()=>_("td",null,"stash:",-1)),tdt=["value"],edt=dr(()=>_("td",null,"job:",-1)),rdt=R(" idle "),ndt={key:0},idt={key:1},odt=R(" \u270D\uFE0F "),sdt=R(" @ "),adt=R("M$/day "),ldt=R("CP "),udt=R(" [\u{1F33B}] "),cdt=["value"],fdt=dr(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),hdt={class:"fsxs"},ddt=R(" \u270D\uFE0F "),pdt=R(" @ "),vdt=R("M$/day "),gdt=R("CP "),mdt=R(" UNKNOWN_JOBTYPE "),_dt={key:1},ydt=dr(()=>_("td",null,"cycle:",-1)),bdt={key:0},wdt=R(" minutes "),Sdt={key:2},Tdt=dr(()=>_("td",null,"$/day:",-1)),kdt={key:0},Pdt={colspan:"2"},Cdt={key:0,class:"borderless"},Edt=dr(()=>_("tr",null,[_("th",null,"stats:"),_("th",{class:"fsxs"},"rank"),_("th",null,"sheet"),_("th",null,"+"),_("th",null,"skill"),_("th",null,"="),_("th",null,"final"),_("th")],-1)),Adt={class:"center"},Mdt={rowspan:"3"},xdt=dr(()=>_("br",null,null,-1)),Idt={class:"fsxs"},Ldt=dr(()=>_("td",null,null,-1)),Odt=dr(()=>_("td",null,null,-1)),Rdt=dr(()=>_("td",null,"\u{1F528}",-1)),Ddt={class:"center"},Ndt={class:"fsxs"},Fdt=dr(()=>_("td",null,null,-1)),$dt=dr(()=>_("td",null,null,-1)),zdt=dr(()=>_("td",null,"\u{1F9B6}",-1)),Bdt={class:"center"},Vdt={class:"fsxs"},Udt=dr(()=>_("td",null,null,-1)),Wdt=dr(()=>_("td",null,null,-1)),jdt=dr(()=>_("td",null,"\u{1F340}",-1)),Gdt={class:"center"},Hdt=dr(()=>_("td",null,"skills:",-1)),Xdt={style:{float:"right"}},Ydt=["disabled"],qdt={colspan:"2",s:""},Zdt=["id","onUpdate:modelValue"],Kdt=["value"],Jdt=["src"],Qdt=R(" use floating resource for this regionGroup "),tpt={key:0,id:"chartPane"};function ept(e,t,r,n,i,o){const s=Ot("WorkerJobDescription"),a=Ot("FloatingResourceEdit");return r.workerEditing?(E(),M("div",jht,[_("div",Ght,[_("table",Hht,[_("tr",null,[Xht,_("td",null,[tt(_("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.workerEditing.label=l),style:{width:"10em"}},null,512),[[Dt,r.workerEditing.label]]),R(" lvl."+C(r.workerEditing.level)+" ",1),_("button",{onClick:t[1]||(t[1]=l=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),_("button",{onClick:t[2]||(t[2]=l=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),Z("",!0),_("div",Yht,[e.wasChanged&&r.workerInitial?(E(),M("button",{key:0,onClick:t[4]||(t[4]=l=>o.revert())},"revert")):Z("",!0)])])]),_("tr",null,[qht,_("td",null,[e.prerelease_charkind?(E(),M("select",{key:0,onChange:t[5]||(t[5]=l=>o.recalcStats(l.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(E(!0),M(W,null,mt(n.gameStore.workerStatic,(l,u)=>(E(),M("option",{value:u},C(u)+" "+C(n.gameStore.uloc.char[u])+" "+C(l.wspd/1e6)+" / "+C(l.mspd/100)+" / "+C(l.luck/1e4),9,Kht))),256))],40,Zht)):(E(),M(W,{key:1},[R(C(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M("tr",Jht,[Qht,_("td",null,[tt(_("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>r.workerEditing.job.storage=l)},[(E(!0),M(W,null,mt(n.gameStore.townsWithRedirectableStorage,l=>(E(),M("option",{value:l},C(n.gameStore.uloc.node[l]),9,tdt))),256))],512),[[He,r.workerEditing.job.storage]])])])):Z("",!0),_("tr",null,[edt,_("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(E(),M(W,{key:0},[rdt],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M(W,{key:1},[R(C(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(E(),M("span",ndt,[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),_("span",{id:"spoiler",onClick:t[7]||(t[7]=l=>e.showChartPane=!e.showChartPane)},C(e.showChartPane?"\u25C0":"\u25B6"),1)])):(E(),M("span",idt,C(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(E(),M(W,{key:2},[odt,tt(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=l=>r.workerEditing.job.label=l)},null,512),[[Dt,r.workerEditing.job.label]]),sdt,tt(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=l=>r.workerEditing.job.profit=l)},null,512),[[Dt,r.workerEditing.job.profit,void 0,{number:!0}]]),adt,tt(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=l=>r.workerEditing.job.cp=l)},null,512),[[Dt,r.workerEditing.job.cp,void 0,{number:!0}]]),ldt],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(E(),M(W,{key:3},[udt],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(E(),M(W,{key:4},[tt(_("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>r.workerEditing.job.recipe=l),style:{width:"13em"}},[(E(!0),M(W,null,mt(n.gameStore.craftOutputs,(l,u)=>(E(),M("option",{value:u},C(n.gameStore.uloc.recipe[u]),9,cdt))),256))],512),[[He,r.workerEditing.job.recipe]]),ft(s,{w:r.workerEditing},null,8,["w"]),R(" / "+C(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" ",1),fdt,_("span",hdt," [type: "+C(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(E(),M(W,{key:5},[ddt,tt(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[12]||(t[12]=l=>r.workerEditing.job.label=l)},null,512),[[Dt,r.workerEditing.job.label]]),pdt,tt(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[13]||(t[13]=l=>r.workerEditing.job.profit=l)},null,512),[[Dt,r.workerEditing.job.profit,void 0,{number:!0}]]),vdt,tt(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[14]||(t[14]=l=>r.workerEditing.job.cp=l)},null,512),[[Dt,r.workerEditing.job.cp,void 0,{number:!0}]]),gdt],64)):(E(),M(W,{key:6},[mdt],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M("tr",_dt,[ydt,_("td",null,[R(C(o.formatFixed(24*60/o.initialProfit.cyclesDaily,1))+" ",1),o.newProfit.cyclesDaily!=o.initialProfit.cyclesDaily?(E(),M("span",bdt," \u2192 "+C(o.formatFixed(24*60/o.newProfit.cyclesDaily,1)),1)):Z("",!0),wdt])])):Z("",!0),r.workerEditing.job?(E(),M("tr",Sdt,[Tdt,_("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)||n.gameStore.jobIsFarming(r.workerEditing.job)?(E(),M(W,{key:0},[R(C(o.spaceSep(o.initialProfit.priceDaily))+" ",1),o.newProfit.priceDaily!=o.initialProfit.priceDaily?(E(),M("span",kdt,[R(" \u2192 "+C(o.spaceSep(o.newProfit.priceDaily))+" ",1),_("span",{class:Ir({greenText:o.newProfit.priceDaily>o.initialProfit.priceDaily,redText:o.newProfit.priceDaily<o.initialProfit.priceDaily,fsxs:1})},C(o.formatFixed(100*(o.newProfit.priceDaily-o.initialProfit.priceDaily)/o.initialProfit.priceDaily,2,!0))+"% ",3)])):Z("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(E(),M(W,{key:1},[R(C(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):Z("",!0)])])):Z("",!0),_("tr",null,[_("td",Pdt,[n.gameStore.ready?(E(),M("table",Cdt,[Edt,_("tr",Adt,[_("td",Mdt,[_("button",{onClick:t[15]||(t[15]=l=>o.setStatsMedian()),class:"fsxxs"},"median"),xdt,_("button",{onClick:t[16]||(t[16]=l=>o.setStatsRandom()),class:"fsxxs"},"random")]),_("td",Idt,C(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),_("td",null,[tt(_("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=l=>r.workerEditing.wspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[Dt,r.workerEditing.wspdSheet]])]),Ldt,_("td",null,C(o.formatFixed(o.currentWspdBonus,2)),1),Odt,_("td",null,C(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),Rdt]),_("tr",Ddt,[_("td",Ndt,C(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),_("td",null,[tt(_("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>r.workerEditing.mspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[Dt,r.workerEditing.mspdSheet]])]),Fdt,_("td",null,C(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),$dt,_("td",null,C(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),zdt]),_("tr",Bdt,[_("td",Vdt,C(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),_("td",null,[tt(_("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>r.workerEditing.luckSheet=l),step:"0.01",class:"w5em right"},null,512),[[Dt,r.workerEditing.luckSheet]])]),Udt,_("td",null,C(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),Wdt,_("td",null,C(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),jdt])])):Z("",!0)])]),_("tr",Gdt,[Hdt,_("td",null,[_("div",Xdt,[_("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in n.userStore.pzJobs),onClick:t[20]||(t[20]=l=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,Ydt)])])]),(E(),M(W,null,mt(9,l=>_("tr",null,[_("td",qdt,[tt(_("select",{id:"skill"+(l-1),"onUpdate:modelValue":u=>r.workerEditing.skills[l-1]=u,class:"w30em animable",style:{width:"30em"}},[(E(!0),M(W,null,mt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[l-1]),u=>(E(),M("option",{value:u},C(n.gameStore.uloc.skill[u]+" / "+n.gameStore.uloc.skilldesc[u]),9,Kdt))),256))],8,Zdt),[[He,r.workerEditing.skills[l-1]]]),e.prerelease_skillicon?(E(),M("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[l-1]}.png`,width:"22",height:"22"},null,8,Jdt)):Z("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(E(),M(W,{key:0},[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=l=>n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=l)},null,512),[[Ne,n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),Qdt],64)):Z("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(E(),M("div",tpt,[ft(a,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):Z("",!0)])):Z("",!0)}const Gz=Gt(Wht,[["render",ept],["__scopeId","data-v-5cc5cbd2"]]);const rpt={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},components:{ItemIcon:fi},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{formatFixed:st,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,{kind:"custom",profit:this.customProfit,cp:this.customCP,label:this.customLabel}),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.w.tnk),o=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=this.gameStore.pzSelectionEntry(a,i,this.w.tnk,l,u,this.w,n,o);c.profit.dist>1e6||e.push(c)}),e.sort((a,l)=>l.dailyPerCp-a.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)},workerWorkshopsProfit(){const e=[];if(!this.w)return e;const t=this.gameStore.tnk2tk(this.w.tnk),r=Date.now(),n=16,i=new Set([...this.userStore.autotakenNodes]);for(const[o,s]of Object.entries(this.userStore.userWorkshops)){const a=Number(o);if(this.workshopBusy(a)&&s.industry!="mass"||this.gameStore.houseDistance(this.w.tnk,a)>1e6)continue;const l=this.gameStore.houseInfo[a].affTown,u=this.gameStore.tk2tnk(l),c=this.userStore.occupiedWorkshops.has(Number(a))?0:s.manualCp,[f,h]=this.gameStore.dijkstraPath(u,this.w.tnk,i),d=this.gameStore.workshopSelectionEntry(a,t,this.w.tnk,f,this.w,h,c);e.push(d)}return e.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: workerWorkshopsProfit took",Date.now()-r,"ms"),console.log("workerWorkshopsProfit",e),e.slice(0,n)}}},fn=e=>($e("data-v-907094bd"),e=e(),ze(),e),npt={class:"spaced-columns"},ipt=R(" ) where?"),opt=fn(()=>_("br",null,null,-1)),spt=R(" stash: "),apt=["value"],lpt=fn(()=>_("th",null,"node",-1)),upt=fn(()=>_("th",null,"workload",-1)),cpt=fn(()=>_("th",null,"walk",-1)),fpt=fn(()=>_("th",null,"+M$/day",-1)),hpt=fn(()=>_("th",null,"+CP",-1)),dpt=fn(()=>_("th",null,"M$/day/CP",-1)),ppt=fn(()=>_("th",null,"action",-1)),vpt=["href"],gpt=R(C(" ")+" "),mpt={class:"tac"},_pt={class:"tac"},ypt={class:"tac"},bpt={class:"tac"},wpt=["title"],Spt=R("+"),Tpt=["title"],kpt={class:"tac"},Ppt=["onClick"],Cpt=fn(()=>_("tr",null,[_("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),Ept={key:0},Apt=fn(()=>_("td",null,[R(" \u{1F33B} Farm "),_("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139")],-1)),Mpt=fn(()=>_("td",{class:"tac"},"x",-1)),xpt=fn(()=>_("td",{class:"tac"},"x",-1)),Ipt={class:"tac"},Lpt={class:"tac"},Opt=["title"],Rpt={class:"tac"},Dpt={class:"tac"},Npt={class:"tac"},Fpt={class:"tac"},$pt={class:"tac"},zpt=["title"],Bpt=R("+"),Vpt={class:"tooltip",title:`cost of operating the workshop
(see Settings > \u{1F3ED}Workshops)`},Upt=R("+"),Wpt=["title"],jpt={class:"tac"},Gpt=["onClick"],Hpt=R(" \u270D\uFE0F Custom job "),Xpt=fn(()=>_("abbr",{title:"enter daily profit and CP cost for this specific job PER ONE WORKER",class:"tooltip"},"\u2139",-1)),Ypt={style:{float:"right"}},qpt=R(" \xA0label: "),Zpt=fn(()=>_("td",{class:"tac"},"x",-1)),Kpt=fn(()=>_("td",{class:"tac"},"x",-1)),Jpt={class:"tac"},Qpt={class:"tac"},t0t=R("+"),e0t=["title"],r0t={class:"tac"};function n0t(e,t,r,n,i,o){const s=Ot("ItemIcon"),a=Ot("RouterLink");return r.w?(E(),M(W,{key:0},[_("div",npt,[_("div",null,[R(" Send "+C(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(E(),M(W,{key:0},[R(C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+C(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+C(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),ipt,opt,R(" "+C(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+C(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),_("div",null,[spt,tt(_("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.selectedRedirect=l)},[(E(!0),M(W,null,mt(n.gameStore.townsWithRedirectableStorageSet,l=>(E(),M("option",{value:l},C(n.gameStore.uloc.node[l]),9,apt))),256))],512),[[He,e.selectedRedirect]])])]),_("table",null,[_("tr",null,[lpt,upt,cpt,fpt,hpt,dpt,Z("",!0),ppt]),(E(!0),M(W,null,mt(o.workerNearestCpPlantzonesProfit,l=>(E(),M("tr",null,[_("td",null,[_("a",{href:this.userStore.codexNodeUrl+l.pz.key},C(l.pz.name),9,vpt),(E(!0),M(W,null,mt(this.gameStore.plantzones[l.pz.key].itemkeys,u=>(E(),M(W,null,[gpt,ft(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[ft(s,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])],64))),256))]),_("td",mpt,C(n.userStore.useFloatingResources[l.pz.regiongroup]?"~":"")+C(o.formatFixed(n.userStore.medianWorkloads[l.pz.key],2)),1),_("td",_pt,C(o.formatFixed(l.profit.dist,0)),1),_("td",ypt,C(o.formatFixed(l.profit.priceDaily,2)),1),_("td",bpt,[_("abbr",{title:Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`),class:"tooltip"},C(l.mapCp),9,wpt),Spt,_("abbr",{title:l.infraTooltip,class:"tooltip"},C(o.formatFixed(l.townCp)),9,Tpt),R("="+C(o.formatFixed(l.cp)),1)]),_("td",kpt,C(o.formatFixed(l.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerPz(r.w,l.pz.key)},"assign",8,Ppt)])]))),256)),Cpt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(E(),M("tr",Ept,[Apt,Mpt,xpt,_("td",Ipt,C(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),_("td",Lpt,[_("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},C(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,Opt)]),_("td",Rpt,C(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:t[1]||(t[1]=l=>o.assignWorkerFm(r.w))},"assign")])])):Z("",!0),(E(!0),M(W,null,mt(o.workerWorkshopsProfit,l=>(E(),M("tr",null,[_("td",null," \u{1F3ED} "+C(n.gameStore.uloc.char[l.hk])+" "+C(l.workshop.label),1),_("td",Dpt,C(l.workshop.manualWorkload),1),_("td",Npt,C(o.formatFixed(l.profit.distance,0)),1),_("td",Fpt,C(o.formatFixed(l.profit.priceDaily,2)),1),_("td",$pt,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`)},C(l.mapCp),9,zpt),Bpt,_("abbr",Vpt,C(l.houseCp),1),Upt,_("abbr",{title:l.infraTooltip,class:"tooltip"},C(l.townCp),9,Wpt),R("="+C(l.cp),1)]),_("td",jpt,C(o.formatFixed(l.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerWorkshop(r.w,l.hk)},"assign",8,Gpt)])]))),256)),_("tr",null,[_("td",null,[Hpt,Xpt,_("div",Ypt,[qpt,tt(_("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.customLabel=l),class:"workshop-label-input"},null,512),[[Dt,e.customLabel]])])]),Zpt,Kpt,_("td",Jpt,[tt(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=l=>e.customProfit=l)},null,512),[[Dt,e.customProfit,void 0,{number:!0}]])]),_("td",Qpt,[tt(_("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=l=>e.customCP=l)},null,512),[[Dt,e.customCP,void 0,{number:!0}]]),t0t,_("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},C(o.formatFixed(o.addBedHereInfo.cost)),9,e0t),R("="+C(o.formatFixed(e.customCP+o.addBedHereInfo.cost)),1)]),_("td",r0t,C(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),Z("",!0),_("td",null,[_("button",{onClick:t[5]||(t[5]=l=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):Z("",!0)}const i0t=Gt(rpt,[["render",n0t],["__scopeId","data-v-907094bd"]]),o0t={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:st}},s0t=R(" Connect to nearest town "),a0t=_("tr",null,[_("th",null,"House"),_("th",null,"\u{1F6CF}\uFE0F"),_("th",null,"CP")],-1),l0t=["disabled","onUpdate:modelValue"],u0t=R(" "+C(" ")+" "),c0t=["href"],f0t=["disabled"],h0t=R(" P2W slots \u2192 Total: ");function d0t(e,t,r,n,i,o){return r.o?(E(),M(W,{key:0},[_("h3",null,C(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(E(),M(W,{key:0},[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.activateAncado=s)},null,512),[[Ne,n.userStore.activateAncado]]),s0t],64)):Z("",!0),_("table",null,[a0t,(E(!0),M(W,null,mt(r.o.houses,s=>(E(),M("tr",null,[_("td",null,[tt(_("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":a=>n.userStore.lodgingTaken[s.key]=a},null,8,l0t),[[Ne,n.userStore.lodgingTaken[s.key]]]),u0t,_("a",{href:"https://bdocodex.com/us/npc/"+s.key},C(n.gameStore.uloc.char[s.key]),9,c0t)]),_("td",null,C(s.lodgingSpaces),1),_("td",null,C(s.CP),1)]))),256)),_("tr",null,[_("td",null,[tt(_("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.lodgingP2W[r.tk]=s),class:"short"},null,8,f0t),[[Dt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),h0t]),_("td",null,C(n.userStore.haveLodging.slots.perTown[r.tk]),1),_("td",null,C(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):Z("",!0)}const p0t=Gt(o0t,[["render",d0t]]);const v0t={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{tk:Number,show:{type:Boolean,default:!1}},components:{WorkerJobDescription:r_,ItemIcon:fi},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:st,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)},itemTooltip(e,t){const r=this.gameStore.uloc.item[t];let n="";return this.userStore.workingWorkers.forEach(i=>{if(this.gameStore.jobIsPz(i.job)){const o=this.gameStore.tnk2tk(i.job.storage),s=this.gameStore.plantzones[i.job.pzk].itemkeys;if(o==e&&s.has(t)){const a=i.job.pzk;n.length==0&&(n+=` brought by:
`),n+=`${this.gameStore.uloc.node[i.tnk]} worker ${i.label} from ${this.gameStore.parentNodeName(a)}
`}}}),r+n}}},Kr=e=>($e("data-v-32bbd801"),e=e(),ze(),e),g0t={style:{"font-size":"x-large"}},m0t=R(" housing config"),_0t=R(" Connect to nearest town "),y0t={key:2,class:"section"},b0t=Kr(()=>_("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),w0t=Kr(()=>_("br",null,null,-1)),S0t=R(" - 1 initial"),T0t=Kr(()=>_("br",null,null,-1)),k0t=R(" - "),P0t=["disabled"],C0t=R(" from P2W"),E0t=Kr(()=>_("br",null,null,-1)),A0t={key:0},M0t={key:1,class:"red"},x0t=Kr(()=>_("br",null,null,-1)),I0t={class:"section"},L0t={id:"storageParent"},O0t={id:"storageLeft"},R0t=Kr(()=>_("h3",null,"\u{1F4E6} storage",-1)),D0t=Kr(()=>_("br",null,null,-1)),N0t=R(" + 1 Free slot"),F0t=Kr(()=>_("br",null,null,-1)),$0t=R(" + "),z0t=R(" Personal items"),B0t=Kr(()=>_("br",null,null,-1)),V0t=Kr(()=>_("span",{class:"markInnate underline"},"initial",-1)),U0t=Kr(()=>_("br",null,null,-1)),W0t=R(" - "),j0t=R(" "+C(" ")),G0t=Kr(()=>_("span",{class:"markP2W underline"},"from P2W",-1)),H0t=Kr(()=>_("br",null,null,-1)),X0t=Kr(()=>_("span",{class:"markProvided underline"},"required",-1)),Y0t={key:1},q0t={key:2,class:"red"},Z0t=Kr(()=>_("br",null,null,-1)),K0t=Kr(()=>_("span",{class:"markExtra underline"},"extra",-1)),J0t={id:"storageItemList"},Q0t={key:0},tvt={key:0,class:"textItem"},evt={key:1,class:"textItem"},rvt=["title"],nvt={class:"fsxs"};function ivt(e,t,r,n,i,o){Ot("WorkerJobDescription");const s=Ot("ItemIcon");return r.tk>0?(E(),M(W,{key:0},[Z("",!0),_("p",null,[_("span",g0t,C(n.gameStore.uloc.town[r.tk]),1),m0t]),r.tk==619?(E(),M(W,{key:1},[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Ne,n.userStore.activateAncado]]),_0t],64)):Z("",!0),r.tk in n.gameStore.lodgingPerTown?(E(),M("div",y0t,[b0t,R(" "+C(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),w0t,S0t,T0t,k0t,tt(_("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,P0t),[[Dt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),C0t,E0t,R(" = "+C(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(E(),M("span",A0t,"\u2190 max possible")):Z("",!0),n.userStore.townsInfra[r.tk].errL?(E(),M("span",M0t,"\u2190 too much!")):Z("",!0),x0t,_("strong",null,C(n.userStore.townsInfra[r.tk].lodging)+" found ",1)])):Z("",!0),_("div",I0t,[_("div",L0t,[_("div",O0t,[R0t,R(" "+C(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),D0t,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(E(),M(W,{key:0},[N0t,F0t],64)):Z("",!0),$0t,tt(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[Dt,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),z0t,B0t,R(" - "+C(n.userStore.baseStorage)+" ",1),V0t,U0t,W0t,tt(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[Dt,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),j0t,G0t,H0t,R(" = "+C(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),X0t,n.userStore.townsInfra[r.tk].warnS?(E(),M("span",Y0t,"\u2190 max possible")):Z("",!0),n.userStore.townsInfra[r.tk].errS?(E(),M("span",q0t,"\u2190 too much!")):Z("",!0),Z0t,_("strong",null,C(n.userStore.townsInfra[r.tk].storage)+" found",1),R(" "+C(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),K0t]),_("div",J0t,[(E(!0),M(W,null,mt(o.storageViewCount,a=>(E(),M(W,null,[a>1&&(a-1)%9==0?(E(),M("br",Q0t)):Z("",!0),_("div",{class:Ir(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(E(),M("span",tvt)):isNaN(o.ingameSortedItems[a-1])?(E(),M("span",evt,C(o.ingameSortedItems[a-1]),1)):(E(),M("abbr",{key:2,title:o.itemTooltip(r.tk,o.ingameSortedItems[a-1]),class:"hastooltip"},[ft(s,{ik:Number(o.ingameSortedItems[a-1])},null,8,["ik"])],8,rvt))],2)],64))),256))])])]),_("details",null,[_("summary",null,"Found cost: "+C(n.userStore.townsInfra[r.tk].cost)+" CP",1),_("pre",nvt,C(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):Z("",!0)}const ovt=Gt(v0t,[["render",ivt],["__scopeId","data-v-32bbd801"]]);function g1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const mC=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),Nx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Nx&&parseFloat(Nx[1]);const svt="3.2.7";function Ss(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const oT=typeof process!="object"||String(process)!=="[object process]"||process.browser,avt=typeof window<"u"&&typeof window.orientation<"u",Fx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Fx&&parseFloat(Fx[1]);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class lvt{constructor(t,r){P(this,"name",void 0),P(this,"workerThread",void 0),P(this,"isRunning",!0),P(this,"result",void 0),P(this,"_resolve",()=>{}),P(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){Ss(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Ss(this.isRunning),this.isRunning=!1,this._reject(t)}}class P2{}const C2=new Map;function uvt(e){Ss(e.source&&!e.url||!e.source&&e.url);let t=C2.get(e.source||e.url);return t||(e.url&&(t=cvt(e.url),C2.set(e.url,t)),e.source&&(t=Hz(e.source),C2.set(e.source,t))),Ss(t),t}function cvt(e){if(!e.startsWith("http"))return e;const t=fvt(e);return Hz(t)}function Hz(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function fvt(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Xz(e,t=!0,r){const n=r||new Set;if(e){if($x(e))n.add(e);else if($x(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)Xz(e[i],t,n)}}return r===void 0?Array.from(n):[]}function $x(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const E2=()=>{};class sT{static isSupported(){return typeof Worker<"u"&&oT||typeof P2!==void 0}constructor(t){P(this,"name",void 0),P(this,"source",void 0),P(this,"url",void 0),P(this,"terminated",!1),P(this,"worker",void 0),P(this,"onMessage",void 0),P(this,"onError",void 0),P(this,"_loadableURL","");const{name:r,source:n,url:i}=t;Ss(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=E2,this.onError=o=>console.log(o),this.worker=oT?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=E2,this.onError=E2,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||Xz(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=uvt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new P2(n,{eval:!1})}else if(this.source)t=new P2(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class hvt{static isSupported(){return sT.isSupported()}constructor(t){P(this,"name","unnamed"),P(this,"source",void 0),P(this,"url",void 0),P(this,"maxConcurrency",1),P(this,"maxMobileConcurrency",1),P(this,"onDebug",()=>{}),P(this,"reuseWorkers",!0),P(this,"props",{}),P(this,"jobQueue",[]),P(this,"idleQueue",[]),P(this,"count",0),P(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,s)=>i.done(s),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new lvt(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new sT({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return avt?this.maxMobileConcurrency:this.maxConcurrency}}const dvt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class cs{static isSupported(){return sT.isSupported()}static getWorkerFarm(t={}){return cs._workerFarm=cs._workerFarm||new cs({}),cs._workerFarm.setProps(t),cs._workerFarm}constructor(t){P(this,"props",void 0),P(this,"workerPools",new Map),this.props={...dvt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new hvt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}P(cs,"_workerFarm",void 0);const pvt="latest";function vvt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=pvt);const s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(s,"/dist/").concat(n)}return Ss(i),i}function gvt(e,t=svt){Ss(e,"no worker provided");const r=e.version;return!(!t||!r)}function mvt(e,t){return!cs.isSupported()||!oT&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function _vt(e,t,r,n,i){const o=e.id,s=vvt(e,r),l=cs.getWorkerFarm(r).getWorkerPool({name:o,url:s});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",yvt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function yvt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:s}=n;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function Yz(e){return e&&typeof e=="object"&&e.isBuffer}function bvt(e){return Yz(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function qz(e){if(Yz(e))return bvt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function wvt(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function Svt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,s)=>o+s.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function Tvt(e){const t=[];for await(const r of e)t.push(r);return Svt(...t)}function zx(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class Bx{constructor(t,r){P(this,"name",void 0),P(this,"type",void 0),P(this,"sampleSize",1),P(this,"time",void 0),P(this,"count",void 0),P(this,"samples",void 0),P(this,"lastTiming",void 0),P(this,"lastSampleTime",void 0),P(this,"lastSampleCount",void 0),P(this,"_count",0),P(this,"_time",0),P(this,"_samples",0),P(this,"_startTime",0),P(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=zx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(zx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class R_{constructor(t){P(this,"id",void 0),P(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof Bx?this.stats[r]=t:this.stats[r]=new Bx(r,n)),this.stats[r]}}const kvt="Queued Requests",Pvt="Active Requests",Cvt="Cancelled Requests",Evt="Queued Requests Ever",Avt="Active Requests Ever",Mvt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class xvt{constructor(t={}){P(this,"props",void 0),P(this,"stats",void 0),P(this,"activeRequestCount",0),P(this,"requestQueue",[]),P(this,"requestMap",new Map),P(this,"deferredUpdate",null),this.props={...Mvt,...t},this.stats=new R_({id:this.props.id}),this.stats.get(kvt),this.stats.get(Pvt),this.stats.get(Cvt),this.stats.get(Evt),this.stats.get(Avt)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let Ivt="";const Vx={};function Lvt(e){for(const t in Vx)if(e.startsWith(t)){const r=Vx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(Ivt).concat(e)),e}function Ovt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const Rvt=e=>typeof e=="boolean",Xd=e=>typeof e=="function",n0=e=>e!==null&&typeof e=="object",Ux=e=>n0(e)&&e.constructor==={}.constructor,Dvt=e=>e&&typeof e[Symbol.iterator]=="function",Nvt=e=>e&&typeof e[Symbol.asyncIterator]=="function",zf=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Bf=e=>typeof Blob<"u"&&e instanceof Blob,Fvt=e=>e&&typeof e=="object"&&e.isBuffer,$vt=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||n0(e)&&Xd(e.tee)&&Xd(e.cancel)&&Xd(e.getReader),zvt=e=>n0(e)&&Xd(e.read)&&Xd(e.pipe)&&Rvt(e.readable),Zz=e=>$vt(e)||zvt(e),Bvt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Vvt=/^([-\w.]+\/[-\w.+]+)/;function Uvt(e){const t=Vvt.exec(e);return t?t[1]:e}function Wx(e){const t=Bvt.exec(e);return t?t[1]:""}const Wvt=/\?.*/;function D_(e){if(zf(e)){const t=A2(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:Uvt(r)||Wx(t)}}return Bf(e)?{url:A2(e.name||""),type:e.type||""}:typeof e=="string"?{url:A2(e),type:Wx(e)}:{url:"",type:""}}function jvt(e){return zf(e)?e.headers["content-length"]||-1:Bf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function A2(e){return e.replace(Wvt,"")}async function Kz(e){if(zf(e))return e;const t={},r=jvt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=D_(e);i&&(t["content-type"]=i);const o=await Xvt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:n}),s}async function Gvt(e){if(!e.ok){const t=await Hvt(e);throw new Error(t)}}async function Hvt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function Xvt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var s;return n(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=Yvt(r);return"data:base64,".concat(n)}return null}function Yvt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function jx(e,t){if(typeof e=="string"){e=Lvt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await Kz(e)}function Jz(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Os(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Jz()}const dm={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Mv=dm.window||dm.self||dm.global,Dh=dm.process||{},Qz=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Os();const M2=globalThis;function tB(e){if(!e&&!Os())return"Node";if(Jz(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":M2.chrome?"Chrome":M2.safari?"Safari":M2.mozInnerScreenX?"Firefox":"Unknown"}function qvt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class Zvt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";P(this,"storage",void 0),P(this,"id",void 0),P(this,"config",{}),this.storage=qvt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function Kvt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function Jvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function x2(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,s=e.height*r,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}let m1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(m1||(m1={}));function Gx(e){return typeof e=="string"?m1[e.toUpperCase()]||m1.WHITE:e}function Qvt(e,t,r){return!Os&&typeof e=="string"&&(t&&(t=Gx(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Gx(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function tgt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function _1(e,t){if(!e)throw new Error(t||"Assertion failed")}function fc(){let e;if(Os&&"performance"in Mv){var t,r;e=Mv==null||(t=Mv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in Dh){var n;const i=Dh==null||(n=Dh.hrtime)===null||n===void 0?void 0:n.call(Dh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const hc={debug:Os&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},egt={enabled:!0,level:0};function Jn(){}const Hx={},Xx={once:!0};class i0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};P(this,"id",void 0),P(this,"VERSION",Qz),P(this,"_startTs",fc()),P(this,"_deltaTs",fc()),P(this,"_storage",void 0),P(this,"userData",{}),P(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new Zvt("__probe-".concat(this.id,"__"),egt),this.userData={},this.timeStamp("".concat(this.id," started")),tgt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((fc()-this._startTs).toPrecision(10))}getDelta(){return Number((fc()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){_1(t,r)}warn(t){return this._getLogFunction(0,t,hc.warn,arguments,Xx)}error(t){return this._getLogFunction(0,t,hc.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,hc.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,hc.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,hc.debug||hc.info,arguments,Xx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Jn,n&&[n],{tag:ogt(r)}):Jn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:s=1}=t;return this._shouldLog(r||n)?Os?igt({image:i,message:o,scale:s}):ngt({image:i,message:o,scale:s}):Jn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Jn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Yx({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Jn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=eB(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Yx({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,_1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=fc();const s=o.tag||o.message;if(o.once)if(!Hx[s])Hx[s]=fc();else return Jn;return r=rgt(this.id,o.message,o),n.bind(console,r,...o.args)}return Jn}}P(i0,"VERSION",Qz);function eB(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return _1(Number.isFinite(t)&&t>=0),t}function Yx(e){const{logLevel:t,message:r}=e;e.logLevel=eB(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return _1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function rgt(e,t,r){if(typeof t=="string"){const n=r.time?Jvt(Kvt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=Qvt(t,r.color,r.background)}return t}function ngt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Jn}function igt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const s=x2(o,r,n);console.log(...s)},o.src=t,Jn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...x2(t,r,n)),Jn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...x2(o,r,n)),o.src=t.toDataURL(),Jn}return Jn}function ogt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const qx=new i0({id:"loaders.gl"});class sgt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class agt{constructor(){P(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const rB={fetch:null,mimeType:void 0,nothrow:!1,log:new agt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:mC,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},lgt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function nB(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const iB=()=>{const e=nB();return e.globalOptions=e.globalOptions||{...rB},e.globalOptions};function ugt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],cgt(e,r),hgt(t,e,n)}function oB(e,t){const r=iB(),n=e||r;return typeof n.fetch=="function"?n.fetch:n0(n.fetch)?i=>jx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:jx}function cgt(e,t){Zx(e,null,rB,lgt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Zx(n,r.id,i,o,t)}}function Zx(e,t,r,n,i){const o=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&n0(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in r)&&!u&&!c){if(a in n)qx.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!l){const f=fgt(a,i);qx.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(f))()}}}}function fgt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const s=o.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function hgt(e,t,r){const i={...e.options||{}};return dgt(i,r),i.log===null&&(i.log=new sgt),Kx(i,iB()),Kx(i,t),i}function Kx(e,t){for(const r in t)if(r in t){const n=t[r];Ux(n)&&Ux(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function dgt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function _C(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function yC(e){var t,r;g1(e,"null loader"),g1(_C(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const sB=()=>{const e=nB();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function pgt(e){const t=sB();e=Array.isArray(e)?e:[e];for(const r of e){const n=yC(r);t.find(i=>n===i)||t.unshift(n)}}function vgt(){return sB()}const ggt=new i0({id:"loaders.gl"}),mgt=/\.([^.]+)$/;async function _gt(e,t=[],r,n){if(!aB(e))return null;let i=Jx(e,t,{...r,nothrow:!0},n);if(i)return i;if(Bf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Jx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(lB(e));return i}function Jx(e,t=[],r,n){if(!aB(e))return null;if(t&&!Array.isArray(t))return yC(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...vgt()),bgt(i);const o=ygt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(lB(e));return o}function ygt(e,t,r,n){const{url:i,type:o}=D_(e),s=i||(n==null?void 0:n.url);let a=null,l="";if(r!=null&&r.mimeType&&(a=I2(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),a=a||wgt(t,s),l=l||(a?"matched url ".concat(s):""),a=a||I2(t,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||Tgt(t,e),l=l||(a?"matched initial data ".concat(uB(e)):""),a=a||I2(t,r==null?void 0:r.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l){var u;ggt.log(1,"selectLoader selected ".concat((u=a)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return a}function aB(e){return!(e instanceof Response&&e.status===204)}function lB(e){const{url:t,type:r}=D_(e);let n="No valid loader found (";n+=t?"".concat(Ovt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?uB(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function bgt(e){for(const t of e)yC(t)}function wgt(e,t){const r=t&&mgt.exec(t),n=r&&r[1];return n?Sgt(e,n):null}function Sgt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function I2(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function Tgt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(kgt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Qx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Qx(t,0,r))return r;return null}function kgt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Qx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>Pgt(e,t,r,i))}function Pgt(e,t,r,n){if(n instanceof ArrayBuffer)return wvt(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=aT(e,t,n.length);return n===i;default:return!1}}function uB(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?aT(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?aT(e,0,t):""}function aT(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const Cgt=256*1024;function*Egt(e,t){const r=(t==null?void 0:t.chunkSize)||Cgt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),s=e.slice(n,n+o);n+=o,yield i.encode(s)}}const Agt=256*1024;function*Mgt(e,t={}){const{chunkSize:r=Agt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),s=new Uint8Array(e,n,i);new Uint8Array(o).set(s),n+=i,yield o}}const xgt=1024*1024;async function*Igt(e,t){const r=(t==null?void 0:t.chunkSize)||xgt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function tI(e,t){return mC?Lgt(e,t):Ogt(e)}async function*Lgt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:s}=await i;if(o)return;yield qz(s)}}catch{r.releaseLock()}}async function*Ogt(e,t){for await(const r of e)yield qz(r)}function Rgt(e,t){if(typeof e=="string")return Egt(e,t);if(e instanceof ArrayBuffer)return Mgt(e,t);if(Bf(e))return Igt(e,t);if(Zz(e))return tI(e,t);if(zf(e))return tI(e.body,t);throw new Error("makeIterator")}const cB="Cannot convert supplied data type";function Dgt(e,t,r){if(t.text&&typeof e=="string")return e;if(Fvt(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(cB)}async function Ngt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return Dgt(e,t);if(Bf(e)&&(e=await Kz(e)),zf(e)){const i=e;return await Gvt(i),t.binary?await i.arrayBuffer():await i.text()}if(Zz(e)&&(e=Rgt(e,r)),Dvt(e)||Nvt(e))return Tvt(e);throw new Error(cB)}function Fgt(e,t,r=null){if(r)return r;const n={fetch:oB(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function $gt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function bC(e,t,r,n){Ss(!n||typeof n=="object"),t&&!Array.isArray(t)&&!_C(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=D_(e),s=$gt(t,n),a=await _gt(e,s,r);return a?(r=ugt(r,a,s,i),n=Fgt({url:i,parse:bC,loaders:s},r,n),await zgt(a,e,r,n)):null}async function zgt(e,t,r,n){if(gvt(e),zf(t)){const i=t,{ok:o,redirected:s,status:a,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:s,status:a,statusText:l,type:u,url:c}}if(t=await Ngt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(mvt(e,r))return await _vt(e,t,r,n,bC);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw Ss(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function y1(e,t,r,n){!Array.isArray(t)&&!_C(t)&&(r=t,t=void 0);const i=oB(r);let o=e;return typeof e=="string"&&(o=await i(e)),Bf(e)&&(o=await i(e)),await bC(o,t,r)}const Bgt="3.2.7",{_parseImageNode:Vgt}=globalThis,lT=typeof Image<"u",uT=typeof ImageBitmap<"u",Ugt=Boolean(Vgt),cT=mC?!0:Ugt;function Wgt(e){switch(e){case"auto":return uT||lT||cT;case"imagebitmap":return uT;case"image":return lT;case"data":return cT;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function jgt(){if(uT)return"imagebitmap";if(lT)return"image";if(cT)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Ggt(e){const t=Xgt(e);if(!t)throw new Error("Not an image");return t}function Hgt(e){switch(Ggt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Xgt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const Ygt=/^data:image\/svg\+xml/,qgt=/\.svg((\?|#).*)?$/;function wC(e){return e&&(Ygt.test(e)||qgt.test(e))}function Zgt(e,t){if(wC(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return fB(e,t)}function fB(e,t){if(wC(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function hB(e,t,r){const n=Zgt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await Kgt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function Kgt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const Jgt={};let eI=!0;async function Qgt(e,t,r){let n;wC(r)?n=await hB(e,t,r):n=fB(e,r);const i=t&&t.imagebitmap;return await tmt(n,i)}async function tmt(e,t=null){if((emt(t)||!eI)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),eI=!1}return await createImageBitmap(e)}function emt(e){for(const t in e||Jgt)return!1;return!0}const ko=!1,Yd=!0;function dB(e){const t=o0(e);return rmt(t)||omt(t)||nmt(t)||imt(t)}function rmt(e){const t=o0(e);return t.byteLength>=24&&t.getUint32(0,ko)===2303741511?{mimeType:"image/png",width:t.getUint32(16,ko),height:t.getUint32(20,ko)}:null}function nmt(e){const t=o0(e);return t.byteLength>=10&&t.getUint32(0,ko)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Yd),height:t.getUint16(8,Yd)}:null}function imt(e){const t=o0(e);return t.byteLength>=14&&t.getUint16(0,ko)===16973&&t.getUint32(2,Yd)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Yd),height:t.getUint32(22,Yd)}:null}function omt(e){const t=o0(e);if(!(t.byteLength>=3&&t.getUint16(0,ko)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=smt();let o=2;for(;o+9<t.byteLength;){const s=t.getUint16(o,ko);if(i.has(s))return{mimeType:"image/jpeg",height:t.getUint16(o+5,ko),width:t.getUint16(o+7,ko)};if(!n.has(s))return null;o+=2,o+=t.getUint16(o,ko)}return null}function smt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function o0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function amt(e,t){const{mimeType:r}=dB(e)||{},n=globalThis._parseImageNode;return g1(n),await n(e,r)}async function lmt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},s=umt(i);let a;switch(s){case"imagebitmap":a=await Qgt(e,t,o);break;case"image":a=await hB(e,t,o);break;case"data":a=await amt(e);break;default:g1(!1)}return i==="data"&&(a=Hgt(a)),a}function umt(e){switch(e){case"auto":case"data":return jgt();default:return Wgt(e),e}}const cmt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],fmt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],hmt={image:{type:"auto",decode:!0}},pB={id:"image",module:"images",name:"Images",version:Bgt,mimeTypes:fmt,extensions:cmt,parse:lmt,tests:[e=>Boolean(dB(new DataView(e)))],options:hmt},qt=new i0({id:"deck"});let fT={};function dmt(e){fT=e}function jr(e,t,r,n){qt.level>0&&fT[e]&&fT[e].call(null,t,r,n)}function pmt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const vmt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:pmt,parseTextSync:JSON.parse},qd="8.8.8",pm=globalThis.deck&&globalThis.deck.VERSION;if(pm&&pm!==qd)throw new Error("deck.gl - multiple versions detected: ".concat(pm," vs ").concat(qd));pm||(qt.log(1,"deck.gl ".concat(qd))(),globalThis.deck={...globalThis.deck,VERSION:qd,version:qd,log:qt,_registerLoggers:dmt},pgt([vmt,[pB,{imagebitmap:{premultiplyAlpha:"none"}}]]));const gmt=globalThis.deck,Rt=new i0({id:"luma.gl"});function nn(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const mmt="Invalid WebGLRenderingContext",_mt="Requires WebGL2";function N_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function ne(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function ymt(e){return ne(e)?e:null}function F_(e){return nn(N_(e),mmt),e}function Hr(e){return nn(ne(e),_mt),e}const yd={};function bmt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function wmt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function Smt(e,t){yd[e]=!0,t!==void 0&&bmt(t)}function Tmt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(yd[n]=!0);while(n!==0);for(n in yd)if(yd[n])return delete yd[n],parseInt(n,10);return 0}}const s0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};s0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};s0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Du=function(t){const r=this;this.gl=t,Tmt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,s){switch(o){case 34962:r.currentArrayBuffer=s;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=s;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,s){const l=r.currentVertexArrayObject.attribs[o];switch(s){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,s,a,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=s,h.type=a,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{wmt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};Du.prototype.VERTEX_ARRAY_BINDING_OES=34229;Du.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new s0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Du.prototype.createVertexArrayOES=function(){const t=new s0(this);return this.vertexArrayObjects.push(t),t};Du.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};Du.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof s0&&t.hasBeenBound&&t.ext===this)};Du.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){Smt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=a;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(s!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),s=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==s&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function kmt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Du(this)),this.__OESVertexArrayObject))}}const rI="OES_element_index",nI="WEBGL_draw_buffers",Pmt="EXT_disjoint_timer_query",Cmt="EXT_disjoint_timer_query_webgl2",Emt="EXT_texture_filter_anisotropic",iI="WEBGL_debug_renderer_info",Amt=35723,Mmt=4352,xmt=36795,Imt=34047,Lmt=37445,Omt=37446,De=e=>ne(e)?void 0:0,Rmt={[3074]:e=>ne(e)?void 0:36064,[Amt]:e=>ne(e)?void 0:Mmt,[35977]:De,[32937]:De,[xmt]:(e,t)=>{const r=ne(e)?e.getExtension(Cmt):e.getExtension(Pmt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[Lmt]:(e,t)=>{const r=e.getExtension(iI);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Omt]:(e,t)=>{const r=e.getExtension(iI);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Imt]:(e,t)=>{const r=e.luma.extensions[Emt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:De,[35071]:De,[37447]:De,[36063]:(e,t)=>{if(!ne(e)){const r=e.getExtension(nI);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:De,[35374]:De,[35377]:De,[34852]:e=>{if(!ne(e)){const t=e.getExtension(nI);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(rI)?2147483647:65535,[33001]:e=>e.getExtension(rI)?16777216:65535,[33e3]:e=>16777216,[37157]:De,[35373]:De,[35657]:De,[36183]:De,[37137]:De,[34045]:De,[35978]:De,[35979]:De,[35968]:De,[35376]:De,[35375]:De,[35659]:De,[37154]:De,[35371]:De,[35658]:De,[35076]:De,[35077]:De,[35380]:De};function Dmt(e,t,r){const n=Rmt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const Nmt="OES_vertex_array_object",vB="ANGLE_instanced_arrays",Fmt="WEBGL_draw_buffers",$mt="EXT_disjoint_timer_query",zmt="EXT_texture_filter_anisotropic",Bmt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Vmt(e,t){return{webgl2:ne(e),ext:e.getExtension(t)}}const gB={[Nmt]:{meta:{suffix:"OES"},createVertexArray:()=>{nn(!1,Bmt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[vB]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){nn(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Fmt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{nn(!1)}},[$mt]:{meta:{suffix:"EXT"},createQuery:()=>{nn(!1)},deleteQuery:()=>{nn(!1)},beginQuery:()=>{nn(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},L2={readBuffer:(e,t,r)=>{ne(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=Vmt(e,vB);let s;switch(n){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break}return s!==void 0?s:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!ne(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!ne(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[zmt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:Dmt,hint(e,t,r,n){return t(r,n)}};function Umt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(kmt(e),Wmt(e),Gmt(e,gB),jmt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=Umt;function Wmt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function jmt(e,t){let{target:r,target2:n}=t;Object.keys(L2).forEach(i=>{if(typeof L2[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},s=L2[i].bind(null,e,o);r[i]=s,n[i]=s}})}function Gmt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&Hmt(e,{extension:r,target:e.luma,target2:e})}function Hmt(e,t){let{extension:r,target:n,target2:i}=t;const o=gB[r];nn(o);const{meta:s={}}=o,{suffix:a=""}=s,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(a);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const SC={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Xs=(e,t,r)=>t?e.enable(r):e.disable(r),oI=(e,t,r)=>e.hint(r,t),Pn=(e,t,r)=>e.pixelStorei(r,t),Xmt=(e,t)=>{const r=ne(e)?36009:36160;return e.bindFramebuffer(r,t)},Ymt=(e,t)=>e.bindFramebuffer(36008,t);function Nh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const qmt={[3042]:Xs,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Xs,[2885]:(e,t)=>e.cullFace(t),[2929]:Xs,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Xs,[35723]:oI,[36006]:Xmt,[2886]:(e,t)=>e.frontFace(t),[33170]:oI,[2849]:(e,t)=>e.lineWidth(t),[32823]:Xs,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Xs,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Xs,[3088]:(e,t)=>e.scissor(...t),[2960]:Xs,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:Pn,[3317]:Pn,[37440]:Pn,[37441]:Pn,[37443]:Pn,[3330]:Pn,[3332]:Pn,[3331]:Pn,[36010]:Ymt,[3314]:Pn,[32878]:Pn,[3316]:Pn,[3315]:Pn,[32877]:Pn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Nh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Nh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Nh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=Nh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Nh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function qe(e,t,r){return t[e]!==void 0?t[e]:r[e]}const Zmt={blendEquation:(e,t,r)=>e.blendEquationSeparate(qe(32777,t,r),qe(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(qe(32969,t,r),qe(32968,t,r),qe(32971,t,r),qe(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(qe(32824,t,r),qe(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(qe(32938,t,r),qe(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,qe(2962,t,r),qe(2967,t,r),qe(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,qe(34816,t,r),qe(36003,t,r),qe(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,qe(2964,t,r),qe(2965,t,r),qe(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,qe(34817,t,r),qe(34818,t,r),qe(34819,t,r))},sI={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},lo=(e,t)=>e.isEnabled(t),aI={[3042]:lo,[2884]:lo,[2929]:lo,[3024]:lo,[32823]:lo,[32926]:lo,[32928]:lo,[3089]:lo,[2960]:lo,[35977]:lo};function mB(e){for(const t in e)return!1;return!0}function Kmt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function lI(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Jmt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...s);return l&&n(...s),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function Qmt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class t1t{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?r1t(t):Object.assign({},SC),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){nn(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];Ts(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){nn(o!==void 0);const s=t[o],a=this.cache[o];Kmt(s,a)||(r=!0,n=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:r,oldValue:n}}}function _B(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(nn(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new t1t(e,{copyState:n}),Qmt(e);for(const o in sI){const s=sI[o];Jmt(e,o,s)}lI(e,"getParameter"),lI(e,"isEnabled")}return e.state.enable=r,e}function e1t(e){e.state||_B(e,{copyState:!1}),e.state.push()}function uI(e){nn(e.state),e.state.pop()}function Ts(e,t){if(nn(N_(e),"setParameters requires a WebGL context"),mB(t))return;const r={};for(const i in t){const o=Number(i),s=qmt[i];s&&(typeof s=="string"?r[s]=!0:s(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=Zmt[i];o(e,t,n)}}function r1t(e,t){if(t=t||SC,typeof t=="number"){const i=t,o=aI[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=aI[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function n1t(e){Ts(e,SC)}function ai(e,t,r){if(mB(t))return r(e);const{nocatch:n=!0}=t;e1t(e),Ts(e,t);let i;if(n)i=r(e),uI(e);else try{i=r(e)}finally{uI(e)}return i}function gf(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function O2(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=gf(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return o1t(t,n,i,o,r)}function i1t(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function o1t(e,t,r,n,i){const o=cI(e[0],t,r);let s=fI(e[1],t,n,i),a=cI(e[0]+1,t,r);const l=a===r-1?a:a-1;a=fI(e[1]+1,t,n,i);let u;return i?(a=a===0?a:a+1,u=s,s=a):u=a===n-1?a:a-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(u-s+1,1)}}function cI(e,t,r){return Math.min(Math.round(e*t),r-1)}function fI(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const TC=Os(),s1t=TC&&typeof document<"u",yB={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function bB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nn(TC,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},yB,e);const{width:t,height:r}=e;function n(a){if(e.throwOnError)throw new Error(a);return console.error(a),null}e.onError=n;let i;const{canvas:o}=e,s=c1t({canvas:o,width:t,height:r,onError:n});return i=u1t(s,e),i?(i=kC(i,e),f1t(i),i):null}function kC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||h1t(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},yB,t);const{manageState:r,debug:n}=t;return r&&_B(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Rt.log(1,...o)()}}),TC&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Rt.level=Math.max(Rt.level,1)):Rt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function a1t(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function l1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=i1t(t.useDevicePixels);d1t(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function u1t(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=t;let a=null;return s&&(a=a||e.getContext("webgl2",t),a=a||e.getContext("experimental-webgl2",t)),o&&(a=a||e.getContext("webgl",t),a=a||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),a?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),a):r("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function c1t(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(s1t&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function f1t(e){const t=ne(e)?"WebGL2":"WebGL1",r=a1t(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Rt.info(1,"".concat(t).concat(i," context ").concat(n))()}function h1t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function d1t(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Rt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let s=t;const a=Math.floor(n*s),l=Math.floor(i*s);e.canvas.width=a,e.canvas.height=l,(e.drawingBufferWidth!==a||e.drawingBufferHeight!==l)&&(Rt.warn("Device pixel ratio clamped")(),s=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*s),e.canvas.height=Math.floor(i*s)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Zd="8.5.16",p1t="set luma.log.level=1 (or higher) to trace rendering";class wB{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new R_({id:t})),this.stats.get(t)}}const Gl=new wB;if(globalThis.luma&&globalThis.luma.VERSION!==Zd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Zd));globalThis.luma||(Os()&&Rt.log(1,"luma.gl ".concat(Zd," - ").concat(p1t))(),globalThis.luma=globalThis.luma||{VERSION:Zd,version:Zd,log:Rt,stats:Gl,globals:{modules:{},nodeIO:{}}});function v1t(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function g1t(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function wt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function R2(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return wt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Ea(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const D2={};function Fa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";D2[e]=D2[e]||1;const t=D2[e]++;return"".concat(e,"-").concat(t)}function hI(e){return wt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function mf(e){let t=!0;for(const r in e){t=!1;break}return t}function SB(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(s=>{o.methodName||(o[s]=()=>{throw Rt.removed("Calling removed method ".concat(t,".").concat(s,": "),i)(),new Error(s)})})}const dc="Resource subclass must define virtual methods";class Rs{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Fa(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=R2(this.gl,t),wt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ne(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:a}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=ne(this.gl),s={},a=r||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Ea(this.gl,l):l;s[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(s[f]=Ea(this.gl,s[f]))}}return s}setParameter(t,r){t=R2(this.gl,t),wt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ne(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=R2(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return SB(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(dc)}_deleteHandle(){throw new Error(dc)}_bindHandle(t){throw new Error(dc)}_getOptsFromHandle(){throw new Error(dc)}_getParameter(t,r){throw new Error(dc)}_setParameter(t,r){throw new Error(dc)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new wB}_addStats(){const t=this[Symbol.toStringTag],r=Gl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Gl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const m1t="Failed to deduce GL constant from typed array";function hT(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(m1t)}}function Mp(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function _1t(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const s=r*i;o=o||new Uint8Array(s);for(let a=0;a<n/2;++a){const l=a*s,u=(n-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,u,u+s),t.set(o,u)}}function y1t(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)s[(a*i+l)*4+u]=t[(a*2*r+l*2)*4+u];return{data:s,width:i,height:o}}function dT(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const a in n)if(a in t){const u=n[a]?"".concat(e,".").concat(n[a]):"N/A";Rt.removed("".concat(e,".").concat(a),u)()}for(const a in i)if(a in t){const l=i[a];Rt.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))()}let s=null;for(const a in o)if(a in t){const l=o[a];Rt.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))(),s=s||Object.assign({},t),s[l]=t[a],delete s[a]}return s||t}const b1t={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},w1t={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Mn{static getBytesPerElement(t){return Mp(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return wt(t.size),Mp(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Mn(b1t,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Mn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Mn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=dT("Accessor",t,w1t),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const dI=10,TB={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},S1t={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:TB},T1t={removedProps:TB};class Ce extends Rs{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=dT("Buffer",t,S1t),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=dT("Buffer",t,T1t),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Mn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;wt(r);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(Hr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(s,n,r),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:s}=this;return Hr(s),s.bindBuffer(36662,r.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hr(this.gl);const o=Mp(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(r),a=n;let l,u;t?(u=t.length,l=u-a):(l=Math.min(s,i||s),u=a+l);const c=Math.min(s,l);return i=i||c,wt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(wt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(dI,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;wt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,dI),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=hT(t);return wt(o),this.setAccessor(new Mn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;wt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=Mp(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Mn(this.accessor,{type:hT(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Rt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Rt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Rt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Rt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Mn(this.accessor,t),this}}const PC={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},kB={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},PB={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function k1t(e,t){const r=PC[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=ne(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function P1t(e,t){const r=PC[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const C1t=[9729,9728],pI=globalThis.WebGLBuffer||function(){};class gu extends Rs{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&k1t(t,n),o=o&&(!i||P1t(t,n))),o}constructor(t,r){const{id:n=Fa("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:m=!0}=t;const{depth:g=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=g,this.format=o,this.type=p,this.dataFormat=d,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:f,height:h,depth:g,format:o,type:p,dataFormat:d,border:s,mipmaps:m,parameters:u,compressed:v}),m&&this.generateMipmap(),this.setParameters(l),a&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ai(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let m=null;({data:u,dataType:m}=this._getDataType({data:u,compressed:p}));let g,y=0;if(ai(this.gl,l,()=>{switch(m){case"null":v.texImage2D(r,i,o,f,h,s,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,s,d,c,u,a);break;case"buffer":g=Hr(v),g.bindBuffer(35052,u.handle||u),g.texImage2D(r,i,o,f,h,s,d,c,a),g.bindBuffer(35052,null);break;case"browser-object":ne(v)?v.texImage2D(r,i,o,f,h,s,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[b,w]of u.entries())v.compressedTexImage2D(r,b,w.format,w.width,w.height,s,w.data),y+=w.levelSize;break;default:wt(!1,"Unknown image data type")}}),m==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const b=kB[this.dataFormat]||4,w=PB[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:m={}}=t;if({type:f,dataFormat:h,compressed:d,width:a,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:a,height:l}),wt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const g=i;i=g.data,a=g.shape[0],l=g.shape[1]}i instanceof Ce&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ai(this.gl,m,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,s,a,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,s,a,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,s,a,l,h,f,i,p);else if(i instanceof pI){const g=Hr(this.gl);g.bindBuffer(35052,i),g.texSubImage2D(r,u,o,s,a,l,h,f,p),g.bindBuffer(35052,null)}else ne(this.gl)?Hr(this.gl).texSubImage2D(r,u,o,s,a,l,h,f,i):this.gl.texSubImage2D(r,u,o,s,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Rt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ce?{data:r.handle,dataType:"buffer"}:r instanceof pI?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:s,type:a,compressed:l}=t;const u=PC[r];return s=s||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:s,type:a,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},wt(i,"Could not deduced texture size"),wt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),wt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:wt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return ne(this.gl)||!this.width||!this.height?!1:!hI(this.width)||!hI(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:C1t.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let E1t="";function A1t(e,t){return wt(typeof e=="string"),e=E1t+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class Sn extends gu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return gu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:A1t(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const pT=[34069,34070,34071,34072,34073,34074];class CB extends gu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};F_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:s=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:s})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(pT.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),pT.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Rt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,a,r,n,s,a,l,p):u.texImage2D(h,v,a,a,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:s,border:a=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,a,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}CB.FACES=pT;class M1t extends gu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:s=1,border:a=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ai(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,f),f instanceof Ce&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=kB[this.dataFormat]||4,p=PB[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const Cl="EXT_color_buffer_float",vI={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Cl,bpp:2},[33327]:{gl2:Cl,bpp:4},[34842]:{gl2:Cl,bpp:8},[33326]:{gl2:Cl,bpp:4},[33328]:{gl2:Cl,bpp:8},[34836]:{gl2:Cl,bpp:16},[35898]:{gl2:Cl,bpp:4}};function x1t(e,t,r){const n=r[t];if(!n)return!1;const i=ne(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class zc extends Rs{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||x1t(t,r,vI)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return wt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&ne(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*vI[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const I1t=256,L1t=1024,O1t=16384,gI=6144,mI=6145,_I=6146,yI=34041,EB="clear: bad arguments";function CC(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let s=0;r&&(s|=O1t,r!==!0&&(o.clearColor=r)),n&&(s|=I1t,n!==!0&&(o.clearDepth=n)),i&&(s|=L1t,n!==!0&&(o.clearStencil=n)),wt(s!==0,EB),ai(e,o,()=>{e.clear(s)})}function R1t(e){let{framebuffer:t=null,buffer:r=gI,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(e),ai(e,{framebuffer:t},()=>{switch(r){case gI:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case mI:e.clearBufferfv(mI,0,[i]);break;case _I:e.clearBufferiv(_I,0,[i]);break;case yI:const[o,s]=i;e.clearBufferfi(yI,0,o,s);break;default:wt(!1,EB)}})}function D1t(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return wt(!1),0}}function $_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=AB(e);wt(c);const{gl:h,handle:d,attachments:p}=c;a=a||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),wt(p[o]),u=u||p[o].type,s=F1t(s,u,i,a,l),u=u||hT(s);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,a,l,i,u,s),h.bindFramebuffer(36160,v||null),f&&c.delete(),s}function bI(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=$_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=y1t({data:n,width:i,height:o}));_1t({data:n,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(n),a.putImageData(l,0,0),s.toDataURL()}function N1t(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=r;let{targetX:a,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=AB(e);wt(h);const{gl:p,handle:v}=h,m=typeof a<"u"||typeof l<"u"||typeof u<"u";a=a||0,l=l||0,u=u||0;const g=p.bindFramebuffer(36160,v);wt(t);let y=null;if(t instanceof gu&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!m)p.copyTexImage2D(t,o,s,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,a,l,n,i,c,f);break;case 35866:case 32879:Hr(p).copyTexSubImage3D(t,o,a,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,g||null),d&&h.delete(),y}function AB(e){return e instanceof lr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:H1t(e),deleteFramebuffer:!0}}function F1t(e,t,r,n,i){if(e)return e;t=t||5121;const o=Mp(t,{clamped:!1}),s=D1t(r);return new o(n*i*s)}const Ue={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function $1t(e){const t=new Sn(e,{format:6408,type:5126,dataFormat:6408}),r=new lr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const MB={[Ue.WEBGL2]:[!1,!0],[Ue.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Ue.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Ue.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Ue.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Ue.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Ue.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Ue.FLOAT_BLEND]:["EXT_float_blend"],[Ue.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Ue.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Ue.TEXTURE_FLOAT]:["OES_texture_float",!0],[Ue.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Ue.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Ue.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Ue.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Ue.COLOR_ATTACHMENT_RGBA32F]:[$1t,"EXT_color_buffer_float"],[Ue.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Ue.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Ue.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Ue.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Ue.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Ue.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},z1t=2;function B1t(e,t){return EC(e,t)}function EC(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>xB(e,r))}function V1t(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in MB)e.luma.caps[t]===void 0&&(e.luma.caps[t]=xB(e,t));return e.luma.caps}function xB(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=U1t(e,t)),e.luma.caps[t]||Rt.log(z1t,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function U1t(e,t){const r=MB[t];wt(r,t);let n;const i=ne(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:wt(!1);return n}const wI="Multiple render targets not supported";class lr extends Rs{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new lr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Hr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Hr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(wt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,s,a,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return wt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Rt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in i){wt(s!==void 0,"Misspelled framebuffer binding point?");const a=Number(s),l=i[a];let u=l;if(!u)this._unattach(a);else if(u instanceof zc)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(j1t(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&CC(this.gl,{color:r,depth:n,stencil:i}),o.forEach((a,l)=>{R1t(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Rt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Rt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Rt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Rt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Rt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Rt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:s}=t;const a=Hr(this.gl),l=a.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,r):a.invalidateFramebuffer(36008,r,n,i,o,s),a.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Ea(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const s=r?Ea(this.gl,o):o;i[s]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),s=t?Ea(this.gl,o):o;n[s]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(bI(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Rt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=bI(this,{targetMaxHeight:100});return Rt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let s=null;return t&&(s=s||{},s[36064]=new Sn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),r&&n?(s=s||{},s[33306]=new zc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):r?(s=s||{},s[36096]=new zc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):n&&wt(!1),s}_unattach(t){const r=this.attachments[t];!r||(r instanceof zc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Hr(s).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=W1t(i);s.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:s.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:wt(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=ymt(this.gl);r?r.readBuffer(t):wt(t===36064||t===1029,wI),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Hr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):wt(t.length===1&&(t[0]===36064||t[0]===1029),wI)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=V1t(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function W1t(e){return e<34069?e+34069:e}function j1t(e){return(lr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const G1t=[36049,36048,33296,33298,33299,33300,33301,33302,33303];lr.ATTACHMENT_PARAMETERS=G1t;function IB(e,t){wt(e instanceof Sn||e instanceof CB||e instanceof M1t);const r=e.constructor,{gl:n,width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function H1t(e,t){const{gl:r,width:n,height:i,id:o}=e;return new lr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function vm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const X1t=35632,Y1t=35633;function q1t(e){switch(e){case X1t:return"fragment";case Y1t:return"vertex";default:return"unknown type"}}function Z1t(e,t,r,n){const i=e.split(/\r?\n/),o={},s={},a=n||vm(t)||"(unnamed)",l="".concat(q1t(r)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:s[p]=f}const u=K1t(t);return{shaderName:l,errors:SI(o,u),warnings:SI(s,u)}}function SI(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],s=o.split(":",3),a=s[0],l=parseInt(s[1],10)||0,u=o.substring(s.join(":").length+1).trim();r+=LB("^^^ ".concat(a,": ").concat(u,`

`),l)}}return r}function K1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,s)=>{const a=String(s+t),l=a.length;return LB(a,i-l)+r+o})}function LB(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function OB(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const J1t="Shader: GLSL source code must be a JavaScript string";class xp extends Rs{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return wt(!1),"unknown"}}constructor(t,r){F_(t),wt(typeof r.source=="string",J1t);const n=vm(r.source,null)||r.id||Fa("unnamed ".concat(xp.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=vm(r,null);n&&(this.id=Fa(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(xp.getTypeName(this.shaderType),":").concat(this.id)}getName(){return vm(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=Z1t(n,this.source,this.shaderType,this.id);throw Rt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Rt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class N2 extends xp{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class F2 extends xp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Q1t={[5126]:Ve.bind(null,"uniform1fv",Cn,1,Br),[35664]:Ve.bind(null,"uniform2fv",Cn,2,Br),[35665]:Ve.bind(null,"uniform3fv",Cn,3,Br),[35666]:Ve.bind(null,"uniform4fv",Cn,4,Br),[5124]:Ve.bind(null,"uniform1iv",Ys,1,Br),[35667]:Ve.bind(null,"uniform2iv",Ys,2,Br),[35668]:Ve.bind(null,"uniform3iv",Ys,3,Br),[35669]:Ve.bind(null,"uniform4iv",Ys,4,Br),[35670]:Ve.bind(null,"uniform1iv",Ys,1,Br),[35671]:Ve.bind(null,"uniform2iv",Ys,2,Br),[35672]:Ve.bind(null,"uniform3iv",Ys,3,Br),[35673]:Ve.bind(null,"uniform4iv",Ys,4,Br),[35674]:Ve.bind(null,"uniformMatrix2fv",Cn,4,Ko),[35675]:Ve.bind(null,"uniformMatrix3fv",Cn,9,Ko),[35676]:Ve.bind(null,"uniformMatrix4fv",Cn,16,Ko),[35678]:kr,[35680]:kr,[5125]:Ve.bind(null,"uniform1uiv",xv,1,Br),[36294]:Ve.bind(null,"uniform2uiv",xv,2,Br),[36295]:Ve.bind(null,"uniform3uiv",xv,3,Br),[36296]:Ve.bind(null,"uniform4uiv",xv,4,Br),[35685]:Ve.bind(null,"uniformMatrix2x3fv",Cn,6,Ko),[35686]:Ve.bind(null,"uniformMatrix2x4fv",Cn,8,Ko),[35687]:Ve.bind(null,"uniformMatrix3x2fv",Cn,6,Ko),[35688]:Ve.bind(null,"uniformMatrix3x4fv",Cn,12,Ko),[35689]:Ve.bind(null,"uniformMatrix4x2fv",Cn,8,Ko),[35690]:Ve.bind(null,"uniformMatrix4x3fv",Cn,12,Ko),[35678]:kr,[35680]:kr,[35679]:kr,[35682]:kr,[36289]:kr,[36292]:kr,[36293]:kr,[36298]:kr,[36299]:kr,[36300]:kr,[36303]:kr,[36306]:kr,[36307]:kr,[36308]:kr,[36311]:kr},t_t={},e_t={},r_t={},TI=[0];function AC(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(TI[0]=e,e=TI);const i=e.length;if(i%t&&Rt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let s=0;s<i;s++)o[s]=e[s];return o}function Cn(e,t){return AC(e,t,Float32Array,t_t)}function Ys(e,t){return AC(e,t,Int32Array,e_t)}function xv(e,t){return AC(e,t,Uint32Array,r_t)}function kI(e,t,r){const n=Q1t[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function n_t(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function i_t(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!o_t(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function o_t(e){return Array.isArray(e)||ArrayBuffer.isView(e)?a_t(e):isFinite(e)||e===!0||e===!1||e instanceof gu||e instanceof zc?!0:e instanceof lr?Boolean(e.texture):!1}function s_t(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function a_t(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function kr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Ve(e,t,r,n){let i=null,o=null;return(s,a,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{wt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(s,e,a,u),i.set(u)),f}}function Br(e,t,r,n){e[t](r,n)}function Ko(e,t,r,n){e[t](r,!1,n)}const l_t=5120,u_t=5121,c_t=5122,f_t=5123,PI=0,Iv=1,h_t=2,d_t=3,Lv=4,p_t=5,v_t=6,ur=5126,g_t=35664,m_t=35665,__t=35666,Fh=5124,y_t=35667,b_t=35668,w_t=35669,$h=5125,S_t=36294,T_t=36295,k_t=36296,P_t=35670,C_t=35671,E_t=35672,A_t=35673,M_t=35674,x_t=35675,I_t=35676,L_t=35685,O_t=35686,R_t=35687,D_t=35688,N_t=35689,F_t=35690,vT={[ur]:[ur,1,"float"],[g_t]:[ur,2,"vec2"],[m_t]:[ur,3,"vec3"],[__t]:[ur,4,"vec4"],[Fh]:[Fh,1,"int"],[y_t]:[Fh,2,"ivec2"],[b_t]:[Fh,3,"ivec3"],[w_t]:[Fh,4,"ivec4"],[$h]:[$h,1,"uint"],[S_t]:[$h,2,"uvec2"],[T_t]:[$h,3,"uvec3"],[k_t]:[$h,4,"uvec4"],[P_t]:[ur,1,"bool"],[C_t]:[ur,2,"bvec2"],[E_t]:[ur,3,"bvec3"],[A_t]:[ur,4,"bvec4"],[M_t]:[ur,8,"mat2"],[L_t]:[ur,8,"mat2x3"],[O_t]:[ur,8,"mat2x4"],[x_t]:[ur,12,"mat3"],[R_t]:[ur,12,"mat3x2"],[D_t]:[ur,12,"mat3x4"],[I_t]:[ur,16,"mat4"],[N_t]:[ur,16,"mat4x2"],[F_t]:[ur,16,"mat4x3"]};function $_t(e){switch(e){case PI:return PI;case Iv:return Iv;case d_t:return Iv;case h_t:return Iv;case Lv:return Lv;case p_t:return Lv;case v_t:return Lv;default:return wt(!1),0}}function CI(e){const t=vT[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function RB(e,t){switch(e){case l_t:case u_t:case c_t:case f_t:e=ur;break}for(const r in vT){const[n,i,o]=vT[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class z_t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!ne(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:s}=CI(n),a={type:o,size:i*s};this._inferProperties(t,r,a);const l={location:t,name:r,accessor:new Mn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:s}=CI(n),a=new Mn({type:o,size:i*s}),l={location:t,name:r,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const EI=4,B_t=35981,V_t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class DB extends Rs{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",V_t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:s=B_t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new N2(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new F2(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,wt(this.vs instanceof N2),wt(this.fs instanceof F2),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Hr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new z_t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:m,samplers:g}=t;if((m||g)&&(Rt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Rt.priority>=r){const y=p?p.id:"default",b="mode=".concat(Ea(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ea(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Rt.log(r,b)()}return wt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const y=$_t(n);d.begin(y)}this._bindTextures(),ai(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&ne(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(n,s,a,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rt.priority>=2&&i_t(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,s=!1;if(o instanceof lr&&(o=o.texture),o instanceof gu)if(s=this.uniforms[r]!==n,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:l}=i;a.bind(l),o=l,this._textureUniforms[r]=a}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||s)&&s_t(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new N2({handle:i});break;case 35632:n.fs=new F2({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Fa(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Rt.time(EI,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Rt.timeEnd(EI,"linkProgram for ".concat(this._getName()))(),t.debug||Rt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=n_t(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=kI(t,o,n),n.size>1)for(let s=0;s<n.size;s++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=kI(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const U_t=34918,W_t=34919,j_t=35007,G_t=36795,H_t=35976,X_t=35887,Y_t=36202;class b1 extends Rs{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=ne(t),i=EC(t,Ue.TIMER_QUERY);let o=n||i;for(const s of r)switch(s){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:wt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(j_t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?Y_t:X_t)}beginTransformFeedbackQuery(){return this.begin(H_t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,W_t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(G_t)}getResult(){return this.gl2.getQueryParameter(this.handle,U_t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return b1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class NB extends Rs{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,mf(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Rt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,s,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Ce?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let Ov=null;function q_t(e){return(!Ov||Ov.byteLength<e)&&(Ov=new ArrayBuffer(e)),Ov}function Z_t(e,t){const r=q_t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function K_t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,s=i*o;let a=0;for(let l=n;a<o;a++)t[l++]=r[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}const J_t="elements must be GL.ELEMENT_ARRAY_BUFFER";class An extends Rs{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?ne(t)||tB()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new An(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return An.MAX_ATTRIBUTES=An.MAX_ATTRIBUTES||t.getParameter(34921),An.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:An._setConstantFloatArray(t,r,n);break;case Int32Array:An._setConstantIntArray(t,r,n);break;case Uint32Array:An._setConstantUintArray(t,r,n);break;default:wt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return An.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return wt(!t||t.target===34963,J_t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:s,offset:a,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(wt(ne(f)),h.vertexAttribIPointer(t,i,o,s,a)):f.vertexAttribPointer(t,i,o,l,s,a),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!An.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let s=!this.buffer;if(this.buffer=this.buffer||new Ce(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(n,this.bufferValue),s){const a=Z_t(r.constructor,o);K_t({target:a,source:n,start:0,count:o}),this.buffer.subData(a),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:wt(!1)}}static _setConstantIntArray(t,r,n){switch(wt(ne(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:wt(!1)}}static _setConstantUintArray(t,r,n){switch(wt(ne(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:wt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return wt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const Q_t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",tyt=/^(.+)__LOCATION_([0-9]+)$/,eyt=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class ryt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new An(t),SB(this,"VertexArray","v6.0",eyt),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ce(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Ce&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Ce&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=r,Rt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(a||s);if(!l)return o;const u=this.accessors[s]||{},c=Mn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return wt(Number.isFinite(f)&&Number.isFinite(h)),{location:s,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=tyt.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Ce)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Ce){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Ce){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(Q_t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(An.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){An.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,s=o>0;if(t.isInstanced=t.isInstanced||s,n instanceof Ce){const a=n;if(s){const l=a.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=a.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function nyt(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let s=0;s<e.length&&s<r;++s)s>0&&(i+=",".concat(s%n===0?" ":"")),i+=Ip(e[s],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function Ip(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return nyt(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function AI(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;wt(r);const o=".*_.*",s=".*Matrix",a=r._uniformSetters,l={},u=Object.keys(a).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(s)&&$2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(s)&&$2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||$2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:Ip(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function $2(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const s=n[i],a=iyt(s);return!o||!a?(t[i]={[r]:a?Ip(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function iyt(e){return e!=null}function oyt(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=MI(t,t.elements,null,r));const i=t.values;for(const o in i){const s=t._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const l=t.accessors[s.location];l&&(a="".concat(o,": ").concat(syt(s.name,l))),n[a]=MI(t,i[o],l,r)}}return n}function MI(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,l=0,u,c,f;if(r&&(o=r.type,s=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Ce){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,a=l/d.BYTES_PER_ELEMENT/s;let v;if(r){const m=r.divisor>0;v="".concat(m?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(l," bytes ").concat(Ea(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(Ip(f,{size:s,isInteger:u})),"Format ":v}}return f=t,s=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(Ip(f,{size:s,isInteger:u})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function syt(e,t){const{type:r,size:n}=t,i=RB(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function ayt(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=xI(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=xI(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function xI(e){const{type:t,size:r}=e.accessor,n=RB(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const II=Os()&&typeof document<"u";let lyt=0;class uyt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=m=>bB(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Gl.get("animation-loop-".concat(lyt++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Rt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return wt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=b1.isSupported(this.gl,["timers"])?new b1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Rt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=II?new Promise((t,r)=>{if(II&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):g1t(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):v1t(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?kC(this.props.gl,t):this.onCreateContext(t),!N_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");n1t(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&l1t(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new lr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const a0="vs",MC="fs";function Rn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const z2={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function cyt(e){const t={};for(const r in e){const n=e[r],i=fyt(n);t[r]=i}return t}function fyt(e){let t=LI(e);return t==="object"?e?"type"in e?Object.assign({},e,z2[e.type]):"value"in e?(t=LI(e.value),Object.assign({type:t},e,z2[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},z2[t])}function LI(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const hyt="vs",dyt="fs";class OI{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Rn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=pyt(c),s&&(this.uniforms=cyt(s))}getModuleSource(t){let r;switch(t){case hyt:r=this.vs||"";break;case dyt:r=this.fs||"";break;default:Rn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Rn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function pyt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function vyt(e){return gyt($B(e))}function gyt(e){const t={},r={};return FB({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function FB(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&FB({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function $B(e,t){return e.map(r=>(r instanceof OI||(Rn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Rn(r.name,"shader module has no name"),r=new OI(r),r.dependencies=$B(r.dependencies)),r))}function myt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const _yt=7936,yyt=7937,byt=7938,wyt=35724,xC={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Nl={};Object.keys(xC).forEach(e=>{Nl[e]=e});function Syt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Tyt(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||_yt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||yyt);return{gpuVendor:kyt(r,n),vendor:r,renderer:n,version:e.getParameter(byt),shadingLanguageVersion:e.getParameter(wyt)}}function kyt(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const B2={};function RI(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=xC[t];if(Rn(n,t),!myt(r))return!0;if(t in B2)return B2[t];const i=n[0],o=r.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=e.createShader(35633);e.shaderSource(a,s),e.compileShader(a);const l=e.getShaderParameter(a,35713);return e.deleteShader(a),B2[t]=l,l}function Pyt(e,t){const r=xC[t];Rn(r,t);const n=Syt(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Rn(i===!1||i===!0),i}function Rv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>Pyt(e,r))}function Cyt(e){switch(Tyt(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function Eyt(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Rv(e,Nl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Rv(e,Nl.GLSL_DERIVATIVES)&&RI(e,Nl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Rv(e,Nl.GLSL_FRAG_DATA)&&RI(e,Nl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Rv(e,Nl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const Ayt=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Myt=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,xyt={[a0]:Ayt,[MC]:Myt},gm="__LUMA_INJECT_DECLARATIONS__",DI=/void\s+main\s*\([^)]*\)\s*\{\n?/,NI=/}\n?[^{}]*$/,V2=[];function FI(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===a0;for(const o in r){const s=r[o];s.sort((l,u)=>l.order-u.order),V2.length=s.length;for(let l=0,u=s.length;l<u;++l)V2[l]=s[l].injection;const a="".concat(V2.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(gm,a));break;case"vs:#main-start":i&&(e=e.replace(DI,l=>l+a));break;case"vs:#main-end":i&&(e=e.replace(NI,l=>a+l));break;case"fs:#decl":i||(e=e.replace(gm,a));break;case"fs:#main-start":i||(e=e.replace(DI,l=>l+a));break;case"fs:#main-end":i||(e=e.replace(NI,l=>a+l));break;default:e=e.replace(o,l=>l+a)}}return e=e.replace(gm,""),n&&(e=e.replace(/\}\s*$/,o=>o+xyt[t])),e}function gT(e){const t={};return Rn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function _f(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const zB=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Iyt=[...zB,[_f("attribute"),"in $1"],[_f("varying"),"out $1"]],Lyt=[...zB,[_f("varying"),"in $1"]],BB=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Oyt=[...BB,[_f("in"),"attribute $1"],[_f("out"),"varying $1"]],Ryt=[...BB,[_f("in"),"varying $1"]],mT="gl_FragColor",_T=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Dyt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Nyt(e,t,r){switch(t){case 300:return r?w1(e,Iyt):Fyt(e);case 100:return r?w1(e,Oyt):$yt(e);default:throw new Error("unknown GLSL version ".concat(t))}}function w1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function Fyt(e){e=w1(e,Lyt);const t=e.match(_T);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(mT,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(Dyt,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(mT,"\\b"),"g"),r)}return e}function $yt(e){e=w1(e,Ryt);const t=e.match(_T);if(t){const r=t[1];e=e.replace(_T,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),mT)}return e}const zyt=`

`.concat(gm,`

`),VB={[a0]:"vertex",[MC]:"fragment"},Byt=`precision highp float;

`;function Vyt(e,t){const{vs:r,fs:n}=t,i=vyt(t.modules||[]);return{gl:e,vs:$I(e,Object.assign({},t,{source:r,type:a0,modules:i})),fs:$I(e,Object.assign({},t,{source:n,type:MC,modules:i})),getUniforms:Uyt(i)}}function $I(e,t){let{id:r,source:n,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Rn(typeof n=="string","shader source must be a string");const h=i===a0,d=n.split(`
`);let p=100,v="",m=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],m=d.slice(1).join(`
`)):v="#version ".concat(p);const g={};o.forEach(k=>{Object.assign(g,k.getDefines())}),Object.assign(g,s);let y=c?"".concat(v,`
`).concat(jyt({id:r,source:n,type:i}),`
`).concat(Wyt({type:i}),`
`).concat(Cyt(e),`
`).concat(Eyt(e),`
`).concat(Gyt(g),`
`).concat(h?"":Byt,`
`):"".concat(v,`
`);const b=Xyt(a),w={},T={},S={};for(const k in l){const x=typeof l[k]=="string"?{injection:l[k],order:0}:l[k],A=k.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const I=A[2],L=A[3];I?L==="decl"?T[k]=[x]:S[k]=[x]:w[k]=[x]}else S[k]=[x]}for(const k of o){f&&k.checkDeprecations(m,f),y+=k.getModuleSource(i,p);const A=k.injections[i];for(const I in A){const L=I.match(/^(v|f)s:#([\w-]+)$/);if(L){const z=L[2]==="decl"?T:S;z[I]=z[I]||[],z[I].push(A[I])}else w[I]=w[I]||[],w[I].push(A[I])}}return y+=zyt,y=FI(y,i,T),y+=Hyt(b[i],w),y+=m,y=FI(y,i,S),y=Nyt(y,u?100:p,h),y}function Uyt(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function Wyt(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(VB[t].toUpperCase(),`
`)}function jyt(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(VB[n],`

`):""}function Gyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function Hyt(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((s,a)=>s.order-a.order);for(const s of o)r+="  ".concat(s.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function Xyt(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),s=r.replace(/\(.+/,"");t[i][s]=Object.assign(n,{signature:o})}),t}const Yyt="void main() {gl_FragColor = vec4(0);}",UB=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,qyt=`#version 300 es
`.concat(UB);function WB(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const s=o.split(";")[0];return{qualifier:n,type:i,name:s}}function jB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?qyt:t>300?"#version ".concat(t,`
`).concat(UB):Yyt;const o=Jyt(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function Zyt(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Rn(!1),null}}function Kyt(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Rn(!1),null}}function Jyt(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Rn(!1),null}}const Qyt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,tbt={name:"fp32",vs:Qyt,fs:null};function Lp(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const on={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function ebt(e,{precision:t=on.precision}={}){return e=rbt(e),"".concat(parseFloat(e.toPrecision(t)))}function mu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ar(e,t,r){return ibt(e,n=>Math.max(t,Math.min(r,n)))}function ru(e,t,r){return mu(e)?e.map((n,i)=>ru(n,t[i],r)):r*t+(1-r)*e}function Lo(e,t,r){const n=on.EPSILON;r&&(on.EPSILON=r);try{if(e===t)return!0;if(mu(e)&&mu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Lo(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=on.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{on.EPSILON=n}}function rbt(e){return Math.round(e/on.EPSILON)*on.EPSILON}function nbt(e){return e.clone?e.clone():new Array(e.length)}function ibt(e,t,r){if(mu(e)){const n=e;r=r||nbt(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function obt(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class IC extends obt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:mu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(on)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+ebt(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Lo(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(on.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function sbt(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function xe(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Kd(e,t,r=""){if(on.debug&&!sbt(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class GB extends IC{get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return xe(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return xe(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Lp(t>=0&&t<this.ELEMENTS,"index is out of range"),xe(this[t])}setComponent(t,r){return Lp(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Jd=1e-6,ji=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function abt(){var e=new ji(2);return ji!=Float32Array&&(e[0]=0,e[1]=0),e}function S1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function HB(e,t){return e[0]=-t[0],e[1]=-t[1],e}function XB(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function lbt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function ubt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=abt();return function(t,r,n,i,o,s){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],o(e,e,s),t[a]=e[0],t[a+1]=e[1];return t}})();function cbt(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function YB(e,t,r){const n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/s,e[1]=(r[1]*n+r[5]*i+r[9]*o)/s,e[2]=(r[2]*n+r[6]*i+r[10]*o)/s,e}function fbt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function hbt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function qB(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function ZB(){var e=new ji(3);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function dbt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function zI(e,t,r){var n=new ji(3);return n[0]=e,n[1]=t,n[2]=r,n}function pbt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function vbt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function gbt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function mbt(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function KB(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mm(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2];return e[0]=i*l-o*a,e[1]=o*s-n*l,e[2]=n*a-i*s,e}function _bt(e,t,r,n){var i=t[0],o=t[1],s=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e}function LC(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return s=s||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/s,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,e}function JB(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function QB(e,t,r){var n=r[0],i=r[1],o=r[2],s=r[3],a=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*a-n*u,h=n*l-i*a,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,m=s*2;return c*=m,f*=m,h*=m,d*=2,p*=2,v*=2,e[0]=a+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function ybt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function bbt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function wbt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Sbt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+s*s+a*a),c=l*u,f=c&&KB(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var tV=pbt,eV=dbt,U2=vbt;(function(){var e=ZB();return function(t,r,n,i,o,s){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();const W2=[0,0,0];let Dv;class kt extends GB{static get ZERO(){return Dv||(Dv=new kt(0,0,0),Object.freeze(Dv)),Dv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&mu(t)?this.copy(t):(on.debug&&(xe(t),xe(r),xe(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return on.debug&&(xe(t.x),xe(t.y),xe(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=xe(t)}angle(t){return Sbt(this,t)}cross(t){return mm(this,this,t),this.check()}rotateX({radians:t,origin:r=W2}){return ybt(this,this,r,t),this.check()}rotateY({radians:t,origin:r=W2}){return bbt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=W2}){return wbt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return LC(this,this,t),this.check()}transformAsVector(t){return YB(this,this,t),this.check()}transformByMatrix3(t){return JB(this,this,t),this.check()}transformByMatrix2(t){return fbt(this,this,t),this.check()}transformByQuaternion(t){return QB(this,this,t),this.check()}}let Nv;class OC extends GB{static get ZERO(){return Nv||(Nv=new OC(0,0,0,0),Object.freeze(Nv)),Nv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),mu(t)&&arguments.length===1?this.copy(t):(on.debug&&(xe(t),xe(r),xe(n),xe(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return on.debug&&(xe(t.x),xe(t.y),xe(t.z),xe(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}transform(t){return LC(this,this,t),this.check()}transformByMatrix3(t){return qB(this,this,t),this.check()}transformByMatrix2(t){return hbt(this,this,t),this.check()}transformByQuaternion(t){return QB(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class rV extends IC{toString(){let t="[";if(on.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=xe(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function Tbt(){var e=new ji(9);return ji!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function kbt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Pbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=c*s-a*u,h=-c*o+a*l,d=u*o-s*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(a*n-i*s)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-a*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(s*r-n*o)*p,e):null}function Cbt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*(u*o-s*l)+r*(-u*i+s*a)+n*(l*i-o*a)}function BI(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],m=r[4],g=r[5],y=r[6],b=r[7],w=r[8];return e[0]=h*n+d*s+p*u,e[1]=h*i+d*a+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+m*s+g*u,e[4]=v*i+m*a+g*c,e[5]=v*o+m*l+g*f,e[6]=y*n+b*s+w*u,e[7]=y*i+b*a+w*c,e[8]=y*o+b*l+w*f,e}function Ebt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*n+d*s+u,e[7]=h*i+d*a+c,e[8]=h*o+d*l+f,e}function Abt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*s,e[1]=d*i+h*a,e[2]=d*o+h*l,e[3]=d*s-h*n,e[4]=d*a-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function VI(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Mbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[3]=c-g,e[6]=h+m,e[1]=c+g,e[4]=1-u-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-u-f,e}var yT;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(yT||(yT={}));const xbt=Object.freeze([1,0,0,0,1,0,0,0,1]);class xr extends rV{static get IDENTITY(){return Lbt()}static get ZERO(){return Ibt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return yT}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(xbt)}fromObject(t){return this.check()}fromQuaternion(t){return Mbt(this,t),this.check()}set(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=i,this[2]=a,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=s,this[8]=u,this.check()}determinant(){return Cbt(this)}transpose(){return kbt(this,this),this.check()}invert(){return Pbt(this,this),this.check()}multiplyLeft(t){return BI(this,t,this),this.check()}multiplyRight(t){return BI(this,this,t),this.check()}rotate(t){return Abt(this,this,t),this.check()}scale(t){return Array.isArray(t)?VI(this,this,t):VI(this,this,[t,t]),this.check()}translate(t){return Ebt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=lbt(r||[-0,-0],t,this);break;case 3:n=JB(r||[-0,-0,-0],t,this);break;case 4:n=qB(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Kd(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let Fv,$v;function Ibt(){return Fv||(Fv=new xr([0,0,0,0,0,0,0,0,0]),Object.freeze(Fv)),Fv}function Lbt(){return $v||($v=new xr,Object.freeze($v)),$v}function Obt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rbt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function bT(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],g=t[15],y=r*a-n*s,b=r*l-i*s,w=r*u-o*s,T=n*l-i*a,S=n*u-o*a,k=i*u-o*l,x=c*v-f*p,A=c*m-h*p,I=c*g-d*p,L=f*m-h*v,N=f*g-d*v,z=h*g-d*m,V=y*z-b*N+w*L+T*I-S*A+k*x;return V?(V=1/V,e[0]=(a*z-l*N+u*L)*V,e[1]=(i*N-n*z-o*L)*V,e[2]=(v*k-m*S+g*T)*V,e[3]=(h*S-f*k-d*T)*V,e[4]=(l*I-s*z-u*A)*V,e[5]=(r*z-i*I+o*A)*V,e[6]=(m*w-p*k-g*b)*V,e[7]=(c*k-h*w+d*b)*V,e[8]=(s*N-a*I+u*x)*V,e[9]=(n*I-r*N-o*x)*V,e[10]=(p*S-v*w+g*y)*V,e[11]=(f*w-c*S-d*y)*V,e[12]=(a*A-s*L-l*x)*V,e[13]=(r*L-n*A+i*x)*V,e[14]=(v*b-p*T-m*y)*V,e[15]=(c*T-f*b+h*y)*V,e):null}function Dbt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=t*s-r*o,y=t*a-n*o,b=t*l-i*o,w=r*a-n*s,T=r*l-i*s,S=n*l-i*a,k=u*p-c*d,x=u*v-f*d,A=u*m-h*d,I=c*v-f*p,L=c*m-h*p,N=f*m-h*v;return g*N-y*L+b*I+w*A-T*x+S*k}function nu(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=r[0],w=r[1],T=r[2],S=r[3];return e[0]=b*n+w*a+T*f+S*v,e[1]=b*i+w*l+T*h+S*m,e[2]=b*o+w*u+T*d+S*g,e[3]=b*s+w*c+T*p+S*y,b=r[4],w=r[5],T=r[6],S=r[7],e[4]=b*n+w*a+T*f+S*v,e[5]=b*i+w*l+T*h+S*m,e[6]=b*o+w*u+T*d+S*g,e[7]=b*s+w*c+T*p+S*y,b=r[8],w=r[9],T=r[10],S=r[11],e[8]=b*n+w*a+T*f+S*v,e[9]=b*i+w*l+T*h+S*m,e[10]=b*o+w*u+T*d+S*g,e[11]=b*s+w*c+T*p+S*y,b=r[12],w=r[13],T=r[14],S=r[15],e[12]=b*n+w*a+T*f+S*v,e[13]=b*i+w*l+T*h+S*m,e[14]=b*o+w*u+T*d+S*g,e[15]=b*s+w*c+T*p+S*y,e}function T1(e,t,r){var n=r[0],i=r[1],o=r[2],s,a,l,u,c,f,h,d,p,v,m,g;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],m=t[10],g=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=m,e[11]=g,e[12]=s*n+c*i+p*o+t[12],e[13]=a*n+f*i+v*o+t[13],e[14]=l*n+h*i+m*o+t[14],e[15]=u*n+d*i+g*o+t[15]),e}function RC(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Nbt(e,t,r,n){var i=n[0],o=n[1],s=n[2],a=Math.hypot(i,o,s),l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F;return a<Jd?null:(a=1/a,i*=a,o*=a,s*=a,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],m=t[5],g=t[6],y=t[7],b=t[8],w=t[9],T=t[10],S=t[11],k=i*i*c+u,x=o*i*c+s*l,A=s*i*c-o*l,I=i*o*c-s*l,L=o*o*c+u,N=s*o*c+i*l,z=i*s*c+o*l,V=o*s*c-i*l,F=s*s*c+u,e[0]=f*k+v*x+b*A,e[1]=h*k+m*x+w*A,e[2]=d*k+g*x+T*A,e[3]=p*k+y*x+S*A,e[4]=f*I+v*L+b*N,e[5]=h*I+m*L+w*N,e[6]=d*I+g*L+T*N,e[7]=p*I+y*L+S*N,e[8]=f*z+v*V+b*F,e[9]=h*z+m*V+w*F,e[10]=d*z+g*V+T*F,e[11]=p*z+y*V+S*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function nV(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=s*i+c*n,e[6]=a*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-s*n,e[10]=f*i-a*n,e[11]=h*i-l*n,e}function Fbt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=s*i-c*n,e[2]=a*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=s*n+c*i,e[10]=a*n+f*i,e[11]=l*n+h*i,e}function iV(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=s*i+c*n,e[2]=a*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-s*n,e[6]=f*i-a*n,e[7]=h*i-l*n,e}function $bt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,u,c),e}function zbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[1]=c+g,e[2]=h-m,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bbt(e,t,r,n,i,o,s){var a=1/(r-t),l=1/(i-n),u=1/(o-s);return e[0]=o*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(s+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*u,e[15]=0,e}function Vbt(e,t,r,n,i){var o=1/Math.tan(t/2),s;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(s=1/(n-i),e[10]=(i+n)*s,e[14]=2*i*n*s):(e[10]=-1,e[14]=-2*n),e}var Ubt=Vbt;function Wbt(e,t,r,n,i,o,s){var a=1/(t-r),l=1/(n-i),u=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(s+o)*u,e[15]=1,e}var jbt=Wbt;function Gbt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p=t[0],v=t[1],m=t[2],g=n[0],y=n[1],b=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Jd&&Math.abs(v-T)<Jd&&Math.abs(m-S)<Jd?Obt(e):(c=p-w,f=v-T,h=m-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-b*f,o=b*c-g*h,s=g*f-y*c,d=Math.hypot(i,o,s),d?(d=1/d,i*=d,o*=d,s*=d):(i=0,o=0,s=0),a=f*s-h*o,l=h*i-c*s,u=c*o-f*i,d=Math.hypot(a,l,u),d?(d=1/d,a*=d,l*=d,u*=d):(a=0,l=0,u=0),e[0]=i,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+s*m),e[13]=-(a*p+l*v+u*m),e[14]=-(c*p+f*v+h*m),e[15]=1,e)}function Hbt(){var e=new ji(4);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Xbt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function DC(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Ybt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function qbt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function Zbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e[2]=i*s,e[3]=o*s,e}function Kbt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Jbt(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e[3]=a+n*(r[3]-a),e}function Vf(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,e}function Qbt(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2],u=r[3],c=u*n+a*o-l*i,f=u*i+l*n-s*o,h=u*o+s*i-a*n,d=-s*n-a*i-l*o;return e[0]=c*u+d*-s+f*-l-h*-a,e[1]=f*u+d*-a+h*-s-c*-l,e[2]=h*u+d*-l+c*-a-f*-s,e[3]=t[3],e}(function(){var e=Hbt();return function(t,r,n,i,o,s){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}})();var wT;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(wT||(wT={}));const t2t=45*Math.PI/180,e2t=1,j2=.1,G2=500,r2t=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class qr extends rV{static get IDENTITY(){return i2t()}static get ZERO(){return n2t()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return wT}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=m,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=s,this[6]=c,this[7]=p,this[8]=n,this[9]=a,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(r2t)}fromObject(t){return this.check()}fromQuaternion(t){return zbt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:s=j2,far:a=G2}=t;return a===1/0?o2t(this,r,n,i,o,s):Bbt(this,r,n,i,o,s,a),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Gbt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:s=j2,far:a=G2}=t;return jbt(this,r,n,i,o,s,a),this.check()}orthographic(t){const{fovy:r=t2t,aspect:n=e2t,focalDistance:i=1,near:o=j2,far:s=G2}=t;UI(r);const a=r/2,l=i*Math.tan(a),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:s})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return UI(r),Ubt(this,r,n,i,o),this.check()}determinant(){return Dbt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*s,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*s,t}transpose(){return Rbt(this,this),this.check()}invert(){return bT(this,this),this.check()}multiplyLeft(t){return nu(this,t,this),this.check()}multiplyRight(t){return nu(this,this,t),this.check()}rotateX(t){return nV(this,this,t),this.check()}rotateY(t){return Fbt(this,this,t),this.check()}rotateZ(t){return iV(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return Nbt(this,this,t,r),this.check()}scale(t){return RC(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return T1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Vf(r||[-0,-0,-0,-0],t,this),Kd(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=ubt(r||[-0,-0],t,this);break;case 3:i=LC(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Kd(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=cbt(r||[-0,-0],t,this);break;case 3:n=YB(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Kd(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let zv,Bv;function n2t(){return zv||(zv=new qr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(zv)),zv}function i2t(){return Bv||(Bv=new qr,Object.freeze(Bv)),Bv}function UI(e){if(e>Math.PI*2)throw Error("expected radians")}function o2t(e,t,r,n,i,o){const s=2*o/(r-t),a=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function WI(){var e=new ji(4);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function s2t(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function oV(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function jI(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+s*a+i*u-o*l,e[1]=i*c+s*l+o*a-n*u,e[2]=o*c+s*u+n*l-i*a,e[3]=s*c-n*a-i*l-o*u,e}function a2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-n*a,e}function l2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*a,e[1]=i*l+s*a,e[2]=o*l+n*a,e[3]=s*l-i*a,e}function u2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*a,e[1]=i*l-n*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e}function c2t(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function _m(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,m;return d=i*l+o*u+s*c+a*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Jd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(v=1-n,m=n),e[0]=v*i+m*l,e[1]=v*o+m*u,e[2]=v*s+m*c,e[3]=v*a+m*f,e}function f2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o,a=s?1/s:0;return e[0]=-r*a,e[1]=-n*a,e[2]=-i*a,e[3]=o*a,e}function h2t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function sV(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[s*3+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+s]-t[s*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[s]=(t[s*3+i]+t[i*3+s])*n}return e}var d2t=Xbt,p2t=DC,v2t=Kbt,g2t=Jbt,m2t=Ybt,_2t=qbt,aV=Zbt,y2t=function(){var e=ZB(),t=zI(1,0,0),r=zI(0,1,0);return function(n,i,o){var s=KB(i,o);return s<-.999999?(mm(e,t,i),eV(e)<1e-6&&mm(e,r,i),mbt(e,e),oV(n,e,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(mm(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+s,aV(n,n))}}();(function(){var e=WI(),t=WI();return function(r,n,i,o,s,a){return _m(e,n,s,a),_m(t,i,o,a),_m(r,e,t,2*a*(1-a)),r}})();(function(){var e=Tbt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],aV(t,sV(t,e))}})();const b2t=[0,0,0,1];class GI extends IC{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return sV(this,t),this.check()}fromAxisRotation(t,r){return oV(this,t,r),this.check()}identity(){return s2t(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}len(){return m2t(this)}lengthSquared(){return _2t(this)}dot(t){return v2t(this,t)}rotationTo(t,r){return y2t(this,t,r),this.check()}add(t){return d2t(this,this,t),this.check()}calculateW(){return c2t(this,this),this.check()}conjugate(){return h2t(this,this),this.check()}invert(){return f2t(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(g2t(this,t,r,n),this.check())}multiplyRight(t){return jI(this,this,t),this.check()}multiplyLeft(t){return jI(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return a2t(this,this,t),this.check()}rotateY(t){return l2t(this,this,t),this.check()}rotateZ(t){return u2t(this,this,t),this.check()}scale(t){return p2t(this,this,t),this.check()}slerp(t,r,n){let i,o,s;switch(arguments.length){case 1:({start:i=b2t,target:o,ratio:s}=t);break;case 2:i=this,o=t,s=r;break;default:i=t,o=r,s=n}return _m(this,i,o,s),this.check()}transformVector4(t,r=new OC){return Qbt(r,t,this),Kd(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const lV={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},HI=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,w2t={lightSources:{}};function H2(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function S2t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=H2(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=H2(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=H2(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function uV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w2t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},S2t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return uV({lightSources:t})}return{}}const T2t={name:"lights",vs:HI,fs:HI,getUniforms:uV,defines:{MAX_LIGHTS:3}},k2t=new Uint8Array([0,255,255,255]),P2t={pickingSelectedColor:null,pickingHighlightColor:k2t,pickingActive:!1,pickingAttribute:!1};function C2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P2t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const E2t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,A2t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,M2t={name:"picking",vs:E2t,fs:A2t,getUniforms:C2t},x2t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,I2t={};function L2t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function O2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I2t;if(!("material"in e))return{};const{material:t}=e;return t?L2t(t):{lighting_uEnabled:!1}}const R2t={name:"gouraud-lighting",dependencies:[T2t],vs:x2t,defines:{LIGHTING_VERTEX:1},getUniforms:O2t},D2t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,N2t={name:"transform",vs:D2t,fs:null};class l0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new l0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(b=>this._getHash(b.name)).sort(),d=s.map(b=>this._getHash(b)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),m=[],g=[];for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));for(const b of v)g.push(this._getHash(b)),g.push(this._getHash(o[b]));const y="".concat(c,"/").concat(f,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(g.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[y]){const b=Vyt(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new DB(this.gl,{hash:y,vs:b.vs,fs:b.fs,varyings:s,bufferMode:a}),this._getUniforms[y]=b.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],l=a.name;r[i++]=a,n[l]=!0}for(let o=0,s=t.length;o<s;++o){const a=t[o],l=a.name;n[l]||(r[i++]=a,n[l]=!0)}return r.length=i,r}}const F2t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function $2t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const s=t.attributes[o],a=z2t(o,r);if(o==="indices")i=s;else if(s.constant)n[a]=s.value;else{const l=s.value,u={...s};delete u.value,n[a]=[new Ce(e,l),u],B2t(o,u)}}if(i){const o=i.value||i;wt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Ce(e,{data:o,target:34963}),s]}return n}function z2t(e,t){const{attributeMap:r=F2t}=t||{};return r&&r[e]||e}function B2t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}wt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const pc=2,V2t=1e4,U2t="Model needs drawMode and vertexCount",XI=()=>{},W2t={};class ks{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Fa("model")}=r;wt(N_(t)),this.id=n,this.gl=t,this.id=r.id||Fa("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||l0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},wt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),U2t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return wt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return wt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=$2t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(mf(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return CC(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Rt.priority>=pc&&(u=this._logDrawCallStart(pc));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Rt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:m}=this,{onBeforeRender:g=XI,onAfterRender:y=XI}=this.props;g(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(W2t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:s,isIndexed:f,indexType:h,isInstanced:v,instanceCount:m,offset:f?d:0}));return y(),Rt.priority>=pc&&this._logDrawCallEnd(u,l,n),b}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}wt(r instanceof DB,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new ryt(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Ce&&r.delete()}}_setAnimationProps(t){this.animated&&wt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(mf(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new NB(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:V2t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Rt.group(pc,">>> DRAWING MODEL ".concat(this.id),{collapsed:Rt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=oyt({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:l}=AI({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=AI({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Rt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Rt.log("UNUSED UNIFORMS",Object.keys(a))();const f=ayt(this.vertexArray.configuration);Rt.table(t,o)(),Rt.table(t,s)(),Rt.table(t+1,f)(),i&&i.log({logLevel:pc,message:"Rendered to ".concat(i.id)}),Rt.groupEnd(pc)()}}class j2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Ce?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&wt(ne(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const s=r[o],{byteLength:a,usage:l,accessor:u}=s;n[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new NB(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],wt(n[o]instanceof Ce)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Ce(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const G2t="transform_uSampler_",k1="transform_uSize_",YI="transform_position";function H2t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,s=Object.keys(r).length,a=null;const l={};let u=t,c={};if(s>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(s>0){const m=K2t(d,r);if(m){const{updatedLine:g,inject:y}=m;h[p]=g,c=gT([c,y]),Object.assign(l,m.samplerTextureMap),s--}}n&&!a&&(a=Z2t(d,n))}),n){wt(i);const d="".concat(k1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(YI," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(YI,`, 0, 1.);
`);c=gT([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:a,inject:c,samplerTextureMap:l}}function X2t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,s;r&&({width:o,height:s}=n,i["".concat(k1).concat(r)]=[o,s]);for(const a in t)({width:o,height:s}=t[a]),i["".concat(k1).concat(a)]=[o,s];return i}function Y2t(e){return WB(e,["attribute","in"])}function q2t(e){const t="".concat(G2t).concat(e),r="".concat(k1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function Z2t(e,t){const r=WB(e,["varying","out"]);return r&&r.name===t?r.type:null}function K2t(e,t){const r={},n=Y2t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const s="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:u}=q2t(o),c=Zyt(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(l,").").concat(c,`;
`);return r[a]=o,{updatedLine:s,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const J2t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},Q2t="transform_output";class twt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},r,t.attributes),a=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=n[h]}this._setSourceTextureParameters();const c=X2t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=$_(r);if(!t)return n;const i=n.constructor,o=Kyt(this.targetTextureType),s=new i(n.length*o/4);let a=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)s[a++]=n[l+u];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof Sn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Ce(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:s,height:a}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:s,height:a})):t.framebuffer=new lr(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(J2t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=IB(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:l}=H2t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=gT([t.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=l;const c=t._fs||jB({version:OB(i),input:this.targetTextureVarying,inputType:s,output:Q2t}),f=this.hasSourceTextures||this.targetTextureVarying?[N2t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class NC{static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();wt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new ks(r,Object.assign({},t,{fs:t.fs||jB({version:OB(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){ewt(r)&&(this.bufferTransform=new j2t(t,r)),rwt(r)&&(this.textureTransform=new twt(t,r)),wt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function ewt(e){return!!(!mf(e.feedbackBuffers)||!mf(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function rwt(e){return!!(!mf(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const qI={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Nu{static get DRAW_MODE(){return qI}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Fa("geometry"),drawMode:n=qI.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,wt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(wt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:s,size:a,constant:l}=o;!l&&s&&a>=1&&(n=Math.min(n,s.length/a))}return wt(Number.isFinite(n)),n}}let nwt=1,iwt=1;class cV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,s=nwt++,a={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=iwt++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const fV="#define SMOOTH_EDGE_RADIUS 0.5",owt=`
`.concat(fV,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),swt=`
`.concat(fV,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),awt={name:"geometry",vs:owt,fs:swt},ae={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ae,"IDENTITY",{get:()=>(qt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Oi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},$a={common:0,meters:1,pixels:2},ZI={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},u0={DRAW:"draw",MASK:"mask"},lwt=Object.keys(ae).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ae[e],";")).join(""),uwt=Object.keys(Oi).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Oi[e],";")).join(""),cwt=Object.keys($a).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat($a[e],";")).join(""),fwt="".concat(lwt,`
`).concat(uwt,`
`).concat(cwt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function hwt(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function c0(e){let t={},r;return n=>{for(const i in n)if(!hwt(n[i],t[i])){r=e(n),t=n;break}return r}}const KI=[0,0,0,0],dwt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],hV=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],pwt=[0,0,0],dV=[0,0,0],vwt=c0(_wt);function pV(e,t,r=dV){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===ae.LNGLAT_OFFSETS||t===ae.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Oi.WEB_MERCATOR:(t===ae.LNGLAT||t===ae.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Oi.WEB_MERCATOR_AUTO_OFFSET:t===ae.LNGLAT?n=i:t===ae.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Oi.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Oi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function gwt(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=KI,l=KI,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=pV(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Vf([],l,s),o=n||o,s=nu([],i,o),s=nu([],s,dwt)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function mwt({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=ae.DEFAULT,coordinateOrigin:i=dV,autoWrapLongitude:o=!1}){n===ae.DEFAULT&&(n=e.isGeospatial?ae.LNGLAT:ae.CARTESIAN);const s=vwt({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=r||hV,s}function _wt({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=gwt(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Vf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:pwt,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:hV,project_uCameraPosition:a};if(u){const p=e.getDistanceScales(u);switch(r){case ae.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ae.LNGLAT:case ae.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ae.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const ywt={};function bwt(e=ywt){return"viewport"in e?mwt(e):{}}const FC={name:"project",dependencies:[tbt,awt],vs:fwt,getUniforms:bwt},wwt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Fu={name:"project32",dependencies:[FC],vs:wwt};function Swt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ef(e,t){const r=Vf([],t,e);return DC(r,r,1/r[3]),r}function JI(e,t){const r=e%t;return r<0?t+r:r}function ST(e,t,r){return e<t?t:e>r?r:e}function Twt(e){return Math.log(e)*Math.LOG2E}const $C=Math.log2||Twt;function Ps(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Ri=Math.PI,vV=Ri/4,zi=Ri/180,TT=180/Ri,Op=512,kT=4003e4,Vv=85.051129,kwt=1.5;function Pwt(e){return $C(e)}function za(e){const[t,r]=e;Ps(Number.isFinite(t)),Ps(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*zi,i=r*zi,o=Op*(n+Ri)/(2*Ri),s=Op*(Ri+Math.log(Math.tan(vV+i*.5)))/(2*Ri);return[o,s]}function yf(e){const[t,r]=e,n=t/Op*(2*Ri)-Ri,i=2*(Math.atan(Math.exp(r/Op*(2*Ri)-Ri))-vV);return[n*TT,i*TT]}function Cwt(e){const{latitude:t}=e;Ps(Number.isFinite(t));const r=Math.cos(t*zi);return Pwt(kT*r)-9}function PT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Ps(Number.isFinite(t)&&Number.isFinite(r));const i=Op,o=Math.cos(t*zi),s=i/360,a=s/o,l=i/kT/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(n){const c=zi*Math.tan(t*zi)/o,f=s*c/2,h=i/kT*c,d=h/a*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function gV(e,t){const[r,n,i]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:u}=PT({longitude:r,latitude:n,highPrecision:!0}),c=za(e);c[0]+=o*(l[0]+u[0]*s),c[1]+=s*(l[1]+u[1]*s);const f=yf(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function Ewt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:s}=e,a=Swt();T1(a,a,[0,0,-i]),nV(a,a,-r*zi),iV(a,a,n*zi);const l=o/t;return RC(a,a,[l,l,l]),s&&T1(a,a,gbt([],s)),a}function Awt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=P1(kwt)}=e;n!==void 0&&(c=P1(n));const f=c*zi,h=i*zi,d=mV(c);let p=d;s&&(p+=s[2]*a/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),m=Math.sin(v)*p/Math.sin(ST(Math.PI/2-h-v,.01,Math.PI-.01)),g=Math.sin(h)*m+p,y=p*10,b=Math.min(g*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:b}}function P1(e){return 2*Math.atan(.5/e)*TT}function mV(e){return .5/Math.tan(.5*e*zi)}function _V(e,t){const[r,n,i=0]=e;return Ps(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),ef(t,[r,n,i,1])}function z_(e,t,r=0){const[n,i,o]=e;if(Ps(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return ef(t,[n,i,o,1]);const s=ef(t,[n,i,0,1]),a=ef(t,[n,i,1,1]),l=s[2],u=a[2],c=l===u?0:((r||0)-l)/(u-l);return XB([],s,a,c)}function yV(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[u,c]]=n,f=Mwt(e.padding),h=za([a,ST(c,-Vv,Vv)]),d=za([u,ST(l,-Vv,Vv)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(s[0])*2,r-f.top-f.bottom-Math.abs(s[1])*2];Ps(v[0]>0&&v[1]>0);const m=v[0]/p[0],g=v[1]/p[1],y=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/g,w=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+b],T=yf(w),S=Math.min(o,$C(Math.abs(Math.min(m,g))));return Ps(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function Mwt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Ps(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const QI=Math.PI/180;function xwt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},s=i([0,n],o),a=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*QI:Math.atan(.5/e.altitude),f=(90-e.pitch)*QI;return c>f-.01?(l=tL(e,0,t),u=tL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[s,a,u,l]}function tL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=ef(n,[t,0,1,1]),o=ef(n,[t,e.height,1,1]),a=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=XB([],i,o,a),u=yf(l);return u.push(r),u}const eL=512;function Iwt(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=e;(i<-180||i>180)&&(i=JI(i+180,360)-180),(a<-180||a>180)&&(a=JI(a+180,360)-180);const l=$C(r/eL);if(s<=l)s=l,o=0;else{const u=r/2/Math.pow(2,s),c=yf([0,u])[1];if(o<c)o=c;else{const f=yf([0,eL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:s,pitch:n,bearing:a}}const Lwt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Owt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Rwt=c0(zwt),Dwt=c0(Bwt),Nwt=[0,0,0,1],Fwt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function $wt(e,t){const[r,n,i]=e,o=z_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function zwt({viewport:e,center:t}){return new qr(e.viewProjectionMatrix).invert().transform(t)}function Bwt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(s=>$wt(s,n));for(const s of t){const a=s.clone().translate(new kt(e.center).negate()),l=o.map(c=>a.transform(c)),u=new qr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(s))}return r}function Vwt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||Nwt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=Rwt({viewport:e.viewport,center:t.project_uCenter}),o=[],s=Dwt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let a=0;a<e.shadowMatrices.length;a++){const l=s[a],u=l.clone().translate(new kt(e.viewport.center).negate());t.project_uCoordinateSystem===ae.LNGLAT&&t.project_uProjectionMode===Oi.WEB_MERCATOR?(s[a]=u,o[a]=i):(s[a]=l.clone().multiplyRight(Fwt),o[a]=u.transform(i))}for(let a=0;a<s.length;a++)n["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],n["shadow_uProjectCenters[".concat(a,"]")]=o[a],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(a)]=e.shadowMaps[a]:n["shadow_uShadowMap".concat(a)]=e.dummyShadowMap;return n}const X2={name:"shadow",dependencies:[FC],vs:Lwt,fs:Owt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?Vwt(e,t):{}},$u={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...M2t},Uwt=[FC],Wwt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function jwt(e){const t=l0.getDefaultProgramManager(e);for(const r of Uwt)t.addDefaultModule(r);for(const r of Wwt)t.addShaderHook(r);return t}const Gwt=[255,255,255],Hwt=1;let Xwt=0;class Ywt{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","ambient");const{color:r=Gwt}=t,{intensity:n=Hwt}=t;this.id=t.id||"ambient-".concat(Xwt++),this.color=r,this.intensity=n}}const qwt=[255,255,255],Zwt=1,Kwt=[0,0,-1];let Jwt=0;class rL{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","directional"),P(this,"direction",void 0),P(this,"shadow",void 0);const{color:r=qwt}=t,{intensity:n=Zwt}=t,{direction:i=Kwt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(Jwt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new kt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class Qwt{constructor(t,r={id:"pass"}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class B_ extends Qwt{constructor(...t){super(...t),P(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return Ts(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&eSt(u),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];s(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const m=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(m)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){const l=[],u=bV(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,s,n,a),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:s,view:a},l){const u=tSt(t,{moduleParameters:n,target:o,viewport:s});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;ai(t,{scissorTest:!0,scissor:u},()=>CC(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Ts(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:m}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=s;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:m})}catch(g){h.raiseError(g,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let s=t.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(r))return!1;r.layer=s,s=s.parent}if(n){const a=r.layer.id;if(a in i||(i[a]=n(r)),!i[a])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const s=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:gf(this.gl)});if(r)for(const l of r){var a;Object.assign(s,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,t))}return Object.assign(s,this.getModuleParameters(t,r),i)}}function bV(e=0,t={}){const r={},n=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||bV(t[l],t);u=c(i,o),r[a]=c}else Number.isFinite(s)?(u=s+(t[l]||0),r[a]=null):u=e;return o&&u>=e&&(e=u+1),t[a]=u,u};return n}function tSt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||gf(e),s=i?r.height:e.drawingBufferHeight,a=n;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function eSt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;Ts(e,{viewport:[0,0,t,r]}),e.clear(16640)}class rSt extends B_{constructor(t,r){super(t,r),P(this,"shadowMap",void 0),P(this,"depthBuffer",void 0),P(this,"fbo",void 0),this.shadowMap=new Sn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new zc(t,{format:33189,width:1,height:1}),this.fbo=new lr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;ai(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=gf(this.gl),o=n.width*i,s=n.height*i;(o!==r.width||s!==r.height)&&r.resize({width:o,height:s}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const nSt={color:[255,255,255],intensity:1},nL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],iSt=[0,0,0,200/255];class wV{constructor(t={}){P(this,"id","lighting-effect"),P(this,"props",null),P(this,"shadowColor",iSt),P(this,"shadow",void 0),P(this,"ambientLight",null),P(this,"directionalLights",[]),P(this,"pointLights",[]),P(this,"shadowPasses",[]),P(this,"shadowMaps",[]),P(this,"dummyShadowMap",null),P(this,"programManager",void 0),P(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=l0.getDefaultProgramManager(t),X2&&this.programManager.addDefaultModule(X2)),this.dummyShadowMap||(this.dummyShadowMap=new Sn(t,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(X2),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new qr().lookAt({eye:new kt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new rSt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new Ywt(nSt),this.directionalLights.push(new rL(nL[0]),new rL(nL[1])))}}class oSt{constructor(t={}){P(this,"_pool",[]),P(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,a,f);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const s=this._pool,a=t.BYTES_PER_ELEMENT*o,l=s.findIndex(u=>u.byteLength>=a);if(l>=0){const u=new t(s.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(s=>s.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const bf=new oSt;function bd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function sSt(e,t){const r=e%t;return r<0?t+r:r}function aSt(e){return[e[12],e[13],e[14]]}function lSt(e){return{left:vc(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:vc(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:vc(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:vc(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:vc(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:vc(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const iL=new kt;function vc(e,t,r,n){iL.set(e,t,r);const i=iL.len();return{distance:n/i,normal:new kt(-e/i,-t/i,-r/i)}}function uSt(e){return e-Math.fround(e)}let zh;function Y2(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;zh=bf.allocate(zh,o,{type:Float32Array,size:r*2});let s=n,a=0;for(;s<i;){for(let l=0;l<r;l++){const u=e[s++];zh[a+l]=u,zh[a+l+r]=uSt(u)}a+=r*2}return zh.subarray(0,o*r*2)}const cSt=Math.PI/180,fSt=bd(),oL=[0,0,0],hSt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function dSt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:s,far:a}){const l=e/t,u=r?new qr().orthographic({fovy:n,aspect:l,focalDistance:i,near:s,far:a}):new qr().perspective({fovy:n,aspect:l,near:s,far:a});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=Ar((c+e-f)/2,0,e)-e/2,v=Ar((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Ha{constructor(t={}){P(this,"id",void 0),P(this,"x",void 0),P(this,"y",void 0),P(this,"width",void 0),P(this,"height",void 0),P(this,"isGeospatial",void 0),P(this,"zoom",void 0),P(this,"focalDistance",void 0),P(this,"position",void 0),P(this,"modelMatrix",void 0),P(this,"distanceScales",void 0),P(this,"scale",void 0),P(this,"center",void 0),P(this,"cameraPosition",void 0),P(this,"projectionMatrix",void 0),P(this,"viewMatrix",void 0),P(this,"viewMatrixUncentered",void 0),P(this,"viewMatrixInverse",void 0),P(this,"viewProjectionMatrix",void 0),P(this,"pixelProjectionMatrix",void 0),P(this,"pixelUnprojectionMatrix",void 0),P(this,"resolution",void 0),P(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||hSt,this.focalDistance=t.focalDistance||1,this.position=t.position||oL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Oi.WEB_MERCATOR:Oi.WEB_MERCATOR_AUTO_OFFSET:Oi.IDENTITY}equals(t){return t instanceof Ha?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Lo(t.projectionMatrix,this.projectionMatrix)&&Lo(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=_V(n,this.pixelProjectionMatrix),[o,s]=i,a=r?s:this.height-s;return t.length===2?[o,a]:[o,a,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=z_([i,a,s],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=za(t);return r[1]=Ar(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?yf(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),s=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],s[0]),Math.min(n[1],i[1],o[1],s[1]),Math.max(n[0],i[0],o[0],s[0]),Math.max(n[1],i[1],o[1],s[1])]}getDistanceScales(t){return t?PT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,lSt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Cwt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||PT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:s}=t;let a=oL;if(o&&(a=s?new qr(s).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new kt(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:r=fSt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new qr().multiplyRight(r).translate(new kt(this.center).negate()),this.projectionMatrix=n||dSt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*cSt,focalDistance:c,padding:u,near:a,far:l});const f=bd();nu(f,f,this.projectionMatrix),nu(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=bT([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=aSt(this.viewMatrixInverse);const h=bd(),d=bd();RC(h,h,[this.width/2,-this.height/2,1]),T1(h,h,[1,-1,0]),nu(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=bT(bd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||qt.warn("Pixel project matrix not invertible")()}}P(Ha,"displayName","Viewport");const pSt=512,vSt=4003e4,gSt=Math.PI/180;function sL(e){const t=Math.cos(e*gSt);return pSt/vSt/t}class Fo extends Ha{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:m=1.5}=t;const g=Math.pow(2,i);p=p||1,v=v||1;let y,b=null;c?(m=c[5]/2,y=P1(m)):(t.fovy?(y=t.fovy,m=mV(y)):y=P1(m),b=Awt({width:p,height:v,pitch:o,fovy:y,nearZMultiplier:a,farZMultiplier:l}));let w=Ewt({height:v,pitch:o,bearing:s,scale:g,altitude:m});h&&(w=new qr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...b,fovy:y,focalDistance:m}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"pitch",void 0),P(this,"bearing",void 0),P(this,"altitude",void 0),P(this,"fovy",void 0),P(this,"orthographic",void 0),P(this,"_subViewports",void 0),P(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=m,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Fo({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*sL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/sL(n);return[r,n,i]}addMetersToLngLat(t,r){return gV(t,r)}panByPosition(t,r){const n=z_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=S1([],i,HB([],n)),s=S1([],this.center,o),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(t={}){const r=xwt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:s,zoom:a}=yV({width:n,height:i,bounds:t,...r});return new Fo({width:n,height:i,longitude:o,latitude:s,zoom:a})}}P(Fo,"displayName","WebMercatorViewport");function q2(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Fo){const[i,o,s=0]=e,a=t.getDistanceScales([i,o]);n[2]=s*a.unitsPerMeter[2]}return n}function mSt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return i===ae.DEFAULT&&(i=t.isGeospatial?ae.LNGLAT:ae.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function SV(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[s,a,l=0]=e;switch(r&&([s,a,l]=Vf([],[s,a,l,1],r)),n){case ae.LNGLAT:return q2([s,a,l],t,o);case ae.LNGLAT_OFFSETS:return q2([s+i[0],a+i[1],l+(i[2]||0)],t,o);case ae.METER_OFFSETS:return q2(gV(i,[s,a,l]),t,o);case ae.CARTESIAN:default:return t.isGeospatial?[s+i[0],a+i[1],l+i[2]]:t.projectPosition([s,a,l])}}function _St(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=mSt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=pV(r,n,i),f=SV(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:c});if(c){const h=r.projectPosition(l||u);tV(f,f,h)}return f}const Lc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},C1=Symbol.for("component"),rf=Symbol.for("asyncPropDefaults"),_u=Symbol.for("asyncPropOriginal"),ba=Symbol.for("asyncPropResolved");function V_(e,t=()=>!0){return Array.isArray(e)?TV(e,t,[]):t(e)?[e]:[]}function TV(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?TV(i,t,r):t(i)&&r.push(i)}return r}function ySt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let s=0;for(let a=r;s<i;s++)e[a++]=t[s];for(;s<o;)s<o-s?(e.copyWithin(r+s,r,r+s),s*=2):(e.copyWithin(r+s,r,r+o-s),s=o);return e}class bSt{constructor(t,r,n){P(this,"id",void 0),P(this,"context",void 0),P(this,"isLoaded",void 0),P(this,"persistent",void 0),P(this,"_loadCount",0),P(this,"_subscribers",new Set),P(this,"_data",void 0),P(this,"_loader",void 0),P(this,"_error",void 0),P(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=y1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class wSt{constructor({gl:t,protocol:r}){P(this,"protocol",void 0),P(this,"_context",void 0),P(this,"_resources",void 0),P(this,"_consumers",void 0),P(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new bSt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(n,i,a,r),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,s=o[t]=o[t]||{},a=s[r]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),n&&(s[r]=a,a.onChange=i,a.resourceId=n.id,n.subscribe(a))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const SSt="layerManager.setLayers",TSt="layerManager.activateViewport";class kSt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){P(this,"layers",void 0),P(this,"context",void 0),P(this,"resourceManager",void 0),P(this,"_lastRenderedLayers",[]),P(this,"_needsRedraw",!1),P(this,"_needsUpdate",!1),P(this,"_nextLayers",null),P(this,"_debug",!1),P(this,"activateViewport",s=>{jr(TSt,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new wSt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&jwt(t),stats:n||new R_({id:"deck.gl"}),viewport:i||new Ha({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new cV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){jr(SSt,this,r,t),this._lastRenderedLayers=t;const n=V_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const s of t)n[s.id]?qt.warn("Multiple old layers with same id ".concat(s.id))():n[s.id]=s;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&qt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Lc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=Lc.MATCHED,r!==t&&(t.lifecycle=Lc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=Lc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Lc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Uf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Uf(n,i)))return!1}return!0}class PSt{constructor(t){P(this,"width",void 0),P(this,"height",void 0),P(this,"views",void 0),P(this,"viewState",void 0),P(this,"controllers",void 0),P(this,"timeline",void 0),P(this,"_viewports",void 0),P(this,"_viewportMap",void 0),P(this,"_isUpdating",void 0),P(this,"_needsRedraw",void 0),P(this,"_needsUpdate",void 0),P(this,"_eventManager",void 0),P(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const s=n[o];if(s.containsPixel(i)){const a=t.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=V_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Uf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):qt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const s={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,s,a,l),this._viewports.unshift(a)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const CSt=/([0-9]+\.?[0-9]*)(%|px)/;function qs(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=CSt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Zs(e,t){return e.relative?Math.round(e.position*t):e.position}function mr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class kV{constructor(t){P(this,"id",void 0),P(this,"viewportInstance",void 0),P(this,"_x",void 0),P(this,"_y",void 0),P(this,"_width",void 0),P(this,"_height",void 0),P(this,"_padding",void 0),P(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:l}=t||{};mr(!l||l instanceof Ha),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=qs(n),this._y=qs(i),this._width=qs(o),this._height=qs(s),this._padding=a&&{left:qs(a.left||0),right:qs(a.right||0),top:qs(a.top||0),bottom:qs(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Uf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Zs(this._x,t),y:Zs(this._y,r),width:Zs(this._width,t),height:Zs(this._height,r)};return this._padding&&(n.padding={left:Zs(this._padding.left,t),top:Zs(this._padding.top,r),right:Zs(this._padding.right,t),bottom:Zs(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class f0{constructor(t){P(this,"_inProgress",void 0),P(this,"_handle",void 0),P(this,"_timeline",void 0),P(this,"time",void 0),P(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const aL=()=>{},CT={BREAK:1,SNAP_TO_END:2,IGNORE:3},ESt=e=>e,ASt=CT.BREAK;class MSt{constructor(t){P(this,"getControllerState",void 0),P(this,"props",void 0),P(this,"propsInTransition",void 0),P(this,"transition",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:l}}=r,u=l(n/a),c=i.interpolateProps(o,s,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new f0(t.timeline),this.onViewStateChange=t.onViewStateChange||aL,this.onStateChange=t.onStateChange||aL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;i={...n,...o===CT.SNAP_TO_END?s:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===CT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,s=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(s===0)return;const a=o.initializeProps(t,i);this.propsInTransition={};const l={duration:s,easing:r.transitionEasing||ESt,interpolator:o,interruption:r.transitionInterruption||ASt,startProps:a.start,endProps:a.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class xSt{constructor(t){P(this,"_propsToCompare",void 0),P(this,"_propsToExtract",void 0),P(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!Lo(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];mr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const ISt=["longitude","latitude","zoom","bearing","pitch"],LSt=["longitude","latitude","zoom"];class U_ extends xSt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:ISt,required:LSt},super(n.transitionProps),P(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const s=i(t),a=i(r),l=s.unproject(o);n.start.around=o,Object.assign(n.end,{around:a.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=ru(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,ru(t.around,r.around,n)))}return i}}const Ks={transitionDuration:0},OSt=300,Uv=e=>1-(1-e)*(1-e),gc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},El={};class PV{constructor(t){P(this,"props",void 0),P(this,"state",{}),P(this,"transitionManager",void 0),P(this,"eventManager",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"makeViewport",void 0),P(this,"_controllerState",void 0),P(this,"_events",{}),P(this,"_interactionState",{isDragging:!1}),P(this,"_customEvents",[]),P(this,"_eventStartBlocked",null),P(this,"_panMove",!1),P(this,"invertPan",!1),P(this,"dragMode","rotate"),P(this,"inertia",0),P(this,"scrollZoom",!0),P(this,"dragPan",!0),P(this,"dragRotate",!0),P(this,"doubleClickZoom",!0),P(this,"touchZoom",!0),P(this,"touchRotate",!1),P(this,"keyboard",!0),this.transitionManager=new MSt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?OSt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(gc.WHEEL,c&&n),this.toggleEvents(gc.PAN,c&&(i||o)),this.toggleEvents(gc.PINCH,c&&(a||l)),this.toggleEvents(gc.TRIPLE_PAN,c&&l),this.toggleEvents(gc.DOUBLE_TAP,c&&s),this.toggleEvents(gc.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Ks,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let s=2/(1+Math.exp(-Math.abs(o*n)));o<0&&s!==0&&(s=1/s);const a=this.controllerState.zoom({pos:r,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Ks,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Uv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return El._startPinchRotation=t.rotation,El._lastPinchEvent=t,this.updateViewport(n,Ks,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:El._startPinchRotation-n})}return this.updateViewport(r,Ks,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),El._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=El;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const s=Math.log2(t.scale),a=(s-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,s+a*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Uv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return El._startPinchRotation=null,El._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?a.zoomOut(n).zoomOut(n):a.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?a.zoomIn(n).zoomIn(n):a.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=a.rotateLeft(o),u.isRotating=!0):(l=a.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=a.rotateRight(o),u.isRotating=!0):(l=a.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=a.rotateUp(s),u.isRotating=!0):(l=a.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=a.rotateDown(s),u.isRotating=!0):(l=a.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Ks:t?{...r,transitionInterpolator:new U_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class CV{constructor(t,r){P(this,"_viewportProps",void 0),P(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const lL=5,RSt=1.2;class DSt extends CV{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:b,startZoom:w,normalize:T=!0}=t;mr(Number.isFinite(o)),mr(Number.isFinite(i)),mr(Number.isFinite(s)),super({width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:b,startZoom:w}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return t?a=this._getNewRotation(t,i,s,o):a={bearing:o+r,pitch:s+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(n);l=Ar(l,a,s);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=Ar(i,n,r);const{maxPitch:o,minPitch:s,pitch:a}=t;t.pitch=Ar(a,s,o);const{normalize:l=!0}=t;return l&&Object.assign(t,Iwt(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],s=t[1]-r[1],a=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;s>0?Math.abs(c-l)>lL&&(h=s/(l-c)*RSt):s<0&&l>lL&&(h=1-a/l),h=Ar(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let m=n;return h>0?m=n+h*(p-n):h<0&&(m=n-h*(d-n)),{pitch:m,bearing:v}}}class NSt extends PV{constructor(...t){super(...t),P(this,"ControllerState",DSt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new U_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),P(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class EV extends kV{get ViewportType(){return Fo}get ControllerType(){return NSt}}P(EV,"displayName","MapView");class FSt extends B_{constructor(t,r){super(t,r),P(this,"maskMap",void 0),P(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new Sn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new lr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,ai(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===u0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const $St=new qr().lookAt({eye:[0,0,1]});function zSt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,s=e/2,a=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=Ar((u+e-c)/2,0,e)-e/2,p=Ar((f+t-h)/2,0,t)-t/2;o-=d,s-=d,a+=p,l+=p}return new qr().ortho({left:o,right:s,bottom:a,top:l,near:r,far:n})}class BSt extends Ha{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),m=Math.pow(2,f);p={unitsPerMeter:[v/d,m/d,1],metersPerUnit:[d/v,d/m,1]}}super({...t,longitude:void 0,position:a,viewMatrix:$St.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:zSt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=z_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=S1([],i,HB([],n)),s=S1([],this.center,o);return{target:this.unprojectFlat(s)}}}class VSt extends CV{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let u;if(t){let c=(t[0]-i[0])/a;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:s+c*180}}else u={rotationX:o+n,rotationOrbit:s+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const s=this._calculateNewZoom({scale:n,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return Ar(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=t;return t.zoom=Array.isArray(i)?[Ar(i[0],n,r),Ar(i[1],n,r)]:Ar(i,n,r),t.rotationX=Ar(t.rotationX,s,o),(a<-180||a>180)&&(t.rotationOrbit=sSt(a+180,360)-180),t}}class USt extends VSt{constructor(t){super(t),P(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[s,a]=r;switch(this.zoomAxis){case"X":s=Ar(s+o,i,n);break;case"Y":a=Ar(a+o,i,n);break;default:let l=Math.min(s+o,a+o);l<i&&(o+=i-l),l=Math.max(s+o,a+o),l>n&&(o+=n-l),s+=o,a+=o}return[s,a]}return Ar(r+o,i,n)}}class WSt extends PV{constructor(...t){super(...t),P(this,"ControllerState",USt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new U_(["target","zoom"])}),P(this,"dragMode","pan")}_onPanRotate(){return!1}}class W_ extends kV{get ViewportType(){return BSt}get ControllerType(){return WSt}}P(W_,"displayName","OrthographicView");function jSt({layers:e,viewport:t}){let r=null;for(const o of e){const s=o.getBounds();s&&(r?(r[0]=Math.min(r[0],s[0][0]),r[1]=Math.min(r[1],s[0][1]),r[2]=Math.max(r[2],s[1][0]),r[3]=Math.max(r[3],s[1][1])):r=[s[0][0],s[0][1],s[1][0],s[1][1]])}const n=t.getBounds();if(!r)return n;const i=HSt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function GSt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Fo){const{longitude:a,latitude:l,zoom:u}=yV({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Fo({longitude:a,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],s=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new W_({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(s)}})}function HSt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class XSt{constructor(){P(this,"id","mask-effect"),P(this,"props",null),P(this,"useInPicking",!0),P(this,"dummyMaskMap",void 0),P(this,"channels",[]),P(this,"masks",null),P(this,"maskPass",void 0),P(this,"maskMap",void 0),P(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Sn(t,{width:1,height:1}));const a=r.filter(f=>f.props.visible&&f.props.operation===u0.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new FSt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:s,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:s}){const a=this.channels[t.index];if(!a)return;const l=t===a||a.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==a.layerBounds[c]);if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,(l||s)&&(this.lastViewport=o,t.bounds=jSt({layers:t.layers,viewport:o}),l||!Lo(t.bounds,a.bounds))){const{maskPass:u,maskMap:c}=this,f=GSt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let s=r[o];if(!s){if(++n>4){qt.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const YSt=new wV;class qSt{constructor(){P(this,"effects",void 0),P(this,"_internalEffects",void 0),P(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Uf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new XSt),t.some(r=>r instanceof wV)||this._internalEffects.push(YSt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class ZSt extends B_{shouldDrawLayer(t){return t.props.operation===u0.DRAW}}const uL={blendFunc:[1,0,32771,0],blendEquation:32774};class AV extends B_{constructor(...t){super(...t),P(this,"pickZ",void 0),P(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const g=ai(v,{scissorTest:!0,scissor:[a,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...uL,blend:!p},()=>super.render({target:s,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:m&&JSt.bind(null,m),stats:g}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===u0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,uL),i.blend=!0,i.blendColor=KSt(this._colors,t,n)):i.blend=!1,i}}function KSt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,s=n.get(t);return s?(s.viewports.push(r),o=s.a):(o=n.size+1,o<=255?(s={a:o,layer:t,viewports:[r]},n.set(t,s),i[o]=s):(qt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function JSt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const QSt="deckRenderer.renderLayers";class t3t{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new ZSt(t),this.pickLayersPass=new AV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||lr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,jr(QSt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new lr(this.gl),new lr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===n[0]?n[1]:n[0]}}}const e3t={pickedColor:null,pickedObjectIndex:-1};function r3t({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+a-n,v=p*p;if(v>c)h+=4*l;else for(let m=0;m<l;m++){if(e[h+3]-1>=0){const y=m+s-r,b=y*y+v;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),m=f/4-v*l;return{...p,pickedColor:d,pickedX:s+m,pickedY:a+v}}qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return e3t}function n3t({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),s=o.join(",");if(!r.has(s)){const a=t(o);a?r.set(s,{...a,color:o}):qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function MV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let s=t[0];t.length>1&&(s=o3t((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let a;if(s){const l=[n-s.x,i-s.y];o!==void 0&&(l[2]=o),a=s.unproject(l)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:a,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function i3t(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=s?s.props.id:null;if(d!==h||a!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=a,r.info=null}}const u=MV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===s&&(h.color=o,h.index=a,h.picked=!0),h=xV({layer:f,info:h,mode:n});const d=h.layer;f===s&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function xV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function o3t(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class s3t{constructor(t){P(this,"gl",void 0),P(this,"pickingFBO",void 0),P(this,"depthFBO",void 0),P(this,"pickLayersPass",void 0),P(this,"layerFilter",void 0),P(this,"lastPickedInfo",void 0),P(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new AV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?n.find(h=>h.id===s):null,u=a&&i.find(h=>h.id===a)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new lr(n),lr.isSupported(n,{colorBufferFloat:!0}))){const i=new lr(n);i.attach({[36064]:new Sn(n,{format:ne(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=gf(this.gl);if(!h)return{result:[],emptyInfo:MV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=O2(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*d),{width:g,height:y}=this.pickingFBO,b=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:g,deviceHeight:y}),w={x:i-s,y:o-s,width:s*2+1,height:s*2+1};let T;const S=[],k=new Set;for(let x=0;x<a;x++){let A;if(b){const L=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:w,effects:f,pass:"picking:".concat(l)});A=r3t({...L,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:b})}else A={pickedColor:null,pickedObjectIndex:-1};let I;A.pickedLayer&&u&&this.depthFBO&&(I=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&x+1<a&&(k.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=i3t({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:I,pixelRatio:d});for(const L of T.values())L.layer&&S.push(L);if(!A.pickedColor)break}for(const x of k)x.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=gf(this.gl),p=O2(this.gl,[i,o],!0),v=p.x,m=p.y+p.height,g=O2(this.gl,[i+s,o+a],!0),y=g.x+g.width,b=g.y,w={x:v,y:b,width:y-v,height:m-b},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:s,height:a},effects:f,pass:"picking:".concat(l)}),S=n3t(T),k=new Map,x=Number.isFinite(u);for(let A=0;A<S.length&&!(x&&u&&k.size>=u);A++){const I=S[A];let L={color:I.pickedColor,layer:null,index:I.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};L=xV({layer:I.pickedLayer,info:L,mode:l}),k.has(L.object)||k.set(L.object,L)}return Array.from(k.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,m=new(u?Float32Array:Uint8Array)(p*v*4);return $_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:m}),{pickedColors:m,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const s=Math.max(0,t-n),a=Math.max(0,r-n),l=Math.min(i,t+n+1)-s,u=Math.min(o,r+n+1)-a;return l<=0||u<=0?null:{x:s,y:a,width:l,height:u}}}const a3t={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class l3t{constructor(t){P(this,"el",null),P(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,a3t),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Wf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],s=r.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function f(O,D,U){return setTimeout(b(O,U),D)}function h(O,D,U){return Array.isArray(O)?(d(O,U[D],U),!0):!1}function d(O,D,U){var H;if(!!O)if(O.forEach)O.forEach(D,U);else if(O.length!==i)for(H=0;H<O.length;)D.call(U,O[H],H,O),H++;else for(H in O)O.hasOwnProperty(H)&&D.call(U,O[H],H,O)}function p(O,D,U){var H="DEPRECATED METHOD: "+D+`
`+U+` AT 
`;return function(){var nt=new Error("get-stack-trace"),Tt=nt&&nt.stack?nt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Jt=t.console&&(t.console.warn||t.console.log);return Jt&&Jt.call(t.console,H,Tt),O.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(D){if(D===i||D===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(D),H=1;H<arguments.length;H++){var nt=arguments[H];if(nt!==i&&nt!==null)for(var Tt in nt)nt.hasOwnProperty(Tt)&&(U[Tt]=nt[Tt])}return U}:v=Object.assign;var m=p(function(D,U,H){for(var nt=Object.keys(U),Tt=0;Tt<nt.length;)(!H||H&&D[nt[Tt]]===i)&&(D[nt[Tt]]=U[nt[Tt]]),Tt++;return D},"extend","Use `assign`."),g=p(function(D,U){return m(D,U,!0)},"merge","Use `assign`.");function y(O,D,U){var H=D.prototype,nt;nt=O.prototype=Object.create(H),nt.constructor=O,nt._super=H,U&&v(nt,U)}function b(O,D){return function(){return O.apply(D,arguments)}}function w(O,D){return typeof O==a?O.apply(D&&D[0]||i,D):O}function T(O,D){return O===i?D:O}function S(O,D,U){d(I(D),function(H){O.addEventListener(H,U,!1)})}function k(O,D,U){d(I(D),function(H){O.removeEventListener(H,U,!1)})}function x(O,D){for(;O;){if(O==D)return!0;O=O.parentNode}return!1}function A(O,D){return O.indexOf(D)>-1}function I(O){return O.trim().split(/\s+/g)}function L(O,D,U){if(O.indexOf&&!U)return O.indexOf(D);for(var H=0;H<O.length;){if(U&&O[H][U]==D||!U&&O[H]===D)return H;H++}return-1}function N(O){return Array.prototype.slice.call(O,0)}function z(O,D,U){for(var H=[],nt=[],Tt=0;Tt<O.length;){var Jt=D?O[Tt][D]:O[Tt];L(nt,Jt)<0&&H.push(O[Tt]),nt[Tt]=Jt,Tt++}return U&&(D?H=H.sort(function(Tr,Qr){return Tr[D]>Qr[D]}):H=H.sort()),H}function V(O,D){for(var U,H,nt=D[0].toUpperCase()+D.slice(1),Tt=0;Tt<o.length;){if(U=o[Tt],H=U?U+nt:D,H in O)return H;Tt++}return i}var F=1;function G(){return F++}function K(O){var D=O.ownerDocument||O;return D.defaultView||D.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,rt="ontouchstart"in t,At=V(t,"PointerEvent")!==i,Ft=rt&&q.test(navigator.userAgent),Pt="touch",Ct="pen",Zt="mouse",Y="kinect",ot=25,J=1,yt=2,Et=4,xt=8,ht=1,vt=2,B=4,j=8,X=16,Q=vt|B,et=j|X,dt=Q|et,bt=["x","y"],ct=["clientX","clientY"];function at(O,D){var U=this;this.manager=O,this.callback=D,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(H){w(O.options.enable,[O])&&U.handler(H)},this.init()}at.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(K(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(K(this.element),this.evWin,this.domHandler)}};function it(O){var D,U=O.options.inputClass;return U?D=U:At?D=wy:Ft?D=T0:rt?D=Sy:D=Qa,new D(O,$t)}function $t(O,D,U){var H=U.pointers.length,nt=U.changedPointers.length,Tt=D&J&&H-nt===0,Jt=D&(Et|xt)&&H-nt===0;U.isFirst=!!Tt,U.isFinal=!!Jt,Tt&&(O.session={}),U.eventType=D,Lt(O,U),O.emit("hammer.input",U),O.recognize(U),O.session.prevInput=U}function Lt(O,D){var U=O.session,H=D.pointers,nt=H.length;U.firstInput||(U.firstInput=ee(D)),nt>1&&!U.firstMultiple?U.firstMultiple=ee(D):nt===1&&(U.firstMultiple=!1);var Tt=U.firstInput,Jt=U.firstMultiple,vr=Jt?Jt.center:Tt.center,Tr=D.center=me(H);D.timeStamp=c(),D.deltaTime=D.timeStamp-Tt.timeStamp,D.angle=Qi(vr,Tr),D.distance=Fr(vr,Tr),zt(U,D),D.offsetDirection=Pe(D.deltaX,D.deltaY);var Qr=_e(D.deltaTime,D.deltaX,D.deltaY);D.overallVelocityX=Qr.x,D.overallVelocityY=Qr.y,D.overallVelocity=u(Qr.x)>u(Qr.y)?Qr.x:Qr.y,D.scale=Jt?Ja(Jt.pointers,H):1,D.rotation=Jt?w0(Jt.pointers,H):0,D.maxPointers=U.prevInput?D.pointers.length>U.prevInput.maxPointers?D.pointers.length:U.prevInput.maxPointers:D.pointers.length,Vt(U,D);var eo=O.element;x(D.srcEvent.target,eo)&&(eo=D.srcEvent.target),D.target=eo}function zt(O,D){var U=D.center,H=O.offsetDelta||{},nt=O.prevDelta||{},Tt=O.prevInput||{};(D.eventType===J||Tt.eventType===Et)&&(nt=O.prevDelta={x:Tt.deltaX||0,y:Tt.deltaY||0},H=O.offsetDelta={x:U.x,y:U.y}),D.deltaX=nt.x+(U.x-H.x),D.deltaY=nt.y+(U.y-H.y)}function Vt(O,D){var U=O.lastInterval||D,H=D.timeStamp-U.timeStamp,nt,Tt,Jt,vr;if(D.eventType!=xt&&(H>ot||U.velocity===i)){var Tr=D.deltaX-U.deltaX,Qr=D.deltaY-U.deltaY,eo=_e(H,Tr,Qr);Tt=eo.x,Jt=eo.y,nt=u(eo.x)>u(eo.y)?eo.x:eo.y,vr=Pe(Tr,Qr),O.lastInterval=D}else nt=U.velocity,Tt=U.velocityX,Jt=U.velocityY,vr=U.direction;D.velocity=nt,D.velocityX=Tt,D.velocityY=Jt,D.direction=vr}function ee(O){for(var D=[],U=0;U<O.pointers.length;)D[U]={clientX:l(O.pointers[U].clientX),clientY:l(O.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:D,center:me(D),deltaX:O.deltaX,deltaY:O.deltaY}}function me(O){var D=O.length;if(D===1)return{x:l(O[0].clientX),y:l(O[0].clientY)};for(var U=0,H=0,nt=0;nt<D;)U+=O[nt].clientX,H+=O[nt].clientY,nt++;return{x:l(U/D),y:l(H/D)}}function _e(O,D,U){return{x:D/O||0,y:U/O||0}}function Pe(O,D){return O===D?ht:u(O)>=u(D)?O<0?vt:B:D<0?j:X}function Fr(O,D,U){U||(U=bt);var H=D[U[0]]-O[U[0]],nt=D[U[1]]-O[U[1]];return Math.sqrt(H*H+nt*nt)}function Qi(O,D,U){U||(U=bt);var H=D[U[0]]-O[U[0]],nt=D[U[1]]-O[U[1]];return Math.atan2(nt,H)*180/Math.PI}function w0(O,D){return Qi(D[1],D[0],ct)+Qi(O[1],O[0],ct)}function Ja(O,D){return Fr(D[0],D[1],ct)/Fr(O[0],O[1],ct)}var S0={mousedown:J,mousemove:yt,mouseup:Et},Jr="mousedown",zn="mousemove mouseup";function Qa(){this.evEl=Jr,this.evWin=zn,this.pressed=!1,at.apply(this,arguments)}y(Qa,at,{handler:function(D){var U=S0[D.type];U&J&&D.button===0&&(this.pressed=!0),U&yt&&D.which!==1&&(U=Et),this.pressed&&(U&Et&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[D],changedPointers:[D],pointerType:Zt,srcEvent:D}))}});var Mj={pointerdown:J,pointermove:yt,pointerup:Et,pointercancel:xt,pointerout:xt},xj={2:Pt,3:Ct,4:Zt,5:Y},WE="pointerdown",jE="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(WE="MSPointerDown",jE="MSPointerMove MSPointerUp MSPointerCancel");function wy(){this.evEl=WE,this.evWin=jE,at.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(wy,at,{handler:function(D){var U=this.store,H=!1,nt=D.type.toLowerCase().replace("ms",""),Tt=Mj[nt],Jt=xj[D.pointerType]||D.pointerType,vr=Jt==Pt,Tr=L(U,D.pointerId,"pointerId");Tt&J&&(D.button===0||vr)?Tr<0&&(U.push(D),Tr=U.length-1):Tt&(Et|xt)&&(H=!0),!(Tr<0)&&(U[Tr]=D,this.callback(this.manager,Tt,{pointers:U,changedPointers:[D],pointerType:Jt,srcEvent:D}),H&&U.splice(Tr,1))}});var Ij={touchstart:J,touchmove:yt,touchend:Et,touchcancel:xt},Lj="touchstart",Oj="touchstart touchmove touchend touchcancel";function GE(){this.evTarget=Lj,this.evWin=Oj,this.started=!1,at.apply(this,arguments)}y(GE,at,{handler:function(D){var U=Ij[D.type];if(U===J&&(this.started=!0),!!this.started){var H=Rj.call(this,D,U);U&(Et|xt)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}}});function Rj(O,D){var U=N(O.touches),H=N(O.changedTouches);return D&(Et|xt)&&(U=z(U.concat(H),"identifier",!0)),[U,H]}var Dj={touchstart:J,touchmove:yt,touchend:Et,touchcancel:xt},Nj="touchstart touchmove touchend touchcancel";function T0(){this.evTarget=Nj,this.targetIds={},at.apply(this,arguments)}y(T0,at,{handler:function(D){var U=Dj[D.type],H=Fj.call(this,D,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}});function Fj(O,D){var U=N(O.touches),H=this.targetIds;if(D&(J|yt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var nt,Tt,Jt=N(O.changedTouches),vr=[],Tr=this.target;if(Tt=U.filter(function(Qr){return x(Qr.target,Tr)}),D===J)for(nt=0;nt<Tt.length;)H[Tt[nt].identifier]=!0,nt++;for(nt=0;nt<Jt.length;)H[Jt[nt].identifier]&&vr.push(Jt[nt]),D&(Et|xt)&&delete H[Jt[nt].identifier],nt++;if(!!vr.length)return[z(Tt.concat(vr),"identifier",!0),vr]}var $j=2500,HE=25;function Sy(){at.apply(this,arguments);var O=b(this.handler,this);this.touch=new T0(this.manager,O),this.mouse=new Qa(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}y(Sy,at,{handler:function(D,U,H){var nt=H.pointerType==Pt,Tt=H.pointerType==Zt;if(!(Tt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(nt)zj.call(this,U,H);else if(Tt&&Bj.call(this,H))return;this.callback(D,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function zj(O,D){O&J?(this.primaryTouch=D.changedPointers[0].identifier,XE.call(this,D)):O&(Et|xt)&&XE.call(this,D)}function XE(O){var D=O.changedPointers[0];if(D.identifier===this.primaryTouch){var U={x:D.clientX,y:D.clientY};this.lastTouches.push(U);var H=this.lastTouches,nt=function(){var Tt=H.indexOf(U);Tt>-1&&H.splice(Tt,1)};setTimeout(nt,$j)}}function Bj(O){for(var D=O.srcEvent.clientX,U=O.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var nt=this.lastTouches[H],Tt=Math.abs(D-nt.x),Jt=Math.abs(U-nt.y);if(Tt<=HE&&Jt<=HE)return!0}return!1}var YE=V(s.style,"touchAction"),qE=YE!==i,ZE="compute",KE="auto",Ty="manipulation",tl="none",oh="pan-x",sh="pan-y",k0=Uj();function ky(O,D){this.manager=O,this.set(D)}ky.prototype={set:function(O){O==ZE&&(O=this.compute()),qE&&this.manager.element.style&&k0[O]&&(this.manager.element.style[YE]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return d(this.manager.recognizers,function(D){w(D.options.enable,[D])&&(O=O.concat(D.getTouchAction()))}),Vj(O.join(" "))},preventDefaults:function(O){var D=O.srcEvent,U=O.offsetDirection;if(this.manager.session.prevented){D.preventDefault();return}var H=this.actions,nt=A(H,tl)&&!k0[tl],Tt=A(H,sh)&&!k0[sh],Jt=A(H,oh)&&!k0[oh];if(nt){var vr=O.pointers.length===1,Tr=O.distance<2,Qr=O.deltaTime<250;if(vr&&Tr&&Qr)return}if(!(Jt&&Tt)&&(nt||Tt&&U&Q||Jt&&U&et))return this.preventSrc(D)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function Vj(O){if(A(O,tl))return tl;var D=A(O,oh),U=A(O,sh);return D&&U?tl:D||U?D?oh:sh:A(O,Ty)?Ty:KE}function Uj(){if(!qE)return!1;var O={},D=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){O[U]=D?t.CSS.supports("touch-action",U):!0}),O}var P0=1,Bn=2,Gu=4,Ns=8,jo=Ns,ah=16,to=32;function Go(O){this.options=v({},this.defaults,O||{}),this.id=G(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=P0,this.simultaneous={},this.requireFail=[]}Go.prototype={defaults:{},set:function(O){return v(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(h(O,"recognizeWith",this))return this;var D=this.simultaneous;return O=C0(O,this),D[O.id]||(D[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return h(O,"dropRecognizeWith",this)?this:(O=C0(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(h(O,"requireFailure",this))return this;var D=this.requireFail;return O=C0(O,this),L(D,O)===-1&&(D.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(h(O,"dropRequireFailure",this))return this;O=C0(O,this);var D=L(this.requireFail,O);return D>-1&&this.requireFail.splice(D,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var D=this,U=this.state;function H(nt){D.manager.emit(nt,O)}U<Ns&&H(D.options.event+JE(U)),H(D.options.event),O.additionalEvent&&H(O.additionalEvent),U>=Ns&&H(D.options.event+JE(U))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=to},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(to|P0)))return!1;O++}return!0},recognize:function(O){var D=v({},O);if(!w(this.options.enable,[this,D])){this.reset(),this.state=to;return}this.state&(jo|ah|to)&&(this.state=P0),this.state=this.process(D),this.state&(Bn|Gu|Ns|ah)&&this.tryEmit(D)},process:function(O){},getTouchAction:function(){},reset:function(){}};function JE(O){return O&ah?"cancel":O&Ns?"end":O&Gu?"move":O&Bn?"start":""}function QE(O){return O==X?"down":O==j?"up":O==vt?"left":O==B?"right":""}function C0(O,D){var U=D.manager;return U?U.get(O):O}function gi(){Go.apply(this,arguments)}y(gi,Go,{defaults:{pointers:1},attrTest:function(O){var D=this.options.pointers;return D===0||O.pointers.length===D},process:function(O){var D=this.state,U=O.eventType,H=D&(Bn|Gu),nt=this.attrTest(O);return H&&(U&xt||!nt)?D|ah:H||nt?U&Et?D|Ns:D&Bn?D|Gu:Bn:to}});function E0(){gi.apply(this,arguments),this.pX=null,this.pY=null}y(E0,gi,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var O=this.options.direction,D=[];return O&Q&&D.push(sh),O&et&&D.push(oh),D},directionTest:function(O){var D=this.options,U=!0,H=O.distance,nt=O.direction,Tt=O.deltaX,Jt=O.deltaY;return nt&D.direction||(D.direction&Q?(nt=Tt===0?ht:Tt<0?vt:B,U=Tt!=this.pX,H=Math.abs(O.deltaX)):(nt=Jt===0?ht:Jt<0?j:X,U=Jt!=this.pY,H=Math.abs(O.deltaY))),O.direction=nt,U&&H>D.threshold&&nt&D.direction},attrTest:function(O){return gi.prototype.attrTest.call(this,O)&&(this.state&Bn||!(this.state&Bn)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var D=QE(O.direction);D&&(O.additionalEvent=this.options.event+D),this._super.emit.call(this,O)}});function Py(){gi.apply(this,arguments)}y(Py,gi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tl]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&Bn)},emit:function(O){if(O.scale!==1){var D=O.scale<1?"in":"out";O.additionalEvent=this.options.event+D}this._super.emit.call(this,O)}});function Cy(){Go.apply(this,arguments),this._timer=null,this._input=null}y(Cy,Go,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[KE]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,nt=O.deltaTime>D.time;if(this._input=O,!H||!U||O.eventType&(Et|xt)&&!nt)this.reset();else if(O.eventType&J)this.reset(),this._timer=f(function(){this.state=jo,this.tryEmit()},D.time,this);else if(O.eventType&Et)return jo;return to},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===jo&&(O&&O.eventType&Et?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Ey(){gi.apply(this,arguments)}y(Ey,gi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tl]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&Bn)}});function Ay(){gi.apply(this,arguments)}y(Ay,gi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|et,pointers:1},getTouchAction:function(){return E0.prototype.getTouchAction.call(this)},attrTest:function(O){var D=this.options.direction,U;return D&(Q|et)?U=O.overallVelocity:D&Q?U=O.overallVelocityX:D&et&&(U=O.overallVelocityY),this._super.attrTest.call(this,O)&&D&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&O.eventType&Et},emit:function(O){var D=QE(O.offsetDirection);D&&this.manager.emit(this.options.event+D,O),this.manager.emit(this.options.event,O)}});function A0(){Go.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(A0,Go,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ty]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,nt=O.deltaTime<D.time;if(this.reset(),O.eventType&J&&this.count===0)return this.failTimeout();if(H&&nt&&U){if(O.eventType!=Et)return this.failTimeout();var Tt=this.pTime?O.timeStamp-this.pTime<D.interval:!0,Jt=!this.pCenter||Fr(this.pCenter,O.center)<D.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!Jt||!Tt?this.count=1:this.count+=1,this._input=O;var vr=this.count%D.taps;if(vr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=jo,this.tryEmit()},D.interval,this),Bn):jo}return to},failTimeout:function(){return this._timer=f(function(){this.state=to},this.options.interval,this),to},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==jo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ho(O,D){return D=D||{},D.recognizers=T(D.recognizers,Ho.defaults.preset),new My(O,D)}Ho.VERSION="2.0.7",Ho.defaults={domEvents:!1,touchAction:ZE,enable:!0,inputTarget:null,inputClass:null,preset:[[Ey,{enable:!1}],[Py,{enable:!1},["rotate"]],[Ay,{direction:Q}],[E0,{direction:Q},["swipe"]],[A0],[A0,{event:"doubletap",taps:2},["tap"]],[Cy]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Wj=1,tA=2;function My(O,D){this.options=v({},Ho.defaults,D||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=it(this),this.touchAction=new ky(this,this.options.touchAction),eA(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}My.prototype={set:function(O){return v(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?tA:Wj},recognize:function(O){var D=this.session;if(!D.stopped){this.touchAction.preventDefaults(O);var U,H=this.recognizers,nt=D.curRecognizer;(!nt||nt&&nt.state&jo)&&(nt=D.curRecognizer=null);for(var Tt=0;Tt<H.length;)U=H[Tt],D.stopped!==tA&&(!nt||U==nt||U.canRecognizeWith(nt))?U.recognize(O):U.reset(),!nt&&U.state&(Bn|Gu|Ns)&&(nt=D.curRecognizer=U),Tt++}},get:function(O){if(O instanceof Go)return O;for(var D=this.recognizers,U=0;U<D.length;U++)if(D[U].options.event==O)return D[U];return null},add:function(O){if(h(O,"add",this))return this;var D=this.get(O.options.event);return D&&this.remove(D),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(h(O,"remove",this))return this;if(O=this.get(O),O){var D=this.recognizers,U=L(D,O);U!==-1&&(D.splice(U,1),this.touchAction.update())}return this},on:function(O,D){if(O!==i&&D!==i){var U=this.handlers;return d(I(O),function(H){U[H]=U[H]||[],U[H].push(D)}),this}},off:function(O,D){if(O!==i){var U=this.handlers;return d(I(O),function(H){D?U[H]&&U[H].splice(L(U[H],D),1):delete U[H]}),this}},emit:function(O,D){this.options.domEvents&&jj(O,D);var U=this.handlers[O]&&this.handlers[O].slice();if(!(!U||!U.length)){D.type=O,D.preventDefault=function(){D.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](D),H++}},destroy:function(){this.element&&eA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function eA(O,D){var U=O.element;if(!!U.style){var H;d(O.options.cssProps,function(nt,Tt){H=V(U.style,Tt),D?(O.oldCssProps[H]=U.style[H],U.style[H]=nt):U.style[H]=O.oldCssProps[H]||""}),D||(O.oldCssProps={})}}function jj(O,D){var U=r.createEvent("Event");U.initEvent(O,!0,!0),U.gesture=D,D.target.dispatchEvent(U)}v(Ho,{INPUT_START:J,INPUT_MOVE:yt,INPUT_END:Et,INPUT_CANCEL:xt,STATE_POSSIBLE:P0,STATE_BEGAN:Bn,STATE_CHANGED:Gu,STATE_ENDED:Ns,STATE_RECOGNIZED:jo,STATE_CANCELLED:ah,STATE_FAILED:to,DIRECTION_NONE:ht,DIRECTION_LEFT:vt,DIRECTION_RIGHT:B,DIRECTION_UP:j,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:et,DIRECTION_ALL:dt,Manager:My,Input:at,TouchAction:ky,TouchInput:T0,MouseInput:Qa,PointerEventInput:wy,TouchMouseInput:Sy,SingleTouchInput:GE,Recognizer:Go,AttrRecognizer:gi,Tap:A0,Pan:E0,Swipe:Ay,Pinch:Py,Rotate:Ey,Press:Cy,on:S,off:k,each:d,merge:g,extend:m,assign:v,inherit:y,bindFn:b,prefixed:V});var Gj=typeof t<"u"?t:typeof self<"u"?self:{};Gj.Hammer=Ho,typeof i=="function"&&i.amd?i(function(){return Ho}):e.exports?e.exports=Ho:t[n]=Ho})(window,document,"Hammer")})(Wf);const u3t=Wf.exports,uo=Hj({__proto__:null,default:u3t},[Wf.exports]),IV=1,LV=2,ET=4,c3t={mousedown:IV,mousemove:LV,mouseup:ET};function f3t(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function h3t(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(f3t(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function d3t(e){e.prototype.handler=function(r){let n=c3t[r.type];n&IV&&r.button>=0&&(this.pressed=!0),n&LV&&r.which===0&&(n=ET),this.pressed&&(n&ET&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}h3t(Wf.exports.PointerEventInput);d3t(Wf.exports.MouseInput);const p3t=Wf.exports.Manager;class j_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const v3t=uo?[[uo.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[uo.Rotate,{enable:!1}],[uo.Pinch,{enable:!1}],[uo.Swipe,{enable:!1}],[uo.Pan,{threshold:0,enable:!1}],[uo.Press,{enable:!1}],[uo.Tap,{event:"doubletap",taps:2,enable:!1}],[uo.Tap,{event:"anytap",enable:!1}],[uo.Tap,{enable:!1}]]:null,cL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},g3t={doubletap:["tap"]},m3t={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},zC={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},_3t={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},fL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},y3t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Bc=typeof window<"u"?window:global;let AT=!1;try{const e={get passive(){return AT=!0,!0}};Bc.addEventListener("test",null,e),Bc.removeEventListener("test",null)}catch{AT=!1}const b3t=y3t.indexOf("firefox")!==-1,{WHEEL_EVENTS:w3t}=zC,hL="wheel",dL=4.000244140625,S3t=40,T3t=.25;class k3t extends j_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;Bc.WheelEvent&&(b3t&&i.deltaMode===Bc.WheelEvent.DOM_DELTA_PIXEL&&(o/=Bc.devicePixelRatio),i.deltaMode===Bc.WheelEvent.DOM_DELTA_LINE&&(o*=S3t)),o!==0&&o%dL===0&&(o=Math.floor(o/dL)),i.shiftKey&&o&&(o=o*T3t),this.callback({type:hL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(w3t),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,AT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===hL&&(this.options.enable=r)}}const{MOUSE_EVENTS:P3t}=zC,pL="pointermove",vL="pointerover",gL="pointerout",mL="pointerenter",_L="pointerleave";class C3t extends j_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(P3t),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===pL&&(this.enableMoveEvent=r),t===vL&&(this.enableOverEvent=r),t===gL&&(this.enableOutEvent=r),t===mL&&(this.enableEnterEvent=r),t===_L&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(vL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(gL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(mL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(_L,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(pL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:E3t}=zC,yL="keydown",bL="keyup";class A3t extends j_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:yL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:bL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(E3t),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===yL&&(this.enableDownEvent=r),t===bL&&(this.enableUpEvent=r)}}const wL="contextmenu";class M3t extends j_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:wL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===wL&&(this.options.enable=r)}}const MT=1,E1=2,xT=4,x3t={pointerdown:MT,pointermove:E1,pointerup:xT,mousedown:MT,mousemove:E1,mouseup:xT},I3t=1,L3t=2,O3t=3,R3t=0,D3t=1,N3t=2,F3t=1,$3t=2,z3t=4;function B3t(e){const t=x3t[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,s=!1,a=!1;return t===xT||t===E1&&!Number.isFinite(r)?(o=i===I3t,s=i===L3t,a=i===O3t):t===E1?(o=Boolean(r&F3t),s=Boolean(r&z3t),a=Boolean(r&$3t)):t===MT&&(o=n===R3t,s=n===D3t,a=n===N3t),{leftButton:o,middleButton:s,rightButton:a}}function V3t(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,s={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:s}}const Z2={srcElement:"root",priority:0};class U3t{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let l=Z2;typeof n=="string"||n&&n.addEventListener?l={...Z2,srcElement:n}:n&&(l={...Z2,...n});let u=a.get(l.srcElement);u||(u=[],a.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const s=n[o];if(s.type===t&&s.handler===r){n.splice(o,1);const a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},s=()=>{t.handled=!0,i=!0},a=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:s}),f&&a.push(n[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...B3t(t),...V3t(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const W3t={events:null,recognizers:null,recognizerOptions:{},Manager:p3t,touchAction:"none",tabIndex:0};class j3t{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,s=m3t[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...W3t,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||v3t}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(cL).forEach(i=>{const o=this.manager.get(i);o&&cL[i].forEach(s=>{o.recognizeWith(s)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const s=r.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new k3t(t,this._onOtherEvent,{enable:!1}),this.moveInput=new C3t(t,this._onOtherEvent,{enable:!1}),this.keyInput=new A3t(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new M3t(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=g3t[t];o&&!this.options.recognizers&&o.forEach(s=>{const a=n.get(s);r?(a.requireFailure(t),i.dropRequireFailure(s)):a.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:s,events:a}=this,l=fL[t]||t;let u=a.get(l);u||(u=new U3t(this),a.set(l,u),u.recognizerName=_3t[l]||l,s&&s.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const s in t)this._removeEventHandler(s,t[s]);return}const{events:n}=this,i=fL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const l of n.values())if(l.recognizerName===s&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Al(){}const G3t=({isDragging:e})=>e?"grabbing":"grab",OV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Al,onResize:Al,onViewStateChange:Al,onInteractionStateChange:Al,onBeforeRender:Al,onAfterRender:Al,onLoad:Al,onError:e=>qt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:G3t,getTooltip:null,debug:!1,drawPickingColors:!1};class G_{constructor(t){P(this,"props",void 0),P(this,"width",0),P(this,"height",0),P(this,"userData",{}),P(this,"canvas",null),P(this,"viewManager",null),P(this,"layerManager",null),P(this,"effectManager",null),P(this,"deckRenderer",null),P(this,"deckPicker",null),P(this,"eventManager",null),P(this,"tooltip",null),P(this,"metrics",void 0),P(this,"animationLoop",void 0),P(this,"stats",void 0),P(this,"viewState",void 0),P(this,"cursorState",void 0),P(this,"_needsRedraw",void 0),P(this,"_pickRequest",void 0),P(this,"_lastPointerDownInfo",null),P(this,"_metricsCounter",void 0),P(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),P(this,"_onEvent",r=>{const n=ZI[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,l=a&&(a[n.handler]||a.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(a,s,r)),!c&&u&&u(s,r)}),P(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...OV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&qt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),tB()==="IE"&&qt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new R_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&bf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&qt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&qt.removed("onLayerClick","onClick")(),t.initialViewState&&!Uf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||s,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return mr(this.viewManager),this.viewManager.views}getViewports(t){return mr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){mr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),mr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new uyt({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>bB({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new EV({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,s=!1;for(const a of n){var r;o=a,s=((r=a.layer)===null||r===void 0?void 0:r.onHover(a,t.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,kC(t,{enable:!0,copyState:!0})),this.tooltip=new l3t(this.canvas),Ts(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new cV;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new j3t(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in ZI)this.eventManager.on(i,this._onEvent);this.viewManager=new PSt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new kSt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new qSt,this.deckRenderer=new t3t(t),this.deckPicker=new s3t(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;Ts(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),qt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Gl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}P(G_,"defaultProps",OV);P(G_,"VERSION",gmt.VERSION);class K2{constructor(t,r){P(this,"opts",void 0),P(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const s=r.elementOffset||0;for(let a=0;a<i;++a)o[a]=n[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function H3t(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function ym(e){return e.stride||e.size*e.bytesPerElement}function RV(e,t){t.offset&&qt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=ym(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function X3t(e,t){const r=RV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class Y3t{constructor(t,r,n){P(this,"gl",void 0),P(this,"id",void 0),P(this,"size",void 0),P(this,"settings",void 0),P(this,"value",void 0),P(this,"doublePrecision",void 0),P(this,"_buffer",void 0),P(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&r.isIndexed?a=t&&B1t(t,Ue.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=H3t(i||a||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Ce(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*ym(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),bf.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=X3t(this.getAccessor(),r||{});return n[t]=new K2(this,o.high),n["".concat(t,"64Low")]=i?new K2(this,o.low):new Float32Array(this.size),n}if(r){const n=RV(this.getAccessor(),r);return{[t]:new K2(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<s[u]&&(s[u]=c),c>a[u]&&(a[u]=c)}t=[s,a]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Ce?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const s=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=ym(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=ym(i);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Y2(o,i));const l=o.byteLength+a+i.stride*2;s.byteLength<l&&s.reallocate(l),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=n.type||s.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Y2(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=bf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),r&&i&&s.subData({data:i instanceof Float64Array?Y2(i,this):i,offset:a})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&qt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let s=o;for(;--s>=0;)r[n+s]=Number.isFinite(t[s])?t[s]:i[s]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const SL=[],TL=[];function H_(e,t=0,r=1/0){let n=SL;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(TL.length=e.length,n=TL):n=SL,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function DV(e){return e&&e[Symbol.asyncIterator]}function NV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=n?n/a:r,u=i?i/a:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const g=h*l+u;for(let y=0;y<r;y++)d[y]=e[g+y];return d}const p=o[h],v=o[h+1]||c;let m;if(s){m=new Array(v-p);for(let g=p;g<v;g++){const y=g*l+u;d=new Array(r);for(let b=0;b<r;b++)d[b]=e[y+b];m[g-p]=d}}else if(l===r)m=e.subarray(p*r+u,v*r+u);else{m=new e.constructor((v-p)*r);let g=0;for(let y=p;y<v;y++){const b=y*l+u;for(let w=0;w<r;w++)m[g++]=e[b+w]}}return m}}const q3t=[],bm=[[0,1/0]];function Z3t(e,t){if(e===bm||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const s=e[o];s[1]<t[0]?(r.push(s),i=o+1):s[0]>t[1]?r.push(s):t=[Math.min(s[0],t[0]),Math.max(s[1],t[1])]}return r.splice(i,0,t),r}function J2(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,s=e.end||r.length,a=t.length,l=s-n;if(a>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=a;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function K3t({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return J2({source:e,target:t,size:r,getData:n}),t;let s=0,a=0;const l=n&&((c,f)=>n(c+a,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;J2({source:e.subarray(s,f),target:t,start:a,end:h,size:r,getData:l}),s=f,a=h}return a<t.length&&J2({source:[],target:t,start:a,size:r,getData:l}),t}const J3t={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function FV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...J3t[r],...t,...e,type:r}}function $V(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function zV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function BV(e){e.push(e.shift())}function BC(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,s=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*s}function VV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=s=>s}){const s=r.doublePrecision&&r.value instanceof Float64Array?2:1,a=r.size*s,l=r.byteOffset,u=r.startIndices,c=i&&u,f=BC(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const g=o;o=(y,b)=>r.normalizeConstant(g(y,b))}const p=h?(g,y)=>o(d,y):(g,y)=>o(d.subarray(g,g+a),y),v=e.getData({length:n}),m=new Float32Array(f);K3t({source:v,target:m,sourceStartIndices:i,targetStartIndices:u,size:a,getData:p}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class VC extends Y3t{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:bm}),P(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return FV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=Z3t(this.state.updateRanges,[n,i])}else this.state.updateRanges=bm}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=q3t}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==bm),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[u,c]of o)s.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const s=t;mr(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));const a=Boolean(s.size)&&s.size!==this.size;return n.binaryAccessor=NV(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:r,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:s}){if(t.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=a,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);mr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:m,objectInfo:g}=H_(r,n,i);for(const y of m){g.index++;let b=p(y,g);if(d&&(b=d.call(this,b)),f){const w=(g.index<f.length-1?f[g.index+1]:s)-f[g.index];if(b&&Array.isArray(b[0])){let T=v;for(const S of b)t._normalizeValue(S,u,T),T+=c}else b&&b.length>c?u.set(b,v):(t._normalizeValue(b,g.target,0),ySt({target:u,source:g.target,start:v,count:w}));v+=w*c}else t._normalizeValue(b,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class Q3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","interpolation"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.transition=new f0(n),this.attribute=r,this.attributeInTransition=new VC(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=eTt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Ce(t,i),new Ce(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;BV(i);const s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)VV({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=BC(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:$V(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const tTt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function eTt(e,t){const r=zV(t.size);return new NC(e,{vs:tTt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class rTt{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","spring"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"texture",void 0),P(this,"framebuffer",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new f0(n),this.attribute=r,this.attributeInTransition=new VC(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=iTt(t),this.framebuffer=oTt(t,this.texture),this.transform=nTt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ce(t,i),new Ce(t,i),new Ce(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)VV({buffer:a,...s});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=BC(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:$V(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const s=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),BV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),$_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function nTt(e,t,r){const n=zV(t.size);return new NC(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function iTt(e){return new Sn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function oTt(e,t){return new lr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const sTt={interpolation:Q3t,spring:rTt};class aTt{constructor(t,{id:r,timeline:n}){P(this,"id",void 0),P(this,"isSupported",void 0),P(this,"gl",void 0),P(this,"timeline",void 0),P(this,"transitions",void 0),P(this,"needsRedraw",void 0),P(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=NC.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],s=o.getTransitionSetting(r);!s||this._updateAttribute(i,o,s)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){qt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const s=sTt[n.type];s?this.transitions[t]=new s({attribute:r,timeline:this.timeline,gl:this.gl}):(qt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const kL="attributeManager.invalidate",lTt="attributeManager.updateStart",uTt="attributeManager.updateEnd",cTt="attribute.updateStart",fTt="attribute.allocate",hTt="attribute.updateEnd";class dTt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"attributes",void 0),P(this,"updateTriggers",void 0),P(this,"needsRedraw",void 0),P(this,"userData",void 0),P(this,"stats",void 0),P(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new aTt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);jr(kL,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);jr(kL,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:s={},context:a={}}){let l=!1;jr(lTt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&qt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(s[u])||c.setBinaryValue(typeof f=="string"?s[f]:void 0,t.startIndices)||typeof f=="string"&&!s[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&jr(uTt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const s=r[o];s.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new VC(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(s=>{const a=n[s];a&&a.setNeedsUpdate(a.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(jr(cTt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&jr(fTt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,jr(hTt,r,n))}}class pTt extends f0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,s=o(t/i);this._value=ru(r,n,s)}}const PL=1e-5;function CL(e,t,r,n,i){const o=t-e,a=(r-t)*i,l=-o*n;return a+l+o+t}function vTt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let s=0;s<r.length;s++)o[s]=CL(e[s],t[s],r[s],n,i);return o}return CL(e,t,r,n,i)}function EL(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class gTt extends f0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:s=t}=this;let a=vTt(o,s,r,n,i);const l=EL(a,r),u=EL(a,s);l<PL&&u<PL&&(a=r,this.end()),this._prevValue=s,this._currValue=a}}const mTt={interpolation:pTt,spring:gTt};class _Tt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=FV(i),!i)return;const s=mTt[i.type];if(!s){qt.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new s(this.timeline);a.start({...i,fromValue:r,toValue:n}),o.set(t,a)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function yTt(e){const t=UC(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function bTt(e,t){const r=UV({newProps:e,oldProps:t,propTypes:UC(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=STt(e,t);let i=!1;return n||(i=TTt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:kTt(e,t),transitionsChanged:wTt(e,t)}}function wTt(e,t){if(!e.transitions)return!1;const r={},n=UC(e);let i=!1;for(const o in e.transitions){const s=n[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&IT(e[o],t[o],s)&&(r[o]=!0,i=!0)}return i?r:!1}function UV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const s=IT(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const s=IT(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function IT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function STt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function TTt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&AL(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&AL(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function kTt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function AL(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,UV({oldProps:i,newProps:n,triggerName:r})}function UC(e){const t=e[C1],r=t&&t.constructor;return r?r._propTypes:{}}const PTt="count(): argument not an object",CTt="count(): argument not a container";function ETt(e){if(!MTt(e))throw new Error(PTt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(ATt(e))return Object.keys(e).length;throw new Error(CTt)}function ATt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function MTt(e){return e!==null&&typeof e=="object"}function xTt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const ITt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},LT={};function LTt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof Sn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new Sn(r,{...t,parameters:{...ITt,...n,...e.props.textureParameters}});return LT[i.id]=!0,i}function OTt(e){!e||!(e instanceof Sn)||LT[e.id]&&(e.delete(),delete LT[e.id])}const RTt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||Rp(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Q2(e,t)}},accessor:{validate(e,t){const r=A1(e);return r==="function"||r===A1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Q2(e,t)}},array:{validate(e,t){return t.optional&&!e||Rp(e)},equal(e,t,r){return r.compare?Q2(e,t):e===t}},object:{equal(e,t,r){return r.compare?Uf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>LTt(r,e),release:e=>{OTt(e)}}};function Q2(e,t){if(e===t)return!0;if(!Rp(e)||!Rp(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function DTt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const s=o==null?void 0:o.deprecatedFor;if(s)n[i]=Array.isArray(s)?s:[s];else{const a=NTt(i,o);t[i]=a,r[i]=a.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function NTt(e,t){switch(A1(t)){case"object":return Bh(e,t);case"array":return Bh(e,{type:"array",value:t,compare:!1});case"boolean":return Bh(e,{type:"boolean",value:t});case"number":return Bh(e,{type:"number",value:t});case"function":return Bh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Bh(e,t){return"type"in t?{name:e,...RTt[t.type],...t}:"value"in t?{name:e,type:A1(t.value),...t}:{name:e,type:"object",value:t}}function Rp(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function A1(e){return Rp(e)?"array":e===null?"null":typeof e}function FTt(e,t){const r=WV(e.constructor),n=Object.create(r);n[C1]=e,n[_u]={},n[ba]={};for(let i=0;i<t.length;++i){const o=t[i];for(const s in o)n[s]=o[s]}return Object.freeze(n),n}function WV(e){const t=M1(e,"_mergedDefaultProps");return t||($Tt(e),e._mergedDefaultProps)}function $Tt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=WV(r),i=M1(e,"defaultProps")||{},o=DTt(i),s=zTt(o.defaultProps,n,e),a={...r._propTypes,...o.propTypes};VTt(s,a);const l={...r._deprecatedProps,...o.deprecatedProps};BTt(s,l),e._mergedDefaultProps=s,e._propTypes=a,e._deprecatedProps=l}function zTt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=WTt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function BTt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])jV(this,o)||(this[o]=n);qt.deprecated(i,t[r].join("/"))()}})}function VTt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:s,value:a}=o;o.async&&(r[s]=a,n[s]=UTt(s))}e[rf]=r,e[_u]={},Object.defineProperties(e,n)}function UTt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||DV(t)?this[_u][e]=t:this[ba][e]=t},get(){if(this[ba]){if(e in this[ba])return this[ba][e]||this[rf][e];if(e in this[_u]){const t=this[C1]&&this[C1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[rf][e]}}return this[rf][e]}}}function jV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M1(e,t){return jV(e,t)&&e[t]}function WTt(e){const t=M1(e,"layerName")||M1(e,"componentName");return t||qt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let jTt=0;class WC{constructor(...t){P(this,"id",void 0),P(this,"props",void 0),P(this,"count",void 0),this.props=FTt(this,t),this.id=this.props.id,this.count=jTt++}clone(t){const{props:r}=this,n={};for(const i in r[rf])i in r[ba]?n[i]=r[ba][i]:i in r[_u]&&(n[i]=r[_u][i]);return new this.constructor({...r,...n,...t})}}P(WC,"componentName","Component");P(WC,"defaultProps",{});const GTt=Object.freeze({});class HTt{constructor(t){P(this,"component",void 0),P(this,"onAsyncPropUpdated",void 0),P(this,"asyncProps",void 0),P(this,"oldProps",void 0),P(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||GTt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[ba]||{},n=t[_u]||t,i=t[rf]||{};for(const o in r){const s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),r[o]=this.getAsyncProp(o)}for(const o in n){const s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(DV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],s=0;for await(const a of r){const{dataTransform:l}=this.component.props;l?o=l(a,o):o=o.concat(a),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class XTt extends HTt{constructor({attributeManager:t,layer:r}){super(r),P(this,"attributeManager",void 0),P(this,"needsRedraw",void 0),P(this,"needsUpdate",void 0),P(this,"subLayers",void 0),P(this,"usesPickingColorCache",void 0),P(this,"changeFlags",void 0),P(this,"viewport",void 0),P(this,"uniformTransitions",void 0),P(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const YTt="layer.changeFlag",qTt="layer.initialize",ZTt="layer.update",KTt="layer.finalize",JTt="layer.matched",ML=2**24-1,QTt=Object.freeze([]),tkt=c0(({oldViewport:e,viewport:t})=>e.equals(t));let co=new Uint8ClampedArray(0);const ekt={data:{type:"data",value:QTt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:s}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:o}}}let l=s.contains(e);return!l&&!i&&(s.add({resourceId:e,data:y1(e,n),persistent:!1}),l=!0),l?s.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):y1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:u0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ae.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Vo extends WC{constructor(...t){super(...t),P(this,"internalState",null),P(this,"lifecycle",Lc.NO_STATE),P(this,"context",void 0),P(this,"state",void 0),P(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){mr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=SV(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=_V(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,s]}unproject(t){return mr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){mr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return _St(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ae.DEFAULT||t===ae.LNGLAT||t===ae.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){mr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:ETt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=xTt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(a&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!tkt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(co.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>ML&&qt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),co=bf.allocate(co,r,{size:3,copy:!0,maxCount:Math.max(r,ML)});const i=Math.floor(co.length/3),o=[];for(let s=n;s<i;s++)this.encodePickingColor(s,o),co[s*3+0]=o[0],co[s*3+1]=o[1],co[s*3+2]=o[2]}t.value=co.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),s=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==co.buffer&&(n.value=co.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){mr(!this.internalState),mr(Number.isFinite(this.props.coordinateSystem)),jr(qTt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new XTt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(qt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new _Tt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){jr(JTt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(jr(ZTt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,s=this._updateUniformTransition();i.propsInTransition=s,n.viewport=i.viewport||o,this.props=s;try{const a=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const u=this.getModels()[0]!==l[0];this._postUpdate(a,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){jr(KTt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;r.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(r)||[0,0];Ts(o.gl,{polygonOffset:l}),ai(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const s=t[i],a=r[i];s&&Array.isArray(a)&&(r.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&jr(YTt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=bTt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){yTt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new dTt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:l}=n;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==l){const u={};s||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(a)&&(u.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}P(Vo,"defaultProps",ekt);P(Vo,"layerName","Layer");const rkt="compositeLayer.renderLayers";class X_ extends Vo{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:y,_subLayerProps:b}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:y},T=b&&t.id&&b[t.id],S=T&&T.updateTriggers,k=t.id||"sublayer";if(T){const x=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const I in T){const L=A[I]||x[I];L&&L.type==="accessor"&&(T[I]=this.getSubLayerAccessor(T[I]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(k),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const x of m){const A=x.getSubLayerProps.call(this,x);A&&Object.assign(w,A,{updateTriggers:Object.assign(w.updateTriggers,A.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=V_(o,Boolean),this.internalState.subLayers=n}jr(rkt,this,i,n);for(const o of n)o.parent=this}}P(X_,"layerName","CompositeLayer");const Wv=Math.PI/180,xL=180/Math.PI,wm=6370972,Vc=256;function nkt(){const e=Vc/wm,t=Math.PI/180*Vc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class ikt extends Ha{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:a=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new qr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Wv),c.rotateZ(-n*Wv),c.scale(f/l);const h=Math.atan(.5/u),d=Vc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:nkt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*s}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=a}get projectionMode(){return Oi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),s=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],s[0]),Math.min(n[1],o[1],i[1],s[1]),Math.max(n[0],o[0],i[0],s[0]),Math.max(n[1],o[1],i[1],s[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(s))u=tw(l,[i,a,s,1]);else{const d=tw(l,[i,a,-1,1]),p=tw(l,[i,a,1,1]),v=((n||0)/wm+1)*Vc,m=U2(tV([],d,p)),g=U2(d),y=U2(p),b=(4*g*y-(m-g-y)**2)/16,w=4*b/m,T=Math.sqrt(g-w),S=Math.sqrt(Math.max(0,v*v-w)),k=(T-S)/Math.sqrt(m);u=_bt([],d,p,k)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Wv,s=n*Wv,a=Math.cos(s),l=(i/wm+1)*Vc;return[Math.sin(o)*a*l,-Math.cos(o)*a*l,Math.sin(s)*l]}unprojectPosition(t){const[r,n,i]=t,o=eV(t),s=Math.asin(i/o),l=Math.atan2(r,-n)*xL,u=s*xL,c=(o/Vc-1)*wm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function tw(e,t){const r=Vf([],t,e);return DC(r,r,1/r[3]),r}class GV{constructor(t){P(this,"opts",void 0),P(this,"typedArrayManager",void 0),P(this,"indexStarts",[0]),P(this,"vertexStarts",[0]),P(this,"vertexCount",0),P(this,"instanceCount",0),P(this,"attributes",void 0),P(this,"_attributeDefs",void 0),P(this,"data",void 0),P(this,"getGeometry",void 0),P(this,"geometryBuffer",void 0),P(this,"buffers",void 0),P(this,"positionSize",void 0),P(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=bf,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(mr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(a))for(const u of a)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?NV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(const a in o)if(a in i)s.release(n[a]),n[a]=null;else{const l=o[a];l.copy=r,n[a]=s.allocate(n[a],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:s,objectInfo:a}=H_(i,r,n);for(const l of s){a.index++;const u=o?o(l,a):null;t(u,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:s}=this,{startRow:a=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!s)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},a,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof Ce){const f=s.accessor.stride||this.positionSize*4;i=i||s.byteLength/f}else if(s.buffer){const f=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/f}else if(s.value){const f=s.value,h=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},a,l),this.vertexCount=r[r.length-1]}}const okt=new Uint16Array([0,2,1,0,3,2]),skt=new Float32Array([0,1,0,0,1,0,1,1]);function akt(e,t){if(!t)return lkt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),m=ukt(e,d,v);u[c*3+0]=m[0],u[c*3+1]=m[1],u[c*3+2]=m[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(a[f++]=c-o,a[f++]=c-o-1,a[f++]=c-1,a[f++]=c-o,a[f++]=c-1,a[f++]=c),c++}}return{vertexCount:s,positions:u,indices:a,texCoords:l}}function lkt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:okt,texCoords:skt}}function ukt(e,t,r){return ru(ru(e[0],e[1],r),ru(e[3],e[2],r),t)}const ckt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,fkt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,hkt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(fkt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),dkt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ae.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class Y_ extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:ckt,fs:hkt,modules:[Fu,$u]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:s}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),i.invalidateAll()}if(t.bounds!==r.bounds){const s=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const l in a)s&&s[l]!==a[l]&&i.invalidate(l);this.setState({mesh:a,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const s=pkt(n.color),a=[Math.floor(s[0]*i),Math.floor(s[1]*o)];return n.bitmap={size:{width:i,height:o},uv:s,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return IL(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),akt(r,this.context.viewport.resolution)}_getModel(t){return t?new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:s,disablePicking:a}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&a||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=ae;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!IL(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const s=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&s===r)return{coordinateConversion:-1,bounds:o};if(i===r&&s===t){const a=za([o[0],o[1]]),l=za([o[2],o[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}P(Y_,"layerName","BitmapLayer");P(Y_,"defaultProps",dkt);function pkt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function IL(e){return Number.isFinite(e[0])}const vkt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,gkt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,mkt=1024,_kt=4,LL=()=>{},ykt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function bkt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function wkt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function Dp(e){return e&&(e.id||e.url)}function Skt(e,t,r){const n=e.width,i=e.height,o=IB(e,{width:t,height:r});return N1t(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function OL(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],s=Dp(i);e[s]={...i,x:o,y:r}}}function Tkt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let l=0;l<e.length;l++){const u=e[l],c=Dp(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>s&&(OL(r,a,i),n=0,i=o+i+t,o=0,a=[]),a.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return a.length>0&&OL(r,a,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:s,canvasHeight:bkt(o+i+t)}}function kkt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=H_(e);for(const s of i){o.index++;const a=t(s,o),l=Dp(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||a.url!==r[l].url)&&(n[l]={...a,source:s,sourceIndex:o.index})}return n}class Pkt{constructor(t,{onUpdate:r=LL,onError:n=LL}){P(this,"gl",void 0),P(this,"onUpdate",void 0),P(this,"onError",void 0),P(this,"_loadOptions",null),P(this,"_texture",null),P(this,"_externalTexture",null),P(this,"_mapping",{}),P(this,"_textureParameters",null),P(this,"_pendingCount",0),P(this,"_autoPacking",!1),P(this,"_xOffset",0),P(this,"_yOffset",0),P(this,"_rowHeight",0),P(this,"_buffer",_kt),P(this,"_canvasWidth",mkt),P(this,"_canvasHeight",0),P(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?Dp(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(kkt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:l}=Tkt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=l,this._texture||(this._texture=new Sn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||ykt})),this._texture.height!==this._canvasHeight&&(this._texture=Skt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,y1(n.url,pB,this._loadOptions).then(i=>{const o=Dp(n),{x:s,y:a,width:l,height:u}=this._mapping[o],c=wkt(r,i,l,u);this._texture.setSubImageData({data:c,x:s,y:a,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const HV=[0,0,0,255],Ckt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:HV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class yu extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:vkt,fs:gkt,modules:[Fu,$u]})}initializeState(){this.state={iconManager:new Pkt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:HV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:s,iconMapping:h?a:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:$a[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):qt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}P(yu,"defaultProps",Ckt);P(yu,"layerName","IconLayer");const Ekt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Akt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Mkt=[0,0,0,255],xkt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:Mkt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class jC extends Vo{getShaders(){return super.getShaders({vs:Ekt,fs:Akt,modules:[Fu,$u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:$a[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}P(jC,"layerName","LineLayer");P(jC,"defaultProps",xkt);const Ikt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Lkt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,RL=[0,0,0,255],Okt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:RL},getLineColor:{type:"accessor",value:RL},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class GC extends Vo{getShaders(){return super.getShaders({vs:Ikt,fs:Lkt,modules:[Fu,$u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:u,radiusUnits:$a[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:$a[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}P(GC,"defaultProps",Okt);P(GC,"layerName","ScatterplotLayer");const XV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function YV(e,t,r={}){return Rkt(e,r)!==t?(Nkt(e,r),!0):!1}function Rkt(e,t={}){return Math.sign(Dkt(e,t))}function Dkt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let s=r,a=n-i;s<n;s+=i)o+=(e[s]-e[a])*(e[s+1]+e[a+1]),a=s;return o/2}function Nkt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const l=r+a*i,u=r+(o-1-a)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Di(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function OT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function Np(e,t,r,n,i=[]){const o=n+t*r;for(let s=0;s<r;s++)i[s]=e[o+s];return i}function RT(e,t,r,n,i=[]){let o,s;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),s=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),s=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),s=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),s=0;else return null;for(let a=0;a<e.length;a++)i[a]=(s&1)===a?n[s]:o*(t[a]-e[a])+e[a];return i}function Sm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function qV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/r;let u=[];const c=[u],f=Np(e,0,r,s);let h,d;const p=KV(f,i,o,[]),v=[];Di(u,f);for(let m=1;m<l;m++){for(h=Np(e,m,r,s,h),d=Sm(h,p);d;){RT(f,h,d,p,v);const g=Sm(v,p);g&&(RT(f,v,g,p,v),d=g),Di(u,v),OT(f,v),$kt(p,i,d),n&&u.length>r&&(u=[],c.push(u),Di(u,f)),d=Sm(h,p)}Di(u,h),OT(f,h)}return n?c:c[0]}const DL=0,Fkt=1;function jv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function ZV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=r||{},a=[],l=[{pos:e,types:s?new Array(e.length/n).fill(Fkt):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();zkt(f,n,d[0]||f.length,u),c=KV(u[0],i,o,c);const p=Sm(u[1],c);if(p){let v=NL(f,h,n,0,d[0]||f.length,c,p);const m={pos:v[0].pos,types:v[0].types,holes:[]},g={pos:v[1].pos,types:v[1].types,holes:[]};l.push(m,g);for(let y=0;y<d.length;y++)v=NL(f,h,n,d[y],d[y+1]||f.length,c,p),v[0]&&(m.holes.push(m.pos.length),m.pos=jv(m.pos,v[0].pos),s&&(m.types=jv(m.types,v[0].types))),v[1]&&(g.holes.push(g.pos.length),g.pos=jv(g.pos,v[1].pos),s&&(g.types=jv(g.types,v[1].types)))}else{const v={positions:f};s&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),a.push(v)}}return a}function NL(e,t,r,n,i,o,s){const a=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const m=Np(e,a-1,r,n);let g=Math.sign(s&8?m[1]-o[3]:m[0]-o[2]),y=t&&t[a-1],b=0,w=0;for(let T=0;T<a;T++)d=Np(e,T,r,n,d),p=Math.sign(s&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&g&&g!==p&&(RT(m,d,s,o,h),Di(l,h)&&c.push(y),Di(u,h)&&f.push(y)),p<=0?(Di(l,d)&&c.push(v),b-=p):c.length&&(c[c.length-1]=DL),p>=0?(Di(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=DL),OT(m,d),g=p,y=v;return[b?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function KV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function $kt(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function zkt(e,t,r,n){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,s=c<s?c:s,a=c>a?c:a}return n[0][0]=i,n[0][1]=s,n[1][0]=o,n[1][1]=a,n}const Bkt=85.051129;function Vkt(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},s=e.slice(n,i);JV(s,r,0,i-n);const a=qV(s,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)QV(l,r);return a}function Ukt(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const s=[],a=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=Wkt(e,n,l,h);for(let v=p;v<h;v++)s[u++]=e[v];for(let v=l;v<p;v++)s[u++]=e[v];JV(s,n,d,u),jkt(s,n,d,u,r==null?void 0:r.maxLatitude),l=h,a[f]=u}a.pop();const c=ZV(s,a,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)QV(f.positions,n);return c}function Wkt(e,t,r,n){let i=-1,o=-1;for(let s=r+1;s<n;s+=t){const a=Math.abs(e[s]);a>i&&(i=a,o=s-1)}return o}function jkt(e,t,r,n,i=Bkt){const o=e[r],s=e[n-t];if(Math.abs(o-s)>180){const a=Np(e,0,t,r);a[0]+=Math.round((s-o)/360)*360,Di(e,a),a[1]=Math.sign(a[1])*i,Di(e,a),a[0]=o,Di(e,a)}}function JV(e,t,r,n){let i=e[0],o;for(let s=r;s<n;s+=t){o=e[s];const a=o-i;(a>180||a<-180)&&(o-=Math.round(a/360)*360),e[s]=i=o}}function QV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function Gkt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let s=0;s<e.length;s++)for(let a=0;a<t;a++)i[s*t+a]=e[s][a]||0}else i=e;return r?qV(i,{size:t,gridResolution:r}):n?Vkt(i,{size:t}):i}const Hkt=1,Xkt=2,ew=4;class Ykt extends GV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?Gkt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(FL(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&FL(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:s}=r;n.fill(0,o,o+s),i?(n[o]=ew,n[o+s-2]=ew):(n[o]+=Hkt,n[o+s-2]+=Xkt),n[o+s-1]=ew}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,s=new Array(3);for(let a=i,l=0;l<o;a++,l++)this.getPointOnPath(t,l,s),n[a*3]=s[0],n[a*3+1]=s[1],n[a*3+2]=s[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function FL(e){return Array.isArray(e[0])}const qkt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Zkt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,tU=[0,0,0,255],Kkt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:tU},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},rw={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class HC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:qkt,fs:Zkt,modules:[Fu,$u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:rw,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:rw,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:rw,defaultValue:tU},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new Ykt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:$a[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}P(HC,"defaultProps",Kkt);P(HC,"layerName","PathLayer");var XC={exports:{}};XC.exports=q_;XC.exports.default=q_;function q_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=eU(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,f,h,d;if(n&&(o=rPt(e,t,o,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Fp(o,s,r,a,l,d,0),s}function eU(e,t,r,n,i){var o,s;if(i===FT(e,t,r,n)>0)for(o=t;o<r;o+=n)s=$L(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=$L(o,e[o],e[o+1],s);return s&&Z_(s,s.next)&&(zp(s),s=s.next),s}function bu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Z_(r,r.next)||Xe(r.prev,r,r.next)===0)){if(zp(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Fp(e,t,r,n,i,o,s){if(!!e){!s&&o&&aPt(e,n,i,o);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?Qkt(e,n,i,o):Jkt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),zp(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=tPt(bu(e),t,r),Fp(e,t,r,n,i,o,2)):s===2&&ePt(e,t,r,n,i,o):Fp(bu(e),t,r,n,i,o,1);break}}}}function Jkt(e){var t=e.prev,r=e,n=e.next;if(Xe(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,h=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Uc(i,a,o,l,s,u,p.x,p.y)&&Xe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Qkt(e,t,r,n){var i=e.prev,o=e,s=e.next;if(Xe(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,h=s.y,d=a<l?a<u?a:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=a>l?a>u?a:u:l>u?l:u,m=c>f?c>h?c:h:f>h?f:h,g=DT(d,p,t,r,n),y=DT(v,m,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=g&&w&&w.z<=y;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&Uc(a,c,l,f,u,h,b.x,b.y)&&Xe(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&Uc(a,c,l,f,u,h,w.x,w.y)&&Xe(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&Uc(a,c,l,f,u,h,b.x,b.y)&&Xe(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=y;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&Uc(a,c,l,f,u,h,w.x,w.y)&&Xe(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function tPt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Z_(i,o)&&rU(i,n,n.next,o)&&$p(i,o)&&$p(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),zp(n),zp(n.next),n=e=o),n=n.next}while(n!==e);return bu(n)}function ePt(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&cPt(s,a)){var l=nU(s,a);s=bu(s,s.next),l=bu(l,l.next),Fp(s,t,r,n,i,o,0),Fp(l,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function rPt(e,t,r,n){var i=[],o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,u=eU(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(uPt(u));for(i.sort(nPt),o=0;o<i.length;o++)r=iPt(i[o],r);return r}function nPt(e,t){return e.x-t.x}function iPt(e,t){var r=oPt(e,t);if(!r)return t;var n=nU(r,e);return bu(n,n.next),bu(r,r.next)}function oPt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var l=s,u=s.x,c=s.y,f=1/0,h;r=s;do n>=r.x&&r.x>=u&&n!==r.x&&Uc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),$p(r,e)&&(h<f||h===f&&(r.x>s.x||r.x===s.x&&sPt(s,r)))&&(s=r,f=h)),r=r.next;while(r!==l);return s}function sPt(e,t){return Xe(e.prev,e,t.prev)<0&&Xe(t.next,e,e.next)<0}function aPt(e,t,r,n){var i=e;do i.z===0&&(i.z=DT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,lPt(i)}function lPt(e){var t,r,n,i,o,s,a,l,u=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1);return e}function DT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function uPt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Uc(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function cPt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!fPt(e,t)&&($p(e,t)&&$p(t,e)&&hPt(e,t)&&(Xe(e.prev,e,t.prev)||Xe(e,t.prev,t))||Z_(e,t)&&Xe(e.prev,e,e.next)>0&&Xe(t.prev,t,t.next)>0)}function Xe(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Z_(e,t){return e.x===t.x&&e.y===t.y}function rU(e,t,r,n){var i=Hv(Xe(e,t,r)),o=Hv(Xe(e,t,n)),s=Hv(Xe(r,n,e)),a=Hv(Xe(r,n,t));return!!(i!==o&&s!==a||i===0&&Gv(e,r,t)||o===0&&Gv(e,n,t)||s===0&&Gv(r,e,n)||a===0&&Gv(r,t,n))}function Gv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Hv(e){return e>0?1:e<0?-1:0}function fPt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&rU(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function $p(e,t){return Xe(e.prev,e,e.next)<0?Xe(e,t,e.next)>=0&&Xe(e,e.prev,t)>=0:Xe(e,t,e.prev)<0||Xe(e,e.next,t)<0}function hPt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function nU(e,t){var r=new NT(e.i,e.x,e.y),n=new NT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function $L(e,t,r,n){var i=new NT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function zp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function NT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}q_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(FT(e,0,o,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;s-=Math.abs(FT(e,u,c,r))}var f=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function FT(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}q_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Xv=XV.CLOCKWISE,zL=XV.COUNTER_CLOCKWISE,wa={isClosed:!0};function dPt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function wd(e){return"positions"in e?e.positions:e}function Tm(e){return"holeIndices"in e?e.holeIndices:null}function pPt(e){return Array.isArray(e[0])}function vPt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function gPt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function mPt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function BL(e,t,r,n,i){let o=t;const s=r.length;for(let a=0;a<s;a++)for(let l=0;l<n;l++)e[o++]=r[a][l]||0;if(!gPt(r))for(let a=0;a<n;a++)e[o++]=r[0][a]||0;return wa.start=t,wa.end=o,wa.size=n,YV(e,i,wa),o}function VL(e,t,r,n,i=0,o,s){o=o||r.length;const a=o-i;if(a<=0)return t;let l=t;for(let u=0;u<a;u++)e[l++]=r[i+u];if(!mPt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return wa.start=t,wa.end=l,wa.size=n,YV(e,s,wa),l}function _Pt(e,t){dPt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let s=0;for(let a=0;a<=o.length;a++)s=VL(r,s,i,t,o[a-1],o[a],a===0?Xv:zL),n.push(s);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!pPt(e))return VL(r,0,e,t,0,r.length,Xv),r;if(!vPt(e)){let i=0;for(const[o,s]of e.entries())i=BL(r,i,s,t,o===0?Xv:zL),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return BL(r,0,e,t,Xv),r}function yPt(e,t,r){let n=Tm(e);n&&(n=n.map(o=>o/t));let i=wd(e);if(r){const o=i.length;i=i.slice();const s=[];for(let a=0;a<o;a+=t){s[0]=i[a],s[1]=i[a+1];const l=r(s);i[a]=l[0],i[a+1]=l[1]}}return XC.exports(i,n,t)}class bPt extends GV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=_Pt(t,this.positionSize);return this.opts.resolution?ZV(wd(r),Tm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?Ukt(wd(r),Tm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(UL(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return wd(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&UL(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=yPt(t,this.positionSize,this.opts.preproject);l=a.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;s[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const s=wd(t);for(let a=r,l=0;l<n;a++,l++){const u=s[l*o],c=s[l*o+1],f=o>2?s[l*o+2]:0;i[a*3]=u,i[a*3+1]=c,i[a*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&Tm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),s)for(let a=0;a<s.length;a++)o[r+s[a]/i-1]=0;o[r+n-1]=0}}function UL(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const iU=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,wPt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(iU,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),SPt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(iU,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),TPt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,x1=[0,0,0,255],kPt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:x1},getLineColor:{type:"accessor",value:x1},material:!0},Yv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class YC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?wPt:SPt,fs:TPt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Fu,R2t,$u]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===ae.DEFAULT&&(n=ae.LNGLAT),this.setState({numInstances:0,polygonTesselator:new bPt({preproject:n===ae.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||EC(t,Ue.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Yv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Yv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Yv,accessor:"getFillColor",defaultValue:x1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Yv,accessor:"getLineColor",defaultValue:x1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:a,target:l})=>this.encodePickingColor(s&&s.__source?s.__source.index:a,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(u),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),n&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,s=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,s;if(n){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,o=new ks(t,{...a,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(s=new ks(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new Nu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}P(YC,"defaultProps",kPt);P(YC,"layerName","SolidPolygonLayer");function PPt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,s=e.length;let a=s,l=s;for(let h=0;h<s;h++){const d=t(e[h]);if(a>h&&d>=i&&(a=h),d>=o){l=h;break}}let u=a;const f=l-a!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:a,endRow:a+n.length}}function CPt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?EPt(e,n,r):null}function EPt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function APt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let s=0;s<i.length;s++)t(i[s],o),r[n][s*3+0]=o[0],r[n][s*3+1]=o[1],r[n][s*3+2]=o[2]}return r}const MPt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,WL=192/256,jL=[],xPt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class qC extends yu{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:MPt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&qt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:WL,outlineBuffer:i?Math.max(n,WL*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):jL}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):jL}}P(qC,"defaultProps",xPt);P(qC,"layerName","MultiIconLayer");var ZC={exports:{}};ZC.exports=h0;ZC.exports.default=h0;var nf=1e20;function h0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function IPt(e,t,r,n,i,o,s){o.fill(nf,0,t*r),s.fill(0,0,t*r);for(var a=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+a)*t+u+a,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,s[c]=nf;else if(f===0)o[c]=nf,s[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,s[c]=d*d}}}function LPt(e,t,r,n,i,o,s){for(var a=0;a<t*r;a++){var l=Math.sqrt(n[a])-Math.sqrt(i[a]);e[a]=Math.round(255-255*(l/o+s))}}h0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,s,a,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,s=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=s+i,a=l+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;s&&l&&(this.ctx.clearRect(f,c,s,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,s,l));var p=new Uint8ClampedArray(o*a);return IPt(d,o,a,s,l,this.gridOuter,this.gridInner),GL(this.gridOuter,o,a,this.f,this.v,this.z),GL(this.gridInner,o,a,this.f,this.v,this.z),LPt(p,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:s,height:l,sdfWidth:o,sdfHeight:a,top:u,left:0,advance:n}}};h0.prototype.draw=function(e){return this._draw(e,!1).data};h0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function GL(e,t,r,n,i,o){for(var s=0;s<t;s++)HL(e,s,t,r,n,i,o);for(var a=0;a<r;a++)HL(e,a*t,1,t,n,i,o)}function HL(e,t,r,n,i,o,s){var a,l,u,c;for(o[0]=0,s[0]=-nf,s[1]=nf,a=0;a<n;a++)i[a]=e[t+a*r];for(a=1,l=0,u=0;a<n;a++){do c=o[l],u=(i[a]-i[c]+a*a-c*c)/(a-c)/2;while(u<=s[l]&&--l>-1);l++,o[l]=a,s[l]=u,s[l+1]=nf}for(a=0,l=0;a<n;a++){for(;s[l+1]<a;)l++;c=o[l],e[t+a*r]=i[c]+(a-c)*(a-c)}}const OPt=32,RPt=[];function DPt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function NPt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,u=s;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:a+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:a+l*c,canvasHeight:DPt(a+(l+1)*c)}}function oU(e,t,r,n){let i=0;for(let s=t;s<r;s++){var o;const a=e[s];i+=((o=n[a])===null||o===void 0?void 0:o.width)||0}return i}function sU(e,t,r,n,i,o){let s=t,a=0;for(let l=t;l<r;l++){const u=oU(e,l,l+1,i);a+u>n&&(s<l&&o.push(l),s=l,a=0),a+=u}return a}function FPt(e,t,r,n,i,o){let s=t,a=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>a){let f=oU(e,a,l,i);u+f>n&&(s<a&&(o.push(a),s=a,u=0),f>n&&(f=sU(e,a,l,n,i,o),s=o[o.length-1])),a=l,u+=f}return u}function $Pt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const s=[];return t==="break-all"?sU(e,i,o,r,n,s):FPt(e,i,o,r,n,s),s}function zPt(e,t,r,n,i,o){let s=0,a=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(a||(a=c.height),i[l]=s+c.width/2,s+=c.width):(qt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=s,s+=OPt)}o[0]=s,o[1]=a}function XL(e,t,r,n,i){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),u=new Array(s),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let m=0;m<=s;m++){const g=o[m];if((g===`
`||m===s)&&(v=m),v>p){const y=c?$Pt(o,r,n,i,p,v):RPt;for(let b=0;b<=y.length;b++){const w=b===0?p:y[b-1],T=b<y.length?y[b]:v;zPt(o,w,T,i,a,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}g===`
`&&(a[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:a,y:l,rowWidth:u,size:f}}function BPt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const s=e.BYTES_PER_ELEMENT,a=r?r/s:1,l=n?n/s:0,u=i[t]||Math.ceil((e.length-l)/a),c=o&&new Set,f=new Array(t);let h=e;if(a>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*a+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,m=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class aU{constructor(t=5){P(this,"limit",void 0),P(this,"_cache",{}),P(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function VPt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Qd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:VPt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},YL=1024,UPt=.9,qL=1.2,lU=3;let I1=new aU(lU);function WPt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=I1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function jPt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function ZL(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function GPt(e){qt.assert(Number.isFinite(e)&&e>=lU,"Invalid cache limit"),I1=new aU(e)}class HPt{constructor(){P(this,"props",{...Qd}),P(this,"_key",void 0),P(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return qL}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=WPt(this._key,this.props.characterSet),i=I1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,I1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=YL);const h=f.getContext("2d");ZL(h,i,s,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:m}=NPt({getFontWidth:g=>h.measureText(g).width,fontHeight:s*qL,buffer:a,characterSet:r,maxCanvasWidth:YL,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const g=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(g,0,0)}if(ZL(h,i,s,o),l){const g=new ZC.exports(s,a,u,c,i,o),y=h.getImageData(0,0,g.size,g.size);for(const b of r)jPt(g.draw(b),y),h.putImageData(y,d[b].x-a,d[b].y+a)}else for(const g of r)h.fillText(g,d[g].x,d[g].y+s*UPt);return{xOffset:v,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(s," ").concat(a):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const XPt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,YPt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,qPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class KC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:XPt,fs:YPt,modules:[Fu,$u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(a),padding:l,sizeUnits:$a[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}P(KC,"defaultProps",qPt);P(KC,"layerName","TextBackgroundLayer");const KL={start:1,middle:0,end:-1},JL={top:1,center:0,bottom:-1},nw=[0,0,0,255],ZPt=1,KPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:nw},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Qd.characterSet},fontFamily:Qd.fontFamily,fontWeight:Qd.fontWeight,lineHeight:ZPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:nw},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:nw},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class JC extends X_{constructor(...t){super(...t),P(this,"state",void 0),P(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=XL(f,l,s,a,i),p=KL[typeof u=="function"?u(r,n):u],v=JL[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),P(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,m]}=XL(f,l,s,a,i),g=KL[typeof u=="function"?u(r,n):u],y=JL[typeof c=="function"?c(r,n):c],b=h.length,w=new Array(b*2);let T=0;for(let S=0;S<b;S++){const k=(1-g)*(v-p[S])/2;w[T++]=(g-1)*v/2+k+h[S],w[T++]=(y-1)*m/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new HPt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(s),!0;for(const a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,s=r.startIndices,a;const l=n==="auto"&&new Set;if(i&&s){const{texts:u,characterCount:c}=BPt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:s,characterSet:l});a=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=H_(r);s=[0],a=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),a+=h.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:m,getBorderWidth:g,backgroundPadding:y,background:b,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:k,sizeScale:x,sizeUnits:A,sizeMinPixels:I,sizeMaxPixels:L,transitions:N,updateTriggers:z}=this.props,V=this.getSubLayerClass("characters",qC),F=this.getSubLayerClass("background",KC);return[b&&new F({getFillColor:v,getLineColor:m,getLineWidth:g,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:x/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:I,sizeMaxPixels:L,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getSize:N.getSize,getFillColor:N.getBackgroundColor,getLineColor:N.getBorderColor,getLineWidth:N.getBorderWidth,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:z.getPosition,getAngle:z.getAngle,getSize:z.getSize,getFillColor:z.getBackgroundColor,getLineColor:z.getBorderColor,getLineWidth:z.getBorderWidth,getPixelOffset:z.getPixelOffset,getBoundingRect:{getText:z.getText,getTextAnchor:z.getTextAnchor,getAlignmentBaseline:z.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Qd.smoothing,outlineWidth:S,outlineColor:k,iconAtlas:o,iconMapping:s,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:x*i,sizeUnits:A,sizeMinPixels:I*i,sizeMaxPixels:L*i,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getColor:N.getColor,getSize:N.getSize,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:z.getText,getPosition:z.getPosition,getAngle:z.getAngle,getColor:z.getColor,getSize:z.getSize,getPixelOffset:z.getPixelOffset,getIconOffsets:{getText:z.getText,getTextAnchor:z.getTextAnchor,getAlignmentBaseline:z.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){GPt(t)}}P(JC,"defaultProps",KPt);P(JC,"layerName","TextLayer");const km={circle:{type:GC,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:yu,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:JC,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Pm={type:HC,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},$T={type:YC,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Vh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function iw(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=n[o],r&&(i.transitions[s]=r[o])),i[s]=a}return i}function JPt(e){if(Array.isArray(e))return e;switch(qt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return qt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function QL(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let s=i;s<o;s++){const a=e[s];qt.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:l}=a;if(l.type==="GeometryCollection"){qt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];tO(f,n,t,a,s)}}else tO(l,n,t,a,s)}return n}function tO(e,t,r,n,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!tCt(o,s)){qt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":a.push(r({geometry:e},n,i));break;case"MultiPoint":s.forEach(f=>{a.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":s.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),s.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":s.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const QPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function tCt(e,t){let r=QPt[e];for(qt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function uU(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function qv(e){return e.geometry.coordinates}function eCt(e,t){const r=uU(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=qv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=qv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=qv,r.polygonsOutline.data=s,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=qv,r}function rCt(e,t){const r=uU(),{points:n,lines:i,polygons:o}=e,s=APt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:s.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const nCt=["points","linestrings","polygons"],iCt={...Vh(km.circle),...Vh(km.icon),...Vh(km.text),...Vh(Pm),...Vh($T),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class K_ extends X_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=rCt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=JPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),s[u]=[];for(const u of r.dataChanged){const c=QL(n,i,u);for(const f in l)s[f].push(PPt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=QL(n,i);const a=eCt(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=nCt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,$T.type);if(o){const s=iw(this,$T.props),a=t&&r;return a||delete s.getLineColor,s.updateTriggers.lineColors=a,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",s=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,Pm.type),a=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,Pm.type);if(s||a){const l=iw(this,Pm.props);return[s&&new s(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(a=>a.__source.index===i));const o=new Set(t.split("+")),s=[];for(const a of o){const l="points-".concat(a),u=km[a],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=iw(this,u.props);let h=r.points;if(a==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}s.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return s}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:s}=i,a=CPt(o,s);return t(a,i)}}}P(K_,"layerName","GeoJsonLayer");P(K_,"defaultProps",iCt);class oCt{constructor(t){P(this,"index",void 0),P(this,"isVisible",void 0),P(this,"isSelected",void 0),P(this,"parent",void 0),P(this,"children",void 0),P(this,"content",void 0),P(this,"state",void 0),P(this,"layers",void 0),P(this,"id",void 0),P(this,"bbox",void 0),P(this,"zoom",void 0),P(this,"userData",void 0),P(this,"_abortController",void 0),P(this,"_loader",void 0),P(this,"_loaderId",void 0),P(this,"_isLoaded",void 0),P(this,"_isCancelled",void 0),P(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||qt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:s,bbox:a,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:s,bbox:a,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Gr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},eO=new kt,sCt=new kt;class QC{constructor(t=[0,0,0],r=[0,0,0],n){P(this,"center",void 0),P(this,"halfDiagonal",void 0),P(this,"minimum",void 0),P(this,"maximum",void 0),n=n||eO.copy(t).add(r).scale(.5),this.center=new kt(n),this.halfDiagonal=new kt(r).subtract(this.center),this.minimum=new kt(t),this.maximum=new kt(r)}clone(){return new QC(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=sCt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Gr.INSIDE:o+i<0?Gr.OUTSIDE:Gr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=eO.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Uh=new kt,rO=new kt;class tE{constructor(t=[0,0,0],r=0){P(this,"center",void 0),P(this,"radius",void 0),this.radius=-0,this.center=new kt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Uh.from(r),this.center=new kt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new tE(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,s=Uh.copy(i).subtract(r),a=s.magnitude();if(n>=a+o)return this.clone();if(o>=a+n)return t.clone();const l=(n+a+o)*.5;return rO.copy(s).scale((-n+l)/a).add(r),this.center.copy(rO),this.radius=l,this}expand(t){const n=Uh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=$bt(Uh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Uh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Gr.OUTSIDE:o<n?Gr.INTERSECTING:Gr.INSIDE}}const aCt=new kt,lCt=new kt,Zv=new kt,Kv=new kt,Jv=new kt,uCt=new kt,cCt=new kt,Jo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class eE{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){P(this,"center",void 0),P(this,"halfAxes",void 0),this.center=new kt().from(t),this.halfAxes=new xr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new kt(t).len(),new kt(r).len(),new kt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new kt(t).normalize(),o=new kt(r).normalize(),s=new kt(n).normalize();return new GI().fromMatrix3(new xr([...i,...o,...s]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new GI(n),o=new xr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new kt().from(t),this.halfAxes=o,this}clone(){return new eE(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new tE){const r=this.halfAxes,n=r.getColumn(0,Zv),i=r.getColumn(1,Kv),o=r.getColumn(2,Jv),s=aCt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,s=n.y,a=n.z,l=Math.abs(o*i[Jo.COLUMN0ROW0]+s*i[Jo.COLUMN0ROW1]+a*i[Jo.COLUMN0ROW2])+Math.abs(o*i[Jo.COLUMN1ROW0]+s*i[Jo.COLUMN1ROW1]+a*i[Jo.COLUMN1ROW2])+Math.abs(o*i[Jo.COLUMN2ROW0]+s*i[Jo.COLUMN2ROW1]+a*i[Jo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Gr.OUTSIDE:u>=l?Gr.INSIDE:Gr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=lCt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Zv),o=n.getColumn(1,Kv),s=n.getColumn(2,Jv),a=i.magnitude(),l=o.magnitude(),u=s.magnitude();i.normalize(),o.normalize(),s.normalize();let c=0,f;return f=Math.abs(r.dot(i))-a,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(s))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,l=a.getColumn(0,Zv),u=a.getColumn(1,Kv),c=a.getColumn(2,Jv),f=uCt.copy(l).add(u).add(c).add(s),h=cCt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Zv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Kv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Jv);return i.transformAsPoint(t),this.halfAxes=new xr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const nO=new kt,iO=new kt;class wf{constructor(t=[0,0,1],r=0){P(this,"normal",void 0),P(this,"distance",void 0),this.normal=new kt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return Lp(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=nO.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),Lp(Lo(this.normal.len(),1)),this.distance=i,this}clone(){return new wf(this.normal,this.distance)}equals(t){return Lo(this.distance,t.distance)&&Lo(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=iO.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=nO.from(t);const n=this.getPointDistance(t),i=iO.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const oO=[new kt([1,0,0]),new kt([0,1,0]),new kt([0,0,1])],sO=new kt,fCt=new kt;new wf(new kt(1,0,0),0);class ds{constructor(t=[]){P(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*oO.length;const r=t.center,n=t.radius;let i=0;for(const o of oO){let s=this.planes[i],a=this.planes[i+1];s||(s=this.planes[i]=new wf),a||(a=this.planes[i+1]=new wf);const l=sO.copy(o).scale(-n).add(r);-o.dot(l),s.fromPointNormal(l,o);const u=sO.copy(o).scale(n).add(r),c=fCt.copy(o).negate();-c.dot(u),a.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Gr.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Gr.OUTSIDE:return Gr.OUTSIDE;case Gr.INTERSECTING:r=Gr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(Lp(Number.isFinite(r),"parentPlaneMask is required."),r===ds.MASK_OUTSIDE||r===ds.MASK_INSIDE)return r;let n=ds.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&(r&s)===0)continue;const a=i[o],l=t.intersectPlane(a);if(l===Gr.OUTSIDE)return ds.MASK_OUTSIDE;l===Gr.INTERSECTING&&(n|=s)}return n}}P(ds,"MASK_OUTSIDE",4294967295);P(ds,"MASK_INSIDE",0);P(ds,"MASK_INDETERMINATE",2147483647);new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;const wo=new xr,hCt=new xr,dCt=new xr,Qv=new xr,aO=new xr;function pCt(e,t={}){const r=lV.EPSILON20,n=10;let i=0,o=0;const s=hCt,a=dCt;s.identity(),a.copy(e);const l=r*vCt(a);for(;o<n&&gCt(a)>l;)mCt(a,Qv),aO.copy(Qv).transpose(),a.multiplyRight(Qv),a.multiplyLeft(aO),s.multiplyRight(Qv),++i>2&&(++o,i=0);return t.unitary=s.toTarget(t.unitary),t.diagonal=a.toTarget(t.diagonal),t}function vCt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const zT=[1,0,0],BT=[2,2,1];function gCt(e){let t=0;for(let r=0;r<3;++r){const n=e[wo.getElementIndex(BT[r],zT[r])];t+=2*n*n}return Math.sqrt(t)}function mCt(e,t){const r=lV.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[wo.getElementIndex(BT[u],zT[u])]);c>n&&(i=u,n=c)}const o=zT[i],s=BT[i];let a=1,l=0;if(Math.abs(e[wo.getElementIndex(s,o)])>r){const u=e[wo.getElementIndex(s,s)],c=e[wo.getElementIndex(o,o)],f=e[wo.getElementIndex(s,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),a=1/Math.sqrt(1+d*d),l=d*a}return xr.IDENTITY.to(t),t[wo.getElementIndex(o,o)]=t[wo.getElementIndex(s,s)]=a,t[wo.getElementIndex(s,o)]=l,t[wo.getElementIndex(o,s)]=-l,t}const Js=new kt,_Ct=new kt,yCt=new kt,bCt=new kt,wCt=new kt,SCt=new xr,TCt={diagonal:new xr,unitary:new xr};function kCt(e,t=new eE){if(!e||e.length===0)return t.halfAxes=new xr([0,0,0,0,0,0,0,0,0]),t.center=new kt,t;const r=e.length,n=new kt(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,s=0,a=0,l=0,u=0,c=0;for(const A of e){const I=Js.copy(A).subtract(n);o+=I.x*I.x,s+=I.x*I.y,a+=I.x*I.z,l+=I.y*I.y,u+=I.y*I.z,c+=I.z*I.z}o*=i,s*=i,a*=i,l*=i,u*=i,c*=i;const f=SCt;f[0]=o,f[1]=s,f[2]=a,f[3]=s,f[4]=l,f[5]=u,f[6]=a,f[7]=u,f[8]=c;const{unitary:h}=pCt(f,TCt),d=t.halfAxes.copy(h);let p=d.getColumn(0,yCt),v=d.getColumn(1,bCt),m=d.getColumn(2,wCt),g=-Number.MAX_VALUE,y=-Number.MAX_VALUE,b=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Js.copy(A),g=Math.max(Js.dot(p),g),y=Math.max(Js.dot(v),y),b=Math.max(Js.dot(m),b),w=Math.min(Js.dot(p),w),T=Math.min(Js.dot(v),T),S=Math.min(Js.dot(m),S);p=p.multiplyByScalar(.5*(w+g)),v=v.multiplyByScalar(.5*(T+y)),m=m.multiplyByScalar(.5*(S+b)),t.center.copy(p).add(v).add(m);const k=_Ct.set(g-w,y-T,b-S).multiplyByScalar(.5),x=new xr([k[0],0,0,0,k[1],0,0,0,k[2]]);return t.halfAxes.multiplyRight(x),t}const Wc=512,lO=3,cU=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],fU=cU.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),PCt=fU.concat([[.25,.5],[.75,.5]]);class jc{constructor(t,r,n){P(this,"x",void 0),P(this,"y",void 0),P(this,"z",void 0),P(this,"childVisible",void 0),P(this,"selected",void 0),P(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new jc(t,r,n),new jc(t,r+1,n),new jc(t+1,r,n),new jc(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:s,bounds:a,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(a&&!this.insideBounds(a)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<s&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),s=Wc/o;return this.x*s<n&&this.y*s<i&&(this.x+1)*s>t&&(this.y+1)*s>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?PCt:this.z<2?fU:cU,u=[];for(const c of l){const f=VT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return kCt(u)}const i=Math.pow(2,this.z),o=Wc/i,s=this.x*o+r*Wc,a=Wc-(this.y+1)*o;return new QC([s,a,t[0]],[s+o,a+o,t[1]])}}function CCt(e,t,r,n){const i=e instanceof ikt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new wf(d.clone().negate(),p)),s=new ds(o),a=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*a||0,u=r&&r[1]*a||0,c=e instanceof Fo&&e.pitch<=60?t:0;if(n){const[d,p,v,m]=n,g=za([d,m]),y=za([v,p]);n=[g[0],Wc-g[1],y[0],Wc-y[1]]}const f=new jc(0,0,0),h={viewport:e,project:i,cullingVolume:s,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Fo&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-lO););for(h.offset=1;f.update(h)&&!(++h.offset>lO););}return f.getSelected()}const Cs=512,ECt=[-1/0,-1/0,1/0,1/0],ACt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function hU(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function MCt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function xCt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=MCt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const s=new RegExp("{".concat(o,"}"),"g");i=i.replace(s,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function ICt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,s=e.getBounds({z:i}),a=e.getBounds({z:o});n=[Math.min(s[0],a[0]),Math.min(s[1],a[1]),Math.max(s[2],a[2]),Math.max(s[3],a[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function L1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:s}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+s],u),d=e.unproject([n+o,i+s],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const a=L1({viewport:e,z:t[0],cullRect:r}),l=L1({viewport:e,z:t[1],cullRect:r});return[Math.min(a[0],l[0]),Math.min(a[1],l[1]),Math.max(a[2],l[2]),Math.max(a[3],l[3])]}function LCt(e,t,r){return r?hU(e,r).map(i=>i*t/Cs):e.map(n=>n*t/Cs)}function rE(e,t){return Math.pow(2,e)*Cs/t}function VT(e,t,r){const n=rE(r,Cs),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,s=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,s]}function uO(e,t,r,n){const i=rE(r,n);return[e/i*Cs,t/i*Cs]}function OCt(e,t,r,n,i=Cs){if(e.isGeospatial){const[u,c]=VT(t,r,n),[f,h]=VT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,s]=uO(t,r,n,i),[a,l]=uO(t+1,r+1,n,i);return{left:o,top:s,right:a,bottom:l}}function RCt(e,t,r,n,i){const o=ICt(e,null,n),s=rE(t,r),[a,l,u,c]=LCt(o,s,i),f=[];for(let h=Math.floor(a);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function DCt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=Cs,modelMatrix:s,modelMatrixInverse:a,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(Cs/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return s&&a&&i&&!e.isGeospatial&&(c=hU(i,s)),e.isGeospatial?CCt(e,u,n,i):RCt(e,u,o,c||ECt,a)}const cO=1,J_=2,NCt="never",FCt="no-overlap",nE="best-available",$Ct=5,zCt={[nE]:VCt,[FCt]:UCt,[NCt]:()=>{}};class BCt{constructor(t){P(this,"opts",void 0),P(this,"_requestScheduler",void 0),P(this,"_cache",void 0),P(this,"_dirty",void 0),P(this,"_tiles",void 0),P(this,"_cacheByteSize",void 0),P(this,"_viewport",void 0),P(this,"_zRange",void 0),P(this,"_selectedTiles",void 0),P(this,"_frameNumber",void 0),P(this,"_modelMatrix",void 0),P(this,"_modelMatrixInverse",void 0),P(this,"_maxZoom",void 0),P(this,"_minZoom",void 0),P(this,"onTileLoad",void 0),P(this,"_getCullBounds",c0(L1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new xvt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new qr,this._modelMatrixInverse=new qr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new qr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!Lo(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const a=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const s=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),s&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,s]=L1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:a}=t;if("west"in a)return a.west<o&&a.east>n&&a.south<s&&a.north>i;const l=Math.min(a.top,a.bottom),u=Math.max(a.top,a.bottom);return a.left<o&&a.right>n&&l<s&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:s}){const{tileSize:a,extent:l,zoomOffset:u}=this.opts;return DCt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:OCt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||nE,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:zCt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:$Ct*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[s,a]of t)if(a.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?a.byteLength:0,t.delete(s),this.opts.onTileUnload(a)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((s,a)=>s.zoom-a.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new oCt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function VCt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!dU(t)&&iE(t);for(const t of e)t.isVisible=Boolean(t.state&J_)}function UCt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&dU(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&J_),r.children&&(r.isVisible||r.state&cO))for(const n of r.children)n.state=cO;else r.isSelected&&iE(r)}function dU(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=J_,!0;t=t.parent}return!1}function iE(e){for(const t of e.children)t.isLoaded||t.content?t.state|=J_:iE(t)}const WCt={TilesetClass:BCt,data:{type:"data",value:[]},dataComparator:ACt.equals,renderSubLayers:{type:"function",value:e=>new K_(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:nE,zRange:null,maxRequests:6,zoomOffset:0};class Q_ extends X_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:s,minZoom:a,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:s,minZoom:a,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,s=this.state.isLoaded!==o,a=this.state.frameNumber!==i;o&&(s||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?xCt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=V_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}P(Q_,"defaultProps",WCt);P(Q_,"layerName","TileLayer");const jCt={setup(){const e=gt(),t=Wt(),r=wn(),n=Xp();return t.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panPaPos:Object,panBbox:Object,highlightNodes:Set},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,highlightedIconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0,hiddenNodesCount:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},"userStore.mapHideInactive"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},highlightNodes(e){},panPaPos(e){e&&this.deck&&this.panTo(e.x,e.z,-7)}},computed:{iconsCalc(){const e=[];if(this.hiddenNodesCount=0,!this.iconData)return e;const t=[];return this.iconData.forEach(([r,n])=>{if(r in this.scores.pathCosts){this.userStore.mapHideInactive&&this.userStore.autotakenNodes.has(r)==!1&&(this.hiddenNodesCount+=1);const i=this.highlightNodes&&this.highlightNodes.has(r),o={key:r,kind:n,pos:this.iconPositions[r],taken:this.userStore.autotakenNodes.has(r),isHighlighted:i,thisCpCost:this.gameStore.ready?this.gameStore.nodes[r].CP:0};e.push({...o,hidden:this.userStore.mapHideInactive&&!o.taken||i}),t.push({...o,hidden:!i})}}),console.log("iconsCalc",this.hiddenNodesCount,"hidden"),{normal:e,highlighted:t}},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.routing.autotakenGrindNodes.has(t)&&this.userStore.routing.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.gameStore.isLodgingTown(this.clickedObject.key)){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(this.gameStore.jobIsPz(r.job)){const n=this.userStore.pzJobs[r.job.pzk];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o}if(this.gameStore.jobIsWorkshop(r.job)){const n=this.userStore.wsJobs.find(o=>o.worker.tnk==this.clickedObject.key&&o.hk==r.job.hk);let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,128,255]}),i=o}})}}return e}},methods:{makeIconImg:jY,formatFixed:st,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStore.zoom=e.viewState.zoom,this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.townsWithLodging;let i=new ud((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},s={[n]:[]};for(var a;i.size();)a=i.pop(),r[a].forEach(l=>{if(!(l in t))return;const u=o[a]+t[l].CP;l in o?u<o[l]&&(o[l]=u,s[l]=[...s[a],l]):(i.push(l),o[l]=u,s[l]=[...s[a],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:s,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},s={0:0},a={0:0};for(const u of Object.keys(t))s[u]=1/0,a[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=s[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<a[f]&&(s[f]=h,a[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,s[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:s}},makeIconsLayer(){return new yu({data:this.iconsCalc.normal,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:400},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeHighlightedIconsLayer(){return new yu({id:"highlighted",data:this.iconsCalc.highlighted,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:800},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeLineLayer(){return new jC({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState,this.mapStore.target),this.tileLayer=new Q_({data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new Y_(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),new G_({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],controller:{doubleClickZoom:!1},views:[new W_({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)},panToBbox(e,t,r,n){const i=(e+t)/2,o=(r+n)/2,s=t-e,a=n-r;if(s==0&&a==0){this.panTo(i,o,-9);return}let l=6;for(;l>=0;l--){const u=2**(l-14),c=s*u,f=a*u;if(c<this.deck.viewManager.width&&f<this.deck.viewManager.height)break}this.panTo(i,o,l-14)},panTo(e,t,r){const n={...this.initialViewState};n.target=[e,-t],n.zoom=r,n.transitionDuration=100,n.transitionInterpolator=new U_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:n})}}},GCt={id:"deck-canvas",ref:"canvas"},HCt={id:"hack"},XCt={key:0,id:"topcenter"},YCt=R(") ");function qCt(e,t,r,n,i,o){return E(),M(W,null,[_("canvas",GCt,null,512),_("div",HCt,C(o.iconsCalc.length)+" icons",1),n.userStore.mapHideInactive?(E(),M("div",XCt,[R(C(e.hiddenNodesCount)+" inactive nodes hidden (",1),_("a",{href:"#",onClick:t[0]||(t[0]=s=>n.userStore.mapHideInactive=!1)},"show"),YCt])):Z("",!0)],64)}const ZCt=Gt(jCt,[["render",qCt],["__scopeId","data-v-c97689e4"]]);const KCt={setup(){const e=gt(),t=Wt();return{gameStore:e,userStore:t}},props:{tk:Number},emits:["selectWorker","editWorker"],components:{},data:()=>({}),computed:{filteredHouses(){const e={};for(const[t,r]of Object.entries(this.userStore.userWorkshops)){const n=this.gameStore.houseInfo[t];if(!n)throw Error(`unknown house ${t}`);n.affTown==this.tk&&(r.industry in e?e[r.industry][t]=r:e[r.industry]={[t]:r})}return e},filteredWorkers(){return this.userStore.userWorkers.filter(e=>e.job&&this.gameStore.jobIsWorkshop(e.job)&&e.job.hk in this.gameStore.houseInfo&&this.gameStore.houseInfo[e.job.hk].affTown==this.tk)}},methods:{formatFixed:st}},pU=e=>($e("data-v-c8ec0d1e"),e=e(),ze(),e),JCt={key:0},QCt=pU(()=>_("summary",null,"Workshops",-1)),tEt={class:"vscroll30"},eEt={class:"stickyhead"},rEt=pU(()=>_("thead",null,[_("tr",null,[_("th",null,"house"),_("th",null,"type"),_("th",null,"workload"),_("th",null,"$/cycle"),_("th",null,"CP"),_("th",{colspan:"3"},"worker")])],-1)),nEt=["onUpdate:modelValue"],iEt=["value"],oEt=["onUpdate:modelValue"],sEt=["onUpdate:modelValue"],aEt=["onUpdate:modelValue"],lEt=["onClick"],uEt=["onClick"],cEt={key:0},fEt=["onClick"],hEt={key:1},dEt=["onClick"];function pEt(e,t,r,n,i,o){return Object.keys(o.filteredHouses).length?(E(),M("details",JCt,[QCt,_("div",tEt,[_("table",eEt,[rEt,_("tbody",null,[(E(!0),M(W,null,mt(o.filteredHouses,(s,a)=>(E(),M(W,null,[(E(!0),M(W,null,mt(s,(l,u)=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.char[u])+" "+C(l.label),1),_("td",null,[tt(_("select",{"onUpdate:modelValue":c=>l.industry=c},[(E(!0),M(W,null,mt(n.gameStore.industries,(c,f)=>(E(),M("option",{value:f},C(c),9,iEt))),256))],8,nEt),[[He,l.industry]])]),_("td",null,[tt(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualWorkload=c},null,8,oEt),[[Dt,l.manualWorkload,void 0,{number:!0}]])]),_("td",null,[tt(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualCycleIncome=c},null,8,sEt),[[Dt,l.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[tt(_("input",{type:"number",class:"float4","onUpdate:modelValue":c=>l.manualCp=c},null,8,aEt),[[Dt,l.manualCp,void 0,{number:!0}]])]),_("td",null,[(E(!0),M(W,null,mt(o.filteredWorkers.filter(c=>c.job.hk==u),c=>(E(),M("div",null,[_("button",{onClick:f=>this.$emit("editWorker",c)},"edit",8,lEt),R(" "+C(n.userStore.workerLabel(c))+" @ ",1),n.userStore.displayProfitPerCp?(E(),M(W,{key:0},[R(C(o.formatFixed(n.userStore.workerIncomePerCp(c),2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.userStore.workerIncome(c),2))+" M$/day ",1)],64)),_("button",{onClick:f=>c.job=null},"stop",8,uEt)]))),256)),l.industry=="mass"?(E(),M("div",cEt,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"add",8,fEt)])):o.filteredWorkers.filter(c=>c.job.hk==u).length==0?(E(),M("div",hEt,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"send",8,dEt)])):Z("",!0)])]))),256))],64))),256))])])])])):Z("",!0)}const vEt=Gt(KCt,[["render",pEt],["__scopeId","data-v-c8ec0d1e"]]);const gEt={setup(){const e=Wt(),t=gt(),r=wn(),n=Xp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{Worker:Hk,TownWorkers:o7,TownWorkshops:vEt,Plantzone:a7},props:{clickedNode:Object},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos","showResourceDialog","setClickedNode","selectWorker"],data:()=>({}),methods:{formatFixed:st,jobCashFlowPercent(e){return e.profit.priceDaily/this.userStore.currentNodesCashflow[this.clickedNode.key]},selectLodging(e){this.$emit("selectLodging",e)},selectHouses(e){this.$emit("selectHouses",e)},hireWorker(e){this.$emit("hireWorker",e)},editWorker(e){this.$emit("editWorker",e)},sendWorker(e){this.$emit("sendWorker",e)},panToPaPos(e){this.$emit("panToPaPos",e)},showResourceDialog(e){this.$emit("showResourceDialog",e)},setClickedNode(e){this.$emit("setClickedNode",e)},selectWorker(e){this.$emit("selectWorker",e)}},computed:{activeNodeJobs_sorted(){const e=this.userStore.currentNodesJobs[this.clickedNode.key];return e.sort((t,r)=>this.jobCashFlowPercent(r)-this.jobCashFlowPercent(t)),e}}},vU=e=>($e("data-v-3696f651"),e=e(),ze(),e),mEt={key:0,id:"mapObjDetail"},_Et=vU(()=>_("div",null,"\u02C5",-1)),yEt=[_Et],bEt={key:0,id:"clickedTownInfo",class:"vscrollable"},wEt={class:"vscroll40"},SEt={class:"stickyhead"},TEt={key:1,id:"clickedTownInfo",class:"vscrollable"},kEt={key:2,id:"clickedNodeName"},PEt=R(),CEt=vU(()=>_("abbr",{class:"tooltip",title:"is involved in a zero-cost path"},"\u2139",-1)),EEt={key:0,class:"fsxs"},AEt=R(" shared by active nodejobs: "),MEt=["onClick"],xEt={key:1},IEt=["checked"],LEt=R(" zero-cost connection to nearest town (invested for droprate) "),OEt={key:3,id:"clickedPlantzoneInfo"},REt=["checked"],DEt=R(" zero-cost connection to nearest town (invested for droprate) ");function NEt(e,t,r,n,i,o){const s=Ot("TownWorkers"),a=Ot("TownWorkshops"),l=Ot("Plantzone");return r.clickedNode?(E(),M("div",mEt,[_("div",{class:"rolldown",onClick:t[0]||(t[0]=u=>o.setClickedNode(null))},yEt),n.gameStore.isLodgingTown(r.clickedNode.key)?(E(),M("div",bEt,[_("div",wEt,[_("table",SEt,[ft(s,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(r.clickedNode.key)],tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"])])]),n.userStore.userWorkshops?(E(),Or(a,{key:0,tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectWorker:o.selectWorker,onEditWorker:o.editWorker},null,8,["tk","onSelectWorker","onEditWorker"])):Z("",!0)])):n.gameStore.townsWithRentableStorageSet.has(r.clickedNode.key)?(E(),M("div",TEt,[_("button",{onClick:t[1]||(t[1]=u=>this.$emit("selectHouses",n.gameStore.tnk2tk(r.clickedNode.key))),class:Ir({unresolved:n.gameStore.ready&&n.userStore.townsInfra[n.gameStore.tnk2tk(r.clickedNode.key)].success==!1})}," config ",2)])):Z("",!0),n.gameStore.isConnectionNode(r.clickedNode.key)?(E(),M("div",kEt,[_("p",null,[R(C(n.gameStore.uloc.node[r.clickedNode.key])+" ",1),n.userStore.routing.autotakenGrindNodes.has(r.clickedNode.key)?(E(),M(W,{key:0},[_("s",null,C(r.clickedNode.thisCpCost)+"CP",1),PEt,CEt],64)):(E(),M(W,{key:1},[R(C(r.clickedNode.thisCpCost)+"CP ",1)],64))]),r.clickedNode.key in n.userStore.currentNodesJobs?(E(),M("p",EEt,[AEt,(E(!0),M(W,null,mt(o.activeNodeJobs_sorted,u=>(E(),M("p",null,[R(C(o.formatFixed(o.jobCashFlowPercent(u)*100))+"% - ",1),this.gameStore.jobIsPz(u.worker.job)?(E(),M("span",{key:0,onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.pzk].pos),class:"clickable"},C(n.gameStore.plantzoneName(u.pzk)),9,MEt)):(E(),M("span",xEt,C(n.gameStore.uloc.char[u.worker.job.hk])+" "+C(n.userStore.userWorkshops[u.worker.job.hk].label),1)),R(" @ "+C(o.formatFixed(u.profit.priceDaily,2))+" M$/day ",1)]))),256))])):Z("",!0),_("input",{type:"checkbox",onChange:t[2]||(t[2]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,IEt),LEt])):Z("",!0),n.gameStore.isPlantzone(r.clickedNode.key)?(E(),M("div",OEt,[n.userStore.grindTakenSet.has(r.clickedNode.key)?(E(),M(W,{key:0},[_("input",{type:"checkbox",onChange:t[3]||(t[3]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,REt),DEt],64)):Z("",!0),ft(l,{pzk:r.clickedNode.key,onShowResourceDialog:o.showResourceDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowResourceDialog","onEditWorker"])])):Z("",!0)])):Z("",!0)}const FEt=Gt(gEt,[["render",NEt],["__scopeId","data-v-3696f651"]]);const $Et={setup(){const e=Wt(),t=gt(),r=wn();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],components:{WorkerJobDescription:r_,ItemIcon:fi},data:()=>({activeTab:"daily",selectedRedirect:-1}),methods:{formatFixed:st,strShortenLeft:qY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=Wt(),r=gt();let n=[];this.gameStore.townsWithLodging.forEach(o=>{const s=this.gameStore.dijDiscountedNearestPlantzones(o,12);n[o]=s});let i=[];for(const[o,s]of Object.entries(n))s.forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=r.profitPzTownArtisans(a,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=this.selectedRedirect<0?f:r.tnk2tk(this.selectedRedirect),d=this.selectedRedirect==-2?new Set:r.plantzones[a].itemkeys,p=t.townInfraAddCost(f,1,d,h);c.townCp=p.cost,c.townCpTooltip=p.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},Rr=e=>($e("data-v-7f09ec67"),e=e(),ze(),e),zEt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},BEt={key:0},VEt={class:"stickyhead"},UEt=Rr(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Qty"),_("th",null,"M$")])],-1)),WEt={class:"right"},jEt={class:"right"},GEt=R(" Cycles total:"),HEt=Rr(()=>_("br",null,null,-1)),XEt=Rr(()=>_("br",null,null,-1)),YEt=Rr(()=>_("br",null,null,-1)),qEt=R(" \u{1F33B}farming: "),ZEt=Rr(()=>_("abbr",{class:"tooltip",title:"no idea, depends on weather"},"0",-1)),KEt=Rr(()=>_("br",null,null,-1)),JEt=Rr(()=>_("span",{class:"fsxs"}," Sorted by efficiency with your currently assigned worker. Might be the node is alright but is using a bad worker! ",-1)),QEt={class:"stickyhead"},tAt=Rr(()=>_("thead",null,[_("tr",null,[_("th",{rowspan:"2"},"town"),_("th",{rowspan:"2"},"job"),_("th",{rowspan:"2"},"M$/day"),_("th",{colspan:"2"},"CP"),_("th",{rowspan:"2"},[R(" efficiency "),_("abbr",{class:"tooltip",title:"profit divided by CP"},"\u2139")])]),_("tr",null,[_("th",{class:"rowspanned colspanned"},[R(" \xA0job "),_("abbr",{class:"tooltip",title:"cost of the node (for plantzones) OR cost of the house (for workshops)"},"\u2139")]),_("th",{class:"colspanned"},[R(" town "),_("abbr",{class:"tooltip",title:"worker lodging + material storage"},"\u2139")])])],-1)),eAt=["onClick"],rAt={class:""},nAt={class:"hlim parent"},iAt=["onClick"],oAt={class:"hlim right"},sAt={key:1,class:"hlim left"},aAt={class:"tac"},lAt={class:"tac"},uAt={class:"tac"},cAt={class:"tac"},fAt={class:"fsxs"},hAt=R(" Compares 12 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans. Stash at: "),dAt=Rr(()=>_("option",{value:"-2"},"ignore storage cost",-1)),pAt=Rr(()=>_("option",{value:"-1"},"worker hometown",-1)),vAt=Rr(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),gAt=["value"],mAt={class:"stickyhead"},_At=Rr(()=>_("th",null,"\u{1F6CF}\uFE0Ftown",-1)),yAt=Rr(()=>_("th",null,"job",-1)),bAt=Rr(()=>_("th",null,"worker",-1)),wAt=Rr(()=>_("th",null,"+M$/day",-1)),SAt=Rr(()=>_("th",null,"+CP",-1)),TAt=Rr(()=>_("th",null,"M$/day/CP",-1)),kAt=["onClick"],PAt={class:"hlim parent"},CAt=["onClick"],EAt={class:"hlim right"},AAt={class:"tac"},MAt=["title"],xAt={class:"tac"},IAt={class:"tac"},LAt=["title"],OAt=R("+"),RAt=["title"],DAt={class:"tac"};function NAt(e,t,r,n,i,o){const s=Ot("ItemIcon"),a=Ot("RouterLink"),l=Ot("WorkerJobDescription");return E(),M(W,null,[_("nav",zEt,[_("span",{onClick:t[0]||(t[0]=u=>e.activeTab="daily"),class:Ir({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),_("span",{onClick:t[1]||(t[1]=u=>e.activeTab="worst"),class:Ir({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),_("span",{onClick:t[2]||(t[2]=u=>e.activeTab="best"),class:Ir({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(E(),M("div",BEt,[_("table",VEt,[UEt,_("tbody",null,[(E(!0),M(W,null,mt(n.userStore.jobsTally,(u,c)=>(E(),M("tr",null,[_("td",null,[ft(s,{ik:Number(c),with_name:!0},null,8,["ik"])]),_("td",WEt,C(o.formatFixed(u,u<1?2:u<10?1:0)),1),_("td",jEt,C(o.formatFixed(this.marketStore.priceBunch({[c]:u}).val/1e6,2)),1)]))),256))])]),GEt,HEt,R(" \u{1F5FA}\uFE0Fplantzones: "+C(o.formatFixed(n.userStore.cyclesTally.pz)),1),XEt,n.userStore.cyclesTally.workshop>0?(E(),M(W,{key:0},[R(" \u{1F3ED}workshops: "+C(o.formatFixed(n.userStore.cyclesTally.workshop)),1),YEt],64)):Z("",!0),qEt,ZEt,KEt,R(" = "+C(o.formatFixed(n.userStore.cyclesTally.chicken))+" chicken/day ",1)])):Z("",!0),e.activeTab=="worst"?(E(),M(W,{key:1},[JEt,_("table",QEt,[tAt,_("tbody",null,[(E(!0),M(W,null,mt(n.userStore.workersSortedByIncomePerCp,({w:u,i:c,ipc:f})=>(E(),M("tr",null,[_("td",null,[_("span",{onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos,-7),class:"clickable"},C(n.gameStore.uloc.town[n.gameStore.tnk2tk(u.tnk)]),9,eAt)]),_("td",rAt,[_("div",nAt,[this.gameStore.jobIsPz(u.job)?(E(),M(W,{key:0},[_("span",{class:"hlim left clickable",onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.job.pzk].pos)},C(n.gameStore.parentNodeName(u.job.pzk)),9,iAt),_("span",oAt,[(E(!0),M(W,null,mt(n.gameStore.plantzones[u.job.pzk].itemkeys,h=>(E(),Or(a,{tag:"a",to:{path:"./settings",hash:"#item"+h}},{default:be(()=>[ft(s,{ik:Number(h)},null,8,["ik"])]),_:2},1032,["to"]))),256))])],64)):(E(),M("span",sAt,[ft(l,{w:u},null,8,["w"])]))])]),_("td",aAt,C(o.formatFixed(c,2)),1),_("td",lAt,C(o.formatFixed(n.userStore.workerSharedConnectionCP(u),2)),1),_("td",uAt,C(o.formatFixed(n.userStore.workerSharedLodgageCP(u).value,2)),1),_("td",cAt,C(o.formatFixed(f,2)),1)]))),256))])])],64)):Z("",!0),e.activeTab=="best"?(E(),M(W,{key:2},[_("span",fAt,[hAt,tt(_("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>e.selectedRedirect=u),class:"fsxs"},[dAt,pAt,vAt,(E(!0),M(W,null,mt(n.gameStore.townsWithRedirectableStorage,u=>(E(),M("option",{value:u},C(n.gameStore.uloc.node[u]),9,gAt))),256))],512),[[He,e.selectedRedirect]])]),_("table",mAt,[_("thead",null,[_("tr",null,[_At,yAt,bAt,wAt,SAt,TAt,Z("",!0)])]),_("tbody",null,[(E(!0),M(W,null,mt(o.untakenPlantzonesNearestCpTownProfit,u=>(E(),M("tr",null,[_("td",null,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos),class:"clickable"},C(n.gameStore.nodeName(u.tnk)),9,kAt)]),_("td",null,[_("div",PAt,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.key].pos),class:"hlim left clickable"},C(n.gameStore.parentNodeName(u.key)),9,CAt),_("span",EAt,[(E(!0),M(W,null,mt(u.itemkeys,c=>(E(),Or(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:be(()=>[ft(s,{ik:Number(c)},null,8,["ik"])]),_:2},1032,["to"]))),256))])])]),_("td",AAt,[u.alt_workers?(E(),M("abbr",{key:0,class:"tooltip nound",title:u.alt_workers.map(c=>`${n.gameStore.uloc.char[c.charkey]}: ${o.formatFixed(c.priceDaily,2)} M$/day = ${o.formatFixed(100*c.priceDaily/u.priceDaily)}%`).join(`
`)},C({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[u.kind]),9,MAt)):Z("",!0)]),_("td",xAt,C(o.formatFixed(u.priceDaily,2)),1),_("td",IAt,[_("abbr",{title:Array.from(u.path,c=>`${n.userStore.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`),class:"tooltip"},C(o.formatFixed(u.cp)),9,LAt),OAt,_("abbr",{title:u.townCpTooltip,class:"tooltip"},C(o.formatFixed(u.townCp)),9,RAt),R("="+C(o.formatFixed(u.cp+u.townCp)),1)]),_("td",DAt,C(o.formatFixed(u.dailyPerCp,2)),1),Z("",!0)]))),256))])])],64)):Z("",!0)],64)}const FAt=Gt($Et,[["render",NAt],["__scopeId","data-v-7f09ec67"]]);const $At={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{tk:Number,hk:Number,show:{type:Boolean,default:!1}},data:()=>({}),watch:{},methods:{formatFixed:st,workshopNearestTownsFreeWorkersProfits(e){const t=this.gameStore.houseInfo[this.hk].affTown,r=this.gameStore.tk2tnk(t),n=this.userStore.userWorkshops[this.hk].manualCp,i=[];return this.gameStore.dijkstraNearestTowns(r,e,this.userStore.autotakenNodes,!0).forEach(([s,a,l])=>{const u=this.gameStore._tnk2tk[s];this.userStore.getFreeWorkers(u).forEach(f=>{i.push(this.gameStore.workshopSelectionEntry(this.hk,u,s,l,f,a,n))})}),i.sort((s,a)=>a.dailyPerCp-s.dailyPerCp),i},assign(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:Number(t),recipe:void 0}),this.$emit("update:show",!1)}},computed:{freeWorkers(){return this.workshopNearestTownsFreeWorkersProfits(99)},workshop(){return this.userStore.userWorkshops[this.hk]}}},gU=e=>($e("data-v-f1c69c13"),e=e(),ze(),e),zAt=gU(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),BAt=R("): "),VAt=R(" None "),UAt={key:0},WAt=gU(()=>_("tr",null,[_("th",null,"town"),_("th",null,"worker"),_("th",null,"walk"),_("th",null,"cycles/day"),_("th",null,"+M$/day"),_("th",null,"+CP"),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),jAt={key:0},GAt={class:"fsxs"},HAt={class:"center"},XAt=["title"],YAt=R("+"),qAt={class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},ZAt=R("+"),KAt=["title"],JAt={class:"center"},QAt=["onClick"];function t4t(e,t,r,n,i,o){return r.hk?(E(),M(W,{key:0},[_("div",null,[R("Nearest idle workers for "+C(n.gameStore.uloc.char[r.hk])+" "+C(o.workshop.label?'"'+o.workshop.label+'"':"")+" ("+C(o.workshop.manualWorkload)+" workload, "+C(o.workshop.manualCycleIncome)+" $/cycle, type: "+C(o.workshop.industry)+" ",1),zAt,BAt,o.freeWorkers.length==0?(E(),M(W,{key:0},[VAt],64)):Z("",!0)]),o.freeWorkers.length?(E(),M("table",UAt,[WAt,(E(!0),M(W,null,mt(o.freeWorkers,s=>(E(),M(W,null,[s.profit.distance<1e6?(E(),M("tr",jAt,[_("td",null,C(n.gameStore.nodeName(s.tnk)),1),_("td",null,[R(C(s.w.label)+" ",1),_("span",GAt,C(o.formatFixed(s.profit.statsOnWs.wspd,2))+"\u{1F528} "+C(o.formatFixed(s.profit.statsOnWs.mspd,2))+"\u{1F9B6} "+C(o.formatFixed(s.profit.statsOnWs.luck,2))+"\u{1F340} ",1)]),_("td",null,C(o.formatFixed(s.profit.distance)),1),_("td",null,C(o.formatFixed(s.profit.cyclesDaily,1)),1),_("td",HAt,C(o.formatFixed(s.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(s.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},C(s.mapCp),9,XAt),YAt,_("abbr",qAt,C(s.houseCp),1),ZAt,_("abbr",{class:"tooltip",title:s.infraTooltip},C(s.townCp),9,KAt),R("="+C(s.cp),1)]),_("td",JAt,C(o.formatFixed(s.dailyPerCp,3)),1),_("td",null,[_("button",{onClick:a=>o.assign(s.w,r.hk)}," assign ",8,QAt)])])):Z("",!0)],64))),256))])):Z("",!0)],64)):Z("",!0)}const e4t=Gt($At,[["render",t4t],["__scopeId","data-v-f1c69c13"]]);const r4t={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{visible:Boolean},emits:["close","select"],components:{ItemIcon:fi},data(){return{searchQuery:"",searchResults:[],emptySet:new Set([])}},computed:{itemNamesKeys(){const e={};return this.gameStore.ready&&Object.keys(this.gameStore.itemkeyPlantzones).forEach(t=>{const r=this.gameStore.uloc.item[t];e[r]=Number(t)}),e}},watch:{searchQuery(e){this.searchResults={};let t=0;for(const[r,n]of Object.entries(this.itemNamesKeys))if(r.toLowerCase().includes(e.toLowerCase())&&(this.searchResults[r]={hlSet:n in this.gameStore.itemkeyPlantzones?this.gameStore.itemkeyPlantzones[n]:new Set([]),type:"dropsItem",itemKey:n},t++,t>=10))break;t=0;for(const[r,n]of Object.entries(this.gameStore.uloc.node)){if(n.toLowerCase().includes(e.toLowerCase())&&(n in this.searchResults||(this.searchResults[n]={type:"name",hlSet:new Set([])}),this.searchResults[n].hlSet.add(Number(r)),t++,t>=10))break;const i=`${r}`;if(i.toLowerCase().includes(e.toLowerCase())&&(i in this.searchResults||(this.searchResults[i]={type:"key",hlSet:new Set([])}),this.searchResults[i].hlSet.add(Number(r)),t++,t>=10))break}}},methods:{onInput(){this.searchQuery===""&&(this.searchResults={})},selectItem(e){this.$emit("select",e),this.$emit("close")},focusInput(){var e;(e=this.$refs.searchInput)==null||e.focus()}}},n4t={key:0,class:"search-bar"},i4t={key:0},o4t=["onClick"];function s4t(e,t,r,n,i,o){const s=Ot("ItemIcon");return r.visible?(E(),M("div",n4t,[tt(_("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>i.searchQuery=a),onInput:t[1]||(t[1]=(...a)=>o.onInput&&o.onInput(...a)),ref:"searchInput",placeholder:"Search..."},null,544),[[Dt,i.searchQuery]]),_("button",{onClick:t[2]||(t[2]=a=>o.selectItem(i.emptySet))},"reset"),i.searchResults?(E(),M("ul",i4t,[(E(!0),M(W,null,mt(i.searchResults,(a,l)=>(E(),M("li",{onClick:u=>o.selectItem(a.hlSet)},[a.type=="dropsItem"?(E(),M(W,{key:0},[ft(s,{ik:a.itemKey},null,8,["ik"]),R(" "+C(l)+" ("+C(a.hlSet.size)+" nodes) ",1)],64)):a.type=="name"?(E(),M(W,{key:1},[R(" \u{1F5FA}\uFE0F "+C(l),1)],64)):a.type=="key"?(E(),M(W,{key:2},[R(" \u{1F5FA}\uFE0F "+C(l)+" - "+C(n.gameStore.uloc.node[l]),1)],64)):Z("",!0)],8,o4t))),256))])):Z("",!0)])):Z("",!0)}const a4t=Gt(r4t,[["render",s4t]]);const l4t={setup(){const e=gt(),t=Wt(),r=wn(),n=Xp();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{ItemIcon:fi,Worker:Hk,TownWorkers:o7,Plantzone:a7,ModalDialog:Yk,WorkerEdit:Gz,WorkerSendSelection:i0t,LodgingSelection:p0t,HousesSelection:ovt,NodeMap:ZCt,MapSelectedInfo:FEt,EmpireOverview:FAt,FloatingResourceEdit:gC,WorkerSelection:e4t,SearchBar:a4t},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:0,housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,resourceDialogWspd:150,resourceDialogRgroup:1,resourceDialogWkld:400,resourceDialogVisible:!1,panToPzk:null,panPaPos:null,selectWorkerDialogVisible:!1,selectWorkerHouseKey:0,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1,showSearchBar:!1,highlightNodes:new Set([])}),created(){console.log("addEventListener"),window.addEventListener("keydown",this.onKeydown)},watch:{},computed:{},mounted(){},beforeUnmount(){window.removeEventListener("keydown",this.onKeydown)},methods:{formatFixed:st,randBetween:va,levelup:Ld,onKeydown(e){e.ctrlKey&&e.code==="KeyF"&&(e.preventDefault(),this.showSearchBar=!0,su(()=>this.$refs.searchBar.focusInput())),e.key==="Escape"&&(this.showSearchBar?this.showSearchBar=!1:this.handleSearchSelection(new Set([])))},handleSearchSelection(e){this.highlightNodes=e,su(()=>{if(this.$refs.nodeMap.updateLayers(),e.size>0){let t=1e99,r=1e99,n=-1e99,i=-1e99;e.forEach(o=>{t=Math.min(t,this.gameStore.nodes[o].pos.x),r=Math.min(r,this.gameStore.nodes[o].pos.z),n=Math.max(n,this.gameStore.nodes[o].pos.x),i=Math.max(i,this.gameStore.nodes[o].pos.z)}),this.$refs.nodeMap.panToBbox(t,n,r,i)}}),this.showSearchBar=!1},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.userStore.newWorkerName(e),r=7572;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:r,label:t,level:1,wspdSheet:this.gameStore.workerStatic[r].wspd/1e6,mspdSheet:this.gameStore.workerStatic[r].mspd/100,luckSheet:this.gameStore.workerStatic[r].luck/1e4,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),Ld(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},selectWorker(e){this.selectWorkerHouseKey=e,this.selectWorkerDialogVisible=!0,console.log("selectWorkerDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);for(let n=r.userWorkers.length-1;n>=0;n--){const i=r.userWorkers[n].charkey;i in this.gameStore.workerStatic||(console.log(`unknown charkey ${i} - discarded`),r.userWorkers.splice(n,1))}r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk`,n.job),n.job=null),Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showResourceDialog(e){this.resourceDialogVisible=!0,this.resourceDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.resourceDialogWkld=this.gameStore.plantzones[e].peg.time,this.resourceDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))},panToPaPos(e){this.panPaPos=e},setClickedNode(e){this.clickedNode=e}},mounted(){this.panToHash()}},Se=e=>($e("data-v-95acd89c"),e=e(),ze(),e),u4t=Se(()=>_("button",null,"import",-1)),c4t=Se(()=>_("br",null,null,-1)),f4t={style:{width:"24em"}},h4t=R("Test with workspeed: "),d4t={id:"canvas-limiter"},p4t={key:0},v4t={key:1},g4t=Se(()=>_("br",null,null,-1)),m4t=Se(()=>_("br",null,null,-1)),_4t={id:"topleft"},y4t=Se(()=>_("summary",null,"Empire",-1)),b4t={id:"leftside"},w4t={id:"rightside"},S4t={id:"totals"},T4t={class:"fsxs"},k4t=Se(()=>_("br",null,null,-1)),P4t={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},C4t={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},E4t=Se(()=>_("br",null,null,-1)),A4t=Se(()=>_("br",null,null,-1)),M4t=Se(()=>_("br",null,null,-1)),x4t={class:"fsxs"},I4t=R(" invested for droprate: "),L4t=["title"],O4t=Se(()=>_("br",null,null,-1)),R4t=Se(()=>_("br",null,null,-1)),D4t=Se(()=>_("br",null,null,-1)),N4t=Se(()=>_("br",null,null,-1)),F4t=Se(()=>_("br",null,null,-1)),$4t=Se(()=>_("br",null,null,-1)),z4t={class:"fsxs"},B4t=Se(()=>_("br",null,null,-1)),V4t=Se(()=>_("br",null,null,-1)),U4t=Se(()=>_("br",null,null,-1)),W4t=Se(()=>_("br",null,null,-1)),j4t=R(" (M$/day/CP) "),G4t={class:"fsxs"},H4t=Se(()=>_("br",null,null,-1)),X4t=Se(()=>_("br",null,null,-1)),Y4t=Se(()=>_("br",null,null,-1)),q4t=Se(()=>_("br",null,null,-1)),Z4t=Se(()=>_("label",{for:"wr_cb"}," wasm routing",-1)),K4t=Se(()=>_("div",{style:{clear:"both"}},null,-1)),J4t={id:"workerlist"},Q4t=Se(()=>_("summary",null,"All towns/workers list",-1)),tMt=R(" show: "),eMt={class:"switch mauto"},rMt=Se(()=>_("span",{class:"slider"},null,-1)),nMt=R(" names "),iMt={class:"switch mauto"},oMt=["disabled"],sMt=Se(()=>_("span",{class:"slider"},null,-1)),aMt=R(" stat ranks "),lMt={class:"switch mauto"},uMt=["disabled"],cMt=Se(()=>_("span",{class:"slider"},null,-1)),fMt=R(" stats after skills "),hMt={class:"switch mauto"},dMt=Se(()=>_("span",{class:"slider"},null,-1)),pMt=R(" efficiency ");function vMt(e,t,r,n,i,o){const s=Ot("WorkerEdit"),a=Ot("ModalDialog"),l=Ot("WorkerSendSelection"),u=Ot("LodgingSelection"),c=Ot("HousesSelection"),f=Ot("WorkerSelection"),h=Ot("FloatingResourceEdit"),d=Ot("NodeMap"),p=Ot("ItemIcon"),v=Ot("EmpireOverview"),m=Ot("MapSelectedInfo"),g=Ot("search-bar"),y=Ot("TownWorkers");return E(),M(W,null,[ft(a,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=b=>e.workerDialogVisible=b)},{default:be(()=>[ft(s,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=b=>e.workerDialogVisible=b)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),ft(a,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=b=>e.sendDialogVisible=b)},{default:be(()=>[ft(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=b=>e.sendDialogVisible=b)},null,8,["w","show"])]),_:1},8,["show"]),ft(a,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=b=>e.lodgingDialogVisible=b)},{default:be(()=>[ft(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=b=>e.lodgingDialogVisible=b)},null,8,["tk","o","show"])]),_:1},8,["show"]),ft(a,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=b=>e.housesDialogVisible=b)},{default:be(()=>[ft(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=b=>e.housesDialogVisible=b)},null,8,["tk","show"])]),_:1},8,["show"]),ft(a,{show:e.selectWorkerDialogVisible,"onUpdate:show":t[9]||(t[9]=b=>e.selectWorkerDialogVisible=b)},{default:be(()=>[ft(f,{hk:e.selectWorkerHouseKey,show:e.selectWorkerDialogVisible,"onUpdate:show":t[8]||(t[8]=b=>e.selectWorkerDialogVisible=b)},null,8,["hk","show"])]),_:1},8,["show"]),ft(a,{show:e.importDialogVisible,"onUpdate:show":t[12]||(t[12]=b=>e.importDialogVisible=b)},{default:be(()=>[_("form",{onSubmit:t[11]||(t[11]=lp(b=>o.fileImport(b),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[10]||(t[10]=b=>o.fileImport())}),u4t,c4t],32)]),_:1},8,["show"]),ft(a,{show:e.resourceDialogVisible,"onUpdate:show":t[15]||(t[15]=b=>e.resourceDialogVisible=b)},{default:be(()=>[ft(h,{rgk:e.resourceDialogRgroup,wspd:e.resourceDialogWspd,workload:e.resourceDialogWkld,show:e.resourceDialogVisible,"onUpdate:show":t[13]||(t[13]=b=>e.resourceDialogVisible=b)},null,8,["rgk","wspd","workload","show"]),_("div",f4t,[h4t,tt(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[14]||(t[14]=b=>e.resourceDialogWspd=b),min:"40",max:"200",step:"0.01"},null,512),[[Dt,e.resourceDialogWspd,void 0,{number:!0}]]),R(" "+C(e.resourceDialogWspd),1)])]),_:1},8,["show"]),_("main",null,[_("div",d4t,[ft(d,{ref:"nodeMap",clickedObj:e.clickedNode,"onUpdate:clickedObj":t[16]||(t[16]=b=>e.clickedNode=b),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[17]||(t[17]=b=>e.hoverInfo=b),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[18]||(t[18]=b=>e.panToPzk=b),panPaPos:e.panPaPos,"onUpdate:panPaPos":t[19]||(t[19]=b=>e.panPaPos=b),onPanAnywhere:t[20]||(t[20]=b=>e.panPaPos=null),highlightNodes:e.highlightNodes},null,8,["clickedObj","hoverInfo","panToPzk","panPaPos","highlightNodes"]),e.hoverInfo&&e.hoverInfo.object?(E(),M("div",{key:0,id:"tooltip",style:Xl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[R(C(e.hoverInfo.object.key)+" "+C(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+C(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(E(),M("span",p4t,[(E(!0),M(W,null,mt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,b=>(E(),Or(p,{ik:Number(b)},null,8,["ik"]))),256))])):Z("",!0),this.gameStore.townsConnectionRoots.has(e.hoverInfo.object.key)?(E(),M("span",v4t,[g4t,R("[town "+C(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):Z("",!0),m4t],4)):Z("",!0),_("div",_4t,[_("details",null,[y4t,ft(v,{onPanToPaPos:o.panToPaPos},null,8,["onPanToPaPos"])])]),_("div",b4t,[ft(m,{clickedNode:e.clickedNode,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos,onShowResourceDialog:o.showResourceDialog,onSetClickedNode:o.setClickedNode,onSelectWorker:o.selectWorker},null,8,["clickedNode","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos","onShowResourceDialog","onSetClickedNode","onSelectWorker"])]),_("div",w4t,[ft(g,{ref:"searchBar",visible:e.showSearchBar,onClose:t[21]||(t[21]=b=>e.showSearchBar=!1),onSelect:o.handleSearchSelection},null,8,["visible","onSelect"]),_("div",S4t,[_("details",null,[_("summary",null,"Total workers: "+C(n.userStore.countWorkers),1),_("p",T4t,[R(" nodes: "+C(n.userStore.workedPlantzones.size)+" ",1),k4t,n.userStore.workersFarmingCount?(E(),M(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(E(),M("abbr",C4t,"\u26A0\uFE0F")):Z("",!0):(E(),M("abbr",P4t,"\u26A0\uFE0F")),R(" farming: "+C(n.userStore.workersFarmingCount)+" ",1),E4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(n.userStore.workersWorkshopCount)+" ",1),A4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(n.userStore.workersCustomCount)+" ",1),M4t],64)):Z("",!0),n.userStore.workersIdleCount?(E(),M(W,{key:3},[R(" \u26A0\uFE0F idle: "+C(n.userStore.workersIdleCount),1)],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total CP: "+C(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),_("p",x4t,[n.userStore.routing.autotakenGrindNodesCP?(E(),M(W,{key:0},[I4t,_("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},C(n.userStore.routing.autotakenGrindNodesCP),9,L4t),O4t],64)):Z("",!0),R(" nodes: "+C(n.userStore.autotakenNodesCP)+" ",1),R4t,R(" lodging/storage: "+C(n.userStore.lodgage)+" ",1),D4t,n.userStore.farmingEnable?(E(),M(W,{key:1},[R(" farming: "+C(n.userStore.farmingCP)+" ",1),N4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:2},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),F4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:3},[R(" custom: "+C(n.userStore.customTotalCP)+" ",1),$4t],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total M$/day: "+C(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),_("p",z4t,[R(" nodes: "+C(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),B4t,n.userStore.workersFarmingCount?(E(),M(W,{key:0},[R(" farming: "+C(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),V4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),U4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),W4t],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total efficiency: "+C(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),j4t,_("p",G4t,[R(" nodes: "+C(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),H4t,n.userStore.farmingEnable?(E(),M(W,{key:0},[R(" farming: "+C(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),X4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),Y4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),q4t],64)):Z("",!0)])]),tt(_("input",{type:"checkbox",id:"wr_cb","onUpdate:modelValue":t[22]||(t[22]=b=>n.userStore.wasmRouting=b)},null,512),[[Ne,n.userStore.wasmRouting]]),Z4t]),K4t,_("div",J4t,[_("details",null,[Q4t,tMt,_("label",eMt,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=b=>n.userStore.displayWorkerNames=b)},null,512),[[Ne,n.userStore.displayWorkerNames]]),rMt,nMt]),_("label",iMt,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=b=>n.userStore.displayWorkerStatsRank=b),disabled:n.userStore.displayWorkerStatsForPz},null,8,oMt),[[Ne,n.userStore.displayWorkerStatsRank]]),sMt,aMt]),_("label",lMt,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=b=>n.userStore.displayWorkerStatsForPz=b),disabled:n.userStore.displayWorkerStatsRank},null,8,uMt),[[Ne,n.userStore.displayWorkerStatsForPz]]),cMt,fMt]),_("label",hMt,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=b=>n.userStore.displayProfitPerCp=b)},null,512),[[Ne,n.userStore.displayProfitPerCp]]),dMt,pMt]),_("button",{onClick:t[27]||(t[27]=b=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[28]||(t[28]=b=>o.fileExport())},"export"),Z("",!0),_("button",{onClick:t[30]||(t[30]=b=>o.fireAll())},"fire all"),_("table",null,[(E(!0),M(W,null,mt(n.gameStore.lodgingPerTown,(b,w)=>(E(),Or(y,{o:b,tk:Number(w),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"]))),256))])])])])])])],64)}const gMt=Gt(l4t,[["render",vMt],["__scopeId","data-v-95acd89c"]]);const mMt={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{e:Object,showGiantValues:Boolean},components:{ItemIcon:fi},methods:{formatFixed:st,formatDropQty(e){return e<.1?st(e,3):st(e,2)}},computed:{actualWorker(){return this.userStore.pzJobs[this.e.key].worker},takenInfo(){if(!this.userStore.workedPlantzones.has(this.e.key.toString()))return{icon:"\u274C",text:"not assigned"};if(this.actualWorker.tnk!=this.e.tnk){let t=`town used: ${this.gameStore.nodeName(this.actualWorker.tnk)}
suggested: ${this.gameStore.nodeName(this.e.tnk)}`;if(this.actualWorker.tnk in this.e.alt_towns_profits){const r=this.e.dailyPerCp/this.e.alt_towns_profits[this.actualWorker.tnk];t+=` (${st(r*100-100)}% better)`}return{icon:"\u26A0\uFE0F",text:t}}if(this.actualWorker.charkey!=this.e.charkey){let t=`worker used: ${this.gameStore.uloc.char[this.actualWorker.charkey]}
suggested: ${this.gameStore.uloc.char[this.e.charkey]}`,r="\u26A0\uFE0F";if(this.actualWorker.charkey in this.e.alt_workers_profits){const n=this.e.priceDaily/this.e.alt_workers_profits[this.actualWorker.charkey];n<1.1&&(r="\u2714\uFE0F"),t+=` (${st(n*100-100)}% better)`}return{icon:r,text:t}}return{icon:"\u2714\uFE0F",text:"all good"}}}},_Mt={key:0,class:"fss"},yMt={class:"tac"},bMt={class:"tac"},wMt={key:0},SMt={class:"fss"},TMt={key:1},kMt={class:"tac"},PMt=["title"],CMt={class:"tac"},EMt={class:"tac"},AMt={class:"tac"},MMt=["title"],xMt={class:"tac"},IMt={class:"tac"},LMt={class:"tac"},OMt={class:"tac"},RMt={class:"tac"},DMt={key:0,class:"tac"},NMt=["title"];function FMt(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon");return E(),M("tr",null,[_("td",null,[ft(s,{tag:"a",to:{path:"./",hash:"#node"+r.e.key}},{default:be(()=>[R(C(n.gameStore.plantzoneName(r.e.key)),1)]),_:1},8,["to"])]),_("td",null,[(E(!0),M(W,null,mt(r.e.unlucky,(l,u)=>(E(),M("div",null,[ft(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[_("span",null,[R(C(o.formatDropQty(l))+" ",1),ft(a,{ik:Number(u),with_name:!0},null,8,["ik"])])]),_:2},1032,["to"]),r.showGiantValues?(E(),M("span",_Mt," ["+C(o.formatDropQty(r.e.unlucky_gi[u]))+"] ",1)):Z("",!0)]))),256))]),_("td",yMt,[(E(!0),M(W,null,mt(r.e.lucky,(l,u)=>(E(),M("div",null,[ft(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[R(C(o.formatDropQty(l))+"\xA0",1),ft(a,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])]))),256))]),_("td",bMt,[r.showGiantValues?(E(),M("div",wMt,[R(C(o.formatFixed(r.e.cycleValue_gob,0))+" ",1),_("span",SMt,"["+C(o.formatFixed(r.e.cycleValue_gi,0))+"]",1)])):(E(),M("div",TMt,C(o.formatFixed(r.e.cycleValue,0)),1))]),_("td",kMt,[_("abbr",{class:"tooltip nound",title:r.e.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/r.e.dailyPerCp)}%`).join(`
`)},C(n.gameStore.nodeName(r.e.tnk)),9,PMt)]),_("td",CMt,C(o.formatFixed(r.e.dist,0)),1),_("td",EMt,C(r.e.cp),1),_("td",AMt,[_("abbr",{class:"tooltip nound",title:r.e.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/r.e.priceDaily)}%`).join(`
`)},C({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[r.e.kind]),9,MMt)]),_("td",xMt,C(o.formatFixed(r.e.wspd+5,1)),1),_("td",IMt,[n.userStore.allowFloating&&n.userStore.useFloatingResources[r.e.regiongroup]?(E(),M(W,{key:0},[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.e.key],2)),1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(r.e.activeWorkload,2)),1)],64))]),_("td",LMt,C(o.formatFixed(r.e.cyclesDaily,1)),1),_("td",OMt,C(o.formatFixed(r.e.priceDaily,2)),1),_("td",RMt,C(o.formatFixed(r.e.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(E(),M("td",DMt,[_("abbr",{class:"tooltip nound",title:o.takenInfo.text},C(o.takenInfo.icon),9,NMt)])):Z("",!0)])}const $Mt=Gt(mMt,[["render",FMt],["__scopeId","data-v-76ba9b57"]]);const zMt={setup(){const e=Wt(),t=gt(),r=wn(),n=Xp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{PlantzonesRow:$Mt},data:()=>({wspd:150,mspd:10,luck:10,showGiantValues:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218]),towns:[-1],filterTown:-1,hideTaken:!1}),methods:{formatFixed:st,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=40;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i,void 0,!0,void 0,!0);o.sort((u,c)=>u[1]-c[1]);let s={},a={};for(const u of Object.values(o)){const[c,f]=u,h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(a[h.tnk]=h.dailyPerCp,!("priceDaily"in s)){s=h;continue}h.dailyPerCp>s.dailyPerCp&&(s=h)}}if(!("alt_workers"in s))throw console.log(s),new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(a).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),s.alt_towns_profits=a,s.alt_towns=l,t.push(s)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit.filter(t=>!(this.filterTown!=-1&&t.tnk!=this.filterTown||this.hideTaken&&this.userStore.workedPlantzones.has(t.key.toString())));return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e},townsFilter(){return this.gameStore.townsWithLodging.map(e=>e==1343?-1:e)}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},Zi=e=>($e("data-v-1a05e86a"),e=e(),ze(),e),BMt={id:"toptext"},VMt=Zi(()=>_("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with only one skill (+5\u{1F528}). Home page has more tiers, levels, and skills. ",-1)),UMt=Zi(()=>_("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),WMt=Zi(()=>_("p",null," For example, taking both Shakatu Fig nodes should not be 3+3 but 3+1 CP. Use Home page instead of Plantzones to take into account connection reuse (and also lodging/storage costs). ",-1)),jMt=Zi(()=>_("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Resources as well. \u{1F47A}=goblin, \u{1F468}=human, \u{1F422}=giant, hover for more info ",-1)),GMt=R(" Only show entries with best town = "),HMt=["value"],XMt=R(" hide taken "),YMt={class:"scroll"},qMt={class:"stickyhead"},ZMt=Zi(()=>_("th",{rowspan:"2"},"Node",-1)),KMt={colspan:"3"},JMt=R("cycle drops "),QMt={class:"fss"},t5t=R("["),e5t=R(" as giant]"),r5t=Zi(()=>_("th",{colspan:"3"},"best town",-1)),n5t=Zi(()=>_("th",{colspan:"2"},"best worker",-1)),i5t=Zi(()=>_("th",{rowspan:"2"},"workload",-1)),o5t=Zi(()=>_("th",{colspan:"3"},"daily",-1)),s5t={key:0,rowspan:"2"},a5t=Zi(()=>_("abbr",{class:"tooltip nound",title:`assigned on Home page?
  (hover for details)
  'X% better' does not consider:
  - worker stats
  - worker skills
  - connection reuse
  - lodging and storage`},"\u{1F3E0}",-1)),l5t=[a5t],u5t=Zi(()=>_("tr",null,[_("th",{class:"rowspanned colspanned"},"unlucky"),_("th",{class:"colspanned"},[R(" lucky "),_("abbr",{title:`you always get unlucky items;
  these are ADDITIONAL, with
    chance equal to luck stat`,class:"tooltip"},"\u2139")]),_("th",{class:"colspanned"},"$ value"),_("th",{class:"colspanned"},"name"),_("th",{class:"colspanned"},"walk"),_("th",{class:"colspanned"},"CP"),_("th",{class:"colspanned"},"type"),_("th",{class:"colspanned"},"wspd"),_("th",{class:"colspanned"},"cycles"),_("th",{class:"colspanned"},"M$"),_("th",{class:"colspanned"},"M$/CP")],-1));function c5t(e,t,r,n,i,o){const s=Ot("PlantzonesRow");return E(),M("main",null,[_("div",BMt,[VMt,UMt,WMt,jMt,GMt,tt(_("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(E(!0),M(W,null,mt(o.townsFilter,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.nodeName(a):"any"),9,HMt))),256))],512),[[He,e.filterTown]]),XMt,tt(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>e.hideTaken=a)},null,512),[[Ne,e.hideTaken]])]),_("div",YMt,[_("table",qMt,[_("thead",null,[_("tr",null,[ZMt,_("th",KMt,[JMt,_("span",QMt,[t5t,tt(_("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>e.showGiantValues=a)},null,512),[[Ne,e.showGiantValues]]),e5t])]),r5t,n5t,i5t,o5t,n.userStore.workedPlantzones.size?(E(),M("th",s5t,l5t)):Z("",!0)]),u5t]),_("tbody",null,[(E(!0),M(W,null,mt(o.allPlantzonesNearestCpTownProfit_sorted,a=>(E(),Or(s,{id:"drops"+a.key,e:a,showGiantValues:e.showGiantValues},null,8,["id","e","showGiantValues"]))),256))])])])])}const f5t=Gt(zMt,[["render",c5t],["__scopeId","data-v-1a05e86a"]]),h5t={setup(){const e=gt(),t=Wt(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},d5t=_("br",null,null,-1),p5t=_("br",null,null,-1),v5t=_("tr",null,[_("th"),_("th",null,"Town / House"),_("th",null,"Lodging"),_("th",null,"CP")],-1),g5t=_("td",null,null,-1),m5t={class:"header"},_5t=R(" P2W: "),y5t=["onUpdate:modelValue"],b5t=["onUpdate:modelValue"],w5t=["href"];function S5t(e,t,r,n,i,o){return E(),M("main",null,[R(" Total lodging slots: "+C(n.userStore.haveLodging.slots.total),1),d5t,R(" Total CP spent: "+C(n.userStore.haveLodging.cp.total),1),p5t,_("table",null,[v5t,(E(!0),M(W,null,mt(n.gameStore.lodgingPerTown,(s,a)=>(E(),M(W,null,[_("tr",null,[g5t,_("td",null,[_("span",m5t,C(n.gameStore.uloc.town[a]),1),_5t,tt(_("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[a]=l,class:"short"},null,8,y5t),[[Dt,n.userStore.lodgingP2W[a],void 0,{number:!0}]])]),_("td",null,C(n.userStore.haveLodging.slots.perTown[a]),1),_("td",null,C(n.userStore.haveLodging.cp.perTown[a]),1)]),(E(!0),M(W,null,mt(s.houses,l=>(E(),M("tr",null,[_("td",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,b5t),[[Ne,n.userStore.lodgingTaken[l.key]]])]),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+l.key},C(n.gameStore.uloc.char[l.key]),9,w5t)]),_("td",null,C(l.lodgingSpaces),1),_("td",null,C(l.CP),1)]))),256))],64))),256))])])}const T5t=Gt(h5t,[["render",S5t]]);const k5t={setup(){const e=gt(),t=Wt(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:Yk,FloatingResourceEdit:gC},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.useFloatingResources":{handler(e,t){},deep:!0}},methods:{formatFixed:st,fileParse(e){let t=e.target.result,r=JSON.parse(t);"regionModifiers"in r&&(r.regionResources=r.regionModifiers,delete r.regionModifiers),"regionModifiers2"in r&&(r.regionResources2=r.regionModifiers2,delete r.regionModifiers2),this.userStore.$patch(r),this.setAllFloating(!0),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");const t={regionModifiers:this.userStore.regionResources,regionModifiers2:this.userStore.regionResources2},r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="resources.json",e.click()},clear(){this.userStore.regionResources={},this.userStore.regionResources2={}},setAllFloating(e){const t={};for(const r of Object.keys(this.gameStore.regionGroups))t[r]=e;this.userStore.useFloatingResources=t}}},di=e=>($e("data-v-6af04c00"),e=e(),ze(),e),P5t=di(()=>_("button",null,"import",-1)),C5t=di(()=>_("br",null,null,-1)),E5t=R(" Test on node: "),A5t=["value"],M5t=di(()=>_("br",null,null,-1)),x5t=R(" With workspeed: "),I5t={id:"toptext"},L5t=di(()=>_("p",null,"These values are shown ingame as green bars at world map > resource view.",-1)),O5t=di(()=>_("p",null,"However, some green bars are hidden/misplaced, for those you can check the current workload in worker assignment panel ingame.",-1)),R5t=di(()=>_("p",null,"Low (exhausted) resource means workloads of relevant nodes are increased (up to 2x of base) so each job takes longer to complete.",-1)),D5t=di(()=>_("p",null,"If unspecified here, 0% resource will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),N5t=di(()=>_("summary",null,"Advanced",-1)),F5t=R("allow floating resources "),$5t={key:0},z5t={class:"stickyhead"},B5t=di(()=>_("thead",null,[_("tr",null,[_("th",null,"RG"),_("th",null,"Resource %"),_("th",null,"Contains nodes with workload (base \u2192 current)")])],-1)),V5t={class:"tac"},U5t={class:"tac"},W5t={key:0,class:"switch mauto"},j5t=["onUpdate:modelValue"],G5t=di(()=>_("span",{class:"slider"},null,-1)),H5t=R(" floating"),X5t=di(()=>_("br",null,null,-1)),Y5t=["onClick"],q5t=R(" constant"),Z5t=di(()=>_("br",null,null,-1)),K5t=["onUpdate:modelValue"];function J5t(e,t,r,n,i,o){const s=Ot("ModalDialog"),a=Ot("FloatingResourceEdit"),l=Ot("RouterLink");return E(),M(W,null,[ft(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:be(()=>[_("form",{onSubmit:t[1]||(t[1]=lp(u=>o.fileImport(u),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),P5t],32)]),_:1},8,["show"]),ft(s,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:be(()=>[ft(a,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),C5t,E5t,tt(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(E(!0),M(W,null,mt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(E(),M("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},C(n.gameStore.plantzoneName(u))+" ("+C(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base) ",9,A5t))),256))],512),[[He,e.floatingDialogWkld]]),M5t,x5t,tt(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[Dt,e.floatingDialogWspd,void 0,{number:!0}]]),R(" "+C(e.floatingDialogWspd),1)]),_:1},8,["show"]),_("div",I5t,[L5t,O5t,R5t,D5t,_("details",null,[N5t,_("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),_("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),_("label",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Ne,n.userStore.allowFloating]]),F5t]),n.userStore.allowFloating?(E(),M("span",$5t,[_("button",{onClick:t[11]||(t[11]=u=>o.setAllFloating(!0))},"all floating"),_("button",{onClick:t[12]||(t[12]=u=>o.setAllFloating(!1))},"all constant")])):Z("",!0)])]),_("table",z5t,[B5t,_("tbody",null,[(E(!0),M(W,null,mt(n.gameStore.regionGroups,(u,c)=>(E(),M("tr",null,[_("td",V5t,C(c),1),_("td",U5t,[n.userStore.allowFloating?(E(),M("label",W5t,[tt(_("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingResources[c]=f},null,8,j5t),[[Ne,n.userStore.useFloatingResources[c]]]),G5t])):Z("",!0),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(E(),M(W,{key:1},[H5t,X5t,R(" ~"+C(o.formatFixed(n.userStore.medianResources[c],2))+" ",1),_("button",{onClick:f=>o.showDialog(c)},"edit",8,Y5t)],64)):(E(),M(W,{key:2},[q5t,Z5t,tt(_("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionResources[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,K5t),[[Dt,n.userStore.regionResources[c],void 0,{number:!0}]])],64))]),_("td",null,[(E(!0),M(W,null,mt(u,f=>(E(),M("div",null,[ft(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:be(()=>[R(C(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),R(" "+C(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(E(),M(W,{key:0},[R(" \u2933 "+C(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(E(),M(W,{key:1},[R(" \u2192 "+C(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])])],64)}const Q5t=Gt(k5t,[["render",J5t],["__scopeId","data-v-6af04c00"]]);const t6t={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:st,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]},deleteAll(){this.userStore.userWorkshops={}}}},Xa=e=>($e("data-v-22a29fb5"),e=e(),ze(),e),e6t=Xa(()=>_("h3",null,"\u{1F3ED}Workshops config",-1)),r6t={class:"sa"},n6t=Xa(()=>_("tr",null,[_("th",null,"House"),_("th",null,[R(" label "),_("abbr",{class:"tooltip",title:"for display only"},"\u2139")]),_("th",null,[R(" worktype "),_("abbr",{class:"tooltip",title:`used to factor in some worker skills.
also, only Mass Production can employ multiple workers at once.`},"\u2139")]),_("th",null," workload "),_("th",null,[R(" $/cycle "),_("abbr",{title:`use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator to find out.
For crates, enter profit per 1 crate - if a worker with +1/+3 packing skill occupies this workshop it will be taken into account.`,class:"tooltip"},"\u2139")]),_("th",null,[R(" CP "),_("abbr",{title:`Full cost of operating the workshop, including:
1) the workshop itself;
2) house chain to connect the workshop (*after* autoassigned houses shown in Home > town config > Found cost spoiler);
3) storage for input/output mats, if not provided by (2).
The only thing to not include here is lodging for the worker who is going to occupy the workshop.
However, if your workshop house chain does provide lodging, reduce (2) accordingly. 
The house chain can potentially provide storage and lodging not only for this workshop, but for other workshops of this town. 
In this case, use average CP value (sum up all workshop-related CP costs and divide by active workshop count).`,class:"tooltip"},"\u2139")]),_("th",null,"action")],-1)),i6t=["onUpdate:modelValue"],o6t=["onUpdate:modelValue"],s6t=J1('<option value="unk" data-v-22a29fb5>unknown</option><option value="jewelry" data-v-22a29fb5>jewelry</option><option value="mass" data-v-22a29fb5>mass</option><option value="weap" data-v-22a29fb5>weapon</option><option value="tool" data-v-22a29fb5>tool</option><option value="furn" data-v-22a29fb5>furniture</option><option value="costume" data-v-22a29fb5>costume</option><option value="refine" data-v-22a29fb5>refine</option><option value="siege" data-v-22a29fb5>siege</option><option value="mount" data-v-22a29fb5>mount</option><option value="exclus" data-v-22a29fb5>exclusive</option><option value="pack_produce" data-v-22a29fb5>pack_produce</option><option value="pack_herb" data-v-22a29fb5>pack_herb</option><option value="pack_mushr" data-v-22a29fb5>pack_mushr</option><option value="pack_fish" data-v-22a29fb5>pack_fish</option><option value="pack_timber" data-v-22a29fb5>pack_timber</option><option value="pack_ore" data-v-22a29fb5>pack_ore</option>',17),a6t=[s6t],l6t=["onUpdate:modelValue"],u6t=["onUpdate:modelValue"],c6t=["onUpdate:modelValue"],f6t=["onClick"],h6t={style:{float:"right"}},d6t=R(" new entry:"),p6t=Xa(()=>_("br",null,null,-1)),v6t={class:"borderless"},g6t=Xa(()=>_("td",null,"town",-1)),m6t=["value"],_6t=Xa(()=>_("td",null,"usage",-1)),y6t=["value"],b6t=Xa(()=>_("td",null,"level",-1)),w6t=["value"],S6t=Xa(()=>_("td",null,"house",-1)),T6t=["value"],k6t={key:0,class:"fsxs"},P6t=["disabled"],C6t=Xa(()=>_("abbr",{class:"tooltip",title:`Note that assigning house as workshop does not prevent it from being used for autolodging/autostorage on Home page.
You need to manually work around this.`},"\u2139",-1));function E6t(e,t,r,n,i,o){return E(),M(W,null,[e6t,_("table",r6t,[n6t,(E(!0),M(W,null,mt(n.userStore.userWorkshops,(s,a)=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.char[a]),1),_("td",null,[tt(_("input",{class:"w5em","onUpdate:modelValue":l=>s.label=l},null,8,i6t),[[Dt,s.label,void 0,{number:!0}]])]),_("td",null,[tt(_("select",{"onUpdate:modelValue":l=>s.industry=l},a6t,8,o6t),[[He,s.industry]])]),_("td",null,[tt(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualWorkload=l},null,8,l6t),[[Dt,s.manualWorkload,void 0,{number:!0}]])]),_("td",null,[tt(_("input",{type:"number",class:"w7em","onUpdate:modelValue":l=>s.manualCycleIncome=l},null,8,u6t),[[Dt,s.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[tt(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualCp=l},null,8,c6t),[[Dt,s.manualCp,void 0,{number:!0}]])]),_("td",null,[_("button",{onClick:l=>o.deleteWorkshop(a)},"delete",8,f6t)])]))),256))]),_("div",h6t,[_("button",{onClick:t[0]||(t[0]=s=>o.deleteAll()),title:"except occupied"},"delete all")]),d6t,p6t,_("table",v6t,[_("tr",null,[g6t,_("td",null,[tt(_("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.filterTown=s)},[(E(!0),M(W,null,mt(o.filteredTowns,s=>(E(),M("option",{value:s},C(s>=0?n.gameStore.uloc.town[s]:"any"),9,m6t))),256))],512),[[He,e.filterTown]])])]),_("tr",null,[_6t,_("td",null,[tt(_("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.filterUsage=s)},[(E(!0),M(W,null,mt(o.filteredUsages,s=>(E(),M("option",{value:s},C(s>=0?n.gameStore.uloc.housetype[s]+" "+s:"any"),9,y6t))),256))],512),[[He,e.filterUsage]])])]),_("tr",null,[b6t,_("td",null,[tt(_("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.filterLevel=s)},[(E(!0),M(W,null,mt(o.filteredLevels,s=>(E(),M("option",{value:s},C(s>=0?s+"+":"any"),9,w6t))),256))],512),[[He,e.filterLevel]])])]),_("tr",null,[S6t,_("td",null,[tt(_("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.selectedHouse=s)},[(E(!0),M(W,null,mt(o.filteredHouses,s=>(E(),M("option",{value:s},C(s)+" "+C(n.gameStore.uloc.char[s])+" "+C(s in n.userStore.userWorkshops?"\u2714\uFE0F":""),9,T6t))),256))],512),[[He,e.selectedHouse]]),e.selectedHouse in n.userStore.userWorkshops?(E(),M("span",k6t," already in list! ")):Z("",!0)])])]),_("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[5]||(t[5]=s=>o.addWorkshop(e.selectedHouse))}," add to my workshops ",8,P6t),R(" "+C()+" ",1),C6t],64)}const A6t=Gt(t6t,[["render",E6t],["__scopeId","data-v-22a29fb5"]]);const M6t={setup(){const e=Wt(),t=gt(),r=wn();return{gameStore:t,userStore:e,marketStore:r}},props:{show:{type:Boolean,default:!1}},components:{ItemIcon:fi},created(){},data:()=>({cpCost:.4,pcHours:16,repeatGroupMeanings:{0:"wspd",1:"wspd_jewelry",2:"wspd_mass",3:"wspd_weap",4:"wspd_tool",5:"wspd_furn",7:"wspd_costume",8:"wspd_refine",9:"wspd_siege",10:"wspd_mount",11:"wspd_farm",13:"wspd_exclus"}}),computed:{repeatGroupIds(){const e={};for(const[t,r]of Object.entries(this.repeatGroupMeanings))e[r]=Number(t);return e},perTownPerRecipePerThrifty(){const e={};for(const t of this.userStore.wsJobs){const r=t.worker.tnk,n=t.worker.job.recipe,i=t.thriftyPercent;if(!(n in this.gameStore.craftInputs)){console.log("rcp",n,"not supported");continue}if(r in e||(e[r]={}),n in e[r]||(e[r][n]={}),!(i in e[r][n])){const f=this.gameStore.craftInfo[n].rp;e[r][n][i]={repeatGroup:f,workers:0,cyclesPerDay:0,completionsPerDay:0,workload:this.gameStore.craftInfo[n].wl}}e[r][n][i].workers+=1;const o=this.gameStore.craftInfo[n].rp,s=t.worker.job.hk,a=this.userStore.userWorkshops[s],l=this.gameStore.measureWorkshopWorker(s,a,t.worker).cyclesDaily;e[r][n][i].cyclesPerDay+=l;const u=this.gameStore.repeatsWorkshopWorker(t.worker,o),c=l*this.gameStore.craftInfo[n].aoc*u;e[r][n][i].completionsPerDay+=c}return e},usedInputItems(){const e=new Set([9492]);if(!this.gameStore.ready)return e;for(const t of Object.values(this.perTownPerRecipePerThrifty))for(const r of Object.keys(t)){const n=this.gameStore.craftInputs[r];for(const i of Object.keys(n))e.add(i)}return e},tradingLevelString(){const e=this.userStore.tradingLevel;return 90<e?`G${e-90}`:60<e?`M${e-60}`:`${e}`},townStat(){const e={},t=new Set;for(const[r,n]of Object.entries(this.perTownPerRecipePerThrifty)){t.add(r),e[r]={workers:0,completionsPerDay:0,completionsPerDayDoubleEnded:0,reverseConnection:!1};const i=this.userStore.tradeDestinations[r];t.has(i)&&this.userStore.tradeDestinations[i]==r&&(e[r].reverseConnection=!0);for(const o of Object.values(n))for(const s of Object.values(o))e[r].workers+=s.workers,e[r].completionsPerDay+=s.completionsPerDay;e[r].reverseConnection?(e[i].completionsPerDayDoubleEnded+=e[r].completionsPerDay,e[r].completionsPerDayDoubleEnded=e[i].completionsPerDayDoubleEnded):e[r].completionsPerDayDoubleEnded+=e[r].completionsPerDay}return e},rows(){const e={towns:{},transport:{},total:{silver:0,CP:0,transportUtilization:0}};if(!this.gameStore.ready)return e;for(const[t,r]of Object.entries(this.perTownPerRecipePerThrifty)){e.towns[t]=[];const n=this.userStore.tradeDestinations[t],i=this.townStat[t].reverseConnection?n:t,o=this.transportHours(t,n),s=Math.ceil(this.pcHours/o),a=Math.ceil(this.pcHours/o),l=5*a*3e4;t in this.userStore.tradeRouteCp||(this.userStore.tradeRouteCp[t]=0);const u=this.userStore.tradeRouteCp[i];t in this.userStore.tradeInfraCp||(this.userStore.tradeInfraCp[t]=0);const c=`${this.gameStore.uloc.node[t]} \u2192 ${this.gameStore.uloc.node[n]}`;if(!(c in e.transport)){const f=5*s;e.transport[c]={duration:e4(o),wagonRuns:s,haveWagons:f,needWagons:0,utilization:0}}for(const[f,h]of Object.entries(r))for(const[d,p]of Object.entries(h)){const v=this.recipeCost(f,Number(d)),m=p.completionsPerDay/p.cyclesPerDay,g=this.marketStore.prices[9492],y=g/3/m;v.val+=y,v.desc+=`${g} / 3 / ${st(m,2)} = ${st(y)}
`;const b=this.gameStore.craftInfo[f].aoc;b!=1&&(v.val/=b,v.desc+=`----------------------
`,v.desc+=`divided by ${b}
`);const w=this.tradeInfo(f,t,n);w.delta=w.sellPrice-v.val-w.transportFee,w.deltaDesc=`${st(w.sellPrice)} - ${st(v.val)} - ${st(w.transportFee)}`,w.roi=w.delta/(v.val+w.transportFee),w.dailyProfit=w.delta*p.completionsPerDay/1e6,w.routeCp=this.userStore.tradeRouteAlwaysOn[i]?u*p.completionsPerDay/this.townStat[t].completionsPerDayDoubleEnded:u*p.completionsPerDay*w.crateWeight/l;const T=this.userStore.tradeRouteAlwaysOn[t]?`${u}CP * ${st(p.completionsPerDay)} / ${st(this.townStat[t].completionsPerDayDoubleEnded)} crates`:`${u}CP * ${st(p.completionsPerDay*w.crateWeight/l*100,3)}% utilization`;w.cp=this.userStore.tradeInfraCp[t]/this.townStat[t].workers*p.workers+w.routeCp,w.cpDesc=`${this.userStore.tradeInfraCp[t]}CP / ${this.townStat[t].workers} x ${p.workers} workers + ${T}`,w.eff=w.dailyProfit/w.cp;const S=e.towns[t][e.towns[t].length-1],k=S&&f==S.rcp;e.towns[t].push({rcp:f,collapsed:k,rowspan:1,thriftyPercent:d,makeCost:v,perf:p,tradeInfo:w}),e.transport[c].needWagons+=p.completionsPerDay*w.crateWeight/3e4,e.total.silver+=p.completionsPerDay*w.delta,e.total.CP+=w.cp}}for(const t of Object.values(e.transport))t.utilization=t.needWagons/t.haveWagons,e.total.transportUtilization+=t.utilization;return e.total.eff=e.total.silver/1e6/e.total.CP,e},table(){const e=this.rows;let t;for(const[r,n]of Object.entries(e.towns))for(const i of n)i.collapsed?t.rowspan++:t=i;return this.rows}},methods:{formatFixed:st,hoursToHMS:e4,recipeCost(e,t){if(!(e in this.gameStore.craftInputs)){const n=`recipe ${e} can't be priced`;return console.log(n),{val:NaN,desc:n}}const r=this.gameStore.craftInputs[e];if(t>0){const n={},i=Object.entries(r).length;for(const o of Object.keys(r))if(r[o]>=10){const s=Math.floor(r[o]/10),a=s*(1-t/i/100);n[o]=r[o]-s+a}else n[o]=r[o];return this.marketStore.priceBunch(n)}return this.marketStore.priceBunch(r)},distanceToTrader(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.nodes[e].pos,n=this.gameStore.traders[t],i=r.x-n[0],o=0,s=r.z-n[1];return Math.sqrt(i*i+o*o+s*s)},distancePriceBonus(e,t){const n=this.distanceToTrader(e,t)*68/1e8;return n>1.5?1.5:n},distance(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.nodes[e].pos,n=this.gameStore.nodes[t].pos,i=r.x-n.x,o=0,s=r.z-n.z;return Math.sqrt(i*i+o*o+s*s)},transportCostPerLt(e,t,r){const i=this.distance(e,t)*1.8/3e4;return r?i*4:i},transportHours(e,t){return this.distance(e,t)*2.6/1e6},tradeInfo(e,t,r){if(!this.gameStore.ready)return NaN;if(!(e in this.gameStore.craftOutputs))return NaN;const n=this.gameStore.craftOutputs[e][0];if(!(n in this.gameStore.itemInfo))return NaN;const i=this.gameStore.itemInfo[n].vendorPrice,o=this.distancePriceBonus(t,r),s=i*(1+o)*(1+this.userStore.bargainBonus),a=`${i} x ${1+o} x ${1+this.userStore.bargainBonus}`,l=this.gameStore.itemInfo[n].weight,u=this.transportCostPerLt(t,r),c=l*u;return{destination:r,distanceBonus:o,crateWeight:l,costPerLt:u,sellPrice:s,sellPriceDesc:a,transportFee:c}},routeSortedDestinations(e,t){const r=[];for(const n of Object.keys(this.gameStore.traders))r.push(this.tradeInfo(e,t,n));return r.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),r},townSortedDestinations(e){const t=[];for(const n of Object.keys(this.gameStore.traders))t.push(this.tradeInfo(9212,e,n));return t.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),t},copyToWorkshops(){for(const e of this.userStore.wsJobs){const t=e.worker.tnk,r=e.worker.job.recipe,n=e.thriftyPercent,i=e.worker.job.hk,o=this.userStore.userWorkshops[i];if(t in this.table.towns)for(const s of this.table.towns[t])r==s.rcp&&n==s.thriftyPercent&&(console.log(e.worker.label,o,s),o.industry=s.perf.repeatGroup,o.manualWorkload=s.perf.workload,o.manualCp=s.tradeInfo.cp/s.perf.workers,o.manualCycleIncome=Math.round(s.tradeInfo.delta))}}}},pi=e=>($e("data-v-3e88a173"),e=e(),ze(),e),x6t=pi(()=>_("div",{class:"container"},null,-1)),I6t={class:"container"},L6t={class:"left"},O6t=pi(()=>_("h3",{style:{display:"inline"}},"Active recipes",-1)),R6t=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"out"),_("th",null,"sell $"),_("th",null,[_("abbr",{class:"tooltip",title:"workers"}," w ")]),_("th",null,[_("abbr",{class:"tooltip",title:"crates/day"}," c/d ")]),_("th",null,[_("abbr",{class:"tooltip",title:"thrifty %"}," \u{1F9EA} ")]),_("th",null,"make $"),_("th",null,"wagon $"),_("th",null,"profit $"),_("th",null,[R(" ROI "),_("abbr",{class:"tooltip",title:"make $ / profit $"},"\u2139")]),_("th",null,"M$/day"),_("th",null,[R(" CP "),_("abbr",{class:"tooltip",title:"infra + connection"},"\u2139")]),_("th",null,"M$/day/CP")])],-1)),D6t={colspan:"2",class:"tac"},N6t={colspan:"4",class:"tac"},F6t=pi(()=>_("abbr",{class:"tooltip",title:`total town infrastructure 
(workshops, storage, house connections)
ON TOP of the houses autoassigned 
on Home page (lodging is autoassigned)`},"infra",-1)),$6t=["onUpdate:modelValue"],z6t=R(" CP "),B6t={colspan:"6"},V6t=["onUpdate:modelValue"],U6t=["value"],W6t=R(" cost "),j6t=["onUpdate:modelValue"],G6t=R(" CP "),H6t=pi(()=>_("span",{class:"spacer"},null,-1)),X6t=["onUpdate:modelValue"],Y6t=R(" always on "),q6t=R("(reusing)"),Z6t=["rowspan"],K6t=["rowspan"],J6t=["title"],Q6t={class:"tac"},txt={class:"tac"},ext={class:"tac"},rxt={class:"tar"},nxt=["title"],ixt={class:"tar"},oxt={class:"tar"},sxt=["title"],axt={class:"tar"},lxt={class:"tar"},uxt={class:"tar"},cxt=["title"],fxt={class:"tar"},hxt={class:"slider-container"},dxt=R(" Trading\xA0 "),pxt={style:{float:"right"}},vxt=pi(()=>_("br",null,null,-1)),gxt=pi(()=>_("summary",null,"Wagons",-1)),mxt=R(" Order issuing hours: "),_xt=pi(()=>_("br",null,null,-1)),yxt=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"route"),_("th",null,"duration"),_("th",null,"needed"),_("th",null,"capacity"),_("th",null,"utilization")])],-1)),bxt={class:"tar"},wxt={class:"tar"},Sxt={class:"tar"},Txt=pi(()=>_("td",{class:"tar",colspan:"4"},null,-1)),kxt={class:"tar"},Pxt={class:"right"},Cxt=pi(()=>_("h3",null,"Input prices",-1)),Ext=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"item"),_("th",null,"custom"),_("th",null,"buy"),_("th",null,"eff")])],-1)),Axt=["onUpdate:modelValue"],Mxt=["disabled","onUpdate:modelValue"];function xxt(e,t,r,n,i,o){const s=Ot("ItemIcon");return E(),M(W,null,[x6t,_("div",I6t,[_("div",L6t,[O6t,_("table",null,[R6t,_("tbody",null,[(E(!0),M(W,null,mt(o.table.towns,(a,l)=>(E(),M(W,null,[_("tr",null,[_("td",D6t,C(n.gameStore.uloc.node[l]),1),_("td",N6t,[F6t,R(C()+" ",1),tt(_("input",{type:"number",class:"w33em","onUpdate:modelValue":u=>n.userStore.tradeInfraCp[l]=u},null,8,$6t),[[Dt,n.userStore.tradeInfraCp[l],void 0,{number:!0}]]),z6t]),_("td",B6t,[tt(_("select",{"onUpdate:modelValue":u=>n.userStore.tradeDestinations[l]=u},[(E(!0),M(W,null,mt(o.townSortedDestinations(l),u=>(E(),M("option",{key:u.destination,value:u.destination},C(n.gameStore.uloc.node[u.destination])+" "+C(o.formatFixed(u.distanceBonus*100,2))+"% "+C(o.formatFixed(30*u.costPerLt))+"$ ",9,U6t))),128))],8,V6t),[[He,n.userStore.tradeDestinations[l]]]),o.townStat[l].reverseConnection==!1?(E(),M(W,{key:0},[W6t,tt(_("input",{"onUpdate:modelValue":u=>n.userStore.tradeRouteCp[l]=u,type:"number",class:"w3em"},null,8,j6t),[[Dt,n.userStore.tradeRouteCp[l],void 0,{number:!0}]]),G6t,H6t,tt(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.tradeRouteAlwaysOn[l]=u},null,8,X6t),[[Ne,n.userStore.tradeRouteAlwaysOn[l]]]),Y6t],64)):(E(),M(W,{key:1},[q6t],64))])]),(E(!0),M(W,null,mt(a,u=>(E(),M("tr",{key:u.tnk+"/"+u.rcp},[u.collapsed?Z("",!0):(E(),M("td",{key:0,rowspan:u.rowspan},[u.rcp&&n.gameStore.craftOutputs[u.rcp]?(E(!0),M(W,{key:0},mt(n.gameStore.craftOutputs[u.rcp],c=>(E(),M(W,null,[n.gameStore.craftInfo[u.rcp].aoc!=1?(E(),M(W,{key:0},[R(C(n.gameStore.craftInfo[u.rcp].aoc),1)],64)):Z("",!0),ft(s,{ik:c},null,8,["ik"])],64))),256)):(E(),M(W,{key:1},[R(C(e.rcp),1)],64))],8,Z6t)),u.collapsed?Z("",!0):(E(),M("td",{key:1,class:"tar",rowspan:u.rowspan},[_("abbr",{class:"tooltip",title:u.tradeInfo.sellPriceDesc},C(o.formatFixed(u.tradeInfo.sellPrice)),9,J6t)],8,K6t)),_("td",Q6t,C(u.perf.workers),1),_("td",txt,C(o.formatFixed(u.perf.completionsPerDay)),1),_("td",ext,C(u.thriftyPercent),1),_("td",rxt,[_("abbr",{class:"tooltip",title:u.makeCost.desc},C(o.formatFixed(u.makeCost.val)),9,nxt)]),_("td",ixt,C(o.formatFixed(u.tradeInfo.transportFee)),1),_("td",oxt,[_("abbr",{class:"tooltip",title:u.tradeInfo.deltaDesc},C(o.formatFixed(u.tradeInfo.delta)),9,sxt)]),_("td",axt,C(o.formatFixed(u.tradeInfo.roi*100))+"% ",1),_("td",lxt,C(o.formatFixed(u.tradeInfo.dailyProfit,2)),1),_("td",uxt,[_("abbr",{class:"tooltip",title:u.tradeInfo.cpDesc},C(o.formatFixed(u.tradeInfo.cp,2)),9,cxt)]),_("td",fxt,C(o.formatFixed(u.tradeInfo.eff,3)),1)]))),128))],64))),256))])]),_("div",hxt,[dxt,tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.tradingLevel=a),min:"1",max:"140",step:"1"},null,512),[[Dt,n.userStore.tradingLevel,void 0,{number:!0}]]),R(" \xA0"+C(o.tradingLevelString)+" \u2192 "+C(o.formatFixed(n.userStore.bargainBonus*100,1))+"% bargain ",1)]),_("div",pxt,[_("button",{onClick:t[1]||(t[1]=a=>o.copyToWorkshops()),title:"industry, M$/day, CP"},"copy to workshops")]),vxt,R(" Total: "+C(o.formatFixed(o.table.total.silver/1e6,1))+" M$/day, "+C(o.formatFixed(o.table.total.CP,2))+" CP, "+C(o.formatFixed(o.table.total.eff,3))+" M$/day/CP ",1),_("details",null,[gxt,mxt,tt(_("input",{type:"number",class:"w3em","onUpdate:modelValue":t[2]||(t[2]=a=>e.pcHours=a)},null,512),[[Dt,e.pcHours,void 0,{number:!0}]]),_xt,_("table",null,[yxt,_("tbody",null,[(E(!0),M(W,null,mt(o.table.transport,(a,l)=>(E(),M("tr",null,[_("td",null,C(l),1),_("td",null,C(a.duration),1),_("td",bxt,C(o.formatFixed(a.needWagons,2)),1),_("td",wxt,C(a.haveWagons),1),_("td",Sxt,C(o.formatFixed(a.utilization*100,2))+"% ",1)]))),256)),_("tr",null,[Txt,_("td",kxt,C(o.formatFixed(o.table.total.transportUtilization*100,2))+"% ",1)])])])])]),_("div",Pxt,[Cxt,_("table",null,[Ext,_("tbody",null,[(E(!0),M(W,null,mt(o.usedInputItems,a=>(E(),M("tr",null,[_("td",null,[ft(s,{ik:Number(a)},null,8,["ik"])]),_("td",null,[tt(_("input",{type:"number",class:"w5em tar","onUpdate:modelValue":l=>n.userStore.customPrices[a]=l},null,8,Axt),[[Dt,n.userStore.customPrices[a],void 0,{number:!0}]])]),_("td",null,[tt(_("input",{type:"checkbox",disabled:a in n.gameStore.vendorPrices,"onUpdate:modelValue":l=>n.userStore.keepItems[a]=l},null,8,Mxt),[[Ne,n.userStore.keepItems[a]]])]),_("td",null,C(o.formatFixed(n.marketStore.prices[a])),1)]))),256))])])])])],64)}const Ixt=Gt(M6t,[["render",xxt],["__scopeId","data-v-3e88a173"]]);const Lxt={setup(){const e=gt(),t=Wt(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ItemIcon:fi,ModalDialog:Yk,WorkerEdit:Gz,WorkshopsConfig:A6t,TradingConfig:Ixt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,tradingConfigVisible:!1,highlightPending:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:st,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}},fileParse(e){let t=e.target.result,r=JSON.parse(t);"effectivePrices"in r&&delete r.effectivePrices,this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileExport(){var e=document.createElement("a");let t={customPrices:this.userStore.customPrices,keepItems:this.userStore.keepItems,effectivePrices:this.marketStore.prices};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="custom_prices.json",e.click()},clearCustomPrices(){this.userStore.customPrices={},this.userStore.keepItems={}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},pr=e=>($e("data-v-53f02e39"),e=e(),ze(),e),Oxt=pr(()=>_("button",null,"import",-1)),Rxt={id:"toptext"},Dxt={class:"settings-tiles"},Nxt={class:"settings-tile"},Fxt=R(" Server: "),$xt=J1("<option data-v-53f02e39>NA</option><option data-v-53f02e39>EU</option><option data-v-53f02e39>RU</option><option data-v-53f02e39>KR</option><option data-v-53f02e39>JP</option><option data-v-53f02e39>TH</option><option data-v-53f02e39>TW</option><option data-v-53f02e39>SA</option><option data-v-53f02e39>SEA</option><option data-v-53f02e39>MENA</option><option data-v-53f02e39>CEU</option><option data-v-53f02e39>CNA</option>",12),zxt=[$xt],Bxt=pr(()=>_("br",null,null,-1)),Vxt=pr(()=>_("label",{for:"vp_t"},"VP always on",-1)),Uxt=R(") "),Wxt=R(" Tax: "),jxt=J1('<option value="0.65" data-v-53f02e39>0.65 (0)</option><option value="0.65325" data-v-53f02e39>0.65325 (1000)</option><option value="0.6565" data-v-53f02e39>0.6565 (4000)</option><option value="0.65975" data-v-53f02e39>0.65975 (7000)</option><option value="0.65975" data-v-53f02e39>0.69225 (7000 + ring)</option><option value="0.845" data-v-53f02e39>0.845 (0 + VP)</option><option value="0.84825" data-v-53f02e39>0.84825 (1000 + VP)</option><option value="0.8515" data-v-53f02e39>0.8515 (4000 + VP)</option><option value="0.85475" data-v-53f02e39>0.85475 (7000 + VP)</option><option value="0.88725" data-v-53f02e39>0.88725 (7000 + ring + VP)</option><option value="1" data-v-53f02e39>1 (just hoarding)</option>',11),Gxt=[jxt],Hxt=R(" Language: "),Xxt=pr(()=>_("option",null,"en",-1)),Yxt=pr(()=>_("option",null,"ru",-1)),qxt=pr(()=>_("option",null,"ko",-1)),Zxt=pr(()=>_("option",null,"jp",-1)),Kxt=pr(()=>_("option",null,"tw",-1)),Jxt=[Xxt,Yxt,qxt,Zxt,Kxt],Qxt={class:"settings-tile"},tIt=pr(()=>_("div",null,"Default worker for hire:",-1)),eIt=pr(()=>_("label",{for:"dw_f"},"Random Artisan Goblin",-1)),rIt={for:"dw_t"},nIt={class:"settings-tile"},iIt=R(" \u{1F33B}Farming "),oIt=pr(()=>_("label",{for:"fe_t",style:{"margin-right":"0.4em"}},"enable",-1)),sIt={key:0},aIt={class:"slider-container"},lIt=pr(()=>_("span",null,"F2P",-1)),uIt=pr(()=>_("span",null,"P2W",-1)),cIt={style:{display:"flex"}},fIt=R(" Total profit from 10 large fences (use "),hIt=pr(()=>_("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),dIt=R(" to estimate):"),pIt=pr(()=>_("br",null,null,-1)),vIt=R(" M$/day with 10 workers "),gIt=pr(()=>_("br",null,null,-1)),mIt=R(" M$/day with 0 workers (half growth speed) "),_It={class:"settings-tile"},yIt=R(" \u{1F3ED}Workshops "),bIt={class:"settings-tile"},wIt=R(" \u{1F5FA}\uFE0F Map "),SIt=R(" hide inactive "),TIt=R(" px icon size "),kIt=pr(()=>_("div",{class:"spacer"},null,-1)),PIt=R(" Market API status: "),CIt={key:0},EIt={key:1},AIt=R(" \xA0"),MIt=pr(()=>_("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),xIt=R("If the item is for self use, select Keep (=untax) and/or enter Custom price: "),IIt={class:"scrollable"},LIt={class:"stickyhead"},OIt=pr(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Market"),_("th",null,"Custom"),_("th",null,"Keep"),_("th",null,"Effective")])],-1)),RIt=["id"],DIt=["href"],NIt=R(" "+C(" ")+" "),FIt={key:0},$It=["title"],zIt={class:"tar"},BIt=["href"],VIt=["onUpdate:modelValue"],UIt={class:"tac"},WIt=["disabled","onUpdate:modelValue"],jIt={class:"tar"};function GIt(e,t,r,n,i,o){const s=Ot("ModalDialog"),a=Ot("WorkerEdit"),l=Ot("WorkshopsConfig"),u=Ot("TradingConfig"),c=Ot("ItemIcon");return E(),M(W,null,[ft(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=f=>e.importDialogVisible=f)},{default:be(()=>[_("form",{onSubmit:t[1]||(t[1]=lp(f=>o.fileImport(f),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=f=>o.fileImport())}),Oxt],32)]),_:1},8,["show"]),ft(s,{show:e.workerDialogVisible,"onUpdate:show":t[4]||(t[4]=f=>e.workerDialogVisible=f)},{default:be(()=>[ft(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[3]||(t[3]=f=>e.workerDialogVisible=f)},null,8,["workerEditing","show"])]),_:1},8,["show"]),ft(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[5]||(t[5]=f=>e.workshopsConfigVisible=f)},{default:be(()=>[ft(l)]),_:1},8,["show"]),ft(s,{show:e.tradingConfigVisible,"onUpdate:show":t[6]||(t[6]=f=>e.tradingConfigVisible=f)},{default:be(()=>[ft(u)]),_:1},8,["show"]),_("main",null,[_("div",Rxt,[_("div",Dxt,[_("div",Nxt,[_("div",null,[Fxt,tt(_("select",{"onUpdate:modelValue":t[7]||(t[7]=f=>n.userStore.selectedRegion=f),onChange:t[8]||(t[8]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},zxt,544),[[He,n.userStore.selectedRegion]]),Bxt,R(" \u2937 base storage: "+C(n.userStore.baseStorage)+" (",1),tt(_("input",{type:"checkbox",id:"vp_t","onUpdate:modelValue":t[9]||(t[9]=f=>n.userStore.storageVP=f)},null,512),[[Ne,n.userStore.storageVP]]),Vxt,Uxt]),_("div",null,[Wxt,tt(_("select",{"onUpdate:modelValue":t[10]||(t[10]=f=>n.userStore.selectedTax=f)},Gxt,512),[[He,n.userStore.selectedTax]])]),_("div",null,[Hxt,tt(_("select",{"onUpdate:modelValue":t[11]||(t[11]=f=>n.userStore.selectedLang=f),onChange:t[12]||(t[12]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},Jxt,544),[[He,n.userStore.selectedLang]])])]),_("div",Qxt,[tIt,_("div",null,[tt(_("input",{type:"radio",name:"dw",id:"dw_f",value:!1,"onUpdate:modelValue":t[13]||(t[13]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Md,n.userStore.useDefaultWorker]]),eIt]),_("div",null,[tt(_("input",{type:"radio",name:"dw",id:"dw_t",value:!0,"onUpdate:modelValue":t[14]||(t[14]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Md,n.userStore.useDefaultWorker]]),_("label",rIt,[R("Custom ("+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),_("button",{onClick:t[15]||(t[15]=f=>e.workerDialogVisible=!0)},"edit")])])]),_("div",nIt,[iIt,tt(_("input",{type:"checkbox",id:"fe_t","onUpdate:modelValue":t[16]||(t[16]=f=>n.userStore.farmingEnable=f)},null,512),[[Ne,n.userStore.farmingEnable]]),oIt,n.userStore.farmingEnable?(E(),M("span",sIt,[_("div",aIt,[lIt,tt(_("input",{type:"range",style:{width:"4em"},"onUpdate:modelValue":t[17]||(t[17]=f=>n.userStore.farmingP2WShare=f),min:"0",max:"80",step:"10"},null,512),[[Dt,n.userStore.farmingP2WShare,void 0,{number:!0}]]),uIt]),R(" (using "+C(80-n.userStore.farmingP2WShare)+"CP) ",1),_("div",cIt,[_("div",null,[fIt,hIt,dIt,pIt,tt(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[18]||(t[18]=f=>n.userStore.farmingProfit=f)},null,512),[[Dt,n.userStore.farmingProfit,void 0,{number:!0}]]),vIt,gIt,tt(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[19]||(t[19]=f=>n.userStore.farmingBareProfit=f)},null,512),[[Dt,n.userStore.farmingBareProfit,void 0,{number:!0}]]),mIt])])])):Z("",!0)]),_("div",_It,[yIt,_("div",null,[_("button",{onClick:t[20]||(t[20]=f=>e.workshopsConfigVisible=!0)},"config"),_("button",{onClick:t[21]||(t[21]=f=>e.tradingConfigVisible=!0)},"tradecalc")])]),Z("",!0),_("div",bIt,[wIt,_("div",null,[tt(_("input",{type:"checkbox",id:"vi_hie","onUpdate:modelValue":t[24]||(t[24]=f=>n.userStore.mapHideInactive=f)},null,512),[[Ne,n.userStore.mapHideInactive]]),SIt]),_("div",null,[tt(_("input",{type:"number",class:"w3em",min:"20",max:"50","onUpdate:modelValue":t[25]||(t[25]=f=>n.userStore.mapIconSize=f)},null,512),[[Dt,n.userStore.mapIconSize]]),TIt])])]),kIt,PIt,n.marketStore.apiAlive?(E(),M("span",CIt,"\u2713")):(E(),M("span",EIt,"\u274C")),AIt,_("button",{onClick:t[26]||(t[26]=f=>o.reload())},"reload"),MIt,_("p",null,[xIt,_("button",{onClick:t[27]||(t[27]=f=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[28]||(t[28]=f=>o.fileExport())},"export"),_("button",{onClick:t[29]||(t[29]=f=>o.clearCustomPrices())},"clear")])]),_("div",IIt,[_("table",LIt,[OIt,_("tbody",null,[(E(!0),M(W,null,mt(n.gameStore.itemKeys,f=>(E(),M("tr",{id:"item"+f},[_("td",null,[_("a",{href:this.userStore.itemUrl+f},[ft(c,{ik:f,with_name:!0},null,8,["ik"])],8,DIt),NIt,f in n.marketStore.calculatedPrices?(E(),M("span",FIt,[_("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[f]).map(([h,d])=>o.formatFixed(d,3)+" "+n.gameStore.uloc.item[h]).join(`
`)},"\u2139",8,$It)])):Z("",!0)]),_("td",zIt,[f in n.marketStore.apiPrices?(E(),M("a",{key:0,href:this.marketStore.itemPriceUrl(f)},C(o.formatFixed(n.marketStore.apiPrices[f])),9,BIt)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.gameStore.vendorPrices[f])),1)],64))]),_("td",null,[tt(_("input",{type:"number",class:"price tar","onUpdate:modelValue":h=>n.userStore.customPrices[f]=h},null,8,VIt),[[Dt,n.userStore.customPrices[f],void 0,{number:!0}]])]),_("td",UIt,[tt(_("input",{type:"checkbox",disabled:f in n.gameStore.vendorPrices,"onUpdate:modelValue":h=>n.userStore.keepItems[f]=h},null,8,WIt),[[Ne,n.userStore.keepItems[f]]])]),_("td",jIt,C(o.formatFixed(n.marketStore.prices[f])),1)],8,RIt))),256))])])])])],64)}const HIt=Gt(Lxt,[["render",GIt],["__scopeId","data-v-53f02e39"]]);const XIt={setup(){const e=gt(),t=Wt(),r=wn();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:st},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},YIt=_("div",{id:"toptext"},[_("p",null,"Using 150/10/10 worker")],-1),qIt=_("tr",null,[_("th",null,"Node/Town"),_("th",null,"connect"),_("th",null,"distance"),_("th",null,"M$/day"),_("th",null,"M$/day/CP")],-1),ZIt={colspan:"5"};function KIt(e,t,r,n,i,o){return E(),M(W,null,[YIt,_("table",null,[qIt,(E(!0),M(W,null,mt(n.gameStore.plantzones,(s,a)=>(E(),M(W,null,[_("tr",null,[_("td",ZIt,[_("h3",null,C(a)+" "+C(s.name),1)])]),(E(!0),M(W,null,mt(o.plantzonesNearestCpTownsProfits150[a],l=>(E(),M("tr",null,[_("td",null,C(n.gameStore.nodeName(l.tnk)),1),_("td",null,C(l.cp)+"CP ",1),_("td",null,C(o.formatFixed(l.dist,0)),1),_("td",null,C(o.formatFixed(l.priceDaily,2)),1),_("td",null,C(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const JIt=Gt(XIt,[["render",KIt]]),QIt={setup(){const e=gt(),t=Wt();return{gameStore:e,userStore:t}},components:{ItemIcon:fi},data:()=>({houses:{},houseCrafts:{},towns:new Set([-1]),usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}},computed:{craftableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))e+=t.length;return e},stackableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))for(const r of t)r in this.gameStore.craftInputs&&(e+=1);return e}}},tLt={id:"toptext"},eLt=R(" Region: "),rLt=["value"],nLt=R(" Usage: "),iLt=["value"],oLt={key:0},sLt=["href"],aLt=_("tr",null,[_("th",null,"town"),_("th",null,"node"),_("th",null,"name"),_("th",null,"CP (with chain)"),_("th",null,"usage/level")],-1),lLt={key:0},uLt=["href"],cLt=R(C(" "));function fLt(e,t,r,n,i,o){const s=Ot("ItemIcon");return E(),M("main",null,[_("div",tLt,[eLt,tt(_("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(E(!0),M(W,null,mt(e.towns,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.uloc.town[a]:"any"),9,rLt))),256))],512),[[He,e.filterTown]]),nLt,tt(_("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(E(!0),M(W,null,mt(e.usages,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,iLt))),256))],512),[[He,e.filterUsage]]),e.filterUsage!=-1?(E(),M("details",oLt,[_("summary",null,C(o.craftableCount)+" craftables, "+C(o.stackableCount)+" stackable",1),(E(!0),M(W,null,mt(this.houseCrafts[e.filterUsage].groups,(a,l)=>(E(),M("div",null,[R(" level "+C(l+1)+": ",1),_("table",null,[(E(!0),M(W,null,mt(a,u=>(E(),M("tr",null,[(E(!0),M(W,null,mt(this.gameStore.craftOutputs[u],c=>(E(),M("a",{href:this.userStore.itemUrl+c},[ft(s,{ik:c,with_name:!0},null,8,["ik"])],8,sLt))),256))]))),256))])]))),256))])):Z("",!0)]),_("table",null,[aLt,(E(!0),M(W,null,mt(e.houses,(a,l)=>(E(),M(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(E(),M("tr",lLt,[_("td",null,C(a.affTown),1),_("td",null,C(a.parentNode),1),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+a.key},C(n.gameStore.uloc.char[a.key]),9,uLt)]),_("td",null,C(a.CP)+" ("+C(a.CPfull)+")",1),_("td",null,[(E(!0),M(W,null,mt(a.CraftList,(u,c)=>(E(),M("span",null,[R(C(n.gameStore.uloc.housetype[c]),1),_("sup",null,C(u),1),cLt]))),256))])])):Z("",!0)],64))),256))])])}const hLt=Gt(QIt,[["render",fLt]]);br([Va,jlt,Wa,Ua,ja]);const dLt={setup(){const e=Wt();return{gameStore:gt(),userStore:e}},components:{VChart:Ga},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{townsWithHouses(){const e=[];if(!this.gameStore.ready)return e;for(const t of this.gameStore.townsWithLodging){const r=this.gameStore.tnk2tk(t);r in this.gameStore.uloc.town&&e.push(r)}return e},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>(""+r.name).localeCompare(n.name))}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready)return e;if(!this.bestLookup.success)return console.log("bestlookup failed for tk",this.tk),e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const a=this.bestLookup.indices.indexOf(n);a!==-1&&(o=this.bestLookup.states[a])}const s={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(s),r=s}}}return this.tk==1553&&console.log("townTree",e),e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:st}},d0=e=>($e("data-v-265abb6b"),e=e(),ze(),e),pLt={class:"limit"},vLt={id:"controls"},gLt=d0(()=>_("p",null,[R("data from "),_("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),mLt={id:"fluid"},_Lt={id:"sliders"},yLt={key:0},bLt=d0(()=>_("tr",null,[_("th"),_("th",null,"wanted"),_("th",null,"found"),_("th",null,"cost"),_("th",null,"per CP")],-1)),wLt=d0(()=>_("th",{class:"lodging"},"lodging ",-1)),SLt=["max"],TLt=d0(()=>_("th",{class:"storage"},"storage",-1)),kLt=["max"],PLt={colspan:"3"},CLt=R(" town "),ELt=["value"],ALt={colspan:"2"},MLt=d0(()=>_("div",{style:{clear:"both"}},null,-1)),xLt={key:0,id:"houselist"};function ILt(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M("main",null,[_("div",pLt,[_("div",vLt,[gLt,_("div",mLt,[_("div",_Lt,[this.gameStore.ready?(E(),M("table",yLt,[bLt,_("tr",null,[wLt,_("th",null,[tt(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=a=>e.wantLodging=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,SLt),[[Dt,e.wantLodging,void 0,{number:!0}]]),R(C(e.wantLodging),1)]),_("th",null,C(o.bestLookup?o.bestLookup.lodging:"?"),1),_("th",null,C(o.lodgingCost)+" CP",1),_("th",null,C(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),_("tr",null,[TLt,_("th",null,[tt(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=a=>e.wantStorage=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,kLt),[[Dt,e.wantStorage,void 0,{number:!0}]]),R(C(e.wantStorage),1)]),_("th",null,C(o.bestLookup?o.bestLookup.storage:"?"),1),_("th",null,C(o.storageCost)+" CP",1),_("th",null,C(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),_("tr",null,[_("th",PLt,[CLt,tt(_("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.tk=a)},[(E(!0),M(W,null,mt(this.townsWithHouses,a=>(E(),M("option",{value:a},C(n.gameStore.uloc.town[a]),9,ELt))),256))],512),[[He,e.tk]])]),_("th",ALt,C(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):Z("",!0)])])]),MLt,o.bestLookup?(E(),M("div",xLt,[(E(!0),M(W,null,mt(o.sortedResult,a=>(E(),M(W,null,[a.state>0?(E(),M("p",{key:0,class:Ir({storage:a.state==1,lodging:a.state==2})},C(a.name),3)):Z("",!0)],64))),256))])):Z("",!0),ft(s,{class:"chart",option:o.chartOption},null,8,["option"])])])}const LLt=Gt(dLt,[["render",ILt],["__scopeId","data-v-265abb6b"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OLt=typeof Object.defineProperty=="function"?Object.defineProperty:null,RLt=OLt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DLt=RLt;function NLt(){try{return DLt({},"x",{}),!0}catch{return!1}}var FLt=NLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=Object.defineProperty,zLt=$Lt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jf=Object.prototype,fO=jf.toString,hO=jf.__defineGetter__,dO=jf.__defineSetter__,BLt=jf.__lookupGetter__,VLt=jf.__lookupSetter__;function ULt(e,t,r){var n,i,o,s;if(typeof e!="object"||e===null||fO.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||fO.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(BLt.call(e,t)||VLt.call(e,t)?(n=e.__proto__,e.__proto__=jf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,s="set"in r,i&&(o||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&hO&&hO.call(e,t,r.get),s&&dO&&dO.call(e,t,r.set),e}var WLt=ULt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jLt=FLt,GLt=zLt,HLt=WLt,UT;jLt()?UT=GLt:UT=HLt;var mU=UT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XLt=mU;function YLt(e,t,r){XLt(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var qLt=YLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=qLt,KLt=ZLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JLt=mU;function QLt(e,t,r){JLt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var tOt=QLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eOt=tOt,wr=eOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rOt=Math.floor,nOt=rOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=nOt,Fn=iOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oOt=Fn;function sOt(e){return oOt(e)===e}var aOt=sOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lOt=aOt,Ya=lOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uOt=4294967295>>>0,cOt=uOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fOt=Ya,hOt=cOt;function dOt(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&fOt(e.length)&&e.length>=0&&e.length<=hOt}var pOt=dOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vOt=pOt,gOt=vOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mOt=gOt;function _Ot(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!mOt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var yOt=_Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bOt=yOt,wOt=bOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SOt(e){return typeof e=="number"}var _U=SOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TOt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var kOt=TOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var POt=kOt,COt=POt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EOt=COt,AOt=EOt();function MOt(){return AOt&&typeof Symbol.toStringTag=="symbol"}var xOt=MOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IOt=xOt,ty=IOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LOt=Object.prototype.toString,yU=LOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OOt=yU;function ROt(e){return OOt.call(e)}var DOt=ROt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NOt=Object.prototype.hasOwnProperty;function FOt(e,t){return e==null?!1:NOt.call(e,t)}var $Ot=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zOt=$Ot,ey=zOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BOt=typeof Symbol=="function"?Symbol.toStringTag:"",VOt=BOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UOt=ey,Wh=VOt,ow=yU;function WOt(e){var t,r,n;if(e==null)return ow.call(e);r=e[Wh],t=UOt(e,Wh);try{e[Wh]=void 0}catch{return ow.call(e)}return n=ow.call(e),t?e[Wh]=r:delete e[Wh],n}var jOt=WOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GOt=ty,HOt=DOt,XOt=jOt,WT;GOt()?WT=XOt:WT=HOt;var Ki=WT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YOt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qOt=YOt,oE=qOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZOt=oE,KOt=ZOt.prototype.toString,JOt=KOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QOt=JOt;function tRt(e){try{return QOt.call(e),!0}catch{return!1}}var eRt=tRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rRt=ty,nRt=Ki,iRt=oE,oRt=eRt,sRt=rRt();function aRt(e){return typeof e=="object"?e instanceof iRt?!0:sRt?oRt(e):nRt(e)==="[object Number]":!1}var bU=aRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lRt=_U,uRt=bU;function cRt(e){return lRt(e)||uRt(e)}var fRt=cRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wU=wr,sE=fRt,hRt=_U,dRt=bU;wU(sE,"isPrimitive",hRt);wU(sE,"isObject",dRt);var Gf=sE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SU=wr,aE=wOt,lE=Gf,pRt=aE(lE.isPrimitive),vRt=aE(lE.isObject),uE=aE(lE);SU(uE,"primitives",pRt);SU(uE,"objects",vRt);var gRt=uE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mRt=Number.POSITIVE_INFINITY,Be=mRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Rt=oE,yRt=_Rt.NEGATIVE_INFINITY,Dr=yRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bRt=Be,wRt=Dr,SRt=Ya;function TRt(e){return e<bRt&&e>wRt&&SRt(e)}var TU=TRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kRt=Gf.isPrimitive,PRt=TU;function CRt(e){return kRt(e)&&PRt(e)}var kU=CRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ERt=Gf.isObject,ARt=TU;function MRt(e){return ERt(e)&&ARt(e.valueOf())}var PU=MRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xRt=kU,IRt=PU;function LRt(e){return xRt(e)||IRt(e)}var ORt=LRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CU=wr,cE=ORt,RRt=kU,DRt=PU;CU(cE,"isPrimitive",RRt);CU(cE,"isObject",DRt);var ry=cE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NRt=ry.isPrimitive;function FRt(e){return NRt(e)&&e>=0}var EU=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=ry.isObject;function zRt(e){return $Rt(e)&&e.valueOf()>=0}var AU=zRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BRt=EU,VRt=AU;function URt(e){return BRt(e)||VRt(e)}var WRt=URt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MU=wr,fE=WRt,jRt=EU,GRt=AU;MU(fE,"isPrimitive",jRt);MU(fE,"isObject",GRt);var HRt=fE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XRt(e){return e!==e}var YRt=XRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qRt=YRt,te=qRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZRt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var xU=ZRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KRt=xU;function JRt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(s){return KRt(e,s)}}var QRt=JRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t8t=wr,IU=xU,e8t=QRt;t8t(IU,"factory",e8t);var qa=IU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r8t=Ki,n8t=typeof Uint32Array=="function";function i8t(e){return n8t&&e instanceof Uint32Array||r8t(e)==="[object Uint32Array]"}var o8t=i8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s8t=o8t,a8t=s8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l8t=4294967295,u8t=l8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c8t=typeof Uint32Array=="function"?Uint32Array:null,f8t=c8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h8t=a8t,sw=u8t,pO=f8t;function d8t(){var e,t;if(typeof pO!="function")return!1;try{t=[1,3.14,-3.14,sw+1,sw+2],t=new pO(t),e=h8t(t)&&t[0]===1&&t[1]===3&&t[2]===sw-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var p8t=d8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v8t=p8t,g8t=v8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m8t=typeof Uint32Array=="function"?Uint32Array:void 0,_8t=m8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function y8t(){throw new Error("not implemented")}var b8t=y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w8t=g8t,S8t=_8t,T8t=b8t,jT;w8t()?jT=S8t:jT=T8t;var Hf=jT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k8t=Ki,P8t=typeof Float64Array=="function";function C8t(e){return P8t&&e instanceof Float64Array||k8t(e)==="[object Float64Array]"}var E8t=C8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A8t=E8t,M8t=A8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x8t=typeof Float64Array=="function"?Float64Array:null,I8t=x8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L8t=M8t,vO=I8t;function O8t(){var e,t;if(typeof vO!="function")return!1;try{t=new vO([1,3.14,-3.14,NaN]),e=L8t(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var R8t=O8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D8t=R8t,N8t=D8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F8t=typeof Float64Array=="function"?Float64Array:void 0,$8t=F8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function z8t(){throw new Error("not implemented")}var B8t=z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V8t=N8t,U8t=$8t,W8t=B8t,GT;V8t()?GT=U8t:GT=W8t;var Xf=GT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j8t=Ki,G8t=typeof Uint8Array=="function";function H8t(e){return G8t&&e instanceof Uint8Array||j8t(e)==="[object Uint8Array]"}var X8t=H8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y8t=X8t,q8t=Y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z8t=255,K8t=Z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J8t=typeof Uint8Array=="function"?Uint8Array:null,Q8t=J8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tDt=q8t,aw=K8t,gO=Q8t;function eDt(){var e,t;if(typeof gO!="function")return!1;try{t=[1,3.14,-3.14,aw+1,aw+2],t=new gO(t),e=tDt(t)&&t[0]===1&&t[1]===3&&t[2]===aw-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var rDt=eDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nDt=rDt,iDt=nDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oDt=typeof Uint8Array=="function"?Uint8Array:void 0,sDt=oDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aDt(){throw new Error("not implemented")}var lDt=aDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uDt=iDt,cDt=sDt,fDt=lDt,HT;uDt()?HT=cDt:HT=fDt;var hDt=HT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dDt=Ki,pDt=typeof Uint16Array=="function";function vDt(e){return pDt&&e instanceof Uint16Array||dDt(e)==="[object Uint16Array]"}var gDt=vDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mDt=gDt,_Dt=mDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yDt=65535,bDt=yDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wDt=typeof Uint16Array=="function"?Uint16Array:null,SDt=wDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TDt=_Dt,lw=bDt,mO=SDt;function kDt(){var e,t;if(typeof mO!="function")return!1;try{t=[1,3.14,-3.14,lw+1,lw+2],t=new mO(t),e=TDt(t)&&t[0]===1&&t[1]===3&&t[2]===lw-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var PDt=kDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CDt=PDt,EDt=CDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ADt=typeof Uint16Array=="function"?Uint16Array:void 0,MDt=ADt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xDt(){throw new Error("not implemented")}var IDt=xDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LDt=EDt,ODt=MDt,RDt=IDt,XT;LDt()?XT=ODt:XT=RDt;var DDt=XT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NDt=hDt,FDt=DDt,$Dt={uint16:FDt,uint8:NDt},zDt=$Dt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _O=zDt,LU;function BDt(){var e,t;return e=new _O.uint16(1),e[0]=4660,t=new _O.uint8(e.buffer),t[0]===52}LU=BDt();var VDt=LU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UDt=VDt,Yf=UDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WDt=Yf,YT;WDt===!0?YT=1:YT=0;var jDt=YT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GDt=Hf,HDt=Xf,XDt=jDt,OU=new HDt(1),YDt=new GDt(OU.buffer);function qDt(e){return OU[0]=e,YDt[XDt]}var ZDt=qDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KDt=ZDt,vi=KDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JDt=Yf,qT;JDt===!0?qT=1:qT=0;var QDt=qT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t9t=Hf,e9t=Xf,r9t=QDt,ZT=new e9t(1),n9t=new t9t(ZT.buffer);function i9t(e,t){return ZT[0]=e,n9t[r9t]=t>>>0,ZT[0]}var o9t=i9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s9t=o9t,p0=s9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var a9t=1023,zu=a9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l9t=.34657359027997264,u9t=l9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function c9t(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var f9t=c9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var h9t=te,uw=vi,tg=p0,yO=Be,d9t=Dr,p9t=zu,v9t=u9t,g9t=f9t,m9t=709.782712893384,cw=.6931471803691238,fw=19082149292705877e-26,bO=1.4426950408889634,_9t=38.816242111356935,y9t=1.0397207708399179;function b9t(e){var t,r,n,i,o,s,a,l,u,c,f,h;if(e===yO||h9t(e))return e;if(e===d9t)return-1;if(e===0)return e;if(e<0?(r=!0,a=-e):(r=!1,a=e),a>=_9t){if(r)return-1;if(a>=m9t)return yO}if(o=uw(a)|0,a>v9t)a<y9t?r?(n=e+cw,i=-fw,h=-1):(n=e-cw,i=fw,h=1):(r?h=bO*e-.5:h=bO*e+.5,h|=0,c=h,n=e-c*cw,i=c*fw),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,s=1+l*g9t(l),c=3-s*t,f=l*((s-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(a=1-(f-e),n=uw(a)+(h<<20)|0,a=tg(a,n),a-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=tg(c,n),a=c-(f-e)):(n=p9t-h<<20|0,c=tg(c,n),a=e-(f+c),a+=1),n=uw(a)+(h<<20)|0,tg(a,n)))}var w9t=b9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S9t=w9t,qf=S9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T9t(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var k9t=T9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var P9t=te,wO=vi,SO=p0,C9t=Be,E9t=Dr,TO=zu,A9t=k9t,hw=.6931471803691238,dw=19082149292705877e-26,M9t=.41421356237309503,x9t=-.2928932188134525,I9t=1862645149230957e-24,L9t=5551115123125783e-32,O9t=9007199254740992,R9t=.6666666666666666;function D9t(e){var t,r,n,i,o,s,a,l,u,c;if(e<-1||P9t(e))return NaN;if(e===-1)return E9t;if(e===C9t||e===0)return e;if(e<0?n=-e:n=e,c=1,n<M9t){if(n<I9t)return n<L9t?e:e-e*e*.5;e>x9t&&(c=0,i=e,r=1)}return c!==0&&(n<O9t?(u=1+e,r=wO(u),c=(r>>20)-TO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=wO(u),c=(r>>20)-TO,o=0),r&=1048575,r<434334?u=SO(u,r|1072693248):(c+=1,u=SO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*dw,c*hw+o):(l=t*(1-R9t*i),c*hw-(l-(c*dw+o)-i)):(s=i/(2+i),a=s*s,l=a*A9t(a),c===0?i-(t-s*(t+l)):c*hw-(t-(s*(t+l)+(c*dw+o))-i))}var N9t=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F9t=N9t,$n=F9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $9t=Math.sqrt,z9t=$9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B9t=z9t,or=B9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V9t=.7853981633974483,RU=V9t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U9t(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var W9t=U9t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function j9t(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var G9t=j9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var H9t=te,X9t=or,kO=RU,Y9t=W9t,q9t=G9t,Z9t=6123233995736766e-32;function K9t(e){var t,r,n,i,o;if(H9t(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*q9t(r),r=X9t(r+r),o=kO-r,r=r*i-Z9t,o-=r,o+=kO;else{if(n<1e-8)return e;r=n*n,o=r*Y9t(r),o=n*o+n}return t?-o:o}var J9t=K9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q9t=J9t,hE=Q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function t7t(e){return Math.abs(e)}var e7t=t7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r7t=e7t,ve=r7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n7t=Math.ceil,i7t=n7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o7t=i7t,DU=o7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s7t=Fn,a7t=DU;function l7t(e){return e<0?a7t(e):s7t(e)}var u7t=l7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c7t=u7t,dE=c7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f7t=1023,h7t=f7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d7t=-1023,p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v7t=-1074,g7t=v7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m7t=Be,_7t=Dr;function y7t(e){return e===m7t||e===_7t}var b7t=y7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w7t=b7t,Zf=w7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S7t=2147483648>>>0,T7t=S7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k7t=2147483647>>>0,ny=k7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P7t=Yf,NU,KT,JT;P7t===!0?(KT=1,JT=0):(KT=0,JT=1);NU={HIGH:KT,LOW:JT};var C7t=NU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E7t=Hf,A7t=Xf,FU=C7t,$U=new A7t(1),PO=new E7t($U.buffer),M7t=FU.HIGH,x7t=FU.LOW;function I7t(e,t,r,n){return $U[0]=e,t[n]=PO[M7t],t[n+r]=PO[x7t],t}var zU=I7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L7t=zU;function O7t(e){return L7t(e,[0>>>0,0>>>0],1,0)}var R7t=O7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D7t=wr,BU=R7t,N7t=zU;D7t(BU,"assign",N7t);var pE=BU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F7t=Yf,VU,QT,ek;F7t===!0?(QT=1,ek=0):(QT=0,ek=1);VU={HIGH:QT,LOW:ek};var $7t=VU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7t=Hf,B7t=Xf,UU=$7t,WU=new B7t(1),CO=new z7t(WU.buffer),V7t=UU.HIGH,U7t=UU.LOW;function W7t(e,t){return CO[V7t]=e,CO[U7t]=t,WU[0]}var j7t=W7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G7t=j7t,vE=G7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H7t=T7t,X7t=ny,Y7t=pE,q7t=vi,Z7t=vE,pw=[0,0];function K7t(e,t){var r,n;return Y7t.assign(e,pw,1,0),r=pw[0],r&=X7t,n=q7t(t),n&=H7t,r|=n,Z7t(r,pw[1])}var J7t=K7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q7t=J7t,gE=Q7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tNt=22250738585072014e-324,Bu=tNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eNt=Bu,rNt=Zf,nNt=te,iNt=ve,oNt=4503599627370496;function sNt(e,t,r,n){return nNt(e)||rNt(e)?(t[n]=e,t[n+r]=0,t):e!==0&&iNt(e)<eNt?(t[n]=e*oNt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var jU=sNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aNt=jU;function lNt(e){return aNt(e,[0,0],1,0)}var uNt=lNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cNt=wr,GU=uNt,fNt=jU;cNt(GU,"assign",fNt);var hNt=GU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dNt=2146435072,pNt=dNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vNt=vi,gNt=pNt,mNt=zu;function _Nt(e){var t=vNt(e);return t=(t&gNt)>>>20,t-mNt|0}var yNt=_Nt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bNt=yNt,wNt=bNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SNt=Be,TNt=Dr,kNt=zu,PNt=h7t,CNt=p7t,ENt=g7t,ANt=te,MNt=Zf,xNt=gE,INt=hNt.assign,LNt=wNt,ONt=pE,RNt=vE,DNt=2220446049250313e-31,NNt=2148532223>>>0,vw=[0,0],gw=[0,0];function FNt(e,t){var r,n;return t===0||e===0||ANt(e)||MNt(e)?e:(INt(e,vw,1,0),e=vw[0],t+=vw[1],t+=LNt(e),t<ENt?xNt(0,e):t>PNt?e<0?TNt:SNt:(t<=CNt?(t+=52,n=DNt):n=1,ONt.assign(e,gw,1,0),r=gw[0],r&=NNt,r|=t+kNt<<20,n*RNt(r,gw[1])))}var $Nt=FNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zNt=$Nt,Kf=zNt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BNt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var VNt=BNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var UNt=Kf,WNt=VNt;function jNt(e,t,r){var n,i,o,s;return n=e-t,i=n*n,o=n-i*WNt(i),s=1-(t-n*o/(2-o)-e),UNt(s,r)}var GNt=jNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var HNt=te,EO=dE,XNt=Dr,AO=Be,YNt=GNt,qNt=.6931471803691238,ZNt=19082149292705877e-26,MO=1.4426950408889634,KNt=709.782712893384,JNt=-745.1332191019411,HU=1/(1<<28),QNt=-HU;function tFt(e){var t,r,n;return HNt(e)||e===AO?e:e===XNt?0:e>KNt?AO:e<JNt?0:e>QNt&&e<HU?1+e:(e<0?n=EO(MO*e-.5):n=EO(MO*e+.5),t=e-n*qNt,r=n*ZNt,YNt(t,r,n))}var eFt=tFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rFt=eFt,Ge=rFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nFt=Ya;function iFt(e){return nFt(e/2)}var oFt=iFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sFt=oFt,aFt=sFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xO=aFt;function lFt(e){return e>0?xO(e-1):xO(e+1)}var uFt=lFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cFt=uFt,mE=cFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fFt=Yf,rk;fFt===!0?rk=0:rk=1;var hFt=rk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dFt=Hf,pFt=Xf,vFt=hFt,nk=new pFt(1),gFt=new dFt(nk.buffer);function mFt(e,t){return nk[0]=e,gFt[vFt]=t>>>0,nk[0]}var _Ft=mFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yFt=_Ft,v0=yFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bFt(e){return e|0}var wFt=bFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SFt=wFt,XU=SFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var IO=mE,TFt=gE,kFt=Dr,eg=Be;function PFt(e,t){return t===kFt?eg:t===eg?0:t>0?IO(t)?e:0:IO(t)?TFt(eg,e):eg}var CFt=PFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var EFt=ny,AFt=vi,MFt=1072693247,rg=1e300,ng=1e-300;function xFt(e,t){var r,n;return n=AFt(e),r=n&EFt,r<=MFt?t<0?rg*rg:ng*ng:t>0?rg*rg:ng*ng}var IFt=xFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LFt=ve,LO=Be;function OFt(e,t){return e===-1?(e-e)/(e-e):e===1?1:LFt(e)<1==(t===LO)?0:LO}var RFt=OFt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DFt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var NFt=DFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var FFt=vi,ig=v0,OO=p0,$Ft=zu,zFt=NFt,BFt=1048575,RO=1048576,VFt=1072693248,UFt=536870912,WFt=524288,jFt=20,GFt=9007199254740992,HFt=.9617966939259756,XFt=.9617967009544373,YFt=-7028461650952758e-24,qFt=[1,1.5],ZFt=[0,.5849624872207642],KFt=[0,1350039202129749e-23];function JFt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x;return S=0,r<RO&&(t*=GFt,S-=53,r=FFt(t)),S+=(r>>jFt)-$Ft|0,k=r&BFt|0,r=k|VFt|0,k<=235662?x=0:k<767610?x=1:(x=0,S+=1,r-=RO),t=OO(t,r),c=qFt[x],w=t-c,T=1/(t+c),i=w*T,s=ig(i,0),n=(r>>1|UFt)+WFt,n+=x<<18,l=OO(0,n),u=t-(l-c),a=T*(w-s*l-s*u),o=i*i,b=o*o*zFt(o),b+=a*(s+i),o=s*s,l=3+o+b,l=ig(l,0),u=b-(l-3-o),w=s*l,T=a*l+u*i,h=w+T,h=ig(h,0),d=T-(h-w),p=XFt*h,v=YFt*h+d*HFt+KFt[x],f=ZFt[x],y=S,m=p+v+f+y,m=ig(m,0),g=v-(m-y-f-p),e[0]=m,e[1]=g,e}var QFt=JFt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function t$t(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var e$t=t$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var r$t=v0,n$t=e$t,i$t=1.4426950408889634,o$t=1.4426950216293335,s$t=19259629911266175e-24;function a$t(e,t){var r,n,i,o,s,a;return i=t-1,o=i*i*n$t(i),s=o$t*i,a=i*s$t-o*i$t,n=s+a,n=r$t(n,0),r=a-(n-s),e[0]=n,e[1]=r,e}var l$t=a$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u$t=.6931471805599453,c$t=u$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f$t=1048575,h$t=f$t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d$t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var p$t=d$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var v$t=vi,DO=p0,g$t=v0,m$t=XU,_$t=Kf,y$t=c$t,NO=zu,FO=ny,$O=h$t,b$t=p$t,zO=1048576,w$t=1071644672,jh=20,S$t=.6931471824645996,T$t=-1904654299957768e-24;function k$t(e,t,r){var n,i,o,s,a,l,u,c,f,h,d;return h=e&FO|0,d=(h>>jh)-NO|0,f=0,h>w$t&&(f=e+(zO>>d+1)>>>0,d=((f&FO)>>jh)-NO|0,n=(f&~($O>>d))>>>0,o=DO(0,n),f=(f&$O|zO)>>jh-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=g$t(o,0),a=o*S$t,l=(r-(o-t))*y$t+o*T$t,c=a+l,u=l-(c-a),o=c*c,i=c-o*b$t(o),s=c*i/(i-2)-(u+c*u),c=1-(s-c),e=v$t(c),e=m$t(e),e+=f<<jh>>>0,e>>jh<=0?c=_$t(c,f):c=DO(c,e),c}var P$t=k$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BO=te,VO=mE,UO=Zf,C$t=Ya,WO=or,E$t=ve,mw=pE,A$t=v0,jO=XU,M$t=Dr,x$t=Be,_w=ny,I$t=CFt,L$t=IFt,O$t=RFt,R$t=QFt,D$t=l$t,N$t=P$t,F$t=1072693247,$$t=1105199104,z$t=1139802112,GO=1083179008,B$t=1072693248,V$t=1083231232,U$t=3230714880>>>0,HO=31,Qs=1e300,ta=1e-300,W$t=8008566259537294e-32,Qo=[0,0],XO=[0,0];function YU(e,t){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m,g;if(BO(e)||BO(t))return NaN;if(mw.assign(t,Qo,1,0),a=Qo[0],l=Qo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return WO(e);if(t===-.5)return 1/WO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(UO(t))return O$t(e,t)}if(mw.assign(e,Qo,1,0),o=Qo[0],s=Qo[1],s===0){if(o===0)return I$t(e,t);if(e===1)return 1;if(e===-1&&VO(t))return-1;if(UO(e))return e===M$t?YU(-0,-t):t<0?0:x$t}if(e<0&&C$t(t)===!1)return(e-e)/(e-e);if(i=E$t(e),r=o&_w|0,n=a&_w|0,u=o>>>HO|0,c=a>>>HO|0,u&&VO(t)?u=-1:u=1,n>$$t){if(n>z$t)return L$t(e,t);if(r<F$t)return c===1?u*Qs*Qs:u*ta*ta;if(r>B$t)return c===0?u*Qs*Qs:u*ta*ta;p=D$t(XO,i)}else p=R$t(XO,i,r);if(f=A$t(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,mw.assign(v,Qo,1,0),m=jO(Qo[0]),g=jO(Qo[1]),m>=GO){if((m-GO|g)!==0||d+W$t>v-h)return u*Qs*Qs}else if((m&_w)>=V$t&&((m-U$t|g)!==0||d<=v-h))return u*ta*ta;return v=N$t(m,h,d),u*v}var j$t=YU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G$t=j$t,sr=G$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H$t=2.718281828459045,Jf=H$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X$t=2220446049250313e-31,Ds=X$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y$t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var q$t=Y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YO=te,Z$t=$n,K$t=or,J$t=ve,Q$t=Ge,yw=sr,tzt=Jf,bw=Ds,ww=q$t,Sw=10.900511;function ezt(e,t){var r,n,i,o,s,a,l;return YO(e)||YO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<bw?(s=l/e,s/=t,s):l===e&&t<bw?1/t:l===t&&e<bw?1/e:(e<t&&(a=t,t=e,e=a),n=e+Sw-.5,i=t+Sw-.5,o=l+Sw-.5,s=ww(e)*(ww(t)/ww(l)),r=e-.5-t,J$t(t*r)<o*100&&e>100?s*=Q$t(r*Z$t(-t/o)):s*=yw(n/o,r),o>1e10?s*=yw(n/o*(i/o),t):s*=yw(n*i/(o*o),t),s*=K$t(tzt/i),s))}var rzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nzt=rzt,qU=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var izt=Be;function ozt(e){return e===0&&1/e===izt}var szt=ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var azt=szt,lzt=azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qO=lzt,Tw=te,uzt=Dr,og=Be;function czt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Tw(e)||Tw(t)?NaN:e===og||t===og?og:e===t&&e===0?qO(e)?e:t:e>t?e:t;for(n=uzt,o=0;o<r;o++){if(i=arguments[o],Tw(i)||i===og)return i;(i>n||i===n&&i===0&&qO(i))&&(n=i)}return n}var fzt=czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hzt=fzt,Vu=hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dzt=Dr;function pzt(e){return e===0&&1/e===dzt}var vzt=pzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gzt=vzt,ZU=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZO=ZU,kw=te,sg=Dr,mzt=Be;function _zt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return kw(e)||kw(t)?NaN:e===sg||t===sg?sg:e===t&&e===0?ZO(e)?e:t:e<t?e:t;for(n=mzt,o=0;o<r;o++){if(i=arguments[o],kw(i)||i===sg)return i;(i<n||i===n&&i===0&&ZO(i))&&(n=i)}return n}var yzt=_zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bzt=yzt,Za=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wzt=17976931348623157e292,Qf=wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Szt=2147483647,Tzt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kzt=1.5707963267948966,_E=kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pzt=3.141592653589793,Ka=Pzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Czt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var Ezt=Czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Azt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var Mzt=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xzt=Ezt,Izt=Mzt;function Lzt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*xzt(o),n+=i*i*Izt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var Ozt=Lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rzt=Ozt,KU=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var KO=-.16666666666666632,Dzt=.00833333333332249,Nzt=-.0001984126982985795,Fzt=27557313707070068e-22,$zt=-25050760253406863e-24,zzt=158969099521155e-24;function Bzt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=Dzt+o*(Nzt+o*Fzt)+o*i*($zt+o*zzt),n=o*e,t===0?e+n*(KO+o*r):e-(o*(.5*t-n*r)-t-n*KO)}var Vzt=Bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uzt=Vzt,JU=Uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wzt=Yf,ik;Wzt===!0?ik=0:ik=1;var jzt=ik;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gzt=Hf,Hzt=Xf,Xzt=jzt,QU=new Hzt(1),Yzt=new Gzt(QU.buffer);function qzt(e){return QU[0]=e,Yzt[Xzt]}var Zzt=qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kzt=Zzt,Jzt=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qzt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var tBt=Qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eBt=tBt,rBt=eBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nBt=rBt;function iBt(e){return nBt(0,e)}var oBt=iBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sBt=oBt,aBt=sBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var lBt=Fn,ag=Kf,iy=aBt,tW=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],uBt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Pw=16777216,Cw=5960464477539063e-23,lg=iy(20),JO=iy(20),ug=iy(20),Pr=iy(20);function eW(e,t,r,n,i,o,s,a,l){var u,c,f,h,d,p,v,m,g;for(h=o,g=n[r],m=r,d=0;m>0;d++)c=Cw*g|0,Pr[d]=g-Pw*c|0,g=n[m-1]+c,m-=1;if(g=ag(g,i),g-=8*lBt(g*.125),v=g|0,g-=v,f=0,i>0?(d=Pr[r-1]>>24-i,v+=d,Pr[r-1]-=d<<24-i,f=Pr[r-1]>>23-i):i===0?f=Pr[r-1]>>23:g>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)m=Pr[d],u===0?m!==0&&(u=1,Pr[d]=16777216-m):Pr[d]=16777215-m;if(i>0)switch(i){case 1:Pr[r-1]&=8388607;break;case 2:Pr[r-1]&=4194303;break}f===2&&(g=1-g,u!==0&&(g-=ag(1,i)))}if(g===0){for(m=0,d=r-1;d>=o;d--)m|=Pr[d];if(m===0){for(p=1;Pr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[a+d]=tW[s+d],c=0,m=0;m<=a;m++)c+=e[m]*l[a+(d-m)];n[d]=c}return r+=p,eW(e,t,r,n,i,o,s,a,l)}}if(g===0)for(r-=1,i-=24;Pr[r]===0;)r-=1,i-=24;else g=ag(g,-i),g>=Pw?(c=Cw*g|0,Pr[r]=g-Pw*c|0,r+=1,i+=24,Pr[r]=c):Pr[r]=g|0;for(c=ag(1,i),d=r;d>=0;d--)n[d]=c*Pr[d],c*=Cw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=uBt[p]*n[d+p];ug[r-d]=c}for(c=0,d=r;d>=0;d--)c+=ug[d];for(f===0?t[0]=c:t[0]=-c,c=ug[0]-c,d=1;d<=r;d++)c+=ug[d];return f===0?t[1]=c:t[1]=-c,v&7}function cBt(e,t,r,n){var i,o,s,a,l,u,c,f,h;for(o=4,a=n-1,s=(r-3)/24|0,s<0&&(s=0),u=r-24*(s+1),f=s-a,h=a+o,c=0;c<=h;c++)f<0?lg[c]=0:lg[c]=tW[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=a;f++)i+=e[f]*lg[a+(c-f)];JO[c]=i}return l=o,eW(e,t,l,JO,u,o,s,a,lg)}var fBt=cBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hBt=Math.round,dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pBt=dBt,oy=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var vBt=oy,QO=vi,gBt=.6366197723675814,mBt=1.5707963267341256,_Bt=6077100506506192e-26,yBt=6077100506303966e-26,bBt=20222662487959506e-37,wBt=20222662487111665e-37,SBt=84784276603689e-45,tR=2047;function TBt(e,t,r){var n,i,o,s,a,l,u;return i=vBt(e*gBt),s=e-i*mBt,a=i*_Bt,u=t>>20|0,r[0]=s-a,n=QO(r[0]),l=u-(n>>20&tR),l>16&&(o=s,a=i*yBt,s=o-a,a=i*bBt-(o-s-a),r[0]=s-a,n=QO(r[0]),l=u-(n>>20&tR),l>49&&(o=s,a=i*wBt,s=o-a,a=i*SBt-(o-s-a),r[0]=s-a)),r[1]=s-r[0]-a,i}var kBt=TBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var PBt=vi,CBt=Jzt,EBt=vE,ABt=fBt,cg=kBt,MBt=0,xBt=16777216,ea=1.5707963267341256,Hl=6077100506506192e-26,fg=2*Hl,hg=3*Hl,dg=4*Hl,IBt=2147483647,LBt=2146435072,OBt=1048575,RBt=598523,DBt=1072243195,NBt=1073928572,FBt=1074752122,$Bt=1074977148,zBt=1075183036,BBt=1075388923,VBt=1075594811,UBt=1094263291,Gh=[0,0,0],Hh=[0,0];function WBt(e,t){var r,n,i,o,s,a,l,u;if(i=PBt(e),o=i&IBt|0,o<=DBt)return t[0]=e,t[1]=0,0;if(o<=FBt)return(o&OBt)===RBt?cg(e,o,t):o<=NBt?e>0?(u=e-ea,t[0]=u-Hl,t[1]=u-t[0]-Hl,1):(u=e+ea,t[0]=u+Hl,t[1]=u-t[0]+Hl,-1):e>0?(u=e-2*ea,t[0]=u-fg,t[1]=u-t[0]-fg,2):(u=e+2*ea,t[0]=u+fg,t[1]=u-t[0]+fg,-2);if(o<=VBt)return o<=zBt?o===$Bt?cg(e,o,t):e>0?(u=e-3*ea,t[0]=u-hg,t[1]=u-t[0]-hg,3):(u=e+3*ea,t[0]=u+hg,t[1]=u-t[0]+hg,-3):o===BBt?cg(e,o,t):e>0?(u=e-4*ea,t[0]=u-dg,t[1]=u-t[0]-dg,4):(u=e+4*ea,t[0]=u+dg,t[1]=u-t[0]+dg,-4);if(o<UBt)return cg(e,o,t);if(o>=LBt)return t[0]=NaN,t[1]=NaN,0;for(r=CBt(e),n=(o>>20)-1046,u=EBt(o-(n<<20|0),r),a=0;a<2;a++)Gh[a]=u|0,u=(u-Gh[a])*xBt;for(Gh[2]=u,s=3;Gh[s-1]===MBt;)s-=1;return l=ABt(Gh,Hh,n,s),e<0?(t[0]=-Hh[0],t[1]=-Hh[1],-l):(t[0]=Hh[0],t[1]=Hh[1],l)}var jBt=WBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GBt=jBt,rW=GBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var HBt=vi,eR=KU,Ew=JU,XBt=rW,YBt=2147483647,qBt=2146435072,ZBt=1072243195,KBt=1045430272,ts=[0,0];function JBt(e){var t,r;if(t=HBt(e),t&=YBt,t<=ZBt)return t<KBt?e:Ew(e,0);if(t>=qBt)return NaN;switch(r=XBt(e,ts),r&3){case 0:return Ew(ts[0],ts[1]);case 1:return eR(ts[0],ts[1]);case 2:return-Ew(ts[0],ts[1]);default:return-eR(ts[0],ts[1])}}var QBt=JBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tVt=QBt,g0=tVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eVt=2.5066282746310007,sy=eVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rVt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var nVt=rVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var iVt=sy,rR=sr,oVt=Ge,sVt=nVt,aVt=143.01608;function lVt(e){var t,r,n;return t=1/e,t=1+t*sVt(t),r=oVt(e),e>aVt?(n=rR(e,.5*e-.25),r=n*(n/r)):r=rR(e,e-.5)/r,iVt*r*t}var uVt=lVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cVt=.5772156649015329,fVt=cVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var hVt=fVt;function dVt(e,t){return t/((1+hVt*e)*e)}var pVt=dVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vVt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var gVt=vVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var mVt=te,_Vt=Ya,yVt=ZU,nR=ve,bVt=Fn,wVt=g0,iR=Be,oR=Dr,sR=Ka,aR=uVt,lR=pVt,SVt=gVt;function TVt(e){var t,r,n,i;if(_Vt(e)&&e<0||e===oR||mVt(e))return NaN;if(e===0)return yVt(e)?oR:iR;if(e>171.61447887182297)return iR;if(e<-170.5674972726612)return 0;if(r=nR(e),r>33)return e>=0?aR(e):(n=bVt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*wVt(sR*i),t*sR/(nR(i)*aR(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return lR(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return lR(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*SVt(e))}var kVt=TVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PVt=kVt,Uo=PVt;const CVt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EVt=te,AVt=Ya,MVt=Uo,xVt=Be,IVt=CVt,LVt=170;function OVt(e){return EVt(e)?NaN:AVt(e)?e<0?NaN:e<=LVt?IVt[e]:xVt:MVt(e+1)}var RVt=OVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DVt=RVt,nW=DVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NVt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var FVt=NVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var $Vt=FVt,zVt=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BVt=zVt,VVt=BVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UVt=10.900511,m0=UVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uR=VVt,WVt=Uo,cR=$n,fR=ve,hR=Ge,dR=sr,jVt=Ds,GVt=Jf,HVt=m0,pR=170,XVt=4269068009004705e289;function iW(e,t){var r,n,i;return e<jVt?t>pR?(n=iW(t,pR-t),n*=e,n*=XVt,1/n):1/(e*WVt(e+t)):(i=e+HVt-.5,e+t===e?fR(t)<10?r=hR((.5-e)*cR(t/i)):r=1:(fR(t)<10?r=hR((.5-e)*cR(t/i)):r=dR(i/(i+t),e-.5),r*=uR(e)/uR(e+t)),r*=dR(GVt/(i+t),t),r)}var YVt=iW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qVt=ve,vR=Fn,gR=Uo,mR=nW,ZVt=YVt,_R=170;function KVt(e,t){var r,n,i;if(e<=0||e+t<=0)return gR(e)/gR(e+t);if(n=vR(t),n===t){if(i=vR(e),i===e&&e<=_R&&e+t<=_R)return mR(i-1)/mR(n+i-1);if(qVt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return ZVt(e,t)}var JVt=KVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QVt=JVt,yE=QVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tUt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var eUt=tUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rUt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var nUt=rUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var yR=vi,iUt=p0,oUt=te,sUt=zu,aUt=Dr,lUt=eUt,uUt=nUt,pg=.6931471803691238,vg=19082149292705877e-26,cUt=0x40000000000000,fUt=.3333333333333333,bR=1048575,hUt=2146435072,dUt=1048576,pUt=1072693248;function vUt(e){var t,r,n,i,o,s,a,l,u,c,f,h;return e===0?aUt:oUt(e)||e<0?NaN:(r=yR(e),o=0,r<dUt&&(o-=54,e*=cUt,r=yR(e)),r>=hUt?e+e:(o+=(r>>20)-sUt|0,r&=bR,l=r+614244&1048576|0,e=iUt(e,r|l^pUt),o+=l>>20|0,a=e-1,(bR&2+r)<3?a===0?o===0?0:o*pg+o*vg:(s=a*a*(.5-fUt*a),o===0?a-s:o*pg-(s-o*vg-a)):(c=a/(2+a),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*lUt(f),n=h*uUt(f),l|=u,s=n+i,l>0?(t=.5*a*a,o===0?a-(t-c*(t+s)):o*pg-(t-(c*(t+s)+o*vg)-a)):o===0?a-c*(a-s):o*pg-(c*(a-s)-o*vg-a))))}var gUt=vUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mUt=gUt,ke=mUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var _Ut=vi,Aw=KU,wR=JU,yUt=rW,es=[0,0],bUt=2147483647,wUt=1072243195,SUt=1044381696,TUt=2146435072;function kUt(e){var t,r;if(t=_Ut(e),t&=bUt,t<=wUt)return t<SUt?1:Aw(e,0);if(t>=TUt)return NaN;switch(r=yUt(e,es),r&3){case 0:return Aw(es[0],es[1]);case 1:return-wR(es[0],es[1]);case 2:return-Aw(es[0],es[1]);default:return wR(es[0],es[1])}}var PUt=kUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CUt=PUt,bE=CUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EUt=te,AUt=Zf,SR=bE,Mw=g0,MUt=ve,Xh=gE,Yh=Ka;function xUt(e){var t,r;return EUt(e)?NaN:AUt(e)?NaN:(r=e%2,t=MUt(r),t===0||t===1?Xh(0,r):t<.25?Mw(Yh*r):t<.75?(t=.5-t,Xh(SR(Yh*t),r)):t<1.25?(r=Xh(1,r)-r,Mw(Yh*r)):t<1.75?(t-=1.5,-Xh(SR(Yh*t),r)):(r-=Xh(2,r),Mw(Yh*r)))}var IUt=xUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LUt=IUt,OUt=LUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RUt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var DUt=RUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NUt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var FUt=NUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ut(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var zUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BUt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var VUt=BUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UUt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var WUt=UUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jUt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var GUt=jUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HUt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var XUt=HUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YUt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var qUt=YUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZUt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var KUt=ZUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JUt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var QUt=JUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var tWt=te,eWt=Zf,rWt=ve,mc=ke,nWt=dE,iWt=OUt,oWt=Ka,xw=Be,sWt=DUt,aWt=FUt,lWt=zUt,uWt=VUt,cWt=WUt,fWt=GUt,hWt=XUt,dWt=qUt,pWt=KUt,vWt=QUt,gWt=.07721566490153287,mWt=.3224670334241136,_Wt=1,yWt=-.07721566490153287,bWt=.48383612272381005,wWt=-.1475877229945939,SWt=.06462494023913339,TWt=-.07721566490153287,kWt=1,PWt=.4189385332046727,gg=1.4616321449683622,CWt=4503599627370496,EWt=0x400000000000000,AWt=8470329472543003e-37,TR=1.4616321449683622,MWt=-.12148629053584961,xWt=-3638676997039505e-33;function IWt(e){var t,r,n,i,o,s,a,l,u,c,f,h,d;if(tWt(e)||eWt(e))return e;if(e===0)return xw;if(e<0?(t=!0,e=-e):t=!1,e<AWt)return-mc(e);if(t){if(e>=CWt||(u=iWt(e),u===0))return xw;r=mc(oWt/rWt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-mc(e),e>=gg-1+.27?(f=1-e,n=0):e>=gg-1-.27?(f=e-(TR-1),n=1):(f=e,n=2)):(d=0,e>=gg+.27?(f=2-e,n=0):e>=gg-.27?(f=e-TR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,s=gWt+h*sWt(h),o=h*(mWt+h*aWt(h)),a=f*s+o,d+=a-.5*f;break;case 1:h=f*f,c=h*f,s=bWt+c*cWt(c),o=wWt+c*fWt(c),i=SWt+c*hWt(c),a=h*s-(xWt-c*(o+f*i)),d+=MWt+a;break;case 2:s=f*(TWt+f*dWt(f)),o=kWt+f*pWt(f),d+=-.5*f+s/o;break}else if(e<8)switch(n=nWt(e),f=e-n,a=f*(yWt+f*uWt(f)),l=_Wt+f*lWt(f),d=.5*f+a/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=mc(h)}else e<EWt?(u=mc(e),h=1/e,f=h*h,c=PWt+h*vWt(f),d=(e-.5)*(u-1)+c):d=e*(mc(e)-1);return t&&(d=r-d),d}var LWt=IWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OWt=LWt,th=OWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RWt=14901161193847656e-24,DWt=RWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NWt=709.782712893384,Uu=NWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var FWt=Ge;function $Wt(e,t){var r,n,i,o;if(i=FWt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var zWt=$Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BWt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var VWt=BWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UWt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var WWt=UWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jWt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var GWt=jWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HWt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var XWt=HWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YWt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var qWt=YWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZWt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var KWt=ZWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JWt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var QWt=JWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tjt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var ejt=tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var rjt=te,kR=Ge,njt=v0,ijt=Be,ojt=Dr,sjt=VWt,ajt=WWt,ljt=GWt,ujt=XWt,cjt=qWt,fjt=KWt,hjt=QWt,djt=ejt,mg=1e-300,pjt=13877787807814457e-33,PR=.8450629115104675,vjt=.12837916709551256,gjt=1,mjt=-.0023621185607526594,_jt=1,yjt=-.009864944034847148,bjt=1,wjt=-.0098649429247001,Sjt=1;function Tjt(e){var t,r,n,i,o,s,a,l;if(rjt(e))return NaN;if(e===ijt)return 0;if(e===ojt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<pjt?1-e:(n=e*e,i=vjt+n*sjt(n),o=gjt+n*ajt(n),s=i/o,e<.25?1-(e+e*s):(i=e*s,i+=e-.5,.5-i));if(r<1.25)return o=r-1,a=mjt+o*ljt(o),l=_jt+o*ujt(o),t?1+PR+a/l:1-PR-a/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=yjt+o*cjt(o),o=bjt+o*fjt(o);else{if(e<-6)return 2-mg;i=wjt+o*hjt(o),o=Sjt+o*djt(o)}return n=njt(r,0),i=kR(-(n*n)-.5625)*kR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-mg:mg*mg}var kjt=Tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pjt=kjt,oW=Pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Cjt=oW,CR=or,Ejt=Ge,Ajt=Ka;function Mjt(e,t){var r,n,i,o,s;if(o=Cjt(CR(t)),o!==0&&e>1){for(n=Ejt(-t)/CR(Ajt*t),n*=t,r=.5,n/=r,i=n,s=2;s<e;++s)n/=s-r,n*=t,i+=n;o+=i}return o}var xjt=Mjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ijt=-708.3964185322641,eh=Ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _c=Ge,_g=sr,Ljt=ke,ER=Uu,AR=eh;function Ojt(e,t){var r,n;return n=e*Ljt(t),t>=1?n<ER&&-t>AR?r=_g(t,e)*_c(-t):e>=1?r=_g(t/_c(t/e),e):r=_c(n-t):n>AR?r=_g(t,e)*_c(-t):t/e<ER?r=_g(t/_c(t/e),e):r=_c(n-t),r}var Rjt=Ojt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Djt=6.283185307179586,sW=Djt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Njt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var Fjt=Njt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $jt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var zjt=$jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bjt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var Vjt=Bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ujt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var Wjt=Ujt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jjt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var Gjt=jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hjt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var Xjt=Hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yjt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var qjt=Yjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zjt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var Kjt=Zjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jjt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var Qjt=Jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tGt=qa,eGt=oW,Iw=or,rGt=Ge,nGt=ke,iGt=sW,oGt=Fjt,sGt=zjt,aGt=Vjt,lGt=Wjt,uGt=Gjt,cGt=Xjt,fGt=qjt,hGt=Kjt,dGt=Qjt,yi=[0,0,0,0,0,0,0,0,0,0];function pGt(e,t){var r,n,i,o,s;return n=(t-e)/e,i=-nGt(1+n)+n,o=e*i,s=Iw(2*i),t<e&&(s=-s),yi[0]=oGt(s),yi[1]=sGt(s),yi[2]=aGt(s),yi[3]=lGt(s),yi[4]=uGt(s),yi[5]=cGt(s),yi[6]=fGt(s),yi[7]=hGt(s),yi[8]=dGt(s),yi[9]=-.0005967612901927463,r=tGt(yi,1/e),r*=rGt(-o)/Iw(iGt*e),t<e&&(r=-r),r+=eGt(Iw(o))/2,r}var vGt=pGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gGt=eval,mGt=gGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Gt=mGt;function yGt(){var e;try{_Gt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var bGt=yGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wGt=bGt,aW=wGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yg=ve,SGt=Ds,TGt=1e6;function kGt(e,t){var r,n,i,o,s,a;if(a={},arguments.length>1&&(a=t),n=a.tolerance||SGt,o=a.maxTerms||TGt,s=a.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(s+=i,yg(n*s)>=yg(i)||--o===0)break}else do i=e(),s+=i;while(yg(n*s)<yg(i)&&--o);return s}var PGt=kGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MR=ve,CGt=Ds,EGt=1e6;function AGt(e,t){var r,n,i,o,s;s={},arguments.length>1&&(s=t),r=s.tolerance||CGt,i=s.maxTerms||EGt,o=s.initialValue||0;do n=e(),o+=n;while(MR(r*o)<MR(n)&&--i);return o}var MGt=AGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xGt=aW,IGt=PGt,LGt=MGt,ok;xGt()?ok=IGt:ok=LGt;var wE=ok;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function OGt(e,t){var r=1,n=e,i=t;return o;function o(){var s=r;return n+=1,r*=i/n,s}}var RGt=OGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DGt=wE,NGt=RGt;function FGt(e,t,r){var n,i;return r=r||0,i=NGt(e,t),n=DGt(i,{initialValue:r}),n}var $Gt=FGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zGt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var BGt=zGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VGt=BGt,UGt=VGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WGt=UGt,ay=WGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var jGt=ay,GGt=th,HGt=Uo,XGt=$n,YGt=or,qGt=ve,ra=Ge,qh=sr,Lw=Vu,Ow=Za,xR=ke,bg=Uu,Zh=eh,Rw=m0,ZGt=Jf;function KGt(e,t){var r,n,i,o,s,a,l;return i=e+Rw-.5,l=(t-e-Rw+.5)/i,e<1?t<=Zh?ra(e*xR(t)-t-GGt(e)):qh(t,e)*ra(-t)/HGt(e):(qGt(l*l*e)<=100&&e>150?(r=e*(XGt(l)-l)+t*(.5-Rw)/i,r=ra(r)):(o=e*xR(t/i),s=e-t,Ow(o,s)<=Zh||Lw(o,s)>=bg?(n=s/e,Ow(o,s)/2>Zh&&Lw(o,s)/2<bg?(a=qh(t/i,e/2)*ra(s/2),r=a*a):Ow(o,s)/4>Zh&&Lw(o,s)/4<bg&&t>e?(a=qh(t/i,e/4)*ra(s/4),r=a*a,r*=r):n>Zh&&n<bg?r=qh(t*ra(n)/i,e):r=ra(o+s)):r=qh(t/i,e)*ra(s)),r*=YGt(i/ZGt)/jGt(e),r)}var JGt=KGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IR=te,LR=ve,QGt=qf,tHt=ke,eHt=sr,rHt=dE;function nHt(e,t){var r;if(IR(e)||IR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((LR(t*(e-1))<.5||LR(t)<.2)&&(r=tHt(e)*t,r<.5))return QGt(r)}else if(rHt(t)!==t)return NaN;return eHt(e,t)-1}var iHt=nHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oHt=iHt,sHt=oHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aHt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var lHt=aHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uHt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var cHt=uHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fHt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var hHt=fHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Dw=ke,dHt=Ds,pHt=lHt,vHt=cHt,gHt=hHt,mHt=.15896368026733398,_Ht=.5281534194946289,yHt=.45201730728149414;function bHt(e,t,r){var n,i,o,s;if(e<dHt)return-Dw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=Dw(e);while(e>=3);r=e-2}return o=r*(e+1),s=pHt(r),i+=o*mHt+o*s,i}return e<1&&(i+=-Dw(e),r=t,t=e,e+=1),e<=1.5?(o=vHt(t),n=t*r,i+=n*_Ht+n*o,i):(o=r*t,s=gHt(-r),i+=o*yHt+o*s,i)}var wHt=bHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var OR=Uo,RR=qf,SHt=$n,THt=te,DR=wHt;function kHt(e){return THt(e)?NaN:e<0?e<-.5?OR(1+e)-1:RR(-SHt(e)+DR(e+2,e+1,e)):e<2?RR(DR(e+1,e,e-1)):OR(1+e)-1}var PHt=kHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CHt=PHt,EHt=CHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function AHt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,s;function s(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var MHt=AHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xHt=sHt,IHt=wE,LHt=EHt,OHt=MHt;function RHt(e,t,r){var n,i,o,s,a;return i=LHt(e),o=(i+1)/e,s=xHt(t,e),i-=s,i/=e,a=OHt(e,t),s+=1,n=r?o:0,i=-s*IHt(a,{initialValue:(n-i)/s}),r&&(i=-i),[i,o]}var DHt=RHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NHt=11754943508222875e-54,ly=NHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O1=ve,Po=ly,FHt=Ds,$Ht=1e6;function zHt(e,t,r){var n,i,o,s,a,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),s=u[1],o=u[0],s===0&&(s=Po),a=s,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=Po),a=u[1]+u[0]/a,a===0&&(a=Po),l=1/l,i=a*l,s*=i);while(O1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=Po),a=u[1]+u[0]/a,a===0&&(a=Po),l=1/l,i=a*l,s*=i);while(u&&O1(i-1)>t&&--r);return o/s}function BHt(e,t,r){var n,i,o,s,a,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=Po),s=o,a=0,n===!0)do l=e.next().value,l&&(a=l[1]+l[0]*a,a===0&&(a=Po),s=l[1]+l[0]/s,s===0&&(s=Po),a=1/a,i=s*a,o*=i);while(l&&O1(i-1)>t&&--r);else do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Po),s=l[1]+l[0]/s,s===0&&(s=Po),a=1/a,i=s*a,o*=i);while(l&&O1(i-1)>t&&--r);return o}function VHt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||$Ht,i=n.tolerance||FHt,n.keep?BHt(e,i,r):zHt(e,i,r)}var UHt=VHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lW=ve,WHt=Ds,of=ly,jHt=1e6;function GHt(e,t,r){var n,i,o,s,a,l;l=e(),a=l[1],i=l[0],a===0&&(a=of),o=a,s=0;do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=of),o=l[1]+l[0]/o,o===0&&(o=of),s=1/s,n=o*s,a*=n);while(l&&lW(n-1)>t&&--r);return i/a}function HHt(e,t,r){var n,i,o,s,a;a=e(),s=a[1],s===0&&(s=of),i=s,o=0;do a=e(),a&&(o=a[1]+a[0]*o,o===0&&(o=of),i=a[1]+a[0]/i,i===0&&(i=of),o=1/o,n=i*o,s*=n);while(a&&lW(n-1)>t&&--r);return s}function XHt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||WHt,r=n.maxIter||jHt,n.keep?HHt(e,i,r):GHt(e,i,r)}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qHt=aW,ZHt=UHt,KHt=YHt,sk;qHt()?sk=ZHt:sk=KHt;var uW=sk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function JHt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var QHt=JHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tXt=uW,eXt=QHt;function rXt(e,t){var r=eXt(e,t);return 1/(t-e+1+tXt(r))}var nXt=rXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iXt=th,oXt=Fn,Kh=Uo,NR=ve,sXt=Ge,FR=sr,bi=ke,aXt=DWt,$R=Qf,lXt=sy,zR=Uu,uXt=Be,cXt=zWt,fXt=xjt,BR=Rjt,hXt=vGt,Nw=$Gt,VR=JGt,dXt=DHt,UR=nXt,pXt=170;function cW(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=pXt&&!o)return f&&t*4<e?(h=t*bi(e)-e,h+=bi(UR(t,e))):!f&&t>4*e?(h=t*bi(e)-e,a=0,h+=bi(Nw(t,e,a)/t)):(h=cW(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=bi(h)-t+(t-.5)*bi(t),h+=bi(lXt)):(h=t*bi(e)-e,a=0,h+=bi(Nw(t,e,a)/t)):h=bi(h)+iXt(t)),h>zR?uXt:sXt(h);switch(c=t<30&&t<=e+1&&e<zR,c?(g=oXt(t),d=g===t,l=d?!1:NR(g-t)===.5):d=l=!1,d&&e>.6?(f=!f,s=0):l&&e>.2?(f=!f,s=1):e<aXt&&t>1?s=6:e<.5?-.4/bi(e)<t?s=2:s=3:e<1.1?e*.75<t?s=2:s=3:(u=!1,o&&t>20&&(p=NR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?s=5:e-1/(3*e)<t?s=2:(s=4,f=!f)),s){case 0:h=cXt(t,e),o===!1&&(h*=Kh(t));break;case 1:h=fXt(t,e),o===!1&&(h*=Kh(t));break;case 2:h=o?VR(t,e):BR(t,e),h!==0&&(a=0,i=!1,f&&(a=o?1:Kh(t),o||h>=1||$R*h>a?(a/=h,o||t<1||$R/t>a?(a*=-t,i=!0):a=0):a=0)),h*=Nw(t,e,a)/t,i&&(f=!1,h=-h);break;case 3:f=!f,m=dXt(t,e,f),h=m[0],y=m[1],f=!1,o&&(h/=y);break;case 4:h=o?VR(t,e):BR(t,e),h!==0&&(h*=UR(t,e));break;case 5:h=hXt(t,e),e>=t&&(f=!f);break;case 6:h=o?FR(e,t)/Kh(t+1):FR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Kh(t),h=v-h),h}var vXt=cW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gXt=vXt,fW=gXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yc=Ge,wg=sr,mXt=ke,WR=Uu,jR=eh;function _Xt(e,t){var r,n;return n=e*mXt(t),t>=1?n<WR&&-t>jR?r=wg(t,e)*yc(-t):e>=1?r=wg(t/yc(t/e),e):r=yc(n-t):n>jR?r=wg(t,e)*yc(-t):t/e<WR?r=wg(t/yc(t/e),e):r=yc(n-t),r}var yXt=_Xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bXt=ay,wXt=th,SXt=Uo,TXt=$n,kXt=or,PXt=ve,na=Ge,Jh=sr,Fw=Vu,$w=Za,GR=ke,Sg=Uu,Qh=eh,zw=m0,CXt=Jf;function EXt(e,t){var r,n,i,o,s,a,l;return i=e+zw-.5,l=(t-e-zw+.5)/i,e<1?t<=Qh?na(e*GR(t)-t-wXt(e)):Jh(t,e)*na(-t)/SXt(e):(PXt(l*l*e)<=100&&e>150?(r=e*(TXt(l)-l)+t*(.5-zw)/i,r=na(r)):(o=e*GR(t/i),s=e-t,$w(o,s)<=Qh||Fw(o,s)>=Sg?(n=s/e,$w(o,s)/2>Qh&&Fw(o,s)/2<Sg?(a=Jh(t/i,e/2)*na(s/2),r=a*a):$w(o,s)/4>Qh&&Fw(o,s)/4<Sg&&t>e?(a=Jh(t/i,e/4)*na(s/4),r=a*a,r*=r):n>Qh&&n<Sg?r=Jh(t*na(n)/i,e):r=na(o+s)):r=Jh(t/i,e)*na(s)),r*=kXt(i/CXt)/bXt(e),r)}var AXt=EXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var MXt=yE,HR=nW,xXt=fW,IXt=$n,Tg=ve,XR=sr,LXt=ke,OXt=Bu,YR=Ds,RXt=yXt,DXt=AXt,ia=new Array(30);function NXt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x;if(h=t-1,k=e+h/2,n<.35?m=IXt(-n):m=LXt(r),x=-k*m,y=DXt(t,x),y<=OXt)return i;for(s?(a=y/MXt(e,t),a/=XR(k,t)):a=RXt(t,x)/XR(k,t),a*=o,ia[0]=1,b=xXt(x,t,!0,!0),b/=y,c=i+a*b,u=1,d=m/2,d*=d,p=1,g=4*k*k,f=t,T=1;T<ia.length;++T){for(u+=2,ia[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,ia[T]+=v*ia[T-w]/HR(l),l+=2;if(ia[T]/=T,ia[T]+=h/HR(u),b=(f*(f+1)*b+(x+f+1)*p)/g,p*=d,f+=2,S=a*ia[T]*b,c+=S,S>1){if(Tg(S)<Tg(YR*c))break}else if(Tg(S/YR)<Tg(c))break}return c}var FXt=NXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function $Xt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var zXt=$Xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bw=ve,qR=Vu,BXt=Be;function VXt(e,t){var r,n,i;if(r=arguments.length,r===0)return BXt;if(r===2)return qR(Bw(e),Bw(t));for(n=[],i=0;i<r;i++)n.push(Bw(arguments[i]));return qR.apply(null,n)}var UXt=VXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WXt=UXt,jXt=WXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vw=ve,ZR=Za,GXt=Be;function HXt(e,t){var r,n,i;if(r=arguments.length,r===0)return GXt;if(r===2)return ZR(Vw(e),Vw(t));for(n=[],i=0;i<r;i++)n.push(Vw(arguments[i]));return ZR.apply(null,n)}var XXt=HXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YXt=XXt,qXt=YXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Uw=ay,ZXt=jXt,KXt=qXt,KR=qf,oa=$n,JR=or,kg=ve,fo=Ge,ho=sr,JXt=Za,jn=ke,po=Uu,bc=eh,Ww=m0,QXt=Jf;function tYt(e,t,r,n,i){var o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(!i)return ho(r,e)*ho(n,t);if(g=e+t,l=e+Ww-.5,u=t+Ww-.5,c=g+Ww-.5,o=Uw(g),o/=Uw(e)*Uw(t),o*=JR(u/QXt),o*=JR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,KXt(f,h)<.2)if(f*h>0||JXt(e,t)<1)kg(f)<.1?o*=fo(e*oa(f)):o*=ho(r*c/l,e),kg(h)<.1?o*=fo(t*oa(h)):o*=ho(n*c/u,t);else if(ZXt(f,h)<.5)s=e<t,a=t/e,s&&a*h<.1||!s&&f/a>.1?(d=KR(a*oa(h)),d=f+d+d*f,d=e*oa(d),o*=fo(d)):(d=KR(oa(f)/a),d=h+d+d*h,d=t*oa(d),o*=fo(d));else if(kg(f)<kg(h))if(y=e*oa(f)+t*jn(n*c/u),y<=bc||y>=po){if(y+=jn(o),y>=po)return NaN;o=fo(y)}else o*=fo(y);else if(y=t*oa(h)+e*jn(r*c/l),y<=bc||y>=po){if(y+=jn(o),y>=po)return NaN;o=fo(y)}else o*=fo(y);else if(v=r*c/l,m=n*c/u,f=e*jn(v),h=t*jn(m),f>=po||f<=bc||h>=po||h<=bc)if(e<t)if(p=ho(m,t/e),d=e*(jn(v)+jn(p)),d<po&&d>bc)o*=ho(p*v,e);else{if(h+=f+jn(o),h>=po)return NaN;o=fo(h)}else if(p=ho(v,e/t),d=(jn(p)+jn(m))*t,d<po&&d>bc)o*=ho(p*m,t);else{if(h+=f+jn(o),h>=po)return NaN;o=fo(h)}else o*=ho(v,e)*ho(m,t);return o}var SE=tYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var eYt=uW,rYt=SE,nYt={keep:!0,maxIter:1e3};function iYt(e,t,r,n){var i=0;return o;function o(){var s,a,l;return a=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,s=e+2*i-1,a/=s*s,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[a,l]}}function oYt(e,t,r,n,i,o){var s,a,l;return s=rYt(e,t,r,n,i),o&&(o[1]=s),s===0?s:(l=iYt(e,t,r,n),a=eYt(l,nYt),s/a)}var sYt=oYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jw=Ya,QR=te,aYt=mE,lYt=oy;function hW(e,t){var r,n;if(QR(e)||QR(t))return NaN;if(!jw(e)||!jw(t))return NaN;if(t<0)return 0;if(e<0)return r=hW(-e+t-1,t),aYt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return jw(r)?r:lYt(r)}var uYt=hW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cYt=uYt,fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var t8=fYt,Ml=Fn,td=sr,hYt=Bu;function dYt(e,t,r,n){var i,o,s,a,l;if(o=td(r,e),o>hYt)for(a=o,l=Ml(e-1);l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;else if(s=Ml(e*r),s<=t+1&&(s=Ml(t+2)),o=td(r,s)*td(n,e-s),o*=t8(Ml(e),Ml(s)),o===0)for(l=s-1;l>t;l--)o+=td(r,l)*td(n,e-l),o*=t8(Ml(e),Ml(l));else{for(a=o,i=o,l=s-1;l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;for(a=i,l=s+1;l<=e;l++)a*=(e-l+1)*r/(l*n),o+=a}return o}var pYt=dYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vYt=SE;function gYt(e,t,r,n,i,o,s){var a,l,u,c;if(a=vYt(e,t,r,n,o),s&&(s[1]=a),a/=e,a===0)return a;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return a*=u,a}var mYt=gYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Gw=ay,_Yt=wE,yYt=$n,bYt=or,Hw=Ge,Pg=sr,ed=ke,wYt=Bu,e8=Uu,r8=eh,Xw=m0,SYt=Jf,n8={maxTerms:100};function TYt(e,t,r,n){var i=1-t,o=1;return s;function s(){var a=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,a}}function kYt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p;return i?(d=e+t,l=e+Xw-.5,u=t+Xw-.5,c=d+Xw-.5,a=Gw(d)/(Gw(e)*Gw(t)),f=ed(c/u)*(t-.5),h=ed(r*c/l)*e,f>r8&&f<e8&&h>r8&&h<e8?(e*t<u*10?a*=Hw((t-.5)*yYt(e/u)):a*=Pg(c/u,t-.5),a*=Pg(r*c/l,e),a*=bYt(l/SYt),o&&(o[1]=a*Pg(s,t))):(a=ed(a)+f+h+(ed(l)-1)/2,o&&(o[1]=Hw(a+t*ed(s))),a=Hw(a))):a=Pg(r,e),a<wYt?n:(p=TYt(e,t,r,a),n8.initialValue=n,_Yt(p,n8))}var PYt=kYt,CYt=te,EYt=qf,Cg=Fn,i8=$n,o8=hE,Gn=qU,Yw=or,AYt=Ge,rd=sr,MYt=Vu,s8=Za,Eg=Qf,a8=Bu,xYt=Tzt,IYt=_E,dW=Ka,sa=FXt,qw=zXt,LYt=SE,l8=sYt,OYt=pYt,nd=mYt,vo=PYt,RYt=1/dW;function DYt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,y,b;if(b=1-e,p=a,v=a+s,o[v]=-1,CYt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?Eg/2:a8*2,i?(o[p]=n?1:Gn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?Eg/2:a8*2,i?o[p]=0:o[p]=n?1:Gn(t,r),o):t===.5&&r===.5?(o[v]=RYt*Yw(b*e),y=o8(Yw(i?b:e)),y/=IYt,n||(y*=dW),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r===1?t===1?(o[p]=i?b:e,o[v]=1,o):(o[v]=t*rd(e,t-1),b<.5?y=i?-EYt(t*i8(-b)):AYt(t*i8(-b)):y=i?-(rd(e,t)-1):rd(e,t),n||(y/=t),o[p]=y,o):(s8(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),MYt(t,r)<=1?t>=s8(.2,r)||rd(e,t)<=.9?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(n?u=1:u=qw(t+r,t,20),c=nd(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-sa(t+20,r,e,b,c,u,n)):c=sa(t+20,r,e,b,c,u,n))):r<=1||e<.1&&rd(r*e,t)<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):t>=15?i?(c=-(n?1:Gn(t,r)),i=!1,c=-sa(t,r,e,b,c,1,n)):c=sa(t,r,e,b,0,1,n):(n?u=1:u=qw(t+r,t,20),c=nd(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-sa(t+20,r,e,b,c,u,n)):c=sa(t+20,r,e,b,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*b-r,l<0&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r<40?Cg(t)===t&&Cg(r)===r&&t<xYt-100?(m=t-1,g=r+m,c=OYt(g,m,e,b),n||(c*=Gn(t,r))):r*e<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):t>15?(g=Cg(r),g===r&&(g-=1),f=r-g,n?u=1:u=qw(t+f,f,g),c=nd(f,t,b,e,g,n),c=sa(t,f,e,b,c,1,n),c/=u):n?(g=Cg(r),f=r-g,f<=0&&(g-=1,f+=1),c=nd(f,t,b,e,g,n),c+=nd(t,f,e,b,20,n),i&&(c-=1),c=sa(t+20,f,e,b,c,1,n),i&&(c=-c,i=!1)):c=l8(t,r,e,b,n,o):c=l8(t,r,e,b,n,o)),o[v]<0&&(o[v]=LYt(t,r,e,b,!0)),h=b*e,o[v]!==0&&(Eg*h<o[v]?o[v]=Eg/2:o[v]/=h),o[p]=i?(n?1:Gn(t,r))-c:c,o))}var pW=DYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NYt=pW;function FYt(e,t,r,n,i){return NYt(e,t,r,n,i,[0,0],1,0)}var $Yt=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zYt=wr,vW=$Yt,BYt=pW;zYt(vW,"assign",BYt);var gW=vW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VYt=gW.assign;function UYt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,VYt(e,t,r,n,i,o,1,0),o[0]}var WYt=UYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jYt=WYt,TE=jYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GYt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var HYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XYt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var YYt=XYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qYt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var ZYt=qYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KYt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var JYt=KYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QYt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var tqt=QYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var eqt=te,u8=or,c8=ke,rqt=Be,nqt=Dr,iqt=HYt,oqt=YYt,sqt=ZYt,aqt=JYt,lqt=tqt,uqt=.08913147449493408,cqt=2.249481201171875,fqt=.807220458984375,hqt=.9399557113647461,dqt=.9836282730102539;function pqt(e){var t,r,n,i,o;return eqt(e)?NaN:e===0?rqt:e===2?nqt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=iqt(e),t*(i*uqt+i*o)):n>=.25?(i=u8(-2*c8(n)),n-=.25,o=oqt(n),t*(i/(cqt+o))):(n=u8(-c8(n)),n<3?(r=n-1.125,o=sqt(r),t*(fqt*n+o*n)):n<6?(r=n-3,o=aqt(r),t*(hqt*n+o*n)):(r=n-6,o=lqt(r),t*(dqt*n+o*n))))}var vqt=pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gqt=vqt,_0=gqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var mqt=te,f8=hE,_qt=or,h8=RU,yqt=6123233995736766e-32;function bqt(e){var t;return mqt(e)?NaN:e<-1||e>1?NaN:e>.5?2*f8(_qt(.5-.5*e)):(t=h8-f8(e),t+=yqt,t+=h8,t)}var wqt=bqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sqt=wqt,Tqt=Sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kqt=1.4142135623730951,kE=kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pqt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var Cqt=Pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eqt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var Aqt=Eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mqt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var xqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Iqt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var Lqt=Iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oqt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var Rqt=Oqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dqt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var Nqt=Dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fqt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var $qt=Fqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zqt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var Bqt=zqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vqt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var Uqt=Vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Wqt=yE,jqt=qa,Gqt=or,Hqt=Ka,Xqt=Cqt,Yqt=Aqt,qqt=xqt,Zqt=Lqt,Kqt=Rqt,Jqt=Nqt,Qqt=$qt,tZt=Bqt,eZt=Uqt,rZt=0,go=[1,0,0,0,0,0,0,0,0,0];function nZt(e,t){var r,n;return n=Wqt(e/2,.5)*Gqt(e*Hqt)*(t-.5),r=1/e,go[1]=Xqt(r),go[2]=Yqt(r),go[3]=qqt(r),go[4]=Zqt(r),go[5]=Kqt(r),go[6]=Jqt(r),go[7]=Qqt(r),go[8]=tZt(r),go[9]=eZt(r),rZt+n*jqt(go,n*n)}var iZt=nZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oZt=yE,sZt=qa,d8=or,aZt=sr,lZt=Ka,aa=[0,0,0,0,0,0,0];function uZt(e,t){var r,n,i,o,s,a,l,u;return u=oZt(e/2,.5)*d8(e*lZt)*t,o=e+2,s=e+4,a=e+6,aa[0]=1,aa[1]=-(e+1)/(2*o),o*=e+2,aa[2]=-e*(e+1)*(e+3)/(8*o*s),o*=e+2,aa[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*s*a),o*=e+2,s*=e+4,aa[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*s*a*(e+8)),o*=e+2,aa[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*s*a*(e+8)*(e+10)),o*=e+2,s*=e+4,a*=e+6,aa[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*s*a*(e+8)*(e+10)*(e+12)),l=d8(e),i=aZt(l*u,1/e),n=i*i,r=sZt(aa,n),r*=l,r/=i,-r}var cZt=uZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var p8=_0,fZt=qf,v8=or,hZt=sr,dZt=_E,g8=kE;function pZt(e,t){var r,n,i,o,s,a,l;return e>1e20?-p8(2*t)*g8:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*v8(r*dZt)*e,l=hZt(o*2*t,2/e),l>.05+r?(a=-p8(2*t)*g8,l=a*a,e<5&&(i+=.3*(e-4.5)*(a+.6)),i+=(((.05*o*a-5)*a-7)*a-2)*a+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*a,l=fZt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,s=v8(e*l),-s)}var vZt=pZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var m8=_0,_8=Fn,Zw=Kf,y8=oy,gZt=Tqt,Ag=or,mZt=ve,b8=bE,_Zt=sr,yZt=g0,w8=kE,S8=Ka,T8=iZt,Mg=cZt,Kw=vZt,k8=268435456,bZt=1/3,wZt=2*53/3,SZt=.8549879733383485;function TZt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(a=0,t>r?(u=r,r=t,t=u,s=!0):s=!1,_8(e)===e&&e<20)switch(i=Zw(1,wZt),_8(e)){case 1:t===.5?a=0:a=-b8(S8*t)/yZt(S8*t);break;case 2:a=(2*t-1)/Ag(2*t*r);break;case 4:l=4*t*r,o=Ag(l),v=4*b8(gZt(o)/3)/o,m=Ag(v-4),a=t-.5<0?-m:m;break;case 6:if(t<1e-150)return(s?-1:1)*Kw(e,t);g=4*(t-t*t),y=_Zt(g,bZt),p=6*(1+SZt*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*g*d-270*f+2187)/(5*(4*g*h-216*p-243));while(mZt((p-c)/p)>i);p=Ag(p-e),a=t-.5<0?-p:p;break;default:e>k8?a=m8(2*t)*w8:e<3?(n=.2742-e*.0242143,t>n?a=T8(e,t):a=Mg(e,t)):(n=Zw(1,y8(e/-.654)),t>n?a=Kw(e,t):a=Mg(e,t))}else e>k8?a=-m8(2*t)*w8:e<3?(n=.2742-e*.0242143,t>n?a=T8(e,t):a=Mg(e,t)):(n=Zw(1,y8(e/-.654)),t>n?a=Kw(e,t):a=Mg(e,t));return s?-a:a}var kZt=TZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var PZt=kZt;function CZt(e,t,r){var n,i,o,s;return i=t/2,o=1-i,n=e*2,s=PZt(n,i,o),r&&(r.value=s*s/(n+s*s)),n/(n+s*s)}var EZt=CZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xg=qa,AZt=_0,P8=or,MZt=Ge,rs=kE,je=[0,0,0,0,0,0,0],id=[0,0,0,0];function xZt(e,t,r){var n,i,o,s,a,l,u;return n=AZt(2*r),n/=-P8(e/2),id[0]=n,l=t-e,s=l*l,a=s*l,je[0]=-l*rs/2,je[1]=(1-2*l)/8,je[2]=-(l*rs/48),je[3]=-1/192,je[4]=-l*rs/3840,je[5]=0,je[6]=0,id[1]=xg(je,n),je[0]=l*rs*(3*l-2)/12,je[1]=(20*s-12*l+1)/128,je[2]=l*rs*(20*l-1)/960,je[3]=(16*s+30*l-15)/4608,je[4]=l*rs*(21*l+32)/53760,je[5]=(-(32*s)+63)/368640,je[6]=-l*rs*(120*l+17)/25804480,id[2]=xg(je,n),je[0]=l*rs*(-75*s+80*l-16)/480,je[1]=(-1080*a+868*s-90*l-45)/9216,je[2]=l*rs*(-1190*s+84*l+373)/53760,je[3]=(-2240*a-2508*s+2100*l-165)/368640,je[4]=0,je[5]=0,je[6]=0,id[3]=xg(je,n),o=xg(id,1/e),i=o*o,u=-MZt(-i/2),i===0?.5:(1+o*P8((1+u)/i))/2}var IZt=xZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var C8=ke,LZt=Qf,Ig=LZt/4;function OZt(e,t){return r;function r(n){var i,o,s;return s=1-n,s===0?[-Ig,-Ig]:n===0?[-Ig,-Ig]:(o=C8(n)+t*C8(s)+e,i=1/n-t/s,[o,i])}}var mW=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RZt=te;function DZt(e){return e===0||RZt(e)?e:e<0?-1:1}var NZt=DZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FZt=NZt,_W=FZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var E8=_W,Lg=ve,$Zt=Kf,Jw=Qf;function zZt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v;p=0,s=0,c=t,u=$Zt(1,1-i),h=Jw,a=Jw,l=Jw,f=o;do{if(s=p,l=a,a=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(s===0&&(c===r?t=n:t=r,s=e(t),h=t-c),E8(s)*E8(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,Lg(h*2)>Lg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&Lg(c*u)<Lg(h));return c}var yW=zZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){return e===0?-1:-1+e*(-5+e*5)}var VZt=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UZt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var WZt=UZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jZt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var GZt=jZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HZt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var XZt=HZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YZt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var qZt=YZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZZt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var KZt=ZZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JZt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var QZt=JZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tKt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var eKt=tKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rKt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var nKt=rKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iKt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var oKt=iKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sKt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var aKt=sKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lKt(e){return e===0?1:1+e*(-13+e*13)}var uKt=lKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cKt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var fKt=cKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wc=qa,hKt=_0,dKt=ve,pKt=Ge,A8=ke,vKt=or,gKt=g0,mKt=bE,_Kt=mW,yKt=yW,bKt=VZt,wKt=WZt,SKt=GZt,TKt=XZt,kKt=qZt,PKt=KZt,CKt=QZt,EKt=eKt,AKt=nKt,MKt=oKt,xKt=aKt,IKt=uKt,LKt=fKt,oe=[0,0,0,0,0,0],od=[0,0,0,0];function OKt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S;return a=hKt(2*e)/-vKt(t/2),w=gKt(r),b=mKt(r),od[0]=a,g=w*w,y=b*b,v=w*b,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,oe[0]=(2*g-1)/(3*v),oe[1]=-bKt(g)/(36*p),oe[2]=wKt(g)/(1620*d),oe[3]=SKt(g)/(6480*h),oe[4]=TKt(g)/(90720*f),oe[5]=0,od[1]=wc(oe,a),oe[0]=-kKt(g)/(405*d),oe[1]=PKt(g)/(2592*h),oe[2]=-CKt(g)/(204120*f),oe[3]=-EKt(g)/(2099520*c),oe[4]=0,oe[5]=0,od[2]=wc(oe,a),oe[0]=AKt(g)/(102060*f),oe[1]=-MKt(g)/(20995200*c),oe[2]=xKt(g)/(36741600*u),oe[3]=0,oe[4]=0,oe[5]=0,od[3]=wc(oe,a),l=wc(od,1/t),o=b/w,o*=o,m=-(l*l)/(2*g)+A8(g)+y*A8(y)/g,dKt(l)<.7?(oe[0]=g,oe[1]=v,oe[2]=(1-2*g)/3,oe[3]=IKt(g)/(36*v),oe[4]=LKt(g)/(270*p),oe[5]=0,S=wc(oe,l)):(T=pKt(m),oe[0]=T,oe[1]=o,oe[2]=0,oe[3]=3*o*(3*o+1)/6,oe[4]=4*o*(4*o+1)*(4*o+2)/24,oe[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=wc(oe,T),(S-g)*l<0&&(S=1-S)),l<0?(i=0,n=g):(i=g,n=1),(S<i||S>n)&&(S=(i+n)/2),s=_Kt(-m,o),S=yKt(s,S,i,n,32,100),S}var RKt=OKt,R1={exports:{}},ak={exports:{}},Bp=1e3,Vp=Bp*60,Up=Vp*60,Wp=Up*24,DKt=Wp*365.25,NKt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return FKt(e);if(r==="number"&&isNaN(e)===!1)return t.long?zKt(e):$Kt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function FKt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*DKt;case"days":case"day":case"d":return r*Wp;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Up;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vp;case"seconds":case"second":case"secs":case"sec":case"s":return r*Bp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $Kt(e){return e>=Wp?Math.round(e/Wp)+"d":e>=Up?Math.round(e/Up)+"h":e>=Vp?Math.round(e/Vp)+"m":e>=Bp?Math.round(e/Bp)+"s":e+"ms"}function zKt(e){return Og(e,Wp,"day")||Og(e,Up,"hour")||Og(e,Vp,"minute")||Og(e,Bp,"second")||e+" ms"}function Og(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=s,t.enable=o,t.enabled=a,t.humanize=NKt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var m=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,b){if(y==="%%")return y;m++;var w=t.formatters[b];if(typeof w=="function"){var T=p[m];y=w.call(f,T),p.splice(m,1),m--}return y}),t.formatArgs.call(f,p);var g=c.log||t.log||console.log.bind(console);g.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){t.enable("")}function a(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(ak,ak.exports);(function(e,t){t=e.exports=ak.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=s,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function s(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(s());function a(){try{return window.localStorage}catch{}}})(R1,R1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BKt=34028234663852886e22,uy=BKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VKt=R1.exports,M8=fW,UKt=ve,WKt=Ge,x8=ke,jKt=uy,I8=VKt("gammaincinv:higher_newton");function GKt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,y,b,w,T;T=e,y=1,b=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*x8(T)+T+o,l>x8(jKt))return I8("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=WKt(l)}else w=-s*T;a?(v=M8(T,t,!0,!1),c=-w*(v-n)):(m=M8(T,t,!0,!0),c=w*(m-i)),w=c,n>1e-120||b>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,y=UKt(T/e-1),b+=1,T=e,T<0&&(T=u,b=100)}while(y>2e-14&&b<35);return(y>2e-14||b>99)&&I8("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),g=T||0,g}var HKt=GKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XKt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var YKt=XKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qKt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var ZKt=qKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KKt=ve,JKt=Ge,L8=ke,QKt=qa,tJt=YKt,eJt=ZKt,rJt=1e-8,nJt=.08333333333333333,iJt=.008333333333333333,Sc=[1,0,0,0,0,0];function oJt(e){var t,r,n,i,o,s,a,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=JKt(-1-u),o=tJt(l)):e<1?(l=e,o=eJt(l)):(l=11+u,s=L8(l),o=l+s,l=1/l,t=s*s,r=t*s,n=r*s,i=n*s,Sc[1]=(2-s)*.5,Sc[2]=(-9*s+6+2*t)/6,Sc[3]=-(3*r+36*s-22*t-12)*nJt,Sc[4]=(60+350*t-300*s-125*r+12*n)/60,Sc[5]=-(-120-274*n+900*s-1700*t+1125*r+20*i)*iJt,o+=s*l*QKt(Sc,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,a=o;do o=a*(u+L8(a))/(a-1),l=KKt(a/o-1),a=o;while(l>rJt)}return o}var bW=oJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sJt=.9189385332046728,wW=sJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aJt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function lJt(e,t){var r,n,i,o,s;n=0,i=0,r=t+t,s=e;do o=i,i=n,n=r*i-o+aJt[s],s-=1;while(s>=0);return(n-o)/2}var uJt=lJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cJt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var fJt=cJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hJt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qw=th,Rg=ke,tS=wW,pJt=ly,vJt=uy,gJt=uJt,mJt=fJt,_Jt=dJt,yJt=.30865217988013566;function bJt(e){var t;return e<pJt?vJt:e<1?Qw(e+1)-(e+.5)*Rg(e)+e-tS:e<2?Qw(e)-(e-.5)*Rg(e)+e-tS:e<3?Qw(e-1)-(e-.5)*Rg(e)+e-tS+Rg(e-1):e<12?(t=18/(e*e)-1,gJt(17,t)/(12*e)):(t=1/(e*e),e<1e3?mJt(t)/(yJt+t)/e:_Jt(t)/e)}var wJt=bJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O8=Ge,SJt=Uo,TJt=ke,kJt=uy,PJt=sy,CJt=wJt;function EJt(e){return e>=3?O8(CJt(e)):e>0?SJt(e)/(O8(-e+(e-.5)*TJt(e))*PJt):kJt}var AJt=EJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MJt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var xJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IJt=ve,LJt=ke,OJt=bW,RJt=xJt;function DJt(e){var t;return IJt(e)<1?RJt(e):(t=OJt(e),LJt(e/(t-1))/e)}var NJt=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FJt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var $Jt=FJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zJt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var BJt=zJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VJt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var UJt=VJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WJt=ke,jJt=$Jt,GJt=BJt,HJt=UJt;function XJt(e){var t,r;return e<-5?(r=e*e,t=WJt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?jJt(e):e<2?GJt(e):e<1e3?(r=1/e,HJt(e)/(-12*e)):-1/(12*e)}var YJt=XJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qJt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var ZJt=qJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KJt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var JJt=KJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QJt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var tQt=QJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eQt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var rQt=eQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nQt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var iQt=nQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R8=ke,oQt=ZJt,sQt=JJt,aQt=tQt,lQt=rQt,uQt=iQt;function cQt(e){var t,r;return e<-8?(t=e*e,r=R8(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?oQt(e)/(e*e):e<-2?sQt(e):e<2?aQt(e):e<10?(t=1/e,lQt(t)/(e*e)):e<100?(t=1/e,uQt(t)/(e*e)):-R8(e)/(12*e*e*e)}var fQt=cQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hQt=R1.exports,D8=qa,wi=th,dQt=_0,N8=Uo,Dg=or,F8=ve,Tc=Ge,pQt=Za,vQt=sr,Hn=ke,gQt=sy,mQt=uy,_Qt=sW,yQt=HKt,$8=bW,z8=AJt,bQt=NJt,wQt=YJt,SQt=fQt,TQt=hQt("gammaincinv:compute"),la=.5,eS=.3333333333333333,kQt=.25,B8=.2,V8=.16666666666666666,PQt=.08333333333333333,CQt=.041666666666666664,Xn=[0,0,0,0,0];function EQt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G,K,q,rt,At,Ft,Pt,Ct,Zt,Y,ot,J,yt,Et,xt;if(t<la?(s=!0,a=t,yt=-1):(s=!1,a=r,yt=1),Y=0,F8(e-1)<1e-4&&(ot=0,s?t<.001?(q=t*t,V=q*t,K=V*t,S=K*t,T=S*t,k=t+q*la+V*eS+K*kQt+S*B8+T*V8):k=-Hn(1-t):k=-Hn(r),e===1?(Y=2,At=k):(o=wi(e),Y=1)),r<1e-30&&e<la&&(ot=0,k=-Hn(r*N8(e))+(e-1)*Hn(-Hn(r*N8(e))),Y=1,o=wi(e)),e>1&&e<500&&t<1e-80){for(ot=0,l=1/e,n=1/(e+1),k=(wi(e+1)+Hn(t))*l,k=Tc(k),m=k,Zt=0;Zt<10;Zt++)k=m*Tc(k*l)*vQt(1-k*n,l);Y=1,o=wi(e)}if(u=1/e*(Hn(t)+wi(e+1)),u<Hn(B8*(1+e))&&Y===0&&(J=Tc(u),ot=0,x=e*e,rt=x*e,F=rt*e,g=e+1,d=g*g,h=g*d,f=d*d,y=e+2,c=y*y,b=e+3,Xn[0]=1,Xn[1]=1/g,Xn[2]=la*(3*e+5)/(d*y),Xn[3]=eS*(31+8*x+33*e)/(h*y*b),Xn[4]=CQt*(2888+1179*rt+125*F+3971*x+5661*e)/(f*c*b*(e+4)),k=J*D8(Xn,J),o=wi(e),Y=1),e<10&&Y===0&&(p=Dg(e)/(z8(e)*gQt),v=pQt(.02,p),r<v&&(ot=0,Pt=1-e,N=Pt*Pt,z=N*Pt,w=Dg(-2/e*Hn(r/p)),k=e*$8(w),Ct=Hn(k),k>5?(A=Ct*Ct,I=A*Ct,L=I*Ct,J=1/k,Xn[0]=Ct-1,Xn[1]=(3*Pt-2*Pt*Ct+A-2*Ct+2)*la,Xn[2]=(24*Pt*Ct-11*N-24*Pt-6*A+12*Ct-12-9*Pt*A+6*N*Ct+2*I)*V8,Xn[3]=(-12*z*Ct+8.04*Pt*A-114*N*Ct+(72+36*A)+(3*L-72*Ct+162)*(Pt-168*Pt*Ct)-(12*I+25*z)-(22*Pt*I+36*N*A+120*N))*PQt,Xn[4]=0,k=k-Ct+Pt*J*D8(Xn,J)):(J=1/k,A=Ct*Ct,Ft=Ct-1,Et=Ct-Pt*J*Ft,Et<k&&(k-=Et)),o=wi(e),Y=1)),F8(a-la)<1e-5&&Y===0&&(ot=0,l=1/e,k=e-eS+(.019753086419753086+.007211444248481286*l)*l,o=wi(e),Y=1),e<1&&Y===0&&(ot=0,s?k=Tc(1/e*(Hn(a)+wi(e+1))):k=Tc(1/e*(Hn(1-a)+wi(e+1))),o=wi(e),Y=1),Y===0)if(ot=1,l=1/e,J=dQt(2*a),w=yt*J/Dg(e*la),J<mQt)w+=(bQt(w)+(wQt(w)+SQt(w)*l)*l)*l,k=e*$8(w),xt=w,G=-Dg(e/_Qt)*Tc(-la*e*xt*xt)/z8(e),i=1/G;else return TQt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(At=yQt(k,e,ot,t,r,o,i,s)),At}var AQt=EQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U8=te,MQt=ly,W8=Be,j8=AQt;function xQt(e,t,r){return U8(e)||U8(t)?NaN:t<MQt?NaN:e>1||e<0?NaN:r===!0?e===0?W8:e===1?0:j8(t,1-e,e):e===0?0:e===1?W8:j8(t,e,1-e)}var IQt=xQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LQt=IQt,OQt=LQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RQt=5e-324,DQt=RQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var G8=OQt,H8=ke,NQt=or,FQt=DQt,$Qt=mW,zQt=yW;function BQt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G,K;return r<n?l=G8(r,t,!0):l=G8(n,t,!1),l/=e,g=t/e,F=NQt(1+g),T=F*F,S=T*F,k=T*T,x=S*T,A=S*S,I=k*S,L=k*k,N=x*k,c=x*x,V=l-g,y=V*V,b=y*V,w=y*y,z=F+1,f=z*z,h=z*f,d=f*f,p=(F+2)*(F-1)/(3*F),p+=(S+9*T+21*F+5)*V/(36*T*z),p-=(k-13*S+69*T+167*F+46)*y/(1620*f*S),p-=(7*x+21*k+70*S+26*T-93*F-31)*b/(6480*h*k),p-=(75*A+202*x+188*k-888*S-1345*T+118*F+138)*w/(272160*d*x),v=(28*k+131*S+402*T+581*F+208)*(F-1)/(1620*z*S),v-=(35*A-154*x-623*k-1636*S-3983*T-3514*F-925)*V/(12960*f*k),v-=(2132*I+7915*A+16821*x+35066*k+87490*S+141183*T+95993*F+21640)*y/(816480*x*h),v-=(11053*L+53308*I+117010*A+163924*x+116188*k-258428*S-677042*T-481940*F-105497)*b/(14696640*d*A),m=-((3592*I+8375*A-1323*x-29198*k-89578*S-154413*T-116063*F-29632)*(F-1))/(816480*x*f),m-=(442043*N+2054169*L+3803094*I+3470754*A+2141568*x-2393568*k-19904934*S-34714674*T-23128299*F-5253353)*V/(146966400*A*h),m-=(116932*c+819281*N+2378172*L+4341330*I+6806004*A+10622748*x+18739500*k+30651894*S+30869976*T+15431867*F+2919016)*y/(146966400*d*I),u=l+p/e+v/(e*e)+m/(e*e*e),u<=0&&(u=FQt),G=u-g*H8(u)+(1+g)*H8(1+g)-g,i=1/(1+g),s=u<g?i:0,a=u<g?1:i,K=(s+a)/2,o=$Qt(G,g),zQt(o,K,s,a,32,100)}var VQt=BQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ar=ve,UQt=Kf,rS=_W,WQt=Vu,nS=Qf;function jQt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T;b=0,a=!1,f=t,c=UQt(1,1-i),p=WQt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=b,u=l,l=p,y=e(f),b=y[0],w=y[1],T=y[2],d-=1,b===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),rS(h)*rS(b)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=b/w:(v=2*b,g=2*w-b*(T/w),ar(g)<1&&ar(v)>=ar(g)*nS?p=b/w:p=v/g,p*w/b<0&&(p=b/w,ar(p)>2*ar(t)&&(p=(p<0?-1:1)*2*ar(t)))),s=ar(p/u),s>.8&&s<2&&(p=p>0?(f-r)/2:(f-n)/2,ar(p)>f&&(p=rS(p)*f),u=p*3),t=f,f-=p,f<r){if(ar(r)<1&&ar(f)>1&&nS/ar(f)<ar(r)?m=1e3:m=f/r,ar(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-r),f=t-p,a=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(ar(n)<1&&ar(f)>1&&nS/ar(f)<ar(n)?m=1e3:m=f/n,ar(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-n),f=t-p,a=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&ar(f*c)<ar(p));return f}var GQt=jQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var HQt=gW.assign,XQt=ve,YQt=Qf,iS=Bu;function qQt(e,t,r,n){return i;function i(o){var s,a,l,u,c;return c=1-o,s=[0,0],HQt(o,e,t,!0,n,s,1,0),u=s[0]-r,a=s[1],n&&(a=-a),c===0&&(c=iS*64),o===0&&(o=iS*64),l=a*(-(c*e)+(t-2)*o+1),XQt(l)<c*o*YQt&&(l/=c*o),n&&(l=-l),a===0&&(a=(n?-1:1)*iS*64),[u,a,l]}}var ZQt=qQt,KQt=qa,X8=TE,oS=qf,Y8=$n,JQt=hE,kc=qU,q8=or,QQt=ve,Z8=Ge,mo=sr,K8=g0,tte=Vu,ete=Za,J8=ke,sS=Bu,Q8=_E,tD=Ds,rte=EZt,nte=IZt,ite=RKt,ote=VQt,ste=GQt,ate=ZQt,lte=32,ute=1e3,xl=[0,0,0,0,0];function cte(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(F=0,a=0,u=1,e===.5){if(t===.5)return F=K8(r*Q8),F*=F,G=K8(n*Q8),G*=G,[F,G];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)x={},F=rte(e,r,x),G=x.value;else{if(t===1)return r<n?e>1?(F=mo(r,1/e),G=-oS(J8(r)/e)):(F=mo(r,1/e),G=1-F):(F=Z8(Y8(-n)/e),G=-oS(Y8(-n)/e)),o&&(v=G,G=F,F=v),[F,G];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=ete(e,t),f=tte(e,t),q8(h)>f-h&&h>5?(F=nte(e,t,r),G=1-F):(N=e+t,l=JQt(q8(e/N)),s=h/N,s>=.2&&s<=.8&&N>=10?(p=mo(r,1/e),p<.0025&&e+t<200?F=p*mo(e*kc(e,t),1/e):F=ite(r,N,l),G=1-F):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=kc(e,t)),d===0?G=1:(G=mo(t*n*d,1/t),F=1-G)),G>1e-5&&(F=ote(e,t,r,n),G=1-F));else if(e<1&&t<1){if(k=(1-e)/(2-e-t),b=X8(k,e,t)-r,QQt(b)/r<tD*3)return o?[1-k,k]:[k,1-k];b<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,k=1-k),S=mo(e*r*kc(e,t),1/e),F=S/(1+S),G=1/(1+S),F>k&&(F=k),u=k}else e>1&&t>1?(k=(e-1)/(e+t-2),m=(t-1)/(e+t-2),T=X8(k,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=m,m=k,k=v,o=!o),w=J8(r*e*kc(e,t))/e,F=Z8(w),G=F<.9?1-F:-oS(w),t<e&&F<.2&&(g=e-1,y=t-1,A=e*e,I=e*A,L=t*t,xl[0]=0,xl[1]=1,xl[2]=y/g,g*=g,xl[3]=y*(3*e*t+5*t+A-e-4)/(2*(e+2)*g),g*=e+1,xl[4]=y*(33*e*L+31*L+8*A*L-30*e*t-47*t+11*A*t+6*I*t+18+4*e-I+A*A-10*A),xl[4]/=3*(e+3)*(e+2)*g,F=KQt(xl,F)),F>k&&(F=k),u=k):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),mo(r,1/e)<.5?(F=mo(r*e*kc(e,t),1/e),F===0&&(F=sS),G=1-F):(G=mo(1-mo(r,t*kc(e,t)),1/t),G===0&&(G=sS),F=1-G))}return F>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=G,G=F,F=v,o=!o,z=1-u,V=1-a,a=z,u=V),a===0&&(o?(a=tD,F<a&&(F=a)):a=sS,F<a&&(F=a)),i=lte,F<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=ate(e,t,r<n?r:n,r>=n),F=ste(c,F,a,u,i,ute),F===a&&(F=0),o?[1-F,F]:[F,1-F]}var fte=cte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hte=fte,dte=hte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aS=te,eD=dte;function pte(e,t,r,n){return aS(e)||aS(t)||aS(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?eD(t,r,1-e,e)[0]:eD(t,r,e,1-e)[0]}var vte=pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gte=vte,SW=gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mte=SW,lS=te;function _te(e,t,r){return lS(e)||lS(t)||lS(r)||t<=0||r<=0||e<0||e>1?NaN:mte(e,t,r)}var yte=_te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bte(e){return t;function t(){return e}}var wte=bte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ste=wte,cy=Ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tte=cy,kte=SW,uS=te;function Pte(e,t){if(uS(e)||uS(t)||e<=0||t<=0)return Tte(NaN);return r;function r(n){return uS(n)||n<0||n>1?NaN:kte(n,e,t)}}var Cte=Pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ete=wr,TW=yte,Ate=Cte;Ete(TW,"factory",Ate);var Mte=TW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xte=Fn;function Ite(e){return xte(e)===e&&e>=0}var Lte=Ite;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ote=Lte,fy=Ote;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rte=fy,Dte=TE,cS=te,Nte=Fn,Fte=Be;function $te(e,t,r){return cS(e)||cS(t)||cS(r)||r<0||r>1||!Rte(t)||t===Fte?NaN:e<0?0:e>=t?1:(e=Nte(e+1e-7),Dte(r,e+1,t-e,!0,!0))}var zte=$te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bte=fy,Vte=cy,Ute=TE,fS=te,Wte=Fn,jte=Be;function Gte(e,t){if(fS(e)||fS(t)||t<0||t>1||!Bte(e)||e===jte)return Vte(NaN);return r;function r(n){return fS(n)?NaN:n<0?0:n>=e?1:(n=Wte(n+1e-7),Ute(t,n+1,e-n,!0,!0))}}var Hte=Gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xte=wr,kW=zte,Yte=Hte;Xte(kW,"factory",Yte);var qte=kW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var PW=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],Zte=PW.length;function Kte(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<Zte;o++)r=n,n=i,i=t*n-r+PW[o];return(i-r)*.5}var Jte=Kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Qte=sr,tee=Jte,eee=9490626562425156e-8,ree=3745194030963158e291;function nee(e){return e<10?NaN:e>=ree?0:e<eee?tee(2*Qte(10/e,2)-1)/e:1/(e*12)}var iee=nee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var oee=th,rD=$n,hS=Uo,see=Vu,aee=Za,Ng=ke,lee=wW,uee=Dr,nD=Be,sd=iee;function cee(e,t){var r,n,i;return n=aee(e,t),i=see(e,t),n<0?NaN:n===0?nD:i===nD?uee:n>=10?(r=sd(n)+sd(i)-sd(n+i),-.5*Ng(i)+lee+r+(n-.5)*Ng(n/(n+i))+i*rD(-n/(n+i))):i>=10?(r=sd(i)-sd(n+i),oee(n)+r+n-n*Ng(n+i)+(i-.5)*rD(-n/(n+i))):Ng(hS(n)*(hS(i)/hS(n+i)))}var fee=cee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hee=fee,dee=hee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iD=Ya,oD=te,pee=dee,vee=ve,sD=ke,aD=Dr;function lk(e,t){return oD(e)||oD(t)?NaN:!iD(e)||!iD(t)?NaN:e<0?lk(-e+t-1,t):t<0?aD:t===0?0:t===1?sD(vee(e)):e<t?aD:e-t<2?lk(e,e-t):-sD(e+1)-pee(e-t+1,t+1)}var gee=lk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mee=gee,CW=mee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lD=fy,_ee=CW,dS=te,yee=$n,bee=Ge,wee=ke,See=Be;function Tee(e,t,r){var n;return dS(e)||dS(t)||dS(r)||r<0||r>1||!lD(t)||t===See?NaN:lD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=_ee(t,e),n+=e*wee(r)+(t-e)*yee(-r),bee(n)):0}var kee=Tee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uD=te;function Pee(e,t){return uD(e)||uD(t)?NaN:e===t?1:0}var Cee=Pee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eee=cy,cD=te;function Aee(e){if(cD(e))return Eee(NaN);return t;function t(r){return cD(r)?NaN:r===e?1:0}}var Mee=Aee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xee=wr,EW=Cee,Iee=Mee;xee(EW,"factory",Iee);var Lee=EW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fD=fy,Oee=cy,Ree=CW,hD=Lee.factory,pS=te,Dee=$n,Nee=Ge,Fee=ke,$ee=Be;function zee(e,t){if(pS(e)||pS(t)||!fD(e)||e===$ee||t<0||t>1)return Oee(NaN);if(t===0||e===0)return hD(0);if(t===1)return hD(e);return r;function r(n){var i;return pS(n)?NaN:fD(n)?n>e?0:(i=Ree(e,n),i+=n*Fee(t)+(e-n)*Dee(-t),Nee(i)):0}}var Bee=zee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vee=wr,AW=kee,Uee=Bee;Vee(AW,"factory",Uee);var Wee=AW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jee=Ki,uk;function Gee(e){return jee(e)==="[object Array]"}Array.isArray?uk=Array.isArray:uk=Gee;var Hee=uk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xee=Hee,MW=Xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yee=MW;function qee(e){return typeof e=="object"&&e!==null&&!Yee(e)}var Zee=qee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kee=Zee,Jee=Kee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qee=/./,tre=Qee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ere(e){return typeof e=="boolean"}var xW=ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rre=Boolean.prototype.toString,nre=rre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ire=nre;function ore(e){try{return ire.call(e),!0}catch{return!1}}var sre=ore;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var are=ty,lre=Ki,ure=sre,cre=are();function fre(e){return typeof e=="object"?e instanceof Boolean?!0:cre?ure(e):lre(e)==="[object Boolean]":!1}var IW=fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hre=xW,dre=IW;function pre(e){return hre(e)||dre(e)}var vre=pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LW=wr,PE=vre,gre=xW,mre=IW;LW(PE,"isPrimitive",gre);LW(PE,"isObject",mre);var OW=PE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _re(){return new Function("return this;")()}var yre=_re;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bre=typeof self=="object"?self:null,wre=bre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sre=typeof window=="object"?window:null,Tre=Sre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kre=typeof BS=="object"?BS:null,Pre=kre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cre=OW.isPrimitive,Ere=yre,dD=wre,pD=Tre,vD=Pre;function Are(e){if(arguments.length){if(!Cre(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return Ere()}if(dD)return dD;if(pD)return pD;if(vD)return vD;throw new Error("unexpected error. Unable to resolve global object.")}var Mre=Are;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xre=Mre,Ire=xre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lre=Ire,gD=Lre(),Ore=gD.document&&gD.document.childNodes,Rre=Ore;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dre=Int8Array,Nre=Dre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fre=tre,$re=Rre,zre=Nre;function Bre(){return typeof Fre=="function"||typeof zre=="object"||typeof $re=="function"}var Vre=Bre;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ure(){return/^\s*function\s*([^(]*)/i}var RW=Ure;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wre=RW,jre=Wre(),Gre=jre;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hre=wr,DW=RW,Xre=Gre;Hre(DW,"REGEXP",Xre);var Yre=DW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qre=MW;function Zre(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!qre(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var Kre=Zre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jre=Kre,Qre=Jre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tne(e){return e!==null&&typeof e=="object"}var ene=tne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rne=wr,nne=Qre,CE=ene,ine=nne(CE);rne(CE,"isObjectLikeArray",ine);var one=CE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sne=one;function ane(e){return sne(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var lne=ane;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var une=lne,cne=une;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fne=Ki,hne=Yre.REGEXP,dne=cne;function pne(e){var t,r,n;if(r=fne(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=hne.exec(n.toString()),t)return t[1]}return dne(e)?"Buffer":r}var vne=pne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gne=vne,NW=gne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mne=NW;function _ne(e){var t;return e===null?"null":(t=typeof e,t==="object"?mne(e).toLowerCase():t)}var yne=_ne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bne=NW;function wne(e){return bne(e).toLowerCase()}var Sne=wne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tne=Vre,kne=yne,Pne=Sne,Cne=Tne()?Pne:kne,Ene=Cne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ane=Ene;function Mne(e){return Ane(e)==="function"}var xne=Mne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ine=xne,FW=Ine;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lne=Object.getPrototypeOf,One=Lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rne(e){return e.__proto__}var Dne=Rne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nne=Ki,Fne=Dne;function $ne(e){var t=Fne(e);return t||t===null?t:Nne(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var zne=$ne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bne=FW,Vne=One,Une=zne,ck;Bne(Object.getPrototypeOf)?ck=Vne:ck=Une;var Wne=ck;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jne=Wne;function Gne(e){return e==null?null:(e=Object(e),jne(e))}var Hne=Gne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xne=Hne,Yne=Xne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qne=Jee,mD=FW,Zne=Yne,Cm=ey,Kne=Ki,Jne=Object.prototype;function Qne(e){var t;for(t in e)if(!Cm(e,t))return!1;return!0}function tie(e){var t;return qne(e)?(t=Zne(e),t?!Cm(e,"constructor")&&Cm(t,"constructor")&&mD(t.constructor)&&Kne(t.constructor)==="[object Function]"&&Cm(t,"isPrototypeOf")&&mD(t.isPrototypeOf)&&(t===Jne||Qne(e)):!0):!1}var eie=tie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rie=eie,$W=rie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nie(e){return typeof e=="string"}var zW=nie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iie=String.prototype.valueOf,oie=iie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sie=oie;function aie(e){try{return sie.call(e),!0}catch{return!1}}var lie=aie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uie=ty,cie=Ki,fie=lie,hie=uie();function die(e){return typeof e=="object"?e instanceof String?!0:hie?fie(e):cie(e)==="[object String]":!1}var BW=die;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pie=zW,vie=BW;function gie(e){return pie(e)||vie(e)}var mie=gie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VW=wr,EE=mie,_ie=zW,yie=BW;VW(EE,"isPrimitive",_ie);VW(EE,"isObject",yie);var bie=EE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wie=Gf.isPrimitive,Sie=te;function Tie(e){return wie(e)&&Sie(e)}var UW=Tie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kie=Gf.isObject,Pie=te;function Cie(e){return kie(e)&&Pie(e.valueOf())}var WW=Cie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eie=UW,Aie=WW;function Mie(e){return Eie(e)||Aie(e)}var xie=Mie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jW=wr,AE=xie,Iie=UW,Lie=WW;jW(AE,"isPrimitive",Iie);jW(AE,"isObject",Lie);var Oie=AE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _D=Gf.isPrimitive,Rie=$W,Die=bie.isPrimitive,yD=Oie,vS=ey;function Nie(e,t){return Rie(t)?vS(t,"alpha")&&(e.alpha=t.alpha,!_D(e.alpha)||yD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):vS(t,"alternative")&&(e.alternative=t.alternative,!Die(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):vS(t,"p")&&(e.p=t.p,!_D(e.p)||yD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Fie=Nie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $ie=ry.isPrimitive;function zie(e){return $ie(e)&&e>0}var GW=zie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bie=ry.isObject;function Vie(e){return Bie(e)&&e.valueOf()>0}var HW=Vie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uie=GW,Wie=HW;function jie(e){return Uie(e)||Wie(e)}var Gie=jie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XW=wr,ME=Gie,Hie=GW,Xie=HW;XW(ME,"isPrimitive",Hie);XW(ME,"isObject",Xie);var Yie=ME;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qie=9007199254740991,Zie=qie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kie=308,Jie=Kie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qie=-308,toe=Qie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eoe=-324,roe=eoe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bD=te,Fg=Zf,wD=sr,noe=ve,SD=oy,ioe=Zie,TD=Jie,ooe=toe,soe=roe,aoe=ioe+1,kD=1e308;function loe(e,t){var r,n;return bD(e)||bD(t)||Fg(t)?NaN:Fg(e)||e===0||t<soe||noe(e)>aoe&&t<=0?e:t>TD?0*e:t<ooe?(r=wD(10,-(t+TD)),n=e*kD*r,Fg(n)?e:SD(n)/kD/r):(r=wD(10,-t),n=e*r,Fg(n)?e:SD(n)/r)}var uoe=loe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var coe=uoe,foe=coe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hoe=Yie,doe=$W,poe=OW.isPrimitive,PD=ey,$g=foe;function voe(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!doe(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(PD(e,"digits")){if(!hoe(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(PD(e,"decision")){if(!poe(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+$g(this.pValue,-r)+`
`,n+="    statistic: "+$g(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+$g(this.ci[0],-r)+","+$g(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var goe=voe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ns=KLt,moe=gRt,CD=HRt,YW=Mte,_oe=Fn,yoe=DU,Pc=qte,gS=Wee,ED=Fie,boe=goe,AD=1+1e-7;function MD(e,t,r){return e===0?0:YW(r,e,t-e+1)}function xD(e,t,r){return e===t?1:YW(1-r,e+1,t-e)}function woe(){var e,t,r,n,i,o,s,a,l,u,c,f,h,d,p;if(t={},moe(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(s=ED(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!CD(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!CD(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(s=ED(t,arguments[2]))}if(s)throw s;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=Pc(h,c,f),r=[0,xD(h,c,e)];break;case"greater":n=1-Pc(h-1,c,f),r=[MD(h,c,e),1];break;case"two-sided":if(l=gS(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=yoe(u);p<=c;p++)gS(p,c,f)<=l*AD&&(d+=1);n=Pc(h,c,f)+(1-Pc(c-d,c,f))}else{for(d=0,p=0;p<=_oe(u);p++)gS(p,c,f)<=l*AD&&(d+=1);n=Pc(d-1,c,f)+(1-Pc(h-1,c,f))}r=[MD(h,c,e/2),xD(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return a={},ns(a,"rejected",n<=e),ns(a,"alpha",e),ns(a,"pValue",n),ns(a,"statistic",i),ns(a,"ci",r),ns(a,"nullValue",f),ns(a,"alternative",o),ns(a,"method","Exact binomial test"),ns(a,"print",boe),a}var Soe=woe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Toe=Soe,xE=Toe;const koe=Hp({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})}),Poe=Array.prototype.concat,qW=Object.prototype.toString;function ZW(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const $o=Array.isArray||function(t){return qW.call(t)==="[object Array]"};function jp(e){return qW.call(e)==="[object Function]"}function Lr(e){return typeof e=="number"?e-e===0:!1}function Coe(e){return Poe.apply([],e)}const KW={calcRdx:ZW,isArray:$o,isFunction:jp,isNumber:Lr,toVector:Coe};let ci=Math.random;function JW(e){if(typeof e!="function")throw new TypeError("fn is not a function");ci=e}function hy(e){return e.length||1}function QW(e){return e[0].length||1}function Eoe(e){return{rows:hy(e),cols:QW(e)}}function IE(e,t){return $o(t)?t.map(r=>IE(e,r)):e[t]}function tj(e,t){return IE(e,t)}function D1(e,t){if($o(t)){const n=Oe(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Oe(e.length).forEach(function(s){n[s][o]=e[s][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function ej(e,t){return D1(e,t).map(r=>r[0])}function Aoe(e){const t=hy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Moe(e){for(var t=hy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Aa(e){var t=[],r,n,i,o,s;for($o(e[0])||(e=[e]),n=e.length,i=e[0].length,s=0;s<i;s++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][s];t.push(r)}return t.length===1?t[0]:t}function un(e,t,r){var n,i,o,s,a;for($o(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),a=0;a<o;a++)s[n][a]=t(e[n][a],n,a);return s.length===1?s[0]:s}function dy(e,t,r){var n,i,o,s,a;for($o(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),o>0&&(s[n][0]=e[n][0]),a=1;a<o;a++)s[n][a]=t(s[n][a-1],e[n][a]);return s.length===1?s[0]:s}function LE(e,t){return un(e,t,!0)}function rh(e,t,r){var n=new Array(e),i,o;for(jp(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function rj(){return 0}function xoe(){return 1}function Ioe(e,t){return e===t?1:0}function Wo(e,t){return Lr(t)||(t=e),rh(e,t,rj)}function Loe(e,t){return Lr(t)||(t=e),rh(e,t,xoe)}function Ooe(e,t){return Lr(t)||(t=e),rh(e,t,ci)}function wu(e,t){return Lr(t)||(t=e),rh(e,t,Ioe)}function Roe(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function Doe(e){return LE(e,rj)}function nj(e,t,r,n){jp(n)||(n=!1);var i=[],o=ZW(e,t),s=(t*o-e*o)/((r-1)*o),a=e,l;for(l=0;a<=t&&l<r;l++,a=(e*o+s*o*l)/o)i.push(n?n(a,l):a);return i}function Oe(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function ss(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return py(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Lr(t.row)){if(Lr(t.col))return e[t.row][t.col];var o=tj(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Lr(t.col)){var s=ej(e,t.col);return i=t.row||{},r(s,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var a=r(e,i.start,i.end,i.step);return a.map(function(l){return r(l,n.start,n.end,n.step)})}function Sd(e,t,r){var n,i;if(Lr(t.row)){if(Lr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Oe(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(a,l){e[o][a]=r[l]}),e}if(Lr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Oe(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var s=t.col;return i.forEach(function(a,l){e[a][s]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Oe(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Oe(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(a,l){n.forEach(function(u,c){e[a][u]=r[l][c]})}),e}function Noe(e){var t=Wo(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function py(e){return e.map(function(t){return Lr(t)?t:t.map(function(r){return r})})}const Foe=Object.freeze(Object.defineProperty({__proto__:null,utils:KW,get random_fn(){return ci},setRandom:JW,rows:hy,cols:QW,dimensions:Eoe,row:IE,rowa:tj,col:D1,cola:ej,diag:Aoe,antidiag:Moe,transpose:Aa,map:un,cumreduce:dy,alter:LE,create:rh,zeros:Wo,ones:Loe,rand:Ooe,identity:wu,symmetric:Roe,clear:Doe,seq:nj,arange:Oe,slice:ss,sliceAssign:Sd,diagonal:Noe,copy:py},Symbol.toStringTag,{value:"Module"}));function nh(e,t){return e-t}function ID(e,t,r){return Math.max(t,Math.min(e,r))}function cn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function $oe(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function vy(e){for(var t=fr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function zoe(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function ij(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function OE(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function RE(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Boe(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function fr(e){return cn(e)/e.length}function Voe(e){return vy(e)/e.length}function Uoe(e){return Math.pow(ij(e),1/e.length)}function fk(e){var t=e.length,r=e.slice().sort(nh);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function Woe(e){return dy(e,function(t,r){return t+r})}function joe(e){return dy(e,function(t,r){return t*r})}function Goe(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function hk(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(nh),s={},a=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=a,c=a+l-1,f=(u+c)/2;s[i]=f,a+=l}return e.map(function(h){return s[h]})}function Hoe(e){var t=e.length,r=e.slice().sort(nh),n=1,i=0,o=0,s=[],a;for(a=0;a<t;a++)r[a]===r[a+1]?n++:(n>i?(s=[r[a]],i=n,o=0):n===i&&(s.push(r[a]),o++),n=1);return o===0?s[0]:s}function Xoe(e){return RE(e)-OE(e)}function oj(e,t){return vy(e)/(e.length-(t?1:0))}function sj(e){var t=e.reduce(function(n,i){return n+vy(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function Yoe(e){for(var t=fr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function Es(e,t){return Math.sqrt(oj(e,t))}function aj(e){return Math.sqrt(sj(e))}function qoe(e){for(var t=fr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return fr(r)}function Zoe(e){for(var t=fk(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return fk(r)}function Koe(e){return Es(e)/fr(e)}function Joe(e){var t=e.length,r=e.slice().sort(nh);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Qoe(e,t,r,n){var i=e.slice().sort(nh),o=[t.length],s=e.length,a,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),a=0;a<t.length;a++)l=t[a],u=r+l*(1-r-n),c=s*l+u,f=Math.floor(ID(c,1,s-1)),h=ID(c-f,0,1),o[a]=(1-h)*i[f-1]+h*i[f];return o}function tse(e,t,r){var n=e.slice().sort(nh),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),s=i-o;return o+1<n.length?n[o-1]+s*(n[o]-n[o-1]):n[o-1]}function ese(e,t,r){var n=0,i=e.length,o=!1,s,a;for(r==="strict"&&(o=!0),a=0;a<i;a++)s=e[a],(o&&s<t||!o&&s<=t)&&n++;return n/i}function rse(e,t){t=t||4;var r=OE(e),n=(RE(e)-r)/t,i=e.length,o=[],s;for(s=0;s<t;s++)o[s]=0;for(s=0;s<i;s++)o[Math.min(Math.floor((e[s]-r)/n),t-1)]+=1;return o}function lj(e,t){var r=fr(e),n=fr(t),i=e.length,o=new Array(i),s;for(s=0;s<i;s++)o[s]=(e[s]-r)*(t[s]-n);return cn(o)/(i-1)}function uj(e,t){return lj(e,t)/Es(e,1)/Es(t,1)}function nse(e,t){return e=hk(e),t=hk(t),uj(e,t)}function DE(e,t){for(var r=fr(e),n=Es(e),i=e.length,o=0,s=0;s<i;s++)o+=Math.pow((e[s]-r)/n,t);return o/e.length}function ise(e){return DE(e,3)}function ose(e){return DE(e,4)-3}const sse=Object.freeze(Object.defineProperty({__proto__:null,sum:cn,sumsqrd:$oe,sumsqerr:vy,sumrow:zoe,product:ij,min:OE,max:RE,unique:Boe,mean:fr,meansqerr:Voe,geomean:Uoe,median:fk,cumsum:Woe,cumprod:joe,diff:Goe,rank:hk,mode:Hoe,range:Xoe,variance:oj,pooledvariance:sj,deviation:Yoe,stdev:Es,pooledstdev:aj,meandev:qoe,meddev:Zoe,coeffvar:Koe,quartiles:Joe,quantiles:Qoe,percentile:tse,percentileOfScore:ese,histogram:rse,covariance:lj,corrcoeff:uj,spearmancoeff:nse,stanMoment:DE,skewness:ise,kurtosis:ose},Symbol.toStringTag,{value:"Module"}));function ase(e,t,r){return e<t||e>r?0:1/(r-t)}function lse(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function use(e,t,r){return t+e*(r-t)}function cse(e,t){return .5*(e+t)}function fse(e,t){return fr(e)}function hse(){throw new Error("mode is not yet implemented")}function cj(e,t){return e/2+t/2+(t/2-e/2)*(2*ci()-1)}function dse(e,t){return Math.pow(t-e,2)/12}const pse=Object.freeze(Object.defineProperty({__proto__:null,pdf:ase,cdf:lse,inv:use,mean:cse,median:fse,mode:hse,sample:cj,variance:dse},Symbol.toStringTag,{value:"Module"}));function vse(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function gse(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function mse(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function _se(e,t){return t<=e?NaN:(e+t)/2}function yse(e,t){return t<=e?NaN:(e+t)/2}function bse(){throw new Error("mode is not yet implemented")}function wse(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*cj(0,1))}function Sse(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const Tse=Object.freeze(Object.defineProperty({__proto__:null,pdf:vse,cdf:gse,inv:mse,mean:_se,median:yse,mode:bse,sample:wse,variance:Sse},Symbol.toStringTag,{value:"Module"}));function Ye(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-s}function fj(e){var t,r,n,i,o,s,a,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,a=0,e==1||e==2)return 0;for(e<=7&&(a=Math.floor(7-e),t=e+a),r=1/(t*t),n=2*Math.PI,o=l[9],s=8;s>=0;s--)o*=r,o+=l[s];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(s=1;s<=a;s++)i-=Math.log(t-1),t-=1;return i}function Bi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,s=0,a=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(a<=0)if(f=a%1+36e-17,f)n=(a&1?-1:1)*Math.PI/Math.sin(Math.PI*f),a=1-a;else return 1/0;for(c=a,a<1?u=a++:u=(a-=i=(a|0)-1)-1,l=0;l<8;++l)s=(s+t[l])*u,o=o*u+r[l];if(f=s/o+1,c<a)f/=c;else if(c>a)for(l=0;l<i;++l)f*=a,a++;return n&&(f=n/f),f}function kse(e,t){return ih(e,t)*Bi(e)}function ih(e,t){var r=Ye(e),n=e,i=1/e,o=i,s=t+1-e,a=1/1e-30,l=1/s,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),s+=2,l=h*l+s,a=s+h/a,l=1/l,u*=l*a;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function Em(e){return e<0?NaN:Ye(e+1)}function iu(e){return e<0?NaN:Bi(e+1)}function NE(e,t){return e>170||t>170?Math.exp(hj(e,t)):iu(e)/iu(t)/iu(e-t)}function hj(e,t){return Em(e)-Em(t)-Em(e-t)}function Pse(e,t){return iu(e)/iu(e-t)}function gy(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(FE(e,t)):Bi(e)*Bi(t)/Bi(e+t)}function FE(e,t){return Ye(e)+Ye(t)-Ye(e+t)}function dk(e,t,r){var n=1e-30,i=1,o=t+r,s=t+1,a=t-1,l=1,u=1-o*e/s,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((a+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(s+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function my(e,t){var r=0,n=t-1,i=1e-8,o=Ye(t),s,a,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),s=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(s=-s),s=Math.max(.001,t*Math.pow(1-1/(9*t)-s/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?s=Math.pow(e/l,1/t):s=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(s<=0)return 0;if(a=ih(t,s)-e,t>1?l=h*Math.exp(-(s-n)+n*(Math.log(s)-f)):l=Math.exp(-s+n*Math.log(s)-o),u=a/l,s-=l=u/(1-.5*Math.min(1,u*((t-1)/s-1))),s<=0&&(s=.5*(s+l)),Math.abs(l)<i*s)break}return s}function _y(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,s,a,l,u;for(e<0&&(e=-e,n=!0),s=2/(2+e),a=4*s-2;r>0;r--)l=i,i=a*i-o+t[r],o=l;return u=s*Math.exp(-e*e+.5*(t[0]+a*i)-o),n?u-1:1-u}function dj(e){return 1-_y(e)}function $E(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=dj(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function y0(e,t,r){var n=1e-8,i=t-1,o=r-1,s=0,a,l,u,c,f,h,d,p,v,m,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),m=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*m))):(a=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*a)/t,f=Math.exp(r*l)/r,m=c+f,e<c/m?d=Math.pow(t*m*e,1/t):d=1-Math.pow(r*m*(1-e),1/r)),g=-Ye(t)-Ye(r)+Ye(t+r);s<10;s++){if(d===0||d===1)return d;if(h=b0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&s>0)break}return d}function b0(e,t,r){var n=e===0||e===1?0:Math.exp(Ye(t+r)-Ye(t)-Ye(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*dk(e,t,r)/t:1-n*dk(1-e,r,t)/r}function Wu(e,t){var r,n,i,o,s;if(t||(t=e),e)return rh(e,t,function(){return Wu()});do r=ci(),n=1.7156*(ci()-.5),i=r-.449871,o=Math.abs(n)+.386595,s=i*i+o*(.196*o-.25472*i);while(s>.27597&&(s>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function zo(e,t,r){var n=e,i,o,s,a,l,u;if(r||(r=t),e||(e=1),t)return u=Wo(t,r),u.alter(function(){return zo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Wu(),a=1+o*l;while(a<=0);a=a*a*a,s=ci()}while(s>1-.331*Math.pow(l,4)&&Math.log(s)>.5*l*l+i*(1-a+Math.log(a)));if(e==n)return i*a;do s=ci();while(s===0);return Math.pow(s,1/n)*i*a}const Cse=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ye,loggam:fj,gammafn:Bi,gammap:kse,lowRegGamma:ih,factorialln:Em,factorial:iu,combination:NE,combinationln:hj,permutation:Pse,betafn:gy,betaln:FE,betacf:dk,gammapinv:my,erf:_y,erfc:dj,erfcinv:$E,ibetainv:y0,ibeta:b0,randn:Wu,randg:zo},Symbol.toStringTag,{value:"Module"}));function Ese(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/gy(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-FE(t,r))}function N1(e,t,r){return e>1||e<0?(e>1)*1:b0(e,t,r)}function Ase(e,t,r){return y0(e,t,r)}function Mse(e,t){return e/(e+t)}function xse(e,t){return y0(.5,e,t)}function Ise(e,t){return(e-1)/(e+t-2)}function Lse(e,t){var r=zo(e);return r/(r+zo(t))}function Ose(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Rse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ese,cdf:N1,inv:Ase,mean:Mse,median:xse,mode:Ise,sample:Lse,variance:Ose},Symbol.toStringTag,{value:"Module"}));function LD(e,t,r,n){for(var i=0,o=1,s=1,a=1,l=0,u=0,c;Math.abs((s-u)/s)>n;)u=s,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=s+c*i,o=a+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),s=i+c*s,a=o+c*a,i=i/a,o=o/a,s=s/a,a=1;return s/t}function pj(e,t,r){return r===0||r===1?t*r===e?1:0:NE(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function Dse(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,s=e+1,a=t-e,l=s+a,u=Math.exp(Ye(l)-Ye(a)-Ye(s)+s*Math.log(o)+a*Math.log(1-o));return o<(s+1)/(l+2)?n=u*LD(o,s,a,i):n=1-u*LD(1-o,a,s,i),Math.round((1-n)*(1/i))/(1/i)}const Nse=Object.freeze(Object.defineProperty({__proto__:null,pdf:pj,cdf:Dse},Symbol.toStringTag,{value:"Module"}));function Fse(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function $se(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function zse(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Bse(e){return e}function Vse(e){return e}function Use(e,t){return Wu()*Math.sqrt(1/(2*randg(.5)))*t+e}const Wse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Fse,cdf:$se,inv:zse,median:Bse,mode:Vse,sample:Use},Symbol.toStringTag,{value:"Module"}));function jse(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/gy(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*pj((t-2)/2,(t+r-2)/2,n))}function F1(e,t,r){return e<0?0:b0(t*e/(t*e+r),t/2,r/2)}function Gse(e,t,r){return r/(t*(1/y0(e,t/2,r/2)-1))}function Hse(e,t){return t>2?t/(t-2):void 0}function Xse(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function Yse(e,t){var r=zo(e/2)*2,n=zo(t/2)*2;return r/e/(n/t)}function qse(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const Zse=Object.freeze(Object.defineProperty({__proto__:null,pdf:jse,cdf:F1,inv:Gse,mean:Hse,mode:Xse,sample:Yse,variance:qse},Symbol.toStringTag,{value:"Module"}));function Kse(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ye(t/2))}function Jse(e,t){return e<0?0:ih(t/2,e/2)}function Qse(e,t){return 2*my(e,.5*t)}function tae(e){return e}function eae(e){return e*Math.pow(1-2/(9*e),3)}function rae(e){return e-2>0?e-2:0}function nae(e){return zo(e/2)*2}function iae(e){return 2*e}const oae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kse,cdf:Jse,inv:Qse,mean:tae,median:eae,mode:rae,sample:nae,variance:iae},Symbol.toStringTag,{value:"Module"}));function sae(e,t){return e<0?0:t*Math.exp(-t*e)}function aae(e,t){return e<0?0:1-Math.exp(-t*e)}function lae(e,t){return-Math.log(1-e)/t}function uae(e){return 1/e}function cae(e){return 1/e*Math.log(2)}function fae(){return 0}function hae(e){return-1/e*Math.log(ci())}function dae(e){return Math.pow(e,-2)}const pae=Object.freeze(Object.defineProperty({__proto__:null,pdf:sae,cdf:aae,inv:lae,mean:uae,median:cae,mode:fae,sample:hae,variance:dae},Symbol.toStringTag,{value:"Module"}));function vae(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ye(t)-t*Math.log(r))}function gae(e,t,r){return e<0?0:ih(t,e/r)}function mae(e,t,r){return my(e,t)*r}function _ae(e,t){return e*t}function yae(e,t){if(e>1)return(e-1)*t}function bae(e,t){return zo(e)*t}function wae(e,t){return e*t*t}const Sae=Object.freeze(Object.defineProperty({__proto__:null,pdf:vae,cdf:gae,inv:mae,mean:_ae,mode:yae,sample:bae,variance:wae},Symbol.toStringTag,{value:"Module"}));function Td(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?Td(t-r-n+e,t,t-r,t-n):Td(n-e,t,t-r,n);if(n*2>t)return Td(r-e,t,r,t-n);if(r<n)return Td(e,t,n,r);for(var i=1,o=0,s=0;s<e;s++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function kd(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?kd(t-r-n+e,t,t-r,t-n):1-kd(n-e-1,t,t-r,n);if(n*2>t)return 1-kd(r-e-1,t,r,t-n);if(r<n)return kd(e,t,n,r);for(var i=1,o=1,s=0,a=0;a<e;a++){for(;i>1&&s<n;){var l=1-r/(t-s);o*=l,i*=l,s++}o*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1)),i+=o}for(;s<n;s++)i*=1-r/(t-s);return Math.min(1,Math.max(0,i))}const Tae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Td,cdf:kd},Symbol.toStringTag,{value:"Module"}));function kae(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ye(t)+t*Math.log(r))}function Pae(e,t,r){return e<=0?0:1-ih(t,r/e)}function Cae(e,t,r){return r/my(1-e,t)}function Eae(e,t){return e>1?t/(e-1):void 0}function Aae(e,t){return t/(e+1)}function Mae(e,t){return t/zo(e)}function xae(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const Iae=Object.freeze(Object.defineProperty({__proto__:null,pdf:kae,cdf:Pae,inv:Cae,mean:Eae,mode:Aae,sample:Mae,variance:xae},Symbol.toStringTag,{value:"Module"}));function Lae(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function Oae(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Rae(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function Dae(e,t){return t*Bi(1+1/e)*Bi(t)/Bi(1+1/e+t)}function Nae(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Fae(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function $ae(){throw new Error("variance not yet implemented")}const zae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Lae,cdf:Oae,inv:Rae,mean:Dae,median:Nae,mode:Fae,variance:$ae},Symbol.toStringTag,{value:"Module"}));function Bae(e){return e/Math.abs(e)}function Vae(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Uae(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function Wae(e){return e}function jae(e){return e}function Gae(e){return e}function Hae(e,t){return 2*t*t}function Xae(e,t){var r=ci()-.5;return e-t*Bae(r)*Math.log(1-2*Math.abs(r))}const Yae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Vae,cdf:Uae,mean:Wae,median:jae,mode:Gae,variance:Hae,sample:Xae},Symbol.toStringTag,{value:"Module"}));function qae(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function Zae(e,t,r){return e<0?0:.5+.5*_y((Math.log(e)-t)/Math.sqrt(2*r*r))}function Kae(e,t,r){return Math.exp(-1.4142135623730951*r*$E(2*e)+t)}function Jae(e,t){return Math.exp(e+t*t/2)}function Qae(e){return Math.exp(e)}function tle(e,t){return Math.exp(e-t*t)}function ele(e,t){return Math.exp(Wu()*t+e)}function rle(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const nle=Object.freeze(Object.defineProperty({__proto__:null,pdf:qae,cdf:Zae,inv:Kae,mean:Jae,median:Qae,mode:tle,sample:ele,variance:rle},Symbol.toStringTag,{value:"Module"}));function vj(e,t,r){return e!==e>>>0?!1:e<0?0:NE(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function ile(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=vj(i,t,r);return n}const ole=Object.freeze(Object.defineProperty({__proto__:null,pdf:vj,cdf:ile},Symbol.toStringTag,{value:"Module"}));function gj(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*gy(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function as(e,t){var r=t/2;return b0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function $1(e,t){var r=y0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function sle(e){return e>1?0:void 0}function ale(){return 0}function lle(){return 0}function ule(e){return Wu()*Math.sqrt(e/(2*zo(e/2)))}function cle(e){return e>2?e/(e-2):e>1?1/0:void 0}const fle=Object.freeze(Object.defineProperty({__proto__:null,pdf:gj,cdf:as,inv:$1,mean:sle,median:ale,mode:lle,sample:ule,variance:cle},Symbol.toStringTag,{value:"Module"}));function hle(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function Ai(e,t,r){return .5*(1+_y((e-t)/Math.sqrt(2*r*r)))}function pk(e,t,r){return-1.4142135623730951*r*$E(2*e)+t}function dle(e){return e}function ple(e){return e}function vle(e){return e}function gle(e,t){return Wu()*t+e}function mle(e,t){return t*t}const _le=Object.freeze(Object.defineProperty({__proto__:null,pdf:hle,cdf:Ai,inv:pk,mean:dle,median:ple,mode:vle,sample:gle,variance:mle},Symbol.toStringTag,{value:"Module"}));function yle(e,t,r){var n=1e-14;return Math.abs(r)<n?gj(e,t):Math.abs(e)<n?Math.exp(Ye((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ye(t/2)):t/e*(vk(e*Math.sqrt(1+2/t),t+2,r)-vk(e,t,r))}function vk(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return as(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var s=Ai(-r,0,1),a=n+1,l=a,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ye(3/2))*r;c<i||l>n||a>n;)l=a,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),a=f*N1(u,c+.5,t/2)+h*N1(u,c+1,t/2),s+=.5*a,c++;return o?1-s:s}const ble=Object.freeze(Object.defineProperty({__proto__:null,pdf:yle,cdf:vk},Symbol.toStringTag,{value:"Module"}));function wle(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function Sle(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function Tle(e,t,r){return t/Math.pow(1-e,1/r)}function kle(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function Ple(e,t){return e*(t*Math.SQRT2)}function Cle(e){return e}function Ele(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const Ale=Object.freeze(Object.defineProperty({__proto__:null,pdf:wle,cdf:Sle,inv:Tle,mean:kle,median:Ple,mode:Cle,variance:Ele},Symbol.toStringTag,{value:"Module"}));function lt(...e){return new lt._init(...e)}lt._init=function(...e){if($o(e[0]))if($o(e[0][0])){jp(e[1])&&(e[0]=un(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=jp(e[1])?un(e[0],e[1]):e[0],this.length=1;else if(Lr(e[0]))this[0]=nj.apply(null,e),this.length=1;else{if(e[0]instanceof lt)return lt(e[0].toArray());this[0]=[],this.length=1}return this};lt._init.prototype=lt.prototype;lt._init.constructor=lt;lt.setRandom=JW;const Tn=lt.prototype;Tn.length=0;Tn.push=Array.prototype.push;Tn.sort=Array.prototype.sort;Tn.splice=Array.prototype.splice;Tn.slice=Array.prototype.slice;Tn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};Tn.map=function(e,t){return lt(un(this,e,t))};Tn.cumreduce=function(e,t){return lt(dy(this,e,t))};Tn.alter=function(e){return LE(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{Tn[e]=function(t){if(t)return t.call(this,Tn[e].call(this)),this;const r=lt[e](this);return Array.isArray(r)?lt(r):r}});"row col".split(" ").forEach(e=>{Tn[e]=function(t,r){return r?(r.call(this,Tn[e].call(this,t)),this):lt(lt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{Tn[e]=function(...t){return lt(lt[e](...t))}});function mj(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/iu(e)}function Mle(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(mj(n,t));return cn(r)}function xle(e){return e}function Ile(e){return e}function Lle(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=lt._random_fn();while(t>n);return r-1}function Ole(e){var t=e,r,n,i,o,s,a,l,u,c,f;for(o=Math.sqrt(t),s=Math.log(t),l=.931+2.53*o,a=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*a/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(a/(f*f)+l)<=-t+r*s-fj(r+1))return r}}function Rle(e){return e<10?Lle(e):Ole(e)}const Dle=Object.freeze(Object.defineProperty({__proto__:null,pdf:mj,cdf:Mle,mean:xle,variance:Ile,sample:Rle},Symbol.toStringTag,{value:"Module"}));function Nle(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Fle(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function $le(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function zle(e,t,r){return(e+t+r)/3}function Ble(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Vle(e,t,r){return r}function Ule(e,t,r){var n=ci();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function Wle(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const jle=Object.freeze(Object.defineProperty({__proto__:null,pdf:Nle,cdf:Fle,inv:$le,mean:zle,median:Ble,mode:Vle,sample:Ule,variance:Wle},Symbol.toStringTag,{value:"Module"}));function OD(e,t,r){var n=12,i=6,o=-30,s=-50,a=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*Ai(p,0,1)-1;v>=Math.exp(s/r)?v=Math.pow(v,r):v=0;var m;e>u?m=c:m=f;for(var g=p,y=(l-p)/m,b=g+y,w=0,T=r-1,S=1;S<=m;S++){for(var k=0,x=.5*(b+g),A=.5*(b-g),I=1;I<=n;I++){var L,N;i<I?(L=n-I+1,N=h[L-1]):(L=I,N=-h[L-1]);var z=A*N,V=x+z,F=V*V;if(F>a)break;var G=2*Ai(V,0,1),K=2*Ai(V,e,1),q=G*.5-K*.5;q>=Math.exp(o/T)&&(q=d[L-1]*Math.exp(-(.5*F))*Math.pow(q,T),k+=q)}k*=2*A*r/Math.sqrt(2*Math.PI),w+=k,g=b,b+=y}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function Gle(e,t,r){var n=.322232421088,i=.099348462606,o=-1,s=.588581570495,a=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,m=1.208,g=1.4142,y=120,b=.5-.5*e,w=Math.sqrt(Math.log(1/(b*b))),T=w+((((w*f+u)*w+a)*w+o)*w+n)/((((w*h+c)*w+l)*w+s)*w+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-v/r+m*T/r),T*(S*Math.log(t-1)+g)}function tp(e,t,r){var n=1,i=t,o=16,s=8,a=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,m=.125,g=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return OD(e,n,i);var b=r*.5,w=b*Math.log(r)-r*Math.log(2)-Ye(b),T=b-1,S=r*.25,k;r<=u?k=d:r<=c?k=p:r<=f?k=v:k=m,w+=Math.log(k);for(var x=0,A=1;A<=50;A++){for(var I=0,L=(2*A-1)*k,N=1;N<=o;N++){var z,V;s<N?(z=N-s-1,V=w+T*Math.log(L+g[z]*k)-(g[z]*k+L)*S):(z=N-1,V=w+T*Math.log(L-g[z]*k)+(g[z]*k-L)*S);var F;if(V>=a){s<N?F=e*Math.sqrt((g[z]*k+L)*.5):F=e*Math.sqrt((-(g[z]*k)+L)*.5);var G=OD(F,n,i),K=G*y[z]*Math.exp(V);I+=K}}if(A*k>=1&&I<=l)break;x+=I}if(I>l)throw new Error("tukey.cdf failed to converge");return x>1&&(x=1),x}function Hle(e,t,r){var n=1,i=t,o=1e-4,s=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var a=Gle(e,i,r),l=tp(a,t,r)-e,u;l>0?u=Math.max(0,a-1):u=a+1;for(var c=tp(u,t,r)-e,f,h=1;h<s;h++){f=u-c*(u-a)/(c-l),l=c,a=u,f<0&&(f=0,c=-e),c=tp(f,t,r)-e,u=f;var d=Math.abs(u-a);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const Xle=Object.freeze(Object.defineProperty({__proto__:null,cdf:tp,inv:Hle},Symbol.toStringTag,{value:"Module"}));function Yle(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function qle(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function Zle(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function _j(e,t){return e*Bi(1+1/t)}function Kle(e,t){return e*Math.pow(Math.log(2),1/t)}function Jle(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Qle(e,t){return e*Math.pow(-Math.log(ci()),1/t)}function tue(e,t){return e*e*Bi(1+2/t)-Math.pow(_j(e,t),2)}const eue=Object.freeze(Object.defineProperty({__proto__:null,pdf:Yle,cdf:qle,inv:Zle,mean:_j,median:Kle,mode:Jle,sample:Qle,variance:tue},Symbol.toStringTag,{value:"Module"})),rue=Object.freeze(Object.defineProperty({__proto__:null,arcsine:Tse,beta:Rse,binomial:Nse,cauchy:Wse,centralF:Zse,chisquare:oae,exponential:pae,gamma:Sae,hypgeom:Tae,invgamma:Iae,kumaraswamy:zae,laplace:Yae,lognormal:nle,negbin:ole,noncentralt:ble,normal:_le,pareto:Ale,poisson:Dle,studentt:fle,triangular:jle,tukey:Xle,uniform:pse,weibull:eue},Symbol.toStringTag,{value:"Module"}));function gk(){const e=[...arguments];return Lr(e[1])?(e[0]-e[1])/e[2]:(e[0]-fr(e[1]))/Es(e[1],e[2])}function zE(){const e=[...arguments];let t;return $o(e[1])?(t=gk(e[0],e[1],e[3]),e[2]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2):e.length>2?(t=gk(e[0],e[1],e[2]),e[3]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2)}function mk(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-fr(e[1]))/(Es(e[1],!0)/Math.sqrt(e[1].length))}function nue(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(mk(e[0],e[1],e[2],e[3])),e[4]===1?as(-t,e[3]-1):as(-t,e[3]-1)*2):Lr(e[1])?(t=Math.abs(e[0]),e[2]===1?as(-t,e[1]-1):as(-t,e[1]-1)*2):(t=Math.abs(mk(e[0],e[1])),e[2]===1?as(-t,e[1].length-1):as(-t,e[1].length-1)*2)}function iue(){var e=[...arguments],t,r,n,i,o,s,a,l;if(e.length===1){for(o=new Array(e[0].length),a=0;a<e[0].length;a++)o[a]=e[0][a];e=o}for(r=[],a=0;a<e.length;a++)r=r.concat(e[a]);for(n=fr(r),t=0,a=0;a<e.length;a++)t=t+e[a].length*Math.pow(fr(e[a])-n,2);for(t/=e.length-1,s=0,a=0;a<e.length;a++)for(i=fr(e[a]),l=0;l<e[a].length;l++)s+=Math.pow(e[a][l]-i,2);return s/=r.length-e.length,t/s}function oue(){var e=[...arguments],t,r,n,i;if(Lr(e[0]))return 1-F1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-F1(o,t,r)}function sue(e,t,r){return 1-F1(e,t,r)}function _k(){var e=[...arguments],t,r,n,i,o;return Lr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=fr(e[0]),r=fr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function yj(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=_k(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=_k(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-tp(t,n,r-n)}function aue(e){for(var t=aj(e),r=e.map(l=>fr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var s=o+1;s<e.length;++s){var a=yj(r[o],r[s],e[o].length,e[s].length,t,n,e.length);i.push([[o,s],a])}return i}function lue(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(pk(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(pk(e[1]/2,0,1)*Es(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function uue(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs($1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs($1(e[1]/2,e[2].length-1)*Es(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function cue(e,t){return e<t}function bj(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function fue(e,t,r,n){const i=bj(e,t,r,n);return zE(i,1)}function hue(e,t,r,n){const i=bj(e,t,r,n);return zE(i,2)}const due=Object.freeze(Object.defineProperty({__proto__:null,zscore:gk,ztest:zE,tscore:mk,ttest:nue,anovafscore:iue,anovaftest:oue,ftest:sue,qscore:_k,qtest:yj,tukeyhsd:aue,normalci:lue,tci:uue,significant:cue,oneSidedDifferenceOfProportions:fue,twoSidedDifferenceOfProportions:hue},Symbol.toStringTag,{value:"Module"}));function Gi(e){return $o(e)||e.constructor.name==="jStat"}function _n(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),un(e,function(r,n,i){return r+t[n][i]})):un(e,function(r){return r+t})}function Su(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),un(e,function(r,n,i){return r-t[n][i]||0})):un(e,function(r){return r-t})}function yk(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),re(e,Bo(t))):un(e,function(r){return r/t})}function re(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,s=Wo(i,r=Gi(t)?t[0].length:o);let a=0;if(Gi(t)){for(;a<r;a++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][a];s[l][a]=n}return i===1&&a===1?s[0][0]:s}return un(e,function(l){return l*t})}function pue(e,t){return re(e.map(r=>[r]),[t])}function z1(e,t){Gi(e[0])||(e=[e]),Gi(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Aa(e):e,n=t[0].length===1&&t.length!==1?Aa(t):t,i=[],o=r.length,s=r[0].length,a,l;for(let u=0;u<o;u++){for(i[u]=[],a=0,l=0;l<s;l++)a+=r[u][l]*n[u][l];i[u]=a}return i.length===1?i[0]:i}function bk(e,t){return un(e,r=>Math.pow(r,t))}function vue(e){return un(e,t=>Math.exp(t))}function gue(e){return un(e,t=>Math.log(t))}function mue(e){return un(e,t=>Math.abs(t))}function Sf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Gi(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function _ue(e,t){return Math.acos(z1(e,t)/(Sf(e)*Sf(t)))}function BE(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Bo(e){for(var t=e.length,r=e[0].length,n=wu(t,r),i=wj(e,n),o=[],s=0,a;s<t;s++)for(o[s]=[],a=r;a<i[0].length;a++)o[s][a-r]=i[s][a];return o}function yue(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,s=i-t+1,a=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[s<0?s+t:s]*=e[l][c],n[a<t?a+t:a]*=e[l][c],s++,a--;s=--i-t+1,a=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function bue(e,t){var r=0,n=0,i=e.length,o=e[0].length,s=1,a=0,l=[],u,c,f,h;for(e=BE(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(s=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-s*e[r][h]}for(r=i-1;r>=0;r--){for(a=0,n=r+1;n<=i-1;n++)a=a+l[n]*e[r][n];l[r]=(e[r][u-1]-a)/e[r][r]}return l}function wj(e,t){var r=BE(e,t),n=r.length,i=r[0].length,o=0,s,a,l;for(a=0;a<n;a++){var u=a;for(l=a+1;l<n;l++)Math.abs(r[l][a])>Math.abs(r[u][a])&&(u=l);var c=r[a];for(r[a]=r[u],r[u]=c,l=a+1;l<n;l++)for(o=r[l][a]/r[a][a],s=a;s<i;s++)r[l][s]-=r[a][s]*o}for(a=n-1;a>=0;a--){for(o=r[a][a],l=0;l<a;l++)for(s=i-1;s>a-1;s--)r[l][s]-=r[a][s]*r[l][a]/o;for(r[a][a]/=o,s=n;s<i;s++)r[a][s]/=o}return r}function wue(e,t){var r=e[0].length,n=Wo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r-1,-1,-1).forEach(function(s){i=Oe(s+1,r).map(function(a){return n[a]*e[s][a]}),n[s]=(t[s]-cn(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function Sue(e,t){var r=e[0].length,n=Wo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r).forEach(function(s){i=Oe(s).map(function(a){return e[s][a]*n[a]}),n[s]=(t[s]-cn(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function Tue(e){var t=e.length,r=wu(t),n=Wo(e.length,e[0].length),i;return Oe(t).forEach(function(o){n[0][o]=e[0][o]}),Oe(1,t).forEach(function(o){Oe(o).forEach(function(s){i=Oe(s).map(function(a){return r[o][a]*n[a][s]}),r[o][s]=(e[o][s]-cn(i))/n[s][s]}),Oe(o,t).forEach(function(s){i=Oe(o).map(function(a){return r[o][a]*n[a][s]}),n[o][s]=e[i.length][s]-cn(i)})}),[r,n]}function kue(e){var t=e.length,r=Wo(e.length,e[0].length),n;return Oe(t).forEach(function(i){n=Oe(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-cn(n)),Oe(i+1,t).forEach(function(o){n=Oe(i).map(function(s){return r[i][s]*r[o][s]}),r[o][i]=(e[i][o]-cn(n))/r[i][i]})}),r}function Pue(e,t,r,n){for(var i=0,o=0,s=e.length,a=[],l=[],u=[],c,f,h,d;i<s;i++)for(a[i]=[],l[i]=[],u[i]=[],o=0;o<s;o++)i>o?(a[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],a[i][o]=u[i][o]=0):(u[i][o]=e[i][o],a[i][o]=l[i][o]=0);for(h=re(re(Bo(u),_n(a,l)),-1),f=re(Bo(u),t),c=r,d=_n(re(h,r),f),i=2;Math.abs(Sf(Su(d,c)))>n;)c=d,d=_n(re(h,c),f),i++;return d}function Cue(e,t,r,n){for(var i=0,o=e.length,s=[],a=[],l=[],u,c,f,h,d;i<o;i++)for(s[i]=[],a[i]=[],l[i]=[],u=0;u<o;u++)i>u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):i<u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):(l[i][u]=e[i][u],s[i][u]=a[i][u]=0);for(h=re(re(Bo(_n(l,s)),a),-1),f=re(Bo(_n(l,s)),t),c=r,d=_n(re(h,r),f),i=2;Math.abs(Sf(Su(d,c)))>n;)c=d,d=_n(re(h,c),f),i=i+1;return d}function Eue(e,t,r,n,i){for(var o=0,s=e.length,a=[],l=[],u=[],c,f,h,d,p;o<s;o++)for(a[o]=[],l[o]=[],u[o]=[],c=0;c<s;c++)o>c?(a[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],a[o][c]=u[o][c]=0):(u[o][c]=e[o][c],a[o][c]=l[o][c]=0);for(d=re(Bo(_n(u,re(a,i))),Su(re(u,1-i),re(l,i))),h=re(re(Bo(_n(u,re(a,i))),t),i),f=r,p=_n(re(d,r),h),o=2;Math.abs(Sf(Su(p,f)))>n;)f=p,p=_n(re(d,f),h),o++;return p}function Aue(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],s,a,l,u,c;n<t-1;n++){for(s=0,u=n+1;u<r;u++)s+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,s=c*Math.sqrt(s),a=Math.sqrt((s*s-e[n+1][n]*s)/2),i=Wo(t,1),i[n+1][0]=(e[n+1][n]-s)/(2*a),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*a);o=Su(wu(t,r),re(re(i,Aa(i)),2)),e=re(o,re(e,o))}return e}function Sj(e){var t=e.length,r=e[0].length,n=Wo(r,r);e=py(e);var i,o,s;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(cn(Oe(t).map(function(a){return e[a][o]*e[a][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(s=o+1;s<r;s++)for(n[o][s]=cn(Oe(t).map(function(a){return e[a][o]*e[a][s]})),i=0;i<t;i++)e[i][s]=e[i][s]-e[i][o]*n[o][s]}return[e,n]}function Mue(e){e=py(e);var t=e.length,r=wu(t);return Oe(t-1,-1,-1).forEach(function(n){Sd(r,{row:n},yk(ss(r,{row:n}),e[n][n])),Sd(e,{row:n},yk(ss(e,{row:n}),e[n][n])),Oe(n).forEach(function(i){var o=re(e[i][n],-1),s=ss(e,{row:i}),a=re(ss(e,{row:n}),o);Sd(e,{row:i},_n(s,a));var l=ss(r,{row:i}),u=re(ss(r,{row:n}),o);Sd(r,{row:i},_n(l,u))})}),r}function Tj(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=Sj(e),o=e[0].length,s=ss(n,{col:{end:o}}),a=ss(i,{row:{end:o}}),l=Mue(a),u=Aa(s);u[0].length===void 0&&(u=[u]);var c=re(re(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function kj(e){for(var t=1,r=e.length,n=wu(r,r),i=[],o,s,a,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,s=0;s<r;s++)for(a=0;a<r;a++)s!=a&&c<Math.abs(e[s][a])&&(c=Math.abs(e[s][a]),l=s,u=a);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=wu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=re(n,h),o=re(re(Bo(h),e),h),e=o,t=0,s=1;s<r;s++)for(a=1;a<r;a++)s!=a&&Math.abs(e[s][a])>.001&&(t=1)}for(s=0;s<r;s++)i.push(e[s][s]);return[n,i]}function xue(e,t,r,n,i,o){var s,a,l,u,c;if(o===2)for(;n<=r;)s=t*e(n,i),a=t*e(n+t,i+s),l=i+(s+a)/2,i=l,n=n+t;if(o===4)for(;n<=r;)s=t*e(n,i),a=t*e(n+t/2,i+s/2),u=t*e(n+t/2,i+a/2),c=t*e(n+t,i+u),l=i+(s+2*a+2*u+c)/6,i=l,n=n+t;return i}function Iue(e,t,r,n){for(var i=0,o=(r-t)/2,s=[],a=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)s[h]=f;for(u=s.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(s[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)a[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=a.length,l=a,a=[],u++}return l}function Lue(e,t,r,n){function i(p,v){for(var m=0,g=p.length,y;m<g;m++)p[m]===v&&(y=m);return y}for(var o=Math.abs(r-e[i(e,r)+1]),s=0,a=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),a[s]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,s++;for(h=a.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*a[d+1]-a[d])/(Math.pow(4,f)-1);h=l.length,a=l,l=[],f++}return a}function Oue(e,t,r,n){for(var i=(r-t)/n,o=e(t),s=[],a=t,l=0,u=1,c;a<=r;a=a+i,l++)s[l]=a;for(c=s.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(s[u]);return i/3*(o+e(r))}function Rue(e,t,r,n){for(var i=e.length,o=0,s=0,a=[],l=[],u=[],c=[],f;s<i;s++){for(a[s]=1,f=0;f<i;f++)s!=f&&(a[s]*=(n-e[f])/(e[s]-e[f]));for(l[s]=0,f=0;f<i;f++)s!=f&&(l[s]+=1/(e[s]-e[f]));u[s]=(1-2*(n-e[s])*l[s])*(a[s]*a[s]),c[s]=(n-e[s])*(a[s]*a[s]),o+=u[s]*t[s]+c[s]*r[s]}return o}function Due(e,t,r){for(var n=0,i=0,o,s,a=e.length;i<a;i++){for(s=t[i],o=0;o<a;o++)i!=o&&(s*=(r-e[o])/(e[i]-e[o]));n+=s}return n}function Nue(e,t,r){for(var n=e.length,i=0,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)s[i]=[],a[i]=[],s[i][i-1]=c[i-1],s[i][i]=2*(c[i-1]+c[i]),s[i][i+1]=c[i],a[i][0]=l[i];for(u=re(Bo(s),a),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+bk(r-e[o],2)*u[o]+(r-e[o])*bk(r-e[o],2)*h[o]}function Fue(){throw new Error("gauss_quadrature not yet implemented")}function $ue(e){var t=e.length,r=e[0].length,n=0,i,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)s[n]=cn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-s[i];for(h=Aa(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=z1([h[n]],[h[i]])/(r-1);for(l=kj(d),p=l[0],a=l[1],v=Aa(p),n=0;n<a.length;n++)for(i=n;i<a.length;i++)a[n]<a[i]&&(o=a[n],a[n]=a[i],a[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Aa(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=z1([v[n]],[f[i]]);return[e,a,v,c]}const zue=Object.freeze(Object.defineProperty({__proto__:null,add:_n,subtract:Su,divide:yk,multiply:re,outer:pue,dot:z1,pow:bk,exp:vue,log:gue,abs:mue,norm:Sf,angle:_ue,aug:BE,inv:Bo,det:yue,gauss_elimination:bue,gauss_jordan:wj,triaUpSolve:wue,triaLowSolve:Sue,lu:Tue,cholesky:kue,gauss_jacobi:Pue,gauss_seidel:Cue,SOR:Eue,householder:Aue,QR:Sj,lstsq:Tj,jacobi:kj,rungekutta:xue,romberg:Iue,richardson:Lue,simpson:Oue,hermite:Rue,lagrange:Due,cubic_spline:Nue,gauss_quadrature:Fue,PCA:$ue},Symbol.toStringTag,{value:"Module"}));function Bue(e){var t=e[0].length,r=Oe(t).map(function(n){var i=Oe(t).filter(function(o){return o!==n});return Pj(D1(e,n).map(function(o){return o[0]}),D1(e,i))});return r}function Pj(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=Tj(t,e),s=re(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),a=Su(e,s),l=fr(e),u=cn(s.map(function(d){return Math.pow(d-l,2)})),c=cn(e.map(function(d,p){return Math.pow(d-s[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:s,resid:a,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Vue(e){var t=Bue(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=as(l,e.df_resid);return(u>.5?1-u:u)*2}),s=$1(.975,e.df_resid),a=e.coef.map(function(l,u){var c=s*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:a}}function Uue(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,s){return N1(i/(s/o+i),o/2,s/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function Wue(e,t){var r=Pj(e,t),n=Vue(r),i=Uue(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const jue={ols:Wue},Gue=Object.freeze(Object.defineProperty({__proto__:null,models:jue},Symbol.toStringTag,{value:"Module"}));Object.assign(lt,Foe,sse,due,zue,Gue,Cse);for(const[e,t]of Object.entries(rue)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),lt[e]=r,lt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?lt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?lt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){lt.prototype[e]=function(){return lt(lt.map(this,function(t){return lt[e](t)}))}});lt.prototype.randn=function(){return lt(lt.randn.apply(null,arguments))};const VE=KW.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(n,i){var o=[],s=0,a=this;if(VE(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,lt.prototype[r].call(a,n))}),this;if(this.length>1){for(a=n===!0?this:this.transpose();s<a.length;s++)o[s]=lt[r](a[s]);return o}return lt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(n,i){var o=[],s=0,a=this;if(VE(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,lt.prototype[r].call(a,n))}),this;if(this.length>1){for(r!=="sumrow"&&(a=n===!0?this:this.transpose());s<a.length;s++)o[s]=lt[r](a[s]);return n===!0?lt[r](lt.utils.toVector(o)):o}return lt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(){var n=[],i=0,o=this,s=Array.prototype.slice.call(arguments),a;if(VE(s[s.length-1])){a=s[s.length-1];var l=s.slice(0,s.length-1);return setTimeout(function(){a.call(o,lt.prototype[r].apply(o,l))}),this}else{a=void 0;var u=function(f){return lt[r].apply(o,[f].concat(s))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));lt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};lt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?lt.normal.cdf(-i,0,1):lt.normal.cdf(-i,0,1)*2};lt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};lt.prototype.ttest=function(t,r){return r===1?1-lt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):lt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};lt.prototype.anovafscore=function(){return lt.anovafscore(this.toArray())};lt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return lt.ftest(this.anovafscore(),this.length-1,t-this.length)};lt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};lt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{lt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,lt.prototype[e].call(n,t)),this):typeof lt[e](this,t)=="number"?lt[e](this,t):lt(lt[e](this,t))}});lt.jStat=lt;function Hue(e,t,r,n){let i=[];for(let s=0;s<=r;s++){const a=.5+s+0,u=lt.lognormal.pdf(a,e,n)*t;u<.01||i.push([s,u])}return i}function Xue(e,t,r,n){let i=[];for(let s=0;s<=r;s++){const a=.5+s+0,u=lt.gamma.pdf(a,e,n)*t;u<.01||i.push([s,u])}return i}function Yue(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.uniform.pdf(s,e-n/2,e+n/2)*t;l<.01||i.push([o,l])}return i}function que(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.triangular.pdf(s,e-n,e+n,e)*t;l<.01||i.push([o,l])}return i}function Zue(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.normal.pdf(s,e,n)*t;l<.01||i.push([o,l])}return i}function yy(e,t,r,n){if(n)return Kue(e,t,r);const i=t;let o=[];for(let s=0;s<=r;s++){const a=lt.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*i;l<.01||o.push([s,l])}return o}function Kue(e,t,r){const n=t;let i=[],o=0;for(let s=0;s<=r;s++){const a=lt.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*n;if(l<.01)continue;const u=Math.floor(s*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function Jue(e,t,r,n,i,o){let s=[],a=0;for(let p=0;p<=i;p++){const v=lt.binomial.pdf(p,i,e/i);if(v<0){s=null;break}const m=v*t;if(m<.01)continue;const g=Math.floor(p*1.684);if(a)for(let y=a;y<g;y++)s.push([y,0]);s.push([g,m]),a=g+1}const l=n/t,u={};for(let p=0;p<=i;p++){const v=lt.binomial.pdf(p,i,r/i);if(v<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(v*n<.01)continue;const g=o?Math.floor(p*1.684):p;s.forEach(y=>{const[b,w]=y,T=b+g,S=w*v*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,v]of Object.entries(u)){if(v<.01)continue;const m=parseInt(p);m<c&&(c=m),m>f&&(f=m)}const h=[];for(let p=c;p<=f;p++)if(p in u){const v=u[p];h.push([p,v])}else h.push([p,0]);return{bellU:s,bellL:h}}function Cj(e,t){let r={};if(e)for(let[o,s]of e)r[o]=s;for(let[o,s]of t)o in r?r[o]+=s:r[o]=s;let n=Object.entries(r).sort((o,s)=>o[0]-s[0]),i=[];for(let[o,s]of n)i.push([o,s]);return i}function by(e,t,r,n,i){if(n)throw Error("not implemented");return Que(e,t,r,i)}function Que(e,t,r,n){let i,o,s;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:s};i=0;for(const[p,[v,m]]of Object.entries(e)){const g=parseInt(v);if(n&&g==0)continue;const y=g in t?t[g]:0,b=m-y;i+=b*b}const a=3,l=r+2,u=Object.keys(e).sort((p,v)=>e[v][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const v=e[p][0];if(n&&v=="0")return;const m=e[p][1],g=v in t?t[v]:0;(m>=a||g>=a||f<l)&&(c[v]={y_model:m,y_observed:g},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:s};let d=0;o=0;for(const[p,{y_model:v,y_observed:m}]of Object.entries(c)){const g=v-m;o+=g*g/v,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:s}):(isFinite(o)?s=1-lt.chisquare.cdf(o,d-1-r):s=0,{mse:i,chisq:o,pval:s,variables:r})}function Ej(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}br([Va,Df,xu,Iu,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);const tce={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Ga},methods:{formatFixed:st,isGoodVal:ei,formatKMG:e_,makeBinomialArray:yy,loss:by,applyGiantBonus:Ej,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],s=i/n;o<=n&&0<s&&s<1?(r.loss.binomtest=xE(o,Math.round(n),{p:s}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,s,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,s),r.loss.binomtest=NaN)}return r},tuneModelA(e,t,r){let n=[t];t===void 0&&(n=[1,10,20,40,110,120,140,150],n=n.filter(o=>o>=e&&o<=this.stats.max*5),r&&n.push(r));let i={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return n.forEach(o=>{const s=this.makeModelA(e,o);if(!s)return;ei(s.loss.mse)&&(!ei(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>60?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>50?(e.lo/=1.684,e.init/=1.684,e.hi/=1.64):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of r)if(Math.floor(this.sweepRange.range/s)<20){t=s;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let s=n;s<=this.sweepRange.hi;s+=t){let a=this.tuneModelA(s,void 0);s>this.sweepRange.init&&s<this.sweepRange.init+t&&o.push([this.sweepRange.init,a.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([s,a.n,a.loss.mse,a.loss.chisq,a.loss.pval]),a.loss.mse<i.loss.mse&&(i=a)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${st(r[0],2)}<br/>n=${st(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>st(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Nr=e=>($e("data-v-cd6f3e00"),e=e(),ze(),e),ece=Nr(()=>_("span",{class:"title"},"Model A",-1)),rce=Nr(()=>_("span",null,[R(": all points were taken from a single distribution with "),_("i",null,"np = M")],-1)),nce=R(" with giant bonus"),ice={key:0},oce={style:{float:"left"}},sce=R(" Sweeping through "),ace=Nr(()=>_("i",null,"np",-1)),lce={key:0,id:"chartSweep"},uce={key:1},cce={style:{padding:"1em"}},fce=Nr(()=>_("th",null,null,-1)),hce=Nr(()=>_("th",null,"np",-1)),dce=Nr(()=>_("th",null,"n",-1)),pce=Nr(()=>_("th",null,"MSE",-1)),vce=Nr(()=>_("th",null,"p-val",-1)),gce=Nr(()=>_("td",null,"Best fit:",-1)),mce=Nr(()=>_("td",null,"Manual:",-1)),_ce=R(" np: "),yce=["value","min","max","step"],bce=R(" n: "),wce=["value","min"],Sce=Nr(()=>_("br",null,null,-1)),Tce={id:"chartHisto",style:{float:"left"}},kce=Nr(()=>_("div",{style:{clear:"both"}},null,-1)),Pce=Nr(()=>_("br",null,null,-1)),Cce=Nr(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),Ece={key:0,class:"fsxs"},Ace=R("p-val: "),Mce=Nr(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),xce=[Ace,Mce],Ice=Nr(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Lce=Nr(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Oce(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[ece,rce,_("p",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>r.isGiant=a)},null,512),[[Ne,r.isGiant]]),nce]),r.isGiant?(E(),M("p",ice,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):Z("",!0),_("div",null,[_("div",oce,[sce,ace,R(" values in "+C(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+C(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(E(),M("div",lce,[ft(s,{option:o.makeChartASweep},null,8,["option"])])):(E(),M("div",uce," [failed] ")),_("div",cce,[_("table",null,[_("tr",null,[fce,hce,dce,pce,Z("",!0),vce]),o.modelASweep.result?(E(),M("tr",{key:0,class:Ir({strike:r.stats.aBad})},[gce,_("td",null,C(o.formatFixed(o.modelASweep.result.np,4)),1),_("td",null,C(o.formatFixed(o.modelASweep.result.n)),1),_("td",null,C(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):Z("",!0),_("tr",null,[mce,_("td",null,C(o.formatFixed(e.selected_np,4)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelA.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelA.loss.pval,4)),1)])]),_ce,_("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedNP(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,yce),bce,_("input",{type:"range",onInput:t[2]||(t[2]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,wce),Sce])]),_("div",Tce,[o.modelA.bell?(E(),Or(s,{key:0,option:o.makeChartHist},null,8,["option"])):(E(),M(W,{key:1},[R(" [failed to build the requested distribution np="+C(o.modelA.np)+" n="+C(o.modelA.n)+" ] ",1)],64))]),kce,Pce,Cce,e.isBinary?(E(),M("p",Ece,xce)):(E(),M(W,{key:1},[Ice,Lce],64))])],64)}const Rce=Gt(tce,[["render",Oce],["__scopeId","data-v-cd6f3e00"]]);br([Va,Df,xu,Iu,Xut,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);const Dce={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:Ga},methods:{isGoodVal:ei,formatFixed:st,formatKMG:e_,makeBinomialArray:yy,loss:by,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],s=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>s){const l={...i};l[0]=s,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=xE(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;ei(o.loss.mse)&&(!ei(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),s=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,s,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of n)if(Math.floor(t/a)<40){r=a;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const s=[];for(let a=i;a<=this.sweep_hi;a+=r){const l=this.tuneModelB(a,void 0);if(!l)continue;s.push([a,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),ei(l.loss.mse)&&(!ei(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",a,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:s}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${st(r[0],2)}<br/>n=${st(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>st(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),s=r.size([1,0])[0]*.1,a=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-s,y1:i[1],x2:i[0]+s,y2:i[1]},style:a},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:a},{type:"line",transition:["shape"],shape:{x1:o[0]-s,y1:o[1],x2:o[0]+s,y2:o[1]},style:a}]}},tooltip:{show:!1},z:100}]}}}},Sr=e=>($e("data-v-7790bb48"),e=e(),ze(),e),Nce=Sr(()=>_("span",{class:"title"},"Model B",-1)),Fce=Sr(()=>_("span",null,[R(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),_("i",null,"np"),R(", that \u03BB"),_("i",null,"np"),R(" = M")],-1)),$ce=R("Sweeping through "),zce=Sr(()=>_("i",null,"np",-1)),Bce={style:{float:"left"}},Vce={key:0,id:"chartSweep"},Uce={style:{padding:"1em"}},Wce={style:{float:"left"}},jce=Sr(()=>_("th",null,null,-1)),Gce=Sr(()=>_("th",null,"np",-1)),Hce=Sr(()=>_("th",null,"n",-1)),Xce=Sr(()=>_("th",null,"MSE",-1)),Yce=Sr(()=>_("th",null,"p-val",-1)),qce={key:0},Zce=Sr(()=>_("td",null,"Best fit:",-1)),Kce=Sr(()=>_("td",null,"Manual:",-1)),Jce=R(" np\u1D38: "),Qce=["value","min","max","step"],tfe=R(" n\u1D38: "),efe=["value"],rfe=Sr(()=>_("div",{style:{clear:"both"}},null,-1)),nfe={key:0,style:{float:"left"}},ife={id:"chartHisto"},ofe=Sr(()=>_("br",null,null,-1)),sfe={key:0},afe=R(" Corresponding range for "),lfe=Sr(()=>_("i",null,"np",-1)),ufe={key:1},cfe=Sr(()=>_("div",{style:{clear:"both"}},null,-1)),ffe=Sr(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),hfe={key:0,class:"fsxs"},dfe=R("p-val: "),pfe=Sr(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),vfe=[dfe,pfe],gfe=Sr(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),mfe=Sr(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function _fe(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[Nce,Fce,o.modelB?(E(),M(W,{key:0},[_("p",null,[$ce,zce,R(" values in "+C(o.formatFixed(this.sweep_lo,2))+"\u2026"+C(o.formatFixed(this.sweep_hi,2))+" range:",1)]),_("div",null,[_("div",Bce,[o.modelBSweep?(E(),M("div",Vce,[ft(s,{option:o.makeChartBSweep},null,8,["option"])])):Z("",!0),_("div",Uce,[_("div",Wce,[_("table",null,[_("tr",null,[jce,Gce,Hce,Xce,Z("",!0),Yce]),o.modelBSweep.result?(E(),M("tr",qce,[Zce,_("td",null,C(o.formatFixed(o.modelBSweep.result.np,3)),1),_("td",null,C(o.modelBSweep.result.n),1),_("td",null,C(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):Z("",!0),_("tr",null,[Kce,_("td",null,C(o.formatFixed(e.selected_np,3)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelB.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelB.loss.pval,4)),1)])]),_("p",null,[Jce,_("input",{type:"range",onInput:t[0]||(t[0]=a=>o.applySelectedNp(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,Qce),tfe,_("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,efe)])]),rfe])]),o.modelB.bell?(E(),M("div",nfe,[_("div",ife,[ft(s,{option:o.makeChartBHist},null,8,["option"])]),_("div",null,[R(" Bin 0 has 1-\u03BB \u2248 "+C(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+C(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),ofe,R(" Depending on actual \u03BB could potentially be "+C(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+C(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(E(),M("p",sfe,[afe,lfe,R(": "+C(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+C(o.formatFixed(o.npRangeForBinary.max,3)),1)])):Z("",!0)])])):(E(),M("div",ufe," bad parameters ")),cfe]),_("div",null,[ffe,o.npRangeForBinary?(E(),M("p",hfe,vfe)):(E(),M(W,{key:1},[gfe,mfe],64))])],64)):Z("",!0)],64)}const yfe=Gt(Dce,[["render",_fe],["__scopeId","data-v-7790bb48"]]);br([Va,Df,xu,Iu,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);class bfe{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const wfe={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Ga},methods:{isGoodVal:ei,formatFixed:st,formatKMG:e_,makeBinomialArray:yy,makeBinomialArraysForGiant:Jue,sumDistributions:Cj,loss:by,applyGiantBonus:Ej,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let s={il:0,iu:0,model:i};for(let a=-30;a<=30;a++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+a*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<s.model.loss.mse&&(s={il:a,iu:l,model:d})}return s},findPsRound(e,t,r,n,i,o){for(;t<=150;){let s=this.findPsStep(e,r,n,o,i);if(s.il==0&&s.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:s.model};if(r+=s.iu*o,n+=s.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:s.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const s={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);s.bellU=l.bellU,s.bellL=l.bellL,s.bell=this.sumDistributions(s.bellL,s.bellU)}else s.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),s.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),s.bell=this.sumDistributions(s.bellL,s.bellU);s.loss=this.loss(s.bell,this.histogram.map,3),ei(s.loss.mse)&&(!ei(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let s=new bfe;s.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(s,e,n,i,o,r);const a=s.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:s,psGridDots:a}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,s=(n+i)/2;let a=.2;this.stats.mean<2&&(a=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+a,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+a;if(l/u>e){const g=l,y=l/e;t=o-g/2,r=o+g/2,n=s-y/2,i=s+y/2}else{const g=u*e,y=u;t=o-g/2,r=o+g/2,n=s-y/2,i=s+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(g){const y=g.data;return`np\u1D41=${st(y[0],2)}<br/>np\u1D38=${st(y[1],2)}<br/>n=${st(y[2],2)}<br/>MSE=${y[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(y[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:g=>`${g[1]} \u2192 ${st(g[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},kn=e=>($e("data-v-ada12390"),e=e(),ze(),e),Sfe=kn(()=>_("span",{class:"title"},"Model C",-1)),Tfe=R(": some points were taken from a distribution L, and the rest from distribution U,"),kfe=kn(()=>_("br",null,null,-1)),Pfe=kn(()=>_("br",null,null,-1)),Cfe=R(" with giant bonus on Unlucky"),Efe=R(" with giant bonus on Lucky"),Afe={style:{float:"left"}},Mfe={style:{width:"570px",height:"270px"}},xfe={key:1,class:"inner"},Ife={style:{padding:"1em"}},Lfe={style:{float:"left"}},Ofe=kn(()=>_("tr",null,[_("th"),_("th",null,"np\u1D41"),_("th",null,"np\u1D38"),_("th",null,"n"),_("th",null,"MSE"),_("th",null,"p-val")],-1)),Rfe=kn(()=>_("td",null,"Best fit:",-1)),Dfe=kn(()=>_("td",null,"Manual:",-1)),Nfe=["value","min","max","step"],Ffe=R(" np\u1D41 "),$fe=kn(()=>_("br",null,null,-1)),zfe=["value","max","step"],Bfe=R(" np\u1D38 "),Vfe=kn(()=>_("br",null,null,-1)),Ufe=["value"],Wfe=R(" n "),jfe=kn(()=>_("div",{style:{clear:"both"}},null,-1)),Gfe={key:0,id:"chartHisto",style:{float:"left"}},Hfe=kn(()=>_("div",{style:{clear:"both"}},null,-1)),Xfe=kn(()=>_("br",null,null,-1)),Yfe=kn(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),qfe=kn(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Zfe=kn(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Kfe(e,t,r,n,i,o){var a,l;const s=Ot("v-chart");return E(),M(W,null,[Sfe,_("span",null,[Tfe,kfe,R(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+C(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+C(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+C(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+C(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),Pfe,_("p",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>r.isGiant=u)},null,512),[[Ne,r.isGiant]]),Cfe]),_("p",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=u=>e.isGiant_lucky=u)},null,512),[[Ne,e.isGiant_lucky]]),Efe]),_("div",Afe,[_("div",Mfe,[((l=(a=o.modelCSweep)==null?void 0:a.result)==null?void 0:l.npU)&&e.bestPval?(E(),Or(s,{key:0,option:o.makeChartCGrid},null,8,["option"])):(E(),M("div",xfe," np\u1D41=0 or no bestPval "))]),_("div",Ife,[_("div",Lfe,[_("table",null,[Ofe,o.modelCSweep.result?(E(),M("tr",{key:0,class:Ir({strike:r.stats.dBad})},[Rfe,_("td",null,C(o.formatFixed(o.modelCSweep.result.npU,2)),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.npL,2)),1),_("td",null,C(o.modelCSweep.result.n),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):Z("",!0),_("tr",null,[Dfe,_("td",null,C(o.formatFixed(e.selected_npU,2)),1),_("td",null,C(o.formatFixed(e.selected_npL,2)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelC.loss.mse,2)),1),_("td",null,C(o.formatFixed(o.modelC.loss.pval,4)),1)])]),_("p",null,[_("input",{type:"range",onInput:t[2]||(t[2]=u=>o.applySelectedNpU(Number(u.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Nfe),Ffe,$fe,_("input",{type:"range",onInput:t[3]||(t[3]=u=>o.applySelectedNpL(Number(u.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,zfe),Bfe,Vfe,_("input",{type:"range",onInput:t[4]||(t[4]=u=>o.applySelectedN(Number(u.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Ufe),Wfe])]),jfe])]),o.modelC.bell?(E(),M("div",Gfe,[ft(s,{option:o.makeChartCHist},null,8,["option"])])):Z("",!0),Hfe,Xfe,Yfe,qfe,Zfe],64)}const Jfe=Gt(wfe,[["render",Kfe],["__scopeId","data-v-ada12390"]]);br([Va,Df,xu,Iu,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);const Qfe={setup(){const e=gt(),t=koe(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{ItemIcon:fi,VChart:Ga,DRMA:Rce,DRMB:yfe,DRMC:Jfe},provide(){return{[jz]:Ze(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const s=lt.binomial.cdf(o,n,1-t/100);i.push(s)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,s)=>o-s),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,m]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,m]of Object.entries(n))for(let g of m.weights)g>this.stats.generalConfidence/100,g>1-this.stats.generalConfidence/100;let i=[],o=[],s=0,a=100,l=0;for(const[v,m]of Object.entries(n)){a=Math.min(a,v),l=Math.max(l,v);let{len:g,luckyLen:y,sorted:b,weights:w}=m;s+=y,i.push(...b),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:a,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:lt.min(i),max:lt.max(i),range:lt.range(i),sum:lt.sum(i),mean:lt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:lt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:s,share:s/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-s,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,m]of Object.entries(n)){let{len:g,luckyLen:y,luckeyLen95:b,sorted:w,weights:T}=m;for(let S=0;S<g;S++){const k=w[S],x=T[S];f+=k*(1-x),h+=k*x}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,m]of Object.entries(n)){let{len:g,sorted:y,weights:b}=m;for(let w=0;w<g;w++){const T=b[w],S=y[w]-c.unlucky.mean;d+=S*S*(1-T);const k=y[w]-c.lucky.mean;p+=k*k*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=lt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:st,binomialTest:xE,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed_202505_202509.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ji=e=>($e("data-v-cad86964"),e=e(),ze(),e),the={id:"menu"},ehe={style:{display:"none"}},rhe=Ji(()=>_("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),nhe=Ji(()=>_("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),ihe={key:1},ohe=Ji(()=>_("tr",null,[_("th",{class:"fsxs"},"n"),_("th",{class:"fsxs"},"np\u1D41"),_("th",{class:"fsxs"},"np\u1D38"),_("th",{class:"fsxs"},"item"),_("th",{class:"fsxs"},"normal"),_("th",{class:"fsxs"},"giant")],-1)),she={class:"fsxs"},ahe={class:"fsxs"},lhe={class:"fsxs"},uhe={class:"center"},che=["title","onClick"],fhe=["title"],hhe={id:"content"},dhe=Ji(()=>_("tr",null,[_("td",null,"mute"),_("td",null,"luck")],-1)),phe={class:"center"},vhe=["onUpdate:modelValue"],ghe=R(" Possible luck procs observed with "),mhe=J1('<option value="1.5" data-v-cad86964>\xB11.5\u03C3</option><option value="2" data-v-cad86964>\xB12\u03C3</option><option value="2.5" data-v-cad86964>\xB12.5\u03C3</option><option value="3" data-v-cad86964>\xB13\u03C3</option><option value="3.5" data-v-cad86964>\xB13.5\u03C3</option><option value="4" data-v-cad86964>\xB14\u03C3</option>',6),_he=[mhe],yhe=Ji(()=>_("tr",null,[_("th"),_("th",null,"min"),_("th",null,"max")],-1)),bhe=Ji(()=>_("td",null,"count",-1)),whe=Ji(()=>_("td",null,"% of total",-1)),She={id:"settings"},The=R(" Use model:"),khe=Ji(()=>_("br",null,null,-1)),Phe=Ji(()=>_("label",{for:"option1"},[R("A. Same item drop regardless of luck (plants, lumber, ores)"),_("br")],-1)),Che=Ji(()=>_("label",{for:"option2"},[R("B. Item only drops when luck procs (sacks, lumbering rares)"),_("br")],-1)),Ehe=Ji(()=>_("label",{for:"option3"},[R("C. Different drops when luck procs and when not (eggs, honey)"),_("br")],-1)),Ahe={key:0,id:"modelA",style:{float:"left"}},Mhe={key:1},xhe={key:2};function Ihe(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon"),l=Ot("DRMA"),u=Ot("DRMB"),c=Ot("DRMC");return E(),M("main",null,[_("div",the,[_("div",ehe,C(n.dropratesStore.selected_pzk)+" "+C(n.dropratesStore.selected_ik)+" "+C(n.dropratesStore.selected_specie),1),rhe,nhe,(E(!0),M(W,null,mt(i.alldata,(f,h)=>(E(),M(W,null,[h in n.gameStore.plantzoneStatic?(E(),Or(s,{key:0,tag:"a",to:{path:"./",hash:"#node"+h}},{default:be(()=>[R(C(h)+" "+C(n.gameStore.plantzoneName(h)),1)]),_:2},1032,["to"])):(E(),M("span",ihe,C(h),1)),_("table",null,[ohe,(E(!0),M(W,null,mt(f,(d,p)=>(E(),M("tr",null,[_("td",she,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].rolls),1)],64)):Z("",!0)]),_("td",ahe,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].unlucky?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].unlucky[p]),1)],64)):Z("",!0)]),_("td",lhe,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].lucky?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].lucky[p]),1)],64)):Z("",!0)]),_("td",null,[ft(s,{tag:"a",to:{path:"./settings",hash:"#item"+p}},{default:be(()=>[_("span",null,[ft(a,{ik:Number(p)},null,8,["ik"])])]),_:2},1032,["to"]),R(" "+C(n.gameStore.itemName(p)),1)]),(E(),M(W,null,mt(["normal","giant"],v=>_("td",uhe,[v in d?(E(),M(W,{key:0},[h!=n.dropratesStore.selected_pzk||p!=n.dropratesStore.selected_ik||v!=n.dropratesStore.selected_specie?(E(),M("button",{key:0,title:`item ${p} ${v}`,onClick:m=>o.activate(h,p,v)},C(Object.values(d[v]).flat().length),9,che)):(E(),M("button",{key:1,title:`item ${p} ${v}`,class:"pressed"},C(Object.values(d[v]).flat().length),9,fhe))],64)):Z("",!0)])),64))]))),256))])],64))),256))]),_("div",hhe,[_("details",null,[_("summary",null,[R("Dataset: size N = "+C(o.stats.len)+", sum "+C(o.stats.sum)+", mean M = "+C(o.formatFixed(o.stats.mean,3))+"\xB1"+C(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(E(),M(W,{key:0},[R(C(this.stats.maxLuck),1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(this.stats.minLuck,2))+"\u2026"+C(o.formatFixed(this.stats.maxLuck,2)),1)],64)),R("\u{1F340} \u2192 \u03BB \u2208 "+C(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+C(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),_("div",null,[_("table",null,[dhe,(E(!0),M(W,null,mt(o.stats.dataRaw,(f,h)=>(E(),M("tr",{class:Ir({strike:i.hide_buckets[h]})},[_("td",phe,[tt(_("input",{"onUpdate:modelValue":d=>i.hide_buckets[h]=d,type:"checkbox"},null,8,vhe),[[Ne,i.hide_buckets[h]]])]),_("td",null,C(h),1),(E(!0),M(W,null,mt(f,d=>(E(),M("td",null,C(d),1))),256))],2))),256))])]),_("p",null,[ghe,tt(_("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>i.generalSigmas=f)},_he,512),[[He,i.generalSigmas]]),R(" ("+C(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),_("table",null,[yhe,_("tr",null,[bhe,_("td",null,C(o.formatFixed(o.stats.lucky.lenLo,2)),1),_("td",null,C(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),_("tr",null,[whe,_("td",null,C(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),_("td",null,C(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),_("div",She,[The,khe,tt(_("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=f=>n.dropratesStore.selected_model=f)},null,512),[[Md,n.dropratesStore.selected_model]]),Phe,tt(_("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=f=>n.dropratesStore.selected_model=f)},null,512),[[Md,n.dropratesStore.selected_model]]),Che,tt(_("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=f=>n.dropratesStore.selected_model=f)},null,512),[[Md,n.dropratesStore.selected_model]]),Ehe]),n.dropratesStore.selected_model=="a"?(E(),M("div",Ahe,[ft(l,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Z("",!0),n.dropratesStore.selected_model=="b"?(E(),M("div",Mhe,[ft(u,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):Z("",!0),n.dropratesStore.selected_model=="c"?(E(),M("div",xhe,[ft(c,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Z("",!0)])])}const Lhe=Gt(Qfe,[["render",Ihe],["__scopeId","data-v-cad86964"]]),Ohe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Rhe=["step"],Dhe=["max","step"];function Nhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.mean=s),class:"vmid",min:0,max:2,step:.01},null,8,Rhe),[[Dt,r.me.mean]]),R(" \u03BC="+C(r.me.mean),1)]),_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.sigma=s),class:"vmid",min:0,max:.7,step:.01},null,8,Dhe),[[Dt,r.me.sigma]]),R(" \u03C3="+C(r.me.sigma),1)])],64)}const Fhe=Gt(Ohe,[["render",Nhe]]),$he={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},zhe=["step"],Bhe=["step"];function Vhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.center=s),class:"vmid",min:0,max:2,step:.01},null,8,zhe),[[Dt,r.me.center]]),R(" c="+C(r.me.center),1)]),_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.width=s),class:"vmid",min:0,max:2,step:.01},null,8,Bhe),[[Dt,r.me.width]]),R(" w="+C(r.me.width),1)])],64)}const Uhe=Gt($he,[["render",Vhe]]),Whe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},jhe=["step"],Ghe=["step"];function Hhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.center=s),class:"vmid",min:0,max:2,step:.01},null,8,jhe),[[Dt,r.me.center]]),R(" c="+C(r.me.center),1)]),_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.width=s),class:"vmid",min:0,max:2,step:.01},null,8,Ghe),[[Dt,r.me.width]]),R(" w="+C(r.me.width),1)])],64)}const Xhe=Gt(Whe,[["render",Hhe]]),Yhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},qhe=["min","step"],Zhe=["min","max","step"];function Khe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.at=s),class:"vmid",min:.1,max:2,step:.01},null,8,qhe),[[Dt,r.me.at]]),R(" \u03B1\u03B8="+C(r.me.at),1)]),_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.theta=s),class:"vmid",min:.01,max:.3,step:.001},null,8,Zhe),[[Dt,r.me.theta]]),R(" \u03B8="+C(r.me.theta),1)])],64)}const Jhe=Gt(Yhe,[["render",Khe]]),Qhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},tde=["min","step"],ede=R(" e"),rde=_("sup",null,"\u03BC",-1),nde=["min","max","step"];function ide(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.emu=s),class:"vmid",min:.1,max:2,step:.01},null,8,tde),[[Dt,r.me.emu]]),ede,rde,R("="+C(r.me.emu),1)]),_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.sigma=s),class:"vmid",min:.1,max:.7,step:.01},null,8,nde),[[Dt,r.me.sigma]]),R(" \u03C3="+C(r.me.sigma),1)])],64)}const ode=Gt(Qhe,[["render",ide]]),sde={data:()=>({}),props:{me:Object,isLast:Boolean},emits:["delete"],components:{FishCurveNormal:Fhe,FishCurveLognormal:ode,FishCurveUniform:Uhe,FishCurveTriangular:Xhe,FishCurveGamma:Jhe},methods:{formatFixed:st,morph(e){const t=this.me.kind,r=e.target.value;let n=0,i=0;switch(t){case"Normal":n=this.me.mean,i=this.me.sigma;break;case"Triangular":n=this.me.center,i=this.me.width/2;break;case"Uniform":n=this.me.center,i=this.me.width/2;break;case"Gamma":n=this.me.at,i=Math.sqrt(this.me.at*this.me.theta);break;case"Lognormal":n=this.me.emu;const o=this.me.sigma*this.me.sigma;i=Math.sqrt((Math.exp(o)-1)*Math.exp(2*Math.log(this.me.emu)+o));break;default:throw Error(`unknown curve kind ${t}`)}switch(console.log(`${t} -> ${r} (${n}, ${i})`),r){case"Normal":this.me.mean=n,this.me.sigma=i,this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;case"Triangular":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Uniform":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Gamma":this.me.at=n,this.me.theta=i*i/n,this.me.alpha=Math.round(this.me.alpha*100)/100,this.me.theta=Math.round(this.me.theta*1e3)/1e3;break;case"Lognormal":this.me.emu=n,this.me.sigma=Math.sqrt(Math.log(1+i*i/n/n)),this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;default:throw Error(`unknown curve kind ${r}`)}this.me.kind=r}},computed:{componentName(){return"FishCurve"+this.me.kind}}},ade=["disabled","step"],lde=["value"],ude=_("option",null,"Normal",-1),cde=_("option",null,"Triangular",-1),fde=_("option",null,"Uniform",-1),hde=_("option",null,"Gamma",-1),dde=_("option",null,"Lognormal",-1),pde=[ude,cde,fde,hde,dde];function vde(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[tt(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.amount=s),disabled:r.isLast,class:"vmid",min:0,max:1,step:.01},null,8,ade),[[Dt,r.me.amount]]),R(" "+C(o.formatFixed(r.me.amount*100,1))+"% ",1)]),_("td",null,[_("select",{value:r.me.kind,onChange:t[1]||(t[1]=s=>o.morph(s))},pde,40,lde)]),(E(),Or(lH(o.componentName),{me:r.me,"onUpdate:me":t[2]||(t[2]=s=>r.me=s)},null,40,["me"])),_("td",null,[_("button",{onClick:t[3]||(t[3]=s=>e.$emit("delete"))},"delete")])],64)}const gde=Gt(sde,[["render",vde]]);br([Va,Df,xu,Iu,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);const mde={data:()=>({curves:[],presets:[[{amount:1,kind:"Lognormal",emu:1.01,sigma:.41}],[{amount:1,kind:"Gamma",at:1.05,theta:.163}],[{amount:.81,kind:"Normal",mean:1.09,sigma:.38},{amount:1,kind:"Normal",mean:.7,sigma:.17}],[{amount:.49,kind:"Normal",mean:.74,sigma:.21},{amount:.75,kind:"Normal",mean:1.19,sigma:.21},{amount:1,kind:"Normal",mean:1.62,sigma:.21}],[{amount:.5,kind:"Triangular",center:1,width:.76},{amount:.32,kind:"Triangular",center:.69,width:.34},{amount:1,kind:"Normal",mean:1.25,sigma:.42}],[{amount:.24,kind:"Normal",mean:.62,sigma:.16},{amount:.36,kind:"Normal",mean:.87,sigma:.16},{amount:.49,kind:"Normal",mean:1.18,sigma:.18},{amount:1,kind:"Normal",mean:1.47,sigma:.28}]],forceMSE:!1,bestPval:0}),mounted(){this.loadPreset(0)},props:{stats:Object,histogram:Object,avg_size:Number,mode_relative:Boolean},components:{VChart:Ga,FishCurve:gde},methods:{isGoodVal:ei,formatFixed:st,formatKMG:e_,makeBinomialArray:yy,makeNormalArray:Zue,makeLognormalArray:Hue,makeUniformArray:Yue,makeGammaArray:Xue,makeTriangularArray:que,sumDistributions:Cj,loss:by,removeCurve(e){this.curves.splice(e,1),this.curves[this.curves.length-1].amount=1},addCurve(){this.curves[this.curves.length-1].amount/=2,this.curves.push({amount:1,kind:"Normal",mean:1,sigma:.1})},loadPreset(e){const t=this.presets[e];this.curves=[];for(const r of t)this.curves.push({...r})},makeModel(){const e={bells:[],bell:[]};let t=-1,r=this.stats.len;for(const n of this.curves){let i=null;switch(t+=3,n.kind){case"Normal":n.amount=="rest"&&(n.amount=r),i=this.makeNormalArray(n.mean*this.avg_size,n.amount*r,this.stats.max,n.sigma*this.avg_size),r-=n.amount*r;break;case"Triangular":i=this.makeTriangularArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Uniform":i=this.makeUniformArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Gamma":i=this.makeGammaArray(n.at/n.theta,n.amount*r,this.stats.max,n.theta*this.avg_size),r-=n.amount*r;break;case"Lognormal":i=this.makeLognormalArray(Math.log(n.emu*this.avg_size),n.amount*r,this.stats.max,n.sigma),r-=n.amount*r;break;default:throw Error(`unknown curve kind ${n.kind}`)}e.bells.push(i),e.bell=this.sumDistributions(e.bell,i)}return e.loss=this.loss(e.bell,this.histogram.map,t),e||console.log("makeModel failed",npU,npL,stdDev),e}},computed:{modelC(){const e=this.makeModel();return console.log("model",e),e},makeHistogramOption(){const e={legend:{},title:{text:`MSE=${st(this.modelC.loss.mse,2)}
p-val=${st(this.modelC.loss.pval,4)}`,textStyle:{fontWeight:"normal",fontSize:11},right:"3%",top:"10%"},tooltip:{trigger:"axis",extraCssText:"background: var(--color-background);border-color: gray;color: var(--color-text);",valueFormatter:t=>st(t,1),formatter:function(t){const r=t[0].axisValue;let n=`<div style="text-align:center;">[ ${r}...${r+1} )</div>`;return t.forEach(i=>{const o=i.seriesName=="observed"?i.data[1]:st(i.data[1],1);n+=`<div>
                <div style="display:inline-block;">${i.marker} ${i.seriesName}</div>
                <div style="float:right;margin-left:10px;font-weight:600">${o}</div>
              </div>`}),n}},dataset:[{source:this.histogram.arr},{source:this.modelC.bell}],xAxis:{min:this.stats.min==0?-1:null,max:this.mode_relative?this.stats.max<5?this.stats.max+1:null:this.avg_size*3},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)}},{name:"curve \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}}]};for(const[t,r]of this.modelC.bells.entries())e.dataset.push({source:r}),e.series.push({name:`curve ${t}`,type:"line",datasetIndex:2+t,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}});return e}}},_de=e=>($e("data-v-95ac9cb8"),e=e(),ze(),e),yde=["onClick"],bde={key:0,id:"chartHisto",style:{float:"left"}},wde=_de(()=>_("div",{style:{clear:"both"}},null,-1));function Sde(e,t,r,n,i,o){const s=Ot("FishCurve"),a=Ot("v-chart");return E(),M(W,null,[_("div",null,[(E(!0),M(W,null,mt(e.presets,(l,u)=>(E(),M("button",{onClick:c=>o.loadPreset(u)},"preset"+C(u),9,yde))),256)),_("table",null,[(E(!0),M(W,null,mt(e.curves,(l,u)=>(E(),M("tr",null,[_("td",null,C(u),1),(E(),Or(s,{key:u,isLast:u==e.curves.length-1,me:e.curves[u],"onUpdate:me":c=>e.curves[u]=c,onDelete:c=>o.removeCurve(u)},null,8,["isLast","me","onUpdate:me","onDelete"]))]))),256))]),_("button",{onClick:t[0]||(t[0]=(...l)=>o.addCurve&&o.addCurve(...l))},"add curve")]),o.modelC.bell?(E(),M("div",bde,[ft(a,{option:o.makeHistogramOption,"update-options":{notMerge:!0},autoresize:""},null,8,["option"])])):Z("",!0),wde],64)}const Tde=Gt(mde,[["render",Sde],["__scopeId","data-v-95ac9cb8"]]);br([Va,Df,xu,Iu,Wa,Ua,ja,Lu,$f,Ff,Nf,Ou]);const kde={setup(){},components:{VChart:Ga,FishModel:Tde},provide(){return{[jz]:Ze(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{mode_relative:!0,relative_base:100,alldata:{},selectedFish:"ALL",selectedLuck:68.3,generalSigmas:4,fish_info:{},hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e=[];if(this.selectedFish in this.alldata){const t=this.get_fish_info(this.selectedFish);for(const r of this.alldata[this.selectedFish])this.mode_relative?e.push(this.relative_base*r/t.avg_size):e.push(r)}return e},weightedDataset(){let e={};const t=this.currentDataset,r=t.length;let n=[];for(let i=0;i<r;i++){const o=lt.binomial.cdf(i,r,1-this.selectedLuck/100);n.push(o)}return e={len:r,luckyLen:r*this.selectedLuck/100,sorted:[...t].sort((i,o)=>i-o),weights:n},e.grouped=e.sorted.reduce((i,o)=>{const s=Math.floor(o);return i[s]||(i[s]=[]),i[s].push(o),i},{}),e},stats(){const e=this.currentDataset;let t=e.length;const r=this.weightedDataset;for(let p of r.weights)p>this.stats.generalConfidence/100,p>1-this.stats.generalConfidence/100;let n=[],i=[],o=100,s=0;o=Math.min(o,this.selectedLuck),s=Math.max(s,this.selectedLuck);let{len:a,luckyLen:l,sorted:u,weights:c,grouped:f}=r;n.push(...u),i.push(...c);const h={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},d={generalSigmas:this.generalSigmas,generalConfidence:h[this.generalSigmas],lenRaw:t,dataRaw:e,dataFlatSorted:n,weightsFlat:i,len:n.length,min:lt.min(n),max:lt.max(n),range:lt.range(n),sum:lt.sum(n),mean:lt.mean(n),meanErr:0,meanLo:0,meanHi:0,std:lt.stdev(n,!0),bell:[],histo:[]};return d.meanErr=Math.sqrt(d.mean/d.max*(1-d.mean/d.max)*d.max/d.len),d.meanLo=d.mean-this.generalSigmas*d.meanErr,d.meanHi=d.mean+this.generalSigmas*d.meanErr,console.log("stats",d),d},histogram(){const e={arr:[],map:{}};if(this.stats.len>0){const r=this.stats.dataFlatSorted[this.stats.len-1],n=Math.ceil(r/1);console.log("binCount",n);const i=Array(n).fill(0);for(const o of this.stats.dataFlatSorted){const s=Math.floor(o/1);i[s]++}for(let o=0;o<n;o++){const s=o*1;e.arr.push([s,i[o]]),e.map[s]=i[o]}}return this.stats.range>0||(e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len),console.log("histogram",e),e}},methods:{formatFixed:st,isNumber:GY,async fetchObservations(){const e=Date.now();if(this.alldata=await(await fetch("data/manual/catches_by_fish.json")).json(),this.fish_info=await(await fetch("data/encyclopedia.json")).json(),this.mode_relative){console.log("filling group ALL");const o=[];for(const[s,a]of Object.entries(this.alldata)){const l=this.get_fish_info(s),u=(l.baseSize+l.varySize)/2;for(const c of a)o.push(this.relative_base*c/u)}this.alldata.ALL=o,this.fish_info.ALL={baseSize:"x",varySize:"x",avg_size:this.relative_base}}const t={},r={};for(const[o,s]of Object.entries(this.alldata)){const a=this.get_fish_info(o),l=`${a.baseSize}_${a.varySize}`,u=s.length;l in t||(t[l]={fishes:[],totalSamples:0}),t[l].fishes.push(o),t[l].totalSamples+=u}console.log("bs_group_sizes",t);for(const[o,s]of Object.entries(this.alldata)){const l=`${this.get_fish_info(o).avg_size}`,u=s.length;l in r||(r[l]={fishes:[],totalSamples:0}),r[l].fishes.push(o),r[l].totalSamples+=u}console.log("avg_group_sizes",r);const n={},i={};for(const[o,s]of Object.entries(this.alldata)){const a=this.get_fish_info(o),l=`${a.baseSize}_${a.varySize}`,u=t[l];if(u.fishes.length>1&&u.totalSamples>1500){const h=u.fishes.join("+");h in n||(n[h]={sizes:[],info:{baseSize:a.baseSize,varySize:a.varySize}});for(const d of s)n[h].sizes.push(d)}const c=`${a.avg_size}`,f=r[c];if(f.fishes.length>1&&f.totalSamples>1500){const h=f.fishes.join("+");if(h in n)continue;h in i||(i[h]={sizes:[],info:{baseSize:"x",varySize:"x",avg_size:a.avg_size}});for(const d of s)i[h].sizes.push(d)}}for(const[o,s]of Object.entries(n)){const a=`by BS/FVS (${o})`;this.alldata[a]=s.sizes,this.fish_info[a]=s.info}for(const[o,s]of Object.entries(i)){const a=`by AVG (${o})`;this.alldata[a]=s.sizes,this.fish_info[a]=s.info}console.log("fetchObservations took",Date.now()-e,"ms")},activate(e){this.selectedFish=e},get_fish_info(e){const t=e in this.fish_info?this.fish_info[e]:{baseSize:1,varySize:1};return"avg_size"in t||(t.avg_size=(t.baseSize+t.varySize)/2),t}}},Aj=e=>($e("data-v-e49e7ec7"),e=e(),ze(),e),Pde={id:"menu"},Cde={style:{display:"none"}},Ede=R("relative sizes (scaled to Avg= "),Ade=R(" ) "),Mde=Aj(()=>_("br",null,null,-1)),xde=Aj(()=>_("tr",null,[_("th",null,"ik"),_("th",null,"BS"),_("th",null,"FVS"),_("th",null,"Avg"),_("th",null,"data")],-1)),Ide={key:0},Lde=["title"],Ode=["onClick"],Rde={id:"content"};function Dde(e,t,r,n,i,o){const s=Ot("FishModel");return E(),M("main",null,[_("div",Pde,[_("div",Cde,C(i.selectedFish),1),tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>i.mode_relative=a)},null,512),[[Ne,i.mode_relative]]),Ede,tt(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=a=>i.relative_base=a),step:"10",style:{width:"3.5em"}},null,512),[[Dt,i.relative_base]]),Ade,Mde,_("table",null,[xde,(E(!0),M(W,null,mt(i.alldata,(a,l)=>(E(),M(W,null,[a.length>1e3?(E(),M("tr",Ide,[_("td",null,[l.startsWith("by")?(E(),M("abbr",{key:0,class:"tooltip",title:l},"group",8,Lde)):(E(),M(W,{key:1},[R(C(l),1)],64))]),_("td",null,C(o.get_fish_info(l).baseSize),1),_("td",null,C(o.get_fish_info(l).varySize),1),_("td",null,C(o.get_fish_info(l).avg_size),1),_("td",null,[_("button",{class:Ir({pressed:l===i.selectedFish}),onClick:u=>o.activate(l)},C(a.length),11,Ode)])])):Z("",!0)],64))),256))])]),_("div",Rde,[_("details",null,[_("summary",null,"Dataset: size N = "+C(o.stats.len)+", mean M = "+C(o.formatFixed(o.stats.mean,3))+"\xB1"+C(o.formatFixed(1.96*o.stats.meanErr,3))+", min = "+C(o.formatFixed(o.stats.min,3))+", max = "+C(o.formatFixed(o.stats.max,3)),1),_("div",null,[_("table",null,[(E(!0),M(W,null,mt(o.weightedDataset.grouped,(a,l)=>(E(),M("tr",null,[(E(!0),M(W,null,mt(a,u=>(E(),M("td",null,C(o.formatFixed(u,3)),1))),256))]))),256))])])]),_("div",null,[ft(s,{stats:o.stats,histogram:o.histogram,avg_size:i.mode_relative?i.relative_base:i.fish_info[i.selectedFish].avg_size},null,8,["stats","histogram","avg_size"])])])])}const Nde=Gt(kde,[["render",Dde],["__scopeId","data-v-e49e7ec7"]]);const Fde={setup(){return{gameStore:gt()}},components:{},data(){return{all_origins:[],all_destinations:[],predefined_cases:[{label:"ehwaz-pinto",expected:5,pairs:[[160,1],[136,1]]},{label:"glish-lynch_f/heidel-glish_r",expected:9,pairs:[[488,302],[480,301]]}],predefined_results:[],rtp_pair_count:10,rtp_results:[],real_pair_count:10,real_steps:10,real_results:[],retry_until_red:!1,green_retries:0,max_ms:5e3}},async mounted(){function e(r){const n=i=>{r()?i():setTimeout(o=>n(i),100)};return new Promise(n)}console.log("mounted, sleeping"),await e(r=>this.gameStore.ready==!0),console.log("resuming");const t=gt();this.all_origins=t.townsWithLodging,this.all_destinations=[];for(const r of Object.keys(t.plantzones))this.all_destinations.push(Number(r))},computed:{},methods:{run_case(e){const t=gt(),r=[];for(const s of e.pairs)r.push({source:s[0],target:s[1]});const n=t.routeOld([],r),i=t.routeWasm([],r);e.str="";for(const s of e.pairs)e.str+=`${s[1]},${s[0]} `;return{testcase:e,resultOld:n,resultWasm:i,red:i.totalCost>n.totalCost}},run_predefined(){this.predefined_results.length=0;for(const e of this.predefined_cases)this.predefined_results.push(this.run_case(e))},run_rtp(){const e=Date.now();for(;;){const t=new Set,r={label:`rtp${this.rtp_results.length}`,pairs:[]};for(let i=0;i<this.rtp_pair_count;i++){const o=this.all_origins[Math.floor(Math.random()*this.all_origins.length)],s=this.all_destinations.filter(l=>!t.has(l)),a=s[Math.floor(Math.random()*s.length)];t.add(a),r.pairs.push([o,a])}const n=this.run_case(r);if(this.retry_until_red&&!n.red&&this.green_retries++,!this.retry_until_red||n.red||Date.now()-e>this.max_ms){this.rtp_results.push(n);break}}},run_real(){const e=gt(),t=Date.now();for(;;){const r=new Set,n={label:`real${this.real_results.length}`,pairs:[]};for(let o=0;o<this.real_pair_count;o++){const s=this.all_origins.filter(u=>!r.has(u));if(s.length==0)break;const a=s[Math.floor(Math.random()*s.length)];let l=a;for(let u=0;u<this.real_steps;u++){const f=e.links[l].filter(h=>!r.has(h));l=f[Math.floor(Math.random()*f.length)],l==a&&u--}r.add(l),n.pairs.push([a,l])}const i=this.run_case(n);if(this.retry_until_red&&!i.red&&this.green_retries++,!this.retry_until_red||i.red||Date.now()-t>this.max_ms){this.real_results.push(i);break}}}}},ju=e=>($e("data-v-a4c5d7d9"),e=e(),ze(),e),$de=R(" retry until first fail up to "),zde=R("ms "),Bde={class:"column-container"},Vde={class:"column"},Ude=ju(()=>_("h3",null,[R(" Random town-plantzone pairs "),_("abbr",{class:"tooltip",title:"completely random, including on the other side of the map"},"\u2139")],-1)),Wde=R(" Pairs "),jde=ju(()=>_("br",null,null,-1)),Gde=ju(()=>_("thead",null,[_("tr",null,[_("td",null,"old"),_("td",null,"wasm"),_("td",null,"\u2265"),_("td",null,"label")])],-1)),Hde={class:"column"},Xde=ju(()=>_("h3",null,[R(" Realistic "),_("abbr",{class:"tooltip",title:"plantzones tend to be near hometowns (~sqrt of steps)"},"\u2139")],-1)),Yde=R(" Pairs "),qde=ju(()=>_("br",null,null,-1)),Zde=R(" Steps "),Kde=ju(()=>_("br",null,null,-1)),Jde=ju(()=>_("thead",null,[_("tr",null,[_("td",null,"old"),_("td",null,"wasm"),_("td",null,"\u2265"),_("td",null,"label")])],-1));function Qde(e,t,r,n,i,o){return E(),M("main",null,[tt(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>i.retry_until_red=s)},null,512),[[Ne,i.retry_until_red]]),$de,tt(_("input",{type:"number",class:"w5em","onUpdate:modelValue":t[1]||(t[1]=s=>i.max_ms=s)},null,512),[[Dt,i.max_ms,void 0,{number:!0}]]),zde,i.retry_until_red?(E(),M(W,{key:0},[R(" ("+C(i.green_retries)+"\u2714\uFE0F ignored) ",1)],64)):Z("",!0),_("div",Bde,[Z("",!0),_("div",Vde,[Ude,Wde,tt(_("input",{type:"range","onUpdate:modelValue":t[3]||(t[3]=s=>i.rtp_pair_count=s),min:"1",max:"80"},null,512),[[Dt,i.rtp_pair_count,void 0,{number:!0}]]),R(" "+C(i.rtp_pair_count),1),jde,_("button",{onClick:t[4]||(t[4]=(...s)=>o.run_rtp&&o.run_rtp(...s))},"run"),_("table",null,[Gde,_("tbody",null,[(E(!0),M(W,null,mt(i.rtp_results,s=>(E(),M("tr",null,[_("td",null,C(s.resultOld.totalCost),1),_("td",null,C(s.resultWasm.totalCost),1),_("td",null,C(s.red?"\u274C":"\u2714\uFE0F"),1),_("td",null,[_("details",null,[_("summary",null,C(s.testcase.label),1),_("pre",null,C(s.testcase.str),1)])])]))),256))])])]),_("div",Hde,[Xde,Yde,tt(_("input",{type:"range","onUpdate:modelValue":t[5]||(t[5]=s=>i.real_pair_count=s),min:"1",max:"80"},null,512),[[Dt,i.real_pair_count,void 0,{number:!0}]]),R(" "+C(i.real_pair_count),1),qde,Zde,tt(_("input",{type:"range","onUpdate:modelValue":t[6]||(t[6]=s=>i.real_steps=s),min:"1",max:"80"},null,512),[[Dt,i.real_steps,void 0,{number:!0}]]),R(" "+C(i.real_steps),1),Kde,_("button",{onClick:t[7]||(t[7]=(...s)=>o.run_real&&o.run_real(...s))},"run"),_("table",null,[Jde,_("tbody",null,[(E(!0),M(W,null,mt(i.real_results,s=>(E(),M("tr",null,[_("td",null,C(s.resultOld.totalCost),1),_("td",null,C(s.resultWasm.totalCost),1),_("td",null,C(s.red?"\u274C":"\u2714\uFE0F"),1),_("td",null,[_("details",null,[_("summary",null,C(s.testcase.label),1),_("pre",null,C(s.testcase.str),1)])])]))),256))])])])])])}const tpe=Gt(Fde,[["render",Qde],["__scopeId","data-v-a4c5d7d9"]]);const epe={setup(){return{gameStore:gt()}},components:{},data(){return{deck:null,tileLayer:null,geoLayer:null,iconLayer:null,initialViewState:{target:[0,0],zoom:-12,minZoom:-12,maxZoom:-5},hoverx:0,hovery:0,selectedZone:0,highlightedIcon:0}},computed:{},mounted(){this.deck=this.initializeDeck()},watch:{highlightedIcon(e){this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.geoLayer,this.iconLayer]})}},methods:{makeIconsLayer(){return new yu({data:"data/deck_rg_graphs.json",getPosition:e=>[e.graphx,e.graphz],getColor:e=>[66,66,66,255],getIcon:function(e){return{url:"data/icons/target_percent.png",width:128,height:128,anchorX:64,anchorY:64}},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.k==this.highlightedIcon?50:0,updateTriggers:{getSize:this.highlightedIcon}})},makeGeoLayer(){return new K_({id:"GeoJsonLayerCur",data:"data/rg_latest_1_5.geojson",stroked:!1,getLineWidth:50,lineWidthMinPixels:1,getLineColor:[255,255,255],getFillColor:e=>e.properties.c,pickable:!0,autoHighlight:!0,coordinateSystem:ae.CARTESIAN,modelMatrix:[301.1765,0,0,0,0,301.1765,0,0,0,0,1,0,-2048e3,-2048e3,0,1],opacity:.1,onHover:({object:e})=>{e&&e.properties&&(this.highlightedIcon=e.properties.rg)}})},initializeDeck(){return this.tileLayer=new Q_({id:"TileLayer",data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:t=>{const{bbox:{left:r,bottom:n,right:i,top:o}}=t.tile;return new Y_(t,{data:null,image:t.data,bounds:[r,n,i,o]})}}),this.iconLayer=this.makeIconsLayer(),this.geoLayer=this.makeGeoLayer(),new G_({canvas:"deck-canvas",mapbox:!1,initialViewState:this.initialViewState,layers:[this.tileLayer,this.geoLayer,this.iconLayer],controller:{doubleClickZoom:!1},getTooltip:({object:t})=>{if(t&&t.properties&&t.properties.rg)return`RG${t.properties.rg}`},views:[new W_({controller:!0})],onHover:(t,r)=>{t.coordinate&&(this.hoverx=Math.round(t.coordinate[0]),this.hovery=Math.round(t.coordinate[1]))}})}}},rpe={id:"canvas-limiter"},npe={id:"deck-canvas",ref:"canvas"},ipe={id:"coords"};function ope(e,t,r,n,i,o){return E(),M("main",null,[_("div",rpe,[_("canvas",npe,null,512),_("div",ipe," x: "+C(i.hoverx)+" y: "+C(-i.hovery),1)])])}const spe=Gt(epe,[["render",ope],["__scopeId","data-v-b90b407e"]]),ape=VY({history:iY("/workerman/"),routes:[{path:"/",name:"home",component:gMt},{path:"/plantzones",component:f5t},{path:"/resources",component:Q5t},{path:"/settings",component:HIt},{path:"/about",component:()=>pq(()=>import("./AboutView.f0f64c2a.js"),[])},{path:"/othertowns",component:JIt},{path:"/workshops",component:hLt},{path:"/housecraft",component:LLt},{path:"/droprates",component:Lhe},{path:"/routertests",component:tpe},{path:"/regionmap",component:spe},{path:"/fishsize",component:Nde},{path:"/lodging",component:T5t}]});const UE=fX(fq),lpe=FX();UE.use(lpe);UE.use(ape);UE.mount("#app");export{W as F,Gt as _,_ as a,R as b,M as c,Ot as d,Or as e,ft as f,J1 as g,ze as h,E as o,$e as p,uH as r,C as t,gt as u,be as w};
