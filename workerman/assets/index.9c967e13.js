function Gj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function bk(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const Hj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xj=bk(Hj);function OD(e){return!!e||e===""}function Xl(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=hr(n)?Zj(n):Xl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(hr(e))return e;if(ir(e))return e}}const Yj=/;(?![^(]*\))/g,qj=/:(.+)/;function Zj(e){const t={};return e.split(Yj).forEach(r=>{if(r){const n=r.split(qj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function _r(e){let t="";if(hr(e))t=e;else if(Bt(e))for(let r=0;r<e.length;r++){const n=_r(e[r]);n&&(t+=n+" ")}else if(ir(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Kj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=ou(e[n],t[n]);return r}function ou(e,t){if(e===t)return!0;let r=eA(e),n=eA(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=tp(e),n=tp(t),r||n)return e===t;if(r=Bt(e),n=Bt(t),r||n)return r&&n?Kj(e,t):!1;if(r=ir(e),n=ir(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!ou(e[s],t[s]))return!1}}return String(e)===String(t)}function wk(e,t){return e.findIndex(r=>ou(r,t))}const C=e=>hr(e)?e:e==null?"":Bt(e)||ir(e)&&(e.toString===ND||!Xt(e.toString))?JSON.stringify(e,RD,2):String(e),RD=(e,t)=>t&&t.__v_isRef?RD(e,t.value):Gc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:Sf(t)?{[`Set(${t.size})`]:[...t.values()]}:ir(t)&&!Bt(t)&&!FD(t)?String(t):t,Le={},jc=[],Ni=()=>{},Jj=()=>!1,Qj=/^on[^a-z]/,z1=e=>Qj.test(e),Sk=e=>e.startsWith("onUpdate:"),an=Object.assign,Tk=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},tG=Object.prototype.hasOwnProperty,fe=(e,t)=>tG.call(e,t),Bt=Array.isArray,Gc=e=>jp(e)==="[object Map]",Sf=e=>jp(e)==="[object Set]",eA=e=>jp(e)==="[object Date]",Xt=e=>typeof e=="function",hr=e=>typeof e=="string",tp=e=>typeof e=="symbol",ir=e=>e!==null&&typeof e=="object",DD=e=>ir(e)&&Xt(e.then)&&Xt(e.catch),ND=Object.prototype.toString,jp=e=>ND.call(e),eG=e=>jp(e).slice(8,-1),FD=e=>jp(e)==="[object Object]",kk=e=>hr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$g=bk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),B1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},rG=/-(\w)/g,Oo=B1(e=>e.replace(rG,(t,r)=>r?r.toUpperCase():"")),nG=/\B([A-Z])/g,Tf=B1(e=>e.replace(nG,"-$1").toLowerCase()),V1=B1(e=>e.charAt(0).toUpperCase()+e.slice(1)),My=B1(e=>e?`on${V1(e)}`:""),ep=(e,t)=>!Object.is(e,t),zg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Em=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Am=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let rA;const iG=()=>rA||(rA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let _o;class $D{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&_o&&(this.parent=_o,this.index=(_o.scopes||(_o.scopes=[])).push(this)-1)}run(t){if(this.active){const r=_o;try{return _o=this,t()}finally{_o=r}}}on(){_o=this}off(){_o=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function zD(e){return new $D(e)}function oG(e,t=_o){t&&t.active&&t.effects.push(e)}const Pk=e=>{const t=new Set(e);return t.w=0,t.n=0,t},BD=e=>(e.w&Ma)>0,VD=e=>(e.n&Ma)>0,sG=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ma},aG=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];BD(i)&&!VD(i)?i.delete(e):t[r++]=i,i.w&=~Ma,i.n&=~Ma}t.length=r}},gS=new WeakMap;let sd=0,Ma=1;const mS=30;let Mi;const Yl=Symbol(""),_S=Symbol("");class Ck{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,oG(this,n)}run(){if(!this.active)return this.fn();let t=Mi,r=Sa;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Mi,Mi=this,Sa=!0,Ma=1<<++sd,sd<=mS?sG(this):nA(this),this.fn()}finally{sd<=mS&&aG(this),Ma=1<<--sd,Mi=this.parent,Sa=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Mi===this?this.deferStop=!0:this.active&&(nA(this),this.onStop&&this.onStop(),this.active=!1)}}function nA(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Sa=!0;const UD=[];function kf(){UD.push(Sa),Sa=!1}function Pf(){const e=UD.pop();Sa=e===void 0?!0:e}function Dn(e,t,r){if(Sa&&Mi){let n=gS.get(e);n||gS.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Pk()),WD(i)}}function WD(e,t){let r=!1;sd<=mS?VD(e)||(e.n|=Ma,r=!BD(e)):r=!e.has(Mi),r&&(e.add(Mi),Mi.deps.push(e))}function _s(e,t,r,n,i,o){const s=gS.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(r==="length"&&Bt(e))s.forEach((l,u)=>{(u==="length"||u>=n)&&a.push(l)});else switch(r!==void 0&&a.push(s.get(r)),t){case"add":Bt(e)?kk(r)&&a.push(s.get("length")):(a.push(s.get(Yl)),Gc(e)&&a.push(s.get(_S)));break;case"delete":Bt(e)||(a.push(s.get(Yl)),Gc(e)&&a.push(s.get(_S)));break;case"set":Gc(e)&&a.push(s.get(Yl));break}if(a.length===1)a[0]&&yS(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);yS(Pk(l))}}function yS(e,t){const r=Bt(e)?e:[...e];for(const n of r)n.computed&&iA(n);for(const n of r)n.computed||iA(n)}function iA(e,t){(e!==Mi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const lG=bk("__proto__,__v_isRef,__isVue"),jD=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(tp)),uG=Ek(),cG=Ek(!1,!0),fG=Ek(!0),oA=hG();function hG(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=de(this);for(let o=0,s=this.length;o<s;o++)Dn(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(de)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){kf();const n=de(this)[t].apply(this,r);return Pf(),n}}),e}function Ek(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?AG:qD:t?YD:XD).get(n))return n;const s=Bt(n);if(!e&&s&&fe(oA,i))return Reflect.get(oA,i,o);const a=Reflect.get(n,i,o);return(tp(i)?jD.has(i):lG(i))||(e||Dn(n,"get",i),t)?a:Je(a)?s&&kk(i)?a:a.value:ir(a)?e?ZD(a):Cf(a):a}}const dG=GD(),pG=GD(!0);function GD(e=!1){return function(r,n,i,o){let s=r[n];if(rp(s)&&Je(s)&&!Je(i))return!1;if(!e&&!rp(i)&&(bS(i)||(i=de(i),s=de(s)),!Bt(r)&&Je(s)&&!Je(i)))return s.value=i,!0;const a=Bt(r)&&kk(n)?Number(n)<r.length:fe(r,n),l=Reflect.set(r,n,i,o);return r===de(o)&&(a?ep(i,s)&&_s(r,"set",n,i):_s(r,"add",n,i)),l}}function vG(e,t){const r=fe(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&_s(e,"delete",t,void 0),n}function gG(e,t){const r=Reflect.has(e,t);return(!tp(t)||!jD.has(t))&&Dn(e,"has",t),r}function mG(e){return Dn(e,"iterate",Bt(e)?"length":Yl),Reflect.ownKeys(e)}const HD={get:uG,set:dG,deleteProperty:vG,has:gG,ownKeys:mG},_G={get:fG,set(e,t){return!0},deleteProperty(e,t){return!0}},yG=an({},HD,{get:cG,set:pG}),Ak=e=>e,U1=e=>Reflect.getPrototypeOf(e);function A0(e,t,r=!1,n=!1){e=e.__v_raw;const i=de(e),o=de(t);r||(t!==o&&Dn(i,"get",t),Dn(i,"get",o));const{has:s}=U1(i),a=n?Ak:r?Ik:np;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function M0(e,t=!1){const r=this.__v_raw,n=de(r),i=de(e);return t||(e!==i&&Dn(n,"has",e),Dn(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function x0(e,t=!1){return e=e.__v_raw,!t&&Dn(de(e),"iterate",Yl),Reflect.get(e,"size",e)}function sA(e){e=de(e);const t=de(this);return U1(t).has.call(t,e)||(t.add(e),_s(t,"add",e,e)),this}function aA(e,t){t=de(t);const r=de(this),{has:n,get:i}=U1(r);let o=n.call(r,e);o||(e=de(e),o=n.call(r,e));const s=i.call(r,e);return r.set(e,t),o?ep(t,s)&&_s(r,"set",e,t):_s(r,"add",e,t),this}function lA(e){const t=de(this),{has:r,get:n}=U1(t);let i=r.call(t,e);i||(e=de(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&_s(t,"delete",e,void 0),o}function uA(){const e=de(this),t=e.size!==0,r=e.clear();return t&&_s(e,"clear",void 0,void 0),r}function I0(e,t){return function(n,i){const o=this,s=o.__v_raw,a=de(s),l=t?Ak:e?Ik:np;return!e&&Dn(a,"iterate",Yl),s.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function L0(e,t,r){return function(...n){const i=this.__v_raw,o=de(i),s=Gc(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=i[e](...n),c=r?Ak:t?Ik:np;return!t&&Dn(o,"iterate",l?_S:Yl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Fs(e){return function(...t){return e==="delete"?!1:this}}function bG(){const e={get(o){return A0(this,o)},get size(){return x0(this)},has:M0,add:sA,set:aA,delete:lA,clear:uA,forEach:I0(!1,!1)},t={get(o){return A0(this,o,!1,!0)},get size(){return x0(this)},has:M0,add:sA,set:aA,delete:lA,clear:uA,forEach:I0(!1,!0)},r={get(o){return A0(this,o,!0)},get size(){return x0(this,!0)},has(o){return M0.call(this,o,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:I0(!0,!1)},n={get(o){return A0(this,o,!0,!0)},get size(){return x0(this,!0)},has(o){return M0.call(this,o,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:I0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=L0(o,!1,!1),r[o]=L0(o,!0,!1),t[o]=L0(o,!1,!0),n[o]=L0(o,!0,!0)}),[e,r,t,n]}const[wG,SG,TG,kG]=bG();function Mk(e,t){const r=t?e?kG:TG:e?SG:wG;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(fe(r,i)&&i in n?r:n,i,o)}const PG={get:Mk(!1,!1)},CG={get:Mk(!1,!0)},EG={get:Mk(!0,!1)},XD=new WeakMap,YD=new WeakMap,qD=new WeakMap,AG=new WeakMap;function MG(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xG(e){return e.__v_skip||!Object.isExtensible(e)?0:MG(eG(e))}function Cf(e){return rp(e)?e:xk(e,!1,HD,PG,XD)}function IG(e){return xk(e,!1,yG,CG,YD)}function ZD(e){return xk(e,!0,_G,EG,qD)}function xk(e,t,r,n,i){if(!ir(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=xG(e);if(s===0)return e;const a=new Proxy(e,s===2?n:r);return i.set(e,a),a}function ps(e){return rp(e)?ps(e.__v_raw):!!(e&&e.__v_isReactive)}function rp(e){return!!(e&&e.__v_isReadonly)}function bS(e){return!!(e&&e.__v_isShallow)}function KD(e){return ps(e)||rp(e)}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function Ei(e){return Em(e,"__v_skip",!0),e}const np=e=>ir(e)?Cf(e):e,Ik=e=>ir(e)?ZD(e):e;function JD(e){Sa&&Mi&&(e=de(e),WD(e.dep||(e.dep=Pk())))}function QD(e,t){e=de(e),e.dep&&yS(e.dep)}function Je(e){return!!(e&&e.__v_isRef===!0)}function W1(e){return t9(e,!1)}function Bg(e){return t9(e,!0)}function t9(e,t){return Je(e)?e:new LG(e,t)}class LG{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:de(t),this._value=r?t:np(t)}get value(){return JD(this),this._value}set value(t){t=this.__v_isShallow?t:de(t),ep(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:np(t),QD(this))}}function Ar(e){return Je(e)?e.value:e}const OG={get:(e,t,r)=>Ar(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Je(i)&&!Je(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function e9(e){return ps(e)?e:new Proxy(e,OG)}function wS(e){const t=Bt(e)?new Array(e.length):{};for(const r in e)t[r]=Vg(e,r);return t}class RG{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Vg(e,t,r){const n=e[t];return Je(n)?n:new RG(e,t,r)}class DG{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ck(t,()=>{this._dirty||(this._dirty=!0,QD(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=de(this);return JD(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function NG(e,t,r=!1){let n,i;const o=Xt(e);return o?(n=e,i=Ni):(n=e.get,i=e.set),new DG(n,i,o||!i,r)}function Ta(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){j1(o,t,r)}return i}function Fi(e,t,r,n){if(Xt(e)){const o=Ta(e,t,r,n);return o&&DD(o)&&o.catch(s=>{j1(s,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Fi(e[o],t,r,n));return i}function j1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,a=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Ta(l,null,10,[e,s,a]);return}}FG(e,r,i,n)}function FG(e,t,r,n=!0){console.error(e)}let Mm=!1,SS=!1;const xn=[];let ls=0;const kd=[];let ad=null,Pc=0;const Pd=[];let ua=null,Cc=0;const r9=Promise.resolve();let Lk=null,TS=null;function su(e){const t=Lk||r9;return e?t.then(this?e.bind(this):e):t}function $G(e){let t=ls+1,r=xn.length;for(;t<r;){const n=t+r>>>1;ip(xn[n])<e?t=n+1:r=n}return t}function n9(e){(!xn.length||!xn.includes(e,Mm&&e.allowRecurse?ls+1:ls))&&e!==TS&&(e.id==null?xn.push(e):xn.splice($G(e.id),0,e),i9())}function i9(){!Mm&&!SS&&(SS=!0,Lk=r9.then(a9))}function zG(e){const t=xn.indexOf(e);t>ls&&xn.splice(t,1)}function o9(e,t,r,n){Bt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),i9()}function BG(e){o9(e,ad,kd,Pc)}function VG(e){o9(e,ua,Pd,Cc)}function G1(e,t=null){if(kd.length){for(TS=t,ad=[...new Set(kd)],kd.length=0,Pc=0;Pc<ad.length;Pc++)ad[Pc]();ad=null,Pc=0,TS=null,G1(e,t)}}function s9(e){if(G1(),Pd.length){const t=[...new Set(Pd)];if(Pd.length=0,ua){ua.push(...t);return}for(ua=t,ua.sort((r,n)=>ip(r)-ip(n)),Cc=0;Cc<ua.length;Cc++)ua[Cc]();ua=null,Cc=0}}const ip=e=>e.id==null?1/0:e.id;function a9(e){SS=!1,Mm=!0,G1(e),xn.sort((r,n)=>ip(r)-ip(n));const t=Ni;try{for(ls=0;ls<xn.length;ls++){const r=xn[ls];r&&r.active!==!1&&Ta(r,null,14)}}finally{ls=0,xn.length=0,s9(),Mm=!1,Lk=null,(xn.length||kd.length||Pd.length)&&a9(e)}}function UG(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in n){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(Am))}let a,l=n[a=My(t)]||n[a=My(Oo(t))];!l&&o&&(l=n[a=My(Tf(t))]),l&&Fi(l,e,6,i);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Fi(u,e,6,i)}}function l9(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!Xt(e)){const l=u=>{const c=l9(u,t,!0);c&&(a=!0,an(s,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(n.set(e,null),null):(Bt(o)?o.forEach(l=>s[l]=null):an(s,o),n.set(e,s),s)}function H1(e,t){return!e||!z1(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,Tf(t))||fe(e,t))}let Xr=null,X1=null;function xm(e){const t=Xr;return Xr=e,X1=e&&e.type.__scopeId||null,t}function Ue(e){X1=e}function We(){X1=null}function be(e,t=Xr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&bA(-1);const o=xm(t),s=e(...i);return xm(o),n._d&&bA(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function xy(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let m,g;const y=xm(e);try{if(r.shapeFlag&4){const w=i||n;m=So(c.call(w,w,f,o,d,h,p)),g=l}else{const w=t;m=So(w.length>1?w(o,{attrs:l,slots:a,emit:u}):w(o,null)),g=t.props?l:WG(l)}}catch(w){Ed.length=0,j1(w,e,1),m=ht(xa)}let b=m;if(g&&v!==!1){const w=Object.keys(g),{shapeFlag:T}=b;w.length&&T&7&&(s&&w.some(Sk)&&(g=jG(g,s)),b=of(b,g))}return r.dirs&&(b=of(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),m=b,xm(y),m}const WG=e=>{let t;for(const r in e)(r==="class"||r==="style"||z1(r))&&((t||(t={}))[r]=e[r]);return t},jG=(e,t)=>{const r={};for(const n in e)(!Sk(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function GG(e,t,r){const{props:n,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?cA(n,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(s[h]!==n[h]&&!H1(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===s?!1:n?s?cA(n,s,u):!0:!!s;return!1}function cA(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!H1(r,o))return!0}return!1}function HG({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const XG=e=>e.__isSuspense;function YG(e,t){t&&t.pendingBranch?Bt(e)?t.effects.push(...e):t.effects.push(e):VG(e)}function Ug(e,t){if(mr){let r=mr.provides;const n=mr.parent&&mr.parent.provides;n===r&&(r=mr.provides=Object.create(n)),r[e]=t}}function Ln(e,t,r=!1){const n=mr||Xr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Xt(t)?t.call(n.proxy):t}}function fA(e,t){return Ok(e,null,t)}const hA={};function Co(e,t,r){return Ok(e,t,r)}function Ok(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:s}=Le){const a=mr;let l,u=!1,c=!1;if(Je(e)?(l=()=>e.value,u=bS(e)):ps(e)?(l=()=>e,n=!0):Bt(e)?(c=!0,u=e.some(g=>ps(g)||bS(g)),l=()=>e.map(g=>{if(Je(g))return g.value;if(ps(g))return Bl(g);if(Xt(g))return Ta(g,a,2)})):Xt(e)?t?l=()=>Ta(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Fi(e,a,3,[h])}:l=Ni,t&&n){const g=l;l=()=>Bl(g())}let f,h=g=>{f=m.onStop=()=>{Ta(g,a,4)}};if(sp)return h=Ni,t?r&&Fi(t,a,3,[l(),c?[]:void 0,h]):l(),Ni;let d=c?[]:hA;const p=()=>{if(!!m.active)if(t){const g=m.run();(n||u||(c?g.some((y,b)=>ep(y,d[b])):ep(g,d)))&&(f&&f(),Fi(t,a,3,[g,d===hA?void 0:d,h]),d=g)}else m.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>pn(p,a&&a.suspense):v=()=>BG(p);const m=new Ck(l,v);return t?r?p():d=m.run():i==="post"?pn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&Tk(a.scope.effects,m)}}function qG(e,t,r){const n=this.proxy,i=hr(e)?e.includes(".")?u9(n,e):()=>n[e]:e.bind(n,n);let o;Xt(t)?o=t:(o=t.handler,r=t);const s=mr;sf(this);const a=Ok(i,o.bind(n),r);return s?sf(s):ql(),a}function u9(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Bl(e,t){if(!ir(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Je(e))Bl(e.value,t);else if(Bt(e))for(let r=0;r<e.length;r++)Bl(e[r],t);else if(Sf(e)||Gc(e))e.forEach(r=>{Bl(r,t)});else if(FD(e))for(const r in e)Bl(e[r],t);return e}function Rk(e){return Xt(e)?{setup:e,name:e.name}:e}const Cd=e=>!!e.type.__asyncLoader,c9=e=>e.type.__isKeepAlive;function ZG(e,t){f9(e,"a",t)}function KG(e,t){f9(e,"da",t)}function f9(e,t,r=mr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Y1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)c9(i.parent.vnode)&&JG(n,t,r,i),i=i.parent}}function JG(e,t,r,n){const i=Y1(t,e,n,!0);q1(()=>{Tk(n[t],i)},r)}function Y1(e,t,r=mr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;kf(),sf(r);const a=Fi(t,r,e,s);return ql(),Pf(),a});return n?i.unshift(o):i.push(o),o}}const As=e=>(t,r=mr)=>(!sp||e==="sp")&&Y1(e,t,r),QG=As("bm"),h9=As("m"),tH=As("bu"),eH=As("u"),rH=As("bum"),q1=As("um"),nH=As("sp"),iH=As("rtg"),oH=As("rtc");function sH(e,t=mr){Y1("ec",e,t)}function et(e,t){const r=Xr;if(r===null)return e;const n=J1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,a,l,u=Le]=t[o];Xt(s)&&(s={mounted:s,updated:s}),s.deep&&Bl(a),i.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function el(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[n];l&&(kf(),Fi(l,r,8,[e.el,a,e,t]),Pf())}}const Dk="components";function Ot(e,t){return p9(Dk,e,!0,t)||e}const d9=Symbol();function aH(e){return hr(e)?p9(Dk,e,!1)||e:e||d9}function p9(e,t,r=!0,n=!1){const i=Xr||mr;if(i){const o=i.type;if(e===Dk){const a=FH(o,!1);if(a&&(a===t||a===Oo(t)||a===V1(Oo(t))))return o}const s=dA(i[e]||o[e],t)||dA(i.appContext[e],t);return!s&&n?o:s}}function dA(e,t){return e&&(e[t]||e[Oo(t)]||e[V1(Oo(t))])}function gt(e,t,r,n){let i;const o=r&&r[n];if(Bt(e)||hr(e)){i=new Array(e.length);for(let s=0,a=e.length;s<a;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(ir(e))if(e[Symbol.iterator])i=Array.from(e,(s,a)=>t(s,a,void 0,o&&o[a]));else{const s=Object.keys(e);i=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];i[a]=t(e[u],u,a,o&&o[a])}}else i=[];return r&&(r[n]=i),i}function lH(e,t,r={},n,i){if(Xr.isCE||Xr.parent&&Cd(Xr.parent)&&Xr.parent.isCE)return ht("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),E();const s=o&&v9(o(r)),a=yr(W,{key:r.key||`_${t}`},s||(n?n():[]),s&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function v9(e){return e.some(t=>Om(t)?!(t.type===xa||t.type===W&&!v9(t.children)):!0)?e:null}const kS=e=>e?E9(e)?J1(e)||e.proxy:kS(e.parent):null,Im=an(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kS(e.parent),$root:e=>kS(e.root),$emit:e=>e.emit,$options:e=>m9(e),$forceUpdate:e=>e.f||(e.f=()=>n9(e.update)),$nextTick:e=>e.n||(e.n=su.bind(e.proxy)),$watch:e=>qG.bind(e)}),uH={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&fe(n,t))return s[t]=1,n[t];if(i!==Le&&fe(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&fe(u,t))return s[t]=3,o[t];if(r!==Le&&fe(r,t))return s[t]=4,r[t];PS&&(s[t]=0)}}const c=Im[t];let f,h;if(c)return t==="$attrs"&&Dn(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(r!==Le&&fe(r,t))return s[t]=4,r[t];if(h=l.config.globalProperties,fe(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&fe(i,t)?(i[t]=r,!0):n!==Le&&fe(n,t)?(n[t]=r,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},s){let a;return!!r[s]||e!==Le&&fe(e,s)||t!==Le&&fe(t,s)||(a=o[0])&&fe(a,s)||fe(n,s)||fe(Im,s)||fe(i.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:fe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let PS=!0;function cH(e){const t=m9(e),r=e.proxy,n=e.ctx;PS=!1,t.beforeCreate&&pA(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:y,destroyed:b,unmounted:w,render:T,renderTracked:S,renderTriggered:k,errorCaptured:x,serverPrefetch:A,expose:I,inheritAttrs:L,components:N,directives:z,filters:V}=t;if(u&&fH(u,n,null,e.appContext.config.unwrapInjectedRef),s)for(const K in s){const q=s[K];Xt(q)&&(n[K]=q.bind(r))}if(i){const K=i.call(r,r);ir(K)&&(e.data=Cf(K))}if(PS=!0,o)for(const K in o){const q=o[K],rt=Xt(q)?q.bind(r,r):Xt(q.get)?q.get.bind(r,r):Ni,At=!Xt(q)&&Xt(q.set)?q.set.bind(r):Ni,Nt=Ze({get:rt,set:At});Object.defineProperty(n,K,{enumerable:!0,configurable:!0,get:()=>Nt.value,set:Pt=>Nt.value=Pt})}if(a)for(const K in a)g9(a[K],n,r,K);if(l){const K=Xt(l)?l.call(r):l;Reflect.ownKeys(K).forEach(q=>{Ug(q,K[q])})}c&&pA(c,e,"c");function G(K,q){Bt(q)?q.forEach(rt=>K(rt.bind(r))):q&&K(q.bind(r))}if(G(QG,f),G(h9,h),G(tH,d),G(eH,p),G(ZG,v),G(KG,m),G(sH,x),G(oH,S),G(iH,k),G(rH,y),G(q1,w),G(nH,A),Bt(I))if(I.length){const K=e.exposed||(e.exposed={});I.forEach(q=>{Object.defineProperty(K,q,{get:()=>r[q],set:rt=>r[q]=rt})})}else e.exposed||(e.exposed={});T&&e.render===Ni&&(e.render=T),L!=null&&(e.inheritAttrs=L),N&&(e.components=N),z&&(e.directives=z)}function fH(e,t,r=Ni,n=!1){Bt(e)&&(e=CS(e));for(const i in e){const o=e[i];let s;ir(o)?"default"in o?s=Ln(o.from||i,o.default,!0):s=Ln(o.from||i):s=Ln(o),Je(s)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function pA(e,t,r){Fi(Bt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function g9(e,t,r,n){const i=n.includes(".")?u9(r,n):()=>r[n];if(hr(e)){const o=t[e];Xt(o)&&Co(i,o)}else if(Xt(e))Co(i,e.bind(r));else if(ir(e))if(Bt(e))e.forEach(o=>g9(o,t,r,n));else{const o=Xt(e.handler)?e.handler.bind(r):t[e.handler];Xt(o)&&Co(i,o,e)}}function m9(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>Lm(l,u,s,!0)),Lm(l,t,s)),o.set(t,l),l}function Lm(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&Lm(e,o,r,!0),i&&i.forEach(s=>Lm(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const a=hH[s]||r&&r[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const hH={data:vA,props:Il,emits:Il,methods:Il,computed:Il,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:Il,directives:Il,watch:pH,provide:vA,inject:dH};function vA(e,t){return t?e?function(){return an(Xt(e)?e.call(this,this):e,Xt(t)?t.call(this,this):t)}:t:e}function dH(e,t){return Il(CS(e),CS(t))}function CS(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function tn(e,t){return e?[...new Set([].concat(e,t))]:t}function Il(e,t){return e?an(an(Object.create(null),e),t):t}function pH(e,t){if(!e)return t;if(!t)return e;const r=an(Object.create(null),e);for(const n in t)r[n]=tn(e[n],t[n]);return r}function vH(e,t,r,n=!1){const i={},o={};Em(o,Z1,1),e.propsDefaults=Object.create(null),_9(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);r?e.props=n?i:IG(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function gH(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=de(i),[l]=e.propsOptions;let u=!1;if((n||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(H1(e.emitsOptions,h))continue;const d=t[h];if(l)if(fe(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Oo(h);i[p]=ES(l,a,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{_9(e,t,i,o)&&(u=!0);let c;for(const f in a)(!t||!fe(t,f)&&((c=Tf(f))===f||!fe(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=ES(l,a,f,void 0,e,!0)):delete i[f]);if(o!==a)for(const f in o)(!t||!fe(t,f)&&!0)&&(delete o[f],u=!0)}u&&_s(e,"set","$attrs")}function _9(e,t,r,n){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if($g(l))continue;const u=t[l];let c;i&&fe(i,c=Oo(l))?!o||!o.includes(c)?r[c]=u:(a||(a={}))[c]=u:H1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,s=!0)}if(o){const l=de(r),u=a||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=ES(i,l,f,u[f],e,!fe(u,f))}}return s}function ES(e,t,r,n,i,o){const s=e[r];if(s!=null){const a=fe(s,"default");if(a&&n===void 0){const l=s.default;if(s.type!==Function&&Xt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(sf(i),n=u[r]=l.call(null,t),ql())}else n=l}s[0]&&(o&&!a?n=!1:s[1]&&(n===""||n===Tf(r))&&(n=!0))}return n}function y9(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,s={},a=[];let l=!1;if(!Xt(e)){const c=f=>{l=!0;const[h,d]=y9(f,t,!0);an(s,h),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,jc),jc;if(Bt(o))for(let c=0;c<o.length;c++){const f=Oo(o[c]);gA(f)&&(s[f]=Le)}else if(o)for(const c in o){const f=Oo(c);if(gA(f)){const h=o[c],d=s[f]=Bt(h)||Xt(h)?{type:h}:h;if(d){const p=yA(Boolean,d.type),v=yA(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||fe(d,"default"))&&a.push(f)}}}const u=[s,a];return n.set(e,u),u}function gA(e){return e[0]!=="$"}function mA(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function _A(e,t){return mA(e)===mA(t)}function yA(e,t){return Bt(t)?t.findIndex(r=>_A(r,e)):Xt(t)&&_A(t,e)?0:-1}const b9=e=>e[0]==="_"||e==="$stable",Nk=e=>Bt(e)?e.map(So):[So(e)],mH=(e,t,r)=>{if(t._n)return t;const n=be((...i)=>Nk(t(...i)),r);return n._c=!1,n},w9=(e,t,r)=>{const n=e._ctx;for(const i in e){if(b9(i))continue;const o=e[i];if(Xt(o))t[i]=mH(i,o,n);else if(o!=null){const s=Nk(o);t[i]=()=>s}}},S9=(e,t)=>{const r=Nk(t);e.slots.default=()=>r},_H=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=de(t),Em(t,"_",r)):w9(t,e.slots={})}else e.slots={},t&&S9(e,t);Em(e.slots,Z1,1)},yH=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,s=Le;if(n.shapeFlag&32){const a=t._;a?r&&a===1?o=!1:(an(i,t),!r&&a===1&&delete i._):(o=!t.$stable,w9(t,i)),s=t}else t&&(S9(e,t),s={default:1});if(o)for(const a in i)!b9(a)&&!(a in s)&&delete i[a]};function T9(){return{app:null,config:{isNativeTag:Jj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bH=0;function wH(e,t){return function(n,i=null){Xt(n)||(n=Object.assign({},n)),i!=null&&!ir(i)&&(i=null);const o=T9(),s=new Set;let a=!1;const l=o.app={_uid:bH++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:zH,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&Xt(u.install)?(s.add(u),u.install(l,...c)):Xt(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const h=ht(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),a=!0,l._container=u,u.__vue_app__=l,J1(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function AS(e,t,r,n,i=!1){if(Bt(e)){e.forEach((h,d)=>AS(h,t&&(Bt(t)?t[d]:t),r,n,i));return}if(Cd(n)&&!i)return;const o=n.shapeFlag&4?J1(n.component)||n.component.proxy:n.el,s=i?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Le?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(hr(u)?(c[u]=null,fe(f,u)&&(f[u]=null)):Je(u)&&(u.value=null)),Xt(l))Ta(l,a,12,[s,c]);else{const h=hr(l),d=Je(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Bt(v)&&Tk(v,o):Bt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],fe(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=s,fe(f,l)&&(f[l]=s)):d&&(l.value=s,e.k&&(c[e.k]=s))};s?(p.id=-1,pn(p,r)):p()}}}const pn=YG;function SH(e){return TH(e)}function TH(e,t){const r=iG();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ni,cloneNode:p,insertStaticContent:v}=e,m=(B,j,X,Q=null,tt=null,dt=null,bt=!1,ct=null,at=!!j.dynamicChildren)=>{if(B===j)return;B&&!ah(B,j)&&(Q=yt(B),Ct(B,tt,dt,!0),B=null),j.patchFlag===-2&&(at=!1,j.dynamicChildren=null);const{type:it,ref:Ft,shapeFlag:Lt}=j;switch(it){case Fk:g(B,j,X,Q);break;case xa:y(B,j,X,Q);break;case Wg:B==null&&b(j,X,Q,bt);break;case W:z(B,j,X,Q,tt,dt,bt,ct,at);break;default:Lt&1?S(B,j,X,Q,tt,dt,bt,ct,at):Lt&6?V(B,j,X,Q,tt,dt,bt,ct,at):(Lt&64||Lt&128)&&it.process(B,j,X,Q,tt,dt,bt,ct,at,xt)}Ft!=null&&tt&&AS(Ft,B&&B.ref,dt,j||B,!j)},g=(B,j,X,Q)=>{if(B==null)n(j.el=a(j.children),X,Q);else{const tt=j.el=B.el;j.children!==B.children&&u(tt,j.children)}},y=(B,j,X,Q)=>{B==null?n(j.el=l(j.children||""),X,Q):j.el=B.el},b=(B,j,X,Q)=>{[B.el,B.anchor]=v(B.children,j,X,Q,B.el,B.anchor)},w=({el:B,anchor:j},X,Q)=>{let tt;for(;B&&B!==j;)tt=h(B),n(B,X,Q),B=tt;n(j,X,Q)},T=({el:B,anchor:j})=>{let X;for(;B&&B!==j;)X=h(B),i(B),B=X;i(j)},S=(B,j,X,Q,tt,dt,bt,ct,at)=>{bt=bt||j.type==="svg",B==null?k(j,X,Q,tt,dt,bt,ct,at):I(B,j,tt,dt,bt,ct,at)},k=(B,j,X,Q,tt,dt,bt,ct)=>{let at,it;const{type:Ft,props:Lt,shapeFlag:$t,transition:Vt,patchFlag:ee,dirs:me}=B;if(B.el&&p!==void 0&&ee===-1)at=B.el=p(B.el);else{if(at=B.el=s(B.type,dt,Lt&&Lt.is,Lt),$t&8?c(at,B.children):$t&16&&A(B.children,at,null,Q,tt,dt&&Ft!=="foreignObject",bt,ct),me&&el(B,null,Q,"created"),Lt){for(const Pe in Lt)Pe!=="value"&&!$g(Pe)&&o(at,Pe,null,Lt[Pe],dt,B.children,Q,tt,J);"value"in Lt&&o(at,"value",null,Lt.value),(it=Lt.onVnodeBeforeMount)&&ro(it,Q,B)}x(at,B,B.scopeId,bt,Q)}me&&el(B,null,Q,"beforeMount");const _e=(!tt||tt&&!tt.pendingBranch)&&Vt&&!Vt.persisted;_e&&Vt.beforeEnter(at),n(at,j,X),((it=Lt&&Lt.onVnodeMounted)||_e||me)&&pn(()=>{it&&ro(it,Q,B),_e&&Vt.enter(at),me&&el(B,null,Q,"mounted")},tt)},x=(B,j,X,Q,tt)=>{if(X&&d(B,X),Q)for(let dt=0;dt<Q.length;dt++)d(B,Q[dt]);if(tt){let dt=tt.subTree;if(j===dt){const bt=tt.vnode;x(B,bt,bt.scopeId,bt.slotScopeIds,tt.parent)}}},A=(B,j,X,Q,tt,dt,bt,ct,at=0)=>{for(let it=at;it<B.length;it++){const Ft=B[it]=ct?ha(B[it]):So(B[it]);m(null,Ft,j,X,Q,tt,dt,bt,ct)}},I=(B,j,X,Q,tt,dt,bt)=>{const ct=j.el=B.el;let{patchFlag:at,dynamicChildren:it,dirs:Ft}=j;at|=B.patchFlag&16;const Lt=B.props||Le,$t=j.props||Le;let Vt;X&&rl(X,!1),(Vt=$t.onVnodeBeforeUpdate)&&ro(Vt,X,j,B),Ft&&el(j,B,X,"beforeUpdate"),X&&rl(X,!0);const ee=tt&&j.type!=="foreignObject";if(it?L(B.dynamicChildren,it,ct,X,Q,ee,dt):bt||rt(B,j,ct,null,X,Q,ee,dt,!1),at>0){if(at&16)N(ct,j,Lt,$t,X,Q,tt);else if(at&2&&Lt.class!==$t.class&&o(ct,"class",null,$t.class,tt),at&4&&o(ct,"style",Lt.style,$t.style,tt),at&8){const me=j.dynamicProps;for(let _e=0;_e<me.length;_e++){const Pe=me[_e],Fr=Lt[Pe],Qi=$t[Pe];(Qi!==Fr||Pe==="value")&&o(ct,Pe,Fr,Qi,tt,B.children,X,Q,J)}}at&1&&B.children!==j.children&&c(ct,j.children)}else!bt&&it==null&&N(ct,j,Lt,$t,X,Q,tt);((Vt=$t.onVnodeUpdated)||Ft)&&pn(()=>{Vt&&ro(Vt,X,j,B),Ft&&el(j,B,X,"updated")},Q)},L=(B,j,X,Q,tt,dt,bt)=>{for(let ct=0;ct<j.length;ct++){const at=B[ct],it=j[ct],Ft=at.el&&(at.type===W||!ah(at,it)||at.shapeFlag&70)?f(at.el):X;m(at,it,Ft,null,Q,tt,dt,bt,!0)}},N=(B,j,X,Q,tt,dt,bt)=>{if(X!==Q){for(const ct in Q){if($g(ct))continue;const at=Q[ct],it=X[ct];at!==it&&ct!=="value"&&o(B,ct,it,at,bt,j.children,tt,dt,J)}if(X!==Le)for(const ct in X)!$g(ct)&&!(ct in Q)&&o(B,ct,X[ct],null,bt,j.children,tt,dt,J);"value"in Q&&o(B,"value",X.value,Q.value)}},z=(B,j,X,Q,tt,dt,bt,ct,at)=>{const it=j.el=B?B.el:a(""),Ft=j.anchor=B?B.anchor:a("");let{patchFlag:Lt,dynamicChildren:$t,slotScopeIds:Vt}=j;Vt&&(ct=ct?ct.concat(Vt):Vt),B==null?(n(it,X,Q),n(Ft,X,Q),A(j.children,X,Ft,tt,dt,bt,ct,at)):Lt>0&&Lt&64&&$t&&B.dynamicChildren?(L(B.dynamicChildren,$t,X,tt,dt,bt,ct),(j.key!=null||tt&&j===tt.subTree)&&k9(B,j,!0)):rt(B,j,X,Ft,tt,dt,bt,ct,at)},V=(B,j,X,Q,tt,dt,bt,ct,at)=>{j.slotScopeIds=ct,B==null?j.shapeFlag&512?tt.ctx.activate(j,X,Q,bt,at):F(j,X,Q,tt,dt,bt,at):G(B,j,at)},F=(B,j,X,Q,tt,dt,bt)=>{const ct=B.component=LH(B,Q,tt);if(c9(B)&&(ct.ctx.renderer=xt),OH(ct),ct.asyncDep){if(tt&&tt.registerDep(ct,K),!B.el){const at=ct.subTree=ht(xa);y(null,at,j,X)}return}K(ct,B,j,X,tt,dt,bt)},G=(B,j,X)=>{const Q=j.component=B.component;if(GG(B,j,X))if(Q.asyncDep&&!Q.asyncResolved){q(Q,j,X);return}else Q.next=j,zG(Q.update),Q.update();else j.el=B.el,Q.vnode=j},K=(B,j,X,Q,tt,dt,bt)=>{const ct=()=>{if(B.isMounted){let{next:Ft,bu:Lt,u:$t,parent:Vt,vnode:ee}=B,me=Ft,_e;rl(B,!1),Ft?(Ft.el=ee.el,q(B,Ft,bt)):Ft=ee,Lt&&zg(Lt),(_e=Ft.props&&Ft.props.onVnodeBeforeUpdate)&&ro(_e,Vt,Ft,ee),rl(B,!0);const Pe=xy(B),Fr=B.subTree;B.subTree=Pe,m(Fr,Pe,f(Fr.el),yt(Fr),B,tt,dt),Ft.el=Pe.el,me===null&&HG(B,Pe.el),$t&&pn($t,tt),(_e=Ft.props&&Ft.props.onVnodeUpdated)&&pn(()=>ro(_e,Vt,Ft,ee),tt)}else{let Ft;const{el:Lt,props:$t}=j,{bm:Vt,m:ee,parent:me}=B,_e=Cd(j);if(rl(B,!1),Vt&&zg(Vt),!_e&&(Ft=$t&&$t.onVnodeBeforeMount)&&ro(Ft,me,j),rl(B,!0),Lt&&vt){const Pe=()=>{B.subTree=xy(B),vt(Lt,B.subTree,B,tt,null)};_e?j.type.__asyncLoader().then(()=>!B.isUnmounted&&Pe()):Pe()}else{const Pe=B.subTree=xy(B);m(null,Pe,X,Q,B,tt,dt),j.el=Pe.el}if(ee&&pn(ee,tt),!_e&&(Ft=$t&&$t.onVnodeMounted)){const Pe=j;pn(()=>ro(Ft,me,Pe),tt)}(j.shapeFlag&256||me&&Cd(me.vnode)&&me.vnode.shapeFlag&256)&&B.a&&pn(B.a,tt),B.isMounted=!0,j=X=Q=null}},at=B.effect=new Ck(ct,()=>n9(it),B.scope),it=B.update=()=>at.run();it.id=B.uid,rl(B,!0),it()},q=(B,j,X)=>{j.component=B;const Q=B.vnode.props;B.vnode=j,B.next=null,gH(B,j.props,Q,X),yH(B,j.children,X),kf(),G1(void 0,B.update),Pf()},rt=(B,j,X,Q,tt,dt,bt,ct,at=!1)=>{const it=B&&B.children,Ft=B?B.shapeFlag:0,Lt=j.children,{patchFlag:$t,shapeFlag:Vt}=j;if($t>0){if($t&128){Nt(it,Lt,X,Q,tt,dt,bt,ct,at);return}else if($t&256){At(it,Lt,X,Q,tt,dt,bt,ct,at);return}}Vt&8?(Ft&16&&J(it,tt,dt),Lt!==it&&c(X,Lt)):Ft&16?Vt&16?Nt(it,Lt,X,Q,tt,dt,bt,ct,at):J(it,tt,dt,!0):(Ft&8&&c(X,""),Vt&16&&A(Lt,X,Q,tt,dt,bt,ct,at))},At=(B,j,X,Q,tt,dt,bt,ct,at)=>{B=B||jc,j=j||jc;const it=B.length,Ft=j.length,Lt=Math.min(it,Ft);let $t;for($t=0;$t<Lt;$t++){const Vt=j[$t]=at?ha(j[$t]):So(j[$t]);m(B[$t],Vt,X,null,tt,dt,bt,ct,at)}it>Ft?J(B,tt,dt,!0,!1,Lt):A(j,X,Q,tt,dt,bt,ct,at,Lt)},Nt=(B,j,X,Q,tt,dt,bt,ct,at)=>{let it=0;const Ft=j.length;let Lt=B.length-1,$t=Ft-1;for(;it<=Lt&&it<=$t;){const Vt=B[it],ee=j[it]=at?ha(j[it]):So(j[it]);if(ah(Vt,ee))m(Vt,ee,X,null,tt,dt,bt,ct,at);else break;it++}for(;it<=Lt&&it<=$t;){const Vt=B[Lt],ee=j[$t]=at?ha(j[$t]):So(j[$t]);if(ah(Vt,ee))m(Vt,ee,X,null,tt,dt,bt,ct,at);else break;Lt--,$t--}if(it>Lt){if(it<=$t){const Vt=$t+1,ee=Vt<Ft?j[Vt].el:Q;for(;it<=$t;)m(null,j[it]=at?ha(j[it]):So(j[it]),X,ee,tt,dt,bt,ct,at),it++}}else if(it>$t)for(;it<=Lt;)Ct(B[it],tt,dt,!0),it++;else{const Vt=it,ee=it,me=new Map;for(it=ee;it<=$t;it++){const Jr=j[it]=at?ha(j[it]):So(j[it]);Jr.key!=null&&me.set(Jr.key,it)}let _e,Pe=0;const Fr=$t-ee+1;let Qi=!1,b0=0;const Ja=new Array(Fr);for(it=0;it<Fr;it++)Ja[it]=0;for(it=Vt;it<=Lt;it++){const Jr=B[it];if(Pe>=Fr){Ct(Jr,tt,dt,!0);continue}let zn;if(Jr.key!=null)zn=me.get(Jr.key);else for(_e=ee;_e<=$t;_e++)if(Ja[_e-ee]===0&&ah(Jr,j[_e])){zn=_e;break}zn===void 0?Ct(Jr,tt,dt,!0):(Ja[zn-ee]=it+1,zn>=b0?b0=zn:Qi=!0,m(Jr,j[zn],X,null,tt,dt,bt,ct,at),Pe++)}const w0=Qi?kH(Ja):jc;for(_e=w0.length-1,it=Fr-1;it>=0;it--){const Jr=ee+it,zn=j[Jr],Qa=Jr+1<Ft?j[Jr+1].el:Q;Ja[it]===0?m(null,zn,X,Qa,tt,dt,bt,ct,at):Qi&&(_e<0||it!==w0[_e]?Pt(zn,X,Qa,2):_e--)}}},Pt=(B,j,X,Q,tt=null)=>{const{el:dt,type:bt,transition:ct,children:at,shapeFlag:it}=B;if(it&6){Pt(B.component.subTree,j,X,Q);return}if(it&128){B.suspense.move(j,X,Q);return}if(it&64){bt.move(B,j,X,xt);return}if(bt===W){n(dt,j,X);for(let Lt=0;Lt<at.length;Lt++)Pt(at[Lt],j,X,Q);n(B.anchor,j,X);return}if(bt===Wg){w(B,j,X);return}if(Q!==2&&it&1&&ct)if(Q===0)ct.beforeEnter(dt),n(dt,j,X),pn(()=>ct.enter(dt),tt);else{const{leave:Lt,delayLeave:$t,afterLeave:Vt}=ct,ee=()=>n(dt,j,X),me=()=>{Lt(dt,()=>{ee(),Vt&&Vt()})};$t?$t(dt,ee,me):me()}else n(dt,j,X)},Ct=(B,j,X,Q=!1,tt=!1)=>{const{type:dt,props:bt,ref:ct,children:at,dynamicChildren:it,shapeFlag:Ft,patchFlag:Lt,dirs:$t}=B;if(ct!=null&&AS(ct,null,X,B,!0),Ft&256){j.ctx.deactivate(B);return}const Vt=Ft&1&&$t,ee=!Cd(B);let me;if(ee&&(me=bt&&bt.onVnodeBeforeUnmount)&&ro(me,j,B),Ft&6)ot(B.component,X,Q);else{if(Ft&128){B.suspense.unmount(X,Q);return}Vt&&el(B,null,j,"beforeUnmount"),Ft&64?B.type.remove(B,j,X,tt,xt,Q):it&&(dt!==W||Lt>0&&Lt&64)?J(it,j,X,!1,!0):(dt===W&&Lt&384||!tt&&Ft&16)&&J(at,j,X),Q&&Zt(B)}(ee&&(me=bt&&bt.onVnodeUnmounted)||Vt)&&pn(()=>{me&&ro(me,j,B),Vt&&el(B,null,j,"unmounted")},X)},Zt=B=>{const{type:j,el:X,anchor:Q,transition:tt}=B;if(j===W){Y(X,Q);return}if(j===Wg){T(B);return}const dt=()=>{i(X),tt&&!tt.persisted&&tt.afterLeave&&tt.afterLeave()};if(B.shapeFlag&1&&tt&&!tt.persisted){const{leave:bt,delayLeave:ct}=tt,at=()=>bt(X,dt);ct?ct(B.el,dt,at):at()}else dt()},Y=(B,j)=>{let X;for(;B!==j;)X=h(B),i(B),B=X;i(j)},ot=(B,j,X)=>{const{bum:Q,scope:tt,update:dt,subTree:bt,um:ct}=B;Q&&zg(Q),tt.stop(),dt&&(dt.active=!1,Ct(bt,B,j,X)),ct&&pn(ct,j),pn(()=>{B.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},J=(B,j,X,Q=!1,tt=!1,dt=0)=>{for(let bt=dt;bt<B.length;bt++)Ct(B[bt],j,X,Q,tt)},yt=B=>B.shapeFlag&6?yt(B.component.subTree):B.shapeFlag&128?B.suspense.next():h(B.anchor||B.el),Et=(B,j,X)=>{B==null?j._vnode&&Ct(j._vnode,null,null,!0):m(j._vnode||null,B,j,null,null,null,X),s9(),j._vnode=B},xt={p:m,um:Ct,m:Pt,r:Zt,mt:F,mc:A,pc:rt,pbc:L,n:yt,o:e};let ft,vt;return t&&([ft,vt]=t(xt)),{render:Et,hydrate:ft,createApp:wH(Et,ft)}}function rl({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function k9(e,t,r=!1){const n=e.children,i=t.children;if(Bt(n)&&Bt(i))for(let o=0;o<n.length;o++){const s=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=ha(i[o]),a.el=s.el),r||k9(s,a))}}function kH(e){const t=e.slice(),r=[0];let n,i,o,s,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,s=r.length-1;o<s;)a=o+s>>1,e[r[a]]<u?o=a+1:s=a;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,s=r[o-1];o-- >0;)r[o]=s,s=t[s];return r}const PH=e=>e.__isTeleport,W=Symbol(void 0),Fk=Symbol(void 0),xa=Symbol(void 0),Wg=Symbol(void 0),Ed=[];let xi=null;function E(e=!1){Ed.push(xi=e?null:[])}function CH(){Ed.pop(),xi=Ed[Ed.length-1]||null}let op=1;function bA(e){op+=e}function P9(e){return e.dynamicChildren=op>0?xi||jc:null,CH(),op>0&&xi&&xi.push(e),e}function M(e,t,r,n,i,o){return P9(_(e,t,r,n,i,o,!0))}function yr(e,t,r,n,i){return P9(ht(e,t,r,n,i,!0))}function Om(e){return e?e.__v_isVNode===!0:!1}function ah(e,t){return e.type===t.type&&e.key===t.key}const Z1="__vInternal",C9=({key:e})=>e!=null?e:null,jg=({ref:e,ref_key:t,ref_for:r})=>e!=null?hr(e)||Je(e)||Xt(e)?{i:Xr,r:e,k:t,f:!!r}:e:null;function _(e,t=null,r=null,n=0,i=null,o=e===W?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&C9(t),ref:t&&jg(t),scopeId:X1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return a?($k(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=hr(r)?8:16),op>0&&!s&&xi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&xi.push(l),l}const ht=EH;function EH(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===d9)&&(e=xa),Om(e)){const a=of(e,t,!0);return r&&$k(a,r),op>0&&!o&&xi&&(a.shapeFlag&6?xi[xi.indexOf(e)]=a:xi.push(a)),a.patchFlag|=-2,a}if($H(e)&&(e=e.__vccOpts),t){t=AH(t);let{class:a,style:l}=t;a&&!hr(a)&&(t.class=_r(a)),ir(l)&&(KD(l)&&!Bt(l)&&(l=an({},l)),t.style=Xl(l))}const s=hr(e)?1:XG(e)?128:PH(e)?64:ir(e)?4:Xt(e)?2:0;return _(e,t,r,n,i,s,o,!0)}function AH(e){return e?KD(e)||Z1 in e?an({},e):e:null}function of(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:s}=e,a=t?MH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&C9(a),ref:t&&t.ref?r&&i?Bt(i)?i.concat(jg(t)):[i,jg(t)]:jg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&of(e.ssContent),ssFallback:e.ssFallback&&of(e.ssFallback),el:e.el,anchor:e.anchor}}function R(e=" ",t=0){return ht(Fk,null,e,t)}function K1(e,t){const r=ht(Wg,null,e);return r.staticCount=t,r}function Z(e="",t=!1){return t?(E(),yr(xa,null,e)):ht(xa,null,e)}function So(e){return e==null||typeof e=="boolean"?ht(xa):Bt(e)?ht(W,null,e.slice()):typeof e=="object"?ha(e):ht(Fk,null,String(e))}function ha(e){return e.el===null||e.memo?e:of(e)}function $k(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Bt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),$k(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(Z1 in t)?t._ctx=Xr:i===3&&Xr&&(Xr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Xt(t)?(t={default:t,_ctx:Xr},r=32):(t=String(t),n&64?(r=16,t=[R(t)]):r=8);e.children=t,e.shapeFlag|=r}function MH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=_r([t.class,n.class]));else if(i==="style")t.style=Xl([t.style,n.style]);else if(z1(i)){const o=t[i],s=n[i];s&&o!==s&&!(Bt(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=n[i])}return t}function ro(e,t,r,n=null){Fi(e,t,7,[r,n])}const xH=T9();let IH=0;function LH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||xH,o={uid:IH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new $D(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:y9(n,i),emitsOptions:l9(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=UG.bind(null,o),e.ce&&e.ce(o),o}let mr=null;const zk=()=>mr||Xr,sf=e=>{mr=e,e.scope.on()},ql=()=>{mr&&mr.scope.off(),mr=null};function E9(e){return e.vnode.shapeFlag&4}let sp=!1;function OH(e,t=!1){sp=t;const{props:r,children:n}=e.vnode,i=E9(e);vH(e,r,i,t),_H(e,n);const o=i?RH(e,t):void 0;return sp=!1,o}function RH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ei(new Proxy(e.ctx,uH));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?NH(e):null;sf(e),kf();const o=Ta(n,e,0,[e.props,i]);if(Pf(),ql(),DD(o)){if(o.then(ql,ql),t)return o.then(s=>{wA(e,s,t)}).catch(s=>{j1(s,e,0)});e.asyncDep=o}else wA(e,o,t)}else A9(e,t)}function wA(e,t,r){Xt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ir(t)&&(e.setupState=e9(t)),A9(e,r)}let SA;function A9(e,t,r){const n=e.type;if(!e.render){if(!t&&SA&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,u=an(an({isCustomElement:o,delimiters:a},s),l);n.render=SA(i,u)}}e.render=n.render||Ni}sf(e),kf(),cH(e),Pf(),ql()}function DH(e){return new Proxy(e.attrs,{get(t,r){return Dn(e,"get","$attrs"),t[r]}})}function NH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=DH(e))},slots:e.slots,emit:e.emit,expose:t}}function J1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(e9(Ei(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Im)return Im[r](e)}}))}function FH(e,t=!0){return Xt(e)?e.displayName||e.name:e.name||t&&e.__name}function $H(e){return Xt(e)&&"__vccOpts"in e}const Ze=(e,t)=>NG(e,t,sp);function Bk(e,t,r){const n=arguments.length;return n===2?ir(t)&&!Bt(t)?Om(t)?ht(e,null,[t]):ht(e,t):ht(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Om(r)&&(r=[r]),ht(e,t,r))}const zH="3.2.37",BH="http://www.w3.org/2000/svg",Fl=typeof document<"u"?document:null,TA=Fl&&Fl.createElement("template"),VH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Fl.createElementNS(BH,e):Fl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Fl.createTextNode(e),createComment:e=>Fl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const s=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{TA.innerHTML=n?`<svg>${e}</svg>`:e;const a=TA.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function UH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function WH(e,t,r){const n=e.style,i=hr(r);if(r&&!i){for(const o in r)MS(n,o,r[o]);if(t&&!hr(t))for(const o in t)r[o]==null&&MS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const kA=/\s*!important$/;function MS(e,t,r){if(Bt(r))r.forEach(n=>MS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=jH(e,t);kA.test(r)?e.setProperty(Tf(n),r.replace(kA,""),"important"):e[n]=r}}const PA=["Webkit","Moz","ms"],Iy={};function jH(e,t){const r=Iy[t];if(r)return r;let n=Oo(t);if(n!=="filter"&&n in e)return Iy[t]=n;n=V1(n);for(let i=0;i<PA.length;i++){const o=PA[i]+n;if(o in e)return Iy[t]=o}return t}const CA="http://www.w3.org/1999/xlink";function GH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(CA,t.slice(6,t.length)):e.setAttributeNS(CA,t,r);else{const o=Xj(t);r==null||o&&!OD(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function HH(e,t,r,n,i,o,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let a=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=OD(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(t)}const[M9,XH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let xS=0;const YH=Promise.resolve(),qH=()=>{xS=0},ZH=()=>xS||(YH.then(qH),xS=M9());function us(e,t,r,n){e.addEventListener(t,r,n)}function KH(e,t,r,n){e.removeEventListener(t,r,n)}function JH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),s=o[t];if(n&&s)s.value=n;else{const[a,l]=QH(t);if(n){const u=o[t]=tX(n,i);us(e,a,u,l)}else s&&(KH(e,a,s,l),o[t]=void 0)}}const EA=/(?:Once|Passive|Capture)$/;function QH(e){let t;if(EA.test(e)){t={};let r;for(;r=e.match(EA);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[Tf(e.slice(2)),t]}function tX(e,t){const r=n=>{const i=n.timeStamp||M9();(XH||i>=r.attached-1)&&Fi(eX(n,r.value),t,5,[n])};return r.value=e,r.attached=ZH(),r}function eX(e,t){if(Bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const AA=/^on[a-z]/,rX=(e,t,r,n,i=!1,o,s,a,l)=>{t==="class"?UH(e,n,i):t==="style"?WH(e,r,n):z1(t)?Sk(t)||JH(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):nX(e,t,n,i))?HH(e,t,n,o,s,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),GH(e,t,n,i))};function nX(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&AA.test(t)&&Xt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||AA.test(t)&&hr(r)?!1:t in e}const Ia=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Bt(t)?r=>zg(t,r):t};function iX(e){e.target.composing=!0}function MA(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const zt={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Ia(i);const o=n||i.props&&i.props.type==="number";us(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;r&&(a=a.trim()),o&&(a=Am(a)),e._assign(a)}),r&&us(e,"change",()=>{e.value=e.value.trim()}),t||(us(e,"compositionstart",iX),us(e,"compositionend",MA),us(e,"change",MA))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Ia(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&Am(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},Ve={deep:!0,created(e,t,r){e._assign=Ia(r),us(e,"change",()=>{const n=e._modelValue,i=af(e),o=e.checked,s=e._assign;if(Bt(n)){const a=wk(n,i),l=a!==-1;if(o&&!l)s(n.concat(i));else if(!o&&l){const u=[...n];u.splice(a,1),s(u)}}else if(Sf(n)){const a=new Set(n);o?a.add(i):a.delete(i),s(a)}else s(x9(e,o))})},mounted:xA,beforeUpdate(e,t,r){e._assign=Ia(r),xA(e,t,r)}};function xA(e,{value:t,oldValue:r},n){e._modelValue=t,Bt(t)?e.checked=wk(t,n.props.value)>-1:Sf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=ou(t,x9(e,!0)))}const Ad={created(e,{value:t},r){e.checked=ou(t,r.props.value),e._assign=Ia(r),us(e,"change",()=>{e._assign(af(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Ia(n),t!==r&&(e.checked=ou(t,n.props.value))}},He={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=Sf(t);us(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>r?Am(af(s)):af(s));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Ia(n)},mounted(e,{value:t}){IA(e,t)},beforeUpdate(e,t,r){e._assign=Ia(r)},updated(e,{value:t}){IA(e,t)}};function IA(e,t){const r=e.multiple;if(!(r&&!Bt(t)&&!Sf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],s=af(o);if(r)Bt(t)?o.selected=wk(t,s)>-1:o.selected=t.has(s);else if(ou(af(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function af(e){return"_value"in e?e._value:e.value}function x9(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const oX=["ctrl","shift","alt","meta"],sX={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>oX.some(r=>e[`${r}Key`]&&!t.includes(r))},ap=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=sX[t[i]];if(o&&o(r,t))return}return e(r,...n)},aX={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):lh(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),lh(e,!0),n.enter(e)):n.leave(e,()=>{lh(e,!1)}):lh(e,t))},beforeUnmount(e,{value:t}){lh(e,t)}};function lh(e,t){e.style.display=t?e._vod:"none"}const lX=an({patchProp:rX},VH);let LA;function uX(){return LA||(LA=SH(lX))}const cX=(...e)=>{const t=uX().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=fX(n);if(!i)return;const o=t._component;!Xt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function fX(e){return hr(e)?document.querySelector(e):e}var hX=!1;function O0(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function Ly(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function dX(){return I9().__VUE_DEVTOOLS_GLOBAL_HOOK__}function I9(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const pX=typeof Proxy=="function",vX="devtools-plugin:setup",gX="plugin:settings:set";let Gu,IS;function mX(){var e;return Gu!==void 0||(typeof window<"u"&&window.performance?(Gu=!0,IS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Gu=!0,IS=global.perf_hooks.performance):Gu=!1),Gu}function _X(){return mX()?IS.now():Date.now()}class yX{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const s in t.settings){const a=t.settings[s];n[s]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const s=localStorage.getItem(i),a=JSON.parse(s);Object.assign(o,a)}catch{}this.fallbacks={getSettings(){return o},setSettings(s){try{localStorage.setItem(i,JSON.stringify(s))}catch{}o=s},now(){return _X()}},r&&r.on(gX,(s,a)=>{s===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(s,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function L9(e,t){const r=e,n=I9(),i=dX(),o=pX&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(vX,e,t);else{const s=o?new yX(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let LS;const lp=e=>LS=e,O9=Symbol("pinia");function au(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var xo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(xo||(xo={}));const pa=typeof window<"u",OA=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function bX(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function Vk(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){N9(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function R9(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Gg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Hg=typeof navigator=="object"?navigator:{userAgent:""},D9=(()=>/Macintosh/.test(Hg.userAgent)&&/AppleWebKit/.test(Hg.userAgent)&&!/Safari/.test(Hg.userAgent))(),N9=pa?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!D9?wX:"msSaveOrOpenBlob"in Hg?SX:TX:()=>{};function wX(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?R9(n.href)?Vk(e,t,r):(n.target="_blank",Gg(n)):Gg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Gg(n)},0))}function SX(e,t="download",r){if(typeof e=="string")if(R9(e))Vk(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Gg(n)})}else navigator.msSaveOrOpenBlob(bX(e,r),t)}function TX(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Vk(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(OA.HTMLElement))||"safari"in OA,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o||D9)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=s?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},a.readAsDataURL(e)}else{const a=URL.createObjectURL(e);n?n.location.assign(a):location.href=a,n=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function vr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function Uk(e){return"_a"in e&&"install"in e}function F9(){if(!("clipboard"in navigator))return vr("Your browser doesn't support the Clipboard API","error"),!0}function $9(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(vr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function kX(e){if(!F9())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),vr("Global state copied to clipboard.")}catch(t){if($9(t))return;vr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function PX(e){if(!F9())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),vr("Global state pasted from clipboard.")}catch(t){if($9(t))return;vr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function CX(e){try{N9(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){vr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Xo;function EX(){Xo||(Xo=document.createElement("input"),Xo.type="file",Xo.accept=".json");function e(){return new Promise((t,r)=>{Xo.onchange=async()=>{const n=Xo.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Xo.oncancel=()=>t(null),Xo.onerror=r,Xo.click()})}return e}async function AX(e){try{const r=await(await EX())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),vr(`Global state imported from "${i.name}".`)}catch(t){vr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function Ti(e){return{_custom:{display:e}}}const z9="\u{1F34D} Pinia (root)",OS="_root";function MX(e){return Uk(e)?{id:OS,label:z9}:{id:e.$id,label:e.$id}}function xX(e){if(Uk(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const s=n.get(o);return{editable:!1,key:o,value:s._getters.reduce((a,l)=>(a[l]=s[l],a),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function IX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Ti(e.type),key:Ti(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function LX(e){switch(e){case xo.direct:return"mutation";case xo.patchFunction:return"$patch";case xo.patchObject:return"$patch";default:return"unknown"}}let Lc=!0;const Xg=[],Ll="pinia:mutations",Vr="pinia",Rm=e=>"\u{1F34D} "+e;function OX(e,t){L9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Xg,app:e},r=>{typeof r.now!="function"&&vr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:Ll,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Vr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{kX(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await PX(t),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{CX(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await AX(t),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),vr(`Store "${n}" reset.`)):vr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):vr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const s=n.componentInstance.proxy._pStores;Object.values(s).forEach(a=>{n.instanceData.state.push({type:Rm(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:de(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,u)=>(l[u]=a.$state[u],l),{})}),a._getters&&a._getters.length&&n.instanceData.state.push({type:Rm(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,u)=>{try{l[u]=a[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Vr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):z9.toLowerCase().includes(n.filter.toLowerCase())):i).map(MX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Vr){const i=n.nodeId===OS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=xX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Vr){const o=n.nodeId===OS?t:t._s.get(n.nodeId);if(!o)return vr(`store "${n.nodeId}" not found`,"error");const{path:s}=n;Uk(o)?s.unshift("state"):(s.length!==1||!o._customProperties.has(s[0])||s[0]in o.$state)&&s.unshift("$state"),Lc=!1,n.set(o,s,n.state.value),Lc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return vr(`store "${i}" not found`,"error");const{path:s}=n;if(s[0]!=="state")return vr(`Invalid path for store "${i}":
${s}
Only state can be modified.`);s[0]="$state",Lc=!1,n.set(o,s,n.state.value),Lc=!0}})})}function RX(e,t){Xg.includes(Rm(t.$id))||Xg.push(Rm(t.$id)),L9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Xg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:s,onError:a,name:l,args:u})=>{const c=B9++;r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:Ti(t.$id),action:Ti(l),args:u},groupId:c}}),s(f=>{$l=void 0,r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:Ti(t.$id),action:Ti(l),args:u,result:f},groupId:c}})}),a(f=>{$l=void 0,r.addTimelineEvent({layerId:Ll,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:Ti(t.$id),action:Ti(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(s=>{Co(()=>Ar(t[s]),(a,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Vr),Lc&&r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"Change",subtitle:s,data:{newValue:a,oldValue:l},groupId:$l}})},{deep:!0})}),t.$subscribe(({events:s,type:a},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Vr),!Lc)return;const u={time:n(),title:LX(a),data:{store:Ti(t.$id),...IX(s)},groupId:$l};$l=void 0,a===xo.patchFunction?u.subtitle="\u2935\uFE0F":a===xo.patchObject?u.subtitle="\u{1F9E9}":s&&!Array.isArray(s)&&(u.subtitle=s.type),s&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:s}}),r.addTimelineEvent({layerId:Ll,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=Ei(s=>{i(s),r.addTimelineEvent({layerId:Ll,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:Ti(t.$id),info:Ti("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr),r.getSettings().logStoreChanges&&vr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Vr),r.sendInspectorState(Vr),r.getSettings().logStoreChanges&&vr(`"${t.$id}" store installed \u{1F195}`)})}let B9=0,$l;function RA(e,t){const r=t.reduce((n,i)=>(n[i]=de(e)[i],n),{});for(const n in r)e[n]=function(){const i=B9,o=new Proxy(e,{get(...s){return $l=i,Reflect.get(...s)},set(...s){return $l=i,Reflect.set(...s)}});return r[n].apply(o,arguments)}}function DX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){RA(t,Object.keys(r.actions));const n=t._hotUpdate;de(t)._hotUpdate=function(i){n.apply(this,arguments),RA(t,Object.keys(i._hmrPayload.actions))}}RX(e,t)}}function NX(){const e=zD(!0),t=e.run(()=>W1({}));let r=[],n=[];const i=Ei({install(o){lp(i),i._a=o,o.provide(O9,i),o.config.globalProperties.$pinia=i,pa&&OX(o,i),n.forEach(s=>r.push(s)),n=[]},use(o){return!this._a&&!hX?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return pa&&!0&&typeof Proxy<"u"&&i.use(DX),i}function V9(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];au(i)&&au(n)&&!Je(n)&&!ps(n)?e[r]=V9(i,n):e[r]=n}return e}const FX=()=>{};function DA(e,t,r,n=FX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&zk()&&q1(i),i}function Hu(e,...t){e.slice().forEach(r=>{r(...t)})}function RS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];au(i)&&au(n)&&e.hasOwnProperty(r)&&!Je(n)&&!ps(n)?e[r]=RS(i,n):e[r]=n}return e}const $X=Symbol("pinia:skipHydration");function zX(e){return!au(e)||!e.hasOwnProperty($X)}const{assign:Ci}=Object;function NA(e){return!!(Je(e)&&e.effect)}function FA(e,t,r,n){const{state:i,actions:o,getters:s}=t,a=r.state.value[e];let l;function u(){!a&&!n&&(r.state.value[e]=i?i():{});const c=wS(n?W1(i?i():{}).value:r.state.value[e]);return Ci(c,o,Object.keys(s||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=Ei(Ze(()=>{lp(r);const d=r._s.get(e);return s[h].call(d,d)})),f),{}))}return l=DS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{Ci(h,f)})},l}function DS(e,t,r={},n,i,o){let s;const a=Ci({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!k._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=Ei([]),h=Ei([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=W1({});let m;function g(A){let I;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),I={type:xo.patchFunction,storeId:e,events:d}):(RS(n.state.value[e],A),I={type:xo.patchObject,payload:A,storeId:e,events:d});const L=m=Symbol();su().then(()=>{m===L&&(u=!0)}),c=!0,Hu(f,I,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function b(){s.stop(),f=[],h=[],n._s.delete(e)}function w(A,I){return function(){lp(n);const L=Array.from(arguments),N=[],z=[];function V(K){N.push(K)}function F(K){z.push(K)}Hu(h,{args:L,name:A,store:k,after:V,onError:F});let G;try{G=I.apply(this&&this.$id===e?this:k,L)}catch(K){throw Hu(z,K),K}return G instanceof Promise?G.then(K=>(Hu(N,K),K)).catch(K=>(Hu(z,K),Promise.reject(K))):(Hu(N,G),G)}}const T=Ei({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:DA.bind(null,h),$patch:g,$reset:y,$subscribe(A,I={}){const L=DA(f,A,I.detached,()=>N()),N=s.run(()=>Co(()=>n.state.value[e],z=>{(I.flush==="sync"?c:u)&&A({storeId:e,type:xo.direct,events:d},z)},Ci({},l,I)));return L},$dispose:b},k=Cf(Ci(pa?{_customProperties:Ei(new Set),_hmrPayload:T}:{},S));n._s.set(e,k);const x=n._e.run(()=>(s=zD(),s.run(()=>t())));for(const A in x){const I=x[A];if(Je(I)&&!NA(I)||ps(I))i?O0(v.value,A,Vg(x,A)):o||(p&&zX(I)&&(Je(I)?I.value=p[A]:RS(I,p[A])),n.state.value[e][A]=I),T.state.push(A);else if(typeof I=="function"){const L=i?I:w(A,I);x[A]=L,T.actions[A]=I,a.actions[A]=I}else NA(I)&&(T.getters[A]=o?r.getters[A]:I,pa&&(x._getters||(x._getters=Ei([]))).push(A))}Ci(k,x),Ci(de(k),x),Object.defineProperty(k,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");g(I=>{Ci(I,A)})}});{k._hotUpdate=Ei(I=>{k._hotUpdating=!0,I._hmrPayload.state.forEach(L=>{if(L in k.$state){const N=I.$state[L],z=k.$state[L];typeof N=="object"&&au(N)&&au(z)?V9(N,z):I.$state[L]=z}O0(k,L,Vg(I.$state,L))}),Object.keys(k.$state).forEach(L=>{L in I.$state||Ly(k,L)}),u=!1,c=!1,n.state.value[e]=Vg(I._hmrPayload,"hotState"),c=!0,su().then(()=>{u=!0});for(const L in I._hmrPayload.actions){const N=I[L];O0(k,L,w(L,N))}for(const L in I._hmrPayload.getters){const N=I._hmrPayload.getters[L],z=o?Ze(()=>(lp(n),N.call(k,k))):N;O0(k,L,z)}Object.keys(k._hmrPayload.getters).forEach(L=>{L in I._hmrPayload.getters||Ly(k,L)}),Object.keys(k._hmrPayload.actions).forEach(L=>{L in I._hmrPayload.actions||Ly(k,L)}),k._hmrPayload=I._hmrPayload,k._getters=I._getters,k._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};pa&&["_p","_hmrPayload","_getters","_customProperties"].forEach(I=>{Object.defineProperty(k,I,{value:k[I],...A})})}return n._p.forEach(A=>{if(pa){const I=s.run(()=>A({store:k,app:n._a,pinia:n,options:a}));Object.keys(I||{}).forEach(L=>k._customProperties.add(L)),Ci(k,I)}else Ci(k,s.run(()=>A({store:k,app:n._a,pinia:n,options:a})))}),k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),p&&o&&r.hydrate&&r.hydrate(k.$state,p),u=!0,c=!0,k}function Gp(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function s(a,l){const u=zk();if(a=a||u&&Ln(O9),a&&lp(a),!LS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=LS,a._s.has(n)||(o?DS(n,t,i,a):FA(n,i,a),s._pinia=a);const c=a._s.get(n);if(l){const f="__hot:"+n,h=o?DS(f,t,i,a,!0):FA(f,Ci({},i),a,!0);l._hotUpdate(h),delete a.state.value[f],a._s.delete(f)}if(pa&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return s.$id=n,s}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ec=typeof window<"u";function BX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function Oy(e,t){const r={};for(const n in t){const i=t[n];r[n]=Vi(i)?i.map(e):e(i)}return r}const Md=()=>{},Vi=Array.isArray,VX=/\/$/,UX=e=>e.replace(VX,"");function Ry(e,t,r="/"){let n,i={},o="",s="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),s=t.slice(a,t.length)),n=HX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+s,path:n,query:i,hash:s}}function WX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function $A(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function jX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&lf(t.matched[n],r.matched[i])&&U9(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function lf(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function U9(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!GX(e[r],t[r]))return!1;return!0}function GX(e,t){return Vi(e)?zA(e,t):Vi(t)?zA(t,e):e===t}function zA(e,t){return Vi(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function HX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var up;(function(e){e.pop="pop",e.push="push"})(up||(up={}));var xd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(xd||(xd={}));function XX(e){if(!e)if(Ec){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),UX(e)}const YX=/^[^#]+#/;function qX(e,t){return e.replace(YX,"#")+t}function ZX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const Q1=()=>({left:window.pageXOffset,top:window.pageYOffset});function KX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=ZX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function BA(e,t){return(history.state?history.state.position-t:-1)+e}const NS=new Map;function JX(e,t){NS.set(e,t)}function QX(e){const t=NS.get(e);return NS.delete(e),t}let tY=()=>location.protocol+"//"+location.host;function W9(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),$A(l,"")}return $A(r,e)+n+i}function eY(e,t,r,n){let i=[],o=[],s=null;const a=({state:h})=>{const d=W9(e,location),p=r.value,v=t.value;let m=0;if(h){if(r.value=d,t.value=h,s&&s===p){s=null;return}m=v?h.position-v.position:0}else n(d);i.forEach(g=>{g(r.value,p,{delta:m,type:up.pop,direction:m?m>0?xd.forward:xd.back:xd.unknown})})};function l(){s=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:Q1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function VA(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?Q1():null}}function rY(e){const{history:t,location:r}=window,n={value:W9(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:tY()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function s(l,u){const c=Ae({},t.state,VA(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function a(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:Q1()});o(c.current,c,!0);const f=Ae({},VA(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:a,replace:s}}function nY(e){e=XX(e);const t=rY(e),r=eY(e,t.state,t.location,t.replace);function n(o,s=!0){s||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:qX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function iY(e){return typeof e=="string"||e&&typeof e=="object"}function j9(e){return typeof e=="string"||typeof e=="symbol"}const $s={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},G9=Symbol("");var UA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(UA||(UA={}));function uf(e,t){return Ae(new Error,{type:e,[G9]:!0},t)}function Yo(e,t){return e instanceof Error&&G9 in e&&(t==null||!!(e.type&t))}const WA="[^/]+?",oY={sensitive:!1,strict:!1,start:!0,end:!0},sY=/[.+*?^${}()[\]/\\]/g;function aY(e,t){const r=Ae({},oY,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(sY,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:m,regexp:g}=h;o.push({name:p,repeatable:v,optional:m});const y=g||WA;if(y!==WA){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let b=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=m&&u.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),i+=b,d+=20,m&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function a(u){const c=u.match(s),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:m}=d,g=p in u?u[p]:"";if(Vi(g)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Vi(g)?g.join("/"):g;if(!y)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:s,score:n,keys:o,parse:a,stringify:l}}function lY(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function uY(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=lY(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(jA(n))return 1;if(jA(i))return-1}return i.length-n.length}function jA(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cY={type:0,value:""},fY=/[a-zA-Z0-9_]/;function hY(e){if(!e)return[[]];if(e==="/")return[[cY]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),s()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:fY.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),s(),i}function dY(e,t,r){const n=aY(hY(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function pY(e,t){const r=[],n=new Map;t=HA({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=gY(c);p.aliasOf=h&&h.record;const v=HA(t,c),m=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)m.push(Ae({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let g,y;for(const b of m){const{path:w}=b;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";b.path=f.record.path+(w&&S+w)}if(g=dY(b,f,v),h?h.alias.push(g):(y=y||g,y!==g&&y.alias.push(g),d&&c.name&&!GA(g)&&s(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],g,h&&h.children[S])}h=h||g,l(g)}return y?()=>{s(y)}:Md}function s(c){if(j9(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(s),c.alias.forEach(s))}}function a(){return r}function l(c){let f=0;for(;f<r.length&&uY(c,r[f])>=0&&(c.record.path!==r[f].record.path||!H9(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!GA(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw uf(1,{location:c});v=h.record.name,d=Ae(vY(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw uf(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const m=[];let g=h;for(;g;)m.unshift(g.record),g=g.parent;return{name:v,path:p,params:d,matched:m,meta:_Y(m)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:i}}function vY(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function gY(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:mY(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function mY(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function GA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _Y(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function HA(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function H9(e,t){return t.children.some(r=>r===e||H9(e,r))}const X9=/#/g,yY=/&/g,bY=/\//g,wY=/=/g,SY=/\?/g,Y9=/\+/g,TY=/%5B/g,kY=/%5D/g,q9=/%5E/g,PY=/%60/g,Z9=/%7B/g,CY=/%7C/g,K9=/%7D/g,EY=/%20/g;function Wk(e){return encodeURI(""+e).replace(CY,"|").replace(TY,"[").replace(kY,"]")}function AY(e){return Wk(e).replace(Z9,"{").replace(K9,"}").replace(q9,"^")}function FS(e){return Wk(e).replace(Y9,"%2B").replace(EY,"+").replace(X9,"%23").replace(yY,"%26").replace(PY,"`").replace(Z9,"{").replace(K9,"}").replace(q9,"^")}function MY(e){return FS(e).replace(wY,"%3D")}function xY(e){return Wk(e).replace(X9,"%23").replace(SY,"%3F")}function IY(e){return e==null?"":xY(e).replace(bY,"%2F")}function Dm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function LY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(Y9," "),s=o.indexOf("="),a=Dm(s<0?o:o.slice(0,s)),l=s<0?null:Dm(o.slice(s+1));if(a in t){let u=t[a];Vi(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function XA(e){let t="";for(let r in e){const n=e[r];if(r=MY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Vi(n)?n.map(o=>o&&FS(o)):[n&&FS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function OY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Vi(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const RY=Symbol(""),YA=Symbol(""),jk=Symbol(""),J9=Symbol(""),$S=Symbol("");function uh(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function da(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,a)=>{const l=f=>{f===!1?a(uf(4,{from:r,to:t})):f instanceof Error?a(f):iY(f)?a(uf(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>a(f))})}function Dy(e,t,r,n){const i=[];for(const o of e)for(const s in o.components){let a=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(DY(a)){const u=(a.__vccOpts||a)[t];u&&i.push(da(u,r,n,o,s))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const c=BX(u)?u.default:u;o.components[s]=c;const h=(c.__vccOpts||c)[t];return h&&da(h,r,n,o,s)()}))}}return i}function DY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function qA(e){const t=Ln(jk),r=Ln(J9),n=Ze(()=>t.resolve(Ar(e.to))),i=Ze(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(lf.bind(null,c));if(h>-1)return h;const d=ZA(l[u-2]);return u>1&&ZA(c)===d&&f[f.length-1].path!==d?f.findIndex(lf.bind(null,l[u-2])):h}),o=Ze(()=>i.value>-1&&$Y(r.params,n.value.params)),s=Ze(()=>i.value>-1&&i.value===r.matched.length-1&&U9(r.params,n.value.params));function a(l={}){return FY(l)?t[Ar(e.replace)?"replace":"push"](Ar(e.to)).catch(Md):Promise.resolve()}return{route:n,href:Ze(()=>n.value.href),isActive:o,isExactActive:s,navigate:a}}const NY=Rk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qA,setup(e,{slots:t}){const r=Cf(qA(e)),{options:n}=Ln(jk),i=Ze(()=>({[KA(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[KA(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:Bk("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),Ac=NY;function FY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $Y(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Vi(i)||i.length!==n.length||n.some((o,s)=>o!==i[s]))return!1}return!0}function ZA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const KA=(e,t,r)=>e!=null?e:t!=null?t:r,zY=Rk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Ln($S),i=Ze(()=>e.route||n.value),o=Ln(YA,0),s=Ze(()=>{let u=Ar(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=Ze(()=>i.value.matched[s.value]);Ug(YA,Ze(()=>s.value+1)),Ug(RY,a),Ug($S,i);const l=W1();return Co(()=>[l.value,a.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!lf(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=a.value,h=f&&f.components[c];if(!h)return JA(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,m=Bk(h,Ae({},p,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return JA(r.default,{Component:m,route:u})||m}}});function JA(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const Q9=zY;function BY(e){const t=pY(e.routes,e),r=e.parseQuery||LY,n=e.stringifyQuery||XA,i=e.history,o=uh(),s=uh(),a=uh(),l=Bg($s);let u=$s;Ec&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Oy.bind(null,Y=>""+Y),f=Oy.bind(null,IY),h=Oy.bind(null,Dm);function d(Y,ot){let J,yt;return j9(Y)?(J=t.getRecordMatcher(Y),yt=ot):yt=Y,t.addRoute(yt,J)}function p(Y){const ot=t.getRecordMatcher(Y);ot&&t.removeRoute(ot)}function v(){return t.getRoutes().map(Y=>Y.record)}function m(Y){return!!t.getRecordMatcher(Y)}function g(Y,ot){if(ot=Ae({},ot||l.value),typeof Y=="string"){const vt=Ry(r,Y,ot.path),B=t.resolve({path:vt.path},ot),j=i.createHref(vt.fullPath);return Ae(vt,B,{params:h(B.params),hash:Dm(vt.hash),redirectedFrom:void 0,href:j})}let J;if("path"in Y)J=Ae({},Y,{path:Ry(r,Y.path,ot.path).path});else{const vt=Ae({},Y.params);for(const B in vt)vt[B]==null&&delete vt[B];J=Ae({},Y,{params:f(Y.params)}),ot.params=f(ot.params)}const yt=t.resolve(J,ot),Et=Y.hash||"";yt.params=c(h(yt.params));const xt=WX(n,Ae({},Y,{hash:AY(Et),path:yt.path})),ft=i.createHref(xt);return Ae({fullPath:xt,hash:Et,query:n===XA?OY(Y.query):Y.query||{}},yt,{redirectedFrom:void 0,href:ft})}function y(Y){return typeof Y=="string"?Ry(r,Y,l.value.path):Ae({},Y)}function b(Y,ot){if(u!==Y)return uf(8,{from:ot,to:Y})}function w(Y){return k(Y)}function T(Y){return w(Ae(y(Y),{replace:!0}))}function S(Y){const ot=Y.matched[Y.matched.length-1];if(ot&&ot.redirect){const{redirect:J}=ot;let yt=typeof J=="function"?J(Y):J;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=y(yt):{path:yt},yt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in yt?{}:Y.params},yt)}}function k(Y,ot){const J=u=g(Y),yt=l.value,Et=Y.state,xt=Y.force,ft=Y.replace===!0,vt=S(J);if(vt)return k(Ae(y(vt),{state:Et,force:xt,replace:ft}),ot||J);const B=J;B.redirectedFrom=ot;let j;return!xt&&jX(n,yt,J)&&(j=uf(16,{to:B,from:yt}),At(yt,yt,!0,!1)),(j?Promise.resolve(j):A(B,yt)).catch(X=>Yo(X)?Yo(X,2)?X:rt(X):K(X,B,yt)).then(X=>{if(X){if(Yo(X,2))return k(Ae({replace:ft},y(X.to),{state:Et,force:xt}),ot||B)}else X=L(B,yt,!0,ft,Et);return I(B,yt,X),X})}function x(Y,ot){const J=b(Y,ot);return J?Promise.reject(J):Promise.resolve()}function A(Y,ot){let J;const[yt,Et,xt]=VY(Y,ot);J=Dy(yt.reverse(),"beforeRouteLeave",Y,ot);for(const vt of yt)vt.leaveGuards.forEach(B=>{J.push(da(B,Y,ot))});const ft=x.bind(null,Y,ot);return J.push(ft),Xu(J).then(()=>{J=[];for(const vt of o.list())J.push(da(vt,Y,ot));return J.push(ft),Xu(J)}).then(()=>{J=Dy(Et,"beforeRouteUpdate",Y,ot);for(const vt of Et)vt.updateGuards.forEach(B=>{J.push(da(B,Y,ot))});return J.push(ft),Xu(J)}).then(()=>{J=[];for(const vt of Y.matched)if(vt.beforeEnter&&!ot.matched.includes(vt))if(Vi(vt.beforeEnter))for(const B of vt.beforeEnter)J.push(da(B,Y,ot));else J.push(da(vt.beforeEnter,Y,ot));return J.push(ft),Xu(J)}).then(()=>(Y.matched.forEach(vt=>vt.enterCallbacks={}),J=Dy(xt,"beforeRouteEnter",Y,ot),J.push(ft),Xu(J))).then(()=>{J=[];for(const vt of s.list())J.push(da(vt,Y,ot));return J.push(ft),Xu(J)}).catch(vt=>Yo(vt,8)?vt:Promise.reject(vt))}function I(Y,ot,J){for(const yt of a.list())yt(Y,ot,J)}function L(Y,ot,J,yt,Et){const xt=b(Y,ot);if(xt)return xt;const ft=ot===$s,vt=Ec?history.state:{};J&&(yt||ft?i.replace(Y.fullPath,Ae({scroll:ft&&vt&&vt.scroll},Et)):i.push(Y.fullPath,Et)),l.value=Y,At(Y,ot,J,ft),rt()}let N;function z(){N||(N=i.listen((Y,ot,J)=>{if(!Zt.listening)return;const yt=g(Y),Et=S(yt);if(Et){k(Ae(Et,{replace:!0}),yt).catch(Md);return}u=yt;const xt=l.value;Ec&&JX(BA(xt.fullPath,J.delta),Q1()),A(yt,xt).catch(ft=>Yo(ft,12)?ft:Yo(ft,2)?(k(ft.to,yt).then(vt=>{Yo(vt,20)&&!J.delta&&J.type===up.pop&&i.go(-1,!1)}).catch(Md),Promise.reject()):(J.delta&&i.go(-J.delta,!1),K(ft,yt,xt))).then(ft=>{ft=ft||L(yt,xt,!1),ft&&(J.delta&&!Yo(ft,8)?i.go(-J.delta,!1):J.type===up.pop&&Yo(ft,20)&&i.go(-1,!1)),I(yt,xt,ft)}).catch(Md)}))}let V=uh(),F=uh(),G;function K(Y,ot,J){rt(Y);const yt=F.list();return yt.length?yt.forEach(Et=>Et(Y,ot,J)):console.error(Y),Promise.reject(Y)}function q(){return G&&l.value!==$s?Promise.resolve():new Promise((Y,ot)=>{V.add([Y,ot])})}function rt(Y){return G||(G=!Y,z(),V.list().forEach(([ot,J])=>Y?J(Y):ot()),V.reset()),Y}function At(Y,ot,J,yt){const{scrollBehavior:Et}=e;if(!Ec||!Et)return Promise.resolve();const xt=!J&&QX(BA(Y.fullPath,0))||(yt||!J)&&history.state&&history.state.scroll||null;return su().then(()=>Et(Y,ot,xt)).then(ft=>ft&&KX(ft)).catch(ft=>K(ft,Y,ot))}const Nt=Y=>i.go(Y);let Pt;const Ct=new Set,Zt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:v,resolve:g,options:e,push:w,replace:T,go:Nt,back:()=>Nt(-1),forward:()=>Nt(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:F.add,isReady:q,install(Y){const ot=this;Y.component("RouterLink",Ac),Y.component("RouterView",Q9),Y.config.globalProperties.$router=ot,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Ar(l)}),Ec&&!Pt&&l.value===$s&&(Pt=!0,w(i.location).catch(Et=>{}));const J={};for(const Et in $s)J[Et]=Ze(()=>l.value[Et]);Y.provide(jk,ot),Y.provide(J9,Cf(J)),Y.provide($S,l);const yt=Y.unmount;Ct.add(Y),Y.unmount=function(){Ct.delete(Y),Ct.size<1&&(u=$s,N&&N(),N=null,l.value=$s,Pt=!1,G=!1),yt()}}};return Zt}function Xu(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function VY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const a=t.matched[s];a&&(e.matched.find(u=>lf(u,a))?n.push(a):r.push(a));const l=e.matched[s];l&&(t.matched.find(u=>lf(u,l))||i.push(l))}return[r,n,i]}function UY(e){return`data/icons/item/${e}.webp`}function WY(e){return`<img src="${UY(e)}" class="iconitem" />`}function st(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function va(e,t){return e+(t-e)*Math.random()}function jY(e){return typeof e=="number"&&isFinite(e)}function ei(e){return!isNaN(e)&&isFinite(e)}function GY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function HY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function XY(e,t,r,n=.5,i=120,o=0){var s=1,a=r-t;return a!=0&&(s=(e-t)/a),`hsla(${s*(i-o)+o}, 100%, 50%, ${n})`}function YY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function QA(e){const t=/\d+/g;return e.match(t).join("-")}function t_(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function Id(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let s=t.level+1;s<=n;s++)t.level=s,t.wspdSheet+=va(i.wspd_lo,i.wspd_hi)/1e6,o+=va(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=va(i.luck_lo,i.luck_hi)/1e4,s%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}function t4(e){const t=Math.floor(e*3600),r=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60,o=String(r).padStart(2,"0"),s=String(n).padStart(2,"0"),a=String(i).padStart(2,"0");return`${o}:${s}:${a}`}const Ut=Gp({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionResources:{},allowFloating:!1,useFloatingResources:{},regionResources2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,farmingP2WShare:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},mapHideInactive:0,mapIconSize:30,wasmRouting:!1,palaceEnable:!1,palaceProfit:0,tradeDestinations:{},tradeRouteAlwaysOn:{},tradeInfraCp:{},tradeRouteCp:{},tradingLevel:91}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(n=>{var i;if(typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk},r=!0}else((i=n==null?void 0:n.job)==null?void 0:i.kind)==="plantzone"&&("storage"in n.job||(n.job.storage=n.tnk,r=!0));Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),"farmingP2W"in t&&(t.farmingP2WShare=t.farmingP2W?80:0,delete t.farmingP2W,r=!0),"regionModifiers"in t&&(t.regionResources=t.regionModifiers,delete t.regionModifiers),"useFloatingModifiers"in t&&(t.useFloatingResources=t.useFloatingModifiers,delete t.useFloatingModifiers),"regionModifiers2"in t&&(t.regionResources2=t.regionModifiers2,delete t.regionModifiers2),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=mt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){if(console.log("assigning",e.label,"to",e.job),(t==null?void 0:t.kind)=="plantzone"&&t.storage==null)throw Error("storage undefined");var r=this.userWorkers.indexOf(e);this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t},chanceAtResource(e,t){if(t==0)return 100;if(!mt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined resource% at rgk",e);const n=GY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const s=this.modSorteds[e][n],a=this.modTimes[e][s];if(n==i)return a;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-s)/(l-s);return a+c*(u-a)},tierResources(e,t,r){const n=[];let i=0;const o=t,s=2*o,a=Math.ceil(o/r),l=Math.ceil(s/r);for(let u=a;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtResource(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const s=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingResources[t])for(const a of this.tierResources(t,e,r)){const l=Math.ceil(a.wld/r),u=10*l+s;o+=24*60*a.time/100/u}else{const a=e*(2-this.productivity(t)),l=Math.ceil(a/r),u=10*l+s;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]},workerLabel(e){let t=this.displayWorkerNames?e.label:"";const r=mt();return r&&r.ready&&(t+=r.speciesIcons[r.workerStatic[e.charkey].species]),t+=e.level,t}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=mt();return Object.keys(e.regionGroups).filter(r=>this.useFloatingResources.hasOwnProperty(r)&&this.useFloatingResources[r])},modHists(){const e={},t=mt();for(const r of Object.keys(t.regionGroups))this.regionResources.hasOwnProperty(r)?e[r]=[this.regionResources[r]]:e[r]=[0];for(const r of this.floatingRegionGroups){this.regionResources2.hasOwnProperty(r)||(this.regionResources2[r]=[0]);const n=this.regionResources2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}return e},medianResources(){const e={};for(const[t,r]of Object.entries(this.modHists)){let n=0;const i=r.length;if(i%2)n=r[(i-1)/2];else{const o=r[(i-1-1)/2],s=r[(i-1+1)/2];n=(o+s)/2}e[t]=n}return e},medianWorkloads(){const e={},t=mt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianResources[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=mt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},s=this.modHists[n][0],a=this.modHists[n][i-1];if(s==a)o[s]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==s){o[f]=100*c/(i-1);continue}if(f==a){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=mt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionResources?e.regionResources[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=mt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=mt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=mt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=mt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=mt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=mt().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?mt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},routing(e){return e.wasmRouting?this.routingWasm:this.routingOld},routingOld(e){return{autotakenGrindNodes:this.autotakenGrindNodes,pzWsJobs:this.pzWsJobs}},routingWasm(e){const t={autotakenGrindNodes:new Set,pzWsJobs:{pz:{},ws:[],map:[],nodeUsedbyJob:{}}},r=mt();if(!r.ready)return t;const n=[],i=[];for(const a of e.grindTakenList)n.push([a,99999]);this.workingWorkers.forEach(a=>{const l=a.tnk;var u;if(r.jobIsPz(a.job))u=a.job.pzk;else if(r.jobIsWorkshop(a.job)){const c=a.job.hk,f=r.houseInfo[c].affTown;u=r.tk2tnk(f)}else return;i.push(n.length),n.push([u,l])});let o=[];if(n.length>0){const a=performance.now();o=r.wasmRouter.solveForTerminalPairs(n);const l=performance.now()-a;console.log("wasm took",l.toFixed(2),"ms")}o=this.applyWorkarounds(o,n);const s={};for(const a of e.grindTakenList){const[l,u]=r.miniDijkstra(o,a,99999);l.forEach(c=>t.autotakenGrindNodes.add(c))}return console.log("autotakenGrindNodes",t.autotakenGrindNodes),i.forEach(a=>{const[l,u]=n[a],[c,f]=r.miniDijkstra(o,l,u),h={usedPath:c,usedPathCost:f};u in s||(s[u]={}),s[u][l]=h}),this.workingWorkers.forEach(a=>{if(r.jobIsPz(a.job)){const l=a.job.pzk;if(!l)return;const u=r.workerStatsOnPlantzone(a),c=r.profitPzTownStats(l,a.tnk,u.wspd,u.mspd,u.luck,r.isGiant(a.charkey)),f=s[a.tnk][l],h={pzk:l,worker:a,profit:c,...f};t.pzWsJobs.pz[l]=h,t.pzWsJobs.map.push(h)}else if(r.jobIsWorkshop(a.job)){const l=a.job.hk,u=this.userWorkshops[l],c=r.houseInfo[l].affTown,f=r.tk2tnk(c),h=r.profitWorkshopWorker(l,u,a),d=s[a.tnk][f],p={hk:l,worker:a,profit:h,...d};t.pzWsJobs.ws.push(p),t.pzWsJobs.map.push(p)}}),t},grindTakenDesc(e){let t="";const r=mt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=mt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!1,!0).sort((u,c)=>u[1]-c[1]),[s,a,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes",t),t},autotakenGrindNodesCP(e){const t=mt();return[...e.routing.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0)},autotakenNodes(e){const t=new Set([...e.routing.autotakenGrindNodes]);for(const n of e.mapJobs)n.usedPath&&n.usedPath.forEach(i=>t.add(i));const r=mt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!1,!0).sort((l,u)=>l[1]-u[1]),[o,s,a]=i[0];a.forEach(l=>t.add(l))}return t},autotakenNodesCP(e){const t=mt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzWsJobs(e){const t={pz:{},ws:[],map:[],nodeUsedbyJob:{}},r=mt();if(!r.ready)return t;const n=[];this.workingWorkers.forEach(o=>{const s={source:o.tnk};if(r.jobIsPz(o.job)){const a=o.job.pzk;s.target=a}else if(r.jobIsWorkshop(o.job)){const a=o.job.hk,l=r.houseInfo[a].affTown,u=r.tk2tnk(l);s.target=u}else return;n.push(s)});var i;return e.wasmRouting?i=r.routeWasm(e.grindTakenList,n).routeInfos:i=r.routeOld(e.autotakenGrindNodes,n).routeInfos,this.workingWorkers.forEach(o=>{if(r.jobIsPz(o.job)){const s=o.job.pzk;if(!s)return;const a=r.workerStatsOnPlantzone(o),l=r.profitPzTownStats(s,o.tnk,a.wspd,a.mspd,a.luck,r.isGiant(o.charkey)),u=i[o.tnk][s],c={pzk:s,worker:o,profit:l,...u};t.pz[s]=c,t.map.push(c)}else if(r.jobIsWorkshop(o.job)){const s=o.job.hk,a=this.userWorkshops[s],l=r.houseInfo[s].affTown,u=r.tk2tnk(l),c=r.profitWorkshopWorker(s,a,o);let f=0,h=!1;const d=o.job.recipe;if(r.craftInputs&&d in r.craftInputs){const m=r.craftInputs[d];for(const g of Object.keys(m))m[g]>=10&&(h=!0);if(h)for(const g of o.skills)g>0&&("thrifty5"in r.skillData[g]&&(f+=5),"thrifty7"in r.skillData[g]&&(f+=7),"thrifty10"in r.skillData[g]&&(f+=10))}const p=i[o.tnk][u],v={hk:s,worker:o,profit:c,thriftyPercent:f,...p};t.ws.push(v),t.map.push(v)}}),t},pzJobs(e){return e.pzWsJobs.pz},wsJobs(e){return e.pzWsJobs.ws},mapJobs(e){return e.pzWsJobs.map},currentNodesJobs(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n].push(r):t[n]=[r]);return t},currentNodesCashflow(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n]+=r.profit.priceDaily:t[n]=r.profit.priceDaily);return t},pzjobsSharedConnectionCP(e){const t={},r=mt();for(const[n,i]of Object.entries(e.pzJobs))t[n]={value:0,tooltip:""},i.usedPath&&i.usedPath.forEach(function(o){if(e.routing.autotakenGrindNodes.has(o))return t;const s=i.profit.priceDaily/e.currentNodesCashflow[o],a=r.nodes[o].CP*s;t[n].value+=a,t[n].tooltip+=`${st(a,3)} ${r.nodeName(o)}
`});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedConnectionCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},newWorkerName:e=>t=>{const n=mt().uloc.town[t].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),i=e.townWorkers(t).length+1;return n+i},workerBringsItemkeys:e=>t=>{const r=mt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=mt();return r.ready&&(r.townsWithRedirectableStorage.forEach(n=>t[r.tnk2tk(n)]=new Set([])),e.workingWorkers.forEach(n=>{if(r.jobIsPz(n.job)){const i=r.tnk2tk(n.job.storage);t[i]=new Set([...t[i],...r.plantzones[n.job.pzk].itemkeys])}})),t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=mt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,s=n+(n>0?1:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,s)},townInfraAddCost:e=>(t,r,n,i)=>{if(i&&t==i){const o=t,s=e.townsInfra[o],a=new Set([...e.townsStoreItemkeys[o],...n]).size,l=e.townInfra(o,e.townWorkingWorkers(o).length+r,a),c=mt().uloc.town[o]+` housing:
old: ${Math.max(0,s.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,s.wantStorage)}\u{1F4E6} = ${st(s.cost)} CP
new: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${st(l.cost)} CP`;return{cost:l.cost-s.cost,tooltip:c,storageTk:i}}else{const o=e.townsInfra[t],s=e.townsStoreItemkeys[t].size,a=e.townInfra(t,e.townWorkingWorkers(t).length+r,s),l=[],u=[],c={};if(i)u.push(i);else{c.sameTown=e.townInfraAddCost(t,r,n,t);for(const y of Object.keys(e.townsInfra))y!=t&&u.push(y)}for(const y of u){const b=e.townsInfra[y],w=new Set([...e.townsStoreItemkeys[y],...n]).size,T=e.townInfra(y,e.townWorkingWorkers(y).length+r,w);if(T.errL||T.errS)continue;const S=isNaN(T.cost)?Number.POSITIVE_INFINITY:T.cost-b.cost;if(l.push({storTk:y,storageOldInfra:b,storageNewInfra:T,storageCostDelta:S}),S==0)break}l.sort((y,b)=>y.storageCostDelta-b.storageCostDelta);const{storTk:f,storageOldInfra:h,storageNewInfra:d,storageCostDelta:p}=l[0],v=p+a.cost-o.cost,m=mt();if(c.sameTown&&c.sameTown.cost<=v)return c.sameTown;const g=m.uloc.town[t]+` lodging:
old: ${Math.max(0,o.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,o.wantStorage)}\u{1F4E6} = ${st(o.cost)} CP
new: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${st(a.cost)} CP
`+m.uloc.town[f]+` storage:
old: ${Math.max(0,h.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,h.wantStorage)}\u{1F4E6} = ${st(h.cost)} CP
new: ${Math.max(0,d.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,d.wantStorage)}\u{1F4E6} = ${st(d.cost)} CP`;return{cost:p+a.cost-o.cost,tooltip:g,storageTk:f}}},townsInfra(e){const t={},r=mt();return r.ready&&r.townsWithRedirectableStorage.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},townsTopIncomeWorkers(e){const t={},r=mt();if(!r.ready)return t;r.townsWithLodging.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,s)=>e.workerIncome(s)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=mt();if(!n.ready)return r;const i=[];n.townsWithRedirectableStorage.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let v=-1/0,m=null;var o,s,a;for(const g of u){const y=e.workerIncome(g),b=e.workerBringsItemkeys(g),w=new Set([...f,...b]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+y)/(T.cost-p);(S>v||!(S<v)&&y>s)&&(v=S,m=g,o=w,s=y,a=T.cost)}if(!m)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=s,r[l].push({w:m,curL:c,curS:f.size,addI:s,curI:h,cost:a,eff:v}),u.splice(u.indexOf(m),1)}for(let v=0;v<r[l].length;v++){const m=r[l][v];let g=v-1;for(;g>=0&&r[l][g].cost==m.cost;)g--;const y=g>=0?r[l][g]:{curI:0,cost:p};m.delta_eff=(m.curI-y.curI)/(m.cost-y.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},workerIncome:e=>t=>{const r=mt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job)){if(e.pzJobs[t.job.pzk]==null)throw Error(`pzjob ${t.job.pzk} is undefined`);return e.pzJobs[t.job.pzk].profit.priceDaily}if(r.jobIsFarming(t.job))return e.farmingProfitPerWorker;if(r.jobIsCustom(t.job))return t.job.profit;if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t).priceDaily}},workerSharedConnectionCP:e=>t=>{let r;const n=mt();if(n.jobIsPz(t.job)&&(r=e.pzjobsSharedConnectionCP[t.job.pzk].value),n.jobIsFarming(t.job)&&(r=0),n.jobIsCustom(t.job)&&(r=t.job.cp),n.jobIsWorkshop(t.job)){const i=e.workersWorkshop.filter(o=>o.job.hk==t.job.hk).length;r=e.userWorkshops[t.job.hk].manualCp/i}return r},workerSharedLodgageCP:e=>t=>{const r={value:void 0,tooltip:"?"},n=mt();if(!n.ready)return r;const i=e.workerIncome(t),o=n.tnk2tk(t.tnk),s=e.townsInfra[o].cost,a=e.userWorkers.filter(u=>n.tnk2tk(u.tnk)==o).length,l=e.townsTotalIncome[o].income;return e.townsTotalIncome[o].hasNegativeJob||l==0?(r.value=s/a,r.tooltip=`= total lodgage costs of hometown shared equally between all active jobs from that town:
${s}CP / ${a}`):a==1?(r.value=s,r.tooltip=`= all costs of ${n.nodeName(t.tnk)} lodgage`):(r.value=s*(i/l),r.tooltip=`= total lodgage costs of hometown shared proportionally between all active jobs from that town:
${s}CP * (${st(i,3)} / ${st(l,3)})`),r},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t),n=e.workerSharedConnectionCP(t),i=e.workerSharedLodgageCP(t).value,o=r/(n+i);return isNaN(o)&&console.log(`workerIncomePerCp: ${st(r,2)} / (${st(n,2)} + ${st(i,2)}) = ${st(o,2)} for worker ${t.label}`),o},workersSortedByIncomePerCp(e){const t=[];return e.workingWorkers.forEach(r=>{t.push({w:r,i:e.workerIncome(r),ipc:e.workerIncomePerCp(r)})}),t.sort((r,n)=>isNaN(r.ipc)?-1:isNaN(n.ipc)||!isFinite(r.ipc)?1:isFinite(n.ipc)?r.ipc-n.ipc:-1),t},townsTotalIncome(e){const t={},r=mt();if(!r.ready)return t;r.townsWithLodging.forEach(n=>{const i=r.tnk2tk(n);t[i]={income:0,mapCp:0,hasNegativeJob:!1}});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk),s=e.workerIncome(i);t[o].income+=s,t[o].mapCp+=e.workerSharedConnectionCP(i),s<0&&(t[o].hasNegativeJob=!0)}for(const[n,i]of Object.entries(t)){const o=e.townsInfra[n].cost;i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgageCP(n.worker).value;return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80-e.farmingP2WShare:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=mt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=mt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.profit),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.cp),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},customJobsCp(e){const t={},r=mt();return r.ready&&(e.workersCustom.forEach(n=>{const i=r.tnk2tk(n.tnk);i in t||(t[i]=0),t[i]+=n.job.cp}),console.log("customJobsCp",t)),t},totalCP(e){return e.autotakenNodesCP+e.farmingCP+e.lodgage+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},workerPzStats(e){const t=mt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=mt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],s=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=s/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return t},cyclesTally(e){let t={pz:0,workshop:0,chicken:0};const r=mt();return r.ready&&(this.workingWorkers.forEach(n=>{if(!!n){if(r.jobIsPz(n.job)){const i=e.pzJobs[n.job.pzk];t.pz+=i.profit.cyclesDaily}if(r.jobIsWorkshop(n.job)){const i=n.job.hk;i in e.userWorkshops||(e.userWorkshops[i]={...e.defaultUserWorkshop});const o=e.userWorkshops[i];t.workshop+=r.measureWorkshopWorker(i,o,n).cyclesDaily}}}),t.chicken=(t.pz+t.workshop)/3),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t},bargainBonus(){return this.tradingLevel*.005},applyWorkarounds:e=>(t,r)=>{const n=mt(),i={1152:1002};for(const o of e.grindTakenList)if(o in i){const s=o,a=i[o],l=[];for(const h of r)l.push(h[0]==s&&h[1]==99999?[s,a]:h);const u=n.wasmRouter.solveForTerminalPairs(l),c=u.reduce((h,d)=>h+n.nodes[d].CP,0),f=t.reduce((h,d)=>h+n.nodes[d].CP,0);if(c<f)return console.log(`workaround applied (${c} < ${f})`),u}return t}}}),wn=Gp({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=Ut(),n=`https://apiv2.bdolytics.com/${t.selectedLang=="jp"?"ja":t.selectedLang}/${t.selectedRegion}/market/central-market-data`,i=await(await fetch(n)).json(),o=mt(),s=new Set(o.itemKeys);s.add(9492);const a={};i.data.forEach(l=>{(s.has(l.item_id)||o.ready&&o.craftInputItemKeySet.has(l.item_id))&&(a[l.item_id]=l.price)});for(const l of Object.keys(o.vendorPrices))t.keepItems[l]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4202 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:Ut().itemUrl+e},priceBunch(e){const t={val:null,desc:""};if(e===null||typeof e>"u")return t;t.val=0;for(const[r,n]of Object.entries(e))if(r in this.prices){const i=this.prices[r]*n;t.val+=i;const o=this.prices[r],s=`${o}`.length<8?`${o}`:st(o,3),a=`${n}`.length<8?`${n}`:st(n,3),l=`${i}`.length<8?`${i}`:st(i);t.desc+=`${s} x ${a} = ${l}
`}else t.val=NaN,t.desc+=`??? x ${n} = ???
`;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky).val;if(e.lucky){const n=this.priceBunch(e.lucky).val;return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=Ut(),r=mt();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[s,a]of Object.entries(o))n[i]+=n[s]*a}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var zS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t7={exports:{}},e7={exports:{}};(function(e,t){(function(){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m;i=Math.floor,f=Math.min,n=function(g,y){return g<y?-1:g>y?1:0},c=function(g,y,b,w,T){var S;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)S=i((b+w)/2),T(y,g[S])<0?w=S:b=S+1;return[].splice.apply(g,[b,b-b].concat(y)),y},a=function(g,y,b){return b==null&&(b=n),g.push(y),v(g,0,g.length-1,b)},s=function(g,y){var b,w;return y==null&&(y=n),b=g.pop(),g.length?(w=g[0],g[0]=b,m(g,0,y)):w=b,w},u=function(g,y,b){var w;return b==null&&(b=n),w=g[0],g[0]=y,m(g,0,b),w},l=function(g,y,b){var w;return b==null&&(b=n),g.length&&b(g[0],y)<0&&(w=[g[0],y],y=w[0],g[0]=w[1],m(g,0,b)),y},o=function(g,y){var b,w,T,S,k,x;for(y==null&&(y=n),S=function(){x=[];for(var A=0,I=i(g.length/2);0<=I?A<I:A>I;0<=I?A++:A--)x.push(A);return x}.apply(this).reverse(),k=[],w=0,T=S.length;w<T;w++)b=S[w],k.push(m(g,b,y));return k},p=function(g,y,b){var w;if(b==null&&(b=n),w=g.indexOf(y),w!==-1)return v(g,0,w,b),m(g,w,b)},h=function(g,y,b){var w,T,S,k,x;if(b==null&&(b=n),T=g.slice(0,y),!T.length)return T;for(o(T,b),x=g.slice(y),S=0,k=x.length;S<k;S++)w=x[S],l(T,w,b);return T.sort(b).reverse()},d=function(g,y,b){var w,T,S,k,x,A,I,L,N;if(b==null&&(b=n),y*10<=g.length){if(S=g.slice(0,y).sort(b),!S.length)return S;for(T=S[S.length-1],I=g.slice(y),k=0,A=I.length;k<A;k++)w=I[k],b(w,T)<0&&(c(S,w,0,null,b),S.pop(),T=S[S.length-1]);return S}for(o(g,b),N=[],x=0,L=f(y,g.length);0<=L?x<L:x>L;0<=L?++x:--x)N.push(s(g,b));return N},v=function(g,y,b,w){var T,S,k;for(w==null&&(w=n),T=g[b];b>y;){if(k=b-1>>1,S=g[k],w(T,S)<0){g[b]=S,b=k;continue}break}return g[b]=T},m=function(g,y,b){var w,T,S,k,x;for(b==null&&(b=n),T=g.length,x=y,S=g[y],w=2*y+1;w<T;)k=w+1,k<T&&!(b(g[w],g[k])<0)&&(w=k),g[y]=g[w],y=w,w=2*y+1;return g[y]=S,v(g,x,y,b)},r=function(){g.push=a,g.pop=s,g.replace=u,g.pushpop=l,g.heapify=o,g.updateItem=p,g.nlargest=h,g.nsmallest=d;function g(y){this.cmp=y!=null?y:n,this.nodes=[]}return g.prototype.push=function(y){return a(this.nodes,y,this.cmp)},g.prototype.pop=function(){return s(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},g.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},g.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},g.prototype.heapify=function(){return o(this.nodes,this.cmp)},g.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var y;return y=new g,y.nodes=this.nodes.slice(0),y},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,y){return e.exports=y()}(this,function(){return r})}).call(zS)})(e7);(function(e){e.exports=e7.exports})(t7);const ld=qY(t7.exports);let Be,Ld=0,ud=null;function Yg(){return(ud===null||ud.byteLength===0)&&(ud=new Uint8Array(Be.memory.buffer)),ud}const qg=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ZY=typeof qg.encodeInto=="function"?function(e,t){return qg.encodeInto(e,t)}:function(e,t){const r=qg.encode(e);return t.set(r),{read:e.length,written:r.length}};function Ny(e,t,r){if(r===void 0){const a=qg.encode(e),l=t(a.length,1)>>>0;return Yg().subarray(l,l+a.length).set(a),Ld=a.length,l}let n=e.length,i=t(n,1)>>>0;const o=Yg();let s=0;for(;s<n;s++){const a=e.charCodeAt(s);if(a>127)break;o[i+s]=a}if(s!==n){s!==0&&(e=e.slice(s)),i=r(i,n,n=s+e.length*3,1)>>>0;const a=Yg().subarray(i+s,i+n);s+=ZY(e,a).written,i=r(i,n,s,1)>>>0}return Ld=s,i}let Ol=null;function no(){return(Ol===null||Ol.buffer.detached===!0||Ol.buffer.detached===void 0&&Ol.buffer!==Be.memory.buffer)&&(Ol=new DataView(Be.memory.buffer)),Ol}function KY(e){const t=Be.__externref_table_alloc();return Be.__wbindgen_export_4.set(t,e),t}function Fy(e,t){try{return e.apply(this,t)}catch(r){const n=KY(r);Be.__wbindgen_exn_store(n)}}function ch(e){return e==null}function BS(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let o="[";i>0&&(o+=BS(e[0]));for(let s=1;s<i;s++)o+=", "+BS(e[s]);return o+="]",o}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(r&&r.length>1)n=r[1];else return toString.call(e);if(n=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:n}const r7=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&r7.decode();function $y(e,t){return e=e>>>0,r7.decode(Yg().subarray(e,e+t))}function zy(e){const t=Be.__wbindgen_export_4.get(e);return Be.__externref_table_dealloc(e),t}const e4=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>Be.__wbg_wasmnoderouter_free(e>>>0,1));class JY{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,e4.unregister(this),t}free(){const t=this.__destroy_into_raw();Be.__wbg_wasmnoderouter_free(t,0)}constructor(t){const r=Be.wasmnoderouter_new(t);if(r[2])throw zy(r[1]);return this.__wbg_ptr=r[0]>>>0,e4.register(this,this.__wbg_ptr,this),this}solveForTerminalPairs(t){const r=Be.wasmnoderouter_solveForTerminalPairs(this.__wbg_ptr,t);if(r[2])throw zy(r[1]);return zy(r[0])}}async function QY(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function tq(){const e={};return e.wbg={},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,r){const n=String(r),i=Ny(n,Be.__wbindgen_malloc,Be.__wbindgen_realloc),o=Ld;no().setInt32(t+4*1,o,!0),no().setInt32(t+4*0,i,!0)},e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return Fy(function(t,r){return t.call(r)},arguments)},e.wbg.__wbg_done_769e5ede4b31c67b=function(t){return t.done},e.wbg.__wbg_entries_3265d4158b33e5dc=function(t){return Object.entries(t)},e.wbg.__wbg_from_2a5d3e218e67aa85=function(t){return Array.from(t)},e.wbg.__wbg_get_67b2ba62fc30de12=function(){return Fy(function(t,r){return Reflect.get(t,r)},arguments)},e.wbg.__wbg_get_b9b93047fe3cf45b=function(t,r){return t[r>>>0]},e.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(t){let r;try{r=t instanceof ArrayBuffer}catch{r=!1}return r},e.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(t){let r;try{r=t instanceof Map}catch{r=!1}return r},e.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(t){let r;try{r=t instanceof Uint8Array}catch{r=!1}return r},e.wbg.__wbg_isArray_a1eab7e0d067391b=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},e.wbg.__wbg_length_a446193dc22c12f8=function(t){return t.length},e.wbg.__wbg_length_e2d2a49132c1b256=function(t){return t.length},e.wbg.__wbg_new_78feb108b6472713=function(){return new Array},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_next_25feadfc0913fea9=function(t){return t.next},e.wbg.__wbg_next_6574e1a8a62d1055=function(){return Fy(function(t){return t.next()},arguments)},e.wbg.__wbg_push_737cfc8c1432c2c6=function(t,r){return t.push(r)},e.wbg.__wbg_set_65595bdd868b3009=function(t,r,n){t.set(r,n>>>0)},e.wbg.__wbg_value_cd1ffa7b1ab794f1=function(t){return t.value},e.wbg.__wbindgen_as_number=function(t){return+t},e.wbg.__wbindgen_bigint_from_i64=function(t){return t},e.wbg.__wbindgen_bigint_from_u64=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_bigint_get_as_i64=function(t,r){const n=r,i=typeof n=="bigint"?n:void 0;no().setBigInt64(t+8*1,ch(i)?BigInt(0):i,!0),no().setInt32(t+4*0,!ch(i),!0)},e.wbg.__wbindgen_boolean_get=function(t){const r=t;return typeof r=="boolean"?r?1:0:2},e.wbg.__wbindgen_debug_string=function(t,r){const n=BS(r),i=Ny(n,Be.__wbindgen_malloc,Be.__wbindgen_realloc),o=Ld;no().setInt32(t+4*1,o,!0),no().setInt32(t+4*0,i,!0)},e.wbg.__wbindgen_error_new=function(t,r){return new Error($y(t,r))},e.wbg.__wbindgen_in=function(t,r){return t in r},e.wbg.__wbindgen_init_externref_table=function(){const t=Be.__wbindgen_export_4,r=t.grow(4);t.set(0,void 0),t.set(r+0,void 0),t.set(r+1,null),t.set(r+2,!0),t.set(r+3,!1)},e.wbg.__wbindgen_is_bigint=function(t){return typeof t=="bigint"},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){const r=t;return typeof r=="object"&&r!==null},e.wbg.__wbindgen_jsval_eq=function(t,r){return t===r},e.wbg.__wbindgen_jsval_loose_eq=function(t,r){return t==r},e.wbg.__wbindgen_memory=function(){return Be.memory},e.wbg.__wbindgen_number_get=function(t,r){const n=r,i=typeof n=="number"?n:void 0;no().setFloat64(t+8*1,ch(i)?0:i,!0),no().setInt32(t+4*0,!ch(i),!0)},e.wbg.__wbindgen_number_new=function(t){return t},e.wbg.__wbindgen_string_get=function(t,r){const n=r,i=typeof n=="string"?n:void 0;var o=ch(i)?0:Ny(i,Be.__wbindgen_malloc,Be.__wbindgen_realloc),s=Ld;no().setInt32(t+4*1,s,!0),no().setInt32(t+4*0,o,!0)},e.wbg.__wbindgen_string_new=function(t,r){return $y(t,r)},e.wbg.__wbindgen_throw=function(t,r){throw new Error($y(t,r))},e}function eq(e,t){return Be=e.exports,n7.__wbindgen_wasm_module=t,Ol=null,ud=null,Be.__wbindgen_start(),Be}async function n7(e){if(Be!==void 0)return Be;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/workerman/assets/noderouter_bg.a6c1bb1b.wasm",self.location));const t=tq();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await QY(await e,t);return eq(r,n)}const mt=Gp({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},regionInfo:{},townsConnectionRoots:new Set,townsWithLodging:[],townsWithRentableStorage:[],townsWithRedirectableStorage:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{},_tk2tnk:{},_tnk2tk:{},craftInputs:{},craftOutputs:{},wasmNodesLinks:{},wasmBaseTowns:new Set,wasmRouter:null}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]),"wspd_refine"in i&&t.startsWith("pack_")&&(r+=i.wspd_refine))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=Ut(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,a=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:a,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(r=>+r)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),console.log("plantzoneStatic",this.plantzoneStatic[1879]),this.itemInfo=await(await fetch("data/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.tk2hk=await(await fetch("data/distances_tk2hk.json")).json(),this.regionInfo=await(await fetch("data/regioninfo.json")).json(),Object.values(this.regionInfo).forEach(({key:r,waypoint:n})=>{n!==0&&(this._tk2tnk[r]=n,this._tnk2tk[n]=r)}),this.townsConnectionRoots=new Set(Object.keys(this.nodes).filter(r=>this.nodes[r].kind>0&&this.nodes[r].kind<3&&this.nodes[r].CP===0).map(r=>this.nodes[r].key)),this.townsWithLodging=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795,1853,1857,1858,1834,1843,2001],this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.townsWithRentableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1853,1857,1834,1843,2001],this.townsWithRedirectableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1834,1843,1850,1853,1857,1858,2001],this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this.industries={unk:"unknown",jewelry:"jewelry",mass:"mass production",weap:"weapon",tool:"tool",furn:"furniture",costume:"costume",refine:"refine",siege:"siege",mount:"mount",exclus:"exclusive",pack_produce:"pack_produce",pack_herb:"pack_herb",pack_mushr:"pack_mushr",pack_fish:"pack_fish",pack_timber:"pack_timber",pack_ore:"pack_ore"};const t={};for(const[r,n]of Object.entries(this.plantzoneStatic))if(r in this.plantzoneDrops){const i=n.regiongroup;i in t?t[i].push(r):t[i]=[r]}this.regionGroups=t,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[r,n]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[r]=Object.keys(n).sort((i,o)=>i-o);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.craftInputs=await(await fetch("data/house_craft_inputs.json")).json(),this.craftOutputs=await(await fetch("data/house_craft_outputs.json")).json(),this.craftInfo=await(await fetch("data/house_craft_info.json")).json(),this.craftInputItemKeySet=new Set;for(const r of Object.values(this.craftInputs))for(const n of Object.keys(r))this.craftInputItemKeySet.add(Number(n));this.traders=await(await fetch("data/manual/traders.json")).json(),await this.initWasmRouter(),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},async initWasmRouter(){this.wasmBaseTowns=new Set;const e={};for(const[t,r]of Object.entries(this.links))e[t]={link_list:r};for(const[t,r]of Object.entries(this.nodes))if(t in e){const n=0<r.kind&&r.kind<3&&r.CP==0;n&&this.wasmBaseTowns.add(r.key),e[t].waypoint_key=r.key,e[t].need_exploration_point=r.CP,e[t].is_base_town=n}await n7(),this.wasmRouter=new JY(e)},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e)}},tnk2tk(e){if(this.ready)return this._tnk2tk[e]},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=Ut();let n=new Set;const i={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},s=new ld((u,c)=>i[u]-i[c]);s.push(e);for(var a;s.size()&&(a=s.pop(),!(this.pzdSet.has(a)&&!r.autotakenNodes.has(a)&&(n.add(a),n.size==t)));)this.links[a].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,o[u]=a):(i[u]=f,o[u]=a,s.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new ld((u,c)=>i[u]-i[c]);o.push(e);for(var s;o.size()&&(s=o.pop(),s!=t);)this.links[s].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,n[u]=s):(i[u]=f,n[u]=s,o.push(u))});const a=[t];let l=t;for(;n[l]!==null;)a.push(n[l]),l=n[l];return[a.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n,i,o){if(!this.ready)return;let s=new Set;const a={[e]:null},l={[e]:r&&r.has(e)?0:this.nodes[e].CP},u=new ld((h,d)=>l[h]-l[d]);u.push(e);for(var c;u.size()&&(c=u.pop(),!(this.townsConnectionRoots.has(c)&&(!n||this.townsWithLodgingSet.has(c))&&(c!=1343||!i)&&(s.add(c),s.size==t)));)this.links[c].forEach(h=>{if(this.nodes[h]==null)throw Error(`dijkstraNearestTowns: unknown exploration node ${h}`);if(o&&(c==1727&&h==1800||c==1800&&h==1727))return;const d=r&&r.has(h)?0:this.nodes[h].CP,p=l[c]+d;h in l?p<l[h]&&(l[h]=p,a[h]=c):(l[h]=p,a[h]=c,u.push(h))});const f=[];return s.forEach(h=>{const d=[h];let p=h;for(;a[p]!==null;)d.push(a[p]),p=a[p];f.push([h,l[h],d])}),f},pzSelectionEntry(e,t,r,n,i,o,s,a){const l=Ut(),u=this.profitPzTownStats(e,r,s.wspd,s.mspd,s.luck,this.isGiant(o.charkey)),c=l.townInfraAddCost(t,1,this.plantzones[e].itemkeys,a),f={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:c.cost,infraTooltip:c.tooltip,cp:n+c.cost,profit:u,w:o,statsOnPz:s,storageTnk:this.tk2tnk(c.storageTk)};return f.dailyPerCp=f.profit.priceDaily/(n+c.cost),f.effDelta=l.jobEfficiencyDelta(f.profit.priceDaily,n+c.cost),f},workshopSelectionEntry(e,t,r,n,i,o,s){const a=Ut(),l=a.userWorkshops[e],u=this.profitWorkshopWorker(e,l,i),c=a.townInfraAddCost(t,1,[]),f=o+s+c.cost,h={hk:e,tnk:r,mapCp:o,houseCp:s,path:n,townCp:c.cost,infraTooltip:c.tooltip,cp:f,profit:u,w:i,workshop:l};return h.dailyPerCp=h.profit.priceDaily/f,h.effDelta=a.jobEfficiencyDelta(h.profit.priceDaily,f),h},addBedInfo(e){return Ut().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=Ut(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const s=Ut(),a=wn(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:a.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=s.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"},a=this.medianGiant(t);o=this.profitPzTownStats(e,t,a.wspd+5,a.mspd,a.luck,!0),o.charkey=a.charkey,o.wspd=a.wspd;const l={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},u=l&&l.dailyPerCp>s.dailyPerCp?l:s,c=this.medianHuman(t);o=this.profitPzTownStats(e,t,c.wspd+5,c.mspd,c.luck,!1),o.charkey=c.charkey,o.wspd=c.wspd;const f={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},h=f&&f.dailyPerCp>u.dailyPerCp?f:u,d={[l.charkey]:l.priceDaily,[f.charkey]:f.priceDaily,[s.charkey]:s.priceDaily},p=Object.entries(d).map(([v,m])=>({charkey:v,priceDaily:m}));return p.sort((v,m)=>v&&m&&m.priceDaily-v.priceDaily),h.alt_workers_profits=d,h.alt_workers=p,h.connected=!0,h.cycleValue_gob=s.cycleValue,h.cycleValue_gi=l.cycleValue,h},makeMedianChar(e){const t={level:40},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let a=2;a<=40;a++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let s=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(s)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):e==1857?this.makeMedianChar(8050):e==1858?this.makeMedianChar(8050):e==1853?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):e==1857?this.makeMedianChar(8058):e==1858?this.makeMedianChar(8058):e==1853?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):e==1857?this.makeMedianChar(8054):e==1858?this.makeMedianChar(8054):e==1853?this.makeMedianChar(8054):this.makeMedianChar(7573)},measureWorkshopWorker(e,t,r){const n=Ut(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),s=n.calcWalkMinutes(o,i.mspd),a=Math.ceil(t.manualWorkload/i.wspd),l=5*a+s,u=24*60/l;return{statsOnWs:i,distance:o,cyclesDaily:u}},repeatsWorkshopWorker(e,t){let r=1;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&t in i&&(r+=i[t])}),r},profitWorkshopWorker(e,t,r){const{statsOnWs:n,distance:i,cyclesDaily:o}=this.measureWorkshopWorker(e,t,r),a=this.repeatsWorkshopWorker(r,t.industry)*o*t.manualCycleIncome/1e6;return{statsOnWs:n,distance:i,cyclesDaily:o,priceDaily:a}},isLodgingTown(e){return typeof e=="string"&&(e=Number(e)),this.tnk2tk(e)in this.lodgingPerTown},isPlantzone(e){return e in this.plantzoneDrops},isConnectionNode(e){return!this.isLodgingTown(e)&&!this.isPlantzone(e)},itemName(e){if(!this.ready)return e;const t=Ut();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=Ut();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){if(t in this.pzk2tk){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1]}else throw new Error(`no distances for pzk ${t}`);return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this._tnk2tk[e];return this.tk2hk[r][t]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return(e==null?void 0:e.kind)=="custom"},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=HY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,s=t>this.townUpperLimits[e].lodging,a=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:s,warnS:a,errS:l},i},routeOld(e,t){const r={routeInfos:{},totalCost:0},n=performance.now(),i=new Set([...e]);t.forEach(s=>{const[a,l]=this.dijkstraPath(s.target,s.source,i);if(!a)return;a.forEach(c=>i.add(c));const u={usedPath:a,usedPathCost:l};s.source in r.routeInfos||(r.routeInfos[s.source]={}),r.routeInfos[s.source][s.target]=u});for(const s of i)r.totalCost+=this.nodes[s].CP;const o=performance.now()-n;return console.log("routeOld took",o.toFixed(2),"ms"),r},routeWasm(e,t){const r={routeInfos:{},totalCost:0},n=[];for(const a of t)n.push([a.target,a.source]);for(const a of e)n.push([a,99999]);if(n.length==0)return r;const i=performance.now(),o=this.wasmRouter.solveForTerminalPairs(n),s=performance.now()-i;console.log("wasm took",s.toFixed(2),"ms"),t.forEach(a=>{const[l,u]=this.miniDijkstra(o,a.target,a.source),c={usedPath:l,usedPathCost:u};a.source in r.routeInfos||(r.routeInfos[a.source]={}),r.routeInfos[a.source][a.target]=c});for(const a of o)r.totalCost+=this.nodes[a].CP;return r},miniDijkstra(e,t,r){const n=new Set(e),i={[t]:null},o={[t]:this.nodes[t].CP},s=new ld((c,f)=>o[c]-o[f]);s.push(t);for(var a;s.size()&&(a=s.pop(),!(a==r||r==99999&&this.wasmBaseTowns.has(a)));)this.links[a].forEach(c=>{if(n.has(c)){const f=this.nodes[c].CP,h=o[a]+f;c in o?h<o[c]&&(o[c]=h,i[c]=a):(o[c]=h,i[c]=a,s.push(c))}});const l=[a];let u=a;for(;i[u]!==null;)l.push(i[u]),u=i[u];return[l.reverse(),o[r]]}},getters:{uloc(){const e=Ut();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townsWithLodgingSet(){return new Set(this.townsWithLodging)},townsWithRentableStorageSet(){return new Set(this.townsWithRentableStorage)},townsWithRedirectableStorageSet(){return new Set(this.townsWithRedirectableStorage)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};this.townsWithRedirectableStorage.forEach(t=>e[this.tnk2tk(t)]=[]);for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=wn(),r=Ut();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const s={...o,...this.plantzoneStatic[i]};s.name=this.plantzoneName(i);const a=t.priceBunch(s.lucky).val;s.unluckyValue=t.priceBunch(s.unlucky).val,s.luckyValue=s.unluckyValue+a,s.unluckyValue_gi=t.priceBunch(s.unlucky_gi).val,s.luckyValue_gi=s.unluckyValue_gi+a,s.activeWorkload=s.workload*(2-r.productivity(s.regiongroup)),s.itemkeys=new Set([...Object.keys(s.unlucky),...Object.keys(s.lucky)]),n[i]=s}return console.log("plantzones getter took",Date.now()-e,"ms"),n},itemkeyPlantzones(){const e={};if(!this.ready)return e;for(const[t,r]of Object.entries(this.plantzones))r.itemkeys.forEach(n=>{n in e||(e[n]=new Set([])),e[n].add(Number(t))});return e}}}),Hp=Gp({id:"map",state:()=>({target:[0,0],zoom:-8})});const Gt=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},rq={class:"wrapper"},nq=R("Home"),iq=R("Plantzones"),oq=R("Resources"),sq=R("Settings"),aq=R("About"),lq={async beforeCreate(){const e=Ut(),t=localStorage.getItem("user");e.migrate(t);const r=Hp(),n=localStorage.getItem("map");r.$patch(JSON.parse(n)),await mt().fetchData();const o=wn(),s=localStorage.getItem("market");s&&o.$patch(JSON.parse(s));const a=3600*1e3;o.apiDatetime+a<Date.now()&&o.fetchData()}},uq=Object.assign(lq,{__name:"App",setup(e){return(t,r)=>(E(),M(W,null,[_("header",null,[_("div",rq,[_("nav",null,[ht(Ar(Ac),{to:"/"},{default:be(()=>[nq]),_:1}),ht(Ar(Ac),{to:"/plantzones"},{default:be(()=>[iq]),_:1}),ht(Ar(Ac),{to:"/resources"},{default:be(()=>[oq]),_:1}),ht(Ar(Ac),{to:"/settings"},{default:be(()=>[sq]),_:1}),ht(Ar(Ac),{to:"/about"},{default:be(()=>[aq]),_:1})])])]),ht(Ar(Q9))],64))}}),cq=Gt(uq,[["__scopeId","data-v-d7c97319"]]),fq="modulepreload",hq=function(e){return"/workerman/"+e},r4={},dq=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=hq(i),i in r4)return;r4[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":fq,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},pq={setup(){const e=Ut(),t=mt();return{userStore:e,gameStore:t}},props:{ik:Number,external_link:{type:Boolean,default:!1},with_name:{type:Boolean,default:!1}}},vq=["href"],gq=["src","data-key"];function mq(e,t,r,n,i,o){return E(),M("a",{href:n.userStore.itemUrl+r.ik},[_("img",{src:`data/icons/item/${r.ik}.webp`,class:"iconitem","data-key":r.ik},null,8,gq),r.with_name&&n.gameStore.ready?(E(),M(W,{key:0},[R(C(n.gameStore.uloc.item[r.ik]),1)],64)):Z("",!0)],8,vq)}const fi=Gt(pq,[["render",mq]]),_q={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{w:Object},components:{ItemIcon:fi},methods:{formatFixed:st,extractNumbers:QA,workshop_text(e){const t=e.tnk,r=this.gameStore.uloc.char[e.job.hk];let n=QA(r);if(t){const i=this.gameStore.houseInfo[e.job.hk].affTown,o=this.gameStore.tk2tnk(i);t!=o&&(n=this.gameStore.nodeName(o)+" "+n)}return`${n} ${this.userStore.userWorkshops[e.job.hk].label}`}}},yq=R(" idle "),bq=R(" UNKNOWN_JOBTYPE ");function wq(e,t,r,n,i,o){const s=Ot("ItemIcon");return n.gameStore.jobIsIdle(r.w.job)?(E(),M(W,{key:0},[yq],64)):n.gameStore.jobIsPz(r.w.job)?(E(),M(W,{key:1},[R(C(n.gameStore.uloc.node[r.w.job.pzk]),1)],64)):n.gameStore.jobIsFarming(r.w.job)?(E(),M(W,{key:2},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)):n.gameStore.jobIsCustom(r.w.job)?(E(),M(W,{key:3},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] "+C(r.w.job.label),1)],64)):n.gameStore.jobIsWorkshop(r.w.job)?(E(),M(W,{key:4},[r.w.job.recipe&&n.gameStore.craftOutputs[r.w.job.recipe]?(E(!0),M(W,{key:0},gt(n.gameStore.craftOutputs[r.w.job.recipe],a=>(E(),yr(s,{ik:a},null,8,["ik"]))),256)):(E(),M(W,{key:1},[R(" ["+C(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)),R(" "+C(o.workshop_text(r.w)),1)],64)):(E(),M(W,{key:5},[bq],64))}const e_=Gt(_q,[["render",wq]]);const Sq={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},emits:["panToPaPos","send","edit"],components:{WorkerJobDescription:e_},data:()=>({}),methods:{formatFixed:st,percentageToColor:XY}},Tq=e=>(Ue("data-v-df4b03fd"),e=e(),We(),e),kq={key:0,class:"fss"},Pq={key:1},Cq={key:0,class:"fss"},Eq={key:1},Aq={key:0,class:"fss"},Mq={key:1},xq={class:"center"},Iq=R(" @ "),Lq=R(" idle "),Oq={class:"center"},Rq={key:0},Dq=Tq(()=>_("button",{title:"Ancado is not activated, can't house workers",disabled:"true"},"send",-1)),Nq=[Dq];function Fq(e,t,r,n,i,o){const s=Ot("WorkerJobDescription");return E(),M("tr",null,[_("td",null,[_("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),_("td",null,C(n.userStore.workerLabel(r.w)),1),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",kq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(E(),M("span",Pq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",Cq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(E(),M("span",Eq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),_("td",{style:Xl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(E(),M("span",Aq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(E(),M("span",Mq,C(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),_("td",xq,[_("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),_("td",null,[r.w.job?(E(),M(W,{key:0},[n.gameStore.jobIsPz(r.w.job)?(E(),M("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("panToPaPos",this.gameStore.nodes[r.w.job.pzk].pos)),class:"clickable"},[ht(s,{w:r.w},null,8,["w"])])):(E(),yr(s,{key:1,w:r.w},null,8,["w"])),Iq,n.userStore.displayProfitPerCp?(E(),M(W,{key:2},[R(C(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:3},[R(C(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(E(),M(W,{key:1},[Lq],64))]),_("td",Oq,[r.w.job?(E(),M("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(E(),M(W,{key:1},[r.unsendable?(E(),M("div",Rq,Nq)):(E(),M("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))],64))])])}const Gk=Gt(Sq,[["render",Fq],["__scopeId","data-v-df4b03fd"]]);const $q={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},props:{o:Object,tk:Number},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:Gk},data:()=>({}),computed:{infra(){if(this.tk in this.userStore.townsInfra)return this.userStore.townsInfra[this.tk];throw console.log(this.userStore.townsInfra),new Error(`no infra for town: ${this.tk}`)}},methods:{formatFixed:st,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},Hk=e=>(Ue("data-v-bae92347"),e=e(),We(),e),zq={colspan:"2"},Bq=R(" worker "),Vq=R(" workers not hireable "),Uq=Hk(()=>_("th",{class:"center"},"\u{1F528}",-1)),Wq=Hk(()=>_("th",{class:"center"},"\u{1F9B6}",-1)),jq=Hk(()=>_("th",{class:"center"},"\u{1F340}",-1)),Gq=R(" \xA0 ");function Hq(e,t,r,n,i,o){const s=Ot("Worker");return E(),M(W,null,[_("thead",null,[_("tr",null,[_("th",zq,[r.o?(E(),M(W,{key:0},[Bq,_("button",{onClick:t[0]||(t[0]=a=>this.$emit("hireWorker",r.tk))}," hire ")],64)):(E(),M(W,{key:1},[Vq],64))]),Uq,Wq,jq,_("th",{colspan:"3",class:_r({unresolved:n.gameStore.ready&&o.infra.success==!1})},[_("span",{onClick:t[1]||(t[1]=a=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},C(n.gameStore.nodeName(n.gameStore.tk2tnk(r.tk))),1),R(" "+C()+" ",1),n.userStore.displayProfitPerCp?(E(),M(W,{key:0},[R(C(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),Gq,_("span",null,[R(C(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),_("span",null,C(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),R(" \u{1F4E6} "+C(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost+(r.tk in n.userStore.customJobsCp?n.userStore.customJobsCp[r.tk]:0))+" CP ",1),_("button",{onClick:t[2]||(t[2]=a=>this.$emit("selectHouses",r.tk)),class:_r({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})}," config ",2)])],2)])]),_("tbody",null,[(E(!0),M(W,null,gt(n.userStore.userWorkers.filter(a=>n.gameStore.tnk2tk(a.tnk)==r.tk),(a,l)=>(E(),yr(s,{w:a,homeless:!0,class:_r({homeless:0}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(a),onEdit:u=>this.$emit("editWorker",a),onSend:u=>this.$emit("sendWorker",a),onPanToPaPos:t[3]||(t[3]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256))])],64)}const i7=Gt($q,[["render",Hq],["__scopeId","data-v-bae92347"]]);const Xq={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},props:{pzk:Number,redirect:Number},emits:[],data:()=>({homeTnk:1,workerKind:"gob",selectedWorkerIndices:{},selectedWorkerPZSEs:{}}),methods:{formatFixed:st,workerStats(e,t){return e=="gia"?this.gameStore.medianGiant(t):e=="hum"?this.gameStore.medianHuman(t):this.gameStore.medianGoblin(t)},profitTownStats(e,t){return this.gameStore.profitPzTownStats(this.pzk,e,t.wspd+5,t.mspd,t.luck,t.isGiant)},assignWorker(e){if(!e.storageTnk)throw Error("no storage");const t=JSON.parse(JSON.stringify(e.w));this.userStore.userWorkers.push(t),this.userStore.assignWorker(t,{kind:"plantzone",pzk:e.pz.key,storage:e.storageTnk})}},computed:{workerKinds(){const e=[];for(const t of["gia","hum","gob"]){const r={kind:t,stats:this.workerStats(t,this.homeTnk)};r.profit=this.profitTownStats(this.homeTnk,r.stats),e.push(r)}return e.sort((t,r)=>r.profit.priceDaily-t.profit.priceDaily),e},selectedWorkerStats(){return this.workerStats(this.workerKind,this.homeTnk)},nearestTowns(){const t=[];return this.gameStore.dijkstraNearestTowns(this.pzk,5,this.userStore.autotakenNodes,!0).forEach(([n,i,o])=>{const s=[],a=this.gameStore._tnk2tk[n],l=this.redirect==-1?a:this.gameStore.tnk2tk(this.redirect),u=this.userStore.townInfraAddCost(a,1,this.gameStore.plantzones[this.pzk].itemkeys,l);for(const c of["gia","hum","gob"]){const f=this.workerStats(c,n),h={tk:a,tnk:n,charkey:f.charkey,label:this.userStore.newWorkerName(a),level:f.level,wspdSheet:f.wspd,mspdSheet:f.mspd,luckSheet:f.luck,skills:[],job:null};h.skills.push(1011);const d=this.gameStore.workerStatsOnPlantzone(h),p=this.gameStore.profitPzTownStats(this.pzk,n,d.wspd,d.mspd,d.luck,this.gameStore.isGiant(h.charkey));if(p.dist>1e6)return;const v={pz:this.gameStore.plantzones[this.pzk],tnk:n,mapCp:i,path:o,townCp:u.cost,infraTooltip:u.tooltip,cp:i+u.cost,profit:p,w:h,statsOnPz:d,storageTnk:this.gameStore.tk2tnk(u.storageTk)};v.dailyPerCp=v.profit.priceDaily/(i+u.cost),v.effDelta=this.userStore.jobEfficiencyDelta(v.profit.priceDaily,i+u.cost);const m={kind:c,stats:f,PZSE:v};s.push(m)}s.length!=0&&(s.sort((c,f)=>f.PZSE.profit.priceDaily-c.PZSE.profit.priceDaily),this.selectedWorkerIndices[n]=0,t.push({tnk:n,workerKinds:s}))}),t.sort((n,i)=>i.workerKinds[0].PZSE.dailyPerCp-n.workerKinds[0].PZSE.dailyPerCp),t}}},o7=e=>(Ue("data-v-45b5b74e"),e=e(),We(),e),Yq=o7(()=>_("h4",null,"Nearest towns with hireable workers:",-1)),qq={key:0},Zq=o7(()=>_("tr",null,[_("th",null,"\u{1F6CF}\uFE0Ftown"),_("th",null,"walk"),_("th",null,[R("make new level 40 artisan "),_("abbr",{class:"tooltip",title:"with median stats and a single +5\u{1F528} skill"},"\u2139")]),_("th",null,[R("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),Kq={class:"center"},Jq=["onUpdate:modelValue"],Qq=["value"],tZ={class:"center"},eZ=["title"],rZ=R("+"),nZ=["title"],iZ={class:"center"},oZ={key:0,title:"plantzone already occupied",disabled:"true"},sZ={key:1,title:"Can't find housing, try P2W",disabled:"true"},aZ={key:2,title:"No walk path",disabled:"true"},lZ={key:3,title:"Ancado is not activated, can't house workers",disabled:"true"},uZ=["onClick"],cZ={key:1};function fZ(e,t,r,n,i,o){return E(),M("div",null,[Yq,this.nearestTowns?(E(),M("table",qq,[Zq,(E(!0),M(W,null,gt(this.nearestTowns,s=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.node[s.tnk]),1),_("td",Kq,C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)),1),_("td",null,[et(_("select",{"onUpdate:modelValue":a=>e.selectedWorkerIndices[s.tnk]=a},[(E(!0),M(W,null,gt(s.workerKinds,(a,l)=>(E(),M("option",{value:l},C(n.gameStore.uloc.char[a.stats.charkey])+" ("+C(o.formatFixed(a.PZSE.profit.priceDaily,2))+" M$/day) ",9,Qq))),256))],8,Jq),[[He,e.selectedWorkerIndices[s.tnk]]])]),_("td",tZ,[_("abbr",{class:"tooltip",title:Array.from(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},C(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.mapCp),9,eZ),rZ,_("abbr",{class:"tooltip",title:s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.infraTooltip},C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)),9,nZ),R("="+C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.cp)),1)]),_("td",iZ,C(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M("button",oZ,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)?(E(),M("button",sZ,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)?(E(),M("button",aZ,"hire+assign")):n.gameStore.tnk2tk(s.tnk)&&n.gameStore.tnk2tk(s.tnk)==619&&!n.userStore.activateAncado?(E(),M("button",lZ,"hire+assign")):(E(),M("button",{key:4,onClick:a=>o.assignWorker(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE)}," hire+assign ",8,uZ))])]))),256))])):(E(),M("span",cZ," None "))])}const hZ=Gt(Xq,[["render",fZ],["__scopeId","data-v-45b5b74e"]]);const dZ={setup(){const e=mt(),t=Ut(),r=wn();return{gameStore:e,userStore:t,marketStore:r}},props:{pzk:Number},emits:["showResourceDialog","editWorker"],components:{MakeAWorker:hZ,ItemIcon:fi},data:()=>({selectedRedirect:-1}),methods:{formatFixed:st,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.userStore.autotakenNodes,!0).forEach(([i,o,s])=>{const a=this.gameStore._tnk2tk[i];this.userStore.getFreeWorkers(a).forEach(u=>{const c=this.gameStore.workerStatsOnPlantzone(u),f=this.selectedRedirect==-1?a:this.gameStore.tnk2tk(this.selectedRedirect),h=this.gameStore.pzSelectionEntry(e,a,i,o,s,u,c,f);r.push(h)})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter(n=>n.profit.dist<1e6).filter((n,i,o)=>i===o.findIndex(s=>s.tnk===n.tnk&&JSON.stringify(s.statsOnPz)===JSON.stringify(n.statsOnPz)))}}},Ba=e=>(Ue("data-v-1a852e24"),e=e(),We(),e),pZ={key:0},vZ=["title"],gZ=Ba(()=>_("abbr",{class:"tooltip",title:"how much more $ a lucky cycle brings vs unlucky"},"x",-1)),mZ=R("] "),_Z=R(" workload: "),yZ=R("% resource "),bZ={id:"plantzoneWorkerInfo"},wZ=Ba(()=>_("br",null,null,-1)),SZ=["title"],TZ=Ba(()=>_("br",null,null,-1)),kZ=["title"],PZ=Ba(()=>_("br",null,null,-1)),CZ=Ba(()=>_("abbr",{class:"tooltip",title:"income / (connectionCost + lodgageCost)"},"\u2139",-1)),EZ=R(" worker: none "),AZ={class:"spaced-columns"},MZ=R("Nearest towns with idle workers: "),xZ=R("None"),IZ={style:{"margin-right":"6px"}},LZ=R("stash at: "),OZ=Ba(()=>_("option",{value:"-1"},"worker hometown",-1)),RZ=Ba(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),DZ=["value"],NZ={key:0},FZ=Ba(()=>_("tr",null,[_("th",null,"town"),_("th",null,"walk"),_("th",null,[R("worker "),_("abbr",{class:"tooltip",title:"same town&stat workers are hidden in this view"},"\u2139")]),_("th",null,"+M$/day"),_("th",null,[R("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),$Z={class:"fsxs"},zZ={class:"center"},BZ=["title"],VZ=R("+"),UZ=["title"],WZ={class:"center"},jZ={key:0,title:"plantzone already occupied",disabled:"true"},GZ={key:1,title:"Can't resolve housing",disabled:"true"},HZ={key:2,title:"Ancado is not activated, can't house workers",disabled:"true"},XZ=["onClick"];function YZ(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon"),l=Ot("MakeAWorker");return E(),M(W,null,[_("div",null,[ht(s,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:be(()=>[R(C(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),R(" "+C(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(E(),M("span",pZ,[(E(!0),M(W,null,gt(this.gameStore.plantzones[r.pzk].itemkeys,u=>(E(),yr(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[_("abbr",{title:n.gameStore.itemName(u)+" "+o.formatFixed(n.marketStore.prices[u])+"$"},[ht(a,{ik:Number(u)},null,8,["ik"])],8,vZ)]),_:2},1032,["to"]))),256)),R(" [\u{1F340}"+C(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2)),1),gZ,mZ])):Z("",!0)]),_("div",null,[_Z,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.pzk].regiongroup]?(E(),M(W,{key:0},[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),_("button",{onClick:t[0]||(t[0]=u=>e.$emit("showResourceDialog",r.pzk))},"review")],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 ",1),et(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=u=>n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup]=u),min:"0",max:"100",step:"0.1",class:"w42em"},null,512),[[zt,n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]]),yZ],64))]),_("div",bZ,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M(W,{key:0},[R(" worker: "+C(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+C(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M(W,{key:0},[_("button",{onClick:t[2]||(t[2]=u=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),_("button",{onClick:t[3]||(t[3]=u=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):Z("",!0),wZ,R(" connection cost: "+C(o.formatFixed(n.userStore.pzjobsSharedConnectionCP[r.pzk].value,3))+" CP ",1),_("abbr",{class:"tooltip",title:`full cost of this node + \u03A3 of connection nodes costs shared proportionally between all active jobs using them
`+n.userStore.pzjobsSharedConnectionCP[r.pzk].tooltip},"\u2139",8,SZ),TZ,R(" lodgage cost: "+C(o.formatFixed(n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).value,3))+" CP ",1),_("abbr",{class:"tooltip",title:n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).tooltip},"\u2139",8,kZ),PZ,R(" efficiency: "+C(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),CZ],64)):(E(),M(W,{key:1},[EZ],64))]),_("div",null,[_("div",AZ,[_("div",null,[_("h4",null,[MZ,o.freeWorkers.length==0?(E(),M(W,{key:0},[xZ],64)):Z("",!0)])]),_("div",IZ,[LZ,et(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.selectedRedirect=u)},[OZ,RZ,(E(!0),M(W,null,gt(n.gameStore.townsWithRedirectableStorage,u=>(E(),M("option",{value:u},C(n.gameStore.uloc.node[u]),9,DZ))),256))],512),[[He,e.selectedRedirect]])])]),o.freeWorkers.length>0?(E(),M("table",NZ,[FZ,(E(!0),M(W,null,gt(o.freeWorkers,u=>(E(),M("tr",null,[_("td",null,C(n.gameStore.nodeName(u.tnk)),1),_("td",null,C(o.formatFixed(u.profit.dist)),1),_("td",null,[R(C(u.w.label)+" ",1),_("span",$Z,C(o.formatFixed(u.statsOnPz.wspd,2))+"\u{1F528} "+C(o.formatFixed(u.statsOnPz.mspd,2))+"\u{1F9B6} "+C(o.formatFixed(u.statsOnPz.luck,2))+"\u{1F340} ",1)]),_("td",zZ,C(o.formatFixed(u.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:Array.from(u.path,c=>`${n.userStore.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`)},C(u.mapCp),9,BZ),VZ,_("abbr",{class:"tooltip",title:u.infraTooltip},C(o.formatFixed(u.townCp)),9,UZ),R("="+C(o.formatFixed(u.cp)),1)]),_("td",WZ,C(o.formatFixed(u.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(E(),M("button",jZ,"assign")):isNaN(u.townCp)?(E(),M("button",GZ,"assign")):n.gameStore.tnk2tk(u.w.tnk)&&n.gameStore.tnk2tk(u.w.tnk)==619&&!n.userStore.activateAncado?(E(),M("button",HZ,"assign")):(E(),M("button",{key:3,onClick:c=>n.userStore.assignWorker(u.w,{kind:"plantzone",pzk:u.pz.key,storage:u.storageTnk})}," assign ",8,XZ))])]))),256))])):Z("",!0),ht(l,{pzk:r.pzk,redirect:Number(e.selectedRedirect)},null,8,["pzk","redirect"])])],64)}const s7=Gt(dZ,[["render",YZ],["__scopeId","data-v-1a852e24"]]);const qZ={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function ZZ(e,t,r,n,i,o){return et((E(),M("div",{onClick:t[1]||(t[1]=ap(s=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[_("div",{onClick:t[0]||(t[0]=ap(()=>{},["stop"])),class:"dialog_content"},[lH(e.$slots,"default",{},void 0,!0)])],512)),[[aX,r.show]])}const Xk=Gt(qZ,[["render",ZZ],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var VS=function(e,t){return VS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},VS(e,t)};function St(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");VS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var KZ=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),JZ=function(){function e(){this.browser=new KZ,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Rl=new JZ;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Rl.wxa=!0,Rl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Rl.worker=!0:typeof navigator>"u"?(Rl.node=!0,Rl.svgSupported=!0):QZ(navigator.userAgent,Rl);function QZ(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),s&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var a=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in a||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Kt=Rl;var Yk=12,tK="sans-serif",lu=Yk+"px "+tK,eK=20,rK=100,nK="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function iK(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-eK)/rK;t[n]=i}return t}var oK=iK(nK),Tu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=Tu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||lu),e.measureText(r);r=r||"",n=n||lu;var o=/^([0-9]*?)px$/.exec(n),s=+(o&&o[1])||Yk,a=0;if(n.indexOf("mono")>=0)a=s*r.length;else for(var l=0;l<r.length;l++){var u=oK[r[l]];a+=u==null?s:u*s}return{width:a}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},a7=ku(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),l7=ku(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Ef=Object.prototype.toString,r_=Array.prototype,sK=r_.forEach,aK=r_.filter,qk=r_.slice,lK=r_.map,n4=function(){}.constructor,R0=n4?n4.prototype:null,Zk="__proto__",uK=2311;function u7(){return uK++}function Kk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Wt(e){if(e==null||typeof e!="object")return e;var t=e,r=Ef.call(e);if(r==="[object Array]"){if(!Rd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=Wt(e[n])}}else if(l7[r]){if(!Rd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!a7[r]&&!Rd(e)&&!Nm(e)){t={};for(var s in e)e.hasOwnProperty(s)&&s!==Zk&&(t[s]=Wt(e[s]))}return t}function ue(e,t,r){if(!Dt(t)||!Dt(e))return r?Wt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==Zk){var i=e[n],o=t[n];Dt(o)&&Dt(i)&&!pt(o)&&!pt(i)&&!Nm(o)&&!Nm(i)&&!i4(o)&&!i4(i)&&!Rd(o)&&!Rd(i)?ue(i,o,r):(r||!(n in e))&&(e[n]=Wt(t[n]))}return e}function cK(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=ue(r,e[n],t);return r}function ut(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==Zk&&(e[r]=t[r]);return e}function ie(e,t,r){for(var n=ge(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}Tu.createCanvas;function he(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function fK(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Hi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else ie(e,t,r)}function Zr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function $(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===sK)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function It(e,t,r){if(!e)return[];if(!t)return Jk(e);if(e.map&&e.map===lK)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function ku(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function Mr(e,t,r){if(!e)return[];if(!t)return Jk(e);if(e.filter&&e.filter===aK)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ge(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function hK(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(qk.call(arguments)))}}var jt=R0&&Ht(R0.bind)?R0.call.bind(R0.bind):hK;function we(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(qk.call(arguments)))}}function pt(e){return Array.isArray?Array.isArray(e):Ef.call(e)==="[object Array]"}function Ht(e){return typeof e=="function"}function Mt(e){return typeof e=="string"}function US(e){return Ef.call(e)==="[object String]"}function Te(e){return typeof e=="number"}function Dt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function i4(e){return!!a7[Ef.call(e)]}function Nn(e){return!!l7[Ef.call(e)]}function Nm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function n_(e){return e.colorStops!=null}function dK(e){return e.image!=null}function pK(e){return Ef.call(e)==="[object RegExp]"}function Fm(e){return e!==e}function Ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Qt(e,t){return e!=null?e:t}function Od(e,t,r){return e!=null?e:t!=null?t:r}function Jk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return qk.apply(e,t)}function c7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Ui(e,t){if(!e)throw new Error(t)}function Eo(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var f7="__ec_primitive__";function $m(e){e[f7]=!0}function Rd(e){return e[f7]}var vK=function(){function e(t){this.data={};var r=pt(t);this.data={};var n=this;t instanceof e?t.each(i):t&&$(t,i);function i(o,s){r?n.set(o,s):n.set(s,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ge(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function Yt(e){return new vK(e)}function h7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function i_(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ut(r,t),r}function d7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function _t(e,t){return e.hasOwnProperty(t)}function Yr(){}var gK=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WS=function(e,t){return WS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},WS(e,t)};function Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");WS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Af(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function mK(e,t){return e[0]=t[0],e[1]=t[1],e}function _K(e){return[e[0],e[1]]}function o4(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function p7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function yK(e){return Math.sqrt(bK(e))}function bK(e){return e[0]*e[0]+e[1]*e[1]}function By(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Qk(e,t){var r=yK(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function jS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var wK=jS;function SK(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Hc=SK;function sn(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function Oc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Rc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Yu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),TK=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Yu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,s=i-this._y;this._x=n,this._y=i,r.drift(o,s,t),this.handler.dispatchToElement(new Yu(r,t),"drag",t.event);var a=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=a,r!==a&&(l&&a!==l&&this.handler.dispatchToElement(new Yu(l,t),"dragleave",t.event),a&&a!==l&&this.handler.dispatchToElement(new Yu(a,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Yu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Yu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const kK=TK;var PK=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var s=this._$eventProcessor;r!=null&&s&&s.normalizeQuery&&(r=s.normalizeQuery(r)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,s=n[t].length;o<s;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=i.length,l=0;l<a;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=r[s-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(s){case 0:c.h.call(a);break;case 1:c.h.call(a,r[0]);break;case 2:c.h.call(a,r[0],r[1]);break;default:c.h.apply(a,r.slice(1,s-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Xi=PK;var CK=Math.log(2);function GS(e,t,r,n,i,o){var s=n+"-"+i,a=e.length;if(o.hasOwnProperty(s))return o[s];if(t===1){var l=Math.round(Math.log((1<<a)-1&~i)/CK);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<a;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*GS(e,t-1,c,u,i|p,o),d++)}return o[s]=f,f}function s4(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=GS(r,8,0,0,0,n);if(i!==0){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)o[a]==null&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*GS(r,7,s===0?1:0,1<<s,1<<a,n)/i*t[s];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var a4="___zrEVENTSAVED",Vy=[];function EK(e,t,r,n,i){return HS(Vy,t,n,i,!0)&&HS(e,r,Vy[0],Vy[1])}function HS(e,t,r,n,i){if(t.getBoundingClientRect&&Kt.domSupported&&!v7(t)){var o=t[a4]||(t[a4]={}),s=AK(t,o),a=MK(s,o,i);if(a)return a(e,r,n),!0}return!1}function AK(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=s.style,l=o%2,u=(o>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(s),r.push(s)}return r}function MK(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,s=[],a=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;s.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],a.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=s,t[n]=r?s4(a,s):s4(s,a))}function v7(e){return e.nodeName.toUpperCase()==="CANVAS"}var xK=/([&<>"'])/g,IK={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Qn(e){return e==null?"":(e+"").replace(xK,function(t,r){return IK[r]})}var LK=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Uy=[],OK=Kt.browser.firefox&&+Kt.browser.version.split(".")[0]<39;function XS(e,t,r,n){return r=r||{},n?l4(e,t,r):OK&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):l4(e,t,r),r}function l4(e,t,r){if(Kt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(v7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(HS(Uy,e,n,i)){r.zrX=Uy[0],r.zrY=Uy[1];return}}r.zrX=r.zrY=0}function tP(e){return e||window.event}function qn(e,t,r){if(t=tP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var s=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];s&&XS(e,s,t,r)}else{XS(e,t,t,r);var o=RK(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var a=t.button;return t.which==null&&a!==void 0&&LK.test(t.type)&&(t.which=a&1?1:a&2?3:a&4?2:0),t}function RK(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function DK(e,t,r,n){e.addEventListener(t,r,n)}function NK(e,t,r,n){e.removeEventListener(t,r,n)}var uu=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function u4(e){return e.which===2||e.which===3}var FK=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},s=0,a=i.length;s<a;s++){var l=i[s],u=XS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in Wy)if(Wy.hasOwnProperty(r)){var n=Wy[r](this._track,t);if(n)return n}},e}();function c4(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function $K(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Wy={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=c4(n)/c4(i);!isFinite(o)&&(o=1),t.pinchScale=o;var s=$K(n);return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function cf(){return[1,0,0,1,0,0]}function eP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function g7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Xc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],s=t[1]*r[2]+t[3]*r[3],a=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e}function YS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function rP(e,t,r){var n=t[0],i=t[2],o=t[4],s=t[1],a=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+s*u,e[1]=-n*u+s*c,e[2]=i*c+a*u,e[3]=-i*u+c*a,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function zK(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function o_(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],s=t[3],a=t[5],l=r*s-o*n;return l?(l=1/l,e[0]=s*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*i)*l,e[5]=(o*i-r*a)*l,e):null}var BK=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const Ie=BK;var D0=Math.min,N0=Math.max,nl=new Ie,il=new Ie,ol=new Ie,sl=new Ie,fh=new Ie,hh=new Ie,VK=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=D0(t.x,this.x),n=D0(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=N0(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=N0(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=cf();return YS(o,o,[-r.x,-r.y]),zK(o,o,[n,i]),YS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,s=n.y,a=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||a<c||f<s);if(r){var d=1/0,p=0,v=Math.abs(o-l),m=Math.abs(u-i),g=Math.abs(a-c),y=Math.abs(f-s),b=Math.min(v,m),w=Math.min(g,y);o<l||u<i?b>p&&(p=b,v<m?Ie.set(hh,-v,0):Ie.set(hh,m,0)):b<d&&(d=b,v<m?Ie.set(fh,v,0):Ie.set(fh,-m,0)),a<c||f<s?w>p&&(p=w,g<y?Ie.set(hh,0,-g):Ie.set(hh,0,y)):b<d&&(d=b,g<y?Ie.set(fh,0,g):Ie.set(fh,0,-y))}return r&&Ie.copy(r,h?fh:hh),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],s=n[4],a=n[5];t.x=r.x*i+s,t.y=r.y*o+a,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}nl.x=ol.x=r.x,nl.y=sl.y=r.y,il.x=sl.x=r.x+r.width,il.y=ol.y=r.y+r.height,nl.transform(n),sl.transform(n),il.transform(n),ol.transform(n),t.x=D0(nl.x,il.x,ol.x,sl.x),t.y=D0(nl.y,il.y,ol.y,sl.y);var l=N0(nl.x,il.x,ol.x,sl.x),u=N0(nl.y,il.y,ol.y,sl.y);t.width=l-t.x,t.height=u-t.y},e}();const ce=VK;var m7="silent";function UK(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:WK}}function WK(){uu(this.event)}var jK=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Xi),dh=function(){function e(t,r){this.x=t,this.y=r}return e}(),GK=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],jy=new ce(0,0,0,0),_7=function(e){Ee(t,e);function t(r,n,i,o,s){var a=e.call(this)||this;return a._hovered=new dh(0,0),a.storage=r,a.painter=n,a.painterRoot=o,a._pointerSize=s,i=i||new jK,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new kK(a),a}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&($(GK,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=y7(this,n,i),s=this._hovered,a=s.target;a&&!a.__zr&&(s=this.findHover(s.x,s.y),a=s.target);var l=this._hovered=o?new dh(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(s,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==a&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new dh(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var s="on"+n,a=UK(n,r,i);o&&(o[s]&&(a.cancelBubble=!!o[s].call(o,a)),o.trigger(n,a),o=o.__hostTarget?o.__hostTarget:o.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(n,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,a),l.trigger&&l.trigger(n,a)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),s=new dh(r,n);if(f4(o,s,r,n,i),this._pointerSize&&!s.target){for(var a=[],l=this._pointerSize,u=l/2,c=new ce(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(jy.copy(h.getBoundingRect()),h.transform&&jy.applyTransform(h.transform),jy.intersect(c)&&a.push(h))}if(a.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=d)for(var g=0;g<v;g+=p){var y=r+m*Math.cos(g),b=n+m*Math.sin(g);if(f4(a,s,y,b,i),s.target)return s}}return s},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new FK);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var s=o.type;r.gestureEvent=s;var a=new dh;a.target=o.target,this.dispatchToElement(a,s,o.event)}},t}(Xi);$(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){_7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=y7(this,r,n),o,s;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),s=o.target),e==="mousedown")this._downEl=s,this._downPoint=[t.zrX,t.zrY],this._upEl=s;else if(e==="mouseup")this._upEl=s;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||wK(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function HK(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var s=n.getClipPath();if(s&&!s.contain(t,r))return!1;n.silent&&(i=!0)}var a=n.__hostTarget;n=a||n.parent}return i?m7:!0}return!1}function f4(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var s=e[o],a=void 0;if(s!==i&&!s.ignore&&(a=HK(s,r,n))&&(!t.topTarget&&(t.topTarget=s),a!==m7)){t.target=s;break}}}function y7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const XK=_7;var b7=32,ph=7;function YK(e){for(var t=0;e>=b7;)t|=e&1,e>>=1;return e+t}function h4(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;qK(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function qK(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function d4(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],s=t,a=n,l;s<a;)l=s+a>>>1,i(o,e[l])<0?a=l:s=l+1;var u=n-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=o}}function Gy(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])>0){for(a=n-i;l<a&&o(e,t[r+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}else{for(a=i+1;l<a&&o(e,t[r+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])>0?s=c+1:l=c}return l}function Hy(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])<0){for(a=i+1;l<a&&o(e,t[r+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}else{for(a=n-i;l<a&&o(e,t[r+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])<0?l=c:s=c+1}return l}function ZK(e,t){var r=ph,n,i,o=0;e.length;var s=[];n=[],i=[];function a(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],m=n[d+1],g=i[d+1];i[d]=v+g,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=Hy(e[m],e,p,v,0,t);p+=y,v-=y,v!==0&&(g=Gy(e[p+v-1],e,m,g,g-1,t),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)s[g]=e[d+g];var y=0,b=v,w=d;if(e[w++]=e[b++],--m===0){for(g=0;g<p;g++)e[w+g]=s[y+g];return}if(p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[y];return}for(var T=r,S,k,x;;){S=0,k=0,x=!1;do if(t(e[b],s[y])<0){if(e[w++]=e[b++],k++,S=0,--m===0){x=!0;break}}else if(e[w++]=s[y++],S++,k=0,--p===1){x=!0;break}while((S|k)<T);if(x)break;do{if(S=Hy(e[b],s,y,p,0,t),S!==0){for(g=0;g<S;g++)e[w+g]=s[y+g];if(w+=S,y+=S,p-=S,p<=1){x=!0;break}}if(e[w++]=e[b++],--m===0){x=!0;break}if(k=Gy(s[y],e,b,m,0,t),k!==0){for(g=0;g<k;g++)e[w+g]=e[b+g];if(w+=k,b+=k,m-=k,m===0){x=!0;break}}if(e[w++]=s[y++],--p===1){x=!0;break}T--}while(S>=ph||k>=ph);if(x)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)e[w+g]=s[y+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)s[g]=e[v+g];var y=d+p-1,b=m-1,w=v+m-1,T=0,S=0;if(e[w--]=e[y--],--p===0){for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g];return}if(m===1){for(w-=p,y-=p,S=w+1,T=y+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b];return}for(var k=r;;){var x=0,A=0,I=!1;do if(t(s[b],e[y])<0){if(e[w--]=e[y--],x++,A=0,--p===0){I=!0;break}}else if(e[w--]=s[b--],A++,x=0,--m===1){I=!0;break}while((x|A)<k);if(I)break;do{if(x=p-Hy(s[b],e,d,p,p-1,t),x!==0){for(w-=x,y-=x,p-=x,S=w+1,T=y+1,g=x-1;g>=0;g--)e[S+g]=e[T+g];if(p===0){I=!0;break}}if(e[w--]=s[b--],--m===1){I=!0;break}if(A=m-Gy(e[y],s,0,m,m-1,t),A!==0){for(w-=A,b-=A,m-=A,S=w+1,T=b+1,g=0;g<A;g++)e[S+g]=s[T+g];if(m<=1){I=!0;break}}if(e[w--]=e[y--],--p===0){I=!0;break}k--}while(x>=ph||A>=ph);if(I)break;k<0&&(k=0),k+=2}if(r=k,r<1&&(r=1),m===1){for(w-=p,y-=p,S=w+1,T=y+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b]}else{if(m===0)throw new Error;for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:a}}function Zg(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<b7){o=h4(e,r,n,t),d4(e,r,n,r+o,t);return}var s=ZK(e,t),a=YK(i);do{if(o=h4(e,r,n,t),o<a){var l=i;l>a&&(l=a),d4(e,r,r+l,r+o,t),o=l}s.pushRun(r,o),s.mergeRuns(),i-=o,r+=o}while(i!==0);s.forceMergeRuns()}}var In=1,cd=2,Mc=4,p4=!1;function Xy(){p4||(p4=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function v4(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var KK=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=v4}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Zg(n,v4)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,s=t;o;)o.parent=s,o.updateTransform(),r.push(o),s=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),l=0;l<a.length;l++){var u=a[l];t.__dirty&&(u.__dirty|=In),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Xy(),c.z=0),isNaN(c.z2)&&(Xy(),c.z2=0),isNaN(c.zlevel)&&(Xy(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=he(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const JK=KK;var w7;w7=Kt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const qS=w7;var Kg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Kg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Kg.bounceIn(e*2)*.5:Kg.bounceOut(e*2-1)*.5+.5}};const S7=Kg;var F0=Math.pow,ka=Math.sqrt,zm=1e-8,T7=1e-4,g4=ka(3),$0=1/3,To=Af(),ti=Af(),Yc=Af();function ga(e){return e>-zm&&e<zm}function k7(e){return e>zm||e<-zm}function cr(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function m4(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Bm(e,t,r,n,i,o){var s=n+3*(t-r)-e,a=3*(r-t*2+e),l=3*(t-e),u=e-i,c=a*a-3*s*l,f=a*l-9*s*u,h=l*l-3*a*u,d=0;if(ga(c)&&ga(f))if(ga(a))o[0]=0;else{var p=-l/a;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(ga(v)){var m=f/c,p=-a/s+m,g=-m/2;p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g)}else if(v>0){var y=ka(v),b=c*a+1.5*s*(-f+y),w=c*a+1.5*s*(-f-y);b<0?b=-F0(-b,$0):b=F0(b,$0),w<0?w=-F0(-w,$0):w=F0(w,$0);var p=(-a-(b+w))/(3*s);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*a-3*s*f)/(2*ka(c*c*c)),S=Math.acos(T)/3,k=ka(c),x=Math.cos(S),p=(-a-2*k*x)/(3*s),g=(-a+k*(x+g4*Math.sin(S)))/(3*s),A=(-a+k*(x-g4*Math.sin(S)))/(3*s);p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g),A>=0&&A<=1&&(o[d++]=A)}}return d}function P7(e,t,r,n,i){var o=6*r-12*t+6*e,s=9*t+3*n-3*e-9*r,a=3*t-3*e,l=0;if(ga(s)){if(k7(o)){var u=-a/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*s*a;if(ga(c))i[0]=-o/(2*s);else if(c>0){var f=ka(c),u=(-o+f)/(2*s),h=(-o-f)/(2*s);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Vm(e,t,r,n,i,o){var s=(t-e)*i+e,a=(r-t)*i+t,l=(n-r)*i+r,u=(a-s)*i+s,c=(l-a)*i+a,f=(c-u)*i+u;o[0]=e,o[1]=s,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function QK(e,t,r,n,i,o,s,a,l,u,c){var f,h=.005,d=1/0,p,v,m,g;To[0]=l,To[1]=u;for(var y=0;y<1;y+=.05)ti[0]=cr(e,r,i,s,y),ti[1]=cr(t,n,o,a,y),m=Hc(To,ti),m<d&&(f=y,d=m);d=1/0;for(var b=0;b<32&&!(h<T7);b++)p=f-h,v=f+h,ti[0]=cr(e,r,i,s,p),ti[1]=cr(t,n,o,a,p),m=Hc(ti,To),p>=0&&m<d?(f=p,d=m):(Yc[0]=cr(e,r,i,s,v),Yc[1]=cr(t,n,o,a,v),g=Hc(Yc,To),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=cr(e,r,i,s,f),c[1]=cr(t,n,o,a,f)),ka(d)}function tJ(e,t,r,n,i,o,s,a,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=cr(e,r,i,s,p),m=cr(t,n,o,a,p),g=v-u,y=m-c;f+=Math.sqrt(g*g+y*y),u=v,c=m}return f}function Ur(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function _4(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function eJ(e,t,r,n,i){var o=e-2*t+r,s=2*(t-e),a=e-n,l=0;if(ga(o)){if(k7(s)){var u=-a/s;u>=0&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*o*a;if(ga(c)){var u=-s/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ka(c),u=(-s+f)/(2*o),h=(-s-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function C7(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Um(e,t,r,n,i){var o=(t-e)*n+e,s=(r-t)*n+t,a=(s-o)*n+o;i[0]=e,i[1]=o,i[2]=a,i[3]=a,i[4]=s,i[5]=r}function rJ(e,t,r,n,i,o,s,a,l){var u,c=.005,f=1/0;To[0]=s,To[1]=a;for(var h=0;h<1;h+=.05){ti[0]=Ur(e,r,i,h),ti[1]=Ur(t,n,o,h);var d=Hc(To,ti);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<T7);p++){var v=u-c,m=u+c;ti[0]=Ur(e,r,i,v),ti[1]=Ur(t,n,o,v);var d=Hc(ti,To);if(v>=0&&d<f)u=v,f=d;else{Yc[0]=Ur(e,r,i,m),Yc[1]=Ur(t,n,o,m);var g=Hc(Yc,To);m<=1&&g<f?(u=m,f=g):c*=.5}}return l&&(l[0]=Ur(e,r,i,u),l[1]=Ur(t,n,o,u)),ka(f)}function nJ(e,t,r,n,i,o,s){for(var a=e,l=t,u=0,c=1/s,f=1;f<=s;f++){var h=f*c,d=Ur(e,r,i,h),p=Ur(t,n,o,h),v=d-a,m=p-l;u+=Math.sqrt(v*v+m*m),a=d,l=p}return u}var iJ=/cubic-bezier\(([0-9,\.e ]+)\)/;function E7(e){var t=e&&iJ.exec(e);if(t){var r=t[1].split(","),n=+Eo(r[0]),i=+Eo(r[1]),o=+Eo(r[2]),s=+Eo(r[3]);if(isNaN(n+i+o+s))return;var a=[];return function(l){return l<=0?0:l>=1?1:Bm(0,n,o,1,l,a)&&cr(0,i,s,1,a[0])}}}var oJ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Yr,this.ondestroy=t.ondestroy||Yr,this.onrestart=t.onrestart||Yr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var s=this.easingFunc,a=s?s(o):o;if(this.onframe(a),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ht(t)?t:S7[t]||E7(t)},e}();const sJ=oJ;var A7=function(){function e(t){this.value=t}return e}(),aJ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new A7(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),lJ=function(){function e(t){this._list=new aJ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var s=n.len(),a=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}a?a.value=r:a=new A7(r),a.key=t,n.insertEntry(a),i[t]=a}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const Xp=lJ;var y4={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $i(e){return e=Math.round(e),e<0?0:e>255?255:e}function uJ(e){return e=Math.round(e),e<0?0:e>360?360:e}function cp(e){return e<0?0:e>1?1:e}function Yy(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?$i(parseFloat(t)/100*255):$i(parseInt(t,10))}function Zl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?cp(parseFloat(t)/100):cp(parseFloat(t))}function qy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function ma(e,t,r){return e+(t-e)*r}function Yn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function ZS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var M7=new Xp(20),z0=null;function qu(e,t){z0&&ZS(z0,t),z0=M7.put(e,z0||t.slice())}function ni(e,t){if(!!e){t=t||[];var r=M7.get(e);if(r)return ZS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in y4)return ZS(t,y4[n]),qu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Yn(t,0,0,0,1);return}return Yn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),qu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Yn(t,0,0,0,1);return}return Yn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),qu(e,t),t}return}var s=n.indexOf("("),a=n.indexOf(")");if(s!==-1&&a+1===i){var l=n.substr(0,s),u=n.substr(s+1,a-(s+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Yn(t,+u[0],+u[1],+u[2],1):Yn(t,0,0,0,1);c=Zl(u.pop());case"rgb":if(u.length>=3)return Yn(t,Yy(u[0]),Yy(u[1]),Yy(u[2]),u.length===3?c:Zl(u[3])),qu(e,t),t;Yn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Yn(t,0,0,0,1);return}return u[3]=Zl(u[3]),KS(u,t),qu(e,t),t;case"hsl":if(u.length!==3){Yn(t,0,0,0,1);return}return KS(u,t),qu(e,t),t;default:return}}Yn(t,0,0,0,1)}}function KS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Zl(e[1]),i=Zl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,s=i*2-o;return t=t||[],Yn(t,$i(qy(s,o,r+1/3)*255),$i(qy(s,o,r)*255),$i(qy(s,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function cJ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i,a=(o+i)/2,l,u;if(s===0)l=0,u=0;else{a<.5?u=s/(o+i):u=s/(2-o-i);var c=((o-t)/6+s/2)/s,f=((o-r)/6+s/2)/s,h=((o-n)/6+s/2)/s;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,a];return e[3]!=null&&d.push(e[3]),d}}function b4(e,t){var r=ni(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return vs(r,r.length===4?"rgba":"rgb")}}function Zy(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=t[i],a=t[o],l=n-i;return r[0]=$i(ma(s[0],a[0],l)),r[1]=$i(ma(s[1],a[1],l)),r[2]=$i(ma(s[2],a[2],l)),r[3]=cp(ma(s[3],a[3],l)),r}}function fJ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=ni(t[i]),a=ni(t[o]),l=n-i,u=vs([$i(ma(s[0],a[0],l)),$i(ma(s[1],a[1],l)),$i(ma(s[2],a[2],l)),cp(ma(s[3],a[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function Ky(e,t,r,n){var i=ni(e);if(e)return i=cJ(i),t!=null&&(i[0]=uJ(t)),r!=null&&(i[1]=Zl(r)),n!=null&&(i[2]=Zl(n)),vs(KS(i),"rgba")}function JS(e,t){var r=ni(e);if(r&&t!=null)return r[3]=cp(t),vs(r,"rgba")}function vs(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Wm(e,t){var r=ni(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function hJ(e){return e.type==="linear"}function dJ(e){return e.type==="radial"}(function(){return Kt.hasGlobalWindow&&Ht(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var QS=Array.prototype.slice;function is(e,t,r){return(t-e)*r+e}function Jy(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=is(t[o],r[o],n);return e}function pJ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=is(t[s][a],r[s][a],n)}return e}function B0(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function w4(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=t[s][a]+r[s][a]*n}return e}function vJ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),s=i[o-1]||{color:[0,0,0,0],offset:0},a=o;a<Math.max(r,n);a++)i.push({offset:s.offset,color:s.color.slice()})}function gJ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,s=i.length;if(o!==s){var a=o>s;if(a)n.length=s;else for(var l=o;l<s;l++)n.push(r===1?i[l]:QS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function Dd(e){if(Zr(e)){var t=e.length;if(Zr(e[0])){for(var r=[],n=0;n<t;n++)r.push(QS.call(e[n]));return r}return QS.call(e)}return e}function Jg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function mJ(e){return Zr(e&&e[0])?2:1}var V0=0,Qg=1,x7=2,fd=3,t3=4,e3=5,S4=6;function T4(e){return e===t3||e===e3}function U0(e){return e===Qg||e===x7}var vh=[0,0,0,0],_J=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,s=!1,a=S4,l=r;if(Zr(r)){var u=mJ(r);a=u,(u===1&&!Te(r[0])||u===2&&!Te(r[0][0]))&&(s=!0)}else if(Te(r)&&!Fm(r))a=V0;else if(Mt(r))if(!isNaN(+r))a=V0;else{var c=ni(r);c&&(l=c,a=fd)}else if(n_(r)){var f=ut({},l);f.colorStops=It(r.colorStops,function(d){return{offset:d.offset,color:ni(d.color)}}),hJ(r)?a=t3:dJ(r)&&(a=e3),l=f}o===0?this.valType=a:(a!==this.valType||a===S4)&&(s=!0),this.discrete=this.discrete||s;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ht(n)?n:S7[n]||E7(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,m){return v.time-m.time});for(var i=this.valType,o=n.length,s=n[o-1],a=this.discrete,l=U0(i),u=T4(i),c=0;c<o;c++){var f=n[c],h=f.value,d=s.value;f.percent=f.time/t,a||(l&&c!==o-1?gJ(h,d,i):u&&vJ(h.colorStops,d.colorStops))}if(!a&&i!==e3&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===V0?n[c].additiveValue=n[c].value-p:i===fd?n[c].additiveValue=B0([],n[c].value,p,-1):U0(i)&&(n[c].additiveValue=i===Qg?B0([],n[c].value,p,-1):w4([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,s=this.keyframes,a=s.length,l=this.propName,u=o===fd,c,f=this._lastFr,h=Math.min,d,p;if(a===1)d=p=s[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,a-1);for(c=v;c>=0&&!(s[c].percent<=r);c--);c=h(c,a-2)}else{for(c=f;c<a&&!(s[c].percent>r);c++);c=h(c-1,a-2)}p=s[c+1],d=s[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var m=p.percent-d.percent,g=m===0?1:h((r-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var y=n?this._additiveValue:u?vh:t[l];if((U0(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=g<1?d.rawValue:p.rawValue;else if(U0(o))o===Qg?Jy(y,d[i],p[i],g):pJ(y,d[i],p[i],g);else if(T4(o)){var b=d[i],w=p[i],T=o===t3;t[l]={type:T?"linear":"radial",x:is(b.x,w.x,g),y:is(b.y,w.y,g),colorStops:It(b.colorStops,function(k,x){var A=w.colorStops[x];return{offset:is(k.offset,A.offset,g),color:Jg(Jy([],k.color,A.color,g))}}),global:w.global},T?(t[l].x2=is(b.x2,w.x2,g),t[l].y2=is(b.y2,w.y2,g)):t[l].r=is(b.r,w.r,g)}else if(u)Jy(y,d[i],p[i],g),n||(t[l]=Jg(y));else{var S=is(d[i],p[i],g);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===V0?t[n]=t[n]+i:r===fd?(ni(t[n],vh),B0(vh,vh,i,1),t[n]=Jg(vh)):r===Qg?B0(t[n],t[n],i,1):r===x7&&w4(t[n],t[n],i,1)},e}(),yJ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){Kk("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ge(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,s=0;s<n.length;s++){var a=n[s],l=o[a];if(!l){l=o[a]=new _J(a);var u=void 0,c=this._getAdditiveTrack(a);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===fd&&u&&(u=Jg(u))}else u=this._target[a];if(u==null)continue;t>0&&l.addKeyframe(0,Dd(u),i),this._trackKeys.push(a)}l.addKeyframe(t,Dd(r[a]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var s=this._trackKeys[o],a=this._tracks[s],l=this._getAdditiveTrack(s),u=a.keyframes,c=u.length;if(a.prepare(i,l),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var f=u[c-1];f&&(r._target[a.propName]=f.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var h=new sJ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var m=0;m<n.length;m++)n[m].step(r._target,d);var g=r._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return It(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var s=n[t[o]];s&&!s.isFinished()&&(r?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var a=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],s=this._tracks[o];if(!(!s||s.isFinished())){var a=s.keyframes,l=a[n?0:a.length-1];l&&(t[o]=Dd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ge(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var s=o.keyframes;if(s.length>1){var a=s.pop();o.addKeyframe(a.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const nP=yJ;function Dc(){return new Date().getTime()}var bJ=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=Dc()-this._pausedTime,i=n-this._time,o=this._head;o;){var s=o.next,a=o.step(n,i);a&&(o.ondestroy(),this.removeClip(o)),o=s}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(qS(n),!r._paused&&r.update())}qS(n)},t.prototype.start=function(){this._running||(this._time=Dc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Dc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Dc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new nP(r,n.loop);return this.addAnimator(i),i},t}(Xi);const wJ=bJ;var SJ=300,Qy=Kt.domSupported,tb=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=It(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),k4={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},P4=!1;function r3(e){var t=e.pointerType;return t==="pen"||t==="touch"}function TJ(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function eb(e){e&&(e.zrByTouch=!0)}function kJ(e,t){return qn(e.dom,new PJ(e,t),!0)}function I7(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var PJ=function(){function e(t,r){this.stopPropagation=Yr,this.stopImmediatePropagation=Yr,this.preventDefault=Yr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),ki={mousedown:function(e){e=qn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=qn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=qn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=qn(this.dom,e);var t=e.toElement||e.relatedTarget;I7(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){P4=!0,e=qn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){P4||(e=qn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=qn(this.dom,e),eb(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),ki.mousemove.call(this,e),ki.mousedown.call(this,e)},touchmove:function(e){e=qn(this.dom,e),eb(e),this.handler.processGesture(e,"change"),ki.mousemove.call(this,e)},touchend:function(e){e=qn(this.dom,e),eb(e),this.handler.processGesture(e,"end"),ki.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<SJ&&ki.click.call(this,e)},pointerdown:function(e){ki.mousedown.call(this,e)},pointermove:function(e){r3(e)||ki.mousemove.call(this,e)},pointerup:function(e){ki.mouseup.call(this,e)},pointerout:function(e){r3(e)||ki.mouseout.call(this,e)}};$(["click","dblclick","contextmenu"],function(e){ki[e]=function(t){t=qn(this.dom,t),this.trigger(e,t)}});var n3={pointermove:function(e){r3(e)||n3.mousemove.call(this,e)},pointerup:function(e){n3.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function CJ(e,t){var r=t.domHandlers;Kt.pointerEventsSupported?$(tb.pointer,function(n){tm(t,n,function(i){r[n].call(e,i)})}):(Kt.touchEventsSupported&&$(tb.touch,function(n){tm(t,n,function(i){r[n].call(e,i),TJ(t)})}),$(tb.mouse,function(n){tm(t,n,function(i){i=tP(i),t.touching||r[n].call(e,i)})}))}function EJ(e,t){Kt.pointerEventsSupported?$(k4.pointer,r):Kt.touchEventsSupported||$(k4.mouse,r);function r(n){function i(o){o=tP(o),I7(e,o.target)||(o=kJ(e,o),t.domHandlers[n].call(e,o))}tm(t,n,i,{capture:!0})}}function tm(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,DK(e.domTarget,t,r,n)}function rb(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&NK(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var C4=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),AJ=function(e){Ee(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new C4(r,ki),Qy&&(i._globalHandlerScope=new C4(document,n3)),CJ(i,i._localHandlerScope),i}return t.prototype.dispose=function(){rb(this._localHandlerScope),Qy&&rb(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,Qy&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?EJ(this,n):rb(n)}},t}(Xi);const MJ=AJ;var L7=1;Kt.hasGlobalWindow&&(L7=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var jm=L7,i3=.4,o3="#333",s3="#ccc",xJ="#eee",E4=eP,A4=5e-5;function al(e){return e>A4||e<-A4}var ll=[],Zu=[],nb=cf(),ib=Math.abs,Vl=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return al(this.rotation)||al(this.x)||al(this.y)||al(this.scaleX-1)||al(this.scaleY-1)||al(this.skewX)||al(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&E4(n);return}n=n||cf(),r?this.getLocalTransform(n):E4(n),t&&(r?Xc(n,t,n):g7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(ll);var n=ll[0]<0?-1:1,i=ll[1]<0?-1:1,o=((ll[0]-n)*r+n)/ll[0]||0,s=((ll[1]-i)*r+i)/ll[1]||0;t[0]*=o,t[1]*=o,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||cf(),o_(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Xc(Zu,t.invTransform,r),r=Zu);var n=this.originX,i=this.originY;(n||i)&&(nb[4]=n,nb[5]=i,Xc(Zu,r,nb),Zu[4]-=n,Zu[5]-=i,r=Zu),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&sn(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&sn(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&ib(t[0]-1)>1e-10&&ib(t[3]-1)>1e-10?Math.sqrt(ib(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){IJ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,s=t.scaleY,a=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||a||l){var p=n+a,v=i+l;r[4]=-p*o-h*v*s,r[5]=-v*s-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=s,r[1]=d*o,r[2]=h*s,u&&rP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Ro=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function IJ(e,t){for(var r=0;r<Ro.length;r++){var n=Ro[r];e[n]=t[n]}}var M4={};function On(e,t){t=t||lu;var r=M4[t];r||(r=M4[t]=new Xp(500));var n=r.get(e);return n==null&&(n=Tu.measureText(e,t).width,r.put(e,n)),n}function x4(e,t,r,n){var i=On(e,t),o=oP(t),s=hd(0,i,r),a=xc(0,o,n),l=new ce(s,a,i,o);return l}function iP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return x4(i[0],t,r,n);for(var s=new ce(0,0,0,0),a=0;a<i.length;a++){var l=x4(i[a],t,r,n);a===0?s.copy(l):s.union(l)}return s}function hd(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function xc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function oP(e){return On("\u56FD",e)}function ys(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Gm(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,s=r.width,a=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ys(n[0],r.width),u+=ys(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=a,c="right",f="middle";break;case"right":l+=i+s,u+=a,f="middle";break;case"top":l+=s/2,u-=i,c="center",f="bottom";break;case"bottom":l+=s/2,u+=o+i,c="center";break;case"inside":l+=s/2,u+=a,c="center",f="middle";break;case"insideLeft":l+=i,u+=a,f="middle";break;case"insideRight":l+=s-i,u+=a,c="right",f="middle";break;case"insideTop":l+=s/2,u+=i,c="center";break;case"insideBottom":l+=s/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=s-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=s-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var ob="__zr_normal__",sb=Ro.concat(["ignore"]),LJ=ku(Ro,function(e,t){return e[t]=!0,e},{ignore:!1}),Ku={},OJ=new ce(0,0,0,0),sP=function(){function e(t){this.id=u7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,s=void 0,a=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=OJ;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ku,n,c):Gm(Ku,n,c),o.x=Ku.x,o.y=Ku.y,s=Ku.align,a=Ku.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ys(f[0],c.width),d=ys(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,b=void 0;v&&this.canBeInsideText()?(g=n.insideFill,y=n.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),b=!0)):(g=n.outsideFill,y=n.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),b=!0)),g=g||"#000",(g!==m.fill||y!==m.stroke||b!==m.autoStroke||s!==m.align||a!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=y,m.autoStroke=b,m.align=s,m.verticalAlign=a,r.setDefaultTextStyle(m)),r.__dirty|=In,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?s3:o3},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&ni(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),s=0;s<3;s++)n[s]=n[s]*i+(o?0:255)*(1-i);return n[3]=1,vs(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ut(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Dt(t))for(var n=t,i=ge(n),o=0;o<i.length;o++){var s=i[o];this.attrKV(s,t[s])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==ob)){var s=i.targetName,a=s?r[s]:r;i.saveTo(a)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,sb)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(ob,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===ob,s=this.hasState();if(!(!s&&o)){var a=this.currentStates,l=this.stateTransition;if(!(he(a,t)>=0&&(r||a.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){Kk("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~In),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,s=t.length,a=s===o.length;if(a){for(var l=0;l<s;l++)if(t[l]!==o[l]){a=!1;break}}if(a)return;for(var l=0;l<s;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[s-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(t,r,h),m&&m.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~In)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=he(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=he(i,t),s=he(i,r)>=0;o>=0?s?i.splice(o,1):i[o]=r:n&&!s&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ut(r,o),o.textConfig&&(n=n||{},ut(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,s){var a=!(r&&i);r&&r.textConfig?(this.textConfig=ut({},i?this.textConfig:n.textConfig),ut(this.textConfig,r.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<sb.length;c++){var f=sb[c],h=o&&LJ[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:a&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,s)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Vl,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ut(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=In;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new nP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,s=he(o,t);s>=0&&o.splice(s,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],s=0;s<i;s++){var a=n[s];!t||t===a.scope?a.stop(r):o.push(a)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){ab(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){ab(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=ab(this,r,n,i),s=0;s<o.length;s++)o[s].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=In;function r(n,i,o,s){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];a(this,l)}return this[i]},set:function(l){this[o]=l[0],this[s]=l[1],this[i]=l,a(this,l)}});function a(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Hi(sP,Xi);Hi(sP,Vl);function ab(e,t,r,n,i){r=r||{};var o=[];O7(e,"",e,t,r,n,o,i);var s=o.length,a=!1,l=r.done,u=r.aborted,c=function(){a=!0,s--,s<=0&&(a?l&&l():u&&u())},f=function(){s--,s<=0&&(a?l&&l():u&&u())};s||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function lb(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function RJ(e){return Zr(e[0])}function DJ(e,t,r){if(Zr(t[r]))if(Zr(e[r])||(e[r]=[]),Nn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),lb(e[r],t[r],n))}else{var i=t[r],o=e[r],s=i.length;if(RJ(i))for(var a=i[0].length,l=0;l<s;l++)o[l]?lb(o[l],i[l],a):o[l]=Array.prototype.slice.call(i[l]);else lb(o,i,s);o.length=i.length}else e[r]=t[r]}function NJ(e,t){return e===t||Zr(e)&&Zr(t)&&FJ(e,t)}function FJ(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function O7(e,t,r,n,i,o,s,a){for(var l=ge(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Dt(o),p=e.animators,v=[],m=0;m<l.length;m++){var g=l[m],y=n[g];if(y!=null&&r[g]!=null&&(d||o[g]))if(Dt(y)&&!Zr(y)&&!n_(y)){if(t){a||(r[g]=y,e.updateDuringAnimation(t));continue}O7(e,g,r[g],y,i,o&&o[g],s,a)}else v.push(g);else a||(r[g]=y,e.updateDuringAnimation(t),v.push(g))}var b=v.length;if(!f&&b)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var k=he(p,T);p.splice(k,1)}}}if(i.force||(v=Mr(v,function(L){return!NJ(n[L],r[L])}),b=v.length),b>0||i.force&&!s.length){var x=void 0,A=void 0,I=void 0;if(a){A={},h&&(x={});for(var w=0;w<b;w++){var g=v[w];A[g]=r[g],h?x[g]=n[g]:r[g]=n[g]}}else if(h){I={};for(var w=0;w<b;w++){var g=v[w];I[g]=Dd(r[g]),DJ(r,n,g)}}var T=new nP(r,!1,!1,f?Mr(p,function(N){return N.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&x&&T.whenWithKeys(0,x,v),I&&T.whenWithKeys(0,I,v),T.whenWithKeys(u==null?500:u,a?A:n,v).delay(c||0),e.addAnimator(T,t),s.push(T)}}const R7=sP;var D7=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=he(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var s=this.__zr;s&&o.removeSelfFromZr(s),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=he(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var s=i[o];r.call(n,s,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],s=r.call(n,o);o.isGroup&&!s&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ce(0,0,0,0),i=r||this._children,o=[],s=null,a=0;a<i.length;a++){var l=i[a];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ce.applyTransform(n,u,c),s=s||n.clone(),s.union(n)):(s=s||u.clone(),s.union(u))}}return s||n},t}(R7);D7.prototype.type="group";const Ne=D7;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var em={},N7={};function $J(e){delete N7[e]}function zJ(e){if(!e)return!1;if(typeof e=="string")return Wm(e,1)<i3;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Wm(t[i].color,1);return r/=n,r<i3}return!1}var BJ=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new JK,s=n.renderer||"canvas";em[s]||(s=ge(em)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var a=new em[s](r,o,n,t),l=n.ssr||a.ssrOnly;this.storage=o,this.painter=a;var u=!Kt.node&&!Kt.worker&&!l?new MJ(a.getViewportRoot(),a.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Kt.touchEventsSupported:!!c,h=44,d;f&&(d=Qt(n.pointerSize,h)),this.handler=new XK(o,a,u,a.root,d),this.animation=new wJ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=zJ(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=Dc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=Dc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Ne&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,$J(this.id)},e}();function I4(e,t){var r=new BJ(u7(),e,t);return N7[r.id]=r,r}function VJ(e,t){em[e]=t}var L4=1e-4,F7=20;function UJ(e){return e.replace(/^\s+|\s+$/g,"")}function bs(e,t,r,n){var i=t[0],o=t[1],s=r[0],a=r[1],l=o-i,u=a-s;if(l===0)return u===0?s:(s+a)/2;if(n)if(l>0){if(e<=i)return s;if(e>=o)return a}else{if(e>=i)return s;if(e<=o)return a}else{if(e===i)return s;if(e===o)return a}return(e-i)/l*u+s}function Ke(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Mt(e)?UJ(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function tr(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),F7),e=(+e).toFixed(t),r?e:+e}function Hm(e){return e.sort(function(t,r){return t-r}),e}function Ao(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return WJ(e)}function WJ(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),s=o<0?0:i-1-o;return Math.max(0,s-n)}function jJ(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),s=Math.min(Math.max(-i+o,0),20);return isFinite(s)?s:20}function GJ(e,t){var r=Math.max(Ao(e),Ao(t)),n=e+t;return r>F7?n:tr(n,r)}function $7(e){var t=Math.PI*2;return(e%t+t)%t}function Xm(e){return e>-L4&&e<L4}var HJ=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ws(e){if(e instanceof Date)return e;if(Mt(e)){var t=HJ.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function XJ(e){return Math.pow(10,aP(e))}function aP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function z7(e,t){var r=aP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function O4(e){e.sort(function(l,u){return a(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,s=0;s<2;s++)i[s]<=t&&(i[s]=t,o[s]=s?1:1-r),t=i[s],r=o[s];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function a(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&a(l,u,1))}}function La(e){var t=parseFloat(e);return t==e&&(t!==0||!Mt(e)||e.indexOf("x")<=0)?t:NaN}function YJ(e){return!isNaN(La(e))}function B7(){return Math.round(Math.random()*9)}function V7(e,t){return t===0?e:V7(t,e%t)}function R4(e,t){return e==null?t:t==null?e:e*t/V7(e,t)}function se(e){throw new Error(e)}function D4(e,t,r){return(t-e)*r+e}var U7="series\0",qJ="\0_ec_\0";function er(e){return e instanceof Array?e:e==null?[]:[e]}function a3(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var N4=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Yp(e){return Dt(e)&&!pt(e)&&!(e instanceof Date)?e.value:e}function ZJ(e){return Dt(e)&&!(e instanceof Array)}function KJ(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var s=Yt();$(t,function(l,u){if(!Dt(l)){t[u]=null;return}});var a=JJ(e,s,r);return(n||i)&&QJ(a,e,s,t),n&&tQ(a,t),n||i?eQ(a,t,i):o&&rQ(a,t),nQ(a),a}function JJ(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||fp(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function QJ(e,t,r,n){$(n,function(i,o){if(!(!i||i.id==null)){var s=Nd(i.id),a=r.get(s);if(a!=null){var l=e[a];Ui(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=t[a],n[o]=null}}})}function tQ(e,t){$(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!fp(r)&&!fp(o)&&W7("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function eQ(e,t,r){$(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||fp(i.existing)||i.existing&&n.id!=null&&!W7("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function rQ(e,t){$(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function nQ(e){var t=Yt();$(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),$(e,function(r){var n=r.newOption;Ui(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),$(e,function(r,n){var i=r.existing,o=r.newOption,s=r.keyInfo;if(!!Dt(o)){if(s.name=o.name!=null?Nd(o.name):i?i.name:U7+n,i)s.id=Nd(i.id);else if(o.id!=null)s.id=Nd(o.id);else{var a=0;do s.id="\0"+s.name+"\0"+a++;while(t.get(s.id))}t.set(s.id,r)}})}function W7(e,t,r){var n=ii(t[e],null),i=ii(r[e],null);return n!=null&&i!=null&&n===i}function Nd(e){return ii(e,"")}function ii(e,t){return e==null?t:Mt(e)?e:Te(e)||US(e)?e+"":t}function lP(e){var t=e.name;return!!(t&&t.indexOf(U7))}function fp(e){return e&&e.id!=null&&Nd(e.id).indexOf(qJ)===0}function iQ(e,t,r){$(e,function(n){var i=n.newOption;Dt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=oQ(t,i,n.existing,r))})}function oQ(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function sQ(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(s,a,l){for(var u=0,c=s.length;u<c;u++){var f=ii(s[u].seriesId,null);if(f==null)return;for(var h=er(s[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var m=h[p];d&&d[m]?d[m]=null:(a[f]||(a[f]={}))[m]=1}}}function o(s,a){var l=[];for(var u in s)if(s.hasOwnProperty(u)&&s[u]!=null)if(a)l.push(+u);else{var c=o(s[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function cu(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return pt(t.dataIndex)?It(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return pt(t.name)?It(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Re(){var e="__ec_inner_"+aQ++;return function(t){return t[e]||(t[e]={})}}var aQ=B7();function ub(e,t,r){var n=uP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,s=n.others,a=s,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=qp(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});a[c+"Models"]=f.models,a[c+"Model"]=f.models[0]}),a}function uP(e,t){var r;if(Mt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=Yt(),o={},s=!1;return $(r,function(a,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=a;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&he(t.includeMainTypes,c)<0)){s=s||!!c;var h=i.get(c)||i.set(c,{});h[f]=a}}),{mainTypeSpecified:s,queryOptionMap:i,others:o}}var Li={useDefault:!0,enableAll:!1,enableNone:!1};function qp(e,t,r,n){n=n||Li;var i=r.index,o=r.id,s=r.name,a={models:null,specified:i!=null||o!=null||s!=null};if(!a.specified){var l=void 0;return a.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],a}return i==="none"||i===!1?(Ui(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(i==="all"&&(Ui(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=s=null),a.models=e.queryComponents({mainType:t,index:i,id:o,name:s}),a)}function j7(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function lQ(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function uQ(e){return e==="auto"?Kt.domSupported?"html":"richText":e||"html"}function cQ(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(Te(n)){var s=D4(r||0,n,i);return tr(s,o?Math.max(Ao(r||0),Ao(n)):t)}else{if(Mt(n))return i<1?r:n;for(var a=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")a[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],s=D4(d,p,i);a[f]=tr(s,o?Math.max(Ao(d),Ao(p)):t)}}return a}}var fQ=".",ul="___EC__COMPONENT__CONTAINER___",G7="___EC__EXTENDED_CLASS___";function Mo(e){var t={main:"",sub:""};if(e){var r=e.split(fQ);t.main=r[0]||"",t.sub=r[1]||""}return t}function hQ(e){Ui(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function dQ(e){return!!(e&&e[G7])}function cP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return pQ(n)?i=function(o){St(s,o);function s(){return o.apply(this,arguments)||this}return s}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},fK(i,this)),ut(i.prototype,r),i[G7]=!0,i.extend=this.extend,i.superCall=mQ,i.superApply=_Q,i.superClass=n,i}}function pQ(e){return Ht(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function H7(e,t){e.extend=t.extend}var vQ=Math.round(Math.random()*10);function gQ(e){var t=["__\0is_clz",vQ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function mQ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function _Q(e,t,r){return this.superClass.prototype[t].apply(e,r)}function s_(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){hQ(i),n.prototype.type=i;var o=Mo(i);if(!o.sub)t[o.main]=n;else if(o.sub!==ul){var s=r(o);s[o.sub]=n}}return n},e.getClass=function(n,i,o){var s=t[n];if(s&&s[ul]&&(s=i?s[i]:null),o&&!s)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return s},e.getClassesByMainType=function(n){var i=Mo(n),o=[],s=t[i.main];return s&&s[ul]?$(s,function(a,l){l!==ul&&o.push(a)}):o.push(s),o},e.hasClass=function(n){var i=Mo(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return $(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=Mo(n),o=t[i.main];return o&&o[ul]};function r(n){var i=t[n.main];return(!i||!i[ul])&&(i=t[n.main]={},i[ul]=!0),i}}function hp(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var s={},a=0;a<e.length;a++){var l=e[a][1];if(!(i&&he(i,l)>=0||o&&he(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(s[e[a][0]]=u)}}return s}}var yQ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],bQ=hp(yQ),wQ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return bQ(this,t,r)},e}(),l3=new Xp(50);function SQ(e){if(typeof e=="string"){var t=l3.get(e);return t&&t.image}else return e}function X7(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=l3.get(e),s={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!a_(t)&&o.pending.push(s)):(t=Tu.loadImage(e,F4,F4),t.__zrImageSrc=e,l3.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}else return e;else return t}function F4(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function a_(e){return e&&e.width&&e.height}var cb=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function TQ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=Y7(t,r,n,i);for(var s=0,a=o.length;s<a;s++)o[s]=q7(o[s],i);return o.join(`
`)}function Y7(e,t,r,n){n=n||{};var i=ut({},n);i.font=t,r=Qt(r,"..."),i.maxIterations=Qt(n.maxIterations,2);var o=i.minChar=Qt(n.minChar,0);i.cnCharWidth=On("\u56FD",t);var s=i.ascCharWidth=On("a",t);i.placeholder=Qt(n.placeholder,"");for(var a=e=Math.max(0,e-1),l=0;l<o&&a>=s;l++)a-=s;var u=On(r,t);return u>a&&(r="",u=0),a=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=a,i.containerWidth=e,i}function q7(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=On(e,n);if(o<=r)return e;for(var s=0;;s++){if(o<=i||s>=t.maxIterations){e+=t.ellipsis;break}var a=s===0?kQ(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,a),o=On(e,n)}return e===""&&(e=t.placeholder),e}function kQ(e,t,r,n){for(var i=0,o=0,s=e.length;o<s&&i<t;o++){var a=e.charCodeAt(o);i+=0<=a&&a<=127?r:n}return o}function PQ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",s=oP(i),a=Qt(t.lineHeight,s),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?Z7(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*a,d=Qt(t.height,h);if(h>d&&u){var p=Math.floor(d/a);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=Y7(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<f.length;m++)f[m]=q7(f[m],v);for(var g=d,y=0,m=0;m<f.length;m++)y=Math.max(On(f[m],i),y);c==null&&(c=y);var b=y;return n&&(g+=n[0]+n[2],b+=n[1]+n[3],c+=n[1]+n[3]),l&&(b=c),{lines:f,height:d,outerWidth:b,outerHeight:g,lineHeight:a,calculatedLineHeight:s,contentWidth:y,contentHeight:h,width:c}}var CQ=function(){function e(){}return e}(),$4=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),EQ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function AQ(e,t){var r=new EQ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,s=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,a=cb.lastIndex=0,l;(l=cb.exec(e))!=null;){var u=l.index;u>a&&fb(r,e.substring(a,u),t,s),fb(r,l[2],t,s,l[1]),a=cb.lastIndex}a<e.length&&fb(r,e.substring(a,e.length),t,s);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function m(q,rt,At){q.width=rt,q.lineHeight=At,f+=At,h=Math.max(h,rt)}t:for(var g=0;g<r.lines.length;g++){for(var y=r.lines[g],b=0,w=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],k=S.styleName&&t.rich[S.styleName]||{},x=S.textPadding=k.padding,A=x?x[1]+x[3]:0,I=S.font=k.font||t.font;S.contentHeight=oP(I);var L=Qt(k.height,S.contentHeight);if(S.innerHeight=L,x&&(L+=x[0]+x[2]),S.height=L,S.lineHeight=Od(k.lineHeight,t.lineHeight,L),S.align=k&&k.align||t.align,S.verticalAlign=k&&k.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),m(y,w,b),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break t}var N=k.width,z=N==null||N==="auto";if(typeof N=="string"&&N.charAt(N.length-1)==="%")S.percentWidth=N,c.push(S),S.contentWidth=On(S.text,I);else{if(z){var V=k.backgroundColor,F=V&&V.image;F&&(F=SQ(F),a_(F)&&(S.width=Math.max(S.width,F.width*L/F.height)))}var G=p&&n!=null?n-w:null;G!=null&&G<S.width?!z||G<A?(S.text="",S.width=S.contentWidth=0):(S.text=TQ(S.text,G-A,I,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=On(S.text,I)):S.contentWidth=On(S.text,I)}S.width+=A,w+=S.width,k&&(b=Math.max(b,S.lineHeight))}m(y,w,b)}r.outerWidth=r.width=Qt(n,h),r.outerHeight=r.height=Qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var S=c[g],K=S.percentWidth;S.width=parseInt(K,10)/100*r.width}return r}function fb(e,t,r,n,i){var o=t==="",s=i&&r.rich[i]||{},a=e.lines,l=s.font||r.font,u=!1,c,f;if(n){var h=s.padding,d=h?h[1]+h[3]:0;if(s.width!=null&&s.width!=="auto"){var p=ys(s.width,n.width)+d;a.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=Z7(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],y=new CQ;if(y.styleName=i,y.text=g,y.isLineHolder=!g&&!o,typeof s.width=="number"?y.width=s.width:y.width=f?f[m]:On(g,l),!m&&!u){var b=(a[a.length-1]||(a[0]=new $4)).tokens,w=b.length;w===1&&b[0].isLineHolder?b[0]=y:(g||!w||o)&&b.push(y)}else a.push(new $4([y]))}}function MQ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var xQ=ku(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function IQ(e){return MQ(e)?!!xQ[e]:!0}function Z7(e,t,r,n,i){for(var o=[],s=[],a="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(a+=l,c+=u),o.push(a),s.push(c),a="",l="",u=0,c=0;continue}var d=On(h,t),p=n?!1:!IQ(h);if(o.length?c+d>r:i+c+d>r){c?(a||l)&&(p?(a||(a=l,l="",u=0,c=u),o.push(a),s.push(c-u),l+=h,u+=d,a="",c=u):(l&&(a+=l,l="",u=0),o.push(a),s.push(c),a=h,c=d)):p?(o.push(l),s.push(u),l=h,u=d):(o.push(h),s.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(a+=l,l="",u=0),a+=h)}return!o.length&&!a&&(a=e,l="",u=0),l&&(a+=l),a&&(o.push(a),s.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:s}}var u3="__zr_style_"+Math.round(Math.random()*10),Kl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},l_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Kl[u3]=!0;var z4=["z","z2","invisible"],LQ=["invisible"],OQ=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&RQ(this,r,n)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,s=o.shadowBlur||0,a=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ce(0,0,0,0)),n?ce.applyTransform(r,i,n):r.copy(i),(s||a||l)&&(r.width+=s*2+Math.abs(a),r.height+=s*2+Math.abs(l),r.x=Math.min(r.x,r.x+a-s),r.y=Math.min(r.y,r.y+l-s));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ce(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ut(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=cd,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&cd)},t.prototype.styleUpdated=function(){this.__dirty&=~cd},t.prototype.createStyle=function(r){return i_(Kl,r)},t.prototype.useStyle=function(r){r[u3]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[u3]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,z4)},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.style?s?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ge(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ge(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},a,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?LQ:z4,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ut(r,n),r},t.prototype.getAnimationStyleProps=function(){return l_},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=In|cd}(),t}(R7),hb=new ce(0,0,0,0),db=new ce(0,0,0,0);function RQ(e,t,r){return hb.copy(e.getBoundingRect()),e.transform&&hb.applyTransform(e.transform),db.width=t,db.height=r,!hb.intersect(db)}const Pu=OQ;var vn=Math.min,gn=Math.max,pb=Math.sin,vb=Math.cos,cl=Math.PI*2,W0=Af(),j0=Af(),G0=Af();function DQ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],s=n[1],a=n[1],l=1;l<e.length;l++)n=e[l],i=vn(i,n[0]),o=gn(o,n[0]),s=vn(s,n[1]),a=gn(a,n[1]);t[0]=i,t[1]=s,r[0]=o,r[1]=a}}function B4(e,t,r,n,i,o){i[0]=vn(e,r),i[1]=vn(t,n),o[0]=gn(e,r),o[1]=gn(t,n)}var V4=[],U4=[];function NQ(e,t,r,n,i,o,s,a,l,u){var c=P7,f=cr,h=c(e,r,i,s,V4);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,s,V4[d]);l[0]=vn(p,l[0]),u[0]=gn(p,u[0])}h=c(t,n,o,a,U4);for(var d=0;d<h;d++){var v=f(t,n,o,a,U4[d]);l[1]=vn(v,l[1]),u[1]=gn(v,u[1])}l[0]=vn(e,l[0]),u[0]=gn(e,u[0]),l[0]=vn(s,l[0]),u[0]=gn(s,u[0]),l[1]=vn(t,l[1]),u[1]=gn(t,u[1]),l[1]=vn(a,l[1]),u[1]=gn(a,u[1])}function FQ(e,t,r,n,i,o,s,a){var l=C7,u=Ur,c=gn(vn(l(e,r,i),1),0),f=gn(vn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);s[0]=vn(e,i,h),s[1]=vn(t,o,d),a[0]=gn(e,i,h),a[1]=gn(t,o,d)}function $Q(e,t,r,n,i,o,s,a,l){var u=Oc,c=Rc,f=Math.abs(i-o);if(f%cl<1e-4&&f>1e-4){a[0]=e-r,a[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(W0[0]=vb(i)*r+e,W0[1]=pb(i)*n+t,j0[0]=vb(o)*r+e,j0[1]=pb(o)*n+t,u(a,W0,j0),c(l,W0,j0),i=i%cl,i<0&&(i=i+cl),o=o%cl,o<0&&(o=o+cl),i>o&&!s?o+=cl:i<o&&s&&(i+=cl),s){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(G0[0]=vb(d)*r+e,G0[1]=pb(d)*n+t,u(a,G0,a),c(l,G0,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},fl=[],hl=[],io=[],zs=[],oo=[],so=[],gb=Math.min,mb=Math.max,dl=Math.cos,pl=Math.sin,qo=Math.abs,c3=Math.PI,ca=c3*2,_b=typeof Float32Array<"u",gh=[];function yb(e){var t=Math.round(e/c3*1e8)/1e8;return t%2*c3}function zQ(e,t){var r=yb(e[0]);r<0&&(r+=ca);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=ca?i=r+ca:t&&r-i>=ca?i=r-ca:!t&&r>i?i=r+(ca-yb(r-i)):t&&r<i&&(i=r-(ca-yb(i-r))),e[0]=r,e[1]=i}var BQ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=qo(n/jm/t)||0,this._uy=qo(n/jm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=qo(t-this._xi),i=qo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var s=n*n+i*i;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=s)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,s){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,s),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,s),this._xi=o,this._yi=s,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,s){this._drawPendingPt(),gh[0]=i,gh[1]=o,zQ(gh,s),i=gh[0],o=gh[1];var a=o-i;return this.addData(ye.A,t,r,n,n,i,a,0,s?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,s),this._xi=dl(o)*n+t,this._yi=pl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&_b&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();_b&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var s=t[o].data,a=0;a<s.length;a++)this.data[i++]=s[a];this._len=i},e.prototype.addData=function(t,r,n,i,o,s,a,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,_b&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){io[0]=io[1]=oo[0]=oo[1]=Number.MAX_VALUE,zs[0]=zs[1]=so[0]=so[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,s;for(s=0;s<this._len;){var a=t[s++],l=s===1;switch(l&&(r=t[s],n=t[s+1],i=r,o=n),a){case ye.M:r=i=t[s++],n=o=t[s++],oo[0]=i,oo[1]=o,so[0]=i,so[1]=o;break;case ye.L:B4(r,n,t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.C:NQ(r,n,t[s++],t[s++],t[s++],t[s++],t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.Q:FQ(r,n,t[s++],t[s++],t[s],t[s+1],oo,so),r=t[s++],n=t[s++];break;case ye.A:var u=t[s++],c=t[s++],f=t[s++],h=t[s++],d=t[s++],p=t[s++]+d;s+=1;var v=!t[s++];l&&(i=dl(d)*f+u,o=pl(d)*h+c),$Q(u,c,f,h,d,p,v,oo,so),r=dl(p)*f+u,n=pl(p)*h+c;break;case ye.R:i=r=t[s++],o=n=t[s++];var m=t[s++],g=t[s++];B4(i,o,i+m,o+g,oo,so);break;case ye.Z:r=i,n=o;break}Oc(io,io,oo),Rc(zs,zs,so)}return s===0&&(io[0]=io[1]=zs[0]=zs[1]=0),new ce(io[0],io[1],zs[0]-io[0],zs[1]-io[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,s=0,a=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],s=t[h+1],a=o,l=s);var v=-1;switch(d){case ye.M:o=a=t[h++],s=l=t[h++];break;case ye.L:{var m=t[h++],g=t[h++],y=m-o,b=g-s;(qo(y)>n||qo(b)>i||h===r-1)&&(v=Math.sqrt(y*y+b*b),o=m,s=g);break}case ye.C:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++],S=t[h++],k=t[h++];v=tJ(o,s,w,T,m,g,S,k,10),o=S,s=k;break}case ye.Q:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++];v=nJ(o,s,w,T,m,g,10),o=m,s=g;break}case ye.A:var x=t[h++],A=t[h++],I=t[h++],L=t[h++],N=t[h++],z=t[h++],V=z+N;h+=1,t[h++],p&&(a=dl(N)*I+x,l=pl(N)*L+A),v=mb(I,L)*gb(ca,Math.abs(z)),o=dl(V)*I+x,s=pl(V)*L+A;break;case ye.R:{a=o=t[h++],l=s=t[h++];var F=t[h++],G=t[h++];v=F*2+G*2;break}case ye.Z:{var y=a-o,b=l-s;v=Math.sqrt(y*y+b*b),o=a,s=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,s=this._len,a,l,u,c,f,h,d=r<1,p,v,m=0,g=0,y,b=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y))return;t:for(var S=0;S<s;){var k=n[S++],x=S===1;switch(x&&(u=n[S],c=n[S+1],a=u,l=c),k!==ye.L&&b>0&&(t.lineTo(w,T),b=0),k){case ye.M:a=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=qo(f-u),I=qo(h-c);if(A>i||I>o){if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;t.lineTo(u*(1-N)+f*N,c*(1-N)+h*N);break t}m+=L}t.lineTo(f,h),u=f,c=h,b=0}else{var z=A*A+I*I;z>b&&(w=f,T=h,b=z)}break}case ye.C:{var V=n[S++],F=n[S++],G=n[S++],K=n[S++],q=n[S++],rt=n[S++];if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;Vm(u,V,G,q,N,fl),Vm(c,F,K,rt,N,hl),t.bezierCurveTo(fl[1],hl[1],fl[2],hl[2],fl[3],hl[3]);break t}m+=L}t.bezierCurveTo(V,F,G,K,q,rt),u=q,c=rt;break}case ye.Q:{var V=n[S++],F=n[S++],G=n[S++],K=n[S++];if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;Um(u,V,G,N,fl),Um(c,F,K,N,hl),t.quadraticCurveTo(fl[1],hl[1],fl[2],hl[2]);break t}m+=L}t.quadraticCurveTo(V,F,G,K),u=G,c=K;break}case ye.A:var At=n[S++],Nt=n[S++],Pt=n[S++],Ct=n[S++],Zt=n[S++],Y=n[S++],ot=n[S++],J=!n[S++],yt=Pt>Ct?Pt:Ct,Et=qo(Pt-Ct)>.001,xt=Zt+Y,ft=!1;if(d){var L=p[g++];m+L>y&&(xt=Zt+Y*(y-m)/L,ft=!0),m+=L}if(Et&&t.ellipse?t.ellipse(At,Nt,Pt,Ct,ot,Zt,xt,J):t.arc(At,Nt,yt,Zt,xt,J),ft)break t;x&&(a=dl(Zt)*Pt+At,l=pl(Zt)*Ct+Nt),u=dl(xt)*Pt+At,c=pl(xt)*Ct+Nt;break;case ye.R:a=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var vt=n[S++],B=n[S++];if(d){var L=p[g++];if(m+L>y){var j=y-m;t.moveTo(f,h),t.lineTo(f+gb(j,vt),h),j-=vt,j>0&&t.lineTo(f+vt,h+gb(j,B)),j-=B,j>0&&t.lineTo(f+mb(vt-j,0),h+B),j-=vt,j>0&&t.lineTo(f,h+mb(B-j,0));break t}m+=L}t.rect(f,h,vt,B);break;case ye.Z:if(d){var L=p[g++];if(m+L>y){var N=(y-m)/L;t.lineTo(u*(1-N)+a*N,c*(1-N)+l*N);break t}m+=L}t.closePath(),u=a,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const fu=BQ;function Ju(e,t,r,n,i,o,s){if(i===0)return!1;var a=i,l=0,u=e;if(s>t+a&&s>n+a||s<t-a&&s<n-a||o>e+a&&o>r+a||o<e-a&&o<r-a)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=a/2;var c=l*o-s+u,f=c*c/(l*l+1);return f<=a/2*a/2}function VQ(e,t,r,n,i,o,s,a,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>a+f||c<t-f&&c<n-f&&c<o-f&&c<a-f||u>e+f&&u>r+f&&u>i+f&&u>s+f||u<e-f&&u<r-f&&u<i-f&&u<s-f)return!1;var h=QK(e,t,r,n,i,o,s,a,u,c,null);return h<=f/2}function UQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||a>e+u&&a>r+u&&a>i+u||a<e-u&&a<r-u&&a<i-u)return!1;var c=rJ(e,t,r,n,i,o,a,l,null);return c<=u/2}var W4=Math.PI*2;function H0(e){return e%=W4,e<0&&(e+=W4),e}var mh=Math.PI*2;function WQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;a-=e,l-=t;var c=Math.sqrt(a*a+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%mh<1e-4)return!0;if(o){var f=n;n=H0(i),i=H0(f)}else n=H0(n),i=H0(i);n>i&&(i+=mh);var h=Math.atan2(l,a);return h<0&&(h+=mh),h>=n&&h<=i||h+mh>=n&&h+mh<=i}function vl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var s=(o-t)/(n-t),a=n<t?1:-1;(s===1||s===0)&&(a=n<t?.5:-.5);var l=s*(r-e)+e;return l===i?1/0:l>i?a:0}var Bs=fu.CMD,gl=Math.PI*2,jQ=1e-4;function GQ(e,t){return Math.abs(e-t)<jQ}var rn=[-1,-1,-1],Kn=[-1,-1];function HQ(){var e=Kn[0];Kn[0]=Kn[1],Kn[1]=e}function XQ(e,t,r,n,i,o,s,a,l,u){if(u>t&&u>n&&u>o&&u>a||u<t&&u<n&&u<o&&u<a)return 0;var c=Bm(t,n,o,a,u,rn);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=rn[v],g=m===0||m===1?.5:1,y=cr(e,r,i,s,m);y<l||(h<0&&(h=P7(t,n,o,a,Kn),Kn[1]<Kn[0]&&h>1&&HQ(),d=cr(t,n,o,a,Kn[0]),h>1&&(p=cr(t,n,o,a,Kn[1]))),h===2?m<Kn[0]?f+=d<t?g:-g:m<Kn[1]?f+=p<d?g:-g:f+=a<p?g:-g:m<Kn[0]?f+=d<t?g:-g:f+=a<d?g:-g)}return f}function YQ(e,t,r,n,i,o,s,a){if(a>t&&a>n&&a>o||a<t&&a<n&&a<o)return 0;var l=eJ(t,n,o,a,rn);if(l===0)return 0;var u=C7(t,n,o);if(u>=0&&u<=1){for(var c=0,f=Ur(t,n,o,u),h=0;h<l;h++){var d=rn[h]===0||rn[h]===1?.5:1,p=Ur(e,r,i,rn[h]);p<s||(rn[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=rn[0]===0||rn[0]===1?.5:1,p=Ur(e,r,i,rn[0]);return p<s?0:o<t?d:-d}}function qQ(e,t,r,n,i,o,s,a){if(a-=t,a>r||a<-r)return 0;var l=Math.sqrt(r*r-a*a);rn[0]=-l,rn[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=gl-1e-4){n=0,i=gl;var c=o?1:-1;return s>=rn[0]+e&&s<=rn[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=gl,i+=gl);for(var h=0,d=0;d<2;d++){var p=rn[d];if(p+e>s){var v=Math.atan2(a,p),c=o?1:-1;v<0&&(v=gl+v),(v>=n&&v<=i||v+gl>=n&&v+gl<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function K7(e,t,r,n,i){for(var o=e.data,s=e.len(),a=0,l=0,u=0,c=0,f=0,h,d,p=0;p<s;){var v=o[p++],m=p===1;switch(v===Bs.M&&p>1&&(r||(a+=vl(l,u,c,f,n,i))),m&&(l=o[p],u=o[p+1],c=l,f=u),v){case Bs.M:c=o[p++],f=o[p++],l=c,u=f;break;case Bs.L:if(r){if(Ju(l,u,o[p],o[p+1],t,n,i))return!0}else a+=vl(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.C:if(r){if(VQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=XQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.Q:if(r){if(UQ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=YQ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Bs.A:var g=o[p++],y=o[p++],b=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var k=!!(1-o[p++]);h=Math.cos(T)*b+g,d=Math.sin(T)*w+y,m?(c=h,f=d):a+=vl(l,u,h,d,n,i);var x=(n-g)*w/b+g;if(r){if(WQ(g,y,w,T,T+S,k,t,x,i))return!0}else a+=qQ(g,y,w,T,T+S,k,x,i);l=Math.cos(T+S)*b+g,u=Math.sin(T+S)*w+y;break;case Bs.R:c=l=o[p++],f=u=o[p++];var A=o[p++],I=o[p++];if(h=c+A,d=f+I,r){if(Ju(c,f,h,f,t,n,i)||Ju(h,f,h,d,t,n,i)||Ju(h,d,c,d,t,n,i)||Ju(c,d,c,f,t,n,i))return!0}else a+=vl(h,f,h,d,n,i),a+=vl(c,d,c,f,n,i);break;case Bs.Z:if(r){if(Ju(l,u,c,f,t,n,i))return!0}else a+=vl(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!GQ(u,f)&&(a+=vl(l,u,c,f,n,i)||0),a!==0}function ZQ(e,t,r){return K7(e,0,!1,t,r)}function KQ(e,t,r,n){return K7(e,t,!0,r,n)}var J7=ie({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Kl),JQ={style:ie({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},l_.style)},bb=Ro.concat(["invisible","culling","z","z2","zlevel","parent"]),QQ=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var s in n)o[s]!==n[s]&&(o[s]=n[s]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var a=0;a<bb.length;++a)i[bb[a]]=this[bb[a]];i.__dirty|=In}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ge(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var s=n[o],a=r[s];s==="style"?this.style?ut(this.style,a):this.useStyle(a):s==="shape"?ut(this.shape,a):e.prototype.attrKV.call(this,s,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Mt(r)){var n=Wm(r,0);return n>.5?o3:n>.2?xJ:s3}else if(r)return s3}return o3},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Mt(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),s=Wm(r,0)<i3;if(o===s)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~Mc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new fu(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var s=this.path;(o||this.__dirty&Mc)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),r=s.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){a.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(a.width+=u/l,a.height+=u/l,a.x-=u/l/2,a.y-=u/l/2)}return a}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),s=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var a=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),KQ(a,l/u,r,n)))return!0}if(this.hasFill())return ZQ(a,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Mc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ut(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Mc)},t.prototype.createStyle=function(r){return i_(J7,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ut({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.shape?s?o?u=n.shape:(u=ut({},i.shape),ut(u,n.shape)):(u=ut({},o?this.shape:i.shape),ut(u,n.shape)):l&&(u=i.shape),u)if(s){this.shape=ut({},this.shape);for(var c={},f=ge(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},a)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return JQ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ee(s,o);function s(a){var l=o.call(this,a)||this;return r.init&&r.init.call(l,a),l}return s.prototype.getDefaultStyle=function(){return Wt(r.style)},s.prototype.getDefaultShape=function(){return Wt(r.shape)},s}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=In|cd|Mc}(),t}(Pu);const pe=QQ;var ttt=ie({strokeFirst:!0,font:lu,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},J7),Q7=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return i_(ttt,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=iP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Pu);Q7.prototype.type="tspan";const f3=Q7;var ett=ie({x:0,y:0},Kl),rtt={style:ie({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},l_.style)};function ntt(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var tN=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return i_(ett,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=ntt(n.image)?n.image:this.__image;if(!o)return 0;var s=r==="width"?"height":"width",a=n[s];return a==null?o[r]:o[r]/o[s]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return rtt},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ce(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Pu);tN.prototype.type="image";const Ms=tN;function itt(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,s=t.r,a,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof s=="number"?a=l=u=c=s:s instanceof Array?s.length===1?a=l=u=c=s[0]:s.length===2?(a=u=s[0],l=c=s[1]):s.length===3?(a=s[0],l=c=s[1],u=s[2]):(a=s[0],l=s[1],u=s[2],c=s[3]):a=l=u=c=0;var f;a+l>i&&(f=a+l,a*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),a+c>o&&(f=a+c,a*=o/f,c*=o/f),e.moveTo(r+a,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+a),a!==0&&e.arc(r+a,n+a,a,Math.PI,Math.PI*1.5)}var Nc=Math.round;function eN(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,s=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=s;var a=r&&r.lineWidth;return a&&(Nc(n*2)===Nc(i*2)&&(e.x1=e.x2=Ul(n,a,!0)),Nc(o*2)===Nc(s*2)&&(e.y1=e.y2=Ul(o,a,!0))),e}}function rN(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,s=t.height;e.x=n,e.y=i,e.width=o,e.height=s;var a=r&&r.lineWidth;return a&&(e.x=Ul(n,a,!0),e.y=Ul(i,a,!0),e.width=Math.max(Ul(n+o,a,!1)-e.x,o===0?0:1),e.height=Math.max(Ul(i+s,a,!1)-e.y,s===0?0:1)),e}}function Ul(e,t,r){if(!t)return e;var n=Nc(e*2);return(n+Nc(t))%2===0?n/2:(n+(r?1:-1))/2}var ott=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),stt={},nN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ott},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=rN(stt,n,this.style);i=l.x,o=l.y,s=l.width,a=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,s=n.width,a=n.height;n.r?itt(r,n):r.rect(i,o,s,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(pe);nN.prototype.type="rect";const rr=nN;var j4={fill:"#000"},G4=2,att={style:ie({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},l_.style)},iN=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=j4,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,htt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ce(0,0,0,0),n=this._children,i=[],o=null,s=0;s<n.length;s++){var a=n[s],l=a.getBoundingRect(),u=a.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||j4},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ut(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ge(n),o=0;o<i.length;o++){var s=i[o];r[s]=r[s]||{},ut(r[s],n[s])}},t.prototype.getAnimationStyleProps=function(){return att},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||lu,i=r.padding,o=J4(r),s=PQ(o,r),a=wb(r),l=!!r.backgroundColor,u=s.outerHeight,c=s.outerWidth,f=s.contentWidth,h=s.lines,d=s.lineHeight,p=this._defaultStyle,v=r.x||0,m=r.y||0,g=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",b=v,w=xc(m,s.contentHeight,y);if(a||i){var T=hd(v,c,g),S=xc(m,u,y);a&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(b=K4(v,g,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var k=0,x=!1,A=Z4("fill"in r?r.fill:(x=!0,p.fill)),I=q4("stroke"in r?r.stroke:!l&&(!p.autoStroke||x)?(k=G4,p.stroke):null),L=r.textShadowBlur>0,N=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),z=s.calculatedLineHeight,V=0;V<h.length;V++){var F=this._getOrCreateChild(f3),G=F.createStyle();F.useStyle(G),G.text=h[V],G.x=b,G.y=w,g&&(G.textAlign=g),G.textBaseline="middle",G.opacity=r.opacity,G.strokeFirst=!0,L&&(G.shadowBlur=r.textShadowBlur||0,G.shadowColor=r.textShadowColor||"transparent",G.shadowOffsetX=r.textShadowOffsetX||0,G.shadowOffsetY=r.textShadowOffsetY||0),G.stroke=I,G.fill=A,I&&(G.lineWidth=r.lineWidth||k,G.lineDash=r.lineDash,G.lineDashOffset=r.lineDashOffset||0),G.font=n,X4(G,r),w+=d,N&&F.setBoundingRect(new ce(hd(G.x,r.width,G.textAlign),xc(G.y,z,G.textBaseline),f,z))}},t.prototype._updateRichTexts=function(){var r=this.style,n=J4(r),i=AQ(n,r),o=i.width,s=i.outerWidth,a=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=hd(u,s,h),v=xc(c,a,d),m=p,g=v;l&&(m+=l[3],g+=l[0]);var y=m+o;wb(r)&&this._renderBackground(r,r,p,v,s,a);for(var b=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,k=S.length,x=T.lineHeight,A=T.width,I=0,L=m,N=y,z=k-1,V=void 0;I<k&&(V=S[I],!V.align||V.align==="left");)this._placeToken(V,r,x,g,L,"left",b),A-=V.width,L+=V.width,I++;for(;z>=0&&(V=S[z],V.align==="right");)this._placeToken(V,r,x,g,N,"right",b),A-=V.width,N-=V.width,z--;for(L+=(o-(L-m)-(y-N)-A)/2;I<=z;)V=S[I],this._placeToken(V,r,x,g,L+V.width/2,"center",b),L+=V.width,I++;g+=x}},t.prototype._placeToken=function(r,n,i,o,s,a,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&wb(u);h&&this._renderBackground(u,n,a==="right"?s-r.width:a==="center"?s-r.width/2:s,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(s=K4(s,a,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(f3),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,y=!1,b=0,w=Z4("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,g.fill)),T=q4("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!g.autoStroke||y)?(b=G4,g.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;m.text=r.text,m.x=s,m.y=f,S&&(m.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,m.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),m.textAlign=a,m.textBaseline="middle",m.font=r.font||lu,m.opacity=Od(u.opacity,n.opacity,1),X4(m,u),T&&(m.lineWidth=Od(u.lineWidth,n.lineWidth,b),m.lineDash=Qt(u.lineDash,n.lineDash),m.lineDashOffset=n.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=r.contentWidth,x=r.contentHeight;v.setBoundingRect(new ce(hd(m.x,k,m.textAlign),xc(m.y,x,m.textBaseline),k,x))},t.prototype._renderBackground=function(r,n,i,o,s,a){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,m;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(rr),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=o,g.width=s,g.height=a,g.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=Qt(r.fillOpacity,1)}else if(f){m=this._getOrCreateChild(Ms),m.onload=function(){p.dirtyStyle()};var b=m.style;b.image=l.image,b.x=i,b.y=o,b.width=s,b.height=a}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=Qt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=Od(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return ftt(r)&&(n=[r.fontStyle,r.fontWeight,ctt(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Eo(n)||r.textFont||r.font},t}(Pu),ltt={left:!0,right:1,center:1},utt={top:1,bottom:1,middle:1},H4=["fontStyle","fontWeight","fontSize","fontFamily"];function ctt(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Yk+"px":e+"px"}function X4(e,t){for(var r=0;r<H4.length;r++){var n=H4[r],i=t[n];i!=null&&(e[n]=i)}}function ftt(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function htt(e){return Y4(e),$(e.rich,Y4),e}function Y4(e){if(e){e.font=iN.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||ltt[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||utt[r]?r:"top";var n=e.padding;n&&(e.padding=c7(e.padding))}}function q4(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Z4(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function K4(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function J4(e){var t=e.text;return t!=null&&(t+=""),t}function wb(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const nr=iN;var le=Re(),dtt=function(e,t,r,n){if(n){var i=le(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var s=le(o);s.seriesIndex=e,s.dataIndex=r,s.dataType=t})}},Q4=1,tM={},oN=Re(),fP=Re(),hP=0,Zp=1,u_=2,li=["emphasis","blur","select"],eM=["normal","emphasis","blur","select"],ptt=10,vtt=9,Jl="highlight",rm="downplay",Fd="select",nm="unselect",$d="toggleSelect";function Qu(e){return e!=null&&e!=="none"}var rM=new Xp(100);function nM(e){if(Mt(e)){var t=rM.get(e);return t||(t=b4(e,-.1),rM.put(e,t)),t}else if(n_(e)){var r=ut({},e);return r.colorStops=It(e.colorStops,function(n){return{offset:n.offset,color:b4(n.color,-.1)}}),r}return e}function c_(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function sN(e){c_(e,"emphasis",u_)}function aN(e){e.hoverState===u_&&c_(e,"normal",hP)}function dP(e){c_(e,"blur",Zp)}function lN(e){e.hoverState===Zp&&c_(e,"normal",hP)}function gtt(e){e.selected=!0}function mtt(e){e.selected=!1}function iM(e,t,r){t(e,r)}function xs(e,t,r){iM(e,t,r),e.isGroup&&e.traverse(function(n){iM(n,t,r)})}function h3(e,t){switch(t){case"emphasis":e.hoverState=u_;break;case"normal":e.hoverState=hP;break;case"blur":e.hoverState=Zp;break;case"select":e.selected=!0}}function _tt(e,t,r,n){for(var i=e.style,o={},s=0;s<t.length;s++){var a=t[s],l=i[a];o[a]=l==null?n&&n[a]:l}for(var s=0;s<e.animators.length;s++){var u=e.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function ytt(e,t,r,n){var i=r&&he(r,"select")>=0,o=!1;if(e instanceof pe){var s=oN(e),a=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(Qu(a)||Qu(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ut({},n),u=ut({},u),u.fill=a):!Qu(u.fill)&&Qu(a)?(o=!0,n=ut({},n),u=ut({},u),u.fill=nM(a)):!Qu(u.stroke)&&Qu(l)&&(o||(n=ut({},n),u=ut({},u)),u.stroke=nM(l)),n.style=u}}if(n&&n.z2==null){o||(n=ut({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:ptt)}return n}function btt(e,t,r){if(r&&r.z2==null){r=ut({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:vtt)}return r}function wtt(e,t,r){var n=he(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:_tt(e,["opacity"],t,{opacity:1});r=r||{};var s=r.style||{};return s.opacity==null&&(r=ut({},r),s=ut({opacity:n?i:o.opacity*.1},s),r.style=s),r}function Sb(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return ytt(this,e,t,r);if(e==="blur")return wtt(this,e,r);if(e==="select")return btt(this,e,r)}return r}function pP(e){e.stateProxy=Sb;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Sb),r&&(r.stateProxy=Sb)}function oM(e,t){!hN(e,t)&&!e.__highByOuter&&xs(e,sN)}function sM(e,t){!hN(e,t)&&!e.__highByOuter&&xs(e,aN)}function dp(e,t){e.__highByOuter|=1<<(t||0),xs(e,sN)}function pp(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&xs(e,aN)}function uN(e){xs(e,dP)}function vP(e){xs(e,lN)}function cN(e){xs(e,gtt)}function fN(e){xs(e,mtt)}function hN(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function dN(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var s=fP(o),a=i==="series",l=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&n.push(l),s.isBlured&&(l.group.traverse(function(u){lN(u)}),a&&r.push(o)),s.isBlured=!1}),$(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function d3(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&vP(h)}}if(e!=null&&!(!t||t==="none")){var s=i.getSeriesByIndex(e),a=s.coordinateSystem;a&&a.master&&(a=a.master);var l=[];i.eachSeries(function(u){var c=s===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&a?f===a:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(m){dP(m)}),Zr(t))o(u.getData(),t);else if(Dt(t))for(var p=ge(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),fP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function p3(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){fP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){dP(o)})}}}function Stt(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=cu(i,t);o=(pt(o)?o[0]:o)||0;var s=i.getItemGraphicEl(o);if(!s)for(var a=i.count(),l=0;!s&&l<a;)s=i.getItemGraphicEl(l++);if(s){var u=le(s);d3(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&d3(n,c,f,r)}}}function gP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var s=n.getViewOfComponentModel(o);if(!s||!s.findHighDownDispatchers)return i;for(var a=s.findHighDownDispatchers(r),l,u=0;u<a.length;u++)if(le(a[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:a}}function Ttt(e,t,r){var n=le(e),i=gP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,s=i.focusSelf;o?(s&&p3(n.componentMainType,n.componentIndex,r),$(o,function(a){return oM(a,t)})):(d3(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&p3(n.componentMainType,n.componentIndex,r),oM(e,t))}function ktt(e,t,r){dN(r);var n=le(e),i=gP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?$(i,function(o){return sM(o,t)}):sM(e,t)}function Ptt(e,t,r){if(!!m3(t)){var n=t.dataType,i=e.getData(n),o=cu(i,t);pt(o)||(o=[o]),e[t.type===$d?"toggleSelect":t.type===Fd?"select":"unselect"](o,n)}}function aM(e){var t=e.getAllData();$(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,s){e.isSelected(s,i)?cN(o):fN(o)})})}function Ctt(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();$(n,function(i){i.data;var o=i.type,s=r.getSelectedDataIndices();if(s.length>0){var a={dataIndex:s,seriesIndex:r.seriesIndex};o!=null&&(a.dataType=o),t.push(a)}})}),t}function v3(e,t,r){mP(e,!0),xs(e,pP),Att(e,t,r)}function Ett(e){mP(e,!1)}function hu(e,t,r,n){n?Ett(e):v3(e,t,r)}function Att(e,t,r){var n=le(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var lM=["emphasis","blur","select"],Mtt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function vp(e,t,r,n){r=r||"itemStyle";for(var i=0;i<lM.length;i++){var o=lM[i],s=t.getModel([o,r]),a=e.ensureState(o);a.style=n?n(s):s[Mtt[r]]()}}function mP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function g3(e){return!!(e&&e.__highDownDispatcher)}function xtt(e){var t=tM[e];return t==null&&Q4<=32&&(t=tM[e]=Q4++),t}function m3(e){var t=e.type;return t===Fd||t===nm||t===$d}function uM(e){var t=e.type;return t===Jl||t===rm}function Itt(e){var t=oN(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var tc=fu.CMD,Ltt=[[],[],[]],cM=Math.sqrt,Ott=Math.atan2;function Rtt(e,t){if(!!t){var r=e.data,n=e.len(),i,o,s,a,l,u,c=tc.M,f=tc.C,h=tc.L,d=tc.R,p=tc.A,v=tc.Q;for(s=0,a=0;s<n;){switch(i=r[s++],a=s,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var m=t[4],g=t[5],y=cM(t[0]*t[0]+t[1]*t[1]),b=cM(t[2]*t[2]+t[3]*t[3]),w=Ott(-t[1]/b,t[0]/y);r[s]*=y,r[s++]+=m,r[s]*=b,r[s++]+=g,r[s++]*=y,r[s++]*=b,r[s++]+=w,r[s++]+=w,s+=2,a=s;break;case d:u[0]=r[s++],u[1]=r[s++],sn(u,u,t),r[a++]=u[0],r[a++]=u[1],u[0]+=r[s++],u[1]+=r[s++],sn(u,u,t),r[a++]=u[0],r[a++]=u[1]}for(l=0;l<o;l++){var T=Ltt[l];T[0]=r[s++],T[1]=r[s++],sn(T,T,t),r[a++]=T[0],r[a++]=T[1]}}e.increaseVersion()}}var Tb=Math.sqrt,X0=Math.sin,Y0=Math.cos,_h=Math.PI;function fM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function _3(e,t){return(e[0]*t[0]+e[1]*t[1])/(fM(e)*fM(t))}function hM(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(_3(e,t))}function dM(e,t,r,n,i,o,s,a,l,u,c){var f=l*(_h/180),h=Y0(f)*(e-r)/2+X0(f)*(t-n)/2,d=-1*X0(f)*(e-r)/2+Y0(f)*(t-n)/2,p=h*h/(s*s)+d*d/(a*a);p>1&&(s*=Tb(p),a*=Tb(p));var v=(i===o?-1:1)*Tb((s*s*(a*a)-s*s*(d*d)-a*a*(h*h))/(s*s*(d*d)+a*a*(h*h)))||0,m=v*s*d/a,g=v*-a*h/s,y=(e+r)/2+Y0(f)*m-X0(f)*g,b=(t+n)/2+X0(f)*m+Y0(f)*g,w=hM([1,0],[(h-m)/s,(d-g)/a]),T=[(h-m)/s,(d-g)/a],S=[(-1*h-m)/s,(-1*d-g)/a],k=hM(T,S);if(_3(T,S)<=-1&&(k=_h),_3(T,S)>=1&&(k=0),k<0){var x=Math.round(k/_h*1e6)/1e6;k=_h*2+x%2*_h}c.addData(u,y,b,s,a,w,k,f,o)}var Dtt=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Ntt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Ftt(e){var t=new fu;if(!e)return t;var r=0,n=0,i=r,o=n,s,a=fu.CMD,l=e.match(Dtt);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(Ntt)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,x=r,A=n,I=void 0,L=void 0;switch(f){case"l":r+=d[m++],n+=d[m++],h=a.L,t.addData(h,r,n);break;case"L":r=d[m++],n=d[m++],h=a.L,t.addData(h,r,n);break;case"m":r+=d[m++],n+=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[m++],n=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[m++],h=a.L,t.addData(h,r,n);break;case"H":r=d[m++],h=a.L,t.addData(h,r,n);break;case"v":n+=d[m++],h=a.L,t.addData(h,r,n);break;case"V":n=d[m++],h=a.L,t.addData(h,r,n);break;case"C":h=a.C,t.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),r=d[m-2],n=d[m-1];break;case"c":h=a.C,t.addData(h,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n),r+=d[m-2],n+=d[m-1];break;case"S":g=r,y=n,I=t.len(),L=t.data,s===a.C&&(g+=r-L[I-4],y+=n-L[I-3]),h=a.C,x=d[m++],A=d[m++],r=d[m++],n=d[m++],t.addData(h,g,y,x,A,r,n);break;case"s":g=r,y=n,I=t.len(),L=t.data,s===a.C&&(g+=r-L[I-4],y+=n-L[I-3]),h=a.C,x=r+d[m++],A=n+d[m++],r+=d[m++],n+=d[m++],t.addData(h,g,y,x,A,r,n);break;case"Q":x=d[m++],A=d[m++],r=d[m++],n=d[m++],h=a.Q,t.addData(h,x,A,r,n);break;case"q":x=d[m++]+r,A=d[m++]+n,r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,x,A,r,n);break;case"T":g=r,y=n,I=t.len(),L=t.data,s===a.Q&&(g+=r-L[I-4],y+=n-L[I-3]),r=d[m++],n=d[m++],h=a.Q,t.addData(h,g,y,r,n);break;case"t":g=r,y=n,I=t.len(),L=t.data,s===a.Q&&(g+=r-L[I-4],y+=n-L[I-3]),r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,g,y,r,n);break;case"A":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],x=r,A=n,r=d[m++],n=d[m++],h=a.A,dM(x,A,r,n,S,k,b,w,T,h,t);break;case"a":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],x=r,A=n,r+=d[m++],n+=d[m++],h=a.A,dM(x,A,r,n,S,k,b,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=a.Z,t.addData(h),r=i,n=o),s=h}return t.toStatic(),t}var pN=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(pe);function vN(e){return e.setData!=null}function gN(e,t){var r=Ftt(e),n=ut({},t);return n.buildPath=function(i){if(vN(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){Rtt(r,i),this.dirtyShape()},n}function $tt(e,t){return new pN(gN(e,t))}function ztt(e,t){var r=gN(e,t),n=function(i){Ee(o,i);function o(s){var a=i.call(this,s)||this;return a.applyTransform=r.applyTransform,a.buildPath=r.buildPath,a}return o}(pN);return n}function Btt(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var s=new pe(t);return s.createPathProxy(),s.buildPath=function(a){if(vN(a)){a.appendPath(r);var l=a.getContext();l&&a.rebuildPath(l,1)}},s}var Vtt=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),mN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Vtt},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(pe);mN.prototype.type="circle";const _P=mN;var Utt=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),_N=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Utt},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,s=n.cy,a=n.rx,l=n.ry,u=a*i,c=l*i;r.moveTo(o-a,s),r.bezierCurveTo(o-a,s-c,o-u,s-l,o,s-l),r.bezierCurveTo(o+u,s-l,o+a,s-c,o+a,s),r.bezierCurveTo(o+a,s+c,o+u,s+l,o,s+l),r.bezierCurveTo(o-u,s+l,o-a,s+c,o-a,s),r.closePath()},t}(pe);_N.prototype.type="ellipse";const yN=_N;var bN=Math.PI,kb=bN*2,ml=Math.sin,ec=Math.cos,Wtt=Math.acos,$r=Math.atan2,pM=Math.abs,zd=Math.sqrt,dd=Math.max,ao=Math.min,Si=1e-4;function jtt(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=f*l-c*u;if(!(h*h<Si))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function q0(e,t,r,n,i,o,s){var a=e-r,l=t-n,u=(s?o:-o)/zd(a*a+l*l),c=u*l,f=-u*a,h=e+c,d=t+f,p=r+c,v=n+f,m=(h+p)/2,g=(d+v)/2,y=p-h,b=v-d,w=y*y+b*b,T=i-o,S=h*v-p*d,k=(b<0?-1:1)*zd(dd(0,T*T*w-S*S)),x=(S*b-y*k)/w,A=(-S*y-b*k)/w,I=(S*b+y*k)/w,L=(-S*y+b*k)/w,N=x-m,z=A-g,V=I-m,F=L-g;return N*N+z*z>V*V+F*F&&(x=I,A=L),{cx:x,cy:A,x0:-c,y0:-f,x1:x*(i/T-1),y1:A*(i/T-1)}}function Gtt(e){var t;if(pt(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Htt(e,t){var r,n=dd(t.r,0),i=dd(t.r0||0,0),o=n>0,s=i>0;if(!(!o&&!s)){if(o||(n=i,i=0),i>n){var a=n;n=i,i=a}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=pM(u-l),p=d>kb&&d%kb;if(p>Si&&(d=p),!(n>Si))e.moveTo(c,f);else if(d>kb-Si)e.moveTo(c+n*ec(l),f+n*ml(l)),e.arc(c,f,n,l,u,!h),i>Si&&(e.moveTo(c+i*ec(u),f+i*ml(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,m=void 0,g=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,x=void 0,A=void 0,I=void 0,L=void 0,N=void 0,z=void 0,V=void 0,F=n*ec(l),G=n*ml(l),K=i*ec(u),q=i*ml(u),rt=d>Si;if(rt){var At=t.cornerRadius;At&&(r=Gtt(At),v=r[0],m=r[1],g=r[2],y=r[3]);var Nt=pM(n-i)/2;if(b=ao(Nt,g),w=ao(Nt,y),T=ao(Nt,v),S=ao(Nt,m),A=k=dd(b,w),I=x=dd(T,S),(k>Si||x>Si)&&(L=n*ec(u),N=n*ml(u),z=i*ec(l),V=i*ml(l),d<bN)){var Pt=jtt(F,G,z,V,L,N,K,q);if(Pt){var Ct=F-Pt[0],Zt=G-Pt[1],Y=L-Pt[0],ot=N-Pt[1],J=1/ml(Wtt((Ct*Y+Zt*ot)/(zd(Ct*Ct+Zt*Zt)*zd(Y*Y+ot*ot)))/2),yt=zd(Pt[0]*Pt[0]+Pt[1]*Pt[1]);A=ao(k,(n-yt)/(J+1)),I=ao(x,(i-yt)/(J-1))}}}if(!rt)e.moveTo(c+F,f+G);else if(A>Si){var Et=ao(g,A),xt=ao(y,A),ft=q0(z,V,F,G,n,Et,h),vt=q0(L,N,K,q,n,xt,h);e.moveTo(c+ft.cx+ft.x0,f+ft.cy+ft.y0),A<k&&Et===xt?e.arc(c+ft.cx,f+ft.cy,A,$r(ft.y0,ft.x0),$r(vt.y0,vt.x0),!h):(Et>0&&e.arc(c+ft.cx,f+ft.cy,Et,$r(ft.y0,ft.x0),$r(ft.y1,ft.x1),!h),e.arc(c,f,n,$r(ft.cy+ft.y1,ft.cx+ft.x1),$r(vt.cy+vt.y1,vt.cx+vt.x1),!h),xt>0&&e.arc(c+vt.cx,f+vt.cy,xt,$r(vt.y1,vt.x1),$r(vt.y0,vt.x0),!h))}else e.moveTo(c+F,f+G),e.arc(c,f,n,l,u,!h);if(!(i>Si)||!rt)e.lineTo(c+K,f+q);else if(I>Si){var Et=ao(v,I),xt=ao(m,I),ft=q0(K,q,L,N,i,-xt,h),vt=q0(F,G,z,V,i,-Et,h);e.lineTo(c+ft.cx+ft.x0,f+ft.cy+ft.y0),I<x&&Et===xt?e.arc(c+ft.cx,f+ft.cy,I,$r(ft.y0,ft.x0),$r(vt.y0,vt.x0),!h):(xt>0&&e.arc(c+ft.cx,f+ft.cy,xt,$r(ft.y0,ft.x0),$r(ft.y1,ft.x1),!h),e.arc(c,f,i,$r(ft.cy+ft.y1,ft.cx+ft.x1),$r(vt.cy+vt.y1,vt.cx+vt.x1),h),Et>0&&e.arc(c+vt.cx,f+vt.cy,Et,$r(vt.y1,vt.x1),$r(vt.y0,vt.x0),!h))}else e.lineTo(c+K,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var Xtt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),wN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Xtt},t.prototype.buildPath=function(r,n){Htt(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(pe);wN.prototype.type="sector";const Kp=wN;var Ytt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),SN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ytt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,s,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,s,!0)},t}(pe);SN.prototype.type="ring";const TN=SN;function qtt(e,t,r,n){var i=[],o=[],s=[],a=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)Oc(c,c,e[h]),Rc(f,f,e[h]);Oc(c,c,n[0]),Rc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(_K(e[h]));continue}else l=e[h-1],u=e[h+1];p7(o,u,l),By(o,o,t);var v=jS(p,l),m=jS(p,u),g=v+m;g!==0&&(v/=g,m/=g),By(s,o,-v),By(a,o,m);var y=o4([],p,s),b=o4([],p,a);n&&(Rc(y,y,c),Oc(y,y,f),Rc(b,b,c),Oc(b,b,f)),i.push(y),i.push(b)}return r&&i.push(i.shift()),i}function kN(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=qtt(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,a=0;a<(r?s:s-1);a++){var l=o[a*2],u=o[a*2+1],c=i[(a+1)%s];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var a=1,f=i.length;a<f;a++)e.lineTo(i[a][0],i[a][1])}r&&e.closePath()}}var Ztt=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),PN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Ztt},t.prototype.buildPath=function(r,n){kN(r,n,!0)},t}(pe);PN.prototype.type="polygon";const gp=PN;var Ktt=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),CN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ktt},t.prototype.buildPath=function(r,n){kN(r,n,!1)},t}(pe);CN.prototype.type="polyline";const EN=CN;var Jtt={},Qtt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),AN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Qtt},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=eN(Jtt,n,this.style);i=l.x1,o=l.y1,s=l.x2,a=l.y2}else i=n.x1,o=n.y1,s=n.x2,a=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(s=i*(1-u)+s*u,a=o*(1-u)+a*u),r.lineTo(s,a))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(pe);AN.prototype.type="line";const Oa=AN;var hn=[],tet=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function vM(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?m4:cr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?m4:cr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?_4:Ur)(e.x1,e.cpx1,e.x2,t),(r?_4:Ur)(e.y1,e.cpy1,e.y2,t)]}var MN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tet},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,s=n.x2,a=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Um(i,l,s,h,hn),l=hn[1],s=hn[2],Um(o,u,a,h,hn),u=hn[1],a=hn[2]),r.quadraticCurveTo(l,u,s,a)):(h<1&&(Vm(i,l,c,s,h,hn),l=hn[1],c=hn[2],s=hn[3],Vm(o,u,f,a,h,hn),u=hn[1],f=hn[2],a=hn[3]),r.bezierCurveTo(l,u,c,f,s,a)))},t.prototype.pointAt=function(r){return vM(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=vM(this.shape,r,!0);return Qk(n,n)},t}(pe);MN.prototype.type="bezier-curve";const f_=MN;var eet=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),xN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new eet},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r,0),a=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(a),f=Math.sin(a);r.moveTo(c*s+i,f*s+o),r.arc(i,o,s,a,l,!u)},t}(pe);xN.prototype.type="arc";const yP=xN;var ret=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),pe.prototype.getBoundingRect.call(this)},t}(pe);const net=ret;var iet=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const IN=iet;var oet=function(e){Ee(t,e);function t(r,n,i,o,s,a){var l=e.call(this,s)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=a||!1,l}return t}(IN);const bP=oet;var set=function(e){Ee(t,e);function t(r,n,i,o,s){var a=e.call(this,o)||this;return a.x=r==null?.5:r,a.y=n==null?.5:n,a.r=i==null?.5:i,a.type="radial",a.global=s||!1,a}return t}(IN);const aet=set;var _l=[0,0],yl=[0,0],Z0=new Ie,K0=new Ie,uet=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Ie;for(var n=0;n<2;n++)this._axes[n]=new Ie;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,s=t.y,a=o+t.width,l=s+t.height;if(n[0].set(o,s),n[1].set(a,s),n[2].set(a,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);Ie.sub(i[0],n[1],n[0]),Ie.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Z0.set(1/0,1/0),K0.set(0,0),!this._intersectCheckOneSide(this,t,Z0,K0,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Z0,K0,i,-1)&&(n=!1,i)||i||Ie.copy(r,n?Z0:K0),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,s){for(var a=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,_l),this._getProjMinMaxOnAxis(l,r._corners,yl),_l[1]<yl[0]||_l[0]>yl[1]){if(a=!1,o)return a;var c=Math.abs(yl[0]-_l[1]),f=Math.abs(_l[0]-yl[1]);Math.min(c,f)>i.len()&&(c<f?Ie.scale(i,u,-c*s):Ie.scale(i,u,f*s))}else if(n){var c=Math.abs(yl[0]-_l[1]),f=Math.abs(_l[0]-yl[1]);Math.min(c,f)<n.len()&&(c<f?Ie.scale(n,u,c*s):Ie.scale(n,u,-f*s))}}return a},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,s=r[0].dot(i)+o[t],a=s,l=s,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];a=Math.min(c,a),l=Math.max(c,l)}n[0]=a,n[1]=l},e}();const Ym=uet;var cet=[],fet=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ce(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(cet)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var a=this._displayables[s];if(a.contain(r,n))return!0}return!1},t}(Pu);const het=fet;var det=Re();function wP(e,t,r,n,i){var o;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();o=s&&s.animation}var a=t&&t.isAnimationEnabled(),l=e==="update";if(a){var u=void 0,c=void 0,f=void 0;n?(u=Qt(n.duration,200),c=Qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ht(f)&&(f=f(r,i)),Ht(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function SP(e,t,r,n,i,o,s){var a=!1,l;Ht(i)?(s=o,o=i,i=null):Dt(i)&&(o=i.cb,s=i.during,a=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=wP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!s,setToFinal:!u,scope:e,during:s};a?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!a&&t.attr(r),s&&s(1),o&&o()}function br(e,t,r,n,i,o){SP("update",e,t,r,n,i,o)}function Do(e,t,r,n,i,o){SP("enter",e,t,r,n,i,o)}function Bd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function du(e,t,r,n,i,o){Bd(e)||SP("leave",e,t,r,n,i,o)}function gM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),du(e,{style:{opacity:0}},t,r,n)}function y3(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||gM(i,t,r,n)}):gM(e,t,r,n)}function LN(e){det(e).oldStyle=e.style}var qm=Math.max,Zm=Math.min,b3={};function pet(e){return pe.extend(e)}var vet=ztt;function get(e,t){return vet(e,t)}function Yi(e,t){b3[e]=t}function ON(e){if(b3.hasOwnProperty(e))return b3[e]}function h_(e,t,r,n){var i=$tt(e,t);return r&&(n==="center"&&(r=DN(r,i.getBoundingRect())),NN(i,r)),i}function RN(e,t,r){var n=new Ms({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(DN(t,o))}}});return n}function DN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,s=e.y+e.height/2;return{x:o-n/2,y:s-i/2,width:n,height:i}}var met=Btt;function NN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function mp(e,t){return eN(e,e,{lineWidth:t}),e}function _et(e){return rN(e.shape,e.shape,e.style),e}var yet=Ul;function im(e,t){for(var r=eP([]);e&&e!==t;)Xc(r,e.getLocalTransform(),r),e=e.parent;return r}function qc(e,t,r){return t&&!Zr(t)&&(t=Vl.getLocalTransform(t)),r&&(t=o_([],t)),sn([],e,t)}function FN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=qc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function mM(e){return!e.isGroup}function bet(e){return e.shape!=null}function $N(e,t,r){if(!e||!t)return;function n(s){var a={};return s.traverse(function(l){mM(l)&&l.anid&&(a[l.anid]=l)}),a}function i(s){var a={x:s.x,y:s.y,rotation:s.rotation};return bet(s)&&(a.shape=ut({},s.shape)),a}var o=n(e);t.traverse(function(s){if(mM(s)&&s.anid){var a=o[s.anid];if(a){var l=i(s);s.attr(i(a)),br(s,l,r,le(s).dataIndex)}}})}function wet(e,t){return It(e,function(r){var n=r[0];n=qm(n,t.x),n=Zm(n,t.x+t.width);var i=r[1];return i=qm(i,t.y),i=Zm(i,t.y+t.height),[n,i]})}function Tet(e,t){var r=qm(e.x,t.x),n=Zm(e.x+e.width,t.x+t.width),i=qm(e.y,t.y),o=Zm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function TP(e,t,r){var n=ut({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),ie(i,r),new Ms(n)):h_(e.replace("path://",""),n,r,"center")}function ket(e,t,r,n,i){for(var o=0,s=i[i.length-1];o<i.length;o++){var a=i[o];if(zN(e,t,r,n,a[0],a[1],s[0],s[1]))return!0;s=a}}function zN(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=Pb(c,f,l,u);if(Pet(h))return!1;var d=e-i,p=t-o,v=Pb(d,p,l,u)/h;if(v<0||v>1)return!1;var m=Pb(d,p,c,f)/h;return!(m<0||m>1)}function Pb(e,t,r,n){return e*n-r*t}function Pet(e){return e<=1e-6&&e>=-1e-6}function kP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Mt(t)?{formatter:t}:t,o=r.mainType,s=r.componentIndex,a={componentType:o,name:n,$vars:["name"]};a[o+"Index"]=s;var l=e.formatterParamsExtra;l&&$(ge(l),function(c){_t(a,c)||(a[c]=l[c],a.$vars.push(c))});var u=le(e.el);u.componentMainType=o,u.componentIndex=s,u.tooltipConfig={name:n,option:ie({content:n,formatterParams:a},i)}}function _M(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Mf(e,t){if(e)if(pt(e))for(var r=0;r<e.length;r++)_M(e[r],t);else _M(e,t)}Yi("circle",_P);Yi("ellipse",yN);Yi("sector",Kp);Yi("ring",TN);Yi("polygon",gp);Yi("polyline",EN);Yi("rect",rr);Yi("line",Oa);Yi("bezierCurve",f_);Yi("arc",yP);const Cet=Object.freeze(Object.defineProperty({__proto__:null,updateProps:br,initProps:Do,removeElement:du,removeElementWithFadeOut:y3,isElementRemoved:Bd,extendShape:pet,extendPath:get,registerShape:Yi,getShapeClass:ON,makePath:h_,makeImage:RN,mergePath:met,resizePath:NN,subPixelOptimizeLine:mp,subPixelOptimizeRect:_et,subPixelOptimize:yet,getTransform:im,applyTransform:qc,transformDirection:FN,groupTransition:$N,clipPointsByRect:wet,clipRectByRect:Tet,createIcon:TP,linePolygonIntersect:ket,lineLineIntersect:zN,setTooltipConfig:kP,traverseElements:Mf,Group:Ne,Image:Ms,Text:nr,Circle:_P,Ellipse:yN,Sector:Kp,Ring:TN,Polygon:gp,Polyline:EN,Rect:rr,Line:Oa,BezierCurve:f_,Arc:yP,IncrementalDisplayable:het,CompoundPath:net,LinearGradient:bP,RadialGradient:aet,BoundingRect:ce,OrientedBoundingRect:Ym,Point:Ie,Path:pe},Symbol.toStringTag,{value:"Module"}));var d_={};function Eet(e,t){for(var r=0;r<li.length;r++){var n=li[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function yM(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,s=t.normal,a;n&&(a=n.getFormattedLabel(i,"normal",null,o,s&&s.get("formatter"),r!=null?{interpolatedValue:r}:null)),a==null&&(a=Ht(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:a},u=0;u<li.length;u++){var c=li[u],f=t[c];l[c]=Qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,a)}return l}function xf(e,t,r,n){r=r||d_;for(var i=e instanceof nr,o=!1,s=0;s<eM.length;s++){var a=t[eM[s]];if(a&&a.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new nr,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=yM(r,t),c=t.normal,f=!!c.getShallow("show"),h=yn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Km(c,r,!1));for(var s=0;s<li.length;s++){var d=li[s],a=t[d];if(a){var p=l.ensureState(d),v=!!Qt(a.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=yn(a,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var m=e.ensureState(d);m.textConfig=Km(a,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(p_(l).setLabelText=function(g){var y=yM(r,t,g);Eet(l,y)})}else l&&(l.ignore=!0);e.dirty()}function Cu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<li.length;n++){var i=li[n];r[i]=e.getModel([i,t])}return r}function yn(e,t,r,n,i){var o={};return Aet(o,e,r,n,i),t&&ut(o,t),o}function Km(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),s=Qt(e.getShallow("distance"),r?null:5),a=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),a!=null&&(n.offset=a),o!=null&&(o*=Math.PI/180,n.rotation=o),s!=null&&(n.distance=s),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function Aet(e,t,r,n,i){r=r||d_;var o=t.ecModel,s=o&&o.option.textStyle,a=Met(t),l;if(a){l={};for(var u in a)if(a.hasOwnProperty(u)){var c=t.getModel(["rich",u]);TM(l[u]={},c,s,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),TM(e,t,s,r,n,i,!0,!1)}function Met(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||d_).rich;if(r){t=t||{};for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var bM=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],wM=["align","lineHeight","width","height","tag","verticalAlign"],SM=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function TM(e,t,r,n,i,o,s,a){r=!i&&r||d_;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=Qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=Qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=Qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=Qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!a&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<bM.length;v++){var m=bM[v],g=Qt(t.getShallow(m),r[m]);g!=null&&(e[m]=g)}for(var v=0;v<wM.length;v++){var m=wM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!s||!n.disableBox){for(var v=0;v<SM.length;v++){var m=SM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}var b=t.getShallow("borderType");b!=null&&(e.borderDash=b),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function BN(e,t){var r=t&&t.getModel("textStyle");return Eo([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var p_=Re();function xet(e,t,r,n){if(!!e){var i=p_(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var Iet=["textStyle","color"],Cb=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],Eb=new nr,Let=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Iet):null)},e.prototype.getFont=function(){return BN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Cb.length;n++)r[Cb[n]]=this.getShallow(Cb[n]);return Eb.useStyle(r),Eb.update(),Eb.getBoundingRect()},e}();const Oet=Let;var VN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Ret=hp(VN),Det=function(){function e(){}return e.prototype.getLineStyle=function(t){return Ret(this,t)},e}(),UN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Net=hp(UN),Fet=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Net(this,t,r)},e}(),Eu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){ue(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Wt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Kt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();cP(Eu);gQ(Eu);Hi(Eu,Det);Hi(Eu,Fet);Hi(Eu,wQ);Hi(Eu,Oet);const Ir=Eu;var $et=Math.round(Math.random()*10);function v_(e){return[e||"",$et++].join("_")}function zet(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Mo(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=Mo(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function Bet(e,t){e.topologicalTravel=function(o,s,a,l){if(!o.length)return;var u=r(s),c=u.graph,f=u.noEntryList,h={};for($(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(a.call(l,d,p.originalDeps.slice()),delete h[d]),$(p.successor,v?g:m)}$(h,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function g(y){h[y]=!0,m(y)}};function r(o){var s={},a=[];return $(o,function(l){var u=n(s,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&a.push(l),$(f,function(h){he(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(s,h);he(d.successor,h)<0&&d.successor.push(l)})}),{graph:s,noEntryList:a}}function n(o,s){return o[s]||(o[s]={predecessor:[],successor:[]}),o[s]}function i(o,s){var a=[];return $(o,function(l){he(s,l)>=0&&a.push(l)}),a}}function g_(e,t){return ue(ue({},e,!0),t,!0)}const Vet={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Uet={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Jm="ZH",PP="EN",_p=PP,om={},CP={},WN=Kt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Jm)>-1?Jm:_p}():_p;function jN(e,t){e=e.toUpperCase(),CP[e]=new Ir(t),om[e]=t}function Wet(e){if(Mt(e)){var t=om[e.toUpperCase()]||{};return e===Jm||e===PP?Wt(t):ue(Wt(t),Wt(om[_p]),!1)}else return ue(Wt(e),Wt(om[_p]),!1)}function jet(e){return CP[e]}function Get(){return CP[_p]}jN(PP,Vet);jN(Jm,Uet);var EP=1e3,AP=EP*60,Vd=AP*60,ri=Vd*24,kM=ri*365,pd={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},J0="{yyyy}-{MM}-{dd}",PM={year:"{yyyy}",month:"{yyyy}-{MM}",day:J0,hour:J0+" "+pd.hour,minute:J0+" "+pd.minute,second:J0+" "+pd.second,millisecond:pd.none},Ab=["year","month","day","hour","minute","second","millisecond"],GN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function bl(e,t){return e+="","0000".substr(0,t-e.length)+e}function Zc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Het(e){return e===Zc(e)}function Xet(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function m_(e,t,r,n){var i=ws(e),o=i[MP(r)](),s=i[Kc(r)]()+1,a=Math.floor((s-1)/3)+1,l=i[__(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[yp(r)](),f=(c-1)%12+1,h=i[y_(r)](),d=i[b_(r)](),p=i[w_(r)](),v=n instanceof Ir?n:jet(n||WN)||Get(),m=v.getModel("time"),g=m.get("month"),y=m.get("monthAbbr"),b=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,a+"").replace(/{MMMM}/g,g[s-1]).replace(/{MMM}/g,y[s-1]).replace(/{MM}/g,bl(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,bl(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,bl(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,bl(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,bl(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,bl(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,bl(p,3)).replace(/{S}/g,p+"")}function Yet(e,t,r,n,i){var o=null;if(Mt(r))o=r;else if(Ht(r))o=r(e.value,t,{level:e.level});else{var s=ut({},pd);if(e.level>0)for(var a=0;a<Ab.length;++a)s[Ab[a]]="{primary|"+s[Ab[a]]+"}";var l=r?r.inherit===!1?r:ie(r,s):s,u=HN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=GN.indexOf(u),a=c-1;a>=0;--a)if(l[u]){o=l[u];break}o=o||s.none}if(pt(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return m_(new Date(e.value),o,i,n)}function HN(e,t){var r=ws(e),n=r[Kc(t)]()+1,i=r[__(t)](),o=r[yp(t)](),s=r[y_(t)](),a=r[b_(t)](),l=r[w_(t)](),u=l===0,c=u&&a===0,f=c&&s===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function CM(e,t,r){var n=Te(e)?ws(e):e;switch(t=t||HN(e,r),t){case"year":return n[MP(r)]();case"half-year":return n[Kc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Kc(r)]()+1)/4);case"month":return n[Kc(r)]();case"day":return n[__(r)]();case"half-day":return n[yp(r)]()/24;case"hour":return n[yp(r)]();case"minute":return n[y_(r)]();case"second":return n[b_(r)]();case"millisecond":return n[w_(r)]()}}function MP(e){return e?"getUTCFullYear":"getFullYear"}function Kc(e){return e?"getUTCMonth":"getMonth"}function __(e){return e?"getUTCDate":"getDate"}function yp(e){return e?"getUTCHours":"getHours"}function y_(e){return e?"getUTCMinutes":"getMinutes"}function b_(e){return e?"getUTCSeconds":"getSeconds"}function w_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function qet(e){return e?"setUTCFullYear":"setFullYear"}function XN(e){return e?"setUTCMonth":"setMonth"}function YN(e){return e?"setUTCDate":"setDate"}function qN(e){return e?"setUTCHours":"setHours"}function ZN(e){return e?"setUTCMinutes":"setMinutes"}function KN(e){return e?"setUTCSeconds":"setSeconds"}function JN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function QN(e){if(!YJ(e))return Mt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function tF(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Jp=c7;function w3(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Eo(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=t==="time",a=e instanceof Date;if(s||a){var l=s?ws(e):e;if(isNaN(+l)){if(a)return"-"}else return m_(l,n,r)}if(t==="ordinal")return US(e)?i(e):Te(e)&&o(e)?e+"":"-";var u=La(e);return o(u)?QN(u):US(e)?i(e):typeof e=="boolean"?e+"":"-"}var EM=["a","b","c","d","e","f","g"],Mb=function(e,t){return"{"+e+(t==null?"":t)+"}"};function eF(e,t,r){pt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var s=EM[o];e=e.replace(Mb(s),Mb(s,0))}for(var a=0;a<n;a++)for(var l=0;l<i.length;l++){var u=t[a][i[l]];e=e.replace(Mb(EM[l],a),r?Qn(u):u)}return e}function Zet(e,t){var r=Mt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Qn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Qn(n)+";"+(t||"")+'"></span>';var s=r.markerId||"markerX";return{renderMode:o,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function pu(e,t){return t=t||"transparent",Mt(e)?e:Dt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function AM(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var sm=$,Ket=["left","right","top","bottom","width","height"],Q0=[["width","left","right"],["height","top","bottom"]];function xP(e,t,r,n,i){var o=0,s=0;n==null&&(n=1/0),i==null&&(i=1/0);var a=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,s+=a+r,a=c.height):a=Math.max(a,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=s+m,p>i||l.newline?(o+=a+r,s=0,p=m,a=c.width):a=Math.max(a,c.width)}l.newline||(l.x=o,l.y=s,l.markRedraw(),e==="horizontal"?o=d+r:s=p+r)})}var Jc=xP;we(xP,"vertical");we(xP,"horizontal");function Ra(e,t,r){r=Jp(r||0);var n=t.width,i=t.height,o=Ke(e.left,n),s=Ke(e.top,i),a=Ke(e.right,n),l=Ke(e.bottom,i),u=Ke(e.width,n),c=Ke(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-a-h-o),isNaN(c)&&(c=i-l-f-s),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-a-u-h),isNaN(s)&&(s=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":s=i/2-c/2-r[0];break;case"bottom":s=i-c-f;break}o=o||0,s=s||0,isNaN(u)&&(u=n-h-o-(a||0)),isNaN(c)&&(c=i-f-s-(l||0));var p=new ce(o+r[3],s+r[0],u,c);return p.margin=r,p}function Jet(e,t,r,n,i,o){var s=!i||!i.hv||i.hv[0],a=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!s&&!a)return!1;var u;if(l==="raw")u=e.type==="group"?new ce(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ra(ie({width:u.width,height:u.height},t),r,n),h=s?f.x-u.x:0,d=a?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function bp(e){var t=e.layoutMode||e.constructor.layoutMode;return Dt(t)?t:t?{type:t}:null}function ff(e,t,r){var n=r&&r.ignoreSize;!pt(n)&&(n=[n,n]);var i=s(Q0[0],0),o=s(Q0[1],1);u(Q0[0],e,i),u(Q0[1],e,o);function s(c,f){var h={},d=0,p={},v=0,m=2;if(sm(c,function(b){p[b]=e[b]}),sm(c,function(b){a(t,b)&&(h[b]=p[b]=t[b]),l(h,b)&&d++,l(p,b)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var y=c[g];if(!a(h,y)&&a(e,y)){h[y]=e[y];break}}return h}function a(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){sm(c,function(d){f[d]=h[d]})}}function S_(e){return Qet({},e)}function Qet(e,t){return t&&e&&sm(Ket,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var trt=Re(),If=function(e){St(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=v_("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=bp(this),o=i?S_(r):{},s=n.getTheme();ue(r,s.get(this.mainType)),ue(r,this.getDefaultOption()),i&&ff(r,o,i)},t.prototype.mergeOption=function(r,n){ue(this.option,r,!0);var i=bp(this);i&&ff(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!dQ(r))return r.defaultOption;var n=trt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var s=o.prototype.defaultOption;s&&i.push(s),o=o.superClass}for(var a={},l=i.length-1;l>=0;l--)a=ue(a,i[l],!0);n.defaultOption=a}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return qp(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Ir);H7(If,Ir);s_(If);zet(If);Bet(If,ert);function ert(e){var t=[];return $(If.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=It(t,function(r){return Mo(r).main}),e!=="dataset"&&he(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=If;var rF="";typeof navigator<"u"&&(rF=navigator.platform||"");var rc="rgba(0, 0, 0, 0.2)";const rrt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:rc,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:rc,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:rc,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:rc,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:rc,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:rc,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:rF.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var nF=Yt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),hi="original",ln="arrayRows",qi="objectRows",Is="keyedColumns",Pa="typedArray",iF="unknown",Io="column",Lf="row",En={Must:1,Might:2,Not:3},oF=Re();function nrt(e){oF(e).datasetMap=Yt()}function irt(e,t,r){var n={},i=sF(t);if(!i||!e)return n;var o=[],s=[],a=t.ecModel,l=oF(a).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),$(e,function(v,m){var g=Dt(v)?v:e[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),n[g.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});$(e,function(v,m){var g=v.name,y=p(v);if(c==null){var b=h.valueWayDim;d(n[g],b,y),d(s,b,y),h.valueWayDim+=y}else if(c===m)d(n[g],0,y),d(o,0,y);else{var b=h.categoryWayDim;d(n[g],b,y),d(s,b,y),h.categoryWayDim+=y}});function d(v,m,g){for(var y=0;y<g;y++)v.push(m+y)}function p(v){var m=v.dimsDef;return m?m.length:1}return o.length&&(n.itemName=o),s.length&&(n.seriesName=s),n}function sF(e){var t=e.get("data",!0);if(!t)return qp(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Li).models[0]}function ort(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:qp(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Li).models}function aF(e,t){return srt(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function srt(e,t,r,n,i,o){var s,a=5;if(Nn(e))return En.Not;var l,u;if(n){var c=n[o];Dt(c)?(l=c.name,u=c.type):Mt(c)&&(l=c)}if(u!=null)return u==="ordinal"?En.Must:En.Not;if(t===ln){var f=e;if(r===Lf){for(var h=f[o],d=0;d<(h||[]).length&&d<a;d++)if((s=w(h[i+d]))!=null)return s}else for(var d=0;d<f.length&&d<a;d++){var p=f[i+d];if(p&&(s=w(p[o]))!=null)return s}}else if(t===qi){var v=e;if(!l)return En.Not;for(var d=0;d<v.length&&d<a;d++){var m=v[d];if(m&&(s=w(m[l]))!=null)return s}}else if(t===Is){var g=e;if(!l)return En.Not;var h=g[l];if(!h||Nn(h))return En.Not;for(var d=0;d<h.length&&d<a;d++)if((s=w(h[d]))!=null)return s}else if(t===hi)for(var y=e,d=0;d<y.length&&d<a;d++){var m=y[d],b=Yp(m);if(!pt(b))return En.Not;if((s=w(b[o]))!=null)return s}function w(T){var S=Mt(T);if(T!=null&&isFinite(T)&&T!=="")return S?En.Might:En.Not;if(S&&T!=="-")return En.Must}return En.Not}var art=Yt();function lrt(e,t,r){var n=art.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var MM=Re();Re();var IP=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=er(this.get("color",!0)),o=this.get("colorLayer",!0);return crt(this,MM,i,o,t,r,n)},e.prototype.clearColorPalette=function(){frt(this,MM)},e}();function urt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function crt(e,t,r,n,i,o,s){o=o||e;var a=t(o),l=a.paletteIdx||0,u=a.paletteNameMap=a.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=s==null||!n?r:urt(n,s);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),a.paletteIdx=(l+1)%c.length,f}}function frt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var tv,yh,xM,IM="\0_ec_inner",hrt=1,lF=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,s,a){o=o||{},this.option=null,this._theme=new Ir(o),this._locale=new Ir(s),this._optionManager=a},t.prototype.setOption=function(r,n,i){var o=RM(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,RM(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var s=o.mountOption(r==="recreate");!this.option||r==="recreate"?xM(this,s):(this.restoreData(),this._mergeOption(s,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var a=o.getTimelineOption(this);a&&(i=!0,this._mergeOption(a,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&$(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,s=this._componentsCount,a=[],l=Yt(),u=n&&n.replaceMergeMainTypeMap;nrt(this),$(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(a.push(h),l.set(h,!0)):i[h]=i[h]==null?Wt(f):ue(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(a.push(h),l.set(h,!0))}),Me.topologicalTravel(a,Me.getAllClassMainTypes(),c,this);function c(f){var h=lrt(this,f,er(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=KJ(d,h,p);iQ(v,f,Me),i[f]=null,o.set(f,null),s.set(f,0);var m=[],g=[],y=0,b;$(v,function(w,T){var S=w.existing,k=w.newOption;if(!k)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var x=f==="series",A=Me.getClass(f,w.keyInfo.subType,!x);if(!A)return;if(f==="tooltip"){if(b)return;b=!0}if(S&&S.constructor===A)S.name=w.keyInfo.name,S.mergeOption(k,this),S.optionUpdated(k,!1);else{var I=ut({componentIndex:T},w.keyInfo);S=new A(k,this,this,I),ut(S,I),w.brandNew&&(S.__requireNewView=!0),S.init(k,this,this),S.optionUpdated(null,!0)}}S?(m.push(S.option),g.push(S),y++):(m.push(void 0),g.push(void 0))},this),i[f]=m,o.set(f,g),s.set(f,y),f==="series"&&tv(this)}this._seriesIndices||tv(this)},t.prototype.getOption=function(){var r=Wt(this.option);return $(r,function(n,i){if(Me.hasClass(i)){for(var o=er(n),s=o.length,a=!1,l=s-1;l>=0;l--)o[l]&&!fp(o[l])?a=!0:(o[l]=null,!a&&s--);o.length=s,r[i]=o}}),delete r[IM],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,s=r.name,a=this._componentsMap.get(n);if(!a||!a.length)return[];var l;return i!=null?(l=[],$(er(i),function(u){a[u]&&l.push(a[u])})):o!=null?l=LM("id",o,a):s!=null?l=LM("name",s,a):l=Mr(a,function(u){return!!u}),OM(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=a(n),s=o?this.queryComponents(o):Mr(this._componentsMap.get(i),function(u){return!!u});return l(OM(s,r));function a(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?Mr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ht(r)){var s=n,a=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&a.call(s,h,p,p.componentIndex)}})}else for(var l=Mt(r)?o.get(r):Dt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ii(r,null);return Mr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Mr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Mr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){yh(this),$(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){$(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){yh(this),$(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];s.subType===r&&n.call(i,s,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return $(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return yh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){yh(this);var i=[];$(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];r.call(n,s,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=Yt(i)},t.prototype.restoreData=function(r){tv(this);var n=this._componentsMap,i=[];n.each(function(o,s){Me.hasClass(s)&&i.push(s)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){$(n.get(o),function(s){s&&(o!=="series"||!drt(s,r))&&s.restoreData()})})},t.internalField=function(){tv=function(r){var n=r._seriesIndices=[];$(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Yt(n)},yh=function(r){},xM=function(r,n){r.option={},r.option[IM]=hrt,r._componentsMap=Yt({series:[]}),r._componentsCount=Yt();var i=n.aria;Dt(i)&&i.enabled==null&&(i.enabled=!0),prt(n,r._theme.option),ue(n,rrt,!1),r._mergeOption(n,null)}}(),t}(Ir);function drt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function prt(e,t){var r=e.color&&!e.colorLayer;$(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?ue(e[i],n,!1):Wt(n):e[i]==null&&(e[i]=n))})}function LM(e,t,r){if(pt(t)){var n=Yt();return $(t,function(o){if(o!=null){var s=ii(o,null);s!=null&&n.set(o,!0)}}),Mr(r,function(o){return o&&n.get(o[e])})}else{var i=ii(t,null);return Mr(r,function(o){return o&&i!=null&&o[e]===i})}}function OM(e,t){return t.hasOwnProperty("subType")?Mr(e,function(r){return r&&r.subType===t.subType}):e}function RM(e){var t=Yt();return e&&$(er(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Hi(lF,IP);const uF=lF;var vrt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],grt=function(){function e(t){$(vrt,function(r){this[r]=jt(t[r],t)},this)}return e}();const cF=grt;var xb={},mrt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];$(xb,function(i,o){var s=i.create(t,r);n=n.concat(s||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){$(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){xb[t]=r},e.get=function(t){return xb[t]},e}();const LP=mrt;var _rt=/^(min|max)?(.+)$/,yrt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&($(er(t.series),function(s){s&&s.data&&Nn(s.data)&&$m(s.data)}),$(er(t.dataset),function(s){s&&s.source&&Nn(s.source)&&$m(s.source)})),t=Wt(t);var i=this._optionBackup,o=brt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Wt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=Wt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,s=[],a=[];if(!i.length&&!o)return a;for(var l=0,u=i.length;l<u;l++)wrt(i[l].query,r,n)&&s.push(l);return!s.length&&o&&(s=[-1]),s.length&&!Trt(s,this._currentMediaIndices)&&(a=It(s,function(c){return Wt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=s,a},e}();function brt(e,t,r){var n=[],i,o,s=e.baseOption,a=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||a||s&&s.timeline);s?(o=s,o.timeline||(o.timeline=a)):((f||c)&&(e.options=e.media=null),o=e),c&&pt(u)&&$(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),$(l,function(d){return h(d)}),$(n,function(d){return h(d.option)});function h(d){$(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function wrt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return $(e,function(o,s){var a=s.match(_rt);if(!(!a||!a[1]||!a[2])){var l=a[1],u=a[2].toLowerCase();Srt(n[u],o,l)||(i=!1)}}),i}function Srt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Trt(e,t){return e.join(",")===t.join(",")}const krt=yrt;var mi=$,wp=Dt,DM=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ib(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=DM.length;r<n;r++){var i=DM[r],o=t.normal,s=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?ue(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?ue(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function Wr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,ie(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function vd(e){Wr(e,"itemStyle"),Wr(e,"lineStyle"),Wr(e,"areaStyle"),Wr(e,"label"),Wr(e,"labelLine"),Wr(e,"upperLabel"),Wr(e,"edgeLabel")}function Qe(e,t){var r=wp(e)&&e[t],n=wp(r)&&r.textStyle;if(n)for(var i=0,o=N4.length;i<o;i++){var s=N4[i];n.hasOwnProperty(s)&&(r[s]=n[s])}}function Zn(e){e&&(vd(e),Qe(e,"label"),e.emphasis&&Qe(e.emphasis,"label"))}function Prt(e){if(!!wp(e)){Ib(e),vd(e),Qe(e,"label"),Qe(e,"upperLabel"),Qe(e,"edgeLabel"),e.emphasis&&(Qe(e.emphasis,"label"),Qe(e.emphasis,"upperLabel"),Qe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(Ib(t),Zn(t));var r=e.markLine;r&&(Ib(r),Zn(r));var n=e.markArea;n&&Zn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!Nn(o))for(var s=0;s<o.length;s++)Zn(o[s]);$(e.categories,function(u){vd(u)})}if(i&&!Nn(i))for(var s=0;s<i.length;s++)Zn(i[s]);if(t=e.markPoint,t&&t.data)for(var a=t.data,s=0;s<a.length;s++)Zn(a[s]);if(r=e.markLine,r&&r.data)for(var l=r.data,s=0;s<l.length;s++)pt(l[s])?(Zn(l[s][0]),Zn(l[s][1])):Zn(l[s]);e.type==="gauge"?(Qe(e,"axisLabel"),Qe(e,"title"),Qe(e,"detail")):e.type==="treemap"?(Wr(e.breadcrumb,"itemStyle"),$(e.levels,function(u){vd(u)})):e.type==="tree"&&vd(e.leaves)}}function Zo(e){return pt(e)?e:e?[e]:[]}function NM(e){return(pt(e)?e[0]:e)||{}}function Crt(e,t){mi(Zo(e.series),function(n){wp(n)&&Prt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),mi(r,function(n){mi(Zo(e[n]),function(i){i&&(Qe(i,"axisLabel"),Qe(i.axisPointer,"label"))})}),mi(Zo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Qe(i,"axisLabel"),Qe(i&&i.axisPointer,"label")}),mi(Zo(e.calendar),function(n){Wr(n,"itemStyle"),Qe(n,"dayLabel"),Qe(n,"monthLabel"),Qe(n,"yearLabel")}),mi(Zo(e.radar),function(n){Qe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),mi(Zo(e.geo),function(n){wp(n)&&(Zn(n),mi(Zo(n.regions),function(i){Zn(i)}))}),mi(Zo(e.timeline),function(n){Zn(n),Wr(n,"label"),Wr(n,"itemStyle"),Wr(n,"controlStyle",!0);var i=n.data;pt(i)&&$(i,function(o){Dt(o)&&(Wr(o,"label"),Wr(o,"itemStyle"))})}),mi(Zo(e.toolbox),function(n){Wr(n,"iconStyle"),mi(n.feature,function(i){Wr(i,"iconStyle")})}),Qe(NM(e.axisPointer),"label"),Qe(NM(e.tooltip).axisPointer,"label")}function Ert(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Art(e,t,r,n){for(var i=t.split(","),o=e,s,a=0;a<i.length-1;a++)s=i[a],o[s]==null&&(o[s]={}),o=o[s];(n||o[i[a]]==null)&&(o[i[a]]=r)}function FM(e){e&&$(Mrt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Mrt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],xrt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Lb=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function bh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<Lb.length;r++){var n=Lb[r][1],i=Lb[r][0];t[n]!=null&&(t[i]=t[n])}}function $M(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function zM(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function Irt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function fF(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&fF(e[r].children,t)}function hF(e,t){Crt(e,t),e.series=er(e.series),$(e.series,function(r){if(!!Dt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),$M(r.label);var i=r.data;if(i&&!Nn(i))for(var o=0;o<i.length;o++)$M(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var s=Ert(r,"pointer.color");s!=null&&Art(r,"itemStyle.color",s)}else if(n==="bar"){bh(r),bh(r.backgroundStyle),bh(r.emphasis);var i=r.data;if(i&&!Nn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(bh(i[o]),bh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var a=r.highlightPolicy;a&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=a)),zM(r),fF(r.data,zM)}else n==="graph"||n==="sankey"?Irt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&ie(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),FM(r)}}),e.dataRange&&(e.visualMap=e.dataRange),$(xrt,function(r){var n=e[r];n&&(pt(n)||(n=[n]),$(n,function(i){FM(i)}))})}function Lrt(e){var t=Yt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),s={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),t.each(Ort)}function Ort(e){$(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],s=t.data,a=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";s.modify(o,function(u,c,f){var h=s.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;a?p=s.getRawIndex(f):d=s.get(t.stackedByDimension,f);for(var v=NaN,m=r-1;m>=0;m--){var g=e[m];if(a||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=GJ(h,y),v=y;break}}}return n[0]=h,n[1]=v,n})})}var T_=function(){function e(t){this.data=t.data||(t.sourceFormat===Is?{}:[]),this.sourceFormat=t.sourceFormat||iF,this.seriesLayoutBy=t.seriesLayoutBy||Io,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&aF(this,n)===En.Must&&(i.type="ordinal")}}return e}();function OP(e){return e instanceof T_}function S3(e,t,r){r=r||dF(e);var n=t.seriesLayoutBy,i=Drt(e,r,n,t.sourceHeader,t.dimensions),o=new T_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Wt(t)});return o}function RP(e){return new T_({data:e,sourceFormat:Nn(e)?Pa:hi})}function Rrt(e){return new T_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Wt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function dF(e){var t=iF;if(Nn(e))t=Pa;else if(pt(e)){e.length===0&&(t=ln);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(pt(i)){t=ln;break}else if(Dt(i)){t=qi;break}}}}else if(Dt(e)){for(var o in e)if(_t(e,o)&&Zr(e[o])){t=Is;break}}return t}function Drt(e,t,r,n,i){var o,s;if(!e)return{dimensionsDefine:BM(i),startIndex:s,dimensionsDetectedCount:o};if(t===ln){var a=e;n==="auto"||n==null?VM(function(u){u!=null&&u!=="-"&&(Mt(u)?s==null&&(s=1):s=0)},r,a,10):s=Te(n)?n:n?1:0,!i&&s===1&&(i=[],VM(function(u,c){i[c]=u!=null?u+"":""},r,a,1/0)),o=i?i.length:r===Lf?a.length:a[0]?a[0].length:null}else if(t===qi)i||(i=Nrt(e));else if(t===Is)i||(i=[],$(e,function(u,c){i.push(c)}));else if(t===hi){var l=Yp(e[0]);o=pt(l)&&l.length||1}return{startIndex:s,dimensionsDefine:BM(i),dimensionsDetectedCount:o}}function Nrt(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return $(r,function(i,o){n.push(o)}),n}}function BM(e){if(!!e){var t=Yt();return It(e,function(r,n){r=Dt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function VM(e,t,r,n){if(t===Lf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function pF(e){var t=e.sourceFormat;return t===qi||t===Is}var wl,Sl,Tl,UM,WM,vF=function(){function e(t,r){var n=OP(t)?t:RP(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Pa&&(this._offset=0,this._dimSize=r,this._data=i),WM(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;WM=function(s,a,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=UM[DP(u,c)];if(ut(s,d),u===Pa)s.getItem=r,s.count=i,s.fillStorage=n;else{var p=gF(u,c);s.getItem=jt(p,null,a,f,h);var v=mF(u,c);s.count=jt(v,null,a,f,h)}};var r=function(s,a){s=s-this._offset,a=a||[];for(var l=this._data,u=this._dimSize,c=u*s,f=0;f<u;f++)a[f]=l[c+f];return a},n=function(s,a,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=a-s,g=l[h],y=0;y<m;y++){var b=c[y*f+h];g[s+y]=b,b<p&&(p=b),b>v&&(v=b)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};UM=(t={},t[ln+"_"+Io]={pure:!0,appendData:o},t[ln+"_"+Lf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[qi]={pure:!0,appendData:o},t[Is]={pure:!0,appendData:function(s){var a=this._data;$(s,function(l,u){for(var c=a[u]||(a[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[hi]={appendData:o},t[Pa]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(s){for(var a=0;a<s.length;a++)this._data.push(s[a])}}(),e}(),jM=function(e,t,r,n){return e[n]},Frt=(wl={},wl[ln+"_"+Io]=function(e,t,r,n){return e[n+t]},wl[ln+"_"+Lf]=function(e,t,r,n,i){n+=t;for(var o=i||[],s=e,a=0;a<s.length;a++){var l=s[a];o[a]=l?l[n]:null}return o},wl[qi]=jM,wl[Is]=function(e,t,r,n,i){for(var o=i||[],s=0;s<r.length;s++){var a=r[s].name,l=e[a];o[s]=l?l[n]:null}return o},wl[hi]=jM,wl);function gF(e,t){var r=Frt[DP(e,t)];return r}var GM=function(e,t,r){return e.length},$rt=(Sl={},Sl[ln+"_"+Io]=function(e,t,r){return Math.max(0,e.length-t)},Sl[ln+"_"+Lf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},Sl[qi]=GM,Sl[Is]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},Sl[hi]=GM,Sl);function mF(e,t){var r=$rt[DP(e,t)];return r}var Ob=function(e,t,r){return e[t]},zrt=(Tl={},Tl[ln]=Ob,Tl[qi]=function(e,t,r){return e[r]},Tl[Is]=Ob,Tl[hi]=function(e,t,r){var n=Yp(e);return n instanceof Array?n[t]:n},Tl[Pa]=Ob,Tl);function _F(e){var t=zrt[e];return t}function DP(e,t){return e===ln?e+"_"+t:e}function hf(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var s=e.getDimensionIndex(r),a=i.getDimensionProperty(s);return _F(o)(n,s,a)}else{var l=n;return o===hi&&(l=Yp(n)),l}}}}var Brt=/\{@(.+?)\}/g,yF=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),s=n.getName(t),a=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:s,dataIndex:o,data:a,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,s){r=r||"normal";var a=this.getData(n),l=this.getDataParams(t,n);if(s&&(l.value=s.interpolatedValue),i!=null&&pt(l.value)&&(l.value=l.value[i]),!o){var u=a.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ht(o))return l.status=r,l.dimensionIndex=i,o(l);if(Mt(o)){var c=eF(o,l);return c.replace(Brt,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=hf(a,t,p);if(s&&pt(s.interpolatedValue)){var m=a.getDimensionIndex(p);m>=0&&(v=s.interpolatedValue[m])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return hf(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function HM(e){var t,r;return Dt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Ud(e){return new Vrt(e)}var Vrt=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var s=c(this._modBy),a=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(s!==l||a!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(pt(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){XM.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:XM.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),pt(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),XM=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?a:s}};return o;function s(){return t<e?t++:null}function a(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function Ca(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Te(e)&&e!=null&&e!=="-"&&(e=+ws(e)),e==null||e===""?NaN:+e)}var Urt=Yt({number:function(e){return parseFloat(e)},time:function(e){return+ws(e)},trim:function(e){return Mt(e)?Eo(e):e}});function bF(e){return Urt.get(e)}var wF={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Wrt=function(){function e(t,r){if(!Te(r)){var n="";se(n)}this._opFn=wF[t],this._rvalFloat=La(r)}return e.prototype.evaluate=function(t){return Te(t)?this._opFn(t,this._rvalFloat):this._opFn(La(t),this._rvalFloat)},e}(),SF=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Te(t)?t:La(t),i=Te(r)?r:La(r),o=isNaN(n),s=isNaN(i);if(o&&(n=this._incomparable),s&&(i=this._incomparable),o&&s){var a=Mt(t),l=Mt(r);a&&(n=l?t:0),l&&(i=a?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),jrt=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=La(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=La(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function Grt(e,t){return e==="eq"||e==="ne"?new jrt(e==="eq",t):_t(wF,e)?new Wrt(e,t):null}var Hrt=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ca(t,r)},e}();function Xrt(e,t){var r=new Hrt,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,s="";e.seriesLayoutBy!==Io&&se(s);var a=[],l={},u=e.dimensionsDefine;if(u)$(u,function(v,m){var g=v.name,y={index:m,name:g,displayName:v.displayName};if(a.push(y),g!=null){var b="";_t(l,g)&&se(b),l[g]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)a.push({index:c});var f=gF(i,Io);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,a,v)},r.getRawData=jt(Yrt,null,e)),r.cloneRawData=jt(qrt,null,e);var h=mF(i,Io);r.count=jt(h,null,n,o,a);var d=_F(i);r.retrieveValue=function(v,m){var g=f(n,o,a,v);return p(g,m)};var p=r.retrieveValueFromItem=function(v,m){if(v!=null){var g=a[m];if(g)return d(v,m,g.name)}};return r.getDimensionInfo=jt(Zrt,null,a,l),r.cloneAllDimensionInfo=jt(Krt,null,a),r}function Yrt(e){var t=e.sourceFormat;if(!NP(t)){var r="";se(r)}return e.data}function qrt(e){var t=e.sourceFormat,r=e.data;if(!NP(t)){var n="";se(n)}if(t===ln){for(var i=[],o=0,s=r.length;o<s;o++)i.push(r[o].slice());return i}else if(t===qi){for(var i=[],o=0,s=r.length;o<s;o++)i.push(ut({},r[o]));return i}}function Zrt(e,t,r){if(r!=null){if(Te(r)||!isNaN(r)&&!_t(t,r))return e[r];if(_t(t,r))return t[r]}}function Krt(e){return Wt(e)}var TF=Yt();function Jrt(e){e=Wt(e);var t=e.type,r="";t||se(r);var n=t.split(":");n.length!==2&&se(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,TF.set(t,e)}function Qrt(e,t,r){var n=er(e),i=n.length,o="";i||se(o);for(var s=0,a=i;s<a;s++){var l=n[s];t=tnt(l,t),s!==a-1&&(t.length=Math.max(t.length,1))}return t}function tnt(e,t,r,n){var i="";t.length||se(i),Dt(e)||se(i);var o=e.type,s=TF.get(o);s||se(i);var a=It(t,function(u){return Xrt(u,s)}),l=er(s.transform({upstream:a[0],upstreamList:a,config:Wt(e.config)}));return It(l,function(u,c){var f="";Dt(u)||se(f),u.data||se(f);var h=dF(u.data);NP(h)||se(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Io,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Io,sourceHeader:0,dimensions:u.dimensions};return S3(u.data,d,null)})}function NP(e){return e===ln||e===qi}var k_="undefined",ent=typeof Uint32Array===k_?Array:Uint32Array,rnt=typeof Uint16Array===k_?Array:Uint16Array,kF=typeof Int32Array===k_?Array:Int32Array,YM=typeof Float64Array===k_?Array:Float64Array,PF={float:YM,int:kF,ordinal:Array,number:Array,time:YM},Rb;function wh(e){return e>65535?ent:rnt}function nc(){return[1/0,-1/0]}function nnt(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function qM(e,t,r,n,i){var o=PF[r||"float"];if(i){var s=e[t],a=s&&s.length;if(a!==n){for(var l=new o(n),u=0;u<a;u++)l[u]=s[u];e[t]=l}}else e[t]=new o(n)}var int=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Yt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=Rb[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],pF(i),this._dimensions=It(r,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new PF[r||"float"](this._rawCount),this._rawExtent[o]=nc(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,s=i.ordinalOffset||0,a=n.length;s===0&&(o[t]=nc());for(var l=o[t],u=s;u<a;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=a,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,s=this._rawExtent,a=this.count(),l=a+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];qM(n,u,c.type,l,!0)}for(var f=[],h=a;h<l;h++)for(var d=h-a,p=0;p<o;p++){var c=i[p],v=Rb.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var m=s[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:a,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,s=this._dimensions,a=s.length,l=this._rawExtent,u=It(s,function(y){return y.property}),c=0;c<a;c++){var f=s[c];l[c]||(l[c]=nc()),qM(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<a;p++){var v=o[p],m=this._dimValueGetter(h,u[p],d,p);v[d]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,s=i.length;o<s;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var s=this.get(t,i);isNaN(s)||(n+=s)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,s){return o-s}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var s=(i+o)/2|0;if(r[s]<t)i=s+1;else if(r[s]>t)o=s-1;else return s}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],s=[];if(!o)return s;n==null&&(n=1/0);for(var a=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<a||p===a&&d>=0&&l<0)&&(a=p,l=d,u=0),d===l&&(s[u++]=c))}return s.length=u,s},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=wh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=wh(n._rawCount),s=new o(i),a=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var m=0;m<l;m++)a[m]=f[t[m]][p];a[m]=h,d=r.apply(null,a)}d&&(s[u++]=p)}return u<i&&(n._indices=s),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ge(t),o=i.length;if(!o)return this;var s=r.count(),a=wh(r._rawCount),l=new a(s),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var m=d[i[0]],g=0;g<n;g++){var y=m[g];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var m=d[i[0]],b=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],g=0;g<n;g++){var y=m[g],S=b[g];(y>=f&&y<=h||isNaN(y))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var g=0;g<s;g++){var k=r.getRawIndex(g),y=d[i[0]][k];(y>=f&&y<=h||isNaN(y))&&(l[u++]=k)}else for(var g=0;g<s;g++){for(var x=!0,k=r.getRawIndex(g),A=0;A<o;A++){var I=i[A],y=d[I][k];(y<t[I][0]||y>t[I][1])&&(x=!1)}x&&(l[u++]=r.getRawIndex(g))}return u<s&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],s=r.length,a=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=nc();for(var f=0;f<a;f++){for(var h=t.getRawIndex(f),d=0;d<s;d++)l[d]=i[r[d]][h];l[s]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],m=p[c],g=u[v],y=i[v];y&&(y[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],s=this.count(),a=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(wh(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));d[a++]=u;for(var p=1;p<s-1;p+=l){for(var v=Math.min(p+l,s-1),m=Math.min(p+l*2,s),g=(m+v)/2,y=0,b=v;b<m;b++){var w=this.getRawIndex(b),T=o[w];isNaN(T)||(y+=T)}y/=m-v;var S=p,k=Math.min(p+l,s),x=p-1,A=o[u];c=-1,h=S;for(var I=-1,L=0,b=S;b<k;b++){var w=this.getRawIndex(b),T=o[w];if(isNaN(T)){L++,I<0&&(I=w);continue}f=Math.abs((x-g)*(T-A)-(x-b)*(y-A)),f>c&&(c=f,h=w)}L>0&&L<k-S&&(d[a++]=Math.min(I,h),h=Math.max(I,h)),d[a++]=h,u=h}return d[a++]=this.getRawIndex(s-1),n._count=a,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),s=o._chunks,a=[],l=Math.floor(1/r),u=s[t],c=this.count(),f=o._rawExtent[t]=nc(),h=new(wh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,a.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);a[v]=u[m]}var g=n(a),y=this.getRawIndex(Math.min(p+i(a,g)||0,c-1));u[y]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,s=this.count();o<s;o++){var a=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][a],o);break;case 2:r(i[t[0]][a],i[t[1]][a],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][a];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=nc();if(!r)return n;var i=this.count(),o=!this._indices,s;if(o)return this._rawExtent[t].slice();if(s=this._extent[t],s)return s.slice();s=n;for(var a=s[0],l=s[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<a&&(a=f),f>l&&(l=f)}return s=[a,l],this._extent[t]=s,s},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&ku(t,function(a,l){return a[l]=!0,a},{});if(o)for(var s=0;s<i.length;s++)n._chunks[s]=o[s]?nnt(i[s]):i[s];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Wt(this._extent),t._rawExtent=Wt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return Ca(r[o],this._dimensions[o])}Rb={arrayRows:t,objectRows:function(r,n,i,o){return Ca(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var s=r&&(r.value==null?r:r.value);return Ca(s instanceof Array?s[o]:s,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const T3=int;var CF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(ev(t)){var s=t,a=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),a=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else a=s.get("data",!0),l=Nn(a)?Pa:hi,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=Qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Qt(f.sourceHeader,h.sourceHeader),v=Qt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[S3(a,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var g=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var b=g.get("source",!0);i=[S3(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&KM(o)}var s,a=[],l=[];return $(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&KM(f),a.push(c),l.push(u._getVersionSign())}),n?s=Qrt(n,a,{datasetIndex:r.componentIndex}):i!=null&&(s=[Rrt(a[0])]),{sourceList:s,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,s=o[i];s||(s=o[i]={});var a=s[n];if(!a){var l=this._getUpstreamSourceManagers()[0];ev(this._sourceHost)&&l?a=l._innerGetDataStore(t,r,n):(a=new T3,a.initData(new vF(r,t.length),t)),s[n]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(ev(t)){var r=sF(t);return r?[r.getSourceManager()]:[]}else return It(ort(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(ev(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function ZM(e){var t=e.option.transform;t&&$m(e.option.transform)}function ev(e){return e.mainType==="series"}function KM(e){throw new Error(e)}var EF="line-height:1";function AF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",s=e.fontSize||14,a=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Qn(n+"")+"px;color:"+Qn(r)+";font-weight:"+Qn(i+""),valueStyle:"font-size:"+Qn(s+"")+"px;color:"+Qn(o)+";font-weight:"+Qn(a+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:s,fill:o,fontWeight:a}}}var ont=[0,10,20,30],snt=["",`
`,`

`,`


`];function Da(e,t){return t.type=e,t}function k3(e){return e.type==="section"}function MF(e){return k3(e)?ant:lnt}function xF(e){if(k3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return $(e.blocks,function(i){var o=xF(i);o>=t&&(t=o+ +(n&&(!o||k3(i)&&!i.noHeader)))}),t}return 0}function ant(e,t,r,n){var i=t.noHeader,o=unt(xF(t)),s=[],a=t.blocks||[];Ui(!a||pt(a)),a=a||[];var l=e.orderMode;if(t.sortBlocks&&l){a=a.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(_t(u,l)){var c=new SF(u[l],null);a.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&a.reverse()}$(a,function(p,v){var m=t.valueFormatter,g=MF(p)(m?ut(ut({},e),{valueFormatter:m}):e,p,v>0?o.html:0,n);g!=null&&s.push(g)});var f=e.renderMode==="richText"?s.join(o.richText):P3(s.join(""),i?r:o.html);if(i)return f;var h=w3(t.header,"ordinal",e.useUTC),d=AF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?IF(e,h,d)+o.richText+f:P3('<div style="'+d+";"+EF+';">'+Qn(h)+"</div>"+f,r)}function lnt(e,t,r,n){var i=e.renderMode,o=t.noName,s=t.noValue,a=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=pt(w)?w:[w],It(w,function(T,S){return w3(T,pt(d)?d[S]:d,u)})};if(!(o&&s)){var f=a?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":w3(l,"ordinal",u),d=t.valueType,p=s?[]:c(t.value),v=!a||!o,m=!a&&o,g=AF(n,i),y=g.nameStyle,b=g.valueStyle;return i==="richText"?(a?"":f)+(o?"":IF(e,h,y))+(s?"":hnt(e,p,v,m,b)):P3((a?"":f)+(o?"":cnt(h,!a,y))+(s?"":fnt(p,v,m,b)),r)}}function JM(e,t,r,n,i,o){if(!!e){var s=MF(e),a={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return s(a,e,0,o)}}function unt(e){return{html:ont[e],richText:snt[e]}}function P3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+EF+';">'+e+r+"</div>"}function cnt(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Qn(e)+"</span>"}function fnt(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=pt(e)?e:[e],'<span style="'+o+";"+n+'">'+It(e,function(s){return Qn(s)}).join("&nbsp;&nbsp;")+"</span>"}function IF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function hnt(e,t,r,n,i){var o=[i],s=n?10:20;return r&&o.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(pt(t)?t.join("  "):t,o)}function dnt(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return pu(n)}function LF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var Db=function(){function e(){this.richTextStyles={},this._nextStyleNameId=B7()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=Zet({color:r,type:t,renderMode:n,markerId:i});return Mt(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};pt(r)?$(r,function(o){return ut(n,o)}):ut(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function pnt(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),s=o.length,a=t.getRawValue(r),l=pt(a),u=dnt(t,r),c,f,h,d;if(s>1||l&&!s){var p=vnt(a,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(s){var v=i.getDimensionInfo(o[0]);d=c=hf(i,r,o[0]),f=v.type}else d=c=l?a[0]:a;var m=lP(t),g=m&&t.name||"",y=i.getName(r),b=n?g:y;return Da("section",{header:g,noHeader:n||!m,sortParam:d,blocks:[Da("nameValue",{markerType:"item",markerColor:u,name:b,noName:!Eo(b),value:c,valueType:f})].concat(h||[])})}function vnt(e,t,r,n,i){var o=t.getData(),s=ku(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),a=[],l=[],u=[];n.length?$(n,function(f){c(hf(o,r,f),f)}):$(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(s?u.push(Da("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(a.push(f),l.push(d.type)))}return{inlineValues:a,inlineValueTypes:l,blocks:u}}var Vs=Re();function rv(e,t){return e.getName(t)||e.getId(t)}var gnt="__universalTransitionEnabled",P_=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Ud({count:_nt,reset:ynt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Vs(this).sourceManager=new CF(this);o.prepareSource();var s=this.getInitialData(r,i);t5(s,this),this.dataTask.context.data=s,Vs(this).dataBeforeProcessed=s,QM(this),this._initSelectedMapFromData(s)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=bp(this),o=i?S_(r):{},s=this.subType;Me.hasClass(s)&&(s+="Series"),ue(r,n.getTheme().get(this.subType)),ue(r,this.getDefaultOption()),a3(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&ff(r,o,i)},t.prototype.mergeOption=function(r,n){r=ue(this.option,r,!0),this.fillDataTextStyle(r.data);var i=bp(this);i&&ff(this.option,r,i);var o=Vs(this).sourceManager;o.dirty(),o.prepareSource();var s=this.getInitialData(r,n);t5(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Vs(this).dataBeforeProcessed=s,QM(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(r){if(r&&!Nn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&a3(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=C3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Vs(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=C3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Vs(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Yt(r)},t.prototype.getSourceManager=function(){return Vs(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Vs(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return pnt({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Kt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,s=IP.prototype.getColorFromPalette.call(this,r,n,i);return s||(s=o.getColorFromPalette(r,n,i)),s},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,s=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<r.length;a++){var l=r[a],u=rv(s,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ge(r),i=[],o=0;o<n.length;o++){var s=r[n[o]];s>=0&&i.push(s)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[rv(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[gnt])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,s=this.option,a=s.selectedMode,l=n.length;if(!(!a||!l)){if(a==="series")s.selectedMap="all";else if(a==="multiple"){Dt(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,c=0;c<l;c++){var f=n[c],h=rv(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(a==="single"||a===!0){var d=n[l-1],h=rv(r,d);s.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Hi(P_,yF);Hi(P_,IP);H7(P_,Me);function QM(e){var t=e.name;lP(e)||(e.name=mnt(e)||t)}function mnt(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return $(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function _nt(e){return e.model.getRawData().count()}function ynt(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),bnt}function bnt(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function t5(e,t){$(h7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,we(wnt,t))})}function wnt(e,t){var r=C3(e);return r&&r.setOutputEnd((t||this).count()),t}function C3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const No=P_;var FP=function(){function e(){this.group=new Ne,this.uid=v_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();cP(FP);s_(FP);const ui=FP;function $P(){var e=Re();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,s=r.large=!!(n&&n.large),a=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==s||o!==a)&&"reset"}}var OF=Re(),Snt=$P(),zP=function(){function e(){this.group=new Ne,this.uid=v_("viewChart"),this.renderTask=Ud({plan:Tnt,reset:knt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||r5(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||r5(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){Mf(this.group,t)},e.markUpdateMethod=function(t,r){OF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function e5(e,t,r){e&&g3(e)&&(t==="emphasis"?dp:pp)(e,r)}function r5(e,t,r){var n=cu(e,t),i=t&&t.highlightKey!=null?xtt(t.highlightKey):null;n!=null?$(er(n),function(o){e5(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){e5(o,r,i)})}cP(zP);s_(zP);function Tnt(e){return Snt(e.model)}function knt(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,s=e.view,a=i&&OF(i).updateMethod,l=o?"incrementalPrepareRender":a&&s[a]?a:"render";return l!=="render"&&s[l](t,r,n,i),Pnt[l]}var Pnt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const oi=zP;var Qm="\0__throttleOriginMethod",n5="\0__throttleRate",i5="\0__throttleType";function C_(e,t,r){var n,i=0,o=0,s=null,a,l,u,c;t=t||0;function f(){o=new Date().getTime(),s=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,m=c||r;c=null,a=n-(m?i:o)-v,clearTimeout(s),m?s=setTimeout(f,v):a>=0?f():s=setTimeout(f,-a),i=n};return h.clear=function(){s&&(clearTimeout(s),s=null)},h.debounceNextCall=function(d){c=d},h}function RF(e,t,r,n){var i=e[t];if(!!i){var o=i[Qm]||i,s=i[i5],a=i[n5];if(a!==r||s!==n){if(r==null||!n)return e[t]=o;i=e[t]=C_(o,r,n==="debounce"),i[Qm]=o,i[i5]=n,i[n5]=r}return i}}function E3(e,t){var r=e[t];r&&r[Qm]&&(r.clear&&r.clear(),e[t]=r[Qm])}var o5=Re(),s5={itemStyle:hp(UN,!0),lineStyle:hp(VN,!0)},Cnt={lineStyle:"stroke",itemStyle:"fill"};function DF(e,t){var r=e.visualStyleMapper||s5[t];return r||(console.warn("Unkown style type '"+t+"'."),s5.itemStyle)}function NF(e,t){var r=e.visualDrawType||Cnt[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Ent={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=DF(e,n),s=o(i),a=i.getShallow("decal");a&&(r.setVisual("decal",a),a.dirty=!0);var l=NF(e,n),u=s[l],c=Ht(u)?u:null,f=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());s[l]||(s[l]=h,r.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||Ht(s.fill)?h:s.fill,s.stroke=s.stroke==="auto"||Ht(s.stroke)?h:s.stroke}if(r.setVisual("style",s),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),m=ut({},s);m[l]=c(v),d.setItemVisual(p,"style",m)}}}},Sh=new Ir,Ant={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=DF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(s,a){var l=s.getRawDataItem(a);if(l&&l[n]){Sh.option=l[n];var u=i(Sh),c=s.ensureUniqueItemVisual(a,"style");ut(c,u),Sh.option.decal&&(s.setItemVisual(a,"decal",Sh.option.decal),Sh.option.decal.dirty=!0),o in u&&s.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},Mnt={performRawSeries:!0,overallReset:function(e){var t=Yt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),o5(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),s=o5(r).scope,a=r.visualStyleAccessPath||"itemStyle",l=NF(r,a);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,s,p)}})}})}},nv=Math.PI;function xnt(e,t){t=t||{},ie(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ne,n=new rr({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new nr({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new rr({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var s;return t.showSpinner&&(s=new yP({shape:{startAngle:-nv/2,endAngle:-nv/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:nv*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:nv*3/2}).delay(300).start("circularInOut"),r.add(s)),r.resize=function(){var a=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:l),c=e.getHeight()/2;t.showSpinner&&s.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var Int=function(){function e(t,r,n,i){this._stageTaskMap=Yt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,s=o?n.step:null,a=i&&i.modDataCount,l=a!=null?Math.ceil(a/s):null;return{step:s,modBy:l,modDataCount:a}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),s=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:s,modDataCount:l,large:a}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=Yt();t.eachSeries(function(i){var o=i.getProgressive(),s=i.uid;n.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;$(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),s="";Ui(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,s=o.context;s.model=r,s.ecModel=n,s.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,s=this;$(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){a(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),s.updatePayload(h,n);var v=s.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(m,g){a(i,m)&&m.dirty();var y=s.getPerformArgs(m,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),s.updatePayload(m,n),m.perform(y)&&(o=!0)})}});function a(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,s=r.seriesTaskMap,a=r.seriesTaskMap=Yt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=a.set(h,s&&s.get(h)||Ud({plan:Nnt,reset:Fnt,count:znt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,s=r.overallTask=r.overallTask||Ud({reset:Lnt});s.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var a=s.agentStubMap,l=s.agentStubMap=Yt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Ui(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,$(n.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,a&&a.get(m)||(h=!0,Ud({reset:Ont,onDirty:Dnt})));g.context={model:v,overallProgress:f},g.agent=s,g.__block=f,o._pipe(v,g)}h&&s.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ht(t)&&(t={overallReset:t,seriesType:Bnt(t)}),t.uid=v_("stageHandler"),r&&(t.visualType=r),t},e}();function Lnt(e){e.overallReset(e.ecModel,e.api,e.payload)}function Ont(e){return e.overallProgress&&Rnt}function Rnt(){this.agent.dirty(),this.getDownstream().dirty()}function Dnt(){this.agent&&this.agent.dirty()}function Nnt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Fnt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=er(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?It(t,function(r,n){return FF(n)}):$nt}var $nt=FF(0);function FF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function znt(e){return e.data.count()}function Bnt(e){t1=null;try{e(Sp,$F)}catch{}return t1}var Sp={},$F={},t1;zF(Sp,uF);zF($F,cF);Sp.eachSeriesByType=Sp.eachRawSeriesByType=function(e){t1=e};Sp.eachComponent=function(e){e.mainType==="series"&&e.subType&&(t1=e.subType)};function zF(e,t){for(var r in t.prototype)e[r]=Yr}const BF=Int;var a5=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Vnt={color:a5,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],a5]};var en="#B9B8CE",l5="#100C2A",iv=function(){return{axisLine:{lineStyle:{color:en}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},u5=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],VF={darkMode:!0,color:u5,backgroundColor:l5,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:en}},textStyle:{color:en},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:en}},dataZoom:{borderColor:"#71708A",textStyle:{color:en},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:en}},timeline:{lineStyle:{color:en},label:{color:en},controlStyle:{color:en,borderColor:en}},calendar:{itemStyle:{color:l5},dayLabel:{color:en},monthLabel:{color:en},yearLabel:{color:en}},timeAxis:iv(),logAxis:iv(),valueAxis:iv(),categoryAxis:iv(),line:{symbol:"circle"},graph:{color:u5},gauge:{title:{color:en},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:en},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};VF.categoryAxis.splitLine.show=!1;const Unt=VF;var Wnt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Mt(t)){var o=Mo(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var s=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};$(t,function(l,u){for(var c=!1,f=0;f<s.length;f++){var h=s[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}a.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,s=n.model,a=n.view;if(!s||!a)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),A3=["symbol","symbolSize","symbolRotate","symbolOffset"],c5=A3.concat(["symbolKeepAspect"]),jnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,s=0;s<A3.length;s++){var a=A3[s],l=e.get(a);Ht(l)?(o=!0,i[a]=l):n[a]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ut({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ge(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var m=u[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:o?c:null}}},Gnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var s=i.getItemModel(o),a=0;a<c5.length;a++){var l=c5[a],u=s.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function UF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function E_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Hnt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function ic(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(s){for(var a=s.seriesIndex,l=s.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===a){var f=s.getData(),h=cu(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:s.id,name:pt(h)?f.getName(h[0]):f.getName(h),selected:Mt(l)?l:ut({},l)})}})}function Xnt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(ic("map","selectchanged",t,i,n),ic("pie","selectchanged",t,i,n)):n.fromAction==="select"?(ic("map","selected",t,i,n),ic("pie","selected",t,i,n)):n.fromAction==="unselect"&&(ic("map","unselected",t,i,n),ic("pie","unselected",t,i,n))})}function Fc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Ynt=Math.round(Math.random()*9),qnt=typeof Object.defineProperty=="function",Znt=function(){function e(){this._id="__ec_inner_"+Ynt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return qnt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Knt=Znt;var Jnt=pe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),Qnt=pe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),tit=pe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),s=i/2,a=s*s/(o-s),l=n-o+s+a,u=Math.asin(a/s),c=Math.cos(u)*s,f=Math.sin(u),h=Math.cos(u),d=s*.6,p=s*.7;e.moveTo(r-c,l+a),e.arc(r,l,s,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+a+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+a+h*d,r-c,l+a),e.closePath()}}),eit=pe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,s=n/3*2;e.moveTo(i,o),e.lineTo(i+s,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-s,o+r),e.lineTo(i,o),e.closePath()}}),rit={line:Oa,rect:rr,roundRect:rr,square:rr,circle:_P,diamond:Qnt,pin:tit,arrow:eit,triangle:Jnt},nit={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},M3={};$(rit,function(e,t){M3[t]=new e});var iit=pe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Gm(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=M3[n];i||(n="rect",i=M3[n]),nit[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function oit(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Wi(e,t,r,n,i,o,s){var a=e.indexOf("empty")===0;a&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=RN(e.slice(8),new ce(t,r,n,i),s?"center":"cover"):e.indexOf("path://")===0?l=h_(e.slice(7),{},new ce(t,r,n,i),s?"center":"cover"):l=new iit({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=a,l.setColor=oit,o&&l.setColor(o),l}function WF(e){return pt(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function BP(e,t){if(e!=null)return pt(e)||(e=[e,e]),[Ke(e[0],t[0])||0,Ke(Qt(e[1],e[0]),t[1])||0]}function Wl(e){return isFinite(e)}function sit(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,s=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,s=s*r.height+r.y),n=Wl(n)?n:0,i=Wl(i)?i:1,o=Wl(o)?o:0,s=Wl(s)?s:0;var a=e.createLinearGradient(n,o,i,s);return a}function ait(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),s=t.x==null?.5:t.x,a=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(s=s*n+r.x,a=a*i+r.y,l=l*o),s=Wl(s)?s:.5,a=Wl(a)?a:.5,l=l>=0&&Wl(l)?l:.5;var u=e.createRadialGradient(s,a,0,s,a,l);return u}function x3(e,t,r){for(var n=t.type==="radial"?ait(e,t,r):sit(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function lit(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function ov(e){return parseInt(e,10)}function sv(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var a=document.defaultView.getComputedStyle(e);return(e[i]||ov(a[n])||ov(e.style[n]))-(ov(a[o])||0)-(ov(a[s])||0)|0}function uit(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Te(e)?[e]:pt(e)?e:null}function jF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&uit(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=It(r,function(o){return o/i}),n/=i)}return[r,n]}var cit=new fu(!0);function e1(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function f5(e){return typeof e=="string"&&e!=="none"}function r1(e){var t=e.fill;return t!=null&&t!=="none"}function h5(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function d5(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function I3(e,t,r){var n=X7(t.image,t.__image,r);if(a_(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*gK),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function fit(e,t,r,n){var i,o=e1(r),s=r1(r),a=r.strokePercent,l=a<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||cit,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=s&&!!h.colorStops,v=o&&!!d.colorStops,m=s&&!!h.image,g=o&&!!d.image,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(y=f?x3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(b=f?x3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(w=f||!t.__canvasFillPattern?I3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),g&&(T=f||!t.__canvasStrokePattern?I3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=y:m&&(w?e.fillStyle=w:s=!1),v?e.strokeStyle=b:g&&(T?e.strokeStyle=T:o=!1)}var k=t.getGlobalScale();c.setScale(k[0],k[1],t.segmentIgnoreThreshold);var x,A;e.setLineDash&&r.lineDash&&(i=jF(t),x=i[0],A=i[1]);var I=!0;(u||f&Mc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),I=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),I&&c.rebuildPath(e,l?a:1),x&&(e.setLineDash(x),e.lineDashOffset=A),n||(r.strokeFirst?(o&&d5(e,r),s&&h5(e,r)):(s&&h5(e,r),o&&d5(e,r))),x&&e.setLineDash([])}function hit(e,t,r){var n=t.__image=X7(r.image,t.__image,t,t.onload);if(!(!n||!a_(n))){var i=r.x||0,o=r.y||0,s=t.getWidth(),a=t.getHeight(),l=n.width/n.height;if(s==null&&a!=null?s=a*l:a==null&&s!=null?a=s/l:s==null&&a==null&&(s=n.width,a=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,s,a)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=s-u,h=a-c;e.drawImage(n,u,c,f,h,i,o,s,a)}else e.drawImage(n,i,o,s,a)}}function dit(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||lu,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,s=void 0;e.setLineDash&&r.lineDash&&(n=jF(t),o=n[0],s=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=s),r.strokeFirst?(e1(r)&&e.strokeText(i,r.x,r.y),r1(r)&&e.fillText(i,r.x,r.y)):(r1(r)&&e.fillText(i,r.x,r.y),e1(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var p5=["shadowBlur","shadowOffsetX","shadowOffsetY"],v5=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function GF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){mn(e,i),o=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?Kl.opacity:s}(n||t.blend!==r.blend)&&(o||(mn(e,i),o=!0),e.globalCompositeOperation=t.blend||Kl.blend);for(var a=0;a<p5.length;a++){var l=p5[a];(n||t[l]!==r[l])&&(o||(mn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(mn(e,i),o=!0),e.shadowColor=t.shadowColor||Kl.shadowColor),o}function g5(e,t,r,n,i){var o=Tp(t,i.inHover),s=n?null:r&&Tp(r,i.inHover)||{};if(o===s)return!1;var a=GF(e,o,s,n,i);if((n||o.fill!==s.fill)&&(a||(mn(e,i),a=!0),f5(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==s.stroke)&&(a||(mn(e,i),a=!0),f5(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==s.opacity)&&(a||(mn(e,i),a=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(a||(mn(e,i),a=!0),e.lineWidth=u)}for(var c=0;c<v5.length;c++){var f=v5[c],h=f[0];(n||o[h]!==s[h])&&(a||(mn(e,i),a=!0),e[h]=o[h]||f[1])}return a}function pit(e,t,r,n,i){return GF(e,Tp(t,i.inHover),r&&Tp(r,i.inHover),n,i)}function HF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function vit(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),HF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function git(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var m5=1,_5=2,y5=3,b5=4;function mit(e){var t=r1(e),r=e1(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function mn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Tp(e,t){return t&&e.__hoverStyle||e.style}function XF(e,t){jl(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function jl(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~In,t.__isRendered=!1;return}var o=t.__clipPaths,s=r.prevElClipPaths,a=!1,l=!1;if((!s||lit(o,s))&&(s&&s.length&&(mn(e,r),e.restore(),l=a=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(mn(e,r),e.save(),vit(o,e,r),a=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=a=!0);var c=t instanceof pe&&t.autoBatch&&mit(t.style);a||git(i,u.transform)?(mn(e,r),HF(e,t)):c||mn(e,r);var f=Tp(t,r.inHover);t instanceof pe?(r.lastDrawType!==m5&&(l=!0,r.lastDrawType=m5),g5(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),fit(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof f3?(r.lastDrawType!==y5&&(l=!0,r.lastDrawType=y5),g5(e,t,u,l,r),dit(e,t,f)):t instanceof Ms?(r.lastDrawType!==_5&&(l=!0,r.lastDrawType=_5),pit(e,t,u,l,r),hit(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==b5&&(l=!0,r.lastDrawType=b5),_it(e,t,r)),c&&n&&mn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function _it(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},s,a;for(s=t.getCursor(),a=n.length;s<a;s++){var l=n[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),jl(e,l,o,s===a-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),jl(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var Nb=new Knt,w5=new Xp(100),S5=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function n1(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&Nb.delete(e);var o=Nb.get(e);if(o)return o;var s=ie(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var a={repeat:"repeat"};return l(a),a.rotation=s.rotation,a.scaleX=a.scaleY=i?1:1/r,Nb.set(e,a),e.dirty=!1,a;function l(u){for(var c=[r],f=!0,h=0;h<S5.length;++h){var d=s[S5[h]];if(d!=null&&!pt(d)&&!Mt(d)&&!Te(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=w5.get(p);v&&(i?u.svgElement=v:u.image=v)}var m=qF(s.dashArrayX),g=yit(s.dashArrayY),y=YF(s.symbol),b=bit(m),w=ZF(g),T=!i&&Tu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=A(),x;T&&(T.width=k.width*r,T.height=k.height*r,x=T.getContext("2d")),I(),f&&w5.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=k.width,u.svgHeight=k.height;function A(){for(var L=1,N=0,z=b.length;N<z;++N)L=R4(L,b[N]);for(var V=1,N=0,z=y.length;N<z;++N)V=R4(V,y[N].length);L*=V;var F=w*b.length*y.length;return{width:Math.max(1,Math.min(L,s.maxTileWidth)),height:Math.max(1,Math.min(F,s.maxTileHeight))}}function I(){x&&(x.clearRect(0,0,T.width,T.height),s.backgroundColor&&(x.fillStyle=s.backgroundColor,x.fillRect(0,0,T.width,T.height)));for(var L=0,N=0;N<g.length;++N)L+=g[N];if(L<=0)return;for(var z=-w,V=0,F=0,G=0;z<k.height;){if(V%2===0){for(var K=F/2%y.length,q=0,rt=0,At=0;q<k.width*2;){for(var Nt=0,N=0;N<m[G].length;++N)Nt+=m[G][N];if(Nt<=0)break;if(rt%2===0){var Pt=(1-s.symbolSize)*.5,Ct=q+m[G][rt]*Pt,Zt=z+g[V]*Pt,Y=m[G][rt]*s.symbolSize,ot=g[V]*s.symbolSize,J=At/2%y[K].length;yt(Ct,Zt,Y,ot,y[K][J])}q+=m[G][rt],++At,++rt,rt===m[G].length&&(rt=0)}++G,G===m.length&&(G=0)}z+=g[V],++F,++V,V===g.length&&(V=0)}function yt(Et,xt,ft,vt,B){var j=i?1:r,X=Wi(B,Et*j,xt*j,ft*j,vt*j,s.color,s.symbolKeepAspect);if(i){var Q=n.painter.renderOneToVNode(X);Q&&S.children.push(Q)}else XF(x,X)}}}}function YF(e){if(!e||e.length===0)return[["rect"]];if(Mt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Mt(e[r])){t=!1;break}if(t)return YF([e]);for(var n=[],r=0;r<e.length;++r)Mt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function qF(e){if(!e||e.length===0)return[[0,0]];if(Te(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Te(e[n])){r=!1;break}if(r)return qF([e]);for(var i=[],n=0;n<e.length;++n)if(Te(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=It(e[n],function(a){return Math.ceil(a)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function yit(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Te(e)){var t=Math.ceil(e);return[t,t]}var r=It(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function bit(e){return It(e,function(t){return ZF(t)})}function ZF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function wit(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(s){var a=n.getItemVisual(s,"decal");if(a){var l=n.ensureUniqueItemVisual(s,"style");l.decal=n1(a,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=n1(i,t)}}})}var Sit=new Xi;const Pi=Sit;var KF={};function Tit(e,t){KF[e]=t}function kit(e){return KF[e]}var Pit=typeof window<"u",Cit=1,Eit=800,Ait=900,Mit=1e3,xit=2e3,Iit=5e3,JF=1e3,Lit=1100,VP=2e3,QF=3e3,Oit=4e3,A_=4500,Rit=4600,Dit=5e3,Nit=6e3,t$=7e3,Fit={PROCESSOR:{FILTER:Mit,SERIES_FILTER:Eit,STATISTIC:Iit},VISUAL:{LAYOUT:JF,PROGRESSIVE_LAYOUT:Lit,GLOBAL:VP,CHART:QF,POST_CHART_LAYOUT:Rit,COMPONENT:Oit,BRUSH:Dit,CHART_ITEM:A_,ARIA:Nit,DECAL:t$}},zr="__flagInMainProcess",dn="__pendingUpdate",Fb="__needsUpdateStatus",T5=/^[a-zA-Z0-9_]+$/,$b="__connectUpdateStatus",k5=0,$it=1,zit=2;function e$(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return n$(this,e,t)}}function r$(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n$(this,e,t)}}function n$(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Xi.prototype[t].apply(e,r)}var i$=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Xi),o$=i$.prototype;o$.on=r$("on");o$.off=r$("off");var oc,zb,av,Us,Bb,Vb,Ub,Th,kh,P5,C5,Wb,E5,lv,A5,s$,Vn,M5,a$=function(e){St(t,e);function t(r,n,i){var o=e.call(this,new Wnt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Mt(n)&&(n=l$[n]),o._dom=r;var s="canvas",a="auto",l=!1,u=o._zr=I4(r,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Qt(i.useDirtyRect,l),useCoarsePointer:Qt(i.useCoarsePointer,a),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=C_(jt(u.flush,u),17),n=Wt(n),n&&hF(n,!0),o._theme=n,o._locale=Wet(i.locale||WN),o._coordSysMgr=new LP;var c=o._api=A5(o);function f(h,d){return h.__prio-d.__prio}return Zg(o1,f),Zg(L3,f),o._scheduler=new BF(o,c,L3,o1),o._messageCenter=new i$,o._initEvents(),o.resize=jt(o.resize,o),u.animation.on("frame",o._onframe,o),P5(u,o),C5(u,o),$m(o),o}return t.prototype._onframe=function(){if(!this._disposed){M5(this);var r=this._scheduler;if(this[dn]){var n=this[dn].silent;this[zr]=!0;try{oc(this),Us.update.call(this,null,this[dn].updateParams)}catch(l){throw this[zr]=!1,this[dn]=null,l}this._zr.flush(),this[zr]=!1,this[dn]=null,Th.call(this,n),kh.call(this,n)}else if(r.unfinished){var i=Cit,o=this._model,s=this._api;r.unfinished=!1;do{var a=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),Vb(this,o),r.performVisualTasks(o),lv(this,this._model,s,"remain",{}),i-=+new Date-a}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[zr]){if(this._disposed){this.id;return}var o,s,a;if(Dt(n)&&(i=n.lazyUpdate,o=n.silent,s=n.replaceMerge,a=n.transition,n=n.notMerge),this[zr]=!0,!this._model||n){var l=new krt(this._api),u=this._theme,c=this._model=new uF;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:s},O3);var f={seriesTransition:a,optionChanged:!0};if(i)this[dn]={silent:o,updateParams:f},this[zr]=!1,this.getZr().wakeUp();else{try{oc(this),Us.update.call(this,null,f)}catch(h){throw this[dn]=null,this[zr]=!1,h}this._ssr||this._zr.flush(),this[dn]=null,this[zr]=!1,Th.call(this,o),kh.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Pit&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Kt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return $(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],s=this;$(n,function(l){i.eachComponent({mainType:l},function(u){var c=s._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return $(o,function(l){l.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,s=Math.max,a=1/0;if(x5[i]){var l=a,u=a,c=-a,f=-a,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();$(jd,function(b,w){if(b.group===i){var T=n?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(Wt(r)),S=b.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=s(S.right,c),f=s(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,m=Tu.createCanvas(),g=I4(m,{renderer:n?"svg":"canvas"});if(g.resize({width:p,height:v}),n){var y="";return $(h,function(b){var w=b.left-l,T=b.top-u;y+='<g transform="translate('+w+","+T+')">'+b.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&g.painter.setBackgroundColor(r.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return r.connectedBackgroundColor&&g.add(new rr({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),$(h,function(b){var w=new Ms({style:{x:b.left*d-l,y:b.top*d-u,image:b.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return Bb(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return Bb(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,s=ub(i,r);return $(s,function(a,l){l.indexOf("Models")>=0&&$(a,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=ub(i,r,{defaultMainType:"series"}),s=o.seriesModel,a=s.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return l!=null?UF(a,l,n):E_(a,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;$(Bit,function(n){var i=function(o){var s=r.getModel(),a=o.target,l,u=n==="globalout";if(u?l={}:a&&Fc(a,function(p){var v=le(p);if(v&&v.dataIndex!=null){var m=v.dataModel||s.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ut({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&s.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:a,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),$(Wd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),$(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Xnt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&j7(this.getDom(),WP,"");var n=this,i=n._api,o=n._model;$(n._componentsViews,function(s){s.dispose(o,i)}),$(n._chartsViews,function(s){s.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete jd[n.id]},t.prototype.resize=function(r){if(!this[zr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[dn]&&(o==null&&(o=this[dn].silent),i=!0,this[dn]=null),this[zr]=!0;try{i&&oc(this),Us.update.call(this,{type:"resize",animation:ut({duration:0},r&&r.animation)})}catch(s){throw this[zr]=!1,s}this[zr]=!1,Th.call(this,o),kh.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Dt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!R3[r]){var i=R3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ut({},r);return n.type=Wd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Dt(n)||(n={silent:!!n}),!!i1[r.type]&&!!this._model){if(this[zr]){this._pendingActions.push(r);return}var i=n.silent;Ub.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Kt.browser.weChat&&this._throttledZrFlush(),Th.call(this,i),kh.call(this,i)}},t.prototype.updateLabelLayout=function(){Pi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){oc=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),zb(f,!0),zb(f,!1),h.plan()},zb=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,y=f._api,b=0;b<v.length;b++)v[b].__alive=!1;h?d.eachComponent(function(S,k){S!=="series"&&w(k)}):d.eachSeries(w);function w(S){var k=S.__requireNewView;S.__requireNewView=!1;var x="_ec_"+S.id+"_"+S.type,A=!k&&m[x];if(!A){var I=Mo(S.type),L=h?ui.getClass(I.main,I.sub):oi.getClass(I.sub);A=new L,A.init(d,y),m[x]=A,v.push(A),g.add(A.group)}S.__viewId=A.__id=x,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,y)}for(var b=0;b<v.length;){var T=v[b];T.__alive?b++:(!h&&T.renderTask.dispose(),g.remove(T.group),T.dispose(d,y),v.splice(b,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},av=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){$([].concat(f._componentsViews).concat(f._chartsViews),T);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var y={mainType:p,query:g};v&&(y.subType=v);var b=d.excludeSeriesId,w;b!=null&&(w=Yt(),$(er(b),function(S){var k=ii(S,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;if(!k)if(uM(d))if(S instanceof No)d.type===Jl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&Stt(S,d,f._api);else{var x=gP(S.mainType,S.componentIndex,d.name,f._api),A=x.focusSelf,I=x.dispatchers;d.type===Jl&&A&&!d.notBlur&&p3(S.mainType,S.componentIndex,f._api),I&&$(I,function(L){d.type===Jl?dp(L):pp(L)})}else m3(d)&&S instanceof No&&(Ptt(S,d,f._api),aM(S),Vn(f))},f),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;k||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,m,f._api,d)}},Us={prepareAndUpdate:function(f){oc(this),Us.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(!!d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),Vb(this,d),m.update(d,p),r(d),g.performVisualTasks(d,f),Wb(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",b=d.get("darkMode");v.setBackgroundColor(y),b!=null&&b!=="auto"&&v.setDarkMode(b),Pi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,y){if(g!=="series"){var b=h.getViewOfComponentModel(y);if(b&&b.__alive)if(b.updateTransform){var w=b.updateTransform(y,d,p,f);w&&w.update&&v.push(b)}else v.push(b)}});var m=Yt();d.eachSeries(function(g){var y=h._chartsMap[g.__viewId];if(y.updateTransform){var b=y.updateTransform(g,d,p,f);b&&b.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),lv(this,d,p,f,{},m),Pi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),oi.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),Wb(this,h,this._api,f,{}),Pi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),oi.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),Pi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Us.update.call(this,f)}},Bb=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,y=ub(v,d),b=0;b<m.length;b++){var w=m[b];if(w[h]&&(g=w[h](v,y,p))!=null)return g}},Vb=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},Ub=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=i1[v],y=g.actionInfo,b=(y.update||"update").split(":"),w=b.pop(),T=b[0]!=null&&Mo(b[0]);this[zr]=!0;var S=[f],k=!1;f.batch&&(k=!0,S=It(f.batch,function(V){return V=ie(ut({},V),f),V.batch=null,V}));var x=[],A,I=m3(f),L=uM(f);if(L&&dN(this._api),$(S,function(V){if(A=g.action(V,d._model,d._api),A=A||ut({},V),A.type=y.event||A.type,x.push(A),L){var F=uP(f),G=F.queryOptionMap,K=F.mainTypeSpecified,q=K?G.keys()[0]:"series";av(d,w,V,q),Vn(d)}else I?(av(d,w,V,"series"),Vn(d)):T&&av(d,w,V,T.main,T.sub)}),w!=="none"&&!L&&!I&&!T)try{this[dn]?(oc(this),Us.update.call(this,f),this[dn]=null):Us[w].call(this,f)}catch(V){throw this[zr]=!1,V}if(k?A={type:y.event||v,escapeConnect:m,batch:x}:A=x[0],this[zr]=!1,!h){var N=this._messageCenter;if(N.trigger(A.type,A),I){var z={type:"selectchanged",escapeConnect:m,selected:Ctt(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};N.trigger(z.type,z)}}},Th=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();Ub.call(this,d,f)}},kh=function(f){!f&&this.trigger("updated")},P5=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[dn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},C5=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Fc(p,g3);v&&(Ttt(v,d,h._api),Vn(h))}).on("mouseout",function(d){var p=d.target,v=Fc(p,g3);v&&(ktt(v,d,h._api),Vn(h))}).on("click",function(d){var p=d.target,v=Fc(p,function(y){return le(y).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=le(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,b){var w=b.get("zlevel")||0,T=b.get("z")||0,S=b.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:w,z:T,idx:b.componentIndex,type:y,key:S})}),p){var v=h.concat(d),m,g;Zg(v,function(y,b){return y.zlevel===b.zlevel?y.z-b.z:y.zlevel-b.zlevel}),$(v,function(y){var b=f.getComponent(y.type,y.idx),w=y.zlevel,T=y.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==g&&w++,g=T):g&&(w===m&&w++,g=""),m=w,b.setZLevel(w)})}}Wb=function(f,h,d,p,v){n(h),E5(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive=!1}),lv(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},E5=function(f,h,d,p,v,m){$(m||f._componentsViews,function(g){var y=g.__model;u(y,g),g.render(y,h,d,p),a(y,g),c(y,g)})},lv=function(f,h,d,p,v,m){var g=f._scheduler;v=ut(v||{},{updatedSeries:h.getSeries()}),Pi.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];w.__alive=!0;var T=w.renderTask;g.updatePayload(T,p),u(b,w),m&&m.get(b.uid)&&T.dirty(),T.perform(g.getPerformArgs(T))&&(y=!0),w.group.silent=!!b.get("silent"),s(b,w),aM(b)}),g.unfinished=y||g.unfinished,Pi.trigger("series:layoutlabels",h,d,v),Pi.trigger("series:transition",h,d,v),h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];a(b,w),c(b,w)}),o(f,h),Pi.trigger("series:afterupdate",h,d,v)},Vn=function(f){f[Fb]=!0,f.getZr().wakeUp()},M5=function(f){!f[Fb]||(f.getZr().storage.traverse(function(h){Bd(h)||i(h)}),f[Fb]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===u_&&f.states.emphasis?h.push("emphasis"):f.hoverState===Zp&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Kt.node&&!Kt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function s(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function a(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var y=f.childrenRef(),b=0;b<y.length;b++)p=Math.max(l(y[b],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Bd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Bd(g))return;if(g instanceof pe&&Itt(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=m;var b=g.getTextContent(),w=g.getTextGuideLine();b&&(b.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}A5=function(f){return new(function(h){St(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){dp(p,v),Vn(f)},d.prototype.leaveEmphasis=function(p,v){pp(p,v),Vn(f)},d.prototype.enterBlur=function(p){uN(p),Vn(f)},d.prototype.leaveBlur=function(p){vP(p),Vn(f)},d.prototype.enterSelect=function(p){cN(p),Vn(f)},d.prototype.leaveSelect=function(p){fN(p),Vn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(cF))(f)},s$=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[$b]=p}}$(Wd,function(d,p){f._messageCenter.on(p,function(v){if(x5[f.group]&&f[$b]!==k5){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];$(jd,function(y){y!==f&&y.group===f.group&&g.push(y)}),h(g,k5),$(g,function(y){y[$b]!==$it&&y.dispatchAction(m)}),h(g,zit)}})})}}(),t}(Xi),UP=a$.prototype;UP.on=e$("on");UP.off=e$("off");UP.one=function(e,t,r){var n=this;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var Bit=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var i1={},Wd={},L3=[],O3=[],o1=[],l$={},R3={},jd={},x5={},Vit=+new Date-0,WP="_echarts_instance_";function Uit(e,t,r){var n=!(r&&r.ssr);if(n){var i=Wit(e);if(i)return i}var o=new a$(e,t,r);return o.id="ec_"+Vit++,jd[o.id]=o,n&&j7(e,WP,o.id),s$(o),Pi.trigger("afterinit",o),o}function Wit(e){return jd[lQ(e,WP)]}function u$(e,t){l$[e]=t}function c$(e){he(O3,e)<0&&O3.push(e)}function f$(e,t){GP(L3,e,t,xit)}function jit(e){jP("afterinit",e)}function Git(e){jP("afterupdate",e)}function jP(e,t){Pi.on(e,t)}function Au(e,t,r){Ht(t)&&(r=t,t="");var n=Dt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Wd[t]&&(Ui(T5.test(n)&&T5.test(t)),i1[n]||(i1[n]={action:r,actionInfo:e}),Wd[t]=n)}function Hit(e,t){LP.register(e,t)}function Xit(e,t){GP(o1,e,t,JF,"layout")}function Mu(e,t){GP(o1,e,t,QF,"visual")}var I5=[];function GP(e,t,r,n,i){if((Ht(t)||Dt(t))&&(r=t,t=n),!(he(I5,r)>=0)){I5.push(r);var o=BF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function h$(e,t){R3[e]=t}function Yit(e,t,r){var n=kit("registerMap");n&&n(e,t,r)}var qit=Jrt;Mu(VP,Ent);Mu(A_,Ant);Mu(A_,Mnt);Mu(VP,jnt);Mu(A_,Gnt);Mu(t$,wit);c$(hF);f$(Ait,Lrt);h$("default",xnt);Au({type:Jl,event:Jl,update:Jl},Yr);Au({type:rm,event:rm,update:rm},Yr);Au({type:Fd,event:Fd,update:Fd},Yr);Au({type:nm,event:nm,update:nm},Yr);Au({type:$d,event:$d,update:$d},Yr);u$("light",Vnt);u$("dark",Unt);function Ph(e){return e==null?0:e.length||1}function L5(e){return e}var Zit=function(){function e(t,r,n,i,o,s){this._old=t,this._new=r,this._oldKeyGetter=n||L5,this._newKeyGetter=i||L5,this.context=o,this._diffModeMultiple=s==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var s=0;s<t.length;s++){var a=i[s],l=n[a],u=Ph(l);if(u>1){var c=l.shift();l.length===1&&(n[a]=l[0]),this._update&&this._update(c,s)}else u===1?(n[a]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],s=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,s,"_newKeyGetter");for(var a=0;a<o.length;a++){var l=o[a],u=n[l],c=i[l],f=Ph(u),h=Ph(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(s,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],s=Ph(o);if(s>1)for(var a=0;a<s;a++)this._add&&this._add(o[a]);else s===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,s=0;s<t.length;s++){var a="_ec_"+this[i](t[s],s);if(o||(n[s]=a),!!r){var l=r[a],u=Ph(l);u===0?(r[a]=s,o&&n.push(a)):u===1?r[a]=[l,s]:l.push(s)}}},e}();const d$=Zit;var Kit=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Jit(e,t){var r={},n=r.encode={},i=Yt(),o=[],s=[],a={};$(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;jb(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),tot(d.type)&&(o[0]=h),jb(a,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&s.push(h)}nF.each(function(m,g){var y=jb(n,g),b=d.otherDims[g];b!=null&&b!==!1&&(y[b]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=It(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?s=f.slice():s.length||(s=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=s,r.userOutput=new Kit(a,t),r}function jb(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Qit(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function tot(e){return!(e==="ordinal"||e==="time")}var eot=function(){function e(t){this.otherDims={},t!=null&&ut(this,t)}return e}();const am=eot;var rot=Re(),not={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},p$=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=m$(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=pF(this.source),n=!_$(t),i="",o=[],s=0,a=0;s<t;s++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[a];if(f&&f.storeDimIndex===s)l=r?f.name:null,u=f.type,c=f.ordinalMeta,a++;else{var h=this.getSourceDimension(s);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=not[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var s=this.getSourceDimension(r);s&&(i=s.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function v$(e){return e instanceof p$}function g$(e){for(var t=Yt(),r=0;r<(e||[]).length;r++){var n=e[r],i=Dt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function m$(e){var t=rot(e);return t.dimNameMap||(t.dimNameMap=g$(e.dimensionsDefine))}function _$(e){return e>30}var Ch=Dt,Ws=It,iot=typeof Int32Array>"u"?Array:Int32Array,oot="e\0\0",O5=-1,sot=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],aot=["_approximateExtent"],R5,uv,Eh,Ah,Gb,cv,Hb,lot=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;v$(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},s=[],a={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Mt(f)?new am({name:f}):f instanceof am?f:new am(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};s.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(a[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=a,this._dimOmitted){var v=this._dimIdxToName=Yt();$(s,function(m){v.set(o[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Te(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof T3&&(o=t),!o){var s=this.dimensions,a=OP(t)||Zr(t)?new vF(t,s.length):t;o=new T3;var l=Ws(s,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(a,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Jit(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var a=i;a<o;a++){var l=a-i;this._nameList[a]=r[l],s&&Hb(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Pa&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,s=this._idList,a=i.getSource().sourceFormat,l=a===hi;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&ZJ(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=ii(h,null));var d=f.id;s[c]==null&&d!=null&&(s[c]=ii(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)Hb(this,c);R5(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Ch(t)?ut(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=Eh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return uv(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return pt(t)?i.getValues(Ws(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?O5:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ws(Ah(t),this._getStoreDimIndex,this);this._store.each(o,i?jt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ws(Ah(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?jt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ge(t);return $(i,function(o){var s=r._getStoreDimIndex(o);n[s]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ht(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,s=Ws(Ah(t),this._getStoreDimIndex,this),a=cv(this);return a._store=this._store.map(s,o?jt(r,o):r),a},e.prototype.modify=function(t,r,n,i){var o=n||i||this,s=Ws(Ah(t),this._getStoreDimIndex,this);this._store.modify(s,o?jt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=cv(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=cv(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Ir(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new d$(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return uv(t,n)},function(n){return uv(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Ch(t)?ut(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),pt(o)?o=o.slice():Ch(o)&&(o=ut({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Ch(r)?ut(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Ch(t)?ut(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ut(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;dtt(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){$(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Ws(this.dimensions,this._getDimInfo,this),this.hostModel)),Gb(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ht(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(Jk(arguments)))})},e.internalField=function(){R5=function(t){var r=t._invertedIndicesMap;$(r,function(n,i){var o=t._dimInfos[i],s=o.ordinalMeta,a=t._store;if(s){n=r[i]=new iot(s.categories.length);for(var l=0;l<n.length;l++)n[l]=O5;for(var l=0;l<a.count();l++)n[a.get(o.storeDimIndex,l)]=l}})},Eh=function(t,r,n){return ii(t._getCategory(r,n),null)},uv=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=Eh(t,t._idDimIdx,r)),n==null&&(n=oot+r),n},Ah=function(t){return pt(t)||(t=t!=null?[t]:[]),t},cv=function(t){var r=new e(t._schema?t._schema:Ws(t.dimensions,t._getDimInfo,t),t.hostModel);return Gb(r,t),r},Gb=function(t,r){$(sot.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,$(aot,function(n){t[n]=Wt(r[n])}),t._calculationInfo=ut({},r._calculationInfo)},Hb=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,s=t._idDimIdx,a=n[r],l=i[r];if(a==null&&o!=null&&(n[r]=a=Eh(t,o,r)),l==null&&s!=null&&(i[r]=l=Eh(t,s,r)),l==null&&a!=null){var u=t._nameRepeatCount,c=u[a]=(u[a]||0)+1;l=a,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Ql=lot;function y$(e,t){OP(e)||(e=RP(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=Yt(),o=[],s=cot(e,r,n,t.dimensionsCount),a=t.canOmitUnusedDimensions&&_$(s),l=n===e.dimensionsDefine,u=l?m$(e):g$(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,s));for(var f=Yt(c),h=new kF(s),d=0;d<h.length;d++)h[d]=-1;function p(A){var I=h[A];if(I<0){var L=n[A],N=Dt(L)?L:{name:L},z=new am,V=N.name;V!=null&&u.get(V)!=null&&(z.name=z.displayName=V),N.type!=null&&(z.type=N.type),N.displayName!=null&&(z.displayName=N.displayName);var F=o.length;return h[A]=F,z.storeDimIndex=A,o.push(z),z}return o[I]}if(!a)for(var d=0;d<s;d++)p(d);f.each(function(A,I){var L=er(A).slice();if(L.length===1&&!Mt(L[0])&&L[0]<0){f.set(I,!1);return}var N=f.set(I,[]);$(L,function(z,V){var F=Mt(z)?u.get(z):z;F!=null&&F<s&&(N[V]=F,m(p(F),I,V))})});var v=0;$(r,function(A){var I,L,N,z;if(Mt(A))I=A,z={};else{z=A,I=z.name;var V=z.ordinalMeta;z.ordinalMeta=null,z=ut({},z),z.ordinalMeta=V,L=z.dimsDef,N=z.otherDims,z.name=z.coordDim=z.coordDimIndex=z.dimsDef=z.otherDims=null}var F=f.get(I);if(F!==!1){if(F=er(F),!F.length)for(var G=0;G<(L&&L.length||1);G++){for(;v<s&&p(v).coordDim!=null;)v++;v<s&&F.push(v++)}$(F,function(K,q){var rt=p(K);if(l&&z.type!=null&&(rt.type=z.type),m(ie(rt,z),I,q),rt.name==null&&L){var At=L[q];!Dt(At)&&(At={name:At}),rt.name=rt.displayName=At.name,rt.defaultTooltip=At.defaultTooltip}N&&ie(rt.otherDims,N)})}});function m(A,I,L){nF.get(I)!=null?A.otherDims[I]=L:(A.coordDim=I,A.coordDimIndex=L,i.set(I,!0))}var g=t.generateCoord,y=t.generateCoordCount,b=y!=null;y=g?y||1:0;var w=g||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(a)$(o,function(A){T(A)}),o.sort(function(A,I){return A.storeDimIndex-I.storeDimIndex});else for(var S=0;S<s;S++){var k=p(S),x=k.coordDim;x==null&&(k.coordDim=fot(w,i,b),k.coordDimIndex=0,(!g||y<=0)&&(k.isExtraCoord=!0),y--),T(k),k.type==null&&(aF(e,S)===En.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return uot(o),new p$({source:e,dimensions:o,fullDimensionCount:s,dimensionOmitted:a})}function uot(e){for(var t=Yt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function cot(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return $(t,function(o){var s;Dt(o)&&(s=o.dimsDef)&&(i=Math.max(i,s.length))}),i}function fot(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var hot=function(){function e(t){this.coordSysDims=[],this.axisMap=Yt(),this.categoryAxisMap=Yt(),this.coordSysName=t}return e}();function dot(e){var t=e.get("coordinateSystem"),r=new hot(t),n=pot[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var pot={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Li).models[0],o=e.getReferringComponents("yAxis",Li).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),sc(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),sc(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Li).models[0];t.coordSysDims=["single"],r.set("single",i),sc(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Li).models[0],o=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",s),sc(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),sc(s)&&(n.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=o.dimensions.slice();$(o.parallelAxisIndex,function(a,l){var u=i.getComponent("parallelAxis",a),c=s[l];r.set(c,u),sc(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function sc(e){return e.get("type")==="category"}function vot(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,s,a;got(t)?o=t:(s=t.schema,o=s.dimensions,a=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if($(o,function(y,b){Mt(y)&&(o[b]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;$(o,function(y){y.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};s?(a&&(m.storeDimIndex=a.ensureCalculationDimension(h,p),g.storeDimIndex=a.ensureCalculationDimension(f,p)),s.appendCalculationDimension(m),s.appendCalculationDimension(g)):(o.push(m),o.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function got(e){return!v$(e.schema)}function vu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function b$(e,t){return vu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function mot(e,t){var r=e.get("coordinateSystem"),n=LP.get(r),i;return t&&t.coordSysDims&&(i=It(t.coordSysDims,function(o){var s={name:o},a=t.axisMap.get(o);if(a){var l=a.get("type");s.type=Qit(l)}return s})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function _ot(e,t,r){var n,i;return r&&$(e,function(o,s){var a=o.coordDim,l=r.categoryAxisMap.get(a);l&&(n==null&&(n=s),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function Qp(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=RP(e)):(i=n.getSource(),o=i.sourceFormat===hi);var s=dot(t),a=mot(t,s),l=r.useEncodeDefaulter,u=Ht(l)?l:l?we(irt,a,t):null,c={coordDimensions:a,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=y$(i,c),h=_ot(f.dimensions,r.createInvertedIndices,s),d=o?null:n.getSharedDataStore(f),p=vot(t,{schema:f,store:d}),v=new Ql(f,t);v.setCalculationInfo(p);var m=h!=null&&yot(i)?function(g,y,b,w){return w===h?b:this.defaultDimValueGetter(g,y,b,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,m),v}function yot(e){if(e.sourceFormat===hi){var t=bot(e.data||[]);return!pt(Yp(t))}}function bot(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var w$=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();s_(w$);const Ls=w$;var wot=0,Sot=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++wot}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&It(n,Tot);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Mt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Yt(this.categories))},e}();function Tot(e){return Dt(e)&&e.value!=null?e.value:e+""}const D3=Sot;function N3(e){return e.type==="interval"||e.type==="log"}function kot(e,t,r,n){var i={},o=e[1]-e[0],s=i.interval=z7(o/t,!0);r!=null&&s<r&&(s=i.interval=r),n!=null&&s>n&&(s=i.interval=n);var a=i.intervalPrecision=S$(s),l=i.niceTickExtent=[tr(Math.ceil(e[0]/s)*s,a),tr(Math.floor(e[1]/s)*s,a)];return Pot(l,e),i}function Xb(e){var t=Math.pow(10,aP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,tr(r*t)}function S$(e){return Ao(e)+2}function D5(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Pot(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),D5(e,0,t),D5(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function M_(e,t){return e>=t[0]&&e<=t[1]}function x_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function I_(e,t){return e*(t[1]-t[0])+t[0]}var T$=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new D3({})),pt(i)&&(i=new D3({categories:It(i,function(o){return Dt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Mt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),M_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),x_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(I_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],s=0,a=this._ordinalMeta.categories.length,l=Math.min(a,n.length);s<l;++s){var u=n[s];i[s]=u,o[u]=s}for(var c=0;s<a;++s){for(;o[c]!=null;)c++;i.push(c),o[c]=s}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ls);Ls.registerClass(T$);const k$=T$;var kl=tr,P$=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return M_(r,this._extent)},t.prototype.normalize=function(r){return x_(r,this._extent)},t.prototype.scale=function(r){return I_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=S$(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,s=this._intervalPrecision,a=[];if(!n)return a;var l=1e4;i[0]<o[0]&&(r?a.push({value:kl(o[0]-n,s)}):a.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(a.push({value:u}),u=kl(u+n,s),u!==a[a.length-1].value);)if(a.length>l)return[];var c=a.length?a[a.length-1].value:o[1];return i[1]>c&&(r?a.push({value:kl(c+n,s)}):a.push({value:i[1]})),a},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),s=1;s<n.length;s++){for(var a=n[s],l=n[s-1],u=0,c=[],f=a.value-l.value,h=f/r;u<r-1;){var d=kl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Ao(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=kl(r.value,i,!0);return QN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,s=o[1]-o[0];if(!!isFinite(s)){s<0&&(s=-s,o.reverse());var a=kot(o,r,n,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var s=this._interval;r.fixMin||(n[0]=kl(Math.floor(n[0]/s)*s)),r.fixMax||(n[1]=kl(Math.ceil(n[1]/s)*s))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ls);Ls.registerClass(P$);const t0=P$;var C$=typeof Float32Array<"u",Cot=C$?Float32Array:Array;function fs(e){return pt(e)?C$?new Float32Array(e):e:new Cot(e)}var F3="__ec_stack_";function HP(e){return e.get("stack")||F3+e.seriesIndex}function XP(e){return e.dim+e.index}function Eot(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(ie({bandWidth:i,axisKey:n,stackId:F3+o},e));for(var s=M$(t),a=[],o=0;o<e.count;o++){var l=s[n][F3+o];l.offsetCenter=l.offset+l.width/2,a.push(l)}return a}}function E$(e,t){var r=[];return t.eachSeriesByType(e,function(n){x$(n)&&r.push(n)}),r}function Aot(e){var t={};$(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);t[h]?t[h].push(g):t[h]=[g]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,s=1;s<i.length;++s){var a=i[s]-i[s-1];a>0&&(o=o===null?a:Math.min(o,a))}r[n]=o}}return r}function A$(e){var t=Aot(e),r=[];return $(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),s=o.getExtent(),a;if(o.type==="category")a=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(s[1]-s[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);a=u?c/h*u:c}else{var d=n.getData();a=Math.abs(s[1]-s[0])/d.count()}var p=Ke(n.get("barWidth"),a),v=Ke(n.get("barMaxWidth"),a),m=Ke(n.get("barMinWidth")||(I$(n)?.5:1),a),g=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:a,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:XP(o),stackId:HP(n)})}),M$(r)}function M$(e){var t={};$(e,function(n,i){var o=n.axisKey,s=n.bandWidth,a=t[o]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=a.stacks;t[o]=a;var u=n.stackId;l[u]||a.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(a.remainedWidth,c),a.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(a.gap=d);var p=n.barCategoryGap;p!=null&&(a.categoryGap=p)});var r={};return $(t,function(n,i){r[i]={};var o=n.stacks,s=n.bandWidth,a=n.categoryGap;if(a==null){var l=ge(o).length;a=Math.max(35-l*4,15)+"%"}var u=Ke(a,s),c=Ke(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),$(o,function(g){var y=g.maxWidth,b=g.minWidth;if(g.width){var w=g.width;y&&(w=Math.min(w,y)),b&&(w=Math.max(w,b)),g.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),b&&b>w&&(w=b),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;$(o,function(g,y){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;$(o,function(g,y){r[i][y]=r[i][y]||{bandWidth:s,offset:m,width:g.width},m+=g.width*(1+c)})}),r}function Mot(e,t,r){if(e&&t){var n=e[XP(t)];return n!=null&&r!=null?n[HP(r)]:n}}function xot(e,t){var r=E$(e,t),n=A$(r);$(r,function(i){var o=i.getData(),s=i.coordinateSystem,a=s.getBaseAxis(),l=HP(i),u=n[XP(a)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function Iot(e){return{seriesType:e,plan:$P(),reset:function(t){if(!!x$(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),s=r.getDimensionIndex(r.mapDimension(o.dim)),a=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=vu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=Lot(i,o),p=I$(t),v=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),g=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(b,w){for(var T=b.count,S=p&&fs(T*3),k=p&&l&&fs(T*3),x=p&&fs(T),A=n.master.getRect(),I=h?A.width:A.height,L,N=w.getStore(),z=0;(L=b.next())!=null;){var V=N.get(f?m:s,L),F=N.get(a,L),G=d,K=void 0;f&&(K=+V-N.get(s,L));var q=void 0,rt=void 0,At=void 0,Nt=void 0;if(h){var Pt=n.dataToPoint([V,F]);if(f){var Ct=n.dataToPoint([K,F]);G=Ct[0]}q=G,rt=Pt[1]+y,At=Pt[0]-G,Nt=g,Math.abs(At)<v&&(At=(At<0?-1:1)*v)}else{var Pt=n.dataToPoint([F,V]);if(f){var Ct=n.dataToPoint([F,K]);G=Ct[1]}q=Pt[0]+y,rt=G,At=g,Nt=Pt[1]-G,Math.abs(Nt)<v&&(Nt=(Nt<=0?-1:1)*v)}p?(S[z]=q,S[z+1]=rt,S[z+2]=h?At:Nt,k&&(k[z]=h?A.x:q,k[z+1]=h?rt:A.y,k[z+2]=I),x[L]=L):w.setItemLayout(L,{x:q,y:rt,width:At,height:Nt}),z+=3}p&&w.setLayout({largePoints:S,largeDataIndices:x,largeBackgroundPoints:k,valueAxisHorizontal:h})}}}}}}function x$(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function I$(e){return e.pipelineContext&&e.pipelineContext.large}function Lot(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Oot=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},L$=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return m_(r.value,PM[Xet(Zc(this._minLevelUnit))]||PM.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),s=this.getSetting("locale");return Yet(r,n,i,s,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),s=Bot(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(s),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=ri,n[1]+=ri),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-ri}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,s=o[1]-o[0];this._approxInterval=s/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var a=fv.length,l=Math.min(Oot(fv,this._approxInterval,0,a),a-1);this._interval=fv[l][1],this._minLevelUnit=fv[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return Te(r)?r:+ws(r)},t.prototype.contain=function(r){return M_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return x_(this.parse(r),this._extent)},t.prototype.scale=function(r){return I_(r,this._extent)},t.type="time",t}(t0),fv=[["second",EP],["minute",AP],["hour",Vd],["quarter-day",Vd*6],["half-day",Vd*12],["day",ri*1.2],["half-week",ri*3.5],["week",ri*7],["month",ri*31],["quarter",ri*95],["half-year",kM/2],["year",kM]];function Rot(e,t,r,n){var i=ws(t),o=ws(r),s=function(p){return CM(i,p,n)===CM(o,p,n)},a=function(){return s("year")},l=function(){return a()&&s("month")},u=function(){return l()&&s("day")},c=function(){return u()&&s("hour")},f=function(){return c()&&s("minute")},h=function(){return f()&&s("second")},d=function(){return h()&&s("millisecond")};switch(e){case"year":return a();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function Dot(e,t){return e/=ri,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Not(e){var t=30*ri;return e/=t,e>6?6:e>3?3:e>2?2:1}function Fot(e){return e/=Vd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function N5(e,t){return e/=t?AP:EP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function $ot(e){return z7(e,!0)}function zot(e,t,r){var n=new Date(e);switch(Zc(t)){case"year":case"month":n[XN(r)](0);case"day":n[YN(r)](1);case"hour":n[qN(r)](0);case"minute":n[ZN(r)](0);case"second":n[KN(r)](0),n[JN(r)](0)}return n.getTime()}function Bot(e,t,r,n){var i=1e4,o=GN,s=0;function a(I,L,N,z,V,F,G){for(var K=new Date(L),q=L,rt=K[z]();q<N&&q<=n[1];)G.push({value:q}),rt+=I,K[V](rt),q=K.getTime();G.push({value:q,notAdd:!0})}function l(I,L,N){var z=[],V=!L.length;if(!Rot(Zc(I),n[0],n[1],r)){V&&(L=[{value:zot(new Date(n[0]),I,r)},{value:n[1]}]);for(var F=0;F<L.length-1;F++){var G=L[F].value,K=L[F+1].value;if(G!==K){var q=void 0,rt=void 0,At=void 0,Nt=!1;switch(I){case"year":q=Math.max(1,Math.round(t/ri/365)),rt=MP(r),At=qet(r);break;case"half-year":case"quarter":case"month":q=Not(t),rt=Kc(r),At=XN(r);break;case"week":case"half-week":case"day":q=Dot(t),rt=__(r),At=YN(r),Nt=!0;break;case"half-day":case"quarter-day":case"hour":q=Fot(t),rt=yp(r),At=qN(r);break;case"minute":q=N5(t,!0),rt=y_(r),At=ZN(r);break;case"second":q=N5(t,!1),rt=b_(r),At=KN(r);break;case"millisecond":q=$ot(t),rt=w_(r),At=JN(r);break}a(q,G,K,rt,At,Nt,z),I==="year"&&N.length>1&&F===0&&N.unshift({value:N[0].value-q})}}for(var F=0;F<z.length;F++)N.push(z[F]);return z}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&s++<i;++d){var p=Zc(o[d]);if(!!Het(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Zc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(I,L){return I.value-L.value});for(var m=[],g=0;g<c.length;++g){var y=c[g].value;(g===0||c[g-1].value!==y)&&(m.push(c[g]),y>=n[0]&&y<=n[1]&&f++)}var b=(n[1]-n[0])/t;if(f>b*1.5&&h>b/1.5||(u.push(m),f>b||e===o[d]))break}c=[]}}}for(var w=Mr(It(u,function(I){return Mr(I,function(L){return L.value>=n[0]&&L.value<=n[1]&&!L.notAdd})}),function(I){return I.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var k=w[d],x=0;x<k.length;++x)T.push({value:k[x].value,level:S-d});T.sort(function(I,L){return I.value-L.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Ls.registerClass(L$);const Vot=L$;var F5=Ls.prototype,Gd=t0.prototype,Uot=tr,Wot=Math.floor,jot=Math.ceil,hv=Math.pow,_i=Math.log,YP=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new t0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),s=Gd.getTicks.call(this,r);return It(s,function(a){var l=a.value,u=tr(hv(this.base,l));return u=l===i[0]&&this._fixMin?dv(u,o[0]):u,u=l===i[1]&&this._fixMax?dv(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=_i(this.base);r=_i(Math.max(0,r))/i,n=_i(Math.max(0,n))/i,Gd.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=F5.getExtent.call(this);n[0]=hv(r,n[0]),n[1]=hv(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=dv(n[0],o[0])),this._fixMax&&(n[1]=dv(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=_i(r[0])/_i(n),r[1]=_i(r[1])/_i(n),F5.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=XJ(i),s=r/i*o;for(s<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var a=[tr(jot(n[0]/o)*o),tr(Wot(n[1]/o)*o)];this._interval=o,this._niceExtent=a}},t.prototype.calcNiceExtent=function(r){Gd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=_i(r)/_i(this.base),M_(r,this._extent)},t.prototype.normalize=function(r){return r=_i(r)/_i(this.base),x_(r,this._extent)},t.prototype.scale=function(r){return r=I_(r,this._extent),hv(this.base,r)},t.type="log",t}(Ls),O$=YP.prototype;O$.getMinorTicks=Gd.getMinorTicks;O$.getLabel=Gd.getLabel;function dv(e,t){return Uot(e,Ao(t))}Ls.registerClass(YP);const Got=YP;var Hot=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ht(o)?this._modelMinNum=pv(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=pv(t,o));var s=this._modelMaxRaw=r.get("max",!0);if(Ht(s)?this._modelMaxNum=pv(t,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=pv(t,s)),i)this._axisDataLen=r.getCategories().length;else{var a=r.get("boundaryGap"),l=pt(a)?a:[a||0,a||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ys(l[0],1),ys(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,s=t?null:n-r||Math.abs(r),a=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=a!=null,c=l!=null;a==null&&(a=t?i?0:NaN:r-o[0]*s),l==null&&(l=t?i?i-1:NaN:n+o[1]*s),(a==null||!isFinite(a))&&(a=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=Fm(a)||Fm(l)||t&&!i;this._needCrossZero&&(a>0&&l>0&&!u&&(a=0),a<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(a=h,u=!0),d!=null&&(l=d,c=!0),{min:a,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[Yot[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Xot[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Xot={min:"_determinedMin",max:"_determinedMax"},Yot={min:"_dataMin",max:"_dataMax"};function qot(e,t,r){var n=e.rawExtentInfo;return n||(n=new Hot(e,t,r),e.rawExtentInfo=n,n)}function pv(e,t){return t==null?null:Fm(t)?NaN:e.parse(t)}function R$(e,t){var r=e.type,n=qot(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,s=t.ecModel;if(s&&r==="time"){var a=E$("bar",s),l=!1;if($(a,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=A$(a),c=Zot(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function Zot(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],s=Mot(n,r.axis);if(s===void 0)return{min:e,max:t};var a=1/0;$(s,function(d){a=Math.min(d.offset,a)});var l=-1/0;$(s,function(d){l=Math.max(d.offset+d.width,l)}),a=Math.abs(a),l=Math.abs(l);var u=a+l,c=t-e,f=1-(a+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(a/u),{min:e,max:t}}function $5(e,t){var r=t,n=R$(e,r),i=n.extent,o=r.get("splitNumber");e instanceof Got&&(e.base=r.get("logBase"));var s=e.type,a=r.get("interval"),l=s==="interval"||s==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),a!=null&&e.setInterval&&e.setInterval(a)}function Kot(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new k$({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Vot({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ls.getClass(t)||t0)}}function Jot(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function e0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Mt(t)?function(n){return function(i){var o=e.scale.getLabel(i),s=n.replace("{value}",o!=null?o:"");return s}}(t):Ht(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(qP(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function qP(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Qot(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof k$?i=r.count():(n=r.getTicks(),i=n.length);var s=e.getLabelModel(),a=e0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=a(f,c),d=s.getTextRect(h),p=tst(d,s.get("rotate")||0);l?l.union(p):l=p}return l}}function tst(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),s=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),a=new ce(e.x,e.y,o,s);return a}function ZP(e){var t=e.get("interval");return t==null?"auto":t}function D$(e){return e.type==="category"&&ZP(e.getLabelModel())===0}function est(e,t){var r={};return $(e.mapDimensionsAll(t),function(n){r[b$(e,n)]=!0}),ge(r)}var rst=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),z5=[],nst={registerPreprocessor:c$,registerProcessor:f$,registerPostInit:jit,registerPostUpdate:Git,registerUpdateLifecycle:jP,registerAction:Au,registerCoordinateSystem:Hit,registerLayout:Xit,registerVisual:Mu,registerTransform:qit,registerLoading:h$,registerMap:Yit,registerImpl:Tit,PRIORITY:Fit,ComponentModel:Me,ComponentView:ui,SeriesModel:No,ChartView:oi,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){ui.registerClass(e)},registerSeriesModel:function(e){No.registerClass(e)},registerChartView:function(e){oi.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){VJ(e,t)}};function wr(e){if(pt(e)){$(e,function(t){wr(t)});return}he(z5,e)>=0||(z5.push(e),Ht(e)&&(e={install:e}),e.install(nst))}var kp=Re();function ist(e){return e.type==="category"?sst(e):lst(e)}function ost(e,t){return e.type==="category"?ast(e,t):{ticks:It(e.scale.getTicks(),function(r){return r.value})}}function sst(e){var t=e.getLabelModel(),r=N$(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function N$(e,t){var r=F$(e,"labels"),n=ZP(t),i=$$(r,n);if(i)return i;var o,s;return Ht(n)?o=V$(e,n):(s=n==="auto"?ust(e):n,o=B$(e,s)),z$(r,n,{labels:o,labelCategoryInterval:s})}function ast(e,t){var r=F$(e,"ticks"),n=ZP(t),i=$$(r,n);if(i)return i;var o,s;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ht(n))o=V$(e,n,!0);else if(n==="auto"){var a=N$(e,e.getLabelModel());s=a.labelCategoryInterval,o=It(a.labels,function(l){return l.tickValue})}else s=n,o=B$(e,s,!0);return z$(r,n,{ticks:o,tickCategoryInterval:s})}function lst(e){var t=e.scale.getTicks(),r=e0(e);return{labels:It(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function F$(e,t){return kp(e)[t]||(kp(e)[t]=[])}function $$(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function z$(e,t,r){return e.push({key:t,value:r}),r}function ust(e){var t=kp(e).autoInterval;return t!=null?t:kp(e).autoInterval=e.calculateCategoryInterval()}function cst(e){var t=fst(e),r=e0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),s=i.count();if(o[1]-o[0]<1)return 0;var a=1;s>40&&(a=Math.max(1,Math.floor(s/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=a){var p=0,v=0,m=iP(r({value:l}),t.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,y=d/f;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(g,y))),w=kp(e.model),T=e.getExtent(),S=w.lastAutoInterval,k=w.lastTickCount;return S!=null&&k!=null&&Math.abs(S-b)<=1&&Math.abs(k-s)<=1&&S>b&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?b=S:(w.lastTickCount=s,w.lastAutoInterval=b,w.axisExtent0=T[0],w.axisExtent1=T[1]),b}function fst(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function B$(e,t,r){var n=e0(e),i=e.scale,o=i.getExtent(),s=e.getLabelModel(),a=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=D$(e),h=s.get("showMinLabel")||f,d=s.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(m){var g={value:m};a.push(r?m:{formattedLabel:n(g),rawLabel:i.getLabel(g),tickValue:m})}return a}function V$(e,t,r){var n=e.scale,i=e0(e),o=[];return $(n.getTicks(),function(s){var a=n.getLabel(s),l=s.value;t(s.value,a)&&o.push(r?l:{formattedLabel:i(s),rawLabel:a,tickValue:l})}),o}var B5=[0,1],hst=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return jJ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),V5(n,i.count())),bs(t,B5,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),V5(n,i.count()));var o=bs(t,n,B5,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=ost(this,r),i=n.ticks,o=It(i,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),s=r.get("alignWithLabel");return dst(this,o,s,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=It(n,function(o){return It(o,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},e.prototype.getViewLabels=function(){return ist(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return cst(this)},e}();function V5(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function dst(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),s,a;if(i===1)t[0].coord=o[0],s=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;$(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();a=1+c[1]-t[i-1].tickValue,s={coord:t[i-1].coord+u*a},t.push(s)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],s.coord)&&(n?s.coord=o[1]:t.pop()),n&&h(s.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=tr(d),p=tr(p),f?d>p:d<p}}const pst=hst;function vst(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),s=i.getBoundingRect(),a=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=s.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=a?new Ym(s,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:s,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:a,transform:o})}}return t}function gst(e){var t=[];e.sort(function(v,m){return m.priority-v.priority});var r=new ce(0,0,0,0);function n(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],s=o.axisAligned,a=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(s&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Ym(p.localRect,p.transform)),f||(f=new Ym(a,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function U5(e,t,r){var n=Tu.createCanvas(),i=t.getWidth(),o=t.getHeight(),s=n.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var mst=function(e){Ee(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var s;i=i||jm,typeof r=="string"?s=U5(r,n,i):Dt(r)&&(s=r,r=s.id),o.id=r,o.dom=s;var a=s.style;return a&&(d7(s),s.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=U5("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],a=this.maxRepaintRectCount,l=!1,u=new ce(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(s.length===0){var b=new ce(0,0,0,0);b.copy(y),s.push(b)}else{for(var w=!1,T=1/0,S=0,k=0;k<s.length;++k){var x=s[k];if(x.intersect(y)){var A=new ce(0,0,0,0);A.copy(x),A.union(y),s[k]=A,w=!0;break}else if(l){u.copy(y),u.union(x);var I=y.width*y.height,L=x.width*x.height,N=u.width*u.height,z=N-I-L;z<T&&(T=z,S=k)}}if(l&&(s[S].union(y),w=!0),!w){var b=new ce(0,0,0,0);b.copy(y),s.push(b)}l||(l=s.length>=a)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&In||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&In||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<s.length;){if(s[f].isZero()){s.splice(f,1);continue}for(var g=f+1;g<s.length;)s[f].intersect(s[g])?(m=!0,s[f].union(s[g]),s.splice(g,1)):g++;f++}}while(m);return this._paintRects=s,s},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,s=o.style,a=this.domBack;s&&(s.width=r+"px",s.height=n+"px"),o.width=r*i,o.height=n*i,a&&(a.width=r*i,a.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,s=this.ctx,a=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,a/f,l/f));var d=this.domBack;function p(v,m,g,y){if(s.clearRect(v,m,g,y),n&&n!=="transparent"){var b=void 0;n_(n)?(b=n.__canvasGradient||x3(s,n,{x:0,y:0,width:g,height:y}),n.__canvasGradient=b):dK(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,b=I3(s,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),s.save(),s.fillStyle=b||n,s.fillRect(v,m,g,y),s.restore()}u&&(s.save(),s.globalAlpha=c,s.drawImage(d,v,m,g,y),s.restore())}!i||u?p(0,0,a,l):i.length&&$(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Xi);const Yb=mst;var W5=1e5,Pl=314159,vv=.01,_st=.001;function yst(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function bst(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var wst=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ut({},n||{}),this.dpr=n.devicePixelRatio||jm,this._singleCanvas=o,this.root=t;var s=t.style;s&&(d7(t),t.innerHTML=""),this.storage=r;var a=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new Yb(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Pl]=d,d.zlevel=Pl,a.push(Pl),this._domRoot=t}else{this._width=sv(t,0,n),this._height=sv(t,1,n);var u=this._domRoot=bst(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var s=i[o],a=this._layers[s];if(!a.__builtin__&&a.refresh){var l=o===0?this._backgroundColor:null;a.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,s=0;s<r;s++){var a=t[s];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(W5)),o||(o=n.ctx,o.save()),jl(o,a,i,s===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(W5)},e.prototype.paintOne=function(t,r){XF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),s=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;qS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Pl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],s=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var l=this._zlevelList[a],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var m=o[v],g=m.ctx,y=s&&m.createRepaintRects(t,r,d._width,d._height),b=n?m.__startIndex:m.__drawIndex,w=!n&&m.incremental&&Date.now,T=w&&Date.now(),S=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,S,y);else if(b===m.__startIndex){var k=t[b];(!k.incremental||!k.notClear||n)&&m.clear(!1,S,y)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=m.__startIndex);var x,A=function(z){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(x=b;x<m.__endIndex;x++){var F=t[x];if(F.__inHover&&(f=!0),i._doPaintEl(F,m,s,z,V,x===m.__endIndex-1),w){var G=Date.now()-T;if(G>15)break}}V.prevElClipPaths&&g.restore()};if(y)if(y.length===0)x=m.__endIndex;else for(var I=d.dpr,L=0;L<y.length;++L){var N=y[L];g.save(),g.beginPath(),g.rect(N.x*I,N.y*I,N.width*I,N.height*I),g.clip(),A(N),g.restore()}else g.save(),A(),g.restore();m.__drawIndex=x,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Kt.wxa&&$(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,s){var a=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(jl(a,t,o,s),t.setPrevPaintRect(l))}else jl(a,t,o,s)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Pl);var n=this._layers[t];return n||(n=new Yb("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ue(n,this._layerConfig[t],!0):this._layerConfig[t-vv]&&ue(n,this._layerConfig[t-vv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,s=this._domRoot,a=null,l=-1;if(!n[t]&&!!yst(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);a=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(a){var u=a.dom;u.nextSibling?s.insertBefore(r.dom,u.nextSibling):s.appendChild(r.dom)}else s.firstChild?s.insertBefore(r.dom,s.firstChild):s.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__&&t.call(r,s,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__||t.call(r,s,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,s=0,a,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;a!==u&&(a=u,s=0),i.incremental?(c=this.getLayer(u+_st,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(u+(s>0?vv:0),this._needsManuallyCompositing),c.__builtin__||Kk("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&In&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,$(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?ue(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+vv){var s=this._layers[o];ue(s,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(he(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=sv(o,0,i),r=sv(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Pl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Pl].dom;var r=new Yb("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),l=0,u=a.length;l<u;l++){var c=a[l];jl(n,c,s,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Sst=wst;function Va(e){e.registerPainter("canvas",Sst)}var Tst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return Qp(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Ne,i=Wi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),a=o==="none"?"circle":o,l=r.itemHeight*.8,u=Wi(a,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?s:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),a.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(No);const kst=Tst;function Pp(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=hf(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],s=0;s<r.length;s++)o.push(hf(e,t,r[s]));return o.join(" ")}}function U$(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!pt(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Pst=function(e){St(t,e);function t(r,n,i,o){var s=e.call(this)||this;return s.updateData(r,n,i,o),s}return t.prototype._createSymbol=function(r,n,i,o,s){this.removeAll();var a=Wi(r,-1,-1,2,2,null,s);a.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),a.drift=Cst,this._symbolType=r,this.add(a)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){dp(this.childAt(0))},t.prototype.downplay=function(){pp(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var s=r.getItemVisual(n,"symbol")||"circle",a=r.hostModel,l=t.getSymbolSize(r,n),u=s!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(s,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):br(h,d,a,n),LN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Do(h,d,a,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,s){var a=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,m,g;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,m=o.hoverScale,g=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),b=y.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),d=b.get("blurScope"),p=b.get("disabled"),v=Cu(y),m=b.getShallow("scale"),g=y.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");a.attr("rotation",(w||0)*Math.PI/180||0);var T=BP(r.getItemVisual(n,"symbolOffset"),i);T&&(a.x=T[0],a.y=T[1]),g&&a.attr("cursor",g);var S=r.getItemVisual(n,"style"),k=S.fill;if(a instanceof Ms){var x=a.style;a.useStyle(ut({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},S))}else a.__isEmptyBrush?a.useStyle(ut({},S)):a.useStyle(S),a.style.decal=null,a.setColor(k,s&&s.symbolInnerColor),a.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),I=this._z2;A!=null?I==null&&(this._z2=a.z2,a.z2+=A):I!=null&&(a.z2=I,this._z2=null);var L=s&&s.useNameLabel;xf(a,v,{labelFetcher:l,labelDataIndex:n,defaultText:N,inheritColor:k,defaultOpacity:S.opacity});function N(F){return L?r.getName(F):Pp(r,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var z=a.ensureState("emphasis");z.style=u,a.ensureState("select").style=f,a.ensureState("blur").style=c;var V=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;z.scaleX=this._sizeX*V,z.scaleY=this._sizeY*V,this.setSymbolScale(1),hu(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),s=le(this).dataIndex,a=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&du(l,{style:{opacity:0}},n,{dataIndex:s,removeOpt:a,cb:function(){o.removeTextContent()}})}else o.removeTextContent();du(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:s,cb:r,removeOpt:a})},t.getSymbolSize=function(r,n){return WF(r.getItemVisual(n,"symbolSize"))},t}(Ne);function Cst(e,t){this.parent.drift(e,t)}const L_=Pst;function qb(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function j5(e){return e!=null&&!Dt(e)&&(e={isIgnore:e}),e||{}}function G5(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Cu(t),cursorStyle:t.get("cursor")}}var Est=function(){function e(t){this.group=new Ne,this._SymbolCtor=t||L_}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=j5(r);var n=this.group,i=t.hostModel,o=this._data,s=this._SymbolCtor,a=r.disableAnimation,l=G5(t),u={disableAnimation:a},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(qb(t,h,f,r)){var d=new s(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!qb(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)n.remove(d),d=new s(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var g={x:p[0],y:p[1]};a?d.attr(g):br(d,g,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=G5(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=j5(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=r.getItemLayout(o);if(qb(r,s,o,n)){var a=new this._SymbolCtor(r,o,this._seriesScope);a.traverse(i),a.setPosition(s),this.group.add(a),r.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(t){Mf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const W$=Est;function j$(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Ast(i,r),s=n.dim,a=i.dim,l=t.mapDimension(a),u=t.mapDimension(s),c=a==="x"||a==="radius"?1:0,f=It(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return vu(t,f[0])&&(h=!0,f[0]=d),vu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:a,baseAxisDim:s,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Ast(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:Te(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function G$(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,s=[];return s[o]=r.get(e.baseDim,n),s[1-o]=i,t.dataToPoint(s)}function Mst(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function xst(e,t,r,n,i,o,s,a){for(var l=Mst(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],m=j$(i,t,s),g=e.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,S=void 0,k=void 0;switch(w.cmd){case"=":S=w.idx*2,k=w.idx1*2;var x=g[S],A=g[S+1],I=y[k],L=y[k+1];(isNaN(x)||isNaN(A))&&(x=I,A=L),u.push(x,A),c.push(I,L),f.push(r[S],r[S+1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var N=w.idx,z=m.dataDimsForPoint,V=i.dataToPoint([t.get(z[0],N),t.get(z[1],N)]);k=N*2,u.push(V[0],V[1]),c.push(y[k],y[k+1]);var F=G$(m,i,t,N);f.push(F[0],F[1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(N));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,ot){return v[Y]-v[ot]});for(var G=u.length,K=fs(G),q=fs(G),rt=fs(G),At=fs(G),Nt=[],b=0;b<p.length;b++){var Pt=p[b],Ct=b*2,Zt=Pt*2;K[Ct]=u[Zt],K[Ct+1]=u[Zt+1],q[Ct]=c[Zt],q[Ct+1]=c[Zt+1],rt[Ct]=f[Zt],rt[Ct+1]=f[Zt+1],At[Ct]=h[Zt],At[Ct+1]=h[Zt+1],Nt[b]=d[Pt]}return{current:K,next:q,stackedOnCurrent:rt,stackedOnNext:At,status:Nt}}var js=Math.min,Gs=Math.max;function tu(e,t){return isNaN(e)||isNaN(t)}function $3(e,t,r,n,i,o,s,a,l){for(var u,c,f,h,d,p,v=r,m=0;m<n;m++){var g=t[v*2],y=t[v*2+1];if(v>=i||v<0)break;if(tu(g,y)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](g,y),f=g,h=y;else{var b=g-u,w=y-c;if(b*b+w*w<.5){v+=o;continue}if(s>0){for(var T=v+o,S=t[T*2],k=t[T*2+1];S===g&&k===y&&m<n;)m++,T+=o,v+=o,S=t[T*2],k=t[T*2+1],g=t[v*2],y=t[v*2+1],b=g-u,w=y-c;var x=m+1;if(l)for(;tu(S,k)&&x<n;)x++,T+=o,S=t[T*2],k=t[T*2+1];var A=.5,I=0,L=0,N=void 0,z=void 0;if(x>=n||tu(S,k))d=g,p=y;else{I=S-u,L=k-c;var V=g-u,F=S-g,G=y-c,K=k-y,q=void 0,rt=void 0;if(a==="x"){q=Math.abs(V),rt=Math.abs(F);var At=I>0?1:-1;d=g-At*q*s,p=y,N=g+At*rt*s,z=y}else if(a==="y"){q=Math.abs(G),rt=Math.abs(K);var Nt=L>0?1:-1;d=g,p=y-Nt*q*s,N=g,z=y+Nt*rt*s}else q=Math.sqrt(V*V+G*G),rt=Math.sqrt(F*F+K*K),A=rt/(rt+q),d=g-I*s*(1-A),p=y-L*s*(1-A),N=g+I*s*A,z=y+L*s*A,N=js(N,Gs(S,g)),z=js(z,Gs(k,y)),N=Gs(N,js(S,g)),z=Gs(z,js(k,y)),I=N-g,L=z-y,d=g-I*q/rt,p=y-L*q/rt,d=js(d,Gs(u,g)),p=js(p,Gs(c,y)),d=Gs(d,js(u,g)),p=Gs(p,js(c,y)),I=g-d,L=y-p,N=g+I*rt/q,z=y+L*rt/q}e.bezierCurveTo(f,h,d,p,g,y),f=N,h=z}else e.lineTo(g,y)}u=g,c=y,v+=o}return m}var H$=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Ist=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new H$},t.prototype.buildPath=function(r,n){var i=n.points,o=0,s=i.length/2;if(n.connectNulls){for(;s>0&&tu(i[s*2-2],i[s*2-1]);s--);for(;o<s&&tu(i[o*2],i[o*2+1]);o++);}for(;o<s;)o+=$3(r,i,o,s,s,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,s=fu.CMD,a,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0,b=void 0;switch(h){case s.M:a=o[f++],l=o[f++];break;case s.L:if(d=o[f++],p=o[f++],b=u?(r-a)/(d-a):(r-l)/(p-l),b<=1&&b>=0){var w=u?(p-l)*b+l:(d-a)*b+a;return u?[r,w]:[w,r]}a=d,l=p;break;case s.C:d=o[f++],p=o[f++],v=o[f++],m=o[f++],g=o[f++],y=o[f++];var T=u?Bm(a,d,v,g,r,c):Bm(l,p,m,y,r,c);if(T>0)for(var S=0;S<T;S++){var k=c[S];if(k<=1&&k>=0){var w=u?cr(l,p,m,y,k):cr(a,d,v,g,k);return u?[r,w]:[w,r]}}a=g,l=y;break}}},t}(pe),Lst=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(H$),Ost=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Lst},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,s=0,a=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;a>0&&tu(i[a*2-2],i[a*2-1]);a--);for(;s<a&&tu(i[s*2],i[s*2+1]);s++);}for(;s<a;){var u=$3(r,i,s,a,a,1,n.smooth,l,n.connectNulls);$3(r,o,s+u-1,u,a,-1,n.stackedOnSmooth,l,n.connectNulls),s+=u+1,r.closePath()}},t}(pe);function X$(e,t,r,n,i){var o=e.getArea(),s=o.x,a=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;s-=c/2,a-=c/2,l+=c,u+=c,s=Math.floor(s),l=Math.round(l);var f=new rr({shape:{x:s,y:a,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ht(i)?function(m){i(m,f)}:null;Do(f,{shape:{width:l,height:u,x:s,y:a}},r,null,n,v)}return f}function Y$(e,t,r){var n=e.getArea(),i=tr(n.r0,1),o=tr(n.r,1),s=new Kp({shape:{cx:tr(e.cx,1),cy:tr(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var a=e.getBaseAxis().dim==="angle";a?s.shape.endAngle=n.startAngle:s.shape.r=i,Do(s,{shape:{endAngle:n.endAngle,r:o}},r)}return s}function q$(e,t,r,n,i){if(e){if(e.type==="polar")return Y$(e,t,r);if(e.type==="cartesian2d")return X$(e,t,r,n,i)}else return null;return null}function Of(e,t){return e.type===t}function H5(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function X5(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var s=e[o++],a=e[o++];isNaN(s)||(t=Math.min(s,t),n=Math.max(s,n)),isNaN(a)||(r=Math.min(a,r),i=Math.max(a,i))}return[[t,r],[n,i]]}function Y5(e,t){var r=X5(e),n=r[0],i=r[1],o=X5(t),s=o[0],a=o[1];return Math.max(Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]),Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))}function q5(e){return Te(e)?e:e?.5:0}function Rst(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=fs(n*2),o=0;o<n;o++){var s=G$(r,e,t,o);i[o*2]=s[0],i[o*2+1]=s[1]}return i}function Hs(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,s=[],a=0,l=[],u=[],c=[],f=[];if(n){for(a=0;a<e.length;a+=2)!isNaN(e[a])&&!isNaN(e[a+1])&&f.push(e[a],e[a+1]);e=f}for(a=0;a<e.length-2;a+=2)switch(c[0]=e[a+2],c[1]=e[a+3],u[0]=e[a],u[1]=e[a+1],s.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],s.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],s.push(l[0],l[1])}return s.push(e[a++],e[a++]),s}function Dst(e,t){var r=[],n=e.length,i,o;function s(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=fJ(p,[c.color,f.color]);return{coord:h,color:v}}for(var a=0;a<n;a++){var l=e[a],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(s(o,l,t)):i&&r.push(s(i,l,0),s(i,l,t));break}else i&&(r.push(s(i,l,0)),i=null),r.push(l),o=l}return r}function Nst(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,s=n.length-1;s>=0;s--){var a=e.getDimensionInfo(n[s].dimension);if(i=a&&a.coordDim,i==="x"||i==="y"){o=n[s];break}}if(!!o){var l=t.getAxis(i),u=It(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=Dst(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";$(h,function(b){b.offset=(b.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new bP(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=m,y}}}function Fst(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&$st(o,t))){var s=t.mapDimension(o.dim),a={};return $(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);a[u]=1}),function(l){return!a.hasOwnProperty(t.get(s,l))}}}}function $st(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),s=0;s<i;s+=o)if(L_.getSymbolSize(t,s)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function zst(e,t){return isNaN(e)||isNaN(t)}function Bst(e){for(var t=e.length/2;t>0&&zst(e[t*2-2],e[t*2-1]);t--);return t-1}function Z5(e,t){return[e[t*2],e[t*2+1]]}function Vst(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,s,a=0,l=-1,u=0;u<n;u++)if(s=e[u*2+i],!(isNaN(s)||isNaN(e[u*2+1-i]))){if(u===0){o=s;continue}if(o<=t&&s>=t||o>=t&&s<=t){l=u;break}a=u,o=s}return{range:[a,l],t:(t-o)/(s-o)}}function Z$(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<li.length;t++)if(e.get([li[t],"endLabel","show"]))return!0;return!1}function Zb(e,t,r,n){if(Of(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),s=n.getData(),a={lastFrameIndex:0},l=Z$(n)?function(d,p){e._endLabelOnDuring(d,p,s,a,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=X$(t,r,n,function(){var d=e._endLabel;d&&r&&a.originalX!=null&&d.attr({x:a.originalX,y:a.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return Y$(t,r,n)}function Ust(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",s=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||s}}}var Wst=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Ne,n=new W$;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,s=r.coordinateSystem,a=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=s.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,y=r.get("animation"),b=!c.isEmpty(),w=c.get("origin"),T=j$(s,l,w),S=b&&Rst(s,l,T),k=r.get("showSymbol"),x=r.get("connectNulls"),A=k&&!h&&Fst(r,l,s),I=this._data;I&&I.eachItemGraphicEl(function(ot,J){ot.__temp&&(a.remove(ot),I.setItemGraphicEl(J,null))}),k||p.remove(),a.add(g);var L=h?!1:r.get("step"),N;s&&s.getArea&&r.get("clip",!0)&&(N=s.getArea(),N.width!=null?(N.x-=.1,N.y-=.1,N.width+=.2,N.height+=.2):N.r0&&(N.r0-=.5,N.r+=.5)),this._clipShapeForSymbol=N;var z=Nst(l,s,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===s.type&&L===this._step))k&&p.updateData(l,{isIgnore:A,clipShape:N,disableAnimation:!0,getSymbolPoint:function(ot){return[f[ot*2],f[ot*2+1]]}}),y&&this._initSymbolLabelAnimation(l,s,N),L&&(f=Hs(f,s,L,x),S&&(S=Hs(S,s,L,x))),v=this._newPolyline(f),b?m=this._newPolygon(f,S):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,pu(z)),g.setClipPath(Zb(this,s,!0,r));else{b&&!m?m=this._newPolygon(f,S):m&&!b&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,pu(z));var V=g.getClipPath();if(V){var F=Zb(this,s,!1,r);Do(V,{shape:F.shape},r)}else g.setClipPath(Zb(this,s,!0,r));k&&p.updateData(l,{isIgnore:A,clipShape:N,disableAnimation:!0,getSymbolPoint:function(ot){return[f[ot*2],f[ot*2+1]]}}),(!H5(this._stackedOnPoints,S)||!H5(this._points,f))&&(y?this._doUpdateAnimation(l,S,s,i,L,w,x):(L&&(f=Hs(f,s,L,x),S&&(S=Hs(S,s,L,x))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:S})))}var G=r.getModel("emphasis"),K=G.get("focus"),q=G.get("blurScope"),rt=G.get("disabled");if(v.useStyle(ie(u.getLineStyle(),{fill:"none",stroke:z,lineJoin:"bevel"})),vp(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var At=v.getState("emphasis").style;At.lineWidth=+v.style.lineWidth+1}le(v).seriesIndex=r.seriesIndex,hu(v,K,q,rt);var Nt=q5(r.get("smooth")),Pt=r.get("smoothMonotone");if(v.setShape({smooth:Nt,smoothMonotone:Pt,connectNulls:x}),m){var Ct=l.getCalculationInfo("stackedOnSeries"),Zt=0;m.useStyle(ie(c.getAreaStyle(),{fill:z,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Ct&&(Zt=q5(Ct.get("smooth"))),m.setShape({smooth:Nt,stackedOnSmooth:Zt,smoothMonotone:Pt,connectNulls:x}),vp(m,r,"areaStyle"),le(m).seriesIndex=r.seriesIndex,hu(m,K,q,rt)}var Y=function(ot){o._changePolyState(ot)};l.eachItemGraphicEl(function(ot){ot&&(ot.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=s,this._stackedOnPoints=S,this._points=f,this._step=L,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,n){le(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var s=r.getData(),a=cu(s,o);if(this._changePolyState("emphasis"),!(a instanceof Array)&&a!=null&&a>=0){var l=s.getLayout("points"),u=s.getItemGraphicEl(a);if(!u){var c=l[a*2],f=l[a*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new L_(s,a),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,s.setItemGraphicEl(a,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else oi.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var s=r.getData(),a=cu(s,o);if(this._changePolyState("normal"),a!=null&&a>=0){var l=s.getItemGraphicEl(a);l&&(l.__temp?(s.setItemGraphicEl(a,null),this.group.remove(l)):l.downplay())}else oi.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;h3(this._polyline,r),n&&h3(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Ist({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Ost({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,s,a=n.getBaseAxis(),l=a.inverse;n.type==="cartesian2d"?(o=a.isHorizontal(),s=!1):n.type==="polar"&&(o=a.dim==="angle",s=!0);var u=r.hostModel,c=u.get("animationDuration");Ht(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ht(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,y=void 0,b=void 0;if(i)if(s){var w=i,T=n.pointToCoord(m);o?(g=w.startAngle,y=w.endAngle,b=-T[1]/180*Math.PI):(g=w.r0,y=w.r,b=T[0])}else{var S=i;o?(g=S.x,y=S.x+S.width,b=d.x):(g=S.y+S.height,y=S.y,b=d.y)}var k=y===g?0:(b-g)/(y-g);l&&(k=1-k);var x=Ht(f)?f(p):c*k+h,A=v.getSymbolPath(),I=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),I&&I.animateFrom({style:{opacity:0}},{duration:300,delay:x}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(Z$(r)){var s=r.getData(),a=this._polyline,l=s.getLayout("points");if(!l){a.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new nr({z2:200}),u.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var c=Bst(l);c>=0&&(xf(a,Cu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?U$(s,d):Pp(s,f)},enableTextSetter:!0},Ust(o,n)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,s,a,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=a.get("precision"),v=a.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,b=n.shape,w=y?g?b.x:b.y+b.height:g?b.x+b.width:b.y,T=(g?v:0)*(y?-1:1),S=(g?0:-v)*(y?-1:1),k=g?"x":"y",x=Vst(f,w,k),A=x.range,I=A[1]-A[0],L=void 0;if(I>=1){if(I>1&&!d){var N=Z5(f,A[0]);u.attr({x:N[0]+T,y:N[1]+S}),s&&(L=h.getRawValue(A[0]))}else{var N=c.getPointOn(w,k);N&&u.attr({x:N[0]+T,y:N[1]+S});var z=h.getRawValue(A[0]),V=h.getRawValue(A[1]);s&&(L=cQ(i,p,z,V,x.t))}o.lastFrameIndex=A[0]}else{var F=r===1||o.lastFrameIndex>0?A[0]:0,N=Z5(f,F);s&&(L=h.getRawValue(F)),u.attr({x:N[0]+T,y:N[1]+S})}s&&p_(u).setLabelText(L)}},t.prototype._doUpdateAnimation=function(r,n,i,o,s,a,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=xst(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(s&&(d=Hs(h.current,i,s,l),p=Hs(h.stackedOnCurrent,i,s,l),v=Hs(h.next,i,s,l),m=Hs(h.stackedOnNext,i,s,l)),Y5(d,v)>3e3||c&&Y5(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),u.stopAnimation(),br(u,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),br(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],b=h.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var S=r.getItemGraphicEl(b[w].idx1);S&&y.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,x=0;x<y.length;x++){var A=y[x].el,I=y[x].ptIdx*2;A.x=k[I],A.y=k[I+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,s){o.__temp&&(n.remove(o),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(oi);const jst=Wst;function KP(e,t){return{seriesType:e,plan:$P(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,s=t||o.large;if(!!i){var a=It(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=a.length,u=n.getCalculationInfo("stackResultDimension");vu(n,a[0])&&(a[0]=u),vu(n,a[1])&&(a[1]=u);var c=n.getStore(),f=n.getDimensionIndex(a[0]),h=n.getDimensionIndex(a[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,m=s&&fs(v*l),g=[],y=[],b=d.start,w=0;b<d.end;b++){var T=void 0;if(l===1){var S=c.get(f,b);T=i.dataToPoint(S,null,y)}else g[0]=c.get(f,b),g[1]=c.get(h,b),T=i.dataToPoint(g,null,y);s?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(b,T.slice())}s&&p.setLayout("points",m)}}}}}}var Gst={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Hst=function(e){return Math.round(e.length/2)};function K$(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),s=t.coordinateSystem,a=i.count();if(a>10&&s.type==="cartesian2d"&&o){var l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(a/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Mt(o)?p=Gst[o]:Ht(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Hst))}}}}}function xu(e){e.registerChartView(jst),e.registerSeriesModel(kst),e.registerLayout(KP("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,K$("line"))}var J$=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return Qp(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),s=o.getLayout("offset"),a=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=s+a/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(No);No.registerClass(J$);const K5=J$;var Xst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Qp(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=g_(K5.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(K5);const Yst=Xst;var qst=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Zst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new qst},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r0||0,0),a=Math.max(n.r,0),l=(a-s)*.5,u=s+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),y=Math.sin(f);p?(r.moveTo(v*s+i,m*s+o),r.arc(v*u+i,m*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*a+i,m*a+o),r.arc(i,o,a,c,f,!h),r.arc(g*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),s!==0&&r.arc(i,o,s,f,c,h)},t}(pe);const J5=Zst;function Kst(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var s=i.position;if(!s||s instanceof Array)return Gm(n,i,o);var a=e(s),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,y=r?Math.abs(h-d)/2:0,b=Math.cos,w=Math.sin,T=c+h*b(v),S=f+h*w(v),k="left",x="top";switch(a){case"startArc":T=c+(d-l)*b(g),S=f+(d-l)*w(g),k="center",x="top";break;case"insideStartArc":T=c+(d+l)*b(g),S=f+(d+l)*w(g),k="center",x="bottom";break;case"startAngle":T=c+p*b(v)+gv(v,l+y,!1),S=f+p*w(v)+mv(v,l+y,!1),k="right",x="middle";break;case"insideStartAngle":T=c+p*b(v)+gv(v,-l+y,!1),S=f+p*w(v)+mv(v,-l+y,!1),k="left",x="middle";break;case"middle":T=c+p*b(g),S=f+p*w(g),k="center",x="middle";break;case"endArc":T=c+(h+l)*b(g),S=f+(h+l)*w(g),k="center",x="bottom";break;case"insideEndArc":T=c+(h-l)*b(g),S=f+(h-l)*w(g),k="center",x="top";break;case"endAngle":T=c+p*b(m)+gv(m,l+y,!0),S=f+p*w(m)+mv(m,l+y,!0),k="left",x="middle";break;case"insideEndAngle":T=c+p*b(m)+gv(m,-l+y,!0),S=f+p*w(m)+mv(m,-l+y,!0),k="right",x="middle";break;default:return Gm(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=k,n.verticalAlign=x,n}}function Jst(e,t,r,n){if(Te(n)){e.setTextConfig({rotation:n});return}else if(pt(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,a=(o+s)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=a;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=s;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function gv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function mv(e,t,r){return t*Math.cos(e)*(r?1:-1)}var Kb=Math.max,Jb=Math.min;function Qst(e,t){var r=e.getArea&&e.getArea();if(Of(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var tat=function(e){St(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var s=r.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){Mf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var s=this.group,a=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=eat(r,u);d&&this._enableRealtimeSort(d,a,i);var p=r.get("clip",!0)||d,v=Qst(u,a);s.removeClipPath();var m=r.get("roundCap",!0),g=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),b=y.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,k=o&&o.type==="changeAxisOrder";function x(L){var N=_v[u.type](a,L),z=lat(u,f,N);return z.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&z.setShape("r",b),w[L]=z,z}a.diff(l).add(function(L){var N=a.getItemModel(L),z=_v[u.type](a,L,N);if(g&&x(L),!(!a.hasValue(L)||!n6[u.type](z))){var V=!1;p&&(V=Q5[u.type](v,z));var F=t6[u.type](r,a,L,z,f,h,c.model,!1,m);d&&(F.forceLabelAnimation=!0),i6(F,a,L,N,z,r,f,u.type==="polar"),S?F.attr({shape:z}):d?e6(d,h,F,z,L,f,!1,!1):Do(F,{shape:z},r,L),a.setItemGraphicEl(L,F),s.add(F),F.ignore=V}}).update(function(L,N){var z=a.getItemModel(L),V=_v[u.type](a,L,z);if(g){var F=void 0;T.length===0?F=x(N):(F=T[N],F.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",b),w[L]=F);var G=_v[u.type](a,L),K=tz(f,G,u);br(F,{shape:K},h,L)}var q=l.getItemGraphicEl(N);if(!a.hasValue(L)||!n6[u.type](V)){s.remove(q);return}var rt=!1;if(p&&(rt=Q5[u.type](v,V),rt&&s.remove(q)),q?LN(q):q=t6[u.type](r,a,L,V,f,h,c.model,!!q,m),d&&(q.forceLabelAnimation=!0),k){var At=q.getTextContent();if(At){var Nt=p_(At);Nt.prevValue!=null&&(Nt.prevValue=Nt.value)}}else i6(q,a,L,z,V,r,f,u.type==="polar");S?q.attr({shape:V}):d?e6(d,h,q,V,L,f,!0,k):br(q,{shape:V},r,L,null),a.setItemGraphicEl(L,q),q.ignore=rt,s.add(q)}).remove(function(L){var N=l.getItemGraphicEl(L);N&&y3(N,r,L)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new Ne);A.removeAll();for(var I=0;I<w.length;++I)A.add(w[I]);s.add(A),this._backgroundEls=w,this._data=a},t.prototype._renderLarge=function(r,n,i){this._clear(),s6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),s6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&q$(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var s=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var a=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(s.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,a,s,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(s,a){var l=i(a);l=l==null?NaN:l,o.push({dataIndex:a,mappedValue:l,ordinalNumber:s})}),o.sort(function(s,a){return a.mappedValue-s.mappedValue}),{ordinalNumbers:It(o,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,s=r.mapDimension(i.dim),a=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(s,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>a)return!0;a=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),s=Math.max(0,o[0]),a=Math.min(o[1],i.getOrdinalMeta().categories.length-1);s<=a;++s)if(r.ordinalNumbers[s]!==i.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var s=this._dataSort(r,i,n);this._isOrderDifferentInView(s,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,s=this._dataSort(r,o,function(a){return r.get(r.mapDimension(n.otherAxis.dim),a)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:s})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){y3(o,r,le(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(oi),Q5={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,s=Kb(t.x,e.x),a=Jb(t.x+t.width,i),l=Kb(t.y,e.y),u=Jb(t.y+t.height,o),c=a<s,f=u<l;return t.x=c&&s>i?a:s,t.y=f&&l>o?u:l,t.width=c?0:a-s,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=Jb(t.r,e.r),o=Kb(t.r0,e.r0);t.r=i,t.r0=o;var s=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return s}},t6={cartesian2d:function(e,t,r,n,i,o,s,a,l){var u=new rr({shape:ut({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,s,a,l){var u=!i&&l?J5:Kp,c=new u({shape:n,z2:1});c.name="item";var f=Q$(i);if(c.calculateTextPosition=Kst(f,{isRoundCap:u===J5}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(a?br:Do)(c,{shape:p},o)}return c}};function eat(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function e6(e,t,r,n,i,o,s,a){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),a||(s?br:Do)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(s?br:Do)(r,{shape:u},c,i)}function r6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var rat=["x","y","width","height"],nat=["cx","cy","r","startAngle","endAngle"],n6={cartesian2d:function(e){return!r6(e,rat)},polar:function(e){return!r6(e,nat)}},_v={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?oat(r,n):0,o=n.width>0?1:-1,s=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+s*i/2,width:n.width-o*i,height:n.height-s*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function iat(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function Q$(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function i6(e,t,r,n,i,o,s,a){var l=t.getItemVisual(r,"style");a||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=a?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=Cu(n);xf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:Pp(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(a&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,Jst(e,d==="outside"?c:d,Q$(s),n.get(["label","rotate"]))}xet(h,f,o.getRawValue(r),function(v){return U$(t,v)});var p=n.getModel(["emphasis"]);hu(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),vp(e,n),iat(i)&&(e.style.fill="none",e.style.stroke="none",$(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function oat(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var sat=function(){function e(){}return e}(),o6=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new sat},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,s=1-this.baseDimIdx,a=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[s]=i[c+2],a[o]=i[c+o],a[s]=i[c+s],r.rect(a[0],a[1],l[0],l[1])},t}(pe);function s6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),a=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new o6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=s,c.barWidth=a,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new o6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=s,f.barWidth=a,t.add(f),f.useStyle(i.getVisual("style")),le(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",a6),f.on("mousemove",a6)),r&&r.push(f)}var a6=C_(function(e){var t=this,r=aat(t,e.offsetX,e.offsetY);le(t).dataIndex=r>=0?r:null},30,!1);function aat(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,s=e.largeDataIndices,a=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],a[n]=o[h+n],a[i]=o[h+i],l[i]<0&&(a[i]+=l[i],l[i]=-l[i]),t>=a[0]&&t<=a[0]+l[0]&&r>=a[1]&&r<=a[1]+l[1])return s[c]}return-1}function tz(e,t,r){if(Of(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function lat(e,t,r){var n=e.type==="polar"?Kp:rr;return new n({shape:tz(t,r,e),silent:!0,z2:0})}const uat=tat;function Rf(e){e.registerChartView(uat),e.registerSeriesModel(Yst),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,we(xot,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Iot("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,K$("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var cat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return Qp(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(No);const fat=cat;var ez=4,hat=function(){function e(){}return e}(),dat=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new hat},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,s=this.symbolProxy,a=s.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<ez,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(a.x=h-o[0]/2,a.y=d-o[1]/2,a.width=o[0],a.height=o[1],s.buildPath(r,a,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,s=this.softClipShape,a;if(!!o){for(a=this._off;a<n.length;){var l=n[a++],u=n[a++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=a,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,s=i.size,a=Math.max(s[0],4),l=Math.max(s[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-a/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+a&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var s=this.hoverDataIdx=this.findDataIndex(r,n);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,s=o[0],a=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ce(l-s/2,u-a/2,c-l+s,f-u+a)}return r},t}(pe),pat=function(){function e(){this.group=new Ne}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var a=s.length,l=new Float32Array(a+o.length);l.set(s),l.set(o,a),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new dat({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Wi(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<ez;t.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var a=r.getVisual("style"),l=a&&a.fill;l&&t.setColor(l);var u=le(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const vat=pat;var gat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var s=KP("").reset(r,n,i);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,s=o.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new vat:new W$,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(oi);const mat=gat;var _at=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const yat=_at;var z3=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Li).models[0]},t.type="cartesian2dAxis",t}(Me);Hi(z3,rst);var rz={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},bat=ue({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},rz),JP=ue({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},rz),wat=ue({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},JP),Sat=ie({logBase:10},JP);const Tat={category:bat,value:JP,time:wat,log:Sat};var kat={value:1,category:1,time:1,log:1};function l6(e,t,r,n){$(kat,function(i,o){var s=ue(ue({},Tat[o],!0),n,!0),a=function(l){St(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=bp(this),d=h?S_(c):{},p=f.getTheme();ue(c,p.get(o+"Axis")),ue(c,this.getDefaultOption()),c.type=u6(c),h&&ff(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=D3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=s,u}(r);e.registerComponentModel(a)}),e.registerSubTypeDefaulter(t+"Axis",u6)}function u6(e){return e.type||(e.data?"category":"value")}var Pat=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return It(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Mr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Cat=Pat;var B3=["x","y"];function c6(e){return e.type==="interval"||e.type==="time"}var Eat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=B3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!c6(r)||!c6(n))){var i=r.getExtent(),o=n.getExtent(),s=this.dataToPoint([i[0],o[0]]),a=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(a[0]-s[0])/l,f=(a[1]-s[1])/u,h=s[0]-i[0]*c,d=s[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=o_([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),s=this.getArea(),a=new ce(i[0],i[1],o[0]-i[0],o[1]-i[1]);return s.intersect(a)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],s=r[1];if(this._transform&&o!=null&&isFinite(o)&&s!=null&&isFinite(s))return sn(i,r,this._transform);var a=this.getAxis("x"),l=this.getAxis("y");return i[0]=a.toGlobalCoord(a.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(s,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,s=i.getExtent(),a=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),n[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return sn(i,r,this._invTransform);var o=this.getAxis("x"),s=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=s.coordToData(s.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),s=Math.max(r[0],r[1])-i,a=Math.max(n[0],n[1])-o;return new ce(i,o,s,a)},t}(Cat),Aat=function(e){St(t,e);function t(r,n,i,o,s){var a=e.call(this,r,n,i)||this;return a.index=0,a.type=o||"value",a.position=s||"bottom",a}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(pst);const Mat=Aat;function V3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},s=i.getAxesOnZeroOf()[0],a=i.position,l=s?"onZero":a,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(s){var v=s.toGlobalCoord(s.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=m[a],o.labelOffset=s?p[h[a]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Ii(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var g=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-g:g,o.z2=1,o}function f6(e){return e.get("coordinateSystem")==="cartesian2d"}function h6(e){var t={xAxisModel:null,yAxisModel:null};return $(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Li).models[0];t[n]=o}),t}var Qb=Math.log;function xat(e,t,r){var n=t0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),s=i.length-1,a=n.getInterval.call(r),l=R$(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=Qb(e.base);u=[Qb(u[0])/h,Qb(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:s,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],m=u[1];if(c&&f)p=(m-v)/s;else if(c)for(m=u[0]+p*s;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=Xb(p),m=u[0]+p*s;else if(f)for(v=u[1]-p*s;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=Xb(p),v=u[1]-p*s;else{var g=e.getTicks().length-1;g>s&&(p=Xb(p));var y=p*s;m=Math.ceil(u[1]/p)*p,v=tr(m-y),v<0&&u[0]>=0?(v=0,m=tr(y)):m>0&&u[1]<=0&&(m=0,v=-tr(y))}var b=(i[0].value-o[0].value)/a,w=(i[s].value-o[s].value)/a;n.setExtent.call(e,v+p*b,m+p*w),n.setInterval.call(e,p),(b||w)&&n.setNiceExtent.call(e,v+p,m-p)}var Iat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=B3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(s){var a,l=ge(s),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=s[h],p=d.model,v=d.scale;N3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):($5(v,p),N3(v)&&(a=d))}c.length&&(a||(a=c.pop(),$5(a.scale,a.model)),$(c,function(m){xat(m.scale,m.model,a.scale)}))}}i(n.x),i(n.y);var o={};$(n.x,function(s){d6(n,"y",s,o)}),$(n.y,function(s){d6(n,"x",s,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),s=Ra(i,{width:r.getWidth(),height:r.getHeight()});this._rect=s;var a=this._axesList;l(),o&&($(a,function(u){if(!u.model.get(["axisLabel","inside"])){var c=Qot(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);s[f]-=c[f]+h,u.position==="top"?s.y+=c.height+h:u.position==="left"&&(s.x+=c.width+h)}}}),l()),$(this._coordsList,function(u){u.calcAffineTransform()});function l(){$(a,function(u){var c=u.isHorizontal(),f=c?[0,s.width]:[0,s.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Lat(u,c?s.x:s.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Dt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Li).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Li).models[0],o=t.gridModel,s=this._coordsList,a,l;if(r)a=r.coordinateSystem,he(s,a)<0&&(a=null);else if(n&&i)a=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(a=this._coordsList[0])}return{cartesian:a,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,s={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,$(a.x,function(c,f){$(a.y,function(h,d){var p="x"+f+"y"+d,v=new Eat(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!t2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=s.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=s.left?"right":"left"),s[d]=!0;var p=new Mat(c,Kot(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),a[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){$(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(f6(i)){var o=h6(i),s=o.xAxisModel,a=o.yAxisModel;if(!t2(s,r)||!t2(a,r))return;var l=this.getCartesian(s.componentIndex,a.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){$(est(i,o.dim),function(s){o.scale.unionExtentFromData(i,s)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return $(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),s=i.getOtherAxis(o);he(r,o)<0&&r.push(o),he(n,s)<0&&n.push(s)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var s=new e(i,t,r);s.name="grid_"+o,s.resize(i,r,!0),i.coordinateSystem=s,n.push(s)}),t.eachSeries(function(i){if(!!f6(i)){var o=h6(i),s=o.xAxisModel,a=o.yAxisModel,l=s.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(s.componentIndex,a.componentIndex)}}),n},e.dimensions=B3,e}();function t2(e,t){return e.getCoordSysModel()===t}function d6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,s=r.model,a=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(l!=null)p6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&p6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function p6(e){return e&&e.type!=="category"&&e.type!=="time"&&Jot(e)}function Lat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Oat=Iat;var _a=Math.PI,eu=function(){function e(t,r){this.group=new Ne,this.opt=r,this.axisModel=t,ie(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Ne({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!v6[t]},e.prototype.add=function(t){v6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=$7(r-t),o,s;return Xm(i)?(s=n>0?"top":"bottom",o="center"):Xm(i-_a)?(s=n>0?"bottom":"top",o="center"):(s="middle",i>0&&i<_a?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:s}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),v6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),s=n.transform,a=[o[0],0],l=[o[1],0],u=a[0]>l[0];s&&(sn(a,a,s),sn(l,l,s));var c=ut({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Oa({shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});mp(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Mt(h)&&(h=[h,h]),(Mt(d)||Te(d))&&(d=[d,d]);var p=BP(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];$([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1]))}],function(g,y){if(h[y]!=="none"&&h[y]!=null){var b=Wi(h[y],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,T=u?l:a;b.attr({rotation:g.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(e,t,r,n){var i=Nat(r,n,t,e),o=$at(r,n,t,e);if(Dat(t,o,i),Fat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var s=vst(It(o,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));gst(s)}},axisName:function(e,t,r,n){var i=Ii(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),s=e.nameDirection,a=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,m6(o)?e.labelOffset+s*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*_a/180);var p;m6(o)?h=eu.innerTextLayout(e.rotation,d!=null?d:e.rotation,s):(h=Rat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=a.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,y=Ii(e.nameTruncateMaxWidth,m.maxWidth,p),b=new nr({x:f[0],y:f[1],rotation:h.rotation,silent:eu.isLabelSilent(t),style:yn(a,{text:i,font:v,overflow:"truncate",width:y,ellipsis:g,fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:a.get("align")||h.textAlign,verticalAlign:a.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(kP({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var w=eu.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,le(b).eventData=w}n.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function Rat(e,t,r,n){var i=$7(r-e),o,s,a=n[0]>n[1],l=t==="start"&&!a||t!=="start"&&a;return Xm(i-_a/2)?(s=l?"bottom":"top",o="center"):Xm(i-_a*1.5)?(s=l?"top":"bottom",o="center"):(s="middle",i<_a*1.5&&i>_a/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:s}}function Dat(e,t,r){if(!D$(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],s=t[1],a=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Un(o),Un(u)):g6(o,s)&&(n?(Un(s),Un(c)):(Un(o),Un(u))),i===!1?(Un(a),Un(f)):g6(l,a)&&(i?(Un(l),Un(h)):(Un(a),Un(f)))}}function Un(e){e&&(e.ignore=!0)}function g6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=eP([]);return rP(i,i,-e.rotation),r.applyTransform(Xc([],i,e.getLocalTransform())),n.applyTransform(Xc([],i,t.getLocalTransform())),r.intersect(n)}}function m6(e){return e==="middle"||e==="center"}function nz(e,t,r,n,i){for(var o=[],s=[],a=[],l=0;l<e.length;l++){var u=e[l].coord;s[0]=u,s[1]=0,a[0]=u,a[1]=r,t&&(sn(s,s,t),sn(a,a,t));var c=new Oa({shape:{x1:s[0],y1:s[1],x2:a[0],y2:a[1]},style:n,z2:2,autoBatch:!0,silent:!0});mp(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function Nat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),s=o.get("show");if(s==="auto"&&n.handleAutoShown&&(s=n.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var a=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=nz(u,t.transform,l,ie(a.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function Fat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(!!s.length)for(var a=o.getModel("lineStyle"),l=n*o.get("length"),u=ie(a.getLineStyle(),ie(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var f=nz(s[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function $at(e,t,r,n){var i=r.axis,o=Ii(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var s=r.getModel("axisLabel"),a=s.get("margin"),l=i.getViewLabels(),u=(Ii(n.labelRotate,s.get("rotate"))||0)*_a/180,c=eu.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=eu.isLabelSilent(r),p=r.get("triggerEvent");return $(l,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,b=v.rawLabel,w=s;if(f&&f[g]){var T=f[g];Dt(T)&&T.textStyle&&(w=new Ir(T.textStyle,s,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(g),x=new nr({x:k,y:n.labelOffset+n.labelDirection*a,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:yn(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ht(S)?S(i.type==="category"?b:i.type==="value"?g+"":g,m):S})});if(x.anid="label_"+g,p){var A=eu.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=b,A.tickIndex=m,i.type==="category"&&(A.dataIndex=g),le(x).eventData=A}t.add(x),x.updateTransform(),h.push(x),e.add(x),x.decomposeTransform()}),h}}const iz=eu;function zat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Bat(r,e,t),r.seriesInvolved&&Uat(r,e),r}function Bat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],s=[];$(r.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var l=Cp(a.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=a;var c=a.model,f=c.getModel("tooltip",n);if($(a.getAxes(),we(v,!1,null)),a.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=a.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&$(p.baseAxes,we(v,d?"cross":!0,h)),d&&$(p.otherAxes,we(v,"cross",!1))}function v(m,g,y){var b=y.model.getModel("axisPointer",i),w=b.get("show");if(!(!w||w==="auto"&&!m&&!U3(b))){g==null&&(g=b.get("triggerTooltip")),b=m?Vat(y,f,i,t,m,g):b;var T=b.get("snap"),S=Cp(y.model),k=g||T||y.type==="category",x=e.axesInfo[S]={key:S,axis:y,coordSys:a,axisPointerModel:b,triggerTooltip:g,involveSeries:k,snap:T,useHandle:U3(b),seriesModels:[],linkGroup:null};u[S]=x,e.seriesInvolved=e.seriesInvolved||k;var A=Wat(o,y);if(A!=null){var I=s[A]||(s[A]={axesInfo:{}});I.axesInfo[S]=x,I.mapper=o[A].mapper,x.linkGroup=I}}}})}function Vat(e,t,r,n,i,o){var s=t.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};$(a,function(h){l[h]=Wt(s.get(h))}),l.snap=e.type!=="category"&&!!o,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=s.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=s.get("crossStyle");f&&ie(u,f.textStyle)}}return e.model.getModel("axisPointer",new Ir(l,r,n))}function Uat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||$(e.coordSysAxesInfo[Cp(n.model)],function(s){var a=s.axis;n.getAxis(a.dim)===a&&(s.seriesModels.push(r),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=r.getData().count())})})}function Wat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(e2(o[n+"AxisId"],r.id)||e2(o[n+"AxisIndex"],r.componentIndex)||e2(o[n+"AxisName"],r.name))return i}}function e2(e,t){return e==="all"||pt(e)&&he(e,t)>=0||e===t}function jat(e){var t=QP(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),s=r.get("value");s!=null&&(s=n.parse(s));var a=U3(r);o==null&&(i.status=a?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,a&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function QP(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Cp(e)]}function Gat(e){var t=QP(e);return t&&t.axisPointerModel}function U3(e){return!!e.get(["handle","show"])}function Cp(e){return e.type+"||"+e.id}var _6={},Hat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&jat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var s=Gat(r);s?(this._axisPointer||(this._axisPointer=new o)).render(r,s,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){_6[r]=n},t.getAxisPointerClass=function(r){return r&&_6[r]},t.type="axis",t}(ui);const oz=Hat;var W3=Re();function Xat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),s=o.getModel("areaStyle"),a=s.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=a.length,f=W3(e).splitAreaColors,h=Yt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),g=s.getAreaStyle();a=pt(a)?a:[a];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),b=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(b=m,w=l.y,T=y-b,S=l.height,m=b+T):(b=l.x,w=m,T=l.width,S=y-w,m=w+S);var k=u[p-1].tickValue;k!=null&&h.set(k,d),t.add(new rr({anid:k!=null?"area_"+k:null,shape:{x:b,y:w,width:T,height:S},style:ie({fill:a[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}W3(e).splitAreaColors=h}}}function Yat(e){W3(e).splitAreaColors=null}var qat=["axisLine","axisTickLabel","axisName"],Zat=["splitArea","splitLine","minorSplitLine"],sz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Ne,this.group.add(this._axisGroup),!!r.get("show")){var a=r.getCoordSysModel(),l=V3(a,r),u=new iz(r,ut({handleAutoShown:function(f){for(var h=a.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(N3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));$(qat,u.add,u),this._axisGroup.add(u.getGroup()),$(Zat,function(f){r.get([f,"show"])&&Kat[f](this,this._axisGroup,r,a)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||$N(s,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){Yat(this)},t.type="cartesianAxis",t}(oz),Kat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),s=o.getModel("lineStyle"),a=s.get("color");a=pt(a)?a:[a];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=s.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var g=c++%a.length,y=f[v].tickValue,b=new Oa({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:ie({stroke:a[g]},p),silent:!0});mp(b.shape,p.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),s=o.getModel("lineStyle"),a=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=s.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=a.y,f[0]=v,f[1]=a.y+a.height):(c[0]=a.x,c[1]=v,f[0]=a.x+a.width,f[1]=v);var m=new Oa({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});mp(m.shape,h.lineWidth),t.add(m)}},splitArea:function(e,t,r,n){Xat(e,t,r,n)}},az=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(sz),Jat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=az.type,r}return t.type="yAxis",t}(sz),Qat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new rr({shape:r.coordinateSystem.getRect(),style:ie({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ui),y6={offset:0};function lz(e){e.registerComponentView(Qat),e.registerComponentModel(yat),e.registerCoordinateSystem("cartesian2d",Oat),l6(e,"x",z3,y6),l6(e,"y",z3,y6),e.registerComponentView(az),e.registerComponentView(Jat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Iu(e){wr(lz),e.registerSeriesModel(fat),e.registerChartView(mat),e.registerLayout(KP("scatter"))}var b6="\0_ec_interaction_mutex";function w6(e,t){return!!tlt(e)[t]}function tlt(e){return e[b6]||(e[b6]={})}Au({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Yr);var elt=function(e){St(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=jt(n._mousedownHandler,n),o=jt(n._mousemoveHandler,n),s=jt(n._mouseupHandler,n),a=jt(n._mousewheelHandler,n),l=jt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=ie(Wt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",s)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",a),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",s),r.off("mousewheel",a),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!u4(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!lm("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||w6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,s=this._y,a=n-o,l=i-s;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&uu(r.event),uz(this,"pan","moveOnMouseMove",r,{dx:a,dy:l,oldX:o,oldY:s,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){u4(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=lm("zoomOnMouseWheel",r,this._opt),i=lm("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,s=Math.abs(o),a=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=s>3?1.4:s>1?1.2:1.1,c=o>0?u:1/u;r2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:a,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);r2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:a,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!w6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;r2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Xi);function r2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(uu(n.event),uz(e,t,r,n,i))}function uz(e,t,r,n,i){i.isAvailableBehavior=jt(lm,null,r,n),e.trigger(t,i)}function lm(e,t,r){var n=r[e];return!e||n&&(!Mt(n)||t.event[n+"Key"])}const rlt=elt;function nlt(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function ilt(e,t,r,n){var i=e.target,o=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,o){var a=o.min||0,l=o.max||1/0;s=Math.max(Math.min(l,s),a)}var u=s/e.zoom;e.zoom=s,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var olt={axisPointer:1,tooltip:1,brush:1};function slt(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!olt.hasOwnProperty(n.mainType)&&i&&i.model!==r}var S6=sn,alt=function(e){St(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Vl,n._rawTransformable=new Vl,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ce(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ce(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var s=this.getBoundingRect(),a=this._rawTransformable;a.transform=s.calculateTransform(new ce(r,n,i,o));var l=a.parent;a.parent=null,a.decomposeTransform(),a.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[Ke(r[0],n.getWidth()),Ke(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),s=this.getZoom();o=sn([],o,r),i=sn([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=s,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),g7(this.transform||(this.transform=[]),n.transform||cf()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],o_(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Vl;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?S6(i,r,o):mK(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?S6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=T6(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=T6(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Vl);function T6(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const llt=alt;function k6(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function ult(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),s=t.zoom,a=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(a[0]-=t.dx,a[1]-=t.dy,e.setCenter(k6(e,a),n)),s!=null){if(r){var l=r.min||0,u=r.max||1/0;s=Math.max(Math.min(i*s,u),l)/i}e.scaleX*=s,e.scaleY*=s;var c=(t.originX-e.x)*(s-1),f=(t.originY-e.y)*(s-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(k6(e,a),n),e.setZoom(s*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function clt(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,s=o-1;s>=0;s--){var a=i[s];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},r.push(a)}}function flt(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){plt(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=vlt(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function hlt(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function P6(e){return arguments.length?e:_lt}function gd(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function dlt(e,t){return Ra(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function plt(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function vlt(e,t,r,n){if(t){for(var i=e,o=e,s=o.parentNode.children[0],a=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=s.hierNode.modifier,f=a.hierNode.modifier;a=n2(a),o=i2(o),a&&o;){i=n2(i),s=i2(s),i.hierNode.ancestor=e;var h=a.hierNode.prelim+f-o.hierNode.prelim-u+n(a,o);h>0&&(mlt(glt(a,e,r),e,h),u+=h,l+=h),f+=a.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=s.hierNode.modifier}a&&!n2(i)&&(i.hierNode.thread=a,i.hierNode.modifier+=f-l),o&&!i2(s)&&(s.hierNode.thread=o,s.hierNode.modifier+=u-c,r=e)}return r}function n2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function i2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function glt(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function mlt(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function _lt(e,t){return e.parentNode===t.parentNode?1:2}var ylt=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),blt=function(e){St(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ylt},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,s=n.parentPoint,a=i[0],l=i[o-1];if(o===1){r.moveTo(s[0],s[1]),r.lineTo(a[0],a[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=Ke(n.forkPosition,1),d=[];d[c]=s[c],d[f]=s[f]+(l[f]-s[f])*h,r.moveTo(s[0],s[1]),r.lineTo(d[0],d[1]),r.moveTo(a[0],a[1]),d[c]=a[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(pe),wlt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ne,r}return t.prototype.init=function(r,n){this._controller=new rlt(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),s=r.layoutInfo,a=this._mainGroup,l=r.get("layout");l==="radial"?(a.x=s.x+s.width/2,a.y=s.y+s.height/2):(a.x=s.x,a.y=s.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){C6(o,c)&&E6(o,c,null,a,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!C6(o,c)){h&&M6(u,f,h,a,r);return}E6(o,c,h,a,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&M6(u,c,f,a,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var s=[],a=[];DQ(o,s,a);var l=this._min,u=this._max;a[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,a[0]=u?u[0]:a[0]+1),a[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,a[1]=u?u[1]:a[1]+1);var c=r.coordinateSystem=new llt;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(s[0],s[1],a[0]-s[0],a[1]-s[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=s,this._max=a},t.prototype._updateController=function(r,n,i){var o=this,s=this._controller,a=this._controllerHost,l=this.group;s.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!slt(u,i,r)}),s.enable(r.get("roam")),a.zoomLimit=r.get("scaleLimit"),a.zoom=r.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(u){nlt(a,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){ilt(a,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,s){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,s=n.getZoom(),a=(s-1)*i+1;return a/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(oi);function C6(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function E6(e,t,r,n,i){var o=!r,s=e.tree.getNodeByDataIndex(t),a=s.getModel(),l=s.getVisual("style").fill,u=s.isExpand===!1&&s.children.length!==0?l:"#fff",c=e.tree.root,f=s.parentNode===c?s:s.parentNode||s,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=s.getLayout();o?(r=new L_(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,br(r,{x:v.x,y:v.y},i);var m=r.getSymbolPath();if(i.get("layout")==="radial"){var g=c.children[0],y=g.getLayout(),b=g.children.length,w=void 0,T=void 0;if(v.x===y.x&&s.isExpand===!0&&g.children.length){var S={x:(g.children[0].getLayout().x+g.children[b-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[b-1].getLayout().y)/2};w=Math.atan2(S.y-y.y,S.x-y.x),w<0&&(w=Math.PI*2+w),T=S.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-y.y,v.x-y.x),w<0&&(w=Math.PI*2+w),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(T=v.x<y.x,T&&(w=w-Math.PI)):(T=v.x>y.x,T||(w=w-Math.PI));var k=T?"left":"right",x=a.getModel("label"),A=x.get("rotate"),I=A*(Math.PI/180),L=m.getTextContent();L&&(m.setTextConfig({position:x.get("position")||k,rotation:A==null?-w:I,origin:"center"}),L.setStyle("verticalAlign","middle"))}var N=a.get(["emphasis","focus"]),z=N==="relative"?h7(s.getAncestorsIndices(),s.getDescendantIndices()):N==="ancestor"?s.getAncestorsIndices():N==="descendant"?s.getDescendantIndices():null;z&&(le(r).focus=z),Slt(i,s,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(V){if(V!=="blur"){var F=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);F&&F.hoverState===Zp||h3(r.__edge,V)}})}function Slt(e,t,r,n,i,o,s,a){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new f_({shape:j3(c,f,h,i,i)})),br(v,{shape:j3(c,f,h,o,s)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,g=[],y=0;y<m.length;y++){var b=m[y].getLayout();g.push([b.x,b.y])}v||(v=n.__edge=new blt({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:f,forkPosition:d}})),br(v,{shape:{parentPoint:[s.x,s.y],childPoints:g}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(ie({strokeNoScale:!0,fill:null},p)),vp(v,l,"lineStyle"),pP(v),a.add(v))}function A6(e,t,r,n,i){var o=t.tree.root,s=cz(o,e),a=s.source,l=s.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(a.dataIndex),f=c.__edge,h=u.__edge||(a.isExpand===!1||a.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),m=n.get(["lineStyle","curveness"]);h&&(d==="curve"?du(h,{shape:j3(p,v,m,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&du(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function cz(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function M6(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),s=e.tree.root,a=cz(s,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};du(r,{x:a.x+1,y:a.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){A6(u,e,n,i,l)}),A6(o,e,n,i,l)}function j3(e,t,r,n,i){var o,s,a,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=gd(u,f),p=gd(u,f+(h-f)*r),v=gd(c,h+(f-h)*r),m=gd(c,h);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,s=f,a=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,s=f+(h-f)*r,a=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:s,cpx2:a,cpy2:l}}const Tlt=wlt;var si=Re();function klt(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,fz(t,r,e),$(r,function(n){$(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,we(Plt,e))})}),t.wrapMethod("cloneShallow",we(Elt,e)),$(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,we(Clt,e))}),Ui(r[t.dataType]===t)}function Plt(e,t){if(xlt(this)){var r=ut({},si(this).datas);r[this.dataType]=t,fz(t,r,e)}else tC(t,this.dataType,si(this).mainData,e);return t}function Clt(e,t){return e.struct&&e.struct.update(),t}function Elt(e,t){return $(si(t).datas,function(r,n){r!==t&&tC(r.cloneShallow(),n,t,e)}),t}function Alt(e){var t=si(this).mainData;return e==null||t==null?t:si(t).datas[e]}function Mlt(){var e=si(this).mainData;return e==null?[{data:e}]:It(ge(si(e).datas),function(t){return{type:t,data:si(e).datas[t]}})}function xlt(e){return si(e).mainData===e}function fz(e,t,r){si(e).datas={},$(t,function(n,i){tC(n,i,e,r)})}function tC(e,t,r,n){si(r).datas[t]=e,si(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Alt,e.getLinkedDataAll=Mlt}var Ilt=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ht(t)&&(n=r,r=t,t=null),t=t||{},Mt(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],s;i==="preorder"&&(s=r.call(n,this));for(var a=0;!s&&a<o.length;a++)o[a].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Llt=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],s=1;a(t);function a(c,f){var h=c.value;s=Math.max(s,pt(h)?h.length:1),o.push(c);var d=new Ilt(ii(c.name,""),i);f?Olt(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)a(p[v],d)}i.root.updateDepthAndHeight(0);var l=y$(o,{coordDimensions:["value"],dimensionsCount:s}).dimensions,u=new Ql(l,r);return u.initData(o),n&&n(u),klt({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Olt(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const Rlt=Llt;function Dlt(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Nlt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Ir(i,this,this.ecModel),s=Rlt.createTree(n,this,a);function a(f){f.wrapMethod("getItemModel",function(h,d){var p=s.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;s.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return s.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),s.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,s=o.root.children[0],a=o.getNodeByDataIndex(r),l=a.getValue(),u=a.name;a&&a!==s;)u=a.parentNode.name+"."+u,a=a.parentNode;return Da("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=Dlt(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(No);const Flt=Nlt;function $lt(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var s=o.children;if(s.length)for(var a=0;a<s.length;a++)n.push(s[a])}for(;o=i.pop();)t(o,r)}function Mh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function zlt(e,t){e.eachSeriesByType("tree",function(r){Blt(r,t)})}function Blt(e,t){var r=dlt(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,s=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,s=P6(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(i=r.width,o=r.height,s=P6());var a=e.getData().tree.root,l=a.children[0];if(l){clt(a),$lt(l,flt,s),a.hierNode.modifier=-l.hierNode.prelim,Mh(l,hlt);var u=l,c=l,f=l;Mh(l,function(b){var w=b.getLayout().x;w<u.getLayout().x&&(u=b),w>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var h=u===c?1:s(u,c)/2,d=h-u.getLayout().x,p=0,v=0,m=0,g=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),Mh(l,function(b){m=(b.getLayout().x+d)*p,g=(b.depth-1)*v;var w=gd(m,g);b.setLayout({x:w.x,y:w.y,rawX:m,rawY:g},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),Mh(l,function(b){g=(b.getLayout().x+d)*v,m=y==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:m,y:g},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),Mh(l,function(b){m=(b.getLayout().x+d)*p,g=y==="TB"?(b.depth-1)*v:o-(b.depth-1)*v,b.setLayout({x:m,y:g},!0)}))}}}function Vlt(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),s=o.getModel("itemStyle").getItemStyle(),a=r.ensureUniqueItemVisual(i.dataIndex,"style");ut(a,s)})})}function Ult(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,s=o.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,s=ult(o,t,void 0,n);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}function Wlt(e){e.registerChartView(Tlt),e.registerSeriesModel(Flt),e.registerLayout(zlt),e.registerVisual(Vlt),Ult(e)}var Ep=$,jlt=Dt,s1=-1,eC=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=Wt(t);this.type=n,this.mappingMethod=r,this._normalizeData=Xlt[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(o2(i),Glt(i)):r==="category"?i.categories?Hlt(i):o2(i,!0):(Ui(r!=="linear"||i.dataExtent),o2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return jt(this._normalizeData,this)},e.listVisualTypes=function(){return ge(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Dt(t)?$(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=pt(t)?[]:Dt(t)?{}:(i=!0,null);return e.eachVisual(t,function(s,a){var l=r.call(n,s,a);i?o=l:o[a]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&Ep(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(pt(t))t=t.slice();else if(jlt(t)){var r=[];Ep(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,s=0,a=r.length;s<a;s++){var l=r[s].value;if(l!=null){if(l===t||Mt(l)&&l===t+"")return s;n&&h(l,s)}}for(var s=0,a=r.length;s<a;s++){var u=r[s],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(bv(f[1],t,c[1]))return s}else if(c[1]===1/0){if(bv(f[0],c[0],t))return s}else if(bv(f[0],c[0],t)&&bv(f[1],t,c[1]))return s;n&&h(c[0],s),n&&h(c[1],s)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:xh("color"),getColorMapper:function(){var t=this.option;return jt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),md.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=Zy(r,t.parsedVisual,i),o?i:vs(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return vs(Zy(t,this.option.parsedVisual),"rgba")},category:md,piecewise:function(t,r){var n=H3.call(this,r);return n==null&&(n=vs(Zy(t,this.option.parsedVisual),"rgba")),n},fixed:Dl}},colorHue:yv(function(t,r){return Ky(t,r)}),colorSaturation:yv(function(t,r){return Ky(t,null,r)}),colorLightness:yv(function(t,r){return Ky(t,null,null,r)}),colorAlpha:yv(function(t,r){return JS(t,r)}),decal:{applyVisual:xh("decal"),_normalizedToVisual:{linear:null,category:md,piecewise:null,fixed:null}},opacity:{applyVisual:xh("opacity"),_normalizedToVisual:G3([0,1])},liftZ:{applyVisual:xh("liftZ"),_normalizedToVisual:{linear:Dl,category:Dl,piecewise:Dl,fixed:Dl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:x6,category:md,piecewise:function(t,r){var n=H3.call(this,r);return n==null&&(n=x6.call(this,t)),n},fixed:Dl}},symbolSize:{applyVisual:xh("symbolSize"),_normalizedToVisual:G3([0,1])}},e}();function Glt(e){var t=e.pieceList;e.hasSpecialVisual=!1,$(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Hlt(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(Ep(t,function(s,a){r[s]=a}),!pt(n)){var i=[];Dt(n)?Ep(n,function(s,a){var l=r[a];i[l!=null?l:s1]=s}):i[s1]=n,n=hz(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function o2(e,t){var r=e.visual,n=[];Dt(r)?Ep(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),hz(e,n)}function yv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:G3([0,1])}}function x6(e){var t=this.option.visual;return t[Math.round(bs(e,[0,1],[0,t.length-1],!0))]||{}}function xh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function md(e){var t=this.option.visual;return t[this.option.loop&&e!==s1?e%t.length:e]}function Dl(){return this.option.visual[0]}function G3(e){return{linear:function(t){return bs(t,e,this.option.visual,!0)},category:md,piecewise:function(t,r){var n=H3.call(this,r);return n==null&&(n=bs(t,e,this.option.visual,!0)),n},fixed:Dl}}function H3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=eC.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function hz(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=It(t,function(r){var n=ni(r);return n||[0,0,0,1]})),t}var Xlt={linear:function(e){return bs(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=eC.findPieceIndex(e,t,!0);if(r!=null)return bs(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?s1:t},fixed:Yr};function bv(e,t,r){return e?t<=r:t<r}const bn=eC;var I6=Oa.prototype,s2=f_.prototype,dz=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(dz);function a2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Ylt=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dz},t.prototype.buildPath=function(r,n){a2(n)?I6.buildPath.call(this,r,n):s2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return a2(this.shape)?I6.pointAt.call(this,r):s2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=a2(n)?[n.x2-n.x1,n.y2-n.y1]:s2.tangentAt.call(this,r);return Qk(i,i)},t}(pe);const qlt=Ylt;var l2=["fromSymbol","toSymbol"];function L6(e){return"_"+e+"Type"}function O6(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),s=t.getItemVisual(r,e+"Offset"),a=t.getItemVisual(r,e+"KeepAspect"),l=WF(i),u=BP(s||0,l),c=Wi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,a);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function Zlt(e){var t=new qlt({name:"line",subPixelOptimize:!0});return X3(t.shape,e),t}function X3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Klt=function(e){St(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,s=r.getItemLayout(n),a=Zlt(s);a.shape.percent=0,Do(a,{shape:{percent:1}},o,n),this.add(a),$(l2,function(l){var u=O6(l,r,n);this.add(u),this[L6(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=r.getItemLayout(n),l={shape:{}};X3(l.shape,a),br(s,l,o,n),$(l2,function(u){var c=r.getItemVisual(n,u),f=L6(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=O6(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");a=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=Cu(p)}var m=r.getItemVisual(n,"style"),g=m.stroke;s.useStyle(m),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=a,s.ensureState("blur").style=l,s.ensureState("select").style=u,$(l2,function(S){var k=this.childOfName(S);if(k){k.setColor(g),k.style.opacity=m.opacity;for(var x=0;x<li.length;x++){var A=li[x],I=s.getState(A);if(I){var L=I.style||{},N=k.ensureState(A),z=N.style||(N.style={});L.stroke!=null&&(z[k.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(z.opacity=L.opacity)}}k.markRedraw()}},this);var y=o.getRawValue(n);xf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,k){return o.getFormattedLabel(S,k,r.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?tr(y):y)+""});var b=this.getTextContent();if(b){var w=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");pt(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),hu(this,h,d,f)},t.prototype.highlight=function(){dp(this)},t.prototype.downplay=function(){pp(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");X3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var s=1,a=this.parent;a;)a.scaleX&&(s/=a.scaleX),a=a.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=p7([],f,c);Qk(h,h);function d(I,L){var N=I.__specifiedRotation;if(N==null){var z=l.tangentAt(L);I.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(z[1],z[0]))}else I.attr("rotation",N)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=s*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=s*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,m=o.__labelDistance,g=m[0]*s,y=m[1]*s,b=u/2,w=l.tangentAt(b),T=[w[1],-w[0]],S=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var x=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(x=Math.PI+x),o.rotation=x}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*g+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*g+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=g*k+c[0],o.y=c[1]+A,p=w[0]<0?"right":"left",o.originX=-g*k,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-g*k+f[0],o.y=f[1]+A,p=w[0]>=0?"right":"left",o.originX=g*k,o.originY=-A;break}o.scaleX=o.scaleY=s,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(Ne);const Jlt=Klt;var Qlt=function(){function e(t){this.group=new Ne,this._LineCtor=t||Jlt}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var s=R6(t);t.diff(o).add(function(a){r._doAdd(t,a,s)}).update(function(a,l){r._doUpdate(o,t,l,a,s)}).remove(function(a){i.remove(o.getItemGraphicEl(a))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=R6(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(a){!a.isGroup&&!tut(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(u2(o)){var s=new this._LineCtor(r,i,this._seriesScope);s.traverse(n),this.group.add(s),r.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Mf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!u2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var s=t.getItemGraphicEl(n);if(!u2(r.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(r,i,o):s=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,s),this.group.add(s)},e}();function tut(e){return e.animators&&e.animators.length>0}function R6(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Cu(t)}}function D6(e){return isNaN(e[0])||isNaN(e[1])}function u2(e){return e&&!D6(e[0])&&!D6(e[1])}const eut=Qlt;function rut(e,t,r,n,i,o){e=e||0;var s=r[1]-r[0];if(i!=null&&(i=ac(i,[0,s])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var a=Math.abs(t[1]-t[0]);a=ac(a,[0,s]),i=o=ac(a,[i,o]),n=0}t[0]=ac(t[0],r),t[1]=ac(t[1],r);var l=c2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=ac(t[n],c);var f;return f=c2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=c2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function c2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function ac(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var N6={color:"fill",borderColor:"stroke"},nut={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},gs=Re(),iut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return Qp(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=gs(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(No);const out=iut;function sut(e,t){return t=t||[0,0],It(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],s=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-s)-i.dataToCoord(o+s))},this)}function aut(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:jt(sut,e)}}}function lut(e,t){return t=t||[0,0],It([0,1],function(r){var n=t[r],i=e[r]/2,o=[],s=[];return o[r]=n-i,s[r]=n+i,o[1-r]=s[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(s)[r])},this)}function uut(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:jt(lut,e)}}}function cut(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function fut(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:jt(cut,e)}}}function hut(e,t){return t=t||[0,0],It(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),s=t[n],a=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-a)-o.dataToCoord(s+a));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function dut(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),s=r.dataToAngle(i[1]),a=e.coordToPoint([o,s]);return a.push(o,s*Math.PI/180),a},size:jt(hut,e)}}}function put(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function vut(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||_t(e,"text")))}function gut(e,t,r){var n=e,i,o,s;if(t==="text")s=n;else{s={},_t(n,"text")&&(s.text=n.text),_t(n,"rich")&&(s.rich=n.rich),_t(n,"textFill")&&(s.fill=n.textFill),_t(n,"textStroke")&&(s.stroke=n.textStroke),_t(n,"fontFamily")&&(s.fontFamily=n.fontFamily),_t(n,"fontSize")&&(s.fontSize=n.fontSize),_t(n,"fontStyle")&&(s.fontStyle=n.fontStyle),_t(n,"fontWeight")&&(s.fontWeight=n.fontWeight),o={type:"text",style:s,silent:!0},i={};var a=_t(n,"textPosition");r?i.position=a?n.textPosition:"inside":a&&(i.position=n.textPosition),_t(n,"textPosition")&&(i.position=n.textPosition),_t(n,"textOffset")&&(i.offset=n.textOffset),_t(n,"textRotation")&&(i.rotation=n.textRotation),_t(n,"textDistance")&&(i.distance=n.textDistance)}return F6(s,e),$(s.rich,function(l){F6(l,l)}),{textConfig:i,textContent:o}}function F6(e,t){!t||(t.font=t.textFont||t.font,_t(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),_t(t,"textAlign")&&(e.align=t.textAlign),_t(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),_t(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),_t(t,"textWidth")&&(e.width=t.textWidth),_t(t,"textHeight")&&(e.height=t.textHeight),_t(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),_t(t,"textPadding")&&(e.padding=t.textPadding),_t(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),_t(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),_t(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),_t(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),_t(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),_t(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),_t(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function $6(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";z6(n,t);var s=n.textFill==null;return i?s&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(s&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,$(t.rich,function(a){z6(a,a)}),n}function z6(e,t){!t||(_t(t,"fill")&&(e.textFill=t.fill),_t(t,"stroke")&&(e.textStroke=t.fill),_t(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),_t(t,"font")&&(e.font=t.font),_t(t,"fontStyle")&&(e.fontStyle=t.fontStyle),_t(t,"fontWeight")&&(e.fontWeight=t.fontWeight),_t(t,"fontSize")&&(e.fontSize=t.fontSize),_t(t,"fontFamily")&&(e.fontFamily=t.fontFamily),_t(t,"align")&&(e.textAlign=t.align),_t(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),_t(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),_t(t,"width")&&(e.textWidth=t.width),_t(t,"height")&&(e.textHeight=t.height),_t(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),_t(t,"padding")&&(e.textPadding=t.padding),_t(t,"borderColor")&&(e.textBorderColor=t.borderColor),_t(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),_t(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),_t(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),_t(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),_t(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),_t(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),_t(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),_t(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),_t(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),_t(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var pz={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},B6=ge(pz);ku(Ro,function(e,t){return e[t]=1,e},{});Ro.join(", ");var a1=["","style","shape","extra"],df=Re();function rC(e,t,r,n,i){var o=e+"Animation",s=wP(e,n,i)||{},a=df(t).userDuring;return s.duration>0&&(s.during=a?jt(Tut,{el:t,userDuring:a}):null,s.setToFinal=!0,s.scope=e),ut(s,r[o]),s}function mut(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,s=n.clearStyle,a=r.isAnimationEnabled(),l=df(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Put(e,t,f),U6("shape",t,f),U6("extra",t,f),!o&&a&&(kut(e,t,c),V6("shape",e,t,c),V6("extra",e,t,c),Cut(e,t,u,c)),f.style=u,yut(e,f,s),wut(e,t),a)if(o){var h={};$(a1,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ut(p?h[p]:h,v.enterFrom))});var d=rC("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else but(e,t,i||0,r,c);_ut(e,t),u?e.dirty():e.markRedraw()}function _ut(e,t){for(var r=df(e).leaveToProps,n=0;n<a1.length;n++){var i=a1[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=df(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ut(i?r[i]:r,o.leaveTo))}}function nC(e,t,r,n){if(e){var i=e.parent,o=df(e).leaveToProps;if(o){var s=rC("update",e,t,r,0);s.done=function(){i.remove(e),n&&n()},e.animateTo(o,s)}else i.remove(e),n&&n()}}function Qc(e){return e==="all"}function yut(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var s=i[o];s.targetName==="style"&&s.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function but(e,t,r,n,i){if(i){var o=rC("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function wut(e,t){_t(t,"silent")&&(e.silent=t.silent),_t(t,"ignore")&&(e.ignore=t.ignore),e instanceof Pu&&_t(t,"invisible")&&(e.invisible=t.invisible),e instanceof pe&&_t(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var yo={},Sut={setTransform:function(e,t){return yo.el[e]=t,this},getTransform:function(e){return yo.el[e]},setShape:function(e,t){var r=yo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=yo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=yo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=yo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=yo.el.extra||(yo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=yo.el.extra;if(t)return t[e]}};function Tut(){var e=this,t=e.el;if(!!t){var r=df(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}yo.el=t,n(Sut)}}function V6(e,t,r,n){var i=r[e];if(!!i){var o=t[e],s;if(o){var a=r.transition,l=i.transition;if(l)if(!s&&(s=n[e]={}),Qc(l))ut(s,o);else for(var u=er(l),c=0;c<u.length;c++){var f=u[c],h=o[f];s[f]=h}else if(Qc(a)||he(a,e)>=0){!s&&(s=n[e]={});for(var d=ge(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Eut(i[f],h)&&(s[f]=h)}}}}}function U6(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ge(n),s=0;s<o.length;s++){var a=o[s];i[a]=Dd(n[a])}}function kut(e,t,r){for(var n=t.transition,i=Qc(n)?Ro:er(n||[]),o=0;o<i.length;o++){var s=i[o];if(!(s==="style"||s==="shape"||s==="extra")){var a=e[s];r[s]=a}}}function Put(e,t,r){for(var n=0;n<B6.length;n++){var i=B6[n],o=pz[i],s=t[i];s&&(r[o[0]]=s[0],r[o[1]]=s[1])}for(var n=0;n<Ro.length;n++){var a=Ro[n];t[a]!=null&&(r[a]=t[a])}}function Cut(e,t,r,n){if(!!r){var i=e.style,o;if(i){var s=r.transition,a=t.transition;if(s&&!Qc(s)){var l=er(s);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Qc(a)||Qc(s)||he(a,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ge(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Eut(e,t){return Zr(e)?e!==t:e!=null&&isFinite(e)}var vz=Re(),Aut=["percent","easing","shape","style","extra"];function Mut(e){e.stopAnimation("keyframe"),e.attr(vz(e))}function gz(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(pt(t)){$(t,function(a){gz(e,a,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=wP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var s=vz(e);$(a1,function(a){if(!(a&&!e[a])){var l;n.sort(function(u,c){return u.percent-c.percent}),$(n,function(u){var c=e.animators,f=a?u[a]:u;if(!!f){var h=ge(f);if(a||(h=Mr(h,function(v){return he(Aut,v)<0})),!!h.length){l||(l=e.animate(a,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);a&&(s[a]=s[a]||{});var p=a?s[a]:s;$(h,function(v){p[v]=((a?e[a]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var ms="emphasis",ya="normal",iC="blur",oC="select",Na=[ya,ms,iC,oC],f2={normal:["itemStyle"],emphasis:[ms,"itemStyle"],blur:[iC,"itemStyle"],select:[oC,"itemStyle"]},h2={normal:["label"],emphasis:[ms,"label"],blur:[iC,"label"],select:[oC,"label"]},xut=["x","y"],Iut="e\0\0",Wn={normal:{},emphasis:{},blur:{},select:{}},Lut={cartesian2d:aut,geo:uut,single:fut,polar:dut,calendar:put};function Y3(e){return e instanceof pe}function q3(e){return e instanceof Pu}function Out(e,t){t.copyTransform(e),q3(t)&&q3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,Y3(t)&&Y3(e)&&t.setShape(e.shape))}var Rut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var s=this._data,a=r.getData(),l=this.group,u=W6(r,a,n,i);s||l.removeAll(),a.diff(s).add(function(f){d2(i,null,f,u(f,o),r,l,a)}).remove(function(f){var h=s.getItemGraphicEl(f);h&&nC(h,gs(h).option,r)}).update(function(f,h){var d=s.getItemGraphicEl(h);d2(i,d,f,u(f,o),r,l,a)}).execute();var c=r.get("clip",!0)?q$(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,s){var a=n.getData(),l=W6(n,a,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=d2(null,null,f,l(f,s),n,this.group,a);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){Mf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var s=n.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},t.type="custom",t}(oi);const Dut=Rut;function sC(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=yz(n);r=h_(o,null,i,n.layout||"center"),gs(r).customPathData=o}else if(t==="image")r=new Ms({}),gs(r).customImagePath=e.style.image;else if(t==="text")r=new nr({});else if(t==="group")r=new Ne;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=ON(t);if(!s){var a="";se(a)}r=new s}return gs(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function aC(e,t,r,n,i,o,s){Mut(t);var a=i&&i.normal.cfg;a&&t.setTextConfig(a),n&&n.transition==null&&(n.transition=xut);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;_t(u,"textFill")&&(u.fill=u.textFill),_t(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=Y3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=n1(f,e)),l.__decalPattern=c}if(q3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}mut(t,n,o,{dataIndex:r,isInit:s,clearStyle:!0}),gz(t,n.keyframeAnimation,o)}function mz(e,t,r,n,i){var o=t.isGroup?null:t,s=i&&i[e].cfg;if(o){var a=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else a.style=n||null;s&&(a.textConfig=s),pP(o)}}function Nut(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var s=t.z2;s!=null&&(n.z2=s||0);for(var a=0;a<Na.length;a++)Fut(n,t,Na[a])}}function Fut(e,t,r){var n=r===ya,i=n?t:l1(t,r),o=i?i.z2:null,s;o!=null&&(s=n?e:e.ensureState(r),s.z2=o||0)}function W6(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,s={};o&&(s=o.prepareCustoms?o.prepareCustoms(o):Lut[o.type](o));for(var a=ie({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:k,visual:I,barLayout:L,currentSeriesIndices:N,font:z},s.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:$ut(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Na.length;v++){var m=Na[v];d[m]=e.getModel(f2[m]),p[m]=e.getModel(h2[m])}function g(V){return V===u?c||(c=t.getItemModel(V)):t.getItemModel(V)}function y(V,F){return t.hasItemOption?V===u?f[F]||(f[F]=g(V).getModel(f2[F])):g(V).getModel(f2[F]):d[F]}function b(V,F){return t.hasItemOption?V===u?h[F]||(h[F]=g(V).getModel(h2[F])):g(V).getModel(h2[F]):p[F]}return function(V,F){return u=V,c=null,f={},h={},i&&i(ie({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:F?F.type:null},l),a)};function w(V,F){return F==null&&(F=u),t.getStore().get(t.getDimensionIndex(V||0),F)}function T(V,F){F==null&&(F=u),V=V||0;var G=t.getDimensionInfo(V);if(!G){var K=t.getDimensionIndex(V);return K>=0?t.getStore().get(K,F):void 0}var q=t.get(G.name,F),rt=G&&G.ordinalMeta;return rt?rt.categories[q]:q}function S(V,F){F==null&&(F=u);var G=t.getItemVisual(F,"style"),K=G&&G.fill,q=G&&G.opacity,rt=y(F,ya).getItemStyle();K!=null&&(rt.fill=K),q!=null&&(rt.opacity=q);var At={inheritColor:Mt(K)?K:"#000"},Nt=b(F,ya),Pt=yn(Nt,null,At,!1,!0);Pt.text=Nt.getShallow("show")?Qt(e.getFormattedLabel(F,ya),Pp(t,F)):null;var Ct=Km(Nt,At,!1);return A(V,rt),rt=$6(rt,Pt,Ct),V&&x(rt,V),rt.legacy=!0,rt}function k(V,F){F==null&&(F=u);var G=y(F,ms).getItemStyle(),K=b(F,ms),q=yn(K,null,null,!0,!0);q.text=K.getShallow("show")?Od(e.getFormattedLabel(F,ms),e.getFormattedLabel(F,ya),Pp(t,F)):null;var rt=Km(K,null,!0);return A(V,G),G=$6(G,q,rt),V&&x(G,V),G.legacy=!0,G}function x(V,F){for(var G in F)_t(F,G)&&(V[G]=F[G])}function A(V,F){V&&(V.textFill&&(F.textFill=V.textFill),V.textPosition&&(F.textPosition=V.textPosition))}function I(V,F){if(F==null&&(F=u),_t(N6,V)){var G=t.getItemVisual(F,"style");return G?G[N6[V]]:null}if(_t(nut,V))return t.getItemVisual(F,V)}function L(V){if(o.type==="cartesian2d"){var F=o.getBaseAxis();return Eot(ie({axis:F},V))}}function N(){return r.getCurrentSeriesIndices()}function z(V){return BN(V,r)}}function $ut(e){var t={};return $(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function d2(e,t,r,n,i,o,s){if(!n){o.remove(t);return}var a=lC(e,t,r,n,i,o);return a&&s.setItemGraphicEl(r,a),a&&hu(a,n.focus,n.blurScope,n.emphasisDisabled),a}function lC(e,t,r,n,i,o){var s=-1,a=t;t&&_z(t,n,i)&&(s=he(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=sC(n),a&&Out(a,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Wn.normal.cfg=Wn.normal.conOpt=Wn.emphasis.cfg=Wn.emphasis.conOpt=Wn.blur.cfg=Wn.blur.conOpt=Wn.select.cfg=Wn.select.conOpt=null,Wn.isLegacy=!1,But(u,r,n,i,l,Wn),zut(u,r,n,i,l),aC(e,u,r,n,Wn,i,l),_t(n,"info")&&(gs(u).info=n.info);for(var c=0;c<Na.length;c++){var f=Na[c];if(f!==ya){var h=l1(n,f),d=uC(n,h,f);mz(f,u,h,d,Wn)}}return Nut(u,n,i),n.type==="group"&&Vut(e,u,r,n,i),s>=0?o.replaceAt(u,s):o.add(u),u}function _z(e,t,r){var n=gs(e),i=t.type,o=t.shape,s=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&Gut(o)&&yz(o)!==n.customPathData||i==="image"&&_t(s,"image")&&s.image!==n.customImagePath}function zut(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var s=e.getClipPath();s&&_z(s,o,n)&&(s=null),s||(s=sC(o),e.setClipPath(s)),aC(null,s,t,o,null,n,i)}}function But(e,t,r,n,i,o){if(!e.isGroup){j6(r,null,o),j6(r,ms,o);var s=o.normal.conOpt,a=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(s!=null||a!=null||u!=null||l!=null){var c=e.getTextContent();if(s===!1)c&&e.removeTextContent();else{s=o.normal.conOpt=s||{type:"text"},c?c.clearStates():(c=sC(s),e.setTextContent(c)),aC(null,c,t,s,null,n,i);for(var f=s&&s.style,h=0;h<Na.length;h++){var d=Na[h];if(d!==ya){var p=o[d].conOpt;mz(d,c,p,uC(s,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function j6(e,t,r){var n=t?l1(e,t):e,i=t?uC(e,n,ms):e.style,o=e.type,s=n?n.textConfig:null,a=e.textContent,l=a?t?l1(a,t):a:null;if(i&&(r.isLegacy||vut(i,o,!!s,!!l))){r.isLegacy=!0;var u=gut(i,o,!t);!s&&u.textConfig&&(s=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=s,f.conOpt=l}function l1(e,t){return t?e?e[t]:null:e}function uC(e,t,r){var n=t&&t.style;return n==null&&r===ms&&e&&(n=e.styleEmphasis),n}function Vut(e,t,r,n,i){var o=n.children,s=o?o.length:0,a=n.$mergeChildren,l=a==="byName"||n.diffChildrenByName,u=a===!1;if(!(!s&&!l&&!u)){if(l){Wut({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<s;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),lC(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);Uut(t,p,i)}}}function Uut(e,t,r){t&&nC(t,gs(e).option,r)}function Wut(e){new d$(e.oldChildren,e.newChildren,G6,G6,e).add(H6).update(H6).remove(jut).execute()}function G6(e,t){var r=e&&e.name;return r!=null?r:Iut+t}function H6(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;lC(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function jut(e){var t=this.context,r=t.oldChildren[e];r&&nC(r,gs(r).option,t.seriesModel)}function yz(e){return e&&(e.pathData||e.d)}function Gut(e){return e&&(_t(e,"pathData")||_t(e,"d"))}function Hut(e){e.registerChartView(Dut),e.registerSeriesModel(out)}var zl=Re(),X6=Wt,p2=jt,Xut=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),s=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===s)){this._lastValue=o,this._lastStatus=s;var a=this._group,l=this._handle;if(!s||s==="hide"){a&&a.hide(),l&&l.hide();return}a&&a.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!a)a=this._group=new Ne,this.createPointerEl(a,u,t,r),this.createLabelEl(a,u,t,r),n.getZr().add(a);else{var h=we(Y6,r,f);this.updatePointerEl(a,u,h),this.updateLabelEl(a,u,h,r)}Z6(a,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",s=r.get("snap");if(!s&&!o)return!1;if(n==="auto"||n==null){var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(s){var l=QP(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>a}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var s=zl(t).pointerEl=new Cet[o.type](X6(r.pointer));t.add(s)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=zl(t).labelEl=new nr(X6(r.label));t.add(o),q6(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=zl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=zl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),q6(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),s=r.get("status");if(!o.get("show")||!s||s==="hide"){i&&n.remove(i),this._handle=null;return}var a;this._handle||(a=!0,i=this._handle=TP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){uu(u.event)},onmousedown:p2(this._onHandleDragMove,this,0,0),drift:p2(this._onHandleDragMove,this),ondragend:p2(this._onHandleDragEnd,this)}),n.add(i)),Z6(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");pt(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,RF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},e.prototype._moveHandleToValue=function(t,r){Y6(this._axisPointerModel,!r&&this._moveAnimation,this._handle,v2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(v2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(v2(i)),zl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),E3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function Y6(e,t,r,n){bz(zl(r).lastProp,n)||(zl(r).lastProp=n,t?br(r,n,e):(r.stopAnimation(),r.attr(n)))}function bz(e,t){if(Dt(e)&&Dt(t)){var r=!0;return $(t,function(n,i){r=r&&bz(e[i],n)}),!!r}else return e===t}function q6(e,t){e[t.get(["label","show"])?"show":"hide"]()}function v2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function Z6(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const Yut=Xut;function qut(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Zut(e,t,r,n,i){var o=r.get("value"),s=wz(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),a=r.getModel("label"),l=Jp(a.get("padding")||0),u=a.getFont(),c=iP(s,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Kut(f,h,d,n);var m=a.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:yn(a,{text:s,font:u,fill:a.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Kut(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function wz(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var a={value:qP(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};$(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&a.seriesData.push(f)}),Mt(s)?o=s.replace("{value}",o):Ht(s)&&(o=s(a))}return o}function Sz(e,t,r){var n=cf();return rP(n,n,r.rotation),YS(n,n,r.position),qc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Jut(e,t,r,n,i,o){var s=iz.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Zut(t,n,i,o,{position:Sz(n.axis,e,r),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function Qut(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function tct(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var ect=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,s){var a=i.axis,l=a.grid,u=o.get("type"),c=K6(l,a).getOtherAxis(a).getGlobalExtent(),f=a.toGlobalCoord(a.dataToCoord(n,!0));if(u&&u!=="none"){var h=qut(o),d=rct[u](a,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=V3(l.model,i);Jut(n,r,p,i,o,s)},t.prototype.getHandleTransform=function(r,n,i){var o=V3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var s=Sz(n.axis,r,o);return{x:s[0],y:s[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var s=i.axis,a=s.grid,l=s.getGlobalExtent(!0),u=K6(a,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(Yut);function K6(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var rct={line:function(e,t,r){var n=Qut([t,r[0]],[t,r[1]],J6(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:tct([t-n/2,r[0]],[n,i],J6(e))}}};function J6(e){return e.dim==="x"?0:1}const nct=ect;var ict=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const oct=ict;var hs=Re(),sct=$;function Tz(e,t,r){if(!Kt.node){var n=t.getZr();hs(n).records||(hs(n).records={}),act(n,t);var i=hs(n).records[e]||(hs(n).records[e]={});i.handler=r}}function act(e,t){if(hs(e).initialized)return;hs(e).initialized=!0,r("click",we(Q6,"click")),r("mousemove",we(Q6,"mousemove")),r("globalout",uct);function r(n,i){e.on(n,function(o){var s=cct(t);sct(hs(e).records,function(a){a&&i(a,o,s.dispatchAction)}),lct(s.pendings,t)})}}function lct(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function uct(e,t,r){e.handler("leave",null,r)}function Q6(e,t,r,n){t.handler(e,r,n)}function cct(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function Z3(e,t){if(!Kt.node){var r=t.getZr(),n=(hs(r).records||{})[e];n&&(hs(r).records[e]=null)}}var fct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),s=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";Tz("axisPointer",i,function(a,l,u){s!=="none"&&(a==="leave"||s.indexOf(a)>=0)&&u({type:"updateAxisPointer",currTrigger:a,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){Z3("axisPointer",n)},t.prototype.dispose=function(r,n){Z3("axisPointer",n)},t.type="axisPointer",t}(ui);const hct=fct;function kz(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),s=cu(o,e);if(s==null||s<0||pt(s))return{point:[]};var a=o.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,s),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),s),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(It(l.dimensions,function(g){return o.mapDimension(g)}),s))||[];else if(a){var m=a.getBoundingRect().clone();m.applyTransform(a.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:a}}var tx=Re();function dct(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,s=e.dispatchAction||jt(r.dispatchAction,r),a=t.getComponent("axisPointer").coordSysAxesInfo;if(!!a){um(i)&&(i=kz({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=um(i),u=o.axesInfo,c=a.axesInfo,f=n==="leave"||um(i),h={},d={},p={list:[],map:{}},v={showPointer:we(vct,d),showTooltip:we(gct,p)};$(a.coordSysMap,function(g,y){var b=l||g.containPoint(i);$(a.coordSysAxesInfo[y],function(w,T){var S=w.axis,k=bct(u,w);if(!f&&b&&(!u||k)){var x=k&&k.value;x==null&&!l&&(x=S.pointToData(i)),x!=null&&ex(w,x,v,!1,h)}})});var m={};return $(c,function(g,y){var b=g.linkGroup;b&&!d[y]&&$(b.axesInfo,function(w,T){var S=d[T];if(w!==g&&S){var k=S.value;b.mapper&&(k=g.axis.scale.parse(b.mapper(k,rx(w),rx(g)))),m[g.key]=k}})}),$(m,function(g,y){ex(c[y],g,v,!0,h)}),mct(d,c,h),_ct(p,i,e,s),yct(c,s,r),h}}function ex(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var s=pct(t,e),a=s.payloadBatch,l=s.snapToValue;a[0]&&i.seriesIndex==null&&ut(i,a[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,a),r.showTooltip(e,s,l)}}function pct(e,t){var r=t.axis,n=r.dim,i=e,o=[],s=Number.MAX_VALUE,a=-1;return $(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=s&&((v<s||p>=0&&a<0)&&(s=v,a=p,i=f,o.length=0),$(h,function(m){o.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:o,snapToValue:i}}function vct(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function gct(e,t,r,n){var i=r.payloadBatch,o=t.axis,s=o.model,a=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=Cp(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function mct(e,t,r){var n=r.axesInfo=[];$(t,function(i,o){var s=i.axisPointerModel.option,a=e[o];a?(!i.useHandle&&(s.status="show"),s.value=a.value,s.seriesDataIndices=(a.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function _ct(e,t,r,n){if(um(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function yct(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=tx(n)[i]||{},s=tx(n)[i]={};$(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&$(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;s[d]=h})});var a=[],l=[];$(o,function(u,c){!s[c]&&l.push(u)}),$(s,function(u,c){!o[c]&&a.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),a.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function bct(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function rx(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function um(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function Pz(e){oz.registerAxisPointerClass("CartesianAxisPointer",nct),e.registerComponentModel(oct),e.registerComponentView(hct),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!pt(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=zat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},dct)}function Lu(e){wr(lz),wr(Pz)}function wct(e,t){var r=Jp(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new rr({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Sct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const Tct=Sct;function Cz(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Ez(e){if(!!Kt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var Az=Ez(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kct=Ez(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Mz(e,t){if(!e)return t;t=tF(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Pct(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Cct=Mz(kct,"transition"),cC=Mz(Az,"transform"),Ect="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Kt.transform3dSupported?"will-change:transform;":"");function Act(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Mct(e,t,r){if(!Mt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=pu(t);var o=Act(r),s=Math.max(Math.round(i)*1.5,6),a="",l=cC+":",u;he(["left","right"],o)>-1?(a+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(a+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=s+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;a+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+s+"px;height:"+s+"px;",a+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function xct(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Kt.transformSupported?","+cC+n:",left"+n+",top"+n),Cct+":"+i}function nx(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Kt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Kt.transform3dSupported,s="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+cC+":"+s+";":[["top",0],["left",0],[Az,s]]}function Ict(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,a=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+s+"px "+a+"px "+o+"px "+i),$(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Lct(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),s=e.get("shadowBlur"),a=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=LF(e,"html"),h=l+"px "+u+"px "+s+"px "+a;return n.push("box-shadow:"+h),t&&i&&n.push(xct(i,r)),o&&n.push("background-color:"+o),$(["width","color","radius"],function(d){var p="border-"+d,v=tF(p),m=e.get(v);m!=null&&n.push(p+":"+m+(d==="color"?"":"px"))}),n.push(Ict(c)),f!=null&&n.push("padding:"+Jp(f).join("px ")+"px"),n.join(";")+";"}function ix(e,t,r,n,i){var o=t&&t.painter;if(r){var s=o&&o.getViewportRoot();s&&EK(e,s,document.body,n,i)}else{e[0]=n,e[1]=i;var a=o&&o.getViewportRootOffset();a&&(e[0]+=a.offsetLeft,e[1]+=a.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Oct=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Kt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),s=this._appendToBody=n&&n.appendToBody;ix(this._styleCoord,o,s,r.getWidth()/2,r.getHeight()/2),s?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!a._enterable){var u=o.handler,c=o.painter.getViewportRoot();qn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Pct(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Ect+Lct(t,!this._firstShow,this._longHide)+nx(o[0],o[1],!0)+("border-color:"+pu(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var s=this.el;if(t==null){s.innerHTML="";return}var a="";if(Mt(o)&&n.get("trigger")==="item"&&!Cz(n)&&(a=Mct(n,i,o)),Mt(t))s.innerHTML=t+a;else if(t){s.innerHTML="",pt(t)||(t=[t]);for(var l=0;l<t.length;l++)Nm(t[l])&&t[l].parentNode!==s&&s.appendChild(t[l]);if(a&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=a,s.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(ix(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=nx(n[0],n[1]);$(o,function(s){i[s[0]]=s[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Kt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(jt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Rct=Oct;var Dct=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),sx(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var s=this;Dt(t)&&se(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new nr({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:LF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),$(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=n.get(u)}),$(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=a.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=ox(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;sx(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,s=fa(o.borderWidth||0),a=ox(o);n.x=t+s+a.left,n.y=r+s+a.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(jt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function fa(e){return Math.max(0,e)}function ox(e){var t=fa(e.shadowBlur||0),r=fa(e.shadowOffsetX||0),n=fa(e.shadowOffsetY||0);return{left:fa(t-r),right:fa(t+r),top:fa(t-n),bottom:fa(t+n)}}function sx(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const Nct=Dct;var Fct=new rr({shape:{x:-1,y:-1,width:2,height:2}}),$ct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Kt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=uQ(i.get("renderMode"));this._tooltipContent=o==="richText"?new Nct(n):new Rct(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Kt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?RF(this,"_updatePosition",50,"fixRate"):E3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");Tz("itemTooltip",this._api,jt(function(i,o,s){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,s):i==="leave"&&this._hide(s))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(r,n,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Kt.node||!i.getDom())){var s=ax(o,i);this._ticket="";var a=o.dataByCoordSys,l=Uct(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},s)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=Fct;c.x=o.x,c.y=o.y,c.update(),le(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},s)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:a,tooltipOption:o.tooltipOption},s);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=kz(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},s)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},s))}},t.prototype.manuallyHideTip=function(r,n,i,o){var s=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(ax(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var s=o.seriesIndex,a=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||a==null||l==null)){var u=n.getSeriesByIndex(s);if(!!u){var c=u.getData(),f=Ih([c.getItemModel(a),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:a,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var s=r.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,r);else if(i){this._lastDataByCoordSys=null;var a,l;Fc(i,function(u){if(le(u).dataIndex!=null)return a=u,!0;if(le(u).tooltipConfig!=null)return l=u,!0},!0),a?this._showSeriesItemTooltip(r,a,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=jt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,s=[n.offsetX,n.offsetY],a=Ih([n.tooltipOption],o),l=this._renderMode,u=[],c=Da("section",{blocks:[],noHeader:!0}),f=[],h=new Db;$(r,function(y){$(y.dataByAxis,function(b){var w=i.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var S=wz(T,w.axis,i,b.seriesDataIndices,b.valueLabelOpt),k=Da("section",{header:S,noHeader:!Eo(S),sortBlocks:!0,blocks:[]});c.blocks.push(k),$(b.seriesDataIndices,function(x){var A=i.getSeriesByIndex(x.seriesIndex),I=x.dataIndexInside,L=A.getDataParams(I);if(!(L.dataIndex<0)){L.axisDim=b.axisDim,L.axisIndex=b.axisIndex,L.axisType=b.axisType,L.axisId=b.axisId,L.axisValue=qP(w.axis,{value:T}),L.axisValueLabel=S,L.marker=h.makeTooltipMarker("item",pu(L.color),l);var N=HM(A.formatTooltip(I,!0,null)),z=N.frag;if(z){var V=Ih([A],o).get("valueFormatter");k.blocks.push(V?ut({valueFormatter:V},z):z)}N.text&&f.push(N.text),u.push(L)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=a.get("order"),v=JM(c,h,l,p,i.get("useUTC"),a.get("textStyle"));v&&f.unshift(v);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(a,d,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(a,g,u,Math.random()+"",s[0],s[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,s=le(n),a=s.seriesIndex,l=o.getSeriesByIndex(a),u=s.dataModel||l,c=s.dataIndex,f=s.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=Ih([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,f),y=new Db;g.marker=y.makeTooltipMarker("item",pu(g.color),d);var b=HM(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=b.frag,k=S?JM(T?ut({valueFormatter:T},S):S,y,d,w,o.get("useUTC"),v.get("textStyle")):b.text,x="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,k,g,x,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=le(n),s=o.tooltipConfig,a=s.option||{};if(Mt(a)){var l=a;a={content:l,formatter:l}}var u=[a],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:a.content});var f=r.positionDefault,h=Ih(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new Db;this._showOrMove(h,function(){var m=Wt(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,s,a,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([s,a],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Mt(h)){var m=r.ecModel.get("useUTC"),g=pt(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,y&&(d=m_(g.axisValue,d,m)),d=eF(d,i,!0)}else if(Ht(h)){var b=jt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,s,a,f,i,u))},this);this._ticket=o,d=h(i,o,b)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,s,a,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||pt(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!pt(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,s,a,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=s.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ht(n)&&(n=n([i,o],a,s.el,p,{viewSize:[u,c],contentSize:f.slice()})),pt(n))i=Ke(n[0],u),o=Ke(n[1],c);else if(Dt(n)){var v=n;v.width=f[0],v.height=f[1];var m=Ra(v,{width:u,height:c});i=m.x,o=m.y,h=null,d=null}else if(Mt(n)&&l){var g=Vct(n,p,f,r.get("borderWidth"));i=g[0],o=g[1]}else{var g=zct(i,o,s,u,c,h?null:20,d?null:20);i=g[0],o=g[1]}if(h&&(i-=lx(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=lx(d)?f[1]/2:d==="bottom"?f[1]:0),Cz(r)){var g=Bct(i,o,s,u,c);i=g[0],o=g[1]}s.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,s=!!i&&i.length===r.length;return s&&$(i,function(a,l){var u=a.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];s=s&&u.length===f.length,s&&$(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];s=s&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,s&&$(v,function(g,y){var b=m[y];s=s&&g.seriesIndex===b.seriesIndex&&g.dataIndex===b.dataIndex}),o&&$(h.seriesDataIndices,function(g){var y=g.seriesIndex,b=n[y],w=o[y];b&&w&&w.data!==b.data&&(s=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!s},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Kt.node||!n.getDom()||(E3(this,"_updatePosition"),this._tooltipContent.dispose(),Z3("itemTooltip",n))},t.type="tooltip",t}(ui);function Ih(e,t,r){var n=t.ecModel,i;r?(i=new Ir(r,n,n),i=new Ir(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var s=e[o];s&&(s instanceof Ir&&(s=s.get("tooltip",!0)),Mt(s)&&(s={formatter:s}),s&&(i=new Ir(s,i,n)))}return i}function ax(e,t){return e.dispatchAction||jt(t.dispatchAction,t)}function zct(e,t,r,n,i,o,s){var a=r.getSize(),l=a[0],u=a[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),s!=null&&(t+u+s>i?t-=u+s:t+=s),[e,t]}function Bct(e,t,r,n,i){var o=r.getSize(),s=o[0],a=o[1];return e=Math.min(e+s,n)-s,t=Math.min(t+a,i)-a,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Vct(e,t,r,n){var i=r[0],o=r[1],s=Math.ceil(Math.SQRT2*n)+8,a=0,l=0,u=t.width,c=t.height;switch(e){case"inside":a=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":a=t.x+u/2-i/2,l=t.y-o-s;break;case"bottom":a=t.x+u/2-i/2,l=t.y+c+s;break;case"left":a=t.x-i-s,l=t.y+c/2-o/2;break;case"right":a=t.x+u+s,l=t.y+c/2-o/2}return[a,l]}function lx(e){return e==="center"||e==="middle"}function Uct(e,t,r){var n=uP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=qp(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=o.models[0];if(!!s){var a=r.getViewOfComponentModel(s),l;if(a.group.traverse(function(u){var c=le(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}const Wct=$ct;function Ua(e){wr(Pz),e.registerComponentModel(Tct),e.registerComponentView(Wct),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Yr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Yr)}var ux=$;function cx(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function fx(e,t,r){var n={};return ux(t,function(o){var s=n[o]=i();ux(e[o],function(a,l){if(!!bn.isValidType(l)){var u={type:l,visual:a};r&&r(u,o),s[l]=new bn(u),l==="opacity"&&(u=Wt(u),u.type="colorAlpha",s.__hidden.__alphaForOpacity=new bn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var s=new o;return s}}function jct(e,t,r){var n;$(r,function(i){t.hasOwnProperty(i)&&cx(t[i])&&(n=!0)}),n&&$(r,function(i){t.hasOwnProperty(i)&&cx(t[i])?e[i]=Wt(t[i]):delete e[i]})}function Gct(e,t,r,n){var i={};return $(e,function(o){var s=bn.prepareVisualTypes(t[o]);i[o]=s}),{progress:function(s,a){var l;n!=null&&(l=a.getDimensionIndex(n));function u(T){return UF(a,f,T)}function c(T,S){Hnt(a,f,T,S)}for(var f,h=a.getStore();(f=s.next())!=null;){var d=a.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),m=t[v],g=i[v],y=0,b=g.length;y<b;y++){var w=g[y];m[w]&&m[w].applyVisual(p,u,c)}}}}}var Hct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),Xct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,s=r.getModel("textStyle"),a=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new nr({style:yn(s,{text:r.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new nr({style:yn(a,{text:h,fill:a.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!v&&!m,p&&c.on("click",function(){AM(p,"_"+r.get("target"))}),v&&d.on("click",function(){AM(v,"_"+r.get("subtarget"))}),le(c).eventData=le(d).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var g=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=g.width,y.height=g.height;var b=Ra(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),g=o.getBoundingRect();var T=b.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var k=new rr({shape:{x:g.x-T[3],y:g.y-T[0],width:g.width+T[1]+T[3],height:g.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(k)}},t.type="title",t}(ui);function Wa(e){e.registerComponentModel(Hct),e.registerComponentView(Xct)}function xz(e,t){if(!e)return!1;for(var r=pt(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function wv(e){a3(e,"label",["show"])}var Sv=Re(),Iz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Kt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var s=this.mainType;i||n.eachSeries(function(a){var l=a.get(this.mainType,!0),u=Sv(a)[s];if(!l||!l.data){Sv(a)[s]=null;return}u?u._mergeOption(l,n,!0):(o&&wv(l),$(l.data,function(c){c instanceof Array?(wv(c[0]),wv(c[1])):wv(c)}),u=this.createMarkerModelFromSeries(l,this,n),ut(u,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),u.__hostSeries=a),Sv(a)[s]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),s=this.getRawValue(r),a=o.getName(r);return Da("section",{header:this.name,blocks:[Da("nameValue",{name:a,value:s,noName:!a,noValue:s==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return Sv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Hi(Iz,yF.prototype);const pf=Iz;function K3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Yct(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function Tv(e,t,r,n,i,o){var s=[],a=vu(t,n),l=a?t.getCalculationInfo("stackResultDimension"):n,u=fC(t,l,e),c=t.indicesOfNearest(l,u)[0];s[i]=t.get(r,c),s[o]=t.get(l,c);var f=t.get(n,c),h=Ao(t.get(n,c));return h=Math.min(h,20),h>=0&&(s[o]=+s[o].toFixed(h)),[s,f]}var g2={min:we(Tv,"min"),max:we(Tv,"max"),average:we(Tv,"average"),median:we(Tv,"median")};function u1(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!Yct(t)&&!pt(t.coord)&&n){var i=n.dimensions,o=Lz(t,r,n,e);if(t=Wt(t),t.type&&g2[t.type]&&o.baseAxis&&o.valueAxis){var s=he(i,o.baseAxis.dim),a=he(i,o.valueAxis.dim),l=g2[t.type](r,o.baseDataDim,o.valueDataDim,s,a);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)g2[u[c]]&&(u[c]=fC(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function Lz(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(qct(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function qct(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function c1(e,t){return e&&e.containData&&t.coord&&!K3(t)?e.containData(t.coord):!0}function Zct(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!K3(t)&&!K3(r)?e.containZone(t.coord,r.coord):!0}function Kct(e,t){return e?function(r,n,i,o){var s=o<2?r.coord&&r.coord[o]:r.value;return Ca(s,t[o])}:function(r,n,i,o){return Ca(r.value,t[o])}}function fC(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,s){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var m2=Re(),Jct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Yt()},t.prototype.render=function(r,n,i){var o=this,s=this.markerGroupMap;s.each(function(a){m2(a).keep=!1}),n.eachSeries(function(a){var l=pf.getMarkerModelFromSeries(a,o.type);l&&o.renderSeries(a,l,n,i)}),s.each(function(a){!m2(a).keep&&o.group.remove(a.group)})},t.prototype.markKeep=function(r){m2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;$(r,function(o){var s=pf.getMarkerModelFromSeries(o,i.type);if(s){var a=s.getData();a.eachItemGraphicEl(function(l){l&&(n?uN(l):vP(l))})}})},t.type="marker",t}(ui);const Oz=Jct;var Qct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(pf);const tft=Qct;var kv=Re(),eft=function(e,t,r,n){var i=e.getData(),o;if(pt(n))o=n;else{var s=n.type;if(s==="min"||s==="max"||s==="average"||s==="median"||n.xAxis!=null||n.yAxis!=null){var a=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)a=t.getAxis(n.yAxis!=null?"y":"x"),l=Ii(n.yAxis,n.xAxis);else{var u=Lz(n,i,t,e);a=u.valueAxis;var c=b$(i,u.valueDataDim);l=fC(i,c,s)}var f=a.dim==="x"?0:1,h=1-f,d=Wt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&Te(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:s,valueIndex:n.valueIndex,value:l}]}else o=[]}var m=[u1(e,o[0]),u1(e,o[1]),ut({},o[2])];return m[2].type=m[2].type||null,ue(m[2],m[0]),ue(m[2],m[1]),m};function f1(e){return!isNaN(e)&&!isFinite(e)}function hx(e,t,r,n){var i=1-e,o=n.dimensions[e];return f1(t[i])&&f1(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function rft(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(hx(1,r,n,e)||hx(0,r,n,e)))return!0}return c1(e,t[0])&&c1(e,t[1])}function _2(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ke(s.get("x"),i.getWidth()),u=Ke(s.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);a=o.dataToPoint([f,h])}if(Of(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;f1(e.get(c[0],t))?a[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):f1(e.get(c[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}e.setItemLayout(t,a)}var nft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=pf.getMarkerModelFromSeries(o,"markLine");if(s){var a=s.getData(),l=kv(s).from,u=kv(s).to;l.each(function(c){_2(l,c,!0,o,i),_2(u,c,!1,o,i)}),a.each(function(c){a.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,new eut);this.group.add(c.group);var f=ift(s,r,n),h=f.from,d=f.to,p=f.line;kv(n).from=h,kv(n).to=d,n.setData(p);var v=n.get("symbol"),m=n.get("symbolSize"),g=n.get("symbolRotate"),y=n.get("symbolOffset");pt(v)||(v=[v,v]),pt(m)||(m=[m,m]),pt(g)||(g=[g,g]),pt(y)||(y=[y,y]),f.from.each(function(w){b(h,w,!0),b(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){le(w).dataModel=n,w.traverse(function(T){le(T).dataModel=n})});function b(w,T,S){var k=w.getItemModel(T);_2(w,T,S,r,o);var x=k.getModel("itemStyle").getItemStyle();x.fill==null&&(x.fill=E_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:Qt(k.get("symbolOffset",!0),y[S?0:1]),symbolRotate:Qt(k.get("symbolRotate",!0),g[S?0:1]),symbolSize:Qt(k.get("symbolSize"),m[S?0:1]),symbol:Qt(k.get("symbol",!0),v[S?0:1]),style:x})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(Oz);function ift(e,t,r){var n;e?n=It(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ut(ut({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Ql(n,r),o=new Ql(n,r),s=new Ql([],r),a=It(r.get("data"),we(eft,t,e,r));e&&(a=Mr(a,we(rft,e)));var l=Kct(!!e,n);return i.initData(It(a,function(u){return u[0]}),null,l),o.initData(It(a,function(u){return u[1]}),null,l),s.initData(It(a,function(u){return u[2]})),s.hasItemOption=!0,{from:i,to:o,line:s}}const oft=nft;function Df(e){e.registerComponentModel(tft),e.registerComponentView(oft),e.registerPreprocessor(function(t){xz(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var sft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(pf);const aft=sft;var Pv=Re(),lft=function(e,t,r,n){var i=u1(e,n[0]),o=u1(e,n[1]),s=i.coord,a=o.coord;s[0]=Ii(s[0],-1/0),s[1]=Ii(s[1],-1/0),a[0]=Ii(a[0],1/0),a[1]=Ii(a[1],1/0);var l=cK([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function h1(e){return!isNaN(e)&&!isFinite(e)}function dx(e,t,r,n){var i=1-e;return h1(t[i])&&h1(r[i])}function uft(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return Of(e,"cartesian2d")?r&&n&&(dx(1,r,n)||dx(0,r,n))?!0:Zct(e,i,o):c1(e,i)||c1(e,o)}function px(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ke(s.get(r[0]),i.getWidth()),u=Ke(s.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),a=o.dataToPoint(h,!0)}if(Of(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);h1(c)?a[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):h1(f)&&(a[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}return a}var vx=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],cft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=pf.getMarkerModelFromSeries(o,"markArea");if(s){var a=s.getData();a.each(function(l){var u=It(vx,function(f){return px(a,l,f,o,i)});a.setItemLayout(l,u);var c=a.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,{group:new Ne});this.group.add(c.group),this.markKeep(c);var f=fft(s,r,n);n.setData(f),f.each(function(h){var d=It(vx,function(x){return px(f,h,x,r,o)}),p=s.getAxis("x").scale,v=s.getAxis("y").scale,m=p.getExtent(),g=v.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],b=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Hm(y),Hm(b);var w=!(m[0]>y[1]||m[1]<y[0]||g[0]>b[1]||g[1]<b[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),k=E_(l,"color");S.fill||(S.fill=k,Mt(S.fill)&&(S.fill=JS(S.fill,.4))),S.stroke||(S.stroke=k),f.setItemVisual(h,"style",S)}),f.diff(Pv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new gp({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=Pv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?br(p,{shape:{points:v.points}},n,h):p=new gp({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=Pv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),xf(h,Cu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Mt(v.fill)?JS(v.fill,1):"#000"}),vp(h,p),hu(h,null,null,p.get(["emphasis","disabled"])),le(h).dataModel=n}),Pv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(Oz);function fft(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var s=It(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ut(ut({},f),{name:u,ordinalMeta:null})});i=It(o,function(u,c){return{name:u,type:s[c%2].type}}),n=new Ql(i,r)}else i=[{name:"value",type:"float"}],n=new Ql(i,r);var a=It(r.get("data"),we(lft,t,e,r));e&&(a=Mr(a,we(uft,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return Ca(d,i[h])}:function(u,c,f,h){return Ca(u.value,i[h])};return n.initData(a,null,l),n.hasItemOption=!0,n}const hft=cft;function Ou(e){e.registerComponentModel(aft),e.registerComponentView(hft),e.registerPreprocessor(function(t){xz(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var dft=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},pft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),pt(n)&&$(n,function(o,s){Mt(o)&&(o={type:o}),n[s]=ue(o,dft(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(a){var l=a.name;i.push(l);var u;if(a.legendVisualProvider){var c=a.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(a)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&lP(a)&&n.push(a.name)}),this._availableNames=i;var o=this.get("data")||n,s=It(o,function(a){return(Mt(a)||Te(a))&&(a={name:a}),new Ir(a,this,this.ecModel)},this);this._data=s},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;$(o,function(s){n[s.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&he(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const J3=pft;var lc=we,Q3=$,Cv=Ne,vft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Cv),this.group.add(this._selectorGroup=new Cv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var s=r.get("align"),a=r.get("orient");(!s||s==="auto")&&(s=r.get("left")==="right"&&a==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=a==="horizontal"?"end":"start"),this.renderInner(s,r,n,i,l,a,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ra(c,f,h),p=this.layoutInner(r,s,d,o,l,u),v=Ra(ie({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=wct(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this.getContentGroup(),c=Yt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),Q3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new Cv;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var y=g.getData(),b=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(g,v,p,d,n,r,b,T,w,f,o);S.on("click",lc(gx,v,null,o,h)).on("mouseover",lc(tT,g.name,null,o,h)).on("mouseout",lc(eT,g.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(k){if(!c.get(v)&&k.legendVisualProvider){var x=k.legendVisualProvider;if(!x.containName(v))return;var A=x.indexOfName(v),I=x.getItemVisual(A,"style"),L=x.getItemVisual(A,"legendIcon"),N=ni(I.fill);N&&N[3]===0&&(N[3]=.2,I=ut(ut({},I),{fill:vs(N,"rgba")}));var z=this._createItem(k,v,p,d,n,r,{},I,L,f,o);z.on("click",lc(gx,null,v,o,h)).on("mouseover",lc(tT,null,v,o,h)).on("mouseout",lc(eT,null,v,o,h)),c.set(v,!0)}},this)},this),s&&this._createSelector(s,n,o,a,l)},t.prototype._createSelector=function(r,n,i,o,s){var a=this.getSelectorGroup();Q3(r,function(u){var c=u.type,f=new nr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});a.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);xf(f,{normal:h,emphasis:d},{defaultText:u.title}),v3(f)})},t.prototype._createItem=function(r,n,i,o,s,a,l,u,c,f,h){var d=r.visualDrawType,p=s.get("itemWidth"),v=s.get("itemHeight"),m=s.isSelected(n),g=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),b=o.get("icon");c=b||c||"roundRect";var w=gft(c,o,l,u,d,m,h),T=new Cv,S=o.getModel("textStyle");if(Ht(r.getLegendIcon)&&(!b||b==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var k=b==="inherit"&&r.getData().getVisual("symbol")?g==="inherit"?r.getData().getVisual("symbolRotate"):g:0;T.add(mft({itemWidth:p,itemHeight:v,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var x=a==="left"?p+5:-5,A=a,I=s.get("formatter"),L=n;Mt(I)&&I?L=I.replace("{name}",n!=null?n:""):Ht(I)&&(L=I(n));var N=o.get("inactiveColor");T.add(new nr({style:yn(S,{text:L,x,y:v/2,fill:m?S.getTextColor():N,align:A,verticalAlign:"middle"})}));var z=new rr({shape:T.getBoundingRect(),invisible:!0}),V=o.getModel("tooltip");return V.get("show")&&kP({el:z,componentModel:s,itemName:n,itemTooltipOption:V.option}),T.add(z),T.eachChild(function(F){F.silent=!0}),z.silent=!f,this.getContentGroup().add(T),v3(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getContentGroup(),u=this.getSelectorGroup();Jc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),s){Jc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",y=v===0?"y":"x";a==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[m]=c[m]+p+h[m],b[g]=Math.max(c[g],h[g]),b[y]=Math.min(0,h[y]+d[1-v]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ui);function gft(e,t,r,n,i,o,s){function a(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),Q3(m,function(y,b){m[b]==="inherit"&&(m[b]=g[b])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:n1(f,s),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),a(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(a(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function mft(e){var t=e.icon||"roundRect",r=Wi(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function gx(e,t,r,n){eT(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),tT(e,t,r,n)}function Rz(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function tT(e,t,r,n){Rz(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function eT(e,t,r,n){Rz(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const Dz=vft;function _ft(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function Lh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(s){i&&o!=null?s[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?s[e]():(s[e](t.name),o=s.isSelected(t.name));var a=s.getData();$(a,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=s.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function yft(e){e.registerAction("legendToggleSelect","legendselectchanged",we(Lh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",we(Lh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",we(Lh,"inverseSelect")),e.registerAction("legendSelect","legendselected",we(Lh,"select")),e.registerAction("legendUnSelect","legendunselected",we(Lh,"unSelect"))}function Nz(e){e.registerComponentModel(J3),e.registerComponentView(Dz),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,_ft),e.registerSubTypeDefaulter("legend",function(){return"plain"}),yft(e)}var bft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=S_(r);e.prototype.init.call(this,r,n,i),mx(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),mx(this,this.option,r)},t.type="legend.scroll",t.defaultOption=g_(J3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(J3);function mx(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,ff(t,r,{type:"box",ignoreSize:!!i})}const wft=bft;var _x=Ne,y2=["width","height"],b2=["x","y"],Sft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new _x),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new _x)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,s,a,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=pt(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new nr({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",y=TP(n.get("pageIcons",!0)[n.getOrient().name][m],{onclick:jt(u._pageGo,u,g,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getSelectorGroup(),u=r.getOrient().index,c=y2[u],f=b2[u],h=y2[1-u],d=b2[1-u];s&&Jc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=Wt(i);s&&(g[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(r,o,g,u,c,h,d,f);if(s){if(a==="end")m[u]+=y[c]+p;else{var b=v[c]+p;m[u]-=b,y[f]-=b}y[c]+=v[c]+p,m[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,s,a,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Jc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Jc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[s]>i[s],m=[-d.x,-d.y];n||(m[o]=c[u]);var g=[0,0],y=[-p.x,-p.y],b=Qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?y[o]+=i[s]-p[s]:g[o]+=p[s]+b}y[1-o]+=d[a]/2-p[a]/2,c.setPosition(m),f.setPosition(g),h.setPosition(y);var T={x:0,y:0};if(T[s]=v?i[s]:d[s],T[a]=Math.max(d[a],p[a]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[s],v){var S={x:0,y:0};S[s]=Math.max(i[s]-p[s]-b,0),S[a]=T[a],f.setClipPath(new rr({shape:S})),f.__rectSize=S[s]}else h.eachChild(function(x){x.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(r);return k.pageIndex!=null&&br(c,{x:k.contentPosition[0],y:k.contentPosition[1]},v?r:null),this._updatePageInfoView(r,k),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;$(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),s=r.get("pageFormatter"),a=n.pageIndex,l=a!=null?a+1:0,u=n.pageCount;o&&s&&o.setStyle("text",Mt(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,s=r.getOrient().index,a=y2[s],l=b2[s],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[s]=-v.s;for(var m=u+1,g=v,y=v,b=null;m<=h;++m)b=w(c[m]),(!b&&y.e>g.s+o||b&&!T(b,g.s))&&(y.i>g.i?g=y:g=b,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=b;for(var m=u-1,g=v,y=v,b=null;m>=-1;--m)b=w(c[m]),(!b||!T(y,b.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=b;return p;function w(S){if(S){var k=S.getBoundingRect(),x=k[l]+S[l];return{s:x,e:x+k[a],i:S.__legendDataIndex}}}function T(S,k){return S.e>=k&&S.s<=k+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(s,a){var l=s.__legendDataIndex;o==null&&l!=null&&(o=a),l===r&&(n=a)}),n!=null?n:o},t.type="legend.scroll",t}(Dz);const Tft=Sft;function kft(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Pft(e){wr(Nz),e.registerComponentModel(wft),e.registerComponentView(Tft),kft(e)}function ja(e){wr(Nz),wr(Pft)}var Cft={get:function(e,t,r){var n=Wt((Eft[e]||{})[t]);return r&&pt(n)?n[n.length-1]:n}},Eft={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const Fz=Cft;var yx=bn.mapVisual,Aft=bn.eachVisual,Mft=pt,bx=$,xft=Hm,Ift=bs,Lft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&jct(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=jt(r,this),this.controllerVisuals=fx(this.option.controller,n,r),this.targetVisuals=fx(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=er(r),n},t.prototype.eachTargetSeries=function(r,n){$(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,s=o.precision,a=this.dataBound,l=o.formatter,u;i=i||["<",">"],pt(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Mt(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ht(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===a[0]?i[0]+" "+c[1]:r[1]===a[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===a[0]?"min":h===a[1]?"max":(+h).toFixed(Math.min(s,20))}},t.prototype.resetExtent=function(){var r=this.option,n=xft([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var s=i[o],a=r.getDimensionInfo(s);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),s=n.controller||(n.controller={});ue(o,i),ue(s,i);var a=this.isCategory();l.call(this,o),l.call(this,s),u.call(this,o,"inRange","outOfRange"),c.call(this,s);function l(f){Mft(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},bx(p,function(m,g){if(!!bn.isValidType(g)){var y=Fz.get(g,"inactive",a);y!=null&&(v[g]=y,g==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),m=v||"roundRect";bx(this.stateList,function(g){var y=this.itemSize,b=f[g];b||(b=f[g]={color:a?p:[p]}),b.symbol==null&&(b.symbol=h&&Wt(h)||(a?m:[m])),b.symbolSize==null&&(b.symbolSize=d&&Wt(d)||(a?y[0]:[y[0],y[0]])),b.symbol=yx(b.symbol,function(S){return S==="none"?m:S});var w=b.symbolSize;if(w!=null){var T=-1/0;Aft(w,function(S){S>T&&(T=S)}),b.symbolSize=yx(w,function(S){return Ift(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const d1=Lft;var Sx=[20,140],Oft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=Sx[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=Sx[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):pt(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),$(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Hm((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(a,l){r[0]<=a&&a<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=Tx(this,"outOfRange",this.getExtent()),i=Tx(this,"inRange",this.option.range.slice()),o=[];function s(d,p){o.push({value:d,color:r(d,p)})}for(var a=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[a]&&s(n[l],"outOfRange");for(var f=1;a<u;a++,f=0)f&&o.length&&s(i[a],"outOfRange"),s(i[a],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&s(o[o.length-1].value,"outOfRange"),f=0),s(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=g_(d1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(d1);function Tx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],s=[],a=0;a<=n&&o<r[1];a++)s.push(o),o+=i;return s.push(r[1]),s}const Rft=Oft;var Dft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=Jp(n.get("padding")||0),o=r.getBoundingRect();r.add(new rr({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,s=this.visualMapModel,a={};if(n==="color"){var l=s.get("contentColor");a.color=l}function u(d){return a[d]}function c(d,p){a[d]=p}var f=s.controllerVisuals[o||s.getValueState(r)],h=bn.prepareVisualTypes(f);return $(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),bn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),a[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;Jet(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ui);const $z=Dft;var kx=[["left","right","width"],["top","bottom","height"]];function zz(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},s=n.orient==="horizontal"?1:0,a=kx[s],l=[0,null,10],u={},c=0;c<3;c++)u[kx[1-s][c]]=l[c],u[a[c]]=c===2?r[0]:n[a[c]];var f=[["x","width",3],["y","height",0]][s],h=Ra(u,o,n.padding);return a[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function cm(e,t){return $(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var bo=bs,Nft=$,Px=Math.min,w2=Math.max,Fft=12,$ft=6,zft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var s=this.visualMapModel,a=s.get("textGap"),l=s.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-a:l[1]+a],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new nr({style:yn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,s=this._orient,a=this._useHandle,l=zz(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new Ne;u.add(c),c.add(i.outOfRange=Cx()),c.add(i.inRange=Cx(null,a?Ax(this._orient):null,jt(this._dragHandle,this,"all",!1),jt(this._dragHandle,this,"all",!0))),c.setClipPath(new rr({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=w2(f.width,f.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,s),this._createHandle(n,u,1,o,h,s)),this._createIndicator(n,u,o,h,s),r.add(u)},t.prototype._createHandle=function(r,n,i,o,s,a){var l=jt(this._dragHandle,this,i,!1),u=jt(this._dragHandle,this,i,!0),c=ys(r.get("handleSize"),o[0]),f=Wi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=Ax(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(g){uu(g.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),mP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new nr({cursor:h,draggable:!0,drift:l,onmousemove:function(g){uu(g.event)},ondragend:u,style:yn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],m=this._shapes;m.handleThumbs[i]=f,m.handleLabelPoints[i]=v,m.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,s){var a=ys(r.get("indicatorSize"),i[0]),l=Wi(r.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Ms){var c=l.style;l.useStyle(ut({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new nr({silent:!0,invisible:!0,style:yn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(s==="horizontal"?o/2:$ft)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var s=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,s[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():Ex(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[bo(n[0],i,o,!0),bo(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,s=[0,i.itemSize[1]];rut(n,o,s,r,0);var a=i.getExtent();this._dataInterval=[bo(o[0],s,a,!0),bo(o[1],s,a,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,s=[0,n.itemSize[1]],a=r?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,a,"inRange"),u=this._createBarVisual(i,i,s,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(a,l)},t.prototype._createBarVisual=function(r,n,i,o){var s={forceState:o,convertOpacityToAlpha:!0},a=this._makeColorGradient(r,s),l=[this.getControllerVisual(r[0],"symbolSize",s),this.getControllerVisual(r[1],"symbolSize",s)],u=this._createBarPoints(i,l);return{barColor:new bP(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],s=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var a=1;a<i;a++){var l=r[0]+s*a;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:a/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new Ne(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,s=i.handleThumbs,a=i.handleLabels,l=o.itemSize,u=o.getExtent();Nft([0,1],function(c){var f=s[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=bo(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=qc(i.handleLabelPoints[c],im(f,this.group));a[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var s=this.visualMapModel,a=s.getExtent(),l=s.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=bo(r,a,u,!0),m=l[0]-p/2,g={x:f.x,y:f.y};f.y=v,f.x=m;var y=qc(c.indicatorLabelPoint,im(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";b.setStyle({text:(i||"")+s.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var k={x:m,y:v,style:{fill:d}},x={style:{x:y[0],y:y[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=g.x,f.y=g.y,f.animateTo(k,A),b.animateTo(x,A)}else f.attr(k),b.attr(x);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var L=0;L<I.length;L++)this._api.enterBlur(I[L])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=Px(w2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var s=[0,o[1]],a=i.getExtent();r=Px(w2(s[0],r),s[1]);var l=Bft(i,a,s),u=[r-l,r+l],c=bo(r,s,a,!0),f=[bo(u[0],s,a,!0),bo(u[1],s,a,!0)];u[0]<s[0]&&(f[0]=-1/0),u[1]>s[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||Ex(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=sQ(h,d);this._dispatchHighDown("downplay",cm(p[0],i)),this._dispatchHighDown("highlight",cm(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(Fc(r.target,function(l){var u=le(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var s=i.getData(n.dataType),a=s.getStore().get(o.getDataDimensionIndex(s),n.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",cm(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var s=im(n,o?null:this.group);return pt(r)?qc(r,s,i):FN(r,s,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}($z);function Cx(e,t,r,n){return new gp({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){uu(i.event)},ondragend:n})}function Bft(e,t,r){var n=Fft/2,i=e.get("hoverLinkDataSize");return i&&(n=bo(i,t,r,!0)/2),n}function Ex(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function Ax(e){return e==="vertical"?"ns-resize":"ew-resize"}const Vft=zft;var Uft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Wft=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},jft=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(Gct(n.stateList,n.targetVisuals,jt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(jt(Gft,null,e,i))||{stops:[],outerColors:[]},s=i.getDataDimensionIndex(r);s>=0&&(o.dimension=s,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function Gft(e,t,r,n){for(var i=t.targetVisuals[n],o=bn.prepareVisualTypes(i),s={color:E_(e.getData(),"color")},a=0,l=o.length;a<l;a++){var u=o[a],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return s.color;function f(d){return s[d]}function h(d,p){s[d]=p}}var Mx=$;function Hft(e){var t=e&&e.visualMap;pt(t)||(t=t?[t]:[]),Mx(t,function(r){if(!!r){uc(r,"splitList")&&!uc(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&pt(n)&&Mx(n,function(i){Dt(i)&&(uc(i,"start")&&!uc(i,"min")&&(i.min=i.start),uc(i,"end")&&!uc(i,"max")&&(i.max=i.end))})}})}function uc(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var xx=!1;function Bz(e){xx||(xx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(Uft,Wft),$(jft,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(Hft))}function Xft(e){e.registerComponentModel(Rft),e.registerComponentView(Vft),Bz(e)}var Yft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],qft[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(s,a){i==="categories"?(s.mappingMethod="category",s.categories=Wt(o)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=It(this._pieceList,function(l){return l=Wt(l),a!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=bn.listVisualTypes(),o=this.isCategory();$(r.pieces,function(a){$(i,function(l){a.hasOwnProperty(l)&&(n[l]=1)})}),$(n,function(a,l){var u=!1;$(this.stateList,function(c){u=u||s(r,c,l)||s(r.target,c,l)},this),!u&&$(this.stateList,function(c){(r[c]||(r[c]={}))[l]=Fz.get(l,c==="inRange"?"active":"inactive",o)})},this);function s(a,l,u){return a&&a[l]&&a[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,s=(n?i:r).selected||{};if(i.selected=s,$(o,function(l,u){var c=this.getSelectedMapKey(l);s.hasOwnProperty(c)||(s[c]=!0)},this),i.selectedMode==="single"){var a=!1;$(o,function(l,u){var c=this.getSelectedMapKey(l);s[c]&&(a?s[c]=!1:a=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=Wt(r)},t.prototype.getValueState=function(r){var n=bn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var s=[],a=o.getData();a.each(this.getDataDimensionIndex(a),function(l,u){var c=bn.findPieceIndex(l,i);c===r&&s.push(u)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function s(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var a=this._pieceList.slice();if(!a.length)a.push({interval:[-1/0,1/0]});else{var l=a[0].interval[0];l!==-1/0&&a.unshift({interval:[-1/0,l]}),l=a[a.length-1].interval[1],l!==1/0&&a.push({interval:[l,1/0]})}var u=-1/0;return $(a,function(c){var f=c.interval;f&&(f[0]>u&&s([u,f[0]],"outOfRange"),s(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=g_(d1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(d1),qft={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var s=0,a=n[0];s<i;a+=o,s++){var l=s===i-1?n[1]:a+o;e.push({interval:[a,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),O4(e),$(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;$(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),Ix(t,e)},pieces:function(e){var t=this.option;$(t.pieces,function(r,n){Dt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var s=i.interval=[],a=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&s[f]==null;d++)s[f]=r[h[d]],a[f]=l[d],c[f]=d===2;s[f]==null&&(s[f]=u[f])}c[0]&&s[1]===1/0&&(a[0]=0),c[1]&&s[0]===-1/0&&(a[1]=0),s[0]===s[1]&&a[0]&&a[1]&&(i.value=s[0])}i.visual=bn.retrieveVisuals(r),e.push(i)},this),Ix(t,e),O4(e),$(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function Ix(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const Zft=Yft;var Kft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,s=o.getFont(),a=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=Ii(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),$(c.viewPieceList,function(d){var p=d.piece,v=new Ne;v.onclick=jt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]]),h){var g=this.visualMapModel.getValueState(m);v.add(new nr({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:s,fill:a,opacity:g==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Jc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(s){var a=i.visualMapModel;a.option.hoverLink&&i.api.dispatchAction({type:s,batch:cm(a.findTargetDataIndices(n),a)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return zz(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,s){if(!!n){var a=new Ne,l=this.visualMapModel.textStyleModel;a.add(new nr({style:yn(l,{x:o?s==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?s:"center",text:n})})),r.add(a)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=It(r.getPieceList(),function(a,l){return{piece:a,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),s=r.get("inverse");return(o==="horizontal"?s:!s)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Wi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var s=Wt(i.selected),a=n.getSelectedMapKey(r);o==="single"||o===!0?(s[a]=!0,$(s,function(l,u){s[u]=u===a})):s[a]=!s[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}($z);const Jft=Kft;function Qft(e){e.registerComponentModel(Zft),e.registerComponentView(Jft),Bz(e)}function tht(e){wr(Xft),wr(Qft)}var Lx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},eht=function(){function e(t){var r=this._condVal=Mt(t)?new RegExp(t):pK(t)?t:null;if(r==null){var n="";se(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Mt(r)?this._condVal.test(t):Te(r)?this._condVal.test(t+""):!1},e}(),rht=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),nht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),iht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),oht=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),sht=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function hC(e,t){if(e===!0||e===!1){var r=new rht;return r.value=e,r}var n="";return Vz(e)||se(n),e.and?Ox("and",e,t):e.or?Ox("or",e,t):e.not?aht(e,t):lht(e,t)}function Ox(e,t,r){var n=t[e],i="";pt(n)||se(i),n.length||se(i);var o=e==="and"?new nht:new iht;return o.children=It(n,function(s){return hC(s,r)}),o.children.length||se(i),o}function aht(e,t){var r=e.not,n="";Vz(r)||se(n);var i=new oht;return i.child=hC(r,t),i.child||se(n),i}function lht(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ge(e),s=e.parser,a=s?bF(s):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=_t(Lx,u)?Lx[u]:u,f=e[u],h=a?a(f):f,d=Grt(c,h)||c==="reg"&&new eht(h);d||se(r),i.push(d)}}i.length||se(r);var p=new sht;return p.valueGetterParam=n,p.valueParser=a,p.getValue=t.getValue,p.subCondList=i,p}function Vz(e){return Dt(e)&&!Zr(e)}var uht=function(){function e(t,r){this._cond=hC(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function cht(e,t){return new uht(e,t)}var fht={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=cht(e.config,{valueGetterAttrMap:Yt({dimension:!0}),prepareGetValue:function(a){var l="",u=a.dimension;_t(a,"dimension")||se(l);var c=t.getDimensionInfo(u);return c||se(l),{dimIdx:c.index}},getValue:function(a){return t.retrieveValueFromItem(r,a.dimIdx)}}),i=[],o=0,s=t.count();o<s;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},hht={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=er(r);i.length||se(n);var o=[];$(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&se(n),h!=="asc"&&h!=="desc"&&se(n),p&&p!=="min"&&p!=="max"){var v="";se(v)}if(h!=="asc"&&h!=="desc"){var m="";se(m)}var g=t.getDimensionInfo(f);g||se(n);var y=d?bF(d):null;d&&!y&&se(n),o.push({dimIdx:g.index,parser:y,comparator:new SF(h,p)})});var s=t.sourceFormat;s!==ln&&s!==qi&&se(n);for(var a=[],l=0,u=t.count();l<u;l++)a.push(t.getRawDataItem(l));return a.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var m=d.comparator.evaluate(p,v);if(m!==0)return m}return 0}),{data:a}}};function Nf(e){e.registerTransform(fht),e.registerTransform(hht)}var dht=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new CF(this),ZM(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),ZM(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Io},t}(Me),pht=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ui);function Ff(e){e.registerComponentModel(dht),e.registerComponentView(pht)}var S2=null;function vht(e){return S2||(S2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),S2(e)}var T2=null;function ght(e){T2||(T2=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),T2(e)}function mht(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Ev(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function Uz(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function rT(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(Uz(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var _ht='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',nT=0,fm=null;function yht(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Sht.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||p1(e)}),s=rT(e),a=s.detached,l=s.rendered;e.__resize_observer_triggered__=a===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){p1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(nT||(fm=mht(_ht)),Tht(e),e.__resize_rendered__=rT(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),nT++}function bht(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",dC),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--nT&&fm&&fm.parentNode.removeChild(fm)}}function wht(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Sht(){var e=rT(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(pC(this),this.addEventListener("scroll",dC,!0)),this.__resize_rendered__=t,p1(this))}function dC(){var e=this;pC(this),this.__resize_raf__&&ght(this.__resize_raf__),this.__resize_raf__=vht(function(){var t=wht(e);t&&(e.__resize_last__=t,p1(e))})}function p1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Tht(e){var t=Uz(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Ev("div",{className:"resize-triggers"}),n=Ev("div",{className:"resize-expand-trigger"}),i=Ev("div"),o=Ev("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},pC(e),e.addEventListener("scroll",dC,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function pC(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,s=i.scrollHeight,a=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=s,n.style.width=a+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var os=function(){return os=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},os.apply(this,arguments)},kht=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Pht(e){return t=Object.create(null),kht.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Cht={autoresize:Boolean},Eht={loading:Boolean,loadingOptions:Object},Aht=/^on[^a-z]/,Mht=function(e){return Aht.test(e)},Rx=[],Oh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=Rx.indexOf(o);s===-1&&(s=Rx.push(o)-1,Oh[s]={}),r=Oh[s]&&Oh[s][n]?Oh[s][n]:Oh[s][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var Wz="ecTheme",Ga=Rk({name:"echarts",props:os(os({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Cht),Eht),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Bg(),i=Bg(),o=Bg(),s=Ln("ecTheme",null),a=Ln("ecInitOptions",null),l=Ln("ecUpdateOptions",null),u=wS(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ze(function(){return o.value||e.option||null}),v=Ze(function(){return e.theme||Ar(s)||{}}),m=Ze(function(){return e.initOptions||Ar(a)||{}}),g=Ze(function(){return e.updateOptions||Ar(l)||{}}),y=Ze(function(){return function(x){var A={};for(var I in x)Mht(I)||(A[I]=x[I]);return A}(r)}),b=zk().proxy.$listeners;function w(x){if(n.value){var A=i.value=Uit(n.value,v.value,m.value);e.group&&(A.group=e.group);var I=b;I||(I={},Object.keys(r).filter(function(N){return N.indexOf("on")===0&&N.length>2}).forEach(function(N){var z=N.charAt(2).toLowerCase()+N.slice(3);z.substring(z.length-4)==="Once"&&(z="~".concat(z.substring(0,z.length-4))),I[z]=r[N]})),Object.keys(I).forEach(function(N){var z=I[N];if(z){var V=N.toLowerCase();V.charAt(0)==="~"&&(V=V.substring(1),z.__once__=!0);var F=A;if(V.indexOf("zr:")===0&&(F=A.getZr(),V=V.substring(3)),z.__once__){delete z.__once__;var G=z;z=function(){for(var K=[],q=0;q<arguments.length;q++)K[q]=arguments[q];G.apply(void 0,K),F.off(V,z)}}F.on(V,z)}}),c.value?su(function(){A&&!A.isDisposed()&&A.resize(),L()}):L()}function L(){var N=x||p.value;N&&A.setOption(N,g.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;Co(f,function(x){typeof S=="function"&&(S(),S=null),x||(S=Co(function(){return e.option},function(A,I){A&&(i.value?i.value.setOption(A,os({notMerge:A.value!==(I==null?void 0:I.value)},g.value)):w())},{deep:!0}))},{immediate:!0}),Co([v,m],function(){T(),w()},{deep:!0}),fA(function(){e.group&&i.value&&(i.value.group=e.group)});var k=Pht(i);return function(x,A,I){var L=Ln("ecLoadingOptions",{}),N=Ze(function(){return os(os({},Ar(L)),I==null?void 0:I.value)});fA(function(){var z=x.value;z&&(A.value?z.showLoading(N.value):z.hideLoading())})}(i,h,d),function(x,A,I){var L=null;Co([I,x,A],function(N,z,V){var F=N[0],G=N[1],K=N[2];F&&G&&K&&(L=C_(function(){G.resize()},100),yht(F,L)),V(function(){L&&F&&bht(F,L)})})}(i,c,n),h9(function(){w()}),q1(T),os({chart:i,root:n,setOption:function(x,A){e.manualUpdate&&(o.value=x),i.value?i.value.setOption(x,A||{}):w(x)},nonEventAttrs:y},k)},render:function(){var e=os({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Bk("x-vue-echarts",e)}});wr([Va,xu,Iu,Wa,Ua,ja,Lu,tht,Ou]);const xht={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},components:{VChart:Ga},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionResources2.hasOwnProperty(this.rgk)||(this.userStore.regionResources2[this.rgk]=[0]),this.userStore.regionResources2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianResource(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianResource",t,e),this.workload*(2-e/100)},tierResources(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let s=i;s<=o;s++){const a=Math.max(2-this.wspd*s/r,0),l=r*(2-a),u=this.userStore.chanceAtResource(this.rgk,a*100),c=u-t;e.push({wld:l,mod:a,tier:s,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtResource(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierResources){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOptionRotated(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>resource \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"resource",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray",tooltip:{show:!1}}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"x"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${st(n,1)}% chance to get<br/>${st(t,1)} or more resource %, or<br/>${st(r,1)} or less workload, or<br/>${st(i*10,1)} min \u2192 ${Math.ceil(i)*10} min cycle`},backgroundColor:"var(--color-background)",borderColor:"var(--color-border)",borderWidth:1,textStyle:{color:"var(--color-text)",fontSize:11}},confine:!0,legend:{show:!1}}}},methods:{formatFixed:st,updStore(e){this.userStore.regionResources2[this.rgk]=e.split(",")},spaceSep(e,t){return st(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},Ru=e=>(Ue("data-v-b9414618"),e=e(),We(),e),Iht=R(" Observations: "),Lht=Ru(()=>_("abbr",{class:"tooltip",title:"Enter comma-separated resource values (0..100 range) observed evenly across all worker-active time.\nThe order does not matter, but repeat occurence of same value does.\nYou can sneak in newlines and comments like `evening,0,0.1,2, morning,3,22,0` - text will be stored, but ignored in calculations."},"\u2139",-1)),Oht=Ru(()=>_("br",null,null,-1)),Rht=["value"],Dht=Ru(()=>_("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),Nht={class:"fsxs tar"},Fht=Ru(()=>_("th",null,"work time",-1)),$ht=Ru(()=>_("th",null,"workload \u2264",-1)),zht=Ru(()=>_("th",null,"resource \u2265",-1)),Bht=Ru(()=>_("th",null,"chance",-1));function Vht(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[Iht,Lht,Oht,_("textarea",{value:this.userStore.regionResources2[this.rgk],onInput:t[0]||(t[0]=a=>o.updStore(a.target.value)),class:"multiline"},`
  `,40,Rht),_("div",null,[ht(s,{class:"chart hmid",option:o.chartOption},null,8,["option"])]),Dht,_("table",Nht,[_("tr",null,[Fht,(E(!0),M(W,null,gt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(10*a.tier)+" min",1))),256))]),_("tr",null,[$ht,(E(!0),M(W,null,gt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(a.wld,2)),1))),256))]),_("tr",null,[zht,(E(!0),M(W,null,gt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(100*a.mod,2)),1))),256))]),_("tr",null,[Bht,(E(!0),M(W,null,gt(o.tierResources.filter(a=>a.time),a=>(E(),M("td",null,C(o.formatFixed(a.time,2))+"%",1))),256))])])],64)}const vC=Gt(xht,[["render",Vht],["__scopeId","data-v-b9414618"]]);const Uht={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},components:{FloatingResourceEdit:vC,WorkerJobDescription:e_},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{formatFixed:st,randBetween:va,levelup:Id,spaceSep(e,t){return st(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e).priceDaily}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const s=["mspd","luck"],a=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))s.some(d=>f.hasOwnProperty(d))&&a.add(c);console.log("mlSkills",a);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of a){if(n[r-c].skills.some(m=>m==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,m)=>m.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),a.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,s=i.wspd_lo*r,a=i.wspd_hi*r,l=s+(a-s)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,Id(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),Id(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=va(t.wspd_lo,t.wspd_hi),n+=va(t.mspd_lo,t.mspd_hi),i+=va(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},Sr=e=>(Ue("data-v-cd4bb531"),e=e(),We(),e),Wht={key:0,id:"columns"},jht={id:"worker"},Ght={class:"borderless"},Hht=Sr(()=>_("td",null,"name:",-1)),Xht={style:{float:"right"}},Yht=Sr(()=>_("td",null,"type:",-1)),qht=["value"],Zht=["value"],Kht={key:0},Jht=Sr(()=>_("td",null,"stash:",-1)),Qht=["value"],tdt=Sr(()=>_("td",null,"job:",-1)),edt=R(" idle "),rdt={key:0},ndt={key:1},idt=R(" \u270D\uFE0F "),odt=R(" @ "),sdt=R("M$/day "),adt=R("CP "),ldt=R(" [\u{1F33B}] "),udt=["value"],cdt=Sr(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),fdt={class:"fsxs"},hdt=R(" \u270D\uFE0F "),ddt=R(" @ "),pdt=R("M$/day "),vdt=R("CP "),gdt=R(" UNKNOWN_JOBTYPE "),mdt={key:1},_dt=Sr(()=>_("td",null,"$/day:",-1)),ydt={key:0},bdt={key:0},wdt={colspan:"2"},Sdt={key:0,class:"borderless"},Tdt=Sr(()=>_("tr",null,[_("th",null,"stats:"),_("th",{class:"fsxs"},"rank"),_("th",null,"sheet"),_("th",null,"+"),_("th",null,"skill"),_("th",null,"="),_("th",null,"final"),_("th")],-1)),kdt={class:"center"},Pdt={rowspan:"3"},Cdt=Sr(()=>_("br",null,null,-1)),Edt={class:"fsxs"},Adt=Sr(()=>_("td",null,null,-1)),Mdt=Sr(()=>_("td",null,null,-1)),xdt=Sr(()=>_("td",null,"\u{1F528}",-1)),Idt={class:"center"},Ldt={class:"fsxs"},Odt=Sr(()=>_("td",null,null,-1)),Rdt=Sr(()=>_("td",null,null,-1)),Ddt=Sr(()=>_("td",null,"\u{1F9B6}",-1)),Ndt={class:"center"},Fdt={class:"fsxs"},$dt=Sr(()=>_("td",null,null,-1)),zdt=Sr(()=>_("td",null,null,-1)),Bdt=Sr(()=>_("td",null,"\u{1F340}",-1)),Vdt={class:"center"},Udt=Sr(()=>_("td",null,"skills:",-1)),Wdt={style:{float:"right"}},jdt=["disabled"],Gdt={colspan:"2",s:""},Hdt=["id","onUpdate:modelValue"],Xdt=["value"],Ydt=["src"],qdt=R(" use floating resource for this regionGroup "),Zdt={key:0,id:"chartPane"};function Kdt(e,t,r,n,i,o){const s=Ot("WorkerJobDescription"),a=Ot("FloatingResourceEdit");return r.workerEditing?(E(),M("div",Wht,[_("div",jht,[_("table",Ght,[_("tr",null,[Hht,_("td",null,[et(_("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.workerEditing.label=l),style:{width:"10em"}},null,512),[[zt,r.workerEditing.label]]),R(" lvl."+C(r.workerEditing.level)+" ",1),_("button",{onClick:t[1]||(t[1]=l=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),_("button",{onClick:t[2]||(t[2]=l=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),Z("",!0),_("div",Xht,[e.wasChanged&&r.workerInitial?(E(),M("button",{key:0,onClick:t[4]||(t[4]=l=>o.revert())},"revert")):Z("",!0)])])]),_("tr",null,[Yht,_("td",null,[e.prerelease_charkind?(E(),M("select",{key:0,onChange:t[5]||(t[5]=l=>o.recalcStats(l.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(E(!0),M(W,null,gt(n.gameStore.workerStatic,(l,u)=>(E(),M("option",{value:u},C(u)+" "+C(n.gameStore.uloc.char[u])+" "+C(l.wspd/1e6)+" / "+C(l.mspd/100)+" / "+C(l.luck/1e4),9,Zht))),256))],40,qht)):(E(),M(W,{key:1},[R(C(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M("tr",Kht,[Jht,_("td",null,[et(_("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>r.workerEditing.job.storage=l)},[(E(!0),M(W,null,gt(n.gameStore.townsWithRedirectableStorage,l=>(E(),M("option",{value:l},C(n.gameStore.uloc.node[l]),9,Qht))),256))],512),[[He,r.workerEditing.job.storage]])])])):Z("",!0),_("tr",null,[tdt,_("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(E(),M(W,{key:0},[edt],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M(W,{key:1},[R(C(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(E(),M("span",rdt,[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),_("span",{onClick:t[7]||(t[7]=l=>e.showChartPane=!e.showChartPane)},C(e.showChartPane?"\u25C0":"\u25B6"),1)])):(E(),M("span",ndt,C(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(E(),M(W,{key:2},[idt,et(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=l=>r.workerEditing.job.label=l)},null,512),[[zt,r.workerEditing.job.label]]),odt,et(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=l=>r.workerEditing.job.profit=l)},null,512),[[zt,r.workerEditing.job.profit,void 0,{number:!0}]]),sdt,et(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=l=>r.workerEditing.job.cp=l)},null,512),[[zt,r.workerEditing.job.cp,void 0,{number:!0}]]),adt],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(E(),M(W,{key:3},[ldt],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(E(),M(W,{key:4},[et(_("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>r.workerEditing.job.recipe=l),style:{width:"13em"}},[(E(!0),M(W,null,gt(n.gameStore.craftOutputs,(l,u)=>(E(),M("option",{value:u},C(n.gameStore.uloc.item[l[0]]),9,udt))),256))],512),[[He,r.workerEditing.job.recipe]]),ht(s,{w:r.workerEditing},null,8,["w"]),R(" / "+C(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" ",1),cdt,_("span",fdt," [type: "+C(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(E(),M(W,{key:5},[hdt,et(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[12]||(t[12]=l=>r.workerEditing.job.label=l)},null,512),[[zt,r.workerEditing.job.label]]),ddt,et(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[13]||(t[13]=l=>r.workerEditing.job.profit=l)},null,512),[[zt,r.workerEditing.job.profit,void 0,{number:!0}]]),pdt,et(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[14]||(t[14]=l=>r.workerEditing.job.cp=l)},null,512),[[zt,r.workerEditing.job.cp,void 0,{number:!0}]]),vdt],64)):(E(),M(W,{key:6},[gdt],64))])]),r.workerEditing.job?(E(),M("tr",mdt,[_dt,_("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(E(),M(W,{key:0},[R(C(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(E(),M("span",ydt,[R(" \u2192 "+C(o.spaceSep(o.newProfit))+" ",1),_("span",{class:_r({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},C(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):Z("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(E(),M(W,{key:1},[R(C(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(E(),M(W,{key:2},[R(C(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(E(),M("span",bdt,[R(" \u2192 "+C(o.spaceSep(o.newProfit))+" ",1),_("span",{class:_r({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},C(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):Z("",!0)],64)):Z("",!0)])])):Z("",!0),_("tr",null,[_("td",wdt,[n.gameStore.ready?(E(),M("table",Sdt,[Tdt,_("tr",kdt,[_("td",Pdt,[_("button",{onClick:t[15]||(t[15]=l=>o.setStatsMedian()),class:"fsxxs"},"median"),Cdt,_("button",{onClick:t[16]||(t[16]=l=>o.setStatsRandom()),class:"fsxxs"},"random")]),_("td",Edt,C(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),_("td",null,[et(_("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=l=>r.workerEditing.wspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.wspdSheet]])]),Adt,_("td",null,C(o.formatFixed(o.currentWspdBonus,2)),1),Mdt,_("td",null,C(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),xdt]),_("tr",Idt,[_("td",Ldt,C(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),_("td",null,[et(_("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>r.workerEditing.mspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.mspdSheet]])]),Odt,_("td",null,C(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),Rdt,_("td",null,C(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),Ddt]),_("tr",Ndt,[_("td",Fdt,C(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),_("td",null,[et(_("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>r.workerEditing.luckSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.luckSheet]])]),$dt,_("td",null,C(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),zdt,_("td",null,C(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),Bdt])])):Z("",!0)])]),_("tr",Vdt,[Udt,_("td",null,[_("div",Wdt,[_("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in n.userStore.pzJobs),onClick:t[20]||(t[20]=l=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,jdt)])])]),(E(),M(W,null,gt(9,l=>_("tr",null,[_("td",Gdt,[et(_("select",{id:"skill"+(l-1),"onUpdate:modelValue":u=>r.workerEditing.skills[l-1]=u,class:"w30em animable",style:{width:"30em"}},[(E(!0),M(W,null,gt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[l-1]),u=>(E(),M("option",{value:u},C(n.gameStore.uloc.skill[u]+" / "+n.gameStore.uloc.skilldesc[u]),9,Xdt))),256))],8,Hdt),[[He,r.workerEditing.skills[l-1]]]),e.prerelease_skillicon?(E(),M("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[l-1]}.png`,width:"22",height:"22"},null,8,Ydt)):Z("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(E(),M(W,{key:0},[et(_("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=l=>n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=l)},null,512),[[Ve,n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),qdt],64)):Z("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(E(),M("div",Zdt,[ht(a,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):Z("",!0)])):Z("",!0)}const jz=Gt(Uht,[["render",Kdt],["__scopeId","data-v-cd4bb531"]]);const Jdt={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},components:{ItemIcon:fi},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{formatFixed:st,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,{kind:"custom",profit:this.customProfit,cp:this.customCP,label:this.customLabel}),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.w.tnk),o=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=this.gameStore.pzSelectionEntry(a,i,this.w.tnk,l,u,this.w,n,o);c.profit.dist>1e6||e.push(c)}),e.sort((a,l)=>l.dailyPerCp-a.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)},workerWorkshopsProfit(){const e=[];if(!this.w)return e;const t=this.gameStore.tnk2tk(this.w.tnk),r=Date.now(),n=16,i=new Set([...this.userStore.autotakenNodes]);for(const[o,s]of Object.entries(this.userStore.userWorkshops)){const a=Number(o);if(this.workshopBusy(a)&&s.industry!="mass"||this.gameStore.houseDistance(this.w.tnk,a)>1e6)continue;const l=this.gameStore.houseInfo[a].affTown,u=this.gameStore.tk2tnk(l),c=this.userStore.occupiedWorkshops.has(Number(a))?0:s.manualCp,[f,h]=this.gameStore.dijkstraPath(u,this.w.tnk,i),d=this.gameStore.workshopSelectionEntry(a,t,this.w.tnk,f,this.w,h,c);e.push(d)}return e.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: workerWorkshopsProfit took",Date.now()-r,"ms"),console.log("workerWorkshopsProfit",e),e.slice(0,n)}}},fn=e=>(Ue("data-v-907094bd"),e=e(),We(),e),Qdt={class:"spaced-columns"},tpt=R(" ) where?"),ept=fn(()=>_("br",null,null,-1)),rpt=R(" stash: "),npt=["value"],ipt=fn(()=>_("th",null,"node",-1)),opt=fn(()=>_("th",null,"workload",-1)),spt=fn(()=>_("th",null,"walk",-1)),apt=fn(()=>_("th",null,"+M$/day",-1)),lpt=fn(()=>_("th",null,"+CP",-1)),upt=fn(()=>_("th",null,"M$/day/CP",-1)),cpt=fn(()=>_("th",null,"action",-1)),fpt=["href"],hpt=R(C(" ")+" "),dpt={class:"tac"},ppt={class:"tac"},vpt={class:"tac"},gpt={class:"tac"},mpt=["title"],_pt=R("+"),ypt=["title"],bpt={class:"tac"},wpt=["onClick"],Spt=fn(()=>_("tr",null,[_("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),Tpt={key:0},kpt=fn(()=>_("td",null,[R(" \u{1F33B} Farm "),_("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139")],-1)),Ppt=fn(()=>_("td",{class:"tac"},"x",-1)),Cpt=fn(()=>_("td",{class:"tac"},"x",-1)),Ept={class:"tac"},Apt={class:"tac"},Mpt=["title"],xpt={class:"tac"},Ipt={class:"tac"},Lpt={class:"tac"},Opt={class:"tac"},Rpt={class:"tac"},Dpt=["title"],Npt=R("+"),Fpt={class:"tooltip",title:`cost of operating the workshop
(see Settings > \u{1F3ED}Workshops)`},$pt=R("+"),zpt=["title"],Bpt={class:"tac"},Vpt=["onClick"],Upt=R(" \u270D\uFE0F Custom job "),Wpt=fn(()=>_("abbr",{title:"enter daily profit and CP cost for this specific job PER ONE WORKER",class:"tooltip"},"\u2139",-1)),jpt={style:{float:"right"}},Gpt=R(" \xA0label: "),Hpt=fn(()=>_("td",{class:"tac"},"x",-1)),Xpt=fn(()=>_("td",{class:"tac"},"x",-1)),Ypt={class:"tac"},qpt={class:"tac"},Zpt=R("+"),Kpt=["title"],Jpt={class:"tac"};function Qpt(e,t,r,n,i,o){const s=Ot("ItemIcon"),a=Ot("RouterLink");return r.w?(E(),M(W,{key:0},[_("div",Qdt,[_("div",null,[R(" Send "+C(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(E(),M(W,{key:0},[R(C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+C(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+C(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),tpt,ept,R(" "+C(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+C(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),_("div",null,[rpt,et(_("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.selectedRedirect=l)},[(E(!0),M(W,null,gt(n.gameStore.townsWithRedirectableStorageSet,l=>(E(),M("option",{value:l},C(n.gameStore.uloc.node[l]),9,npt))),256))],512),[[He,e.selectedRedirect]])])]),_("table",null,[_("tr",null,[ipt,opt,spt,apt,lpt,upt,Z("",!0),cpt]),(E(!0),M(W,null,gt(o.workerNearestCpPlantzonesProfit,l=>(E(),M("tr",null,[_("td",null,[_("a",{href:this.userStore.codexNodeUrl+l.pz.key},C(l.pz.name),9,fpt),(E(!0),M(W,null,gt(this.gameStore.plantzones[l.pz.key].itemkeys,u=>(E(),M(W,null,[hpt,ht(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[ht(s,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])],64))),256))]),_("td",dpt,C(n.userStore.useFloatingResources[l.pz.regiongroup]?"~":"")+C(o.formatFixed(n.userStore.medianWorkloads[l.pz.key],2)),1),_("td",ppt,C(o.formatFixed(l.profit.dist,0)),1),_("td",vpt,C(o.formatFixed(l.profit.priceDaily,2)),1),_("td",gpt,[_("abbr",{title:Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`),class:"tooltip"},C(l.mapCp),9,mpt),_pt,_("abbr",{title:l.infraTooltip,class:"tooltip"},C(o.formatFixed(l.townCp)),9,ypt),R("="+C(o.formatFixed(l.cp)),1)]),_("td",bpt,C(o.formatFixed(l.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerPz(r.w,l.pz.key)},"assign",8,wpt)])]))),256)),Spt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(E(),M("tr",Tpt,[kpt,Ppt,Cpt,_("td",Ept,C(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),_("td",Apt,[_("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},C(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,Mpt)]),_("td",xpt,C(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:t[1]||(t[1]=l=>o.assignWorkerFm(r.w))},"assign")])])):Z("",!0),(E(!0),M(W,null,gt(o.workerWorkshopsProfit,l=>(E(),M("tr",null,[_("td",null," \u{1F3ED} "+C(n.gameStore.uloc.char[l.hk])+" "+C(l.workshop.label),1),_("td",Ipt,C(l.workshop.manualWorkload),1),_("td",Lpt,C(o.formatFixed(l.profit.distance,0)),1),_("td",Opt,C(o.formatFixed(l.profit.priceDaily,2)),1),_("td",Rpt,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`)},C(l.mapCp),9,Dpt),Npt,_("abbr",Fpt,C(l.houseCp),1),$pt,_("abbr",{title:l.infraTooltip,class:"tooltip"},C(l.townCp),9,zpt),R("="+C(l.cp),1)]),_("td",Bpt,C(o.formatFixed(l.dailyPerCp,2)),1),Z("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerWorkshop(r.w,l.hk)},"assign",8,Vpt)])]))),256)),_("tr",null,[_("td",null,[Upt,Wpt,_("div",jpt,[Gpt,et(_("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.customLabel=l),class:"workshop-label-input"},null,512),[[zt,e.customLabel]])])]),Hpt,Xpt,_("td",Ypt,[et(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=l=>e.customProfit=l)},null,512),[[zt,e.customProfit,void 0,{number:!0}]])]),_("td",qpt,[et(_("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=l=>e.customCP=l)},null,512),[[zt,e.customCP,void 0,{number:!0}]]),Zpt,_("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},C(o.formatFixed(o.addBedHereInfo.cost)),9,Kpt),R("="+C(o.formatFixed(e.customCP+o.addBedHereInfo.cost)),1)]),_("td",Jpt,C(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),Z("",!0),_("td",null,[_("button",{onClick:t[5]||(t[5]=l=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):Z("",!0)}const t0t=Gt(Jdt,[["render",Qpt],["__scopeId","data-v-907094bd"]]),e0t={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:st}},r0t=R(" Connect to nearest town "),n0t=_("tr",null,[_("th",null,"House"),_("th",null,"\u{1F6CF}\uFE0F"),_("th",null,"CP")],-1),i0t=["disabled","onUpdate:modelValue"],o0t=R(" "+C(" ")+" "),s0t=["href"],a0t=["disabled"],l0t=R(" P2W slots \u2192 Total: ");function u0t(e,t,r,n,i,o){return r.o?(E(),M(W,{key:0},[_("h3",null,C(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(E(),M(W,{key:0},[et(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.activateAncado=s)},null,512),[[Ve,n.userStore.activateAncado]]),r0t],64)):Z("",!0),_("table",null,[n0t,(E(!0),M(W,null,gt(r.o.houses,s=>(E(),M("tr",null,[_("td",null,[et(_("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":a=>n.userStore.lodgingTaken[s.key]=a},null,8,i0t),[[Ve,n.userStore.lodgingTaken[s.key]]]),o0t,_("a",{href:"https://bdocodex.com/us/npc/"+s.key},C(n.gameStore.uloc.char[s.key]),9,s0t)]),_("td",null,C(s.lodgingSpaces),1),_("td",null,C(s.CP),1)]))),256)),_("tr",null,[_("td",null,[et(_("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.lodgingP2W[r.tk]=s),class:"short"},null,8,a0t),[[zt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),l0t]),_("td",null,C(n.userStore.haveLodging.slots.perTown[r.tk]),1),_("td",null,C(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):Z("",!0)}const c0t=Gt(e0t,[["render",u0t]]);const f0t={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{tk:Number,show:{type:Boolean,default:!1}},components:{WorkerJobDescription:e_,ItemIcon:fi},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:st,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)},itemTooltip(e,t){const r=this.gameStore.uloc.item[t];let n="";return this.userStore.workingWorkers.forEach(i=>{if(this.gameStore.jobIsPz(i.job)){const o=this.gameStore.tnk2tk(i.job.storage),s=this.gameStore.plantzones[i.job.pzk].itemkeys;if(o==e&&s.has(t)){const a=i.job.pzk;n.length==0&&(n+=` brought by:
`),n+=`${this.gameStore.uloc.node[i.tnk]} worker ${i.label} from ${this.gameStore.parentNodeName(a)}
`}}}),r+n}}},Kr=e=>(Ue("data-v-32bbd801"),e=e(),We(),e),h0t={style:{"font-size":"x-large"}},d0t=R(" housing config"),p0t=R(" Connect to nearest town "),v0t={key:2,class:"section"},g0t=Kr(()=>_("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),m0t=Kr(()=>_("br",null,null,-1)),_0t=R(" - 1 initial"),y0t=Kr(()=>_("br",null,null,-1)),b0t=R(" - "),w0t=["disabled"],S0t=R(" from P2W"),T0t=Kr(()=>_("br",null,null,-1)),k0t={key:0},P0t={key:1,class:"red"},C0t=Kr(()=>_("br",null,null,-1)),E0t={class:"section"},A0t={id:"storageParent"},M0t={id:"storageLeft"},x0t=Kr(()=>_("h3",null,"\u{1F4E6} storage",-1)),I0t=Kr(()=>_("br",null,null,-1)),L0t=R(" + 1 Free slot"),O0t=Kr(()=>_("br",null,null,-1)),R0t=R(" + "),D0t=R(" Personal items"),N0t=Kr(()=>_("br",null,null,-1)),F0t=Kr(()=>_("span",{class:"markInnate underline"},"initial",-1)),$0t=Kr(()=>_("br",null,null,-1)),z0t=R(" - "),B0t=R(" "+C(" ")),V0t=Kr(()=>_("span",{class:"markP2W underline"},"from P2W",-1)),U0t=Kr(()=>_("br",null,null,-1)),W0t=Kr(()=>_("span",{class:"markProvided underline"},"required",-1)),j0t={key:1},G0t={key:2,class:"red"},H0t=Kr(()=>_("br",null,null,-1)),X0t=Kr(()=>_("span",{class:"markExtra underline"},"extra",-1)),Y0t={id:"storageItemList"},q0t={key:0},Z0t={key:0,class:"textItem"},K0t={key:1,class:"textItem"},J0t=["title"],Q0t={class:"fsxs"};function tvt(e,t,r,n,i,o){Ot("WorkerJobDescription");const s=Ot("ItemIcon");return r.tk>0?(E(),M(W,{key:0},[Z("",!0),_("p",null,[_("span",h0t,C(n.gameStore.uloc.town[r.tk]),1),d0t]),r.tk==619?(E(),M(W,{key:1},[et(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Ve,n.userStore.activateAncado]]),p0t],64)):Z("",!0),r.tk in n.gameStore.lodgingPerTown?(E(),M("div",v0t,[g0t,R(" "+C(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),m0t,_0t,y0t,b0t,et(_("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,w0t),[[zt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),S0t,T0t,R(" = "+C(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(E(),M("span",k0t,"\u2190 max possible")):Z("",!0),n.userStore.townsInfra[r.tk].errL?(E(),M("span",P0t,"\u2190 too much!")):Z("",!0),C0t,_("strong",null,C(n.userStore.townsInfra[r.tk].lodging)+" found ",1)])):Z("",!0),_("div",E0t,[_("div",A0t,[_("div",M0t,[x0t,R(" "+C(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),I0t,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(E(),M(W,{key:0},[L0t,O0t],64)):Z("",!0),R0t,et(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[zt,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),D0t,N0t,R(" - "+C(n.userStore.baseStorage)+" ",1),F0t,$0t,z0t,et(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[zt,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),B0t,V0t,U0t,R(" = "+C(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),W0t,n.userStore.townsInfra[r.tk].warnS?(E(),M("span",j0t,"\u2190 max possible")):Z("",!0),n.userStore.townsInfra[r.tk].errS?(E(),M("span",G0t,"\u2190 too much!")):Z("",!0),H0t,_("strong",null,C(n.userStore.townsInfra[r.tk].storage)+" found",1),R(" "+C(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),X0t]),_("div",Y0t,[(E(!0),M(W,null,gt(o.storageViewCount,a=>(E(),M(W,null,[a>1&&(a-1)%9==0?(E(),M("br",q0t)):Z("",!0),_("div",{class:_r(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(E(),M("span",Z0t)):isNaN(o.ingameSortedItems[a-1])?(E(),M("span",K0t,C(o.ingameSortedItems[a-1]),1)):(E(),M("abbr",{key:2,title:o.itemTooltip(r.tk,o.ingameSortedItems[a-1]),class:"hastooltip"},[ht(s,{ik:Number(o.ingameSortedItems[a-1])},null,8,["ik"])],8,J0t))],2)],64))),256))])])]),_("details",null,[_("summary",null,"Found cost: "+C(n.userStore.townsInfra[r.tk].cost)+" CP",1),_("pre",Q0t,C(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):Z("",!0)}const evt=Gt(f0t,[["render",tvt],["__scopeId","data-v-32bbd801"]]);function v1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const gC=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),Dx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Dx&&parseFloat(Dx[1]);const rvt="3.2.7";function Ss(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const iT=typeof process!="object"||String(process)!=="[object process]"||process.browser,nvt=typeof window<"u"&&typeof window.orientation<"u",Nx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Nx&&parseFloat(Nx[1]);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ivt{constructor(t,r){P(this,"name",void 0),P(this,"workerThread",void 0),P(this,"isRunning",!0),P(this,"result",void 0),P(this,"_resolve",()=>{}),P(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){Ss(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Ss(this.isRunning),this.isRunning=!1,this._reject(t)}}class k2{}const P2=new Map;function ovt(e){Ss(e.source&&!e.url||!e.source&&e.url);let t=P2.get(e.source||e.url);return t||(e.url&&(t=svt(e.url),P2.set(e.url,t)),e.source&&(t=Gz(e.source),P2.set(e.source,t))),Ss(t),t}function svt(e){if(!e.startsWith("http"))return e;const t=avt(e);return Gz(t)}function Gz(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function avt(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Hz(e,t=!0,r){const n=r||new Set;if(e){if(Fx(e))n.add(e);else if(Fx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)Hz(e[i],t,n)}}return r===void 0?Array.from(n):[]}function Fx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const C2=()=>{};class oT{static isSupported(){return typeof Worker<"u"&&iT||typeof k2!==void 0}constructor(t){P(this,"name",void 0),P(this,"source",void 0),P(this,"url",void 0),P(this,"terminated",!1),P(this,"worker",void 0),P(this,"onMessage",void 0),P(this,"onError",void 0),P(this,"_loadableURL","");const{name:r,source:n,url:i}=t;Ss(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=C2,this.onError=o=>console.log(o),this.worker=iT?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=C2,this.onError=C2,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||Hz(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=ovt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new k2(n,{eval:!1})}else if(this.source)t=new k2(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class lvt{static isSupported(){return oT.isSupported()}constructor(t){P(this,"name","unnamed"),P(this,"source",void 0),P(this,"url",void 0),P(this,"maxConcurrency",1),P(this,"maxMobileConcurrency",1),P(this,"onDebug",()=>{}),P(this,"reuseWorkers",!0),P(this,"props",{}),P(this,"jobQueue",[]),P(this,"idleQueue",[]),P(this,"count",0),P(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,s)=>i.done(s),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new ivt(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new oT({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return nvt?this.maxMobileConcurrency:this.maxConcurrency}}const uvt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class cs{static isSupported(){return oT.isSupported()}static getWorkerFarm(t={}){return cs._workerFarm=cs._workerFarm||new cs({}),cs._workerFarm.setProps(t),cs._workerFarm}constructor(t){P(this,"props",void 0),P(this,"workerPools",new Map),this.props={...uvt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new lvt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}P(cs,"_workerFarm",void 0);const cvt="latest";function fvt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=cvt);const s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(s,"/dist/").concat(n)}return Ss(i),i}function hvt(e,t=rvt){Ss(e,"no worker provided");const r=e.version;return!(!t||!r)}function dvt(e,t){return!cs.isSupported()||!iT&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function pvt(e,t,r,n,i){const o=e.id,s=fvt(e,r),l=cs.getWorkerFarm(r).getWorkerPool({name:o,url:s});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",vvt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function vvt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:s}=n;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function Xz(e){return e&&typeof e=="object"&&e.isBuffer}function gvt(e){return Xz(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function Yz(e){if(Xz(e))return gvt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function mvt(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function _vt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,s)=>o+s.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function yvt(e){const t=[];for await(const r of e)t.push(r);return _vt(...t)}function $x(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class zx{constructor(t,r){P(this,"name",void 0),P(this,"type",void 0),P(this,"sampleSize",1),P(this,"time",void 0),P(this,"count",void 0),P(this,"samples",void 0),P(this,"lastTiming",void 0),P(this,"lastSampleTime",void 0),P(this,"lastSampleCount",void 0),P(this,"_count",0),P(this,"_time",0),P(this,"_samples",0),P(this,"_startTime",0),P(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=$x(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime($x()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class O_{constructor(t){P(this,"id",void 0),P(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof zx?this.stats[r]=t:this.stats[r]=new zx(r,n)),this.stats[r]}}const bvt="Queued Requests",wvt="Active Requests",Svt="Cancelled Requests",Tvt="Queued Requests Ever",kvt="Active Requests Ever",Pvt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class Cvt{constructor(t={}){P(this,"props",void 0),P(this,"stats",void 0),P(this,"activeRequestCount",0),P(this,"requestQueue",[]),P(this,"requestMap",new Map),P(this,"deferredUpdate",null),this.props={...Pvt,...t},this.stats=new O_({id:this.props.id}),this.stats.get(bvt),this.stats.get(wvt),this.stats.get(Svt),this.stats.get(Tvt),this.stats.get(kvt)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let Evt="";const Bx={};function Avt(e){for(const t in Bx)if(e.startsWith(t)){const r=Bx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(Evt).concat(e)),e}function Mvt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const xvt=e=>typeof e=="boolean",Hd=e=>typeof e=="function",r0=e=>e!==null&&typeof e=="object",Vx=e=>r0(e)&&e.constructor==={}.constructor,Ivt=e=>e&&typeof e[Symbol.iterator]=="function",Lvt=e=>e&&typeof e[Symbol.asyncIterator]=="function",$f=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,zf=e=>typeof Blob<"u"&&e instanceof Blob,Ovt=e=>e&&typeof e=="object"&&e.isBuffer,Rvt=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||r0(e)&&Hd(e.tee)&&Hd(e.cancel)&&Hd(e.getReader),Dvt=e=>r0(e)&&Hd(e.read)&&Hd(e.pipe)&&xvt(e.readable),qz=e=>Rvt(e)||Dvt(e),Nvt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Fvt=/^([-\w.]+\/[-\w.+]+)/;function $vt(e){const t=Fvt.exec(e);return t?t[1]:e}function Ux(e){const t=Nvt.exec(e);return t?t[1]:""}const zvt=/\?.*/;function R_(e){if($f(e)){const t=E2(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:$vt(r)||Ux(t)}}return zf(e)?{url:E2(e.name||""),type:e.type||""}:typeof e=="string"?{url:E2(e),type:Ux(e)}:{url:"",type:""}}function Bvt(e){return $f(e)?e.headers["content-length"]||-1:zf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function E2(e){return e.replace(zvt,"")}async function Zz(e){if($f(e))return e;const t={},r=Bvt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=R_(e);i&&(t["content-type"]=i);const o=await Wvt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:n}),s}async function Vvt(e){if(!e.ok){const t=await Uvt(e);throw new Error(t)}}async function Uvt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function Wvt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var s;return n(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=jvt(r);return"data:base64,".concat(n)}return null}function jvt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function Wx(e,t){if(typeof e=="string"){e=Avt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await Zz(e)}function Kz(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Os(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Kz()}const hm={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Av=hm.window||hm.self||hm.global,Rh=hm.process||{},Jz=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Os();const A2=globalThis;function Qz(e){if(!e&&!Os())return"Node";if(Kz(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":A2.chrome?"Chrome":A2.safari?"Safari":A2.mozInnerScreenX?"Firefox":"Unknown"}function Gvt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class Hvt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";P(this,"storage",void 0),P(this,"id",void 0),P(this,"config",{}),this.storage=Gvt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function Xvt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function Yvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function M2(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,s=e.height*r,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}let g1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(g1||(g1={}));function jx(e){return typeof e=="string"?g1[e.toUpperCase()]||g1.WHITE:e}function qvt(e,t,r){return!Os&&typeof e=="string"&&(t&&(t=jx(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=jx(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function Zvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function m1(e,t){if(!e)throw new Error(t||"Assertion failed")}function cc(){let e;if(Os&&"performance"in Av){var t,r;e=Av==null||(t=Av.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in Rh){var n;const i=Rh==null||(n=Rh.hrtime)===null||n===void 0?void 0:n.call(Rh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const fc={debug:Os&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Kvt={enabled:!0,level:0};function Jn(){}const Gx={},Hx={once:!0};class n0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};P(this,"id",void 0),P(this,"VERSION",Jz),P(this,"_startTs",cc()),P(this,"_deltaTs",cc()),P(this,"_storage",void 0),P(this,"userData",{}),P(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new Hvt("__probe-".concat(this.id,"__"),Kvt),this.userData={},this.timeStamp("".concat(this.id," started")),Zvt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((cc()-this._startTs).toPrecision(10))}getDelta(){return Number((cc()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){m1(t,r)}warn(t){return this._getLogFunction(0,t,fc.warn,arguments,Hx)}error(t){return this._getLogFunction(0,t,fc.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,fc.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,fc.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,fc.debug||fc.info,arguments,Hx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Jn,n&&[n],{tag:egt(r)}):Jn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:s=1}=t;return this._shouldLog(r||n)?Os?tgt({image:i,message:o,scale:s}):Qvt({image:i,message:o,scale:s}):Jn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Jn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Xx({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Jn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=tB(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Xx({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,m1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=cc();const s=o.tag||o.message;if(o.once)if(!Gx[s])Gx[s]=cc();else return Jn;return r=Jvt(this.id,o.message,o),n.bind(console,r,...o.args)}return Jn}}P(n0,"VERSION",Jz);function tB(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return m1(Number.isFinite(t)&&t>=0),t}function Xx(e){const{logLevel:t,message:r}=e;e.logLevel=tB(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return m1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function Jvt(e,t,r){if(typeof t=="string"){const n=r.time?Yvt(Xvt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=qvt(t,r.color,r.background)}return t}function Qvt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Jn}function tgt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const s=M2(o,r,n);console.log(...s)},o.src=t,Jn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...M2(t,r,n)),Jn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...M2(o,r,n)),o.src=t.toDataURL(),Jn}return Jn}function egt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Yx=new n0({id:"loaders.gl"});class rgt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class ngt{constructor(){P(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const eB={fetch:null,mimeType:void 0,nothrow:!1,log:new ngt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:gC,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},igt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function rB(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const nB=()=>{const e=rB();return e.globalOptions=e.globalOptions||{...eB},e.globalOptions};function ogt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],sgt(e,r),lgt(t,e,n)}function iB(e,t){const r=nB(),n=e||r;return typeof n.fetch=="function"?n.fetch:r0(n.fetch)?i=>Wx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:Wx}function sgt(e,t){qx(e,null,eB,igt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};qx(n,r.id,i,o,t)}}function qx(e,t,r,n,i){const o=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&r0(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in r)&&!u&&!c){if(a in n)Yx.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!l){const f=agt(a,i);Yx.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(f))()}}}}function agt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const s=o.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function lgt(e,t,r){const i={...e.options||{}};return ugt(i,r),i.log===null&&(i.log=new rgt),Zx(i,nB()),Zx(i,t),i}function Zx(e,t){for(const r in t)if(r in t){const n=t[r];Vx(n)&&Vx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function ugt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function mC(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function _C(e){var t,r;v1(e,"null loader"),v1(mC(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const oB=()=>{const e=rB();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function cgt(e){const t=oB();e=Array.isArray(e)?e:[e];for(const r of e){const n=_C(r);t.find(i=>n===i)||t.unshift(n)}}function fgt(){return oB()}const hgt=new n0({id:"loaders.gl"}),dgt=/\.([^.]+)$/;async function pgt(e,t=[],r,n){if(!sB(e))return null;let i=Kx(e,t,{...r,nothrow:!0},n);if(i)return i;if(zf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Kx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(aB(e));return i}function Kx(e,t=[],r,n){if(!sB(e))return null;if(t&&!Array.isArray(t))return _C(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...fgt()),ggt(i);const o=vgt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(aB(e));return o}function vgt(e,t,r,n){const{url:i,type:o}=R_(e),s=i||(n==null?void 0:n.url);let a=null,l="";if(r!=null&&r.mimeType&&(a=x2(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),a=a||mgt(t,s),l=l||(a?"matched url ".concat(s):""),a=a||x2(t,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||ygt(t,e),l=l||(a?"matched initial data ".concat(lB(e)):""),a=a||x2(t,r==null?void 0:r.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l){var u;hgt.log(1,"selectLoader selected ".concat((u=a)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return a}function sB(e){return!(e instanceof Response&&e.status===204)}function aB(e){const{url:t,type:r}=R_(e);let n="No valid loader found (";n+=t?"".concat(Mvt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?lB(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function ggt(e){for(const t of e)_C(t)}function mgt(e,t){const r=t&&dgt.exec(t),n=r&&r[1];return n?_gt(e,n):null}function _gt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function x2(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function ygt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(bgt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Jx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Jx(t,0,r))return r;return null}function bgt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Jx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>wgt(e,t,r,i))}function wgt(e,t,r,n){if(n instanceof ArrayBuffer)return mvt(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=sT(e,t,n.length);return n===i;default:return!1}}function lB(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?sT(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?sT(e,0,t):""}function sT(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const Sgt=256*1024;function*Tgt(e,t){const r=(t==null?void 0:t.chunkSize)||Sgt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),s=e.slice(n,n+o);n+=o,yield i.encode(s)}}const kgt=256*1024;function*Pgt(e,t={}){const{chunkSize:r=kgt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),s=new Uint8Array(e,n,i);new Uint8Array(o).set(s),n+=i,yield o}}const Cgt=1024*1024;async function*Egt(e,t){const r=(t==null?void 0:t.chunkSize)||Cgt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Qx(e,t){return gC?Agt(e,t):Mgt(e)}async function*Agt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:s}=await i;if(o)return;yield Yz(s)}}catch{r.releaseLock()}}async function*Mgt(e,t){for await(const r of e)yield Yz(r)}function xgt(e,t){if(typeof e=="string")return Tgt(e,t);if(e instanceof ArrayBuffer)return Pgt(e,t);if(zf(e))return Egt(e,t);if(qz(e))return Qx(e,t);if($f(e))return Qx(e.body,t);throw new Error("makeIterator")}const uB="Cannot convert supplied data type";function Igt(e,t,r){if(t.text&&typeof e=="string")return e;if(Ovt(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(uB)}async function Lgt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return Igt(e,t);if(zf(e)&&(e=await Zz(e)),$f(e)){const i=e;return await Vvt(i),t.binary?await i.arrayBuffer():await i.text()}if(qz(e)&&(e=xgt(e,r)),Ivt(e)||Lvt(e))return yvt(e);throw new Error(uB)}function Ogt(e,t,r=null){if(r)return r;const n={fetch:iB(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function Rgt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function yC(e,t,r,n){Ss(!n||typeof n=="object"),t&&!Array.isArray(t)&&!mC(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=R_(e),s=Rgt(t,n),a=await pgt(e,s,r);return a?(r=ogt(r,a,s,i),n=Ogt({url:i,parse:yC,loaders:s},r,n),await Dgt(a,e,r,n)):null}async function Dgt(e,t,r,n){if(hvt(e),$f(t)){const i=t,{ok:o,redirected:s,status:a,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:s,status:a,statusText:l,type:u,url:c}}if(t=await Lgt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(dvt(e,r))return await pvt(e,t,r,n,yC);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw Ss(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function _1(e,t,r,n){!Array.isArray(t)&&!mC(t)&&(r=t,t=void 0);const i=iB(r);let o=e;return typeof e=="string"&&(o=await i(e)),zf(e)&&(o=await i(e)),await yC(o,t,r)}const Ngt="3.2.7",{_parseImageNode:Fgt}=globalThis,aT=typeof Image<"u",lT=typeof ImageBitmap<"u",$gt=Boolean(Fgt),uT=gC?!0:$gt;function zgt(e){switch(e){case"auto":return lT||aT||uT;case"imagebitmap":return lT;case"image":return aT;case"data":return uT;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function Bgt(){if(lT)return"imagebitmap";if(aT)return"image";if(uT)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Vgt(e){const t=Wgt(e);if(!t)throw new Error("Not an image");return t}function Ugt(e){switch(Vgt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Wgt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const jgt=/^data:image\/svg\+xml/,Ggt=/\.svg((\?|#).*)?$/;function bC(e){return e&&(jgt.test(e)||Ggt.test(e))}function Hgt(e,t){if(bC(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return cB(e,t)}function cB(e,t){if(bC(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function fB(e,t,r){const n=Hgt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await Xgt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function Xgt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const Ygt={};let tI=!0;async function qgt(e,t,r){let n;bC(r)?n=await fB(e,t,r):n=cB(e,r);const i=t&&t.imagebitmap;return await Zgt(n,i)}async function Zgt(e,t=null){if((Kgt(t)||!tI)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),tI=!1}return await createImageBitmap(e)}function Kgt(e){for(const t in e||Ygt)return!1;return!0}const ko=!1,Xd=!0;function hB(e){const t=i0(e);return Jgt(t)||emt(t)||Qgt(t)||tmt(t)}function Jgt(e){const t=i0(e);return t.byteLength>=24&&t.getUint32(0,ko)===2303741511?{mimeType:"image/png",width:t.getUint32(16,ko),height:t.getUint32(20,ko)}:null}function Qgt(e){const t=i0(e);return t.byteLength>=10&&t.getUint32(0,ko)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Xd),height:t.getUint16(8,Xd)}:null}function tmt(e){const t=i0(e);return t.byteLength>=14&&t.getUint16(0,ko)===16973&&t.getUint32(2,Xd)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Xd),height:t.getUint32(22,Xd)}:null}function emt(e){const t=i0(e);if(!(t.byteLength>=3&&t.getUint16(0,ko)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=rmt();let o=2;for(;o+9<t.byteLength;){const s=t.getUint16(o,ko);if(i.has(s))return{mimeType:"image/jpeg",height:t.getUint16(o+5,ko),width:t.getUint16(o+7,ko)};if(!n.has(s))return null;o+=2,o+=t.getUint16(o,ko)}return null}function rmt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function i0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function nmt(e,t){const{mimeType:r}=hB(e)||{},n=globalThis._parseImageNode;return v1(n),await n(e,r)}async function imt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},s=omt(i);let a;switch(s){case"imagebitmap":a=await qgt(e,t,o);break;case"image":a=await fB(e,t,o);break;case"data":a=await nmt(e);break;default:v1(!1)}return i==="data"&&(a=Ugt(a)),a}function omt(e){switch(e){case"auto":case"data":return Bgt();default:return zgt(e),e}}const smt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],amt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],lmt={image:{type:"auto",decode:!0}},dB={id:"image",module:"images",name:"Images",version:Ngt,mimeTypes:amt,extensions:smt,parse:imt,tests:[e=>Boolean(hB(new DataView(e)))],options:lmt},qt=new n0({id:"deck"});let cT={};function umt(e){cT=e}function jr(e,t,r,n){qt.level>0&&cT[e]&&cT[e].call(null,t,r,n)}function cmt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const fmt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:cmt,parseTextSync:JSON.parse},Yd="8.8.8",dm=globalThis.deck&&globalThis.deck.VERSION;if(dm&&dm!==Yd)throw new Error("deck.gl - multiple versions detected: ".concat(dm," vs ").concat(Yd));dm||(qt.log(1,"deck.gl ".concat(Yd))(),globalThis.deck={...globalThis.deck,VERSION:Yd,version:Yd,log:qt,_registerLoggers:umt},cgt([fmt,[dB,{imagebitmap:{premultiplyAlpha:"none"}}]]));const hmt=globalThis.deck,Rt=new n0({id:"luma.gl"});function nn(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const dmt="Invalid WebGLRenderingContext",pmt="Requires WebGL2";function D_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function ne(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function vmt(e){return ne(e)?e:null}function N_(e){return nn(D_(e),dmt),e}function Hr(e){return nn(ne(e),pmt),e}const _d={};function gmt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function mmt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function _mt(e,t){_d[e]=!0,t!==void 0&&gmt(t)}function ymt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(_d[n]=!0);while(n!==0);for(n in _d)if(_d[n])return delete _d[n],parseInt(n,10);return 0}}const o0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};o0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};o0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Du=function(t){const r=this;this.gl=t,ymt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,s){switch(o){case 34962:r.currentArrayBuffer=s;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=s;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,s){const l=r.currentVertexArrayObject.attribs[o];switch(s){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,s,a,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=s,h.type=a,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{mmt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};Du.prototype.VERTEX_ARRAY_BINDING_OES=34229;Du.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new o0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Du.prototype.createVertexArrayOES=function(){const t=new o0(this);return this.vertexArrayObjects.push(t),t};Du.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};Du.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof o0&&t.hasBeenBound&&t.ext===this)};Du.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){_mt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=a;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(s!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),s=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==s&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function bmt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Du(this)),this.__OESVertexArrayObject))}}const eI="OES_element_index",rI="WEBGL_draw_buffers",wmt="EXT_disjoint_timer_query",Smt="EXT_disjoint_timer_query_webgl2",Tmt="EXT_texture_filter_anisotropic",nI="WEBGL_debug_renderer_info",kmt=35723,Pmt=4352,Cmt=36795,Emt=34047,Amt=37445,Mmt=37446,De=e=>ne(e)?void 0:0,xmt={[3074]:e=>ne(e)?void 0:36064,[kmt]:e=>ne(e)?void 0:Pmt,[35977]:De,[32937]:De,[Cmt]:(e,t)=>{const r=ne(e)?e.getExtension(Smt):e.getExtension(wmt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[Amt]:(e,t)=>{const r=e.getExtension(nI);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Mmt]:(e,t)=>{const r=e.getExtension(nI);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Emt]:(e,t)=>{const r=e.luma.extensions[Tmt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:De,[35071]:De,[37447]:De,[36063]:(e,t)=>{if(!ne(e)){const r=e.getExtension(rI);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:De,[35374]:De,[35377]:De,[34852]:e=>{if(!ne(e)){const t=e.getExtension(rI);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(eI)?2147483647:65535,[33001]:e=>e.getExtension(eI)?16777216:65535,[33e3]:e=>16777216,[37157]:De,[35373]:De,[35657]:De,[36183]:De,[37137]:De,[34045]:De,[35978]:De,[35979]:De,[35968]:De,[35376]:De,[35375]:De,[35659]:De,[37154]:De,[35371]:De,[35658]:De,[35076]:De,[35077]:De,[35380]:De};function Imt(e,t,r){const n=xmt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const Lmt="OES_vertex_array_object",pB="ANGLE_instanced_arrays",Omt="WEBGL_draw_buffers",Rmt="EXT_disjoint_timer_query",Dmt="EXT_texture_filter_anisotropic",Nmt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Fmt(e,t){return{webgl2:ne(e),ext:e.getExtension(t)}}const vB={[Lmt]:{meta:{suffix:"OES"},createVertexArray:()=>{nn(!1,Nmt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[pB]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){nn(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Omt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{nn(!1)}},[Rmt]:{meta:{suffix:"EXT"},createQuery:()=>{nn(!1)},deleteQuery:()=>{nn(!1)},beginQuery:()=>{nn(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},I2={readBuffer:(e,t,r)=>{ne(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=Fmt(e,pB);let s;switch(n){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break}return s!==void 0?s:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!ne(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!ne(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[Dmt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:Imt,hint(e,t,r,n){return t(r,n)}};function $mt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(bmt(e),zmt(e),Vmt(e,vB),Bmt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=$mt;function zmt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function Bmt(e,t){let{target:r,target2:n}=t;Object.keys(I2).forEach(i=>{if(typeof I2[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},s=I2[i].bind(null,e,o);r[i]=s,n[i]=s}})}function Vmt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&Umt(e,{extension:r,target:e.luma,target2:e})}function Umt(e,t){let{extension:r,target:n,target2:i}=t;const o=vB[r];nn(o);const{meta:s={}}=o,{suffix:a=""}=s,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(a);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const wC={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Xs=(e,t,r)=>t?e.enable(r):e.disable(r),iI=(e,t,r)=>e.hint(r,t),Pn=(e,t,r)=>e.pixelStorei(r,t),Wmt=(e,t)=>{const r=ne(e)?36009:36160;return e.bindFramebuffer(r,t)},jmt=(e,t)=>e.bindFramebuffer(36008,t);function Dh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Gmt={[3042]:Xs,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Xs,[2885]:(e,t)=>e.cullFace(t),[2929]:Xs,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Xs,[35723]:iI,[36006]:Wmt,[2886]:(e,t)=>e.frontFace(t),[33170]:iI,[2849]:(e,t)=>e.lineWidth(t),[32823]:Xs,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Xs,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Xs,[3088]:(e,t)=>e.scissor(...t),[2960]:Xs,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:Pn,[3317]:Pn,[37440]:Pn,[37441]:Pn,[37443]:Pn,[3330]:Pn,[3332]:Pn,[3331]:Pn,[36010]:jmt,[3314]:Pn,[32878]:Pn,[3316]:Pn,[3315]:Pn,[32877]:Pn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Dh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Dh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Dh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=Dh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Dh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function qe(e,t,r){return t[e]!==void 0?t[e]:r[e]}const Hmt={blendEquation:(e,t,r)=>e.blendEquationSeparate(qe(32777,t,r),qe(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(qe(32969,t,r),qe(32968,t,r),qe(32971,t,r),qe(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(qe(32824,t,r),qe(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(qe(32938,t,r),qe(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,qe(2962,t,r),qe(2967,t,r),qe(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,qe(34816,t,r),qe(36003,t,r),qe(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,qe(2964,t,r),qe(2965,t,r),qe(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,qe(34817,t,r),qe(34818,t,r),qe(34819,t,r))},oI={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},lo=(e,t)=>e.isEnabled(t),sI={[3042]:lo,[2884]:lo,[2929]:lo,[3024]:lo,[32823]:lo,[32926]:lo,[32928]:lo,[3089]:lo,[2960]:lo,[35977]:lo};function gB(e){for(const t in e)return!1;return!0}function Xmt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function aI(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Ymt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...s);return l&&n(...s),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function qmt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class Zmt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Jmt(t):Object.assign({},wC),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){nn(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];Ts(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){nn(o!==void 0);const s=t[o],a=this.cache[o];Xmt(s,a)||(r=!0,n=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:r,oldValue:n}}}function mB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(nn(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new Zmt(e,{copyState:n}),qmt(e);for(const o in oI){const s=oI[o];Ymt(e,o,s)}aI(e,"getParameter"),aI(e,"isEnabled")}return e.state.enable=r,e}function Kmt(e){e.state||mB(e,{copyState:!1}),e.state.push()}function lI(e){nn(e.state),e.state.pop()}function Ts(e,t){if(nn(D_(e),"setParameters requires a WebGL context"),gB(t))return;const r={};for(const i in t){const o=Number(i),s=Gmt[i];s&&(typeof s=="string"?r[s]=!0:s(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=Hmt[i];o(e,t,n)}}function Jmt(e,t){if(t=t||wC,typeof t=="number"){const i=t,o=sI[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=sI[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Qmt(e){Ts(e,wC)}function ai(e,t,r){if(gB(t))return r(e);const{nocatch:n=!0}=t;Kmt(e),Ts(e,t);let i;if(n)i=r(e),lI(e);else try{i=r(e)}finally{lI(e)}return i}function vf(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function L2(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=vf(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return e1t(t,n,i,o,r)}function t1t(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function e1t(e,t,r,n,i){const o=uI(e[0],t,r);let s=cI(e[1],t,n,i),a=uI(e[0]+1,t,r);const l=a===r-1?a:a-1;a=cI(e[1]+1,t,n,i);let u;return i?(a=a===0?a:a+1,u=s,s=a):u=a===n-1?a:a-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(u-s+1,1)}}function uI(e,t,r){return Math.min(Math.round(e*t),r-1)}function cI(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const SC=Os(),r1t=SC&&typeof document<"u",_B={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function yB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nn(SC,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},_B,e);const{width:t,height:r}=e;function n(a){if(e.throwOnError)throw new Error(a);return console.error(a),null}e.onError=n;let i;const{canvas:o}=e,s=s1t({canvas:o,width:t,height:r,onError:n});return i=o1t(s,e),i?(i=TC(i,e),a1t(i),i):null}function TC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||l1t(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},_B,t);const{manageState:r,debug:n}=t;return r&&mB(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Rt.log(1,...o)()}}),SC&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Rt.level=Math.max(Rt.level,1)):Rt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function n1t(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function i1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=t1t(t.useDevicePixels);u1t(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function o1t(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=t;let a=null;return s&&(a=a||e.getContext("webgl2",t),a=a||e.getContext("experimental-webgl2",t)),o&&(a=a||e.getContext("webgl",t),a=a||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),a?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),a):r("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function s1t(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(r1t&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function a1t(e){const t=ne(e)?"WebGL2":"WebGL1",r=n1t(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Rt.info(1,"".concat(t).concat(i," context ").concat(n))()}function l1t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function u1t(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Rt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let s=t;const a=Math.floor(n*s),l=Math.floor(i*s);e.canvas.width=a,e.canvas.height=l,(e.drawingBufferWidth!==a||e.drawingBufferHeight!==l)&&(Rt.warn("Device pixel ratio clamped")(),s=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*s),e.canvas.height=Math.floor(i*s)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const qd="8.5.16",c1t="set luma.log.level=1 (or higher) to trace rendering";class bB{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new O_({id:t})),this.stats.get(t)}}const Gl=new bB;if(globalThis.luma&&globalThis.luma.VERSION!==qd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(qd));globalThis.luma||(Os()&&Rt.log(1,"luma.gl ".concat(qd," - ").concat(c1t))(),globalThis.luma=globalThis.luma||{VERSION:qd,version:qd,log:Rt,stats:Gl,globals:{modules:{},nodeIO:{}}});function f1t(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function h1t(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function wt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function O2(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return wt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Ea(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const R2={};function Fa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";R2[e]=R2[e]||1;const t=R2[e]++;return"".concat(e,"-").concat(t)}function fI(e){return wt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function gf(e){let t=!0;for(const r in e){t=!1;break}return t}function wB(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(s=>{o.methodName||(o[s]=()=>{throw Rt.removed("Calling removed method ".concat(t,".").concat(s,": "),i)(),new Error(s)})})}const hc="Resource subclass must define virtual methods";class Rs{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Fa(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=O2(this.gl,t),wt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ne(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:a}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=ne(this.gl),s={},a=r||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Ea(this.gl,l):l;s[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(s[f]=Ea(this.gl,s[f]))}}return s}setParameter(t,r){t=O2(this.gl,t),wt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ne(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=O2(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return wB(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(hc)}_deleteHandle(){throw new Error(hc)}_bindHandle(t){throw new Error(hc)}_getOptsFromHandle(){throw new Error(hc)}_getParameter(t,r){throw new Error(hc)}_setParameter(t,r){throw new Error(hc)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new bB}_addStats(){const t=this[Symbol.toStringTag],r=Gl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Gl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const d1t="Failed to deduce GL constant from typed array";function fT(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(d1t)}}function Ap(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function p1t(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const s=r*i;o=o||new Uint8Array(s);for(let a=0;a<n/2;++a){const l=a*s,u=(n-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,u,u+s),t.set(o,u)}}function v1t(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)s[(a*i+l)*4+u]=t[(a*2*r+l*2)*4+u];return{data:s,width:i,height:o}}function hT(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const a in n)if(a in t){const u=n[a]?"".concat(e,".").concat(n[a]):"N/A";Rt.removed("".concat(e,".").concat(a),u)()}for(const a in i)if(a in t){const l=i[a];Rt.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))()}let s=null;for(const a in o)if(a in t){const l=o[a];Rt.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))(),s=s||Object.assign({},t),s[l]=t[a],delete s[a]}return s||t}const g1t={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},m1t={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Mn{static getBytesPerElement(t){return Ap(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return wt(t.size),Ap(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Mn(g1t,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Mn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Mn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=hT("Accessor",t,m1t),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const hI=10,SB={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},_1t={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:SB},y1t={removedProps:SB};class Ce extends Rs{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=hT("Buffer",t,_1t),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=hT("Buffer",t,y1t),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Mn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;wt(r);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(Hr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(s,n,r),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:s}=this;return Hr(s),s.bindBuffer(36662,r.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hr(this.gl);const o=Ap(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(r),a=n;let l,u;t?(u=t.length,l=u-a):(l=Math.min(s,i||s),u=a+l);const c=Math.min(s,l);return i=i||c,wt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(wt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(hI,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;wt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,hI),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=fT(t);return wt(o),this.setAccessor(new Mn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;wt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=Ap(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Mn(this.accessor,{type:fT(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Rt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Rt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Rt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Rt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Mn(this.accessor,t),this}}const kC={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},TB={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},kB={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function b1t(e,t){const r=kC[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=ne(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function w1t(e,t){const r=kC[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const S1t=[9729,9728],dI=globalThis.WebGLBuffer||function(){};class gu extends Rs{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&b1t(t,n),o=o&&(!i||w1t(t,n))),o}constructor(t,r){const{id:n=Fa("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:m=!0}=t;const{depth:g=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=g,this.format=o,this.type=p,this.dataFormat=d,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:f,height:h,depth:g,format:o,type:p,dataFormat:d,border:s,mipmaps:m,parameters:u,compressed:v}),m&&this.generateMipmap(),this.setParameters(l),a&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ai(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let m=null;({data:u,dataType:m}=this._getDataType({data:u,compressed:p}));let g,y=0;if(ai(this.gl,l,()=>{switch(m){case"null":v.texImage2D(r,i,o,f,h,s,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,s,d,c,u,a);break;case"buffer":g=Hr(v),g.bindBuffer(35052,u.handle||u),g.texImage2D(r,i,o,f,h,s,d,c,a),g.bindBuffer(35052,null);break;case"browser-object":ne(v)?v.texImage2D(r,i,o,f,h,s,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[b,w]of u.entries())v.compressedTexImage2D(r,b,w.format,w.width,w.height,s,w.data),y+=w.levelSize;break;default:wt(!1,"Unknown image data type")}}),m==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const b=TB[this.dataFormat]||4,w=kB[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:m={}}=t;if({type:f,dataFormat:h,compressed:d,width:a,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:a,height:l}),wt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const g=i;i=g.data,a=g.shape[0],l=g.shape[1]}i instanceof Ce&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ai(this.gl,m,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,s,a,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,s,a,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,s,a,l,h,f,i,p);else if(i instanceof dI){const g=Hr(this.gl);g.bindBuffer(35052,i),g.texSubImage2D(r,u,o,s,a,l,h,f,p),g.bindBuffer(35052,null)}else ne(this.gl)?Hr(this.gl).texSubImage2D(r,u,o,s,a,l,h,f,i):this.gl.texSubImage2D(r,u,o,s,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Rt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ce?{data:r.handle,dataType:"buffer"}:r instanceof dI?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:s,type:a,compressed:l}=t;const u=kC[r];return s=s||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:s,type:a,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},wt(i,"Could not deduced texture size"),wt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),wt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:wt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return ne(this.gl)||!this.width||!this.height?!1:!fI(this.width)||!fI(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:S1t.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let T1t="";function k1t(e,t){return wt(typeof e=="string"),e=T1t+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class Sn extends gu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return gu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:k1t(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const dT=[34069,34070,34071,34072,34073,34074];class PB extends gu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:s=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:s})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(dT.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),dT.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Rt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,a,r,n,s,a,l,p):u.texImage2D(h,v,a,a,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:s,border:a=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,a,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}PB.FACES=dT;class P1t extends gu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:s=1,border:a=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ai(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,f),f instanceof Ce&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=TB[this.dataFormat]||4,p=kB[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const Cl="EXT_color_buffer_float",pI={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Cl,bpp:2},[33327]:{gl2:Cl,bpp:4},[34842]:{gl2:Cl,bpp:8},[33326]:{gl2:Cl,bpp:4},[33328]:{gl2:Cl,bpp:8},[34836]:{gl2:Cl,bpp:16},[35898]:{gl2:Cl,bpp:4}};function C1t(e,t,r){const n=r[t];if(!n)return!1;const i=ne(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class $c extends Rs{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||C1t(t,r,pI)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return wt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&ne(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*pI[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const E1t=256,A1t=1024,M1t=16384,vI=6144,gI=6145,mI=6146,_I=34041,CB="clear: bad arguments";function PC(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let s=0;r&&(s|=M1t,r!==!0&&(o.clearColor=r)),n&&(s|=E1t,n!==!0&&(o.clearDepth=n)),i&&(s|=A1t,n!==!0&&(o.clearStencil=n)),wt(s!==0,CB),ai(e,o,()=>{e.clear(s)})}function x1t(e){let{framebuffer:t=null,buffer:r=vI,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(e),ai(e,{framebuffer:t},()=>{switch(r){case vI:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case gI:e.clearBufferfv(gI,0,[i]);break;case mI:e.clearBufferiv(mI,0,[i]);break;case _I:const[o,s]=i;e.clearBufferfi(_I,0,o,s);break;default:wt(!1,CB)}})}function I1t(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return wt(!1),0}}function F_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=EB(e);wt(c);const{gl:h,handle:d,attachments:p}=c;a=a||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),wt(p[o]),u=u||p[o].type,s=O1t(s,u,i,a,l),u=u||fT(s);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,a,l,i,u,s),h.bindFramebuffer(36160,v||null),f&&c.delete(),s}function yI(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=F_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=v1t({data:n,width:i,height:o}));p1t({data:n,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(n),a.putImageData(l,0,0),s.toDataURL()}function L1t(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=r;let{targetX:a,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=EB(e);wt(h);const{gl:p,handle:v}=h,m=typeof a<"u"||typeof l<"u"||typeof u<"u";a=a||0,l=l||0,u=u||0;const g=p.bindFramebuffer(36160,v);wt(t);let y=null;if(t instanceof gu&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!m)p.copyTexImage2D(t,o,s,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,a,l,n,i,c,f);break;case 35866:case 32879:Hr(p).copyTexSubImage3D(t,o,a,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,g||null),d&&h.delete(),y}function EB(e){return e instanceof lr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:U1t(e),deleteFramebuffer:!0}}function O1t(e,t,r,n,i){if(e)return e;t=t||5121;const o=Ap(t,{clamped:!1}),s=I1t(r);return new o(n*i*s)}const ze={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function R1t(e){const t=new Sn(e,{format:6408,type:5126,dataFormat:6408}),r=new lr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const AB={[ze.WEBGL2]:[!1,!0],[ze.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[ze.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[ze.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[ze.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[ze.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[ze.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[ze.FLOAT_BLEND]:["EXT_float_blend"],[ze.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[ze.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[ze.TEXTURE_FLOAT]:["OES_texture_float",!0],[ze.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[ze.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[ze.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[ze.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[ze.COLOR_ATTACHMENT_RGBA32F]:[R1t,"EXT_color_buffer_float"],[ze.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[ze.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[ze.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[ze.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[ze.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[ze.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},D1t=2;function N1t(e,t){return CC(e,t)}function CC(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>MB(e,r))}function F1t(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in AB)e.luma.caps[t]===void 0&&(e.luma.caps[t]=MB(e,t));return e.luma.caps}function MB(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=$1t(e,t)),e.luma.caps[t]||Rt.log(D1t,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function $1t(e,t){const r=AB[t];wt(r,t);let n;const i=ne(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:wt(!1);return n}const bI="Multiple render targets not supported";class lr extends Rs{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new lr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Hr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Hr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(wt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,s,a,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return wt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Rt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in i){wt(s!==void 0,"Misspelled framebuffer binding point?");const a=Number(s),l=i[a];let u=l;if(!u)this._unattach(a);else if(u instanceof $c)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(B1t(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&PC(this.gl,{color:r,depth:n,stencil:i}),o.forEach((a,l)=>{x1t(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Rt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Rt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Rt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Rt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Rt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Rt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:s}=t;const a=Hr(this.gl),l=a.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,r):a.invalidateFramebuffer(36008,r,n,i,o,s),a.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Ea(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const s=r?Ea(this.gl,o):o;i[s]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),s=t?Ea(this.gl,o):o;n[s]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(yI(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Rt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=yI(this,{targetMaxHeight:100});return Rt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let s=null;return t&&(s=s||{},s[36064]=new Sn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),r&&n?(s=s||{},s[33306]=new $c(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):r?(s=s||{},s[36096]=new $c(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):n&&wt(!1),s}_unattach(t){const r=this.attachments[t];!r||(r instanceof $c?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Hr(s).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=z1t(i);s.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:s.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:wt(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=vmt(this.gl);r?r.readBuffer(t):wt(t===36064||t===1029,bI),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Hr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):wt(t.length===1&&(t[0]===36064||t[0]===1029),bI)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=F1t(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function z1t(e){return e<34069?e+34069:e}function B1t(e){return(lr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const V1t=[36049,36048,33296,33298,33299,33300,33301,33302,33303];lr.ATTACHMENT_PARAMETERS=V1t;function xB(e,t){wt(e instanceof Sn||e instanceof PB||e instanceof P1t);const r=e.constructor,{gl:n,width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function U1t(e,t){const{gl:r,width:n,height:i,id:o}=e;return new lr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function pm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const W1t=35632,j1t=35633;function G1t(e){switch(e){case W1t:return"fragment";case j1t:return"vertex";default:return"unknown type"}}function H1t(e,t,r,n){const i=e.split(/\r?\n/),o={},s={},a=n||pm(t)||"(unnamed)",l="".concat(G1t(r)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:s[p]=f}const u=X1t(t);return{shaderName:l,errors:wI(o,u),warnings:wI(s,u)}}function wI(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],s=o.split(":",3),a=s[0],l=parseInt(s[1],10)||0,u=o.substring(s.join(":").length+1).trim();r+=IB("^^^ ".concat(a,": ").concat(u,`

`),l)}}return r}function X1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,s)=>{const a=String(s+t),l=a.length;return IB(a,i-l)+r+o})}function IB(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function LB(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const Y1t="Shader: GLSL source code must be a JavaScript string";class Mp extends Rs{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return wt(!1),"unknown"}}constructor(t,r){N_(t),wt(typeof r.source=="string",Y1t);const n=pm(r.source,null)||r.id||Fa("unnamed ".concat(Mp.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=pm(r,null);n&&(this.id=Fa(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Mp.getTypeName(this.shaderType),":").concat(this.id)}getName(){return pm(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=H1t(n,this.source,this.shaderType,this.id);throw Rt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Rt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class D2 extends Mp{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class N2 extends Mp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const q1t={[5126]:$e.bind(null,"uniform1fv",Cn,1,Br),[35664]:$e.bind(null,"uniform2fv",Cn,2,Br),[35665]:$e.bind(null,"uniform3fv",Cn,3,Br),[35666]:$e.bind(null,"uniform4fv",Cn,4,Br),[5124]:$e.bind(null,"uniform1iv",Ys,1,Br),[35667]:$e.bind(null,"uniform2iv",Ys,2,Br),[35668]:$e.bind(null,"uniform3iv",Ys,3,Br),[35669]:$e.bind(null,"uniform4iv",Ys,4,Br),[35670]:$e.bind(null,"uniform1iv",Ys,1,Br),[35671]:$e.bind(null,"uniform2iv",Ys,2,Br),[35672]:$e.bind(null,"uniform3iv",Ys,3,Br),[35673]:$e.bind(null,"uniform4iv",Ys,4,Br),[35674]:$e.bind(null,"uniformMatrix2fv",Cn,4,Ko),[35675]:$e.bind(null,"uniformMatrix3fv",Cn,9,Ko),[35676]:$e.bind(null,"uniformMatrix4fv",Cn,16,Ko),[35678]:Cr,[35680]:Cr,[5125]:$e.bind(null,"uniform1uiv",Mv,1,Br),[36294]:$e.bind(null,"uniform2uiv",Mv,2,Br),[36295]:$e.bind(null,"uniform3uiv",Mv,3,Br),[36296]:$e.bind(null,"uniform4uiv",Mv,4,Br),[35685]:$e.bind(null,"uniformMatrix2x3fv",Cn,6,Ko),[35686]:$e.bind(null,"uniformMatrix2x4fv",Cn,8,Ko),[35687]:$e.bind(null,"uniformMatrix3x2fv",Cn,6,Ko),[35688]:$e.bind(null,"uniformMatrix3x4fv",Cn,12,Ko),[35689]:$e.bind(null,"uniformMatrix4x2fv",Cn,8,Ko),[35690]:$e.bind(null,"uniformMatrix4x3fv",Cn,12,Ko),[35678]:Cr,[35680]:Cr,[35679]:Cr,[35682]:Cr,[36289]:Cr,[36292]:Cr,[36293]:Cr,[36298]:Cr,[36299]:Cr,[36300]:Cr,[36303]:Cr,[36306]:Cr,[36307]:Cr,[36308]:Cr,[36311]:Cr},Z1t={},K1t={},J1t={},SI=[0];function EC(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(SI[0]=e,e=SI);const i=e.length;if(i%t&&Rt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let s=0;s<i;s++)o[s]=e[s];return o}function Cn(e,t){return EC(e,t,Float32Array,Z1t)}function Ys(e,t){return EC(e,t,Int32Array,K1t)}function Mv(e,t){return EC(e,t,Uint32Array,J1t)}function TI(e,t,r){const n=q1t[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function Q1t(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function t_t(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!e_t(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function e_t(e){return Array.isArray(e)||ArrayBuffer.isView(e)?n_t(e):isFinite(e)||e===!0||e===!1||e instanceof gu||e instanceof $c?!0:e instanceof lr?Boolean(e.texture):!1}function r_t(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function n_t(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Cr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function $e(e,t,r,n){let i=null,o=null;return(s,a,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{wt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(s,e,a,u),i.set(u)),f}}function Br(e,t,r,n){e[t](r,n)}function Ko(e,t,r,n){e[t](r,!1,n)}const i_t=5120,o_t=5121,s_t=5122,a_t=5123,kI=0,xv=1,l_t=2,u_t=3,Iv=4,c_t=5,f_t=6,ur=5126,h_t=35664,d_t=35665,p_t=35666,Nh=5124,v_t=35667,g_t=35668,m_t=35669,Fh=5125,__t=36294,y_t=36295,b_t=36296,w_t=35670,S_t=35671,T_t=35672,k_t=35673,P_t=35674,C_t=35675,E_t=35676,A_t=35685,M_t=35686,x_t=35687,I_t=35688,L_t=35689,O_t=35690,pT={[ur]:[ur,1,"float"],[h_t]:[ur,2,"vec2"],[d_t]:[ur,3,"vec3"],[p_t]:[ur,4,"vec4"],[Nh]:[Nh,1,"int"],[v_t]:[Nh,2,"ivec2"],[g_t]:[Nh,3,"ivec3"],[m_t]:[Nh,4,"ivec4"],[Fh]:[Fh,1,"uint"],[__t]:[Fh,2,"uvec2"],[y_t]:[Fh,3,"uvec3"],[b_t]:[Fh,4,"uvec4"],[w_t]:[ur,1,"bool"],[S_t]:[ur,2,"bvec2"],[T_t]:[ur,3,"bvec3"],[k_t]:[ur,4,"bvec4"],[P_t]:[ur,8,"mat2"],[A_t]:[ur,8,"mat2x3"],[M_t]:[ur,8,"mat2x4"],[C_t]:[ur,12,"mat3"],[x_t]:[ur,12,"mat3x2"],[I_t]:[ur,12,"mat3x4"],[E_t]:[ur,16,"mat4"],[L_t]:[ur,16,"mat4x2"],[O_t]:[ur,16,"mat4x3"]};function R_t(e){switch(e){case kI:return kI;case xv:return xv;case u_t:return xv;case l_t:return xv;case Iv:return Iv;case c_t:return Iv;case f_t:return Iv;default:return wt(!1),0}}function PI(e){const t=pT[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function OB(e,t){switch(e){case i_t:case o_t:case s_t:case a_t:e=ur;break}for(const r in pT){const[n,i,o]=pT[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class D_t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!ne(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:s}=PI(n),a={type:o,size:i*s};this._inferProperties(t,r,a);const l={location:t,name:r,accessor:new Mn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:s}=PI(n),a=new Mn({type:o,size:i*s}),l={location:t,name:r,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const CI=4,N_t=35981,F_t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class RB extends Rs{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",F_t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:s=N_t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new D2(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new N2(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,wt(this.vs instanceof D2),wt(this.fs instanceof N2),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Hr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new D_t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:m,samplers:g}=t;if((m||g)&&(Rt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Rt.priority>=r){const y=p?p.id:"default",b="mode=".concat(Ea(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ea(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Rt.log(r,b)()}return wt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const y=R_t(n);d.begin(y)}this._bindTextures(),ai(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&ne(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(n,s,a,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rt.priority>=2&&t_t(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,s=!1;if(o instanceof lr&&(o=o.texture),o instanceof gu)if(s=this.uniforms[r]!==n,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:l}=i;a.bind(l),o=l,this._textureUniforms[r]=a}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||s)&&r_t(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new D2({handle:i});break;case 35632:n.fs=new N2({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Fa(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Rt.time(CI,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Rt.timeEnd(CI,"linkProgram for ".concat(this._getName()))(),t.debug||Rt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=Q1t(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=TI(t,o,n),n.size>1)for(let s=0;s<n.size;s++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=TI(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const $_t=34918,z_t=34919,B_t=35007,V_t=36795,U_t=35976,W_t=35887,j_t=36202;class y1 extends Rs{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=ne(t),i=CC(t,ze.TIMER_QUERY);let o=n||i;for(const s of r)switch(s){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:wt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(B_t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?j_t:W_t)}beginTransformFeedbackQuery(){return this.begin(U_t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,z_t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(V_t)}getResult(){return this.gl2.getQueryParameter(this.handle,$_t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return y1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class DB extends Rs{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Hr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,gf(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Rt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,s,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Ce?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let Lv=null;function G_t(e){return(!Lv||Lv.byteLength<e)&&(Lv=new ArrayBuffer(e)),Lv}function H_t(e,t){const r=G_t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function X_t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,s=i*o;let a=0;for(let l=n;a<o;a++)t[l++]=r[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}const Y_t="elements must be GL.ELEMENT_ARRAY_BUFFER";class An extends Rs{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?ne(t)||Qz()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new An(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return An.MAX_ATTRIBUTES=An.MAX_ATTRIBUTES||t.getParameter(34921),An.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:An._setConstantFloatArray(t,r,n);break;case Int32Array:An._setConstantIntArray(t,r,n);break;case Uint32Array:An._setConstantUintArray(t,r,n);break;default:wt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return An.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return wt(!t||t.target===34963,Y_t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:s,offset:a,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(wt(ne(f)),h.vertexAttribIPointer(t,i,o,s,a)):f.vertexAttribPointer(t,i,o,l,s,a),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!An.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let s=!this.buffer;if(this.buffer=this.buffer||new Ce(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(n,this.bufferValue),s){const a=H_t(r.constructor,o);X_t({target:a,source:n,start:0,count:o}),this.buffer.subData(a),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:wt(!1)}}static _setConstantIntArray(t,r,n){switch(wt(ne(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:wt(!1)}}static _setConstantUintArray(t,r,n){switch(wt(ne(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:wt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return wt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const q_t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",Z_t=/^(.+)__LOCATION_([0-9]+)$/,K_t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class J_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new An(t),wB(this,"VertexArray","v6.0",K_t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ce(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Ce&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Ce&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=r,Rt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(a||s);if(!l)return o;const u=this.accessors[s]||{},c=Mn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return wt(Number.isFinite(f)&&Number.isFinite(h)),{location:s,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=Z_t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Ce)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Ce){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Ce){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(q_t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(An.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){An.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,s=o>0;if(t.isInstanced=t.isInstanced||s,n instanceof Ce){const a=n;if(s){const l=a.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=a.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function Q_t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let s=0;s<e.length&&s<r;++s)s>0&&(i+=",".concat(s%n===0?" ":"")),i+=xp(e[s],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function xp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return Q_t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function EI(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;wt(r);const o=".*_.*",s=".*Matrix",a=r._uniformSetters,l={},u=Object.keys(a).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(s)&&F2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(s)&&F2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||F2({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:xp(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function F2(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const s=n[i],a=tyt(s);return!o||!a?(t[i]={[r]:a?xp(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function tyt(e){return e!=null}function eyt(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=AI(t,t.elements,null,r));const i=t.values;for(const o in i){const s=t._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const l=t.accessors[s.location];l&&(a="".concat(o,": ").concat(ryt(s.name,l))),n[a]=AI(t,i[o],l,r)}}return n}function AI(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,l=0,u,c,f;if(r&&(o=r.type,s=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Ce){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,a=l/d.BYTES_PER_ELEMENT/s;let v;if(r){const m=r.divisor>0;v="".concat(m?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(l," bytes ").concat(Ea(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(xp(f,{size:s,isInteger:u})),"Format ":v}}return f=t,s=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(xp(f,{size:s,isInteger:u})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function ryt(e,t){const{type:r,size:n}=t,i=OB(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function nyt(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=MI(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=MI(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function MI(e){const{type:t,size:r}=e.accessor,n=OB(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const xI=Os()&&typeof document<"u";let iyt=0;class oyt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=m=>yB(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Gl.get("animation-loop-".concat(iyt++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Rt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return wt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=y1.isSupported(this.gl,["timers"])?new y1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Rt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=xI?new Promise((t,r)=>{if(xI&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):h1t(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):f1t(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?TC(this.props.gl,t):this.onCreateContext(t),!D_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Qmt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&i1t(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new lr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const s0="vs",AC="fs";function Rn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const $2={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function syt(e){const t={};for(const r in e){const n=e[r],i=ayt(n);t[r]=i}return t}function ayt(e){let t=II(e);return t==="object"?e?"type"in e?Object.assign({},e,$2[e.type]):"value"in e?(t=II(e.value),Object.assign({type:t},e,$2[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},$2[t])}function II(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const lyt="vs",uyt="fs";class LI{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Rn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=cyt(c),s&&(this.uniforms=syt(s))}getModuleSource(t){let r;switch(t){case lyt:r=this.vs||"";break;case uyt:r=this.fs||"";break;default:Rn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Rn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function cyt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function fyt(e){return hyt(FB(e))}function hyt(e){const t={},r={};return NB({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function NB(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&NB({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function FB(e,t){return e.map(r=>(r instanceof LI||(Rn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Rn(r.name,"shader module has no name"),r=new LI(r),r.dependencies=FB(r.dependencies)),r))}function dyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const pyt=7936,vyt=7937,gyt=7938,myt=35724,MC={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Nl={};Object.keys(MC).forEach(e=>{Nl[e]=e});function _yt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function yyt(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||pyt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||vyt);return{gpuVendor:byt(r,n),vendor:r,renderer:n,version:e.getParameter(gyt),shadingLanguageVersion:e.getParameter(myt)}}function byt(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const z2={};function OI(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=MC[t];if(Rn(n,t),!dyt(r))return!0;if(t in z2)return z2[t];const i=n[0],o=r.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=e.createShader(35633);e.shaderSource(a,s),e.compileShader(a);const l=e.getShaderParameter(a,35713);return e.deleteShader(a),z2[t]=l,l}function wyt(e,t){const r=MC[t];Rn(r,t);const n=_yt(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Rn(i===!1||i===!0),i}function Ov(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>wyt(e,r))}function Syt(e){switch(yyt(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function Tyt(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Ov(e,Nl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Ov(e,Nl.GLSL_DERIVATIVES)&&OI(e,Nl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Ov(e,Nl.GLSL_FRAG_DATA)&&OI(e,Nl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Ov(e,Nl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const kyt=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Pyt=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,Cyt={[s0]:kyt,[AC]:Pyt},vm="__LUMA_INJECT_DECLARATIONS__",RI=/void\s+main\s*\([^)]*\)\s*\{\n?/,DI=/}\n?[^{}]*$/,B2=[];function NI(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===s0;for(const o in r){const s=r[o];s.sort((l,u)=>l.order-u.order),B2.length=s.length;for(let l=0,u=s.length;l<u;++l)B2[l]=s[l].injection;const a="".concat(B2.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(vm,a));break;case"vs:#main-start":i&&(e=e.replace(RI,l=>l+a));break;case"vs:#main-end":i&&(e=e.replace(DI,l=>a+l));break;case"fs:#decl":i||(e=e.replace(vm,a));break;case"fs:#main-start":i||(e=e.replace(RI,l=>l+a));break;case"fs:#main-end":i||(e=e.replace(DI,l=>a+l));break;default:e=e.replace(o,l=>l+a)}}return e=e.replace(vm,""),n&&(e=e.replace(/\}\s*$/,o=>o+Cyt[t])),e}function vT(e){const t={};return Rn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function mf(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const $B=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Eyt=[...$B,[mf("attribute"),"in $1"],[mf("varying"),"out $1"]],Ayt=[...$B,[mf("varying"),"in $1"]],zB=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Myt=[...zB,[mf("in"),"attribute $1"],[mf("out"),"varying $1"]],xyt=[...zB,[mf("in"),"varying $1"]],gT="gl_FragColor",mT=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Iyt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Lyt(e,t,r){switch(t){case 300:return r?b1(e,Eyt):Oyt(e);case 100:return r?b1(e,Myt):Ryt(e);default:throw new Error("unknown GLSL version ".concat(t))}}function b1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function Oyt(e){e=b1(e,Ayt);const t=e.match(mT);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(gT,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(Iyt,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(gT,"\\b"),"g"),r)}return e}function Ryt(e){e=b1(e,xyt);const t=e.match(mT);if(t){const r=t[1];e=e.replace(mT,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),gT)}return e}const Dyt=`

`.concat(vm,`

`),BB={[s0]:"vertex",[AC]:"fragment"},Nyt=`precision highp float;

`;function Fyt(e,t){const{vs:r,fs:n}=t,i=fyt(t.modules||[]);return{gl:e,vs:FI(e,Object.assign({},t,{source:r,type:s0,modules:i})),fs:FI(e,Object.assign({},t,{source:n,type:AC,modules:i})),getUniforms:$yt(i)}}function FI(e,t){let{id:r,source:n,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Rn(typeof n=="string","shader source must be a string");const h=i===s0,d=n.split(`
`);let p=100,v="",m=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],m=d.slice(1).join(`
`)):v="#version ".concat(p);const g={};o.forEach(k=>{Object.assign(g,k.getDefines())}),Object.assign(g,s);let y=c?"".concat(v,`
`).concat(Byt({id:r,source:n,type:i}),`
`).concat(zyt({type:i}),`
`).concat(Syt(e),`
`).concat(Tyt(e),`
`).concat(Vyt(g),`
`).concat(h?"":Nyt,`
`):"".concat(v,`
`);const b=Wyt(a),w={},T={},S={};for(const k in l){const x=typeof l[k]=="string"?{injection:l[k],order:0}:l[k],A=k.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const I=A[2],L=A[3];I?L==="decl"?T[k]=[x]:S[k]=[x]:w[k]=[x]}else S[k]=[x]}for(const k of o){f&&k.checkDeprecations(m,f),y+=k.getModuleSource(i,p);const A=k.injections[i];for(const I in A){const L=I.match(/^(v|f)s:#([\w-]+)$/);if(L){const z=L[2]==="decl"?T:S;z[I]=z[I]||[],z[I].push(A[I])}else w[I]=w[I]||[],w[I].push(A[I])}}return y+=Dyt,y=NI(y,i,T),y+=Uyt(b[i],w),y+=m,y=NI(y,i,S),y=Lyt(y,u?100:p,h),y}function $yt(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function zyt(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(BB[t].toUpperCase(),`
`)}function Byt(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(BB[n],`

`):""}function Vyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function Uyt(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((s,a)=>s.order-a.order);for(const s of o)r+="  ".concat(s.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function Wyt(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),s=r.replace(/\(.+/,"");t[i][s]=Object.assign(n,{signature:o})}),t}const jyt="void main() {gl_FragColor = vec4(0);}",VB=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,Gyt=`#version 300 es
`.concat(VB);function UB(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const s=o.split(";")[0];return{qualifier:n,type:i,name:s}}function WB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?Gyt:t>300?"#version ".concat(t,`
`).concat(VB):jyt;const o=Yyt(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function Hyt(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Rn(!1),null}}function Xyt(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Rn(!1),null}}function Yyt(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Rn(!1),null}}const qyt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,Zyt={name:"fp32",vs:qyt,fs:null};function Ip(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const on={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Kyt(e,{precision:t=on.precision}={}){return e=Jyt(e),"".concat(parseFloat(e.toPrecision(t)))}function mu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xr(e,t,r){return tbt(e,n=>Math.max(t,Math.min(r,n)))}function ru(e,t,r){return mu(e)?e.map((n,i)=>ru(n,t[i],r)):r*t+(1-r)*e}function Lo(e,t,r){const n=on.EPSILON;r&&(on.EPSILON=r);try{if(e===t)return!0;if(mu(e)&&mu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Lo(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=on.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{on.EPSILON=n}}function Jyt(e){return Math.round(e/on.EPSILON)*on.EPSILON}function Qyt(e){return e.clone?e.clone():new Array(e.length)}function tbt(e,t,r){if(mu(e)){const n=e;r=r||Qyt(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function ebt(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class xC extends ebt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:mu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(on)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+Kyt(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Lo(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(on.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function rbt(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function xe(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Zd(e,t,r=""){if(on.debug&&!rbt(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class jB extends xC{get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return xe(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return xe(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Ip(t>=0&&t<this.ELEMENTS,"index is out of range"),xe(this[t])}setComponent(t,r){return Ip(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Kd=1e-6,ji=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function nbt(){var e=new ji(2);return ji!=Float32Array&&(e[0]=0,e[1]=0),e}function w1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function GB(e,t){return e[0]=-t[0],e[1]=-t[1],e}function HB(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function ibt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function obt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=nbt();return function(t,r,n,i,o,s){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],o(e,e,s),t[a]=e[0],t[a+1]=e[1];return t}})();function sbt(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function XB(e,t,r){const n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/s,e[1]=(r[1]*n+r[5]*i+r[9]*o)/s,e[2]=(r[2]*n+r[6]*i+r[10]*o)/s,e}function abt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function lbt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function YB(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function qB(){var e=new ji(3);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ubt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function $I(e,t,r){var n=new ji(3);return n[0]=e,n[1]=t,n[2]=r,n}function cbt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function fbt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function hbt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function dbt(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function ZB(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gm(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2];return e[0]=i*l-o*a,e[1]=o*s-n*l,e[2]=n*a-i*s,e}function pbt(e,t,r,n){var i=t[0],o=t[1],s=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e}function IC(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return s=s||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/s,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,e}function KB(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function JB(e,t,r){var n=r[0],i=r[1],o=r[2],s=r[3],a=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*a-n*u,h=n*l-i*a,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,m=s*2;return c*=m,f*=m,h*=m,d*=2,p*=2,v*=2,e[0]=a+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function vbt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function gbt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function mbt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function _bt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+s*s+a*a),c=l*u,f=c&&ZB(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var QB=cbt,tV=ubt,V2=fbt;(function(){var e=qB();return function(t,r,n,i,o,s){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();const U2=[0,0,0];let Rv;class kt extends jB{static get ZERO(){return Rv||(Rv=new kt(0,0,0),Object.freeze(Rv)),Rv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&mu(t)?this.copy(t):(on.debug&&(xe(t),xe(r),xe(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return on.debug&&(xe(t.x),xe(t.y),xe(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=xe(t)}angle(t){return _bt(this,t)}cross(t){return gm(this,this,t),this.check()}rotateX({radians:t,origin:r=U2}){return vbt(this,this,r,t),this.check()}rotateY({radians:t,origin:r=U2}){return gbt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=U2}){return mbt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return IC(this,this,t),this.check()}transformAsVector(t){return XB(this,this,t),this.check()}transformByMatrix3(t){return KB(this,this,t),this.check()}transformByMatrix2(t){return abt(this,this,t),this.check()}transformByQuaternion(t){return JB(this,this,t),this.check()}}let Dv;class LC extends jB{static get ZERO(){return Dv||(Dv=new LC(0,0,0,0),Object.freeze(Dv)),Dv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),mu(t)&&arguments.length===1?this.copy(t):(on.debug&&(xe(t),xe(r),xe(n),xe(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return on.debug&&(xe(t.x),xe(t.y),xe(t.z),xe(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}transform(t){return IC(this,this,t),this.check()}transformByMatrix3(t){return YB(this,this,t),this.check()}transformByMatrix2(t){return lbt(this,this,t),this.check()}transformByQuaternion(t){return JB(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class eV extends xC{toString(){let t="[";if(on.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=xe(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function ybt(){var e=new ji(9);return ji!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function bbt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function wbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=c*s-a*u,h=-c*o+a*l,d=u*o-s*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(a*n-i*s)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-a*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(s*r-n*o)*p,e):null}function Sbt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*(u*o-s*l)+r*(-u*i+s*a)+n*(l*i-o*a)}function zI(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],m=r[4],g=r[5],y=r[6],b=r[7],w=r[8];return e[0]=h*n+d*s+p*u,e[1]=h*i+d*a+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+m*s+g*u,e[4]=v*i+m*a+g*c,e[5]=v*o+m*l+g*f,e[6]=y*n+b*s+w*u,e[7]=y*i+b*a+w*c,e[8]=y*o+b*l+w*f,e}function Tbt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*n+d*s+u,e[7]=h*i+d*a+c,e[8]=h*o+d*l+f,e}function kbt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*s,e[1]=d*i+h*a,e[2]=d*o+h*l,e[3]=d*s-h*n,e[4]=d*a-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function BI(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Pbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[3]=c-g,e[6]=h+m,e[1]=c+g,e[4]=1-u-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-u-f,e}var _T;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(_T||(_T={}));const Cbt=Object.freeze([1,0,0,0,1,0,0,0,1]);class Lr extends eV{static get IDENTITY(){return Abt()}static get ZERO(){return Ebt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return _T}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Cbt)}fromObject(t){return this.check()}fromQuaternion(t){return Pbt(this,t),this.check()}set(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=i,this[2]=a,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=s,this[8]=u,this.check()}determinant(){return Sbt(this)}transpose(){return bbt(this,this),this.check()}invert(){return wbt(this,this),this.check()}multiplyLeft(t){return zI(this,t,this),this.check()}multiplyRight(t){return zI(this,this,t),this.check()}rotate(t){return kbt(this,this,t),this.check()}scale(t){return Array.isArray(t)?BI(this,this,t):BI(this,this,[t,t]),this.check()}translate(t){return Tbt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=ibt(r||[-0,-0],t,this);break;case 3:n=KB(r||[-0,-0,-0],t,this);break;case 4:n=YB(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zd(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let Nv,Fv;function Ebt(){return Nv||(Nv=new Lr([0,0,0,0,0,0,0,0,0]),Object.freeze(Nv)),Nv}function Abt(){return Fv||(Fv=new Lr,Object.freeze(Fv)),Fv}function Mbt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xbt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function yT(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],g=t[15],y=r*a-n*s,b=r*l-i*s,w=r*u-o*s,T=n*l-i*a,S=n*u-o*a,k=i*u-o*l,x=c*v-f*p,A=c*m-h*p,I=c*g-d*p,L=f*m-h*v,N=f*g-d*v,z=h*g-d*m,V=y*z-b*N+w*L+T*I-S*A+k*x;return V?(V=1/V,e[0]=(a*z-l*N+u*L)*V,e[1]=(i*N-n*z-o*L)*V,e[2]=(v*k-m*S+g*T)*V,e[3]=(h*S-f*k-d*T)*V,e[4]=(l*I-s*z-u*A)*V,e[5]=(r*z-i*I+o*A)*V,e[6]=(m*w-p*k-g*b)*V,e[7]=(c*k-h*w+d*b)*V,e[8]=(s*N-a*I+u*x)*V,e[9]=(n*I-r*N-o*x)*V,e[10]=(p*S-v*w+g*y)*V,e[11]=(f*w-c*S-d*y)*V,e[12]=(a*A-s*L-l*x)*V,e[13]=(r*L-n*A+i*x)*V,e[14]=(v*b-p*T-m*y)*V,e[15]=(c*T-f*b+h*y)*V,e):null}function Ibt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=t*s-r*o,y=t*a-n*o,b=t*l-i*o,w=r*a-n*s,T=r*l-i*s,S=n*l-i*a,k=u*p-c*d,x=u*v-f*d,A=u*m-h*d,I=c*v-f*p,L=c*m-h*p,N=f*m-h*v;return g*N-y*L+b*I+w*A-T*x+S*k}function nu(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=r[0],w=r[1],T=r[2],S=r[3];return e[0]=b*n+w*a+T*f+S*v,e[1]=b*i+w*l+T*h+S*m,e[2]=b*o+w*u+T*d+S*g,e[3]=b*s+w*c+T*p+S*y,b=r[4],w=r[5],T=r[6],S=r[7],e[4]=b*n+w*a+T*f+S*v,e[5]=b*i+w*l+T*h+S*m,e[6]=b*o+w*u+T*d+S*g,e[7]=b*s+w*c+T*p+S*y,b=r[8],w=r[9],T=r[10],S=r[11],e[8]=b*n+w*a+T*f+S*v,e[9]=b*i+w*l+T*h+S*m,e[10]=b*o+w*u+T*d+S*g,e[11]=b*s+w*c+T*p+S*y,b=r[12],w=r[13],T=r[14],S=r[15],e[12]=b*n+w*a+T*f+S*v,e[13]=b*i+w*l+T*h+S*m,e[14]=b*o+w*u+T*d+S*g,e[15]=b*s+w*c+T*p+S*y,e}function S1(e,t,r){var n=r[0],i=r[1],o=r[2],s,a,l,u,c,f,h,d,p,v,m,g;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],m=t[10],g=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=m,e[11]=g,e[12]=s*n+c*i+p*o+t[12],e[13]=a*n+f*i+v*o+t[13],e[14]=l*n+h*i+m*o+t[14],e[15]=u*n+d*i+g*o+t[15]),e}function OC(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Lbt(e,t,r,n){var i=n[0],o=n[1],s=n[2],a=Math.hypot(i,o,s),l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F;return a<Kd?null:(a=1/a,i*=a,o*=a,s*=a,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],m=t[5],g=t[6],y=t[7],b=t[8],w=t[9],T=t[10],S=t[11],k=i*i*c+u,x=o*i*c+s*l,A=s*i*c-o*l,I=i*o*c-s*l,L=o*o*c+u,N=s*o*c+i*l,z=i*s*c+o*l,V=o*s*c-i*l,F=s*s*c+u,e[0]=f*k+v*x+b*A,e[1]=h*k+m*x+w*A,e[2]=d*k+g*x+T*A,e[3]=p*k+y*x+S*A,e[4]=f*I+v*L+b*N,e[5]=h*I+m*L+w*N,e[6]=d*I+g*L+T*N,e[7]=p*I+y*L+S*N,e[8]=f*z+v*V+b*F,e[9]=h*z+m*V+w*F,e[10]=d*z+g*V+T*F,e[11]=p*z+y*V+S*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rV(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=s*i+c*n,e[6]=a*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-s*n,e[10]=f*i-a*n,e[11]=h*i-l*n,e}function Obt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=s*i-c*n,e[2]=a*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=s*n+c*i,e[10]=a*n+f*i,e[11]=l*n+h*i,e}function nV(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=s*i+c*n,e[2]=a*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-s*n,e[6]=f*i-a*n,e[7]=h*i-l*n,e}function Rbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,u,c),e}function Dbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[1]=c+g,e[2]=h-m,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nbt(e,t,r,n,i,o,s){var a=1/(r-t),l=1/(i-n),u=1/(o-s);return e[0]=o*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(s+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*u,e[15]=0,e}function Fbt(e,t,r,n,i){var o=1/Math.tan(t/2),s;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(s=1/(n-i),e[10]=(i+n)*s,e[14]=2*i*n*s):(e[10]=-1,e[14]=-2*n),e}var $bt=Fbt;function zbt(e,t,r,n,i,o,s){var a=1/(t-r),l=1/(n-i),u=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(s+o)*u,e[15]=1,e}var Bbt=zbt;function Vbt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p=t[0],v=t[1],m=t[2],g=n[0],y=n[1],b=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Kd&&Math.abs(v-T)<Kd&&Math.abs(m-S)<Kd?Mbt(e):(c=p-w,f=v-T,h=m-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-b*f,o=b*c-g*h,s=g*f-y*c,d=Math.hypot(i,o,s),d?(d=1/d,i*=d,o*=d,s*=d):(i=0,o=0,s=0),a=f*s-h*o,l=h*i-c*s,u=c*o-f*i,d=Math.hypot(a,l,u),d?(d=1/d,a*=d,l*=d,u*=d):(a=0,l=0,u=0),e[0]=i,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+s*m),e[13]=-(a*p+l*v+u*m),e[14]=-(c*p+f*v+h*m),e[15]=1,e)}function Ubt(){var e=new ji(4);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Wbt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function RC(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function jbt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Gbt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function Hbt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e[2]=i*s,e[3]=o*s,e}function Xbt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ybt(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e[3]=a+n*(r[3]-a),e}function Bf(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,e}function qbt(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2],u=r[3],c=u*n+a*o-l*i,f=u*i+l*n-s*o,h=u*o+s*i-a*n,d=-s*n-a*i-l*o;return e[0]=c*u+d*-s+f*-l-h*-a,e[1]=f*u+d*-a+h*-s-c*-l,e[2]=h*u+d*-l+c*-a-f*-s,e[3]=t[3],e}(function(){var e=Ubt();return function(t,r,n,i,o,s){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}})();var bT;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(bT||(bT={}));const Zbt=45*Math.PI/180,Kbt=1,W2=.1,j2=500,Jbt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class qr extends eV{static get IDENTITY(){return t2t()}static get ZERO(){return Qbt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return bT}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=m,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=s,this[6]=c,this[7]=p,this[8]=n,this[9]=a,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Jbt)}fromObject(t){return this.check()}fromQuaternion(t){return Dbt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:s=W2,far:a=j2}=t;return a===1/0?e2t(this,r,n,i,o,s):Nbt(this,r,n,i,o,s,a),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Vbt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:s=W2,far:a=j2}=t;return Bbt(this,r,n,i,o,s,a),this.check()}orthographic(t){const{fovy:r=Zbt,aspect:n=Kbt,focalDistance:i=1,near:o=W2,far:s=j2}=t;VI(r);const a=r/2,l=i*Math.tan(a),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:s})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return VI(r),$bt(this,r,n,i,o),this.check()}determinant(){return Ibt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*s,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*s,t}transpose(){return xbt(this,this),this.check()}invert(){return yT(this,this),this.check()}multiplyLeft(t){return nu(this,t,this),this.check()}multiplyRight(t){return nu(this,this,t),this.check()}rotateX(t){return rV(this,this,t),this.check()}rotateY(t){return Obt(this,this,t),this.check()}rotateZ(t){return nV(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return Lbt(this,this,t,r),this.check()}scale(t){return OC(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return S1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Bf(r||[-0,-0,-0,-0],t,this),Zd(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=obt(r||[-0,-0],t,this);break;case 3:i=IC(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zd(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=sbt(r||[-0,-0],t,this);break;case 3:n=XB(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zd(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let $v,zv;function Qbt(){return $v||($v=new qr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze($v)),$v}function t2t(){return zv||(zv=new qr,Object.freeze(zv)),zv}function VI(e){if(e>Math.PI*2)throw Error("expected radians")}function e2t(e,t,r,n,i,o){const s=2*o/(r-t),a=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function UI(){var e=new ji(4);return ji!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function r2t(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function iV(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function WI(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+s*a+i*u-o*l,e[1]=i*c+s*l+o*a-n*u,e[2]=o*c+s*u+n*l-i*a,e[3]=s*c-n*a-i*l-o*u,e}function n2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-n*a,e}function i2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*a,e[1]=i*l+s*a,e[2]=o*l+n*a,e[3]=s*l-i*a,e}function o2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*a,e[1]=i*l-n*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e}function s2t(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function mm(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,m;return d=i*l+o*u+s*c+a*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Kd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(v=1-n,m=n),e[0]=v*i+m*l,e[1]=v*o+m*u,e[2]=v*s+m*c,e[3]=v*a+m*f,e}function a2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o,a=s?1/s:0;return e[0]=-r*a,e[1]=-n*a,e[2]=-i*a,e[3]=o*a,e}function l2t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function oV(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[s*3+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+s]-t[s*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[s]=(t[s*3+i]+t[i*3+s])*n}return e}var u2t=Wbt,c2t=RC,f2t=Xbt,h2t=Ybt,d2t=jbt,p2t=Gbt,sV=Hbt,v2t=function(){var e=qB(),t=$I(1,0,0),r=$I(0,1,0);return function(n,i,o){var s=ZB(i,o);return s<-.999999?(gm(e,t,i),tV(e)<1e-6&&gm(e,r,i),dbt(e,e),iV(n,e,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(gm(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+s,sV(n,n))}}();(function(){var e=UI(),t=UI();return function(r,n,i,o,s,a){return mm(e,n,s,a),mm(t,i,o,a),mm(r,e,t,2*a*(1-a)),r}})();(function(){var e=ybt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],sV(t,oV(t,e))}})();const g2t=[0,0,0,1];class jI extends xC{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return oV(this,t),this.check()}fromAxisRotation(t,r){return iV(this,t,r),this.check()}identity(){return r2t(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}len(){return d2t(this)}lengthSquared(){return p2t(this)}dot(t){return f2t(this,t)}rotationTo(t,r){return v2t(this,t,r),this.check()}add(t){return u2t(this,this,t),this.check()}calculateW(){return s2t(this,this),this.check()}conjugate(){return l2t(this,this),this.check()}invert(){return a2t(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(h2t(this,t,r,n),this.check())}multiplyRight(t){return WI(this,this,t),this.check()}multiplyLeft(t){return WI(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return n2t(this,this,t),this.check()}rotateY(t){return i2t(this,this,t),this.check()}rotateZ(t){return o2t(this,this,t),this.check()}scale(t){return c2t(this,this,t),this.check()}slerp(t,r,n){let i,o,s;switch(arguments.length){case 1:({start:i=g2t,target:o,ratio:s}=t);break;case 2:i=this,o=t,s=r;break;default:i=t,o=r,s=n}return mm(this,i,o,s),this.check()}transformVector4(t,r=new LC){return qbt(r,t,this),Zd(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const aV={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},GI=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,m2t={lightSources:{}};function G2(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function _2t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=G2(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=G2(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=G2(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function lV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m2t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},_2t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return lV({lightSources:t})}return{}}const y2t={name:"lights",vs:GI,fs:GI,getUniforms:lV,defines:{MAX_LIGHTS:3}},b2t=new Uint8Array([0,255,255,255]),w2t={pickingSelectedColor:null,pickingHighlightColor:b2t,pickingActive:!1,pickingAttribute:!1};function S2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w2t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const T2t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,k2t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,P2t={name:"picking",vs:T2t,fs:k2t,getUniforms:S2t},C2t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,E2t={};function A2t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function M2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E2t;if(!("material"in e))return{};const{material:t}=e;return t?A2t(t):{lighting_uEnabled:!1}}const x2t={name:"gouraud-lighting",dependencies:[y2t],vs:C2t,defines:{LIGHTING_VERTEX:1},getUniforms:M2t},I2t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,L2t={name:"transform",vs:I2t,fs:null};class a0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new a0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(b=>this._getHash(b.name)).sort(),d=s.map(b=>this._getHash(b)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),m=[],g=[];for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));for(const b of v)g.push(this._getHash(b)),g.push(this._getHash(o[b]));const y="".concat(c,"/").concat(f,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(g.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[y]){const b=Fyt(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new RB(this.gl,{hash:y,vs:b.vs,fs:b.fs,varyings:s,bufferMode:a}),this._getUniforms[y]=b.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],l=a.name;r[i++]=a,n[l]=!0}for(let o=0,s=t.length;o<s;++o){const a=t[o],l=a.name;n[l]||(r[i++]=a,n[l]=!0)}return r.length=i,r}}const O2t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function R2t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const s=t.attributes[o],a=D2t(o,r);if(o==="indices")i=s;else if(s.constant)n[a]=s.value;else{const l=s.value,u={...s};delete u.value,n[a]=[new Ce(e,l),u],N2t(o,u)}}if(i){const o=i.value||i;wt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Ce(e,{data:o,target:34963}),s]}return n}function D2t(e,t){const{attributeMap:r=O2t}=t||{};return r&&r[e]||e}function N2t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}wt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const dc=2,F2t=1e4,$2t="Model needs drawMode and vertexCount",HI=()=>{},z2t={};class ks{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Fa("model")}=r;wt(D_(t)),this.id=n,this.gl=t,this.id=r.id||Fa("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||a0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},wt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),$2t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return wt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return wt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=R2t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(gf(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return PC(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Rt.priority>=dc&&(u=this._logDrawCallStart(dc));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Rt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:m}=this,{onBeforeRender:g=HI,onAfterRender:y=HI}=this.props;g(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(z2t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:s,isIndexed:f,indexType:h,isInstanced:v,instanceCount:m,offset:f?d:0}));return y(),Rt.priority>=dc&&this._logDrawCallEnd(u,l,n),b}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}wt(r instanceof RB,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new J_t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Ce&&r.delete()}}_setAnimationProps(t){this.animated&&wt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(gf(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new DB(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:F2t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Rt.group(dc,">>> DRAWING MODEL ".concat(this.id),{collapsed:Rt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=eyt({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:l}=EI({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=EI({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Rt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Rt.log("UNUSED UNIFORMS",Object.keys(a))();const f=nyt(this.vertexArray.configuration);Rt.table(t,o)(),Rt.table(t,s)(),Rt.table(t+1,f)(),i&&i.log({logLevel:dc,message:"Rendered to ".concat(i.id)}),Rt.groupEnd(dc)()}}class B2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Ce?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&wt(ne(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const s=r[o],{byteLength:a,usage:l,accessor:u}=s;n[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new DB(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],wt(n[o]instanceof Ce)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Ce(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const V2t="transform_uSampler_",T1="transform_uSize_",XI="transform_position";function U2t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,s=Object.keys(r).length,a=null;const l={};let u=t,c={};if(s>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(s>0){const m=X2t(d,r);if(m){const{updatedLine:g,inject:y}=m;h[p]=g,c=vT([c,y]),Object.assign(l,m.samplerTextureMap),s--}}n&&!a&&(a=H2t(d,n))}),n){wt(i);const d="".concat(T1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(XI," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(XI,`, 0, 1.);
`);c=vT([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:a,inject:c,samplerTextureMap:l}}function W2t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,s;r&&({width:o,height:s}=n,i["".concat(T1).concat(r)]=[o,s]);for(const a in t)({width:o,height:s}=t[a]),i["".concat(T1).concat(a)]=[o,s];return i}function j2t(e){return UB(e,["attribute","in"])}function G2t(e){const t="".concat(V2t).concat(e),r="".concat(T1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function H2t(e,t){const r=UB(e,["varying","out"]);return r&&r.name===t?r.type:null}function X2t(e,t){const r={},n=j2t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const s="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:u}=G2t(o),c=Hyt(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(l,").").concat(c,`;
`);return r[a]=o,{updatedLine:s,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const Y2t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},q2t="transform_output";class Z2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},r,t.attributes),a=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=n[h]}this._setSourceTextureParameters();const c=W2t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=F_(r);if(!t)return n;const i=n.constructor,o=Xyt(this.targetTextureType),s=new i(n.length*o/4);let a=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)s[a++]=n[l+u];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof Sn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Ce(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:s,height:a}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:s,height:a})):t.framebuffer=new lr(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(Y2t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=xB(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:l}=U2t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=vT([t.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=l;const c=t._fs||WB({version:LB(i),input:this.targetTextureVarying,inputType:s,output:q2t}),f=this.hasSourceTextures||this.targetTextureVarying?[L2t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class DC{static isSupported(t){return ne(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();wt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new ks(r,Object.assign({},t,{fs:t.fs||WB({version:LB(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){K2t(r)&&(this.bufferTransform=new B2t(t,r)),J2t(r)&&(this.textureTransform=new Z2t(t,r)),wt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function K2t(e){return!!(!gf(e.feedbackBuffers)||!gf(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function J2t(e){return!!(!gf(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const YI={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Nu{static get DRAW_MODE(){return YI}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Fa("geometry"),drawMode:n=YI.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,wt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(wt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:s,size:a,constant:l}=o;!l&&s&&a>=1&&(n=Math.min(n,s.length/a))}return wt(Number.isFinite(n)),n}}let Q2t=1,twt=1;class uV{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,s=Q2t++,a={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=twt++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const cV="#define SMOOTH_EDGE_RADIUS 0.5",ewt=`
`.concat(cV,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),rwt=`
`.concat(cV,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),nwt={name:"geometry",vs:ewt,fs:rwt},ae={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ae,"IDENTITY",{get:()=>(qt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Oi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},$a={common:0,meters:1,pixels:2},qI={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},l0={DRAW:"draw",MASK:"mask"},iwt=Object.keys(ae).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ae[e],";")).join(""),owt=Object.keys(Oi).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Oi[e],";")).join(""),swt=Object.keys($a).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat($a[e],";")).join(""),awt="".concat(iwt,`
`).concat(owt,`
`).concat(swt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function lwt(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function u0(e){let t={},r;return n=>{for(const i in n)if(!lwt(n[i],t[i])){r=e(n),t=n;break}return r}}const ZI=[0,0,0,0],uwt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],fV=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],cwt=[0,0,0],hV=[0,0,0],fwt=u0(pwt);function dV(e,t,r=hV){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===ae.LNGLAT_OFFSETS||t===ae.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Oi.WEB_MERCATOR:(t===ae.LNGLAT||t===ae.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Oi.WEB_MERCATOR_AUTO_OFFSET:t===ae.LNGLAT?n=i:t===ae.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Oi.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Oi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function hwt(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=ZI,l=ZI,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=dV(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Bf([],l,s),o=n||o,s=nu([],i,o),s=nu([],s,uwt)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function dwt({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=ae.DEFAULT,coordinateOrigin:i=hV,autoWrapLongitude:o=!1}){n===ae.DEFAULT&&(n=e.isGeospatial?ae.LNGLAT:ae.CARTESIAN);const s=fwt({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=r||fV,s}function pwt({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=hwt(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Bf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:cwt,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:fV,project_uCameraPosition:a};if(u){const p=e.getDistanceScales(u);switch(r){case ae.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ae.LNGLAT:case ae.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ae.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const vwt={};function gwt(e=vwt){return"viewport"in e?dwt(e):{}}const NC={name:"project",dependencies:[Zyt,nwt],vs:awt,getUniforms:gwt},mwt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Fu={name:"project32",dependencies:[NC],vs:mwt};function _wt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tf(e,t){const r=Bf([],t,e);return RC(r,r,1/r[3]),r}function KI(e,t){const r=e%t;return r<0?t+r:r}function wT(e,t,r){return e<t?t:e>r?r:e}function ywt(e){return Math.log(e)*Math.LOG2E}const FC=Math.log2||ywt;function Ps(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Ri=Math.PI,pV=Ri/4,zi=Ri/180,ST=180/Ri,Lp=512,TT=4003e4,Bv=85.051129,bwt=1.5;function wwt(e){return FC(e)}function za(e){const[t,r]=e;Ps(Number.isFinite(t)),Ps(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*zi,i=r*zi,o=Lp*(n+Ri)/(2*Ri),s=Lp*(Ri+Math.log(Math.tan(pV+i*.5)))/(2*Ri);return[o,s]}function _f(e){const[t,r]=e,n=t/Lp*(2*Ri)-Ri,i=2*(Math.atan(Math.exp(r/Lp*(2*Ri)-Ri))-pV);return[n*ST,i*ST]}function Swt(e){const{latitude:t}=e;Ps(Number.isFinite(t));const r=Math.cos(t*zi);return wwt(TT*r)-9}function kT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Ps(Number.isFinite(t)&&Number.isFinite(r));const i=Lp,o=Math.cos(t*zi),s=i/360,a=s/o,l=i/TT/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(n){const c=zi*Math.tan(t*zi)/o,f=s*c/2,h=i/TT*c,d=h/a*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function vV(e,t){const[r,n,i]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:u}=kT({longitude:r,latitude:n,highPrecision:!0}),c=za(e);c[0]+=o*(l[0]+u[0]*s),c[1]+=s*(l[1]+u[1]*s);const f=_f(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function Twt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:s}=e,a=_wt();S1(a,a,[0,0,-i]),rV(a,a,-r*zi),nV(a,a,n*zi);const l=o/t;return OC(a,a,[l,l,l]),s&&S1(a,a,hbt([],s)),a}function kwt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=k1(bwt)}=e;n!==void 0&&(c=k1(n));const f=c*zi,h=i*zi,d=gV(c);let p=d;s&&(p+=s[2]*a/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),m=Math.sin(v)*p/Math.sin(wT(Math.PI/2-h-v,.01,Math.PI-.01)),g=Math.sin(h)*m+p,y=p*10,b=Math.min(g*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:b}}function k1(e){return 2*Math.atan(.5/e)*ST}function gV(e){return .5/Math.tan(.5*e*zi)}function mV(e,t){const[r,n,i=0]=e;return Ps(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),tf(t,[r,n,i,1])}function $_(e,t,r=0){const[n,i,o]=e;if(Ps(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return tf(t,[n,i,o,1]);const s=tf(t,[n,i,0,1]),a=tf(t,[n,i,1,1]),l=s[2],u=a[2],c=l===u?0:((r||0)-l)/(u-l);return HB([],s,a,c)}function _V(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[u,c]]=n,f=Pwt(e.padding),h=za([a,wT(c,-Bv,Bv)]),d=za([u,wT(l,-Bv,Bv)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(s[0])*2,r-f.top-f.bottom-Math.abs(s[1])*2];Ps(v[0]>0&&v[1]>0);const m=v[0]/p[0],g=v[1]/p[1],y=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/g,w=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+b],T=_f(w),S=Math.min(o,FC(Math.abs(Math.min(m,g))));return Ps(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function Pwt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Ps(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const JI=Math.PI/180;function Cwt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},s=i([0,n],o),a=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*JI:Math.atan(.5/e.altitude),f=(90-e.pitch)*JI;return c>f-.01?(l=QI(e,0,t),u=QI(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[s,a,u,l]}function QI(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=tf(n,[t,0,1,1]),o=tf(n,[t,e.height,1,1]),a=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=HB([],i,o,a),u=_f(l);return u.push(r),u}const tL=512;function Ewt(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=e;(i<-180||i>180)&&(i=KI(i+180,360)-180),(a<-180||a>180)&&(a=KI(a+180,360)-180);const l=FC(r/tL);if(s<=l)s=l,o=0;else{const u=r/2/Math.pow(2,s),c=_f([0,u])[1];if(o<c)o=c;else{const f=_f([0,tL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:s,pitch:n,bearing:a}}const Awt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Mwt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,xwt=u0(Dwt),Iwt=u0(Nwt),Lwt=[0,0,0,1],Owt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Rwt(e,t){const[r,n,i]=e,o=$_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function Dwt({viewport:e,center:t}){return new qr(e.viewProjectionMatrix).invert().transform(t)}function Nwt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(s=>Rwt(s,n));for(const s of t){const a=s.clone().translate(new kt(e.center).negate()),l=o.map(c=>a.transform(c)),u=new qr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(s))}return r}function Fwt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||Lwt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=xwt({viewport:e.viewport,center:t.project_uCenter}),o=[],s=Iwt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let a=0;a<e.shadowMatrices.length;a++){const l=s[a],u=l.clone().translate(new kt(e.viewport.center).negate());t.project_uCoordinateSystem===ae.LNGLAT&&t.project_uProjectionMode===Oi.WEB_MERCATOR?(s[a]=u,o[a]=i):(s[a]=l.clone().multiplyRight(Owt),o[a]=u.transform(i))}for(let a=0;a<s.length;a++)n["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],n["shadow_uProjectCenters[".concat(a,"]")]=o[a],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(a)]=e.shadowMaps[a]:n["shadow_uShadowMap".concat(a)]=e.dummyShadowMap;return n}const H2={name:"shadow",dependencies:[NC],vs:Awt,fs:Mwt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?Fwt(e,t):{}},$u={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...P2t},$wt=[NC],zwt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Bwt(e){const t=a0.getDefaultProgramManager(e);for(const r of $wt)t.addDefaultModule(r);for(const r of zwt)t.addShaderHook(r);return t}const Vwt=[255,255,255],Uwt=1;let Wwt=0;class jwt{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","ambient");const{color:r=Vwt}=t,{intensity:n=Uwt}=t;this.id=t.id||"ambient-".concat(Wwt++),this.color=r,this.intensity=n}}const Gwt=[255,255,255],Hwt=1,Xwt=[0,0,-1];let Ywt=0;class eL{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","directional"),P(this,"direction",void 0),P(this,"shadow",void 0);const{color:r=Gwt}=t,{intensity:n=Hwt}=t,{direction:i=Xwt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(Ywt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new kt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class qwt{constructor(t,r={id:"pass"}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class z_ extends qwt{constructor(...t){super(...t),P(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return Ts(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&Kwt(u),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];s(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const m=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(m)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){const l=[],u=yV(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,s,n,a),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:s,view:a},l){const u=Zwt(t,{moduleParameters:n,target:o,viewport:s});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;ai(t,{scissorTest:!0,scissor:u},()=>PC(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};Ts(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:m}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=s;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:m})}catch(g){h.raiseError(g,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let s=t.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(r))return!1;r.layer=s,s=s.parent}if(n){const a=r.layer.id;if(a in i||(i[a]=n(r)),!i[a])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const s=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:vf(this.gl)});if(r)for(const l of r){var a;Object.assign(s,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,t))}return Object.assign(s,this.getModuleParameters(t,r),i)}}function yV(e=0,t={}){const r={},n=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||yV(t[l],t);u=c(i,o),r[a]=c}else Number.isFinite(s)?(u=s+(t[l]||0),r[a]=null):u=e;return o&&u>=e&&(e=u+1),t[a]=u,u};return n}function Zwt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||vf(e),s=i?r.height:e.drawingBufferHeight,a=n;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function Kwt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;Ts(e,{viewport:[0,0,t,r]}),e.clear(16640)}class Jwt extends z_{constructor(t,r){super(t,r),P(this,"shadowMap",void 0),P(this,"depthBuffer",void 0),P(this,"fbo",void 0),this.shadowMap=new Sn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new $c(t,{format:33189,width:1,height:1}),this.fbo=new lr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;ai(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=vf(this.gl),o=n.width*i,s=n.height*i;(o!==r.width||s!==r.height)&&r.resize({width:o,height:s}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Qwt={color:[255,255,255],intensity:1},rL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],tSt=[0,0,0,200/255];class bV{constructor(t={}){P(this,"id","lighting-effect"),P(this,"props",null),P(this,"shadowColor",tSt),P(this,"shadow",void 0),P(this,"ambientLight",null),P(this,"directionalLights",[]),P(this,"pointLights",[]),P(this,"shadowPasses",[]),P(this,"shadowMaps",[]),P(this,"dummyShadowMap",null),P(this,"programManager",void 0),P(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=a0.getDefaultProgramManager(t),H2&&this.programManager.addDefaultModule(H2)),this.dummyShadowMap||(this.dummyShadowMap=new Sn(t,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(H2),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new qr().lookAt({eye:new kt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new Jwt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new jwt(Qwt),this.directionalLights.push(new eL(rL[0]),new eL(rL[1])))}}class eSt{constructor(t={}){P(this,"_pool",[]),P(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,a,f);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const s=this._pool,a=t.BYTES_PER_ELEMENT*o,l=s.findIndex(u=>u.byteLength>=a);if(l>=0){const u=new t(s.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(s=>s.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const yf=new eSt;function yd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rSt(e,t){const r=e%t;return r<0?t+r:r}function nSt(e){return[e[12],e[13],e[14]]}function iSt(e){return{left:pc(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:pc(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:pc(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:pc(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:pc(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:pc(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const nL=new kt;function pc(e,t,r,n){nL.set(e,t,r);const i=nL.len();return{distance:n/i,normal:new kt(-e/i,-t/i,-r/i)}}function oSt(e){return e-Math.fround(e)}let $h;function X2(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;$h=yf.allocate($h,o,{type:Float32Array,size:r*2});let s=n,a=0;for(;s<i;){for(let l=0;l<r;l++){const u=e[s++];$h[a+l]=u,$h[a+l+r]=oSt(u)}a+=r*2}return $h.subarray(0,o*r*2)}const sSt=Math.PI/180,aSt=yd(),iL=[0,0,0],lSt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function uSt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:s,far:a}){const l=e/t,u=r?new qr().orthographic({fovy:n,aspect:l,focalDistance:i,near:s,far:a}):new qr().perspective({fovy:n,aspect:l,near:s,far:a});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=xr((c+e-f)/2,0,e)-e/2,v=xr((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Ha{constructor(t={}){P(this,"id",void 0),P(this,"x",void 0),P(this,"y",void 0),P(this,"width",void 0),P(this,"height",void 0),P(this,"isGeospatial",void 0),P(this,"zoom",void 0),P(this,"focalDistance",void 0),P(this,"position",void 0),P(this,"modelMatrix",void 0),P(this,"distanceScales",void 0),P(this,"scale",void 0),P(this,"center",void 0),P(this,"cameraPosition",void 0),P(this,"projectionMatrix",void 0),P(this,"viewMatrix",void 0),P(this,"viewMatrixUncentered",void 0),P(this,"viewMatrixInverse",void 0),P(this,"viewProjectionMatrix",void 0),P(this,"pixelProjectionMatrix",void 0),P(this,"pixelUnprojectionMatrix",void 0),P(this,"resolution",void 0),P(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||lSt,this.focalDistance=t.focalDistance||1,this.position=t.position||iL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Oi.WEB_MERCATOR:Oi.WEB_MERCATOR_AUTO_OFFSET:Oi.IDENTITY}equals(t){return t instanceof Ha?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Lo(t.projectionMatrix,this.projectionMatrix)&&Lo(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=mV(n,this.pixelProjectionMatrix),[o,s]=i,a=r?s:this.height-s;return t.length===2?[o,a]:[o,a,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=$_([i,a,s],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=za(t);return r[1]=xr(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?_f(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),s=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],s[0]),Math.min(n[1],i[1],o[1],s[1]),Math.max(n[0],i[0],o[0],s[0]),Math.max(n[1],i[1],o[1],s[1])]}getDistanceScales(t){return t?kT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,iSt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Swt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||kT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:s}=t;let a=iL;if(o&&(a=s?new qr(s).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new kt(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:r=aSt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new qr().multiplyRight(r).translate(new kt(this.center).negate()),this.projectionMatrix=n||uSt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*sSt,focalDistance:c,padding:u,near:a,far:l});const f=yd();nu(f,f,this.projectionMatrix),nu(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=yT([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=nSt(this.viewMatrixInverse);const h=yd(),d=yd();OC(h,h,[this.width/2,-this.height/2,1]),S1(h,h,[1,-1,0]),nu(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=yT(yd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||qt.warn("Pixel project matrix not invertible")()}}P(Ha,"displayName","Viewport");const cSt=512,fSt=4003e4,hSt=Math.PI/180;function oL(e){const t=Math.cos(e*hSt);return cSt/fSt/t}class Fo extends Ha{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:m=1.5}=t;const g=Math.pow(2,i);p=p||1,v=v||1;let y,b=null;c?(m=c[5]/2,y=k1(m)):(t.fovy?(y=t.fovy,m=gV(y)):y=k1(m),b=kwt({width:p,height:v,pitch:o,fovy:y,nearZMultiplier:a,farZMultiplier:l}));let w=Twt({height:v,pitch:o,bearing:s,scale:g,altitude:m});h&&(w=new qr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...b,fovy:y,focalDistance:m}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"pitch",void 0),P(this,"bearing",void 0),P(this,"altitude",void 0),P(this,"fovy",void 0),P(this,"orthographic",void 0),P(this,"_subViewports",void 0),P(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=m,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Fo({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*oL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/oL(n);return[r,n,i]}addMetersToLngLat(t,r){return vV(t,r)}panByPosition(t,r){const n=$_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=w1([],i,GB([],n)),s=w1([],this.center,o),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(t={}){const r=Cwt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:s,zoom:a}=_V({width:n,height:i,bounds:t,...r});return new Fo({width:n,height:i,longitude:o,latitude:s,zoom:a})}}P(Fo,"displayName","WebMercatorViewport");function Y2(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Fo){const[i,o,s=0]=e,a=t.getDistanceScales([i,o]);n[2]=s*a.unitsPerMeter[2]}return n}function dSt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return i===ae.DEFAULT&&(i=t.isGeospatial?ae.LNGLAT:ae.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function wV(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[s,a,l=0]=e;switch(r&&([s,a,l]=Bf([],[s,a,l,1],r)),n){case ae.LNGLAT:return Y2([s,a,l],t,o);case ae.LNGLAT_OFFSETS:return Y2([s+i[0],a+i[1],l+(i[2]||0)],t,o);case ae.METER_OFFSETS:return Y2(vV(i,[s,a,l]),t,o);case ae.CARTESIAN:default:return t.isGeospatial?[s+i[0],a+i[1],l+i[2]]:t.projectPosition([s,a,l])}}function pSt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=dSt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=dV(r,n,i),f=wV(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:c});if(c){const h=r.projectPosition(l||u);QB(f,f,h)}return f}const Ic={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},P1=Symbol.for("component"),ef=Symbol.for("asyncPropDefaults"),_u=Symbol.for("asyncPropOriginal"),ba=Symbol.for("asyncPropResolved");function B_(e,t=()=>!0){return Array.isArray(e)?SV(e,t,[]):t(e)?[e]:[]}function SV(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?SV(i,t,r):t(i)&&r.push(i)}return r}function vSt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let s=0;for(let a=r;s<i;s++)e[a++]=t[s];for(;s<o;)s<o-s?(e.copyWithin(r+s,r,r+s),s*=2):(e.copyWithin(r+s,r,r+o-s),s=o);return e}class gSt{constructor(t,r,n){P(this,"id",void 0),P(this,"context",void 0),P(this,"isLoaded",void 0),P(this,"persistent",void 0),P(this,"_loadCount",0),P(this,"_subscribers",new Set),P(this,"_data",void 0),P(this,"_loader",void 0),P(this,"_error",void 0),P(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=_1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class mSt{constructor({gl:t,protocol:r}){P(this,"protocol",void 0),P(this,"_context",void 0),P(this,"_resources",void 0),P(this,"_consumers",void 0),P(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new gSt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(n,i,a,r),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,s=o[t]=o[t]||{},a=s[r]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),n&&(s[r]=a,a.onChange=i,a.resourceId=n.id,n.subscribe(a))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const _St="layerManager.setLayers",ySt="layerManager.activateViewport";class bSt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){P(this,"layers",void 0),P(this,"context",void 0),P(this,"resourceManager",void 0),P(this,"_lastRenderedLayers",[]),P(this,"_needsRedraw",!1),P(this,"_needsUpdate",!1),P(this,"_nextLayers",null),P(this,"_debug",!1),P(this,"activateViewport",s=>{jr(ySt,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new mSt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&Bwt(t),stats:n||new O_({id:"deck.gl"}),viewport:i||new Ha({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new uV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){jr(_St,this,r,t),this._lastRenderedLayers=t;const n=B_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const s of t)n[s.id]?qt.warn("Multiple old layers with same id ".concat(s.id))():n[s.id]=s;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&qt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Ic.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=Ic.MATCHED,r!==t&&(t.lifecycle=Ic.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=Ic.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Ic.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Vf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Vf(n,i)))return!1}return!0}class wSt{constructor(t){P(this,"width",void 0),P(this,"height",void 0),P(this,"views",void 0),P(this,"viewState",void 0),P(this,"controllers",void 0),P(this,"timeline",void 0),P(this,"_viewports",void 0),P(this,"_viewportMap",void 0),P(this,"_isUpdating",void 0),P(this,"_needsRedraw",void 0),P(this,"_needsUpdate",void 0),P(this,"_eventManager",void 0),P(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const s=n[o];if(s.containsPixel(i)){const a=t.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=B_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Vf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):qt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const s={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,s,a,l),this._viewports.unshift(a)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const SSt=/([0-9]+\.?[0-9]*)(%|px)/;function qs(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=SSt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Zs(e,t){return e.relative?Math.round(e.position*t):e.position}function gr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class TV{constructor(t){P(this,"id",void 0),P(this,"viewportInstance",void 0),P(this,"_x",void 0),P(this,"_y",void 0),P(this,"_width",void 0),P(this,"_height",void 0),P(this,"_padding",void 0),P(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:l}=t||{};gr(!l||l instanceof Ha),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=qs(n),this._y=qs(i),this._width=qs(o),this._height=qs(s),this._padding=a&&{left:qs(a.left||0),right:qs(a.right||0),top:qs(a.top||0),bottom:qs(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Vf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Zs(this._x,t),y:Zs(this._y,r),width:Zs(this._width,t),height:Zs(this._height,r)};return this._padding&&(n.padding={left:Zs(this._padding.left,t),top:Zs(this._padding.top,r),right:Zs(this._padding.right,t),bottom:Zs(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class c0{constructor(t){P(this,"_inProgress",void 0),P(this,"_handle",void 0),P(this,"_timeline",void 0),P(this,"time",void 0),P(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const sL=()=>{},PT={BREAK:1,SNAP_TO_END:2,IGNORE:3},TSt=e=>e,kSt=PT.BREAK;class PSt{constructor(t){P(this,"getControllerState",void 0),P(this,"props",void 0),P(this,"propsInTransition",void 0),P(this,"transition",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:l}}=r,u=l(n/a),c=i.interpolateProps(o,s,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new c0(t.timeline),this.onViewStateChange=t.onViewStateChange||sL,this.onStateChange=t.onStateChange||sL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;i={...n,...o===PT.SNAP_TO_END?s:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===PT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,s=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(s===0)return;const a=o.initializeProps(t,i);this.propsInTransition={};const l={duration:s,easing:r.transitionEasing||TSt,interpolator:o,interruption:r.transitionInterruption||kSt,startProps:a.start,endProps:a.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class CSt{constructor(t){P(this,"_propsToCompare",void 0),P(this,"_propsToExtract",void 0),P(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!Lo(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];gr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const ESt=["longitude","latitude","zoom","bearing","pitch"],ASt=["longitude","latitude","zoom"];class V_ extends CSt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:ESt,required:ASt},super(n.transitionProps),P(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const s=i(t),a=i(r),l=s.unproject(o);n.start.around=o,Object.assign(n.end,{around:a.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=ru(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,ru(t.around,r.around,n)))}return i}}const Ks={transitionDuration:0},MSt=300,Vv=e=>1-(1-e)*(1-e),vc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},El={};class kV{constructor(t){P(this,"props",void 0),P(this,"state",{}),P(this,"transitionManager",void 0),P(this,"eventManager",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"makeViewport",void 0),P(this,"_controllerState",void 0),P(this,"_events",{}),P(this,"_interactionState",{isDragging:!1}),P(this,"_customEvents",[]),P(this,"_eventStartBlocked",null),P(this,"_panMove",!1),P(this,"invertPan",!1),P(this,"dragMode","rotate"),P(this,"inertia",0),P(this,"scrollZoom",!0),P(this,"dragPan",!0),P(this,"dragRotate",!0),P(this,"doubleClickZoom",!0),P(this,"touchZoom",!0),P(this,"touchRotate",!1),P(this,"keyboard",!0),this.transitionManager=new PSt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?MSt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(vc.WHEEL,c&&n),this.toggleEvents(vc.PAN,c&&(i||o)),this.toggleEvents(vc.PINCH,c&&(a||l)),this.toggleEvents(vc.TRIPLE_PAN,c&&l),this.toggleEvents(vc.DOUBLE_TAP,c&&s),this.toggleEvents(vc.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Ks,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let s=2/(1+Math.exp(-Math.abs(o*n)));o<0&&s!==0&&(s=1/s);const a=this.controllerState.zoom({pos:r,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Ks,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ks,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Vv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return El._startPinchRotation=t.rotation,El._lastPinchEvent=t,this.updateViewport(n,Ks,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:El._startPinchRotation-n})}return this.updateViewport(r,Ks,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),El._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=El;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const s=Math.log2(t.scale),a=(s-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,s+a*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Vv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return El._startPinchRotation=null,El._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?a.zoomOut(n).zoomOut(n):a.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?a.zoomIn(n).zoomIn(n):a.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=a.rotateLeft(o),u.isRotating=!0):(l=a.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=a.rotateRight(o),u.isRotating=!0):(l=a.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=a.rotateUp(s),u.isRotating=!0):(l=a.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=a.rotateDown(s),u.isRotating=!0):(l=a.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Ks:t?{...r,transitionInterpolator:new V_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class PV{constructor(t,r){P(this,"_viewportProps",void 0),P(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const aL=5,xSt=1.2;class ISt extends PV{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:b,startZoom:w,normalize:T=!0}=t;gr(Number.isFinite(o)),gr(Number.isFinite(i)),gr(Number.isFinite(s)),super({width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:y,startPitch:b,startZoom:w}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return t?a=this._getNewRotation(t,i,s,o):a={bearing:o+r,pitch:s+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(n);l=xr(l,a,s);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=xr(i,n,r);const{maxPitch:o,minPitch:s,pitch:a}=t;t.pitch=xr(a,s,o);const{normalize:l=!0}=t;return l&&Object.assign(t,Ewt(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],s=t[1]-r[1],a=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;s>0?Math.abs(c-l)>aL&&(h=s/(l-c)*xSt):s<0&&l>aL&&(h=1-a/l),h=xr(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let m=n;return h>0?m=n+h*(p-n):h<0&&(m=n-h*(d-n)),{pitch:m,bearing:v}}}class LSt extends kV{constructor(...t){super(...t),P(this,"ControllerState",ISt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new V_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),P(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class CV extends TV{get ViewportType(){return Fo}get ControllerType(){return LSt}}P(CV,"displayName","MapView");class OSt extends z_{constructor(t,r){super(t,r),P(this,"maskMap",void 0),P(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new Sn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new lr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,ai(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===l0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const RSt=new qr().lookAt({eye:[0,0,1]});function DSt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,s=e/2,a=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=xr((u+e-c)/2,0,e)-e/2,p=xr((f+t-h)/2,0,t)-t/2;o-=d,s-=d,a+=p,l+=p}return new qr().ortho({left:o,right:s,bottom:a,top:l,near:r,far:n})}class NSt extends Ha{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),m=Math.pow(2,f);p={unitsPerMeter:[v/d,m/d,1],metersPerUnit:[d/v,d/m,1]}}super({...t,longitude:void 0,position:a,viewMatrix:RSt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:DSt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=$_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=w1([],i,GB([],n)),s=w1([],this.center,o);return{target:this.unprojectFlat(s)}}}class FSt extends PV{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let u;if(t){let c=(t[0]-i[0])/a;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:s+c*180}}else u={rotationX:o+n,rotationOrbit:s+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const s=this._calculateNewZoom({scale:n,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return xr(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=t;return t.zoom=Array.isArray(i)?[xr(i[0],n,r),xr(i[1],n,r)]:xr(i,n,r),t.rotationX=xr(t.rotationX,s,o),(a<-180||a>180)&&(t.rotationOrbit=rSt(a+180,360)-180),t}}class $St extends FSt{constructor(t){super(t),P(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[s,a]=r;switch(this.zoomAxis){case"X":s=xr(s+o,i,n);break;case"Y":a=xr(a+o,i,n);break;default:let l=Math.min(s+o,a+o);l<i&&(o+=i-l),l=Math.max(s+o,a+o),l>n&&(o+=n-l),s+=o,a+=o}return[s,a]}return xr(r+o,i,n)}}class zSt extends kV{constructor(...t){super(...t),P(this,"ControllerState",$St),P(this,"transition",{transitionDuration:300,transitionInterpolator:new V_(["target","zoom"])}),P(this,"dragMode","pan")}_onPanRotate(){return!1}}class U_ extends TV{get ViewportType(){return NSt}get ControllerType(){return zSt}}P(U_,"displayName","OrthographicView");function BSt({layers:e,viewport:t}){let r=null;for(const o of e){const s=o.getBounds();s&&(r?(r[0]=Math.min(r[0],s[0][0]),r[1]=Math.min(r[1],s[0][1]),r[2]=Math.max(r[2],s[1][0]),r[3]=Math.max(r[3],s[1][1])):r=[s[0][0],s[0][1],s[1][0],s[1][1]])}const n=t.getBounds();if(!r)return n;const i=USt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function VSt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Fo){const{longitude:a,latitude:l,zoom:u}=_V({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Fo({longitude:a,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],s=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new U_({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(s)}})}function USt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class WSt{constructor(){P(this,"id","mask-effect"),P(this,"props",null),P(this,"useInPicking",!0),P(this,"dummyMaskMap",void 0),P(this,"channels",[]),P(this,"masks",null),P(this,"maskPass",void 0),P(this,"maskMap",void 0),P(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Sn(t,{width:1,height:1}));const a=r.filter(f=>f.props.visible&&f.props.operation===l0.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new OSt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:s,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:s}){const a=this.channels[t.index];if(!a)return;const l=t===a||a.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==a.layerBounds[c]);if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,(l||s)&&(this.lastViewport=o,t.bounds=BSt({layers:t.layers,viewport:o}),l||!Lo(t.bounds,a.bounds))){const{maskPass:u,maskMap:c}=this,f=VSt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let s=r[o];if(!s){if(++n>4){qt.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const jSt=new bV;class GSt{constructor(){P(this,"effects",void 0),P(this,"_internalEffects",void 0),P(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Vf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new WSt),t.some(r=>r instanceof bV)||this._internalEffects.push(jSt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class HSt extends z_{shouldDrawLayer(t){return t.props.operation===l0.DRAW}}const lL={blendFunc:[1,0,32771,0],blendEquation:32774};class EV extends z_{constructor(...t){super(...t),P(this,"pickZ",void 0),P(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const g=ai(v,{scissorTest:!0,scissor:[a,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...lL,blend:!p},()=>super.render({target:s,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:m&&YSt.bind(null,m),stats:g}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===l0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,lL),i.blend=!0,i.blendColor=XSt(this._colors,t,n)):i.blend=!1,i}}function XSt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,s=n.get(t);return s?(s.viewports.push(r),o=s.a):(o=n.size+1,o<=255?(s={a:o,layer:t,viewports:[r]},n.set(t,s),i[o]=s):(qt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function YSt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const qSt="deckRenderer.renderLayers";class ZSt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new HSt(t),this.pickLayersPass=new EV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||lr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,jr(qSt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new lr(this.gl),new lr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===n[0]?n[1]:n[0]}}}const KSt={pickedColor:null,pickedObjectIndex:-1};function JSt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+a-n,v=p*p;if(v>c)h+=4*l;else for(let m=0;m<l;m++){if(e[h+3]-1>=0){const y=m+s-r,b=y*y+v;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),m=f/4-v*l;return{...p,pickedColor:d,pickedX:s+m,pickedY:a+v}}qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return KSt}function QSt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),s=o.join(",");if(!r.has(s)){const a=t(o);a?r.set(s,{...a,color:o}):qt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function AV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let s=t[0];t.length>1&&(s=e3t((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let a;if(s){const l=[n-s.x,i-s.y];o!==void 0&&(l[2]=o),a=s.unproject(l)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:a,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function t3t(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=s?s.props.id:null;if(d!==h||a!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=a,r.info=null}}const u=AV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===s&&(h.color=o,h.index=a,h.picked=!0),h=MV({layer:f,info:h,mode:n});const d=h.layer;f===s&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function MV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function e3t(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class r3t{constructor(t){P(this,"gl",void 0),P(this,"pickingFBO",void 0),P(this,"depthFBO",void 0),P(this,"pickLayersPass",void 0),P(this,"layerFilter",void 0),P(this,"lastPickedInfo",void 0),P(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new EV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?n.find(h=>h.id===s):null,u=a&&i.find(h=>h.id===a)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new lr(n),lr.isSupported(n,{colorBufferFloat:!0}))){const i=new lr(n);i.attach({[36064]:new Sn(n,{format:ne(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=vf(this.gl);if(!h)return{result:[],emptyInfo:AV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=L2(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*d),{width:g,height:y}=this.pickingFBO,b=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:g,deviceHeight:y}),w={x:i-s,y:o-s,width:s*2+1,height:s*2+1};let T;const S=[],k=new Set;for(let x=0;x<a;x++){let A;if(b){const L=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:w,effects:f,pass:"picking:".concat(l)});A=JSt({...L,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:b})}else A={pickedColor:null,pickedObjectIndex:-1};let I;A.pickedLayer&&u&&this.depthFBO&&(I=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&x+1<a&&(k.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=t3t({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:I,pixelRatio:d});for(const L of T.values())L.layer&&S.push(L);if(!A.pickedColor)break}for(const x of k)x.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=vf(this.gl),p=L2(this.gl,[i,o],!0),v=p.x,m=p.y+p.height,g=L2(this.gl,[i+s,o+a],!0),y=g.x+g.width,b=g.y,w={x:v,y:b,width:y-v,height:m-b},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:s,height:a},effects:f,pass:"picking:".concat(l)}),S=QSt(T),k=new Map,x=Number.isFinite(u);for(let A=0;A<S.length&&!(x&&u&&k.size>=u);A++){const I=S[A];let L={color:I.pickedColor,layer:null,index:I.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};L=MV({layer:I.pickedLayer,info:L,mode:l}),k.has(L.object)||k.set(L.object,L)}return Array.from(k.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,m=new(u?Float32Array:Uint8Array)(p*v*4);return F_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:m}),{pickedColors:m,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const s=Math.max(0,t-n),a=Math.max(0,r-n),l=Math.min(i,t+n+1)-s,u=Math.min(o,r+n+1)-a;return l<=0||u<=0?null:{x:s,y:a,width:l,height:u}}}const n3t={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class i3t{constructor(t){P(this,"el",null),P(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,n3t),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Uf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],s=r.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function f(O,D,U){return setTimeout(b(O,U),D)}function h(O,D,U){return Array.isArray(O)?(d(O,U[D],U),!0):!1}function d(O,D,U){var H;if(!!O)if(O.forEach)O.forEach(D,U);else if(O.length!==i)for(H=0;H<O.length;)D.call(U,O[H],H,O),H++;else for(H in O)O.hasOwnProperty(H)&&D.call(U,O[H],H,O)}function p(O,D,U){var H="DEPRECATED METHOD: "+D+`
`+U+` AT 
`;return function(){var nt=new Error("get-stack-trace"),Tt=nt&&nt.stack?nt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Jt=t.console&&(t.console.warn||t.console.log);return Jt&&Jt.call(t.console,H,Tt),O.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(D){if(D===i||D===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(D),H=1;H<arguments.length;H++){var nt=arguments[H];if(nt!==i&&nt!==null)for(var Tt in nt)nt.hasOwnProperty(Tt)&&(U[Tt]=nt[Tt])}return U}:v=Object.assign;var m=p(function(D,U,H){for(var nt=Object.keys(U),Tt=0;Tt<nt.length;)(!H||H&&D[nt[Tt]]===i)&&(D[nt[Tt]]=U[nt[Tt]]),Tt++;return D},"extend","Use `assign`."),g=p(function(D,U){return m(D,U,!0)},"merge","Use `assign`.");function y(O,D,U){var H=D.prototype,nt;nt=O.prototype=Object.create(H),nt.constructor=O,nt._super=H,U&&v(nt,U)}function b(O,D){return function(){return O.apply(D,arguments)}}function w(O,D){return typeof O==a?O.apply(D&&D[0]||i,D):O}function T(O,D){return O===i?D:O}function S(O,D,U){d(I(D),function(H){O.addEventListener(H,U,!1)})}function k(O,D,U){d(I(D),function(H){O.removeEventListener(H,U,!1)})}function x(O,D){for(;O;){if(O==D)return!0;O=O.parentNode}return!1}function A(O,D){return O.indexOf(D)>-1}function I(O){return O.trim().split(/\s+/g)}function L(O,D,U){if(O.indexOf&&!U)return O.indexOf(D);for(var H=0;H<O.length;){if(U&&O[H][U]==D||!U&&O[H]===D)return H;H++}return-1}function N(O){return Array.prototype.slice.call(O,0)}function z(O,D,U){for(var H=[],nt=[],Tt=0;Tt<O.length;){var Jt=D?O[Tt][D]:O[Tt];L(nt,Jt)<0&&H.push(O[Tt]),nt[Tt]=Jt,Tt++}return U&&(D?H=H.sort(function(Pr,Qr){return Pr[D]>Qr[D]}):H=H.sort()),H}function V(O,D){for(var U,H,nt=D[0].toUpperCase()+D.slice(1),Tt=0;Tt<o.length;){if(U=o[Tt],H=U?U+nt:D,H in O)return H;Tt++}return i}var F=1;function G(){return F++}function K(O){var D=O.ownerDocument||O;return D.defaultView||D.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,rt="ontouchstart"in t,At=V(t,"PointerEvent")!==i,Nt=rt&&q.test(navigator.userAgent),Pt="touch",Ct="pen",Zt="mouse",Y="kinect",ot=25,J=1,yt=2,Et=4,xt=8,ft=1,vt=2,B=4,j=8,X=16,Q=vt|B,tt=j|X,dt=Q|tt,bt=["x","y"],ct=["clientX","clientY"];function at(O,D){var U=this;this.manager=O,this.callback=D,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(H){w(O.options.enable,[O])&&U.handler(H)},this.init()}at.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(K(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(K(this.element),this.evWin,this.domHandler)}};function it(O){var D,U=O.options.inputClass;return U?D=U:At?D=by:Nt?D=S0:rt?D=wy:D=Qa,new D(O,Ft)}function Ft(O,D,U){var H=U.pointers.length,nt=U.changedPointers.length,Tt=D&J&&H-nt===0,Jt=D&(Et|xt)&&H-nt===0;U.isFirst=!!Tt,U.isFinal=!!Jt,Tt&&(O.session={}),U.eventType=D,Lt(O,U),O.emit("hammer.input",U),O.recognize(U),O.session.prevInput=U}function Lt(O,D){var U=O.session,H=D.pointers,nt=H.length;U.firstInput||(U.firstInput=ee(D)),nt>1&&!U.firstMultiple?U.firstMultiple=ee(D):nt===1&&(U.firstMultiple=!1);var Tt=U.firstInput,Jt=U.firstMultiple,pr=Jt?Jt.center:Tt.center,Pr=D.center=me(H);D.timeStamp=c(),D.deltaTime=D.timeStamp-Tt.timeStamp,D.angle=Qi(pr,Pr),D.distance=Fr(pr,Pr),$t(U,D),D.offsetDirection=Pe(D.deltaX,D.deltaY);var Qr=_e(D.deltaTime,D.deltaX,D.deltaY);D.overallVelocityX=Qr.x,D.overallVelocityY=Qr.y,D.overallVelocity=u(Qr.x)>u(Qr.y)?Qr.x:Qr.y,D.scale=Jt?Ja(Jt.pointers,H):1,D.rotation=Jt?b0(Jt.pointers,H):0,D.maxPointers=U.prevInput?D.pointers.length>U.prevInput.maxPointers?D.pointers.length:U.prevInput.maxPointers:D.pointers.length,Vt(U,D);var eo=O.element;x(D.srcEvent.target,eo)&&(eo=D.srcEvent.target),D.target=eo}function $t(O,D){var U=D.center,H=O.offsetDelta||{},nt=O.prevDelta||{},Tt=O.prevInput||{};(D.eventType===J||Tt.eventType===Et)&&(nt=O.prevDelta={x:Tt.deltaX||0,y:Tt.deltaY||0},H=O.offsetDelta={x:U.x,y:U.y}),D.deltaX=nt.x+(U.x-H.x),D.deltaY=nt.y+(U.y-H.y)}function Vt(O,D){var U=O.lastInterval||D,H=D.timeStamp-U.timeStamp,nt,Tt,Jt,pr;if(D.eventType!=xt&&(H>ot||U.velocity===i)){var Pr=D.deltaX-U.deltaX,Qr=D.deltaY-U.deltaY,eo=_e(H,Pr,Qr);Tt=eo.x,Jt=eo.y,nt=u(eo.x)>u(eo.y)?eo.x:eo.y,pr=Pe(Pr,Qr),O.lastInterval=D}else nt=U.velocity,Tt=U.velocityX,Jt=U.velocityY,pr=U.direction;D.velocity=nt,D.velocityX=Tt,D.velocityY=Jt,D.direction=pr}function ee(O){for(var D=[],U=0;U<O.pointers.length;)D[U]={clientX:l(O.pointers[U].clientX),clientY:l(O.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:D,center:me(D),deltaX:O.deltaX,deltaY:O.deltaY}}function me(O){var D=O.length;if(D===1)return{x:l(O[0].clientX),y:l(O[0].clientY)};for(var U=0,H=0,nt=0;nt<D;)U+=O[nt].clientX,H+=O[nt].clientY,nt++;return{x:l(U/D),y:l(H/D)}}function _e(O,D,U){return{x:D/O||0,y:U/O||0}}function Pe(O,D){return O===D?ft:u(O)>=u(D)?O<0?vt:B:D<0?j:X}function Fr(O,D,U){U||(U=bt);var H=D[U[0]]-O[U[0]],nt=D[U[1]]-O[U[1]];return Math.sqrt(H*H+nt*nt)}function Qi(O,D,U){U||(U=bt);var H=D[U[0]]-O[U[0]],nt=D[U[1]]-O[U[1]];return Math.atan2(nt,H)*180/Math.PI}function b0(O,D){return Qi(D[1],D[0],ct)+Qi(O[1],O[0],ct)}function Ja(O,D){return Fr(D[0],D[1],ct)/Fr(O[0],O[1],ct)}var w0={mousedown:J,mousemove:yt,mouseup:Et},Jr="mousedown",zn="mousemove mouseup";function Qa(){this.evEl=Jr,this.evWin=zn,this.pressed=!1,at.apply(this,arguments)}y(Qa,at,{handler:function(D){var U=w0[D.type];U&J&&D.button===0&&(this.pressed=!0),U&yt&&D.which!==1&&(U=Et),this.pressed&&(U&Et&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[D],changedPointers:[D],pointerType:Zt,srcEvent:D}))}});var Aj={pointerdown:J,pointermove:yt,pointerup:Et,pointercancel:xt,pointerout:xt},Mj={2:Pt,3:Ct,4:Zt,5:Y},UE="pointerdown",WE="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(UE="MSPointerDown",WE="MSPointerMove MSPointerUp MSPointerCancel");function by(){this.evEl=UE,this.evWin=WE,at.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(by,at,{handler:function(D){var U=this.store,H=!1,nt=D.type.toLowerCase().replace("ms",""),Tt=Aj[nt],Jt=Mj[D.pointerType]||D.pointerType,pr=Jt==Pt,Pr=L(U,D.pointerId,"pointerId");Tt&J&&(D.button===0||pr)?Pr<0&&(U.push(D),Pr=U.length-1):Tt&(Et|xt)&&(H=!0),!(Pr<0)&&(U[Pr]=D,this.callback(this.manager,Tt,{pointers:U,changedPointers:[D],pointerType:Jt,srcEvent:D}),H&&U.splice(Pr,1))}});var xj={touchstart:J,touchmove:yt,touchend:Et,touchcancel:xt},Ij="touchstart",Lj="touchstart touchmove touchend touchcancel";function jE(){this.evTarget=Ij,this.evWin=Lj,this.started=!1,at.apply(this,arguments)}y(jE,at,{handler:function(D){var U=xj[D.type];if(U===J&&(this.started=!0),!!this.started){var H=Oj.call(this,D,U);U&(Et|xt)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}}});function Oj(O,D){var U=N(O.touches),H=N(O.changedTouches);return D&(Et|xt)&&(U=z(U.concat(H),"identifier",!0)),[U,H]}var Rj={touchstart:J,touchmove:yt,touchend:Et,touchcancel:xt},Dj="touchstart touchmove touchend touchcancel";function S0(){this.evTarget=Dj,this.targetIds={},at.apply(this,arguments)}y(S0,at,{handler:function(D){var U=Rj[D.type],H=Nj.call(this,D,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}});function Nj(O,D){var U=N(O.touches),H=this.targetIds;if(D&(J|yt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var nt,Tt,Jt=N(O.changedTouches),pr=[],Pr=this.target;if(Tt=U.filter(function(Qr){return x(Qr.target,Pr)}),D===J)for(nt=0;nt<Tt.length;)H[Tt[nt].identifier]=!0,nt++;for(nt=0;nt<Jt.length;)H[Jt[nt].identifier]&&pr.push(Jt[nt]),D&(Et|xt)&&delete H[Jt[nt].identifier],nt++;if(!!pr.length)return[z(Tt.concat(pr),"identifier",!0),pr]}var Fj=2500,GE=25;function wy(){at.apply(this,arguments);var O=b(this.handler,this);this.touch=new S0(this.manager,O),this.mouse=new Qa(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}y(wy,at,{handler:function(D,U,H){var nt=H.pointerType==Pt,Tt=H.pointerType==Zt;if(!(Tt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(nt)$j.call(this,U,H);else if(Tt&&zj.call(this,H))return;this.callback(D,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function $j(O,D){O&J?(this.primaryTouch=D.changedPointers[0].identifier,HE.call(this,D)):O&(Et|xt)&&HE.call(this,D)}function HE(O){var D=O.changedPointers[0];if(D.identifier===this.primaryTouch){var U={x:D.clientX,y:D.clientY};this.lastTouches.push(U);var H=this.lastTouches,nt=function(){var Tt=H.indexOf(U);Tt>-1&&H.splice(Tt,1)};setTimeout(nt,Fj)}}function zj(O){for(var D=O.srcEvent.clientX,U=O.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var nt=this.lastTouches[H],Tt=Math.abs(D-nt.x),Jt=Math.abs(U-nt.y);if(Tt<=GE&&Jt<=GE)return!0}return!1}var XE=V(s.style,"touchAction"),YE=XE!==i,qE="compute",ZE="auto",Sy="manipulation",tl="none",ih="pan-x",oh="pan-y",T0=Vj();function Ty(O,D){this.manager=O,this.set(D)}Ty.prototype={set:function(O){O==qE&&(O=this.compute()),YE&&this.manager.element.style&&T0[O]&&(this.manager.element.style[XE]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return d(this.manager.recognizers,function(D){w(D.options.enable,[D])&&(O=O.concat(D.getTouchAction()))}),Bj(O.join(" "))},preventDefaults:function(O){var D=O.srcEvent,U=O.offsetDirection;if(this.manager.session.prevented){D.preventDefault();return}var H=this.actions,nt=A(H,tl)&&!T0[tl],Tt=A(H,oh)&&!T0[oh],Jt=A(H,ih)&&!T0[ih];if(nt){var pr=O.pointers.length===1,Pr=O.distance<2,Qr=O.deltaTime<250;if(pr&&Pr&&Qr)return}if(!(Jt&&Tt)&&(nt||Tt&&U&Q||Jt&&U&tt))return this.preventSrc(D)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function Bj(O){if(A(O,tl))return tl;var D=A(O,ih),U=A(O,oh);return D&&U?tl:D||U?D?ih:oh:A(O,Sy)?Sy:ZE}function Vj(){if(!YE)return!1;var O={},D=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){O[U]=D?t.CSS.supports("touch-action",U):!0}),O}var k0=1,Bn=2,ju=4,Ns=8,jo=Ns,sh=16,to=32;function Go(O){this.options=v({},this.defaults,O||{}),this.id=G(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=k0,this.simultaneous={},this.requireFail=[]}Go.prototype={defaults:{},set:function(O){return v(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(h(O,"recognizeWith",this))return this;var D=this.simultaneous;return O=P0(O,this),D[O.id]||(D[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return h(O,"dropRecognizeWith",this)?this:(O=P0(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(h(O,"requireFailure",this))return this;var D=this.requireFail;return O=P0(O,this),L(D,O)===-1&&(D.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(h(O,"dropRequireFailure",this))return this;O=P0(O,this);var D=L(this.requireFail,O);return D>-1&&this.requireFail.splice(D,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var D=this,U=this.state;function H(nt){D.manager.emit(nt,O)}U<Ns&&H(D.options.event+KE(U)),H(D.options.event),O.additionalEvent&&H(O.additionalEvent),U>=Ns&&H(D.options.event+KE(U))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=to},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(to|k0)))return!1;O++}return!0},recognize:function(O){var D=v({},O);if(!w(this.options.enable,[this,D])){this.reset(),this.state=to;return}this.state&(jo|sh|to)&&(this.state=k0),this.state=this.process(D),this.state&(Bn|ju|Ns|sh)&&this.tryEmit(D)},process:function(O){},getTouchAction:function(){},reset:function(){}};function KE(O){return O&sh?"cancel":O&Ns?"end":O&ju?"move":O&Bn?"start":""}function JE(O){return O==X?"down":O==j?"up":O==vt?"left":O==B?"right":""}function P0(O,D){var U=D.manager;return U?U.get(O):O}function gi(){Go.apply(this,arguments)}y(gi,Go,{defaults:{pointers:1},attrTest:function(O){var D=this.options.pointers;return D===0||O.pointers.length===D},process:function(O){var D=this.state,U=O.eventType,H=D&(Bn|ju),nt=this.attrTest(O);return H&&(U&xt||!nt)?D|sh:H||nt?U&Et?D|Ns:D&Bn?D|ju:Bn:to}});function C0(){gi.apply(this,arguments),this.pX=null,this.pY=null}y(C0,gi,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var O=this.options.direction,D=[];return O&Q&&D.push(oh),O&tt&&D.push(ih),D},directionTest:function(O){var D=this.options,U=!0,H=O.distance,nt=O.direction,Tt=O.deltaX,Jt=O.deltaY;return nt&D.direction||(D.direction&Q?(nt=Tt===0?ft:Tt<0?vt:B,U=Tt!=this.pX,H=Math.abs(O.deltaX)):(nt=Jt===0?ft:Jt<0?j:X,U=Jt!=this.pY,H=Math.abs(O.deltaY))),O.direction=nt,U&&H>D.threshold&&nt&D.direction},attrTest:function(O){return gi.prototype.attrTest.call(this,O)&&(this.state&Bn||!(this.state&Bn)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var D=JE(O.direction);D&&(O.additionalEvent=this.options.event+D),this._super.emit.call(this,O)}});function ky(){gi.apply(this,arguments)}y(ky,gi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tl]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&Bn)},emit:function(O){if(O.scale!==1){var D=O.scale<1?"in":"out";O.additionalEvent=this.options.event+D}this._super.emit.call(this,O)}});function Py(){Go.apply(this,arguments),this._timer=null,this._input=null}y(Py,Go,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ZE]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,nt=O.deltaTime>D.time;if(this._input=O,!H||!U||O.eventType&(Et|xt)&&!nt)this.reset();else if(O.eventType&J)this.reset(),this._timer=f(function(){this.state=jo,this.tryEmit()},D.time,this);else if(O.eventType&Et)return jo;return to},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===jo&&(O&&O.eventType&Et?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Cy(){gi.apply(this,arguments)}y(Cy,gi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tl]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&Bn)}});function Ey(){gi.apply(this,arguments)}y(Ey,gi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|tt,pointers:1},getTouchAction:function(){return C0.prototype.getTouchAction.call(this)},attrTest:function(O){var D=this.options.direction,U;return D&(Q|tt)?U=O.overallVelocity:D&Q?U=O.overallVelocityX:D&tt&&(U=O.overallVelocityY),this._super.attrTest.call(this,O)&&D&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&O.eventType&Et},emit:function(O){var D=JE(O.offsetDirection);D&&this.manager.emit(this.options.event+D,O),this.manager.emit(this.options.event,O)}});function E0(){Go.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(E0,Go,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Sy]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,nt=O.deltaTime<D.time;if(this.reset(),O.eventType&J&&this.count===0)return this.failTimeout();if(H&&nt&&U){if(O.eventType!=Et)return this.failTimeout();var Tt=this.pTime?O.timeStamp-this.pTime<D.interval:!0,Jt=!this.pCenter||Fr(this.pCenter,O.center)<D.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!Jt||!Tt?this.count=1:this.count+=1,this._input=O;var pr=this.count%D.taps;if(pr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=jo,this.tryEmit()},D.interval,this),Bn):jo}return to},failTimeout:function(){return this._timer=f(function(){this.state=to},this.options.interval,this),to},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==jo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ho(O,D){return D=D||{},D.recognizers=T(D.recognizers,Ho.defaults.preset),new Ay(O,D)}Ho.VERSION="2.0.7",Ho.defaults={domEvents:!1,touchAction:qE,enable:!0,inputTarget:null,inputClass:null,preset:[[Cy,{enable:!1}],[ky,{enable:!1},["rotate"]],[Ey,{direction:Q}],[C0,{direction:Q},["swipe"]],[E0],[E0,{event:"doubletap",taps:2},["tap"]],[Py]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Uj=1,QE=2;function Ay(O,D){this.options=v({},Ho.defaults,D||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=it(this),this.touchAction=new Ty(this,this.options.touchAction),tA(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}Ay.prototype={set:function(O){return v(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?QE:Uj},recognize:function(O){var D=this.session;if(!D.stopped){this.touchAction.preventDefaults(O);var U,H=this.recognizers,nt=D.curRecognizer;(!nt||nt&&nt.state&jo)&&(nt=D.curRecognizer=null);for(var Tt=0;Tt<H.length;)U=H[Tt],D.stopped!==QE&&(!nt||U==nt||U.canRecognizeWith(nt))?U.recognize(O):U.reset(),!nt&&U.state&(Bn|ju|Ns)&&(nt=D.curRecognizer=U),Tt++}},get:function(O){if(O instanceof Go)return O;for(var D=this.recognizers,U=0;U<D.length;U++)if(D[U].options.event==O)return D[U];return null},add:function(O){if(h(O,"add",this))return this;var D=this.get(O.options.event);return D&&this.remove(D),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(h(O,"remove",this))return this;if(O=this.get(O),O){var D=this.recognizers,U=L(D,O);U!==-1&&(D.splice(U,1),this.touchAction.update())}return this},on:function(O,D){if(O!==i&&D!==i){var U=this.handlers;return d(I(O),function(H){U[H]=U[H]||[],U[H].push(D)}),this}},off:function(O,D){if(O!==i){var U=this.handlers;return d(I(O),function(H){D?U[H]&&U[H].splice(L(U[H],D),1):delete U[H]}),this}},emit:function(O,D){this.options.domEvents&&Wj(O,D);var U=this.handlers[O]&&this.handlers[O].slice();if(!(!U||!U.length)){D.type=O,D.preventDefault=function(){D.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](D),H++}},destroy:function(){this.element&&tA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function tA(O,D){var U=O.element;if(!!U.style){var H;d(O.options.cssProps,function(nt,Tt){H=V(U.style,Tt),D?(O.oldCssProps[H]=U.style[H],U.style[H]=nt):U.style[H]=O.oldCssProps[H]||""}),D||(O.oldCssProps={})}}function Wj(O,D){var U=r.createEvent("Event");U.initEvent(O,!0,!0),U.gesture=D,D.target.dispatchEvent(U)}v(Ho,{INPUT_START:J,INPUT_MOVE:yt,INPUT_END:Et,INPUT_CANCEL:xt,STATE_POSSIBLE:k0,STATE_BEGAN:Bn,STATE_CHANGED:ju,STATE_ENDED:Ns,STATE_RECOGNIZED:jo,STATE_CANCELLED:sh,STATE_FAILED:to,DIRECTION_NONE:ft,DIRECTION_LEFT:vt,DIRECTION_RIGHT:B,DIRECTION_UP:j,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:tt,DIRECTION_ALL:dt,Manager:Ay,Input:at,TouchAction:Ty,TouchInput:S0,MouseInput:Qa,PointerEventInput:by,TouchMouseInput:wy,SingleTouchInput:jE,Recognizer:Go,AttrRecognizer:gi,Tap:E0,Pan:C0,Swipe:Ey,Pinch:ky,Rotate:Cy,Press:Py,on:S,off:k,each:d,merge:g,extend:m,assign:v,inherit:y,bindFn:b,prefixed:V});var jj=typeof t<"u"?t:typeof self<"u"?self:{};jj.Hammer=Ho,typeof i=="function"&&i.amd?i(function(){return Ho}):e.exports?e.exports=Ho:t[n]=Ho})(window,document,"Hammer")})(Uf);const o3t=Uf.exports,uo=Gj({__proto__:null,default:o3t},[Uf.exports]),xV=1,IV=2,CT=4,s3t={mousedown:xV,mousemove:IV,mouseup:CT};function a3t(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function l3t(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(a3t(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function u3t(e){e.prototype.handler=function(r){let n=s3t[r.type];n&xV&&r.button>=0&&(this.pressed=!0),n&IV&&r.which===0&&(n=CT),this.pressed&&(n&CT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}l3t(Uf.exports.PointerEventInput);u3t(Uf.exports.MouseInput);const c3t=Uf.exports.Manager;class W_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const f3t=uo?[[uo.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[uo.Rotate,{enable:!1}],[uo.Pinch,{enable:!1}],[uo.Swipe,{enable:!1}],[uo.Pan,{threshold:0,enable:!1}],[uo.Press,{enable:!1}],[uo.Tap,{event:"doubletap",taps:2,enable:!1}],[uo.Tap,{event:"anytap",enable:!1}],[uo.Tap,{enable:!1}]]:null,uL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},h3t={doubletap:["tap"]},d3t={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},$C={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},p3t={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},cL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},v3t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",zc=typeof window<"u"?window:global;let ET=!1;try{const e={get passive(){return ET=!0,!0}};zc.addEventListener("test",null,e),zc.removeEventListener("test",null)}catch{ET=!1}const g3t=v3t.indexOf("firefox")!==-1,{WHEEL_EVENTS:m3t}=$C,fL="wheel",hL=4.000244140625,_3t=40,y3t=.25;class b3t extends W_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;zc.WheelEvent&&(g3t&&i.deltaMode===zc.WheelEvent.DOM_DELTA_PIXEL&&(o/=zc.devicePixelRatio),i.deltaMode===zc.WheelEvent.DOM_DELTA_LINE&&(o*=_3t)),o!==0&&o%hL===0&&(o=Math.floor(o/hL)),i.shiftKey&&o&&(o=o*y3t),this.callback({type:fL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(m3t),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,ET?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===fL&&(this.options.enable=r)}}const{MOUSE_EVENTS:w3t}=$C,dL="pointermove",pL="pointerover",vL="pointerout",gL="pointerenter",mL="pointerleave";class S3t extends W_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(w3t),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===dL&&(this.enableMoveEvent=r),t===pL&&(this.enableOverEvent=r),t===vL&&(this.enableOutEvent=r),t===gL&&(this.enableEnterEvent=r),t===mL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(pL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(vL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(gL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(mL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(dL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:T3t}=$C,_L="keydown",yL="keyup";class k3t extends W_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:_L,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:yL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(T3t),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===_L&&(this.enableDownEvent=r),t===yL&&(this.enableUpEvent=r)}}const bL="contextmenu";class P3t extends W_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:bL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===bL&&(this.options.enable=r)}}const AT=1,C1=2,MT=4,C3t={pointerdown:AT,pointermove:C1,pointerup:MT,mousedown:AT,mousemove:C1,mouseup:MT},E3t=1,A3t=2,M3t=3,x3t=0,I3t=1,L3t=2,O3t=1,R3t=2,D3t=4;function N3t(e){const t=C3t[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,s=!1,a=!1;return t===MT||t===C1&&!Number.isFinite(r)?(o=i===E3t,s=i===A3t,a=i===M3t):t===C1?(o=Boolean(r&O3t),s=Boolean(r&D3t),a=Boolean(r&R3t)):t===AT&&(o=n===x3t,s=n===I3t,a=n===L3t),{leftButton:o,middleButton:s,rightButton:a}}function F3t(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,s={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:s}}const q2={srcElement:"root",priority:0};class $3t{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let l=q2;typeof n=="string"||n&&n.addEventListener?l={...q2,srcElement:n}:n&&(l={...q2,...n});let u=a.get(l.srcElement);u||(u=[],a.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const s=n[o];if(s.type===t&&s.handler===r){n.splice(o,1);const a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},s=()=>{t.handled=!0,i=!0},a=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:s}),f&&a.push(n[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...N3t(t),...F3t(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const z3t={events:null,recognizers:null,recognizerOptions:{},Manager:c3t,touchAction:"none",tabIndex:0};class B3t{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,s=d3t[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...z3t,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||f3t}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(uL).forEach(i=>{const o=this.manager.get(i);o&&uL[i].forEach(s=>{o.recognizeWith(s)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const s=r.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new b3t(t,this._onOtherEvent,{enable:!1}),this.moveInput=new S3t(t,this._onOtherEvent,{enable:!1}),this.keyInput=new k3t(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new P3t(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=h3t[t];o&&!this.options.recognizers&&o.forEach(s=>{const a=n.get(s);r?(a.requireFailure(t),i.dropRequireFailure(s)):a.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:s,events:a}=this,l=cL[t]||t;let u=a.get(l);u||(u=new $3t(this),a.set(l,u),u.recognizerName=p3t[l]||l,s&&s.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const s in t)this._removeEventHandler(s,t[s]);return}const{events:n}=this,i=cL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const l of n.values())if(l.recognizerName===s&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Al(){}const V3t=({isDragging:e})=>e?"grabbing":"grab",LV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Al,onResize:Al,onViewStateChange:Al,onInteractionStateChange:Al,onBeforeRender:Al,onAfterRender:Al,onLoad:Al,onError:e=>qt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:V3t,getTooltip:null,debug:!1,drawPickingColors:!1};class j_{constructor(t){P(this,"props",void 0),P(this,"width",0),P(this,"height",0),P(this,"userData",{}),P(this,"canvas",null),P(this,"viewManager",null),P(this,"layerManager",null),P(this,"effectManager",null),P(this,"deckRenderer",null),P(this,"deckPicker",null),P(this,"eventManager",null),P(this,"tooltip",null),P(this,"metrics",void 0),P(this,"animationLoop",void 0),P(this,"stats",void 0),P(this,"viewState",void 0),P(this,"cursorState",void 0),P(this,"_needsRedraw",void 0),P(this,"_pickRequest",void 0),P(this,"_lastPointerDownInfo",null),P(this,"_metricsCounter",void 0),P(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),P(this,"_onEvent",r=>{const n=qI[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,l=a&&(a[n.handler]||a.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(a,s,r)),!c&&u&&u(s,r)}),P(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...LV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&qt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Qz()==="IE"&&qt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new O_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&yf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&qt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&qt.removed("onLayerClick","onClick")(),t.initialViewState&&!Vf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||s,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return gr(this.viewManager),this.viewManager.views}getViewports(t){return gr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){gr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),gr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new oyt({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>yB({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new CV({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,s=!1;for(const a of n){var r;o=a,s=((r=a.layer)===null||r===void 0?void 0:r.onHover(a,t.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,TC(t,{enable:!0,copyState:!0})),this.tooltip=new i3t(this.canvas),Ts(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new uV;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new B3t(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in qI)this.eventManager.on(i,this._onEvent);this.viewManager=new wSt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new bSt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new GSt,this.deckRenderer=new ZSt(t),this.deckPicker=new r3t(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;Ts(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),qt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Gl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}P(j_,"defaultProps",LV);P(j_,"VERSION",hmt.VERSION);class Z2{constructor(t,r){P(this,"opts",void 0),P(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const s=r.elementOffset||0;for(let a=0;a<i;++a)o[a]=n[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function U3t(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function _m(e){return e.stride||e.size*e.bytesPerElement}function OV(e,t){t.offset&&qt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=_m(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function W3t(e,t){const r=OV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class j3t{constructor(t,r,n){P(this,"gl",void 0),P(this,"id",void 0),P(this,"size",void 0),P(this,"settings",void 0),P(this,"value",void 0),P(this,"doublePrecision",void 0),P(this,"_buffer",void 0),P(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&r.isIndexed?a=t&&N1t(t,ze.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=U3t(i||a||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Ce(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*_m(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),yf.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=W3t(this.getAccessor(),r||{});return n[t]=new Z2(this,o.high),n["".concat(t,"64Low")]=i?new Z2(this,o.low):new Float32Array(this.size),n}if(r){const n=OV(this.getAccessor(),r);return{[t]:new Z2(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<s[u]&&(s[u]=c),c>a[u]&&(a[u]=c)}t=[s,a]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Ce?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const s=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=_m(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=_m(i);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=X2(o,i));const l=o.byteLength+a+i.stride*2;s.byteLength<l&&s.reallocate(l),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=n.type||s.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?X2(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=yf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),r&&i&&s.subData({data:i instanceof Float64Array?X2(i,this):i,offset:a})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&qt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let s=o;for(;--s>=0;)r[n+s]=Number.isFinite(t[s])?t[s]:i[s]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const wL=[],SL=[];function G_(e,t=0,r=1/0){let n=wL;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(SL.length=e.length,n=SL):n=wL,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function RV(e){return e&&e[Symbol.asyncIterator]}function DV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=n?n/a:r,u=i?i/a:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const g=h*l+u;for(let y=0;y<r;y++)d[y]=e[g+y];return d}const p=o[h],v=o[h+1]||c;let m;if(s){m=new Array(v-p);for(let g=p;g<v;g++){const y=g*l+u;d=new Array(r);for(let b=0;b<r;b++)d[b]=e[y+b];m[g-p]=d}}else if(l===r)m=e.subarray(p*r+u,v*r+u);else{m=new e.constructor((v-p)*r);let g=0;for(let y=p;y<v;y++){const b=y*l+u;for(let w=0;w<r;w++)m[g++]=e[b+w]}}return m}}const G3t=[],ym=[[0,1/0]];function H3t(e,t){if(e===ym||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const s=e[o];s[1]<t[0]?(r.push(s),i=o+1):s[0]>t[1]?r.push(s):t=[Math.min(s[0],t[0]),Math.max(s[1],t[1])]}return r.splice(i,0,t),r}function K2(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,s=e.end||r.length,a=t.length,l=s-n;if(a>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=a;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function X3t({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return K2({source:e,target:t,size:r,getData:n}),t;let s=0,a=0;const l=n&&((c,f)=>n(c+a,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;K2({source:e.subarray(s,f),target:t,start:a,end:h,size:r,getData:l}),s=f,a=h}return a<t.length&&K2({source:[],target:t,start:a,size:r,getData:l}),t}const Y3t={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function NV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...Y3t[r],...t,...e,type:r}}function FV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function $V(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function zV(e){e.push(e.shift())}function zC(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,s=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*s}function BV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=s=>s}){const s=r.doublePrecision&&r.value instanceof Float64Array?2:1,a=r.size*s,l=r.byteOffset,u=r.startIndices,c=i&&u,f=zC(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const g=o;o=(y,b)=>r.normalizeConstant(g(y,b))}const p=h?(g,y)=>o(d,y):(g,y)=>o(d.subarray(g,g+a),y),v=e.getData({length:n}),m=new Float32Array(f);X3t({source:v,target:m,sourceStartIndices:i,targetStartIndices:u,size:a,getData:p}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class BC extends j3t{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:ym}),P(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return NV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=H3t(this.state.updateRanges,[n,i])}else this.state.updateRanges=ym}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=G3t}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==ym),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[u,c]of o)s.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const s=t;gr(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));const a=Boolean(s.size)&&s.size!==this.size;return n.binaryAccessor=DV(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:r,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:s}){if(t.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=a,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);gr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:m,objectInfo:g}=G_(r,n,i);for(const y of m){g.index++;let b=p(y,g);if(d&&(b=d.call(this,b)),f){const w=(g.index<f.length-1?f[g.index+1]:s)-f[g.index];if(b&&Array.isArray(b[0])){let T=v;for(const S of b)t._normalizeValue(S,u,T),T+=c}else b&&b.length>c?u.set(b,v):(t._normalizeValue(b,g.target,0),vSt({target:u,source:g.target,start:v,count:w}));v+=w*c}else t._normalizeValue(b,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class q3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","interpolation"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.transition=new c0(n),this.attribute=r,this.attributeInTransition=new BC(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=K3t(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Ce(t,i),new Ce(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;zV(i);const s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)BV({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=zC(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:FV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const Z3t=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function K3t(e,t){const r=$V(t.size);return new DC(e,{vs:Z3t,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class J3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","spring"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"texture",void 0),P(this,"framebuffer",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new c0(n),this.attribute=r,this.attributeInTransition=new BC(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=tTt(t),this.framebuffer=eTt(t,this.texture),this.transform=Q3t(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ce(t,i),new Ce(t,i),new Ce(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)BV({buffer:a,...s});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=zC(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:FV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const s=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),zV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),F_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function Q3t(e,t,r){const n=$V(t.size);return new DC(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function tTt(e){return new Sn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function eTt(e,t){return new lr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const rTt={interpolation:q3t,spring:J3t};class nTt{constructor(t,{id:r,timeline:n}){P(this,"id",void 0),P(this,"isSupported",void 0),P(this,"gl",void 0),P(this,"timeline",void 0),P(this,"transitions",void 0),P(this,"needsRedraw",void 0),P(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=DC.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],s=o.getTransitionSetting(r);!s||this._updateAttribute(i,o,s)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){qt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const s=rTt[n.type];s?this.transitions[t]=new s({attribute:r,timeline:this.timeline,gl:this.gl}):(qt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const TL="attributeManager.invalidate",iTt="attributeManager.updateStart",oTt="attributeManager.updateEnd",sTt="attribute.updateStart",aTt="attribute.allocate",lTt="attribute.updateEnd";class uTt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"attributes",void 0),P(this,"updateTriggers",void 0),P(this,"needsRedraw",void 0),P(this,"userData",void 0),P(this,"stats",void 0),P(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new nTt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);jr(TL,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);jr(TL,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:s={},context:a={}}){let l=!1;jr(iTt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&qt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(s[u])||c.setBinaryValue(typeof f=="string"?s[f]:void 0,t.startIndices)||typeof f=="string"&&!s[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&jr(oTt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const s=r[o];s.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new BC(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(s=>{const a=n[s];a&&a.setNeedsUpdate(a.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(jr(sTt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&jr(aTt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,jr(lTt,r,n))}}class cTt extends c0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,s=o(t/i);this._value=ru(r,n,s)}}const kL=1e-5;function PL(e,t,r,n,i){const o=t-e,a=(r-t)*i,l=-o*n;return a+l+o+t}function fTt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let s=0;s<r.length;s++)o[s]=PL(e[s],t[s],r[s],n,i);return o}return PL(e,t,r,n,i)}function CL(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class hTt extends c0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:s=t}=this;let a=fTt(o,s,r,n,i);const l=CL(a,r),u=CL(a,s);l<kL&&u<kL&&(a=r,this.end()),this._prevValue=s,this._currValue=a}}const dTt={interpolation:cTt,spring:hTt};class pTt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=NV(i),!i)return;const s=dTt[i.type];if(!s){qt.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new s(this.timeline);a.start({...i,fromValue:r,toValue:n}),o.set(t,a)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function vTt(e){const t=VC(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function gTt(e,t){const r=VV({newProps:e,oldProps:t,propTypes:VC(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=_Tt(e,t);let i=!1;return n||(i=yTt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:bTt(e,t),transitionsChanged:mTt(e,t)}}function mTt(e,t){if(!e.transitions)return!1;const r={},n=VC(e);let i=!1;for(const o in e.transitions){const s=n[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&xT(e[o],t[o],s)&&(r[o]=!0,i=!0)}return i?r:!1}function VV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const s=xT(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const s=xT(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function xT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function _Tt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function yTt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&EL(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&EL(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function bTt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function EL(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,VV({oldProps:i,newProps:n,triggerName:r})}function VC(e){const t=e[P1],r=t&&t.constructor;return r?r._propTypes:{}}const wTt="count(): argument not an object",STt="count(): argument not a container";function TTt(e){if(!PTt(e))throw new Error(wTt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(kTt(e))return Object.keys(e).length;throw new Error(STt)}function kTt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function PTt(e){return e!==null&&typeof e=="object"}function CTt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const ETt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},IT={};function ATt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof Sn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new Sn(r,{...t,parameters:{...ETt,...n,...e.props.textureParameters}});return IT[i.id]=!0,i}function MTt(e){!e||!(e instanceof Sn)||IT[e.id]&&(e.delete(),delete IT[e.id])}const xTt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||Op(e)&&(e.length===3||e.length===4)},equal(e,t,r){return J2(e,t)}},accessor:{validate(e,t){const r=E1(e);return r==="function"||r===E1(t.value)},equal(e,t,r){return typeof t=="function"?!0:J2(e,t)}},array:{validate(e,t){return t.optional&&!e||Op(e)},equal(e,t,r){return r.compare?J2(e,t):e===t}},object:{equal(e,t,r){return r.compare?Vf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>ATt(r,e),release:e=>{MTt(e)}}};function J2(e,t){if(e===t)return!0;if(!Op(e)||!Op(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ITt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const s=o==null?void 0:o.deprecatedFor;if(s)n[i]=Array.isArray(s)?s:[s];else{const a=LTt(i,o);t[i]=a,r[i]=a.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function LTt(e,t){switch(E1(t)){case"object":return zh(e,t);case"array":return zh(e,{type:"array",value:t,compare:!1});case"boolean":return zh(e,{type:"boolean",value:t});case"number":return zh(e,{type:"number",value:t});case"function":return zh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function zh(e,t){return"type"in t?{name:e,...xTt[t.type],...t}:"value"in t?{name:e,type:E1(t.value),...t}:{name:e,type:"object",value:t}}function Op(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function E1(e){return Op(e)?"array":e===null?"null":typeof e}function OTt(e,t){const r=UV(e.constructor),n=Object.create(r);n[P1]=e,n[_u]={},n[ba]={};for(let i=0;i<t.length;++i){const o=t[i];for(const s in o)n[s]=o[s]}return Object.freeze(n),n}function UV(e){const t=A1(e,"_mergedDefaultProps");return t||(RTt(e),e._mergedDefaultProps)}function RTt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=UV(r),i=A1(e,"defaultProps")||{},o=ITt(i),s=DTt(o.defaultProps,n,e),a={...r._propTypes,...o.propTypes};FTt(s,a);const l={...r._deprecatedProps,...o.deprecatedProps};NTt(s,l),e._mergedDefaultProps=s,e._propTypes=a,e._deprecatedProps=l}function DTt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=zTt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function NTt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])WV(this,o)||(this[o]=n);qt.deprecated(i,t[r].join("/"))()}})}function FTt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:s,value:a}=o;o.async&&(r[s]=a,n[s]=$Tt(s))}e[ef]=r,e[_u]={},Object.defineProperties(e,n)}function $Tt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||RV(t)?this[_u][e]=t:this[ba][e]=t},get(){if(this[ba]){if(e in this[ba])return this[ba][e]||this[ef][e];if(e in this[_u]){const t=this[P1]&&this[P1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[ef][e]}}return this[ef][e]}}}function WV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A1(e,t){return WV(e,t)&&e[t]}function zTt(e){const t=A1(e,"layerName")||A1(e,"componentName");return t||qt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let BTt=0;class UC{constructor(...t){P(this,"id",void 0),P(this,"props",void 0),P(this,"count",void 0),this.props=OTt(this,t),this.id=this.props.id,this.count=BTt++}clone(t){const{props:r}=this,n={};for(const i in r[ef])i in r[ba]?n[i]=r[ba][i]:i in r[_u]&&(n[i]=r[_u][i]);return new this.constructor({...r,...n,...t})}}P(UC,"componentName","Component");P(UC,"defaultProps",{});const VTt=Object.freeze({});class UTt{constructor(t){P(this,"component",void 0),P(this,"onAsyncPropUpdated",void 0),P(this,"asyncProps",void 0),P(this,"oldProps",void 0),P(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||VTt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[ba]||{},n=t[_u]||t,i=t[ef]||{};for(const o in r){const s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),r[o]=this.getAsyncProp(o)}for(const o in n){const s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(RV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],s=0;for await(const a of r){const{dataTransform:l}=this.component.props;l?o=l(a,o):o=o.concat(a),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class WTt extends UTt{constructor({attributeManager:t,layer:r}){super(r),P(this,"attributeManager",void 0),P(this,"needsRedraw",void 0),P(this,"needsUpdate",void 0),P(this,"subLayers",void 0),P(this,"usesPickingColorCache",void 0),P(this,"changeFlags",void 0),P(this,"viewport",void 0),P(this,"uniformTransitions",void 0),P(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const jTt="layer.changeFlag",GTt="layer.initialize",HTt="layer.update",XTt="layer.finalize",YTt="layer.matched",AL=2**24-1,qTt=Object.freeze([]),ZTt=u0(({oldViewport:e,viewport:t})=>e.equals(t));let co=new Uint8ClampedArray(0);const KTt={data:{type:"data",value:qTt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:s}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:o}}}let l=s.contains(e);return!l&&!i&&(s.add({resourceId:e,data:_1(e,n),persistent:!1}),l=!0),l?s.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):_1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:l0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ae.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Vo extends UC{constructor(...t){super(...t),P(this,"internalState",null),P(this,"lifecycle",Ic.NO_STATE),P(this,"context",void 0),P(this,"state",void 0),P(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){gr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=wV(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=mV(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,s]}unproject(t){return gr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){gr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return pSt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ae.DEFAULT||t===ae.LNGLAT||t===ae.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){gr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:TTt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=CTt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(a&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!ZTt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(co.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>AL&&qt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),co=yf.allocate(co,r,{size:3,copy:!0,maxCount:Math.max(r,AL)});const i=Math.floor(co.length/3),o=[];for(let s=n;s<i;s++)this.encodePickingColor(s,o),co[s*3+0]=o[0],co[s*3+1]=o[1],co[s*3+2]=o[2]}t.value=co.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),s=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==co.buffer&&(n.value=co.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){gr(!this.internalState),gr(Number.isFinite(this.props.coordinateSystem)),jr(GTt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new WTt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(qt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new pTt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){jr(YTt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(jr(HTt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,s=this._updateUniformTransition();i.propsInTransition=s,n.viewport=i.viewport||o,this.props=s;try{const a=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const u=this.getModels()[0]!==l[0];this._postUpdate(a,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){jr(XTt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;r.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(r)||[0,0];Ts(o.gl,{polygonOffset:l}),ai(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const s=t[i],a=r[i];s&&Array.isArray(a)&&(r.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&jr(jTt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=gTt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){vTt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new uTt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:l}=n;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==l){const u={};s||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(a)&&(u.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}P(Vo,"defaultProps",KTt);P(Vo,"layerName","Layer");const JTt="compositeLayer.renderLayers";class H_ extends Vo{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:y,_subLayerProps:b}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:y},T=b&&t.id&&b[t.id],S=T&&T.updateTriggers,k=t.id||"sublayer";if(T){const x=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const I in T){const L=A[I]||x[I];L&&L.type==="accessor"&&(T[I]=this.getSubLayerAccessor(T[I]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(k),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const x of m){const A=x.getSubLayerProps.call(this,x);A&&Object.assign(w,A,{updateTriggers:Object.assign(w.updateTriggers,A.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=B_(o,Boolean),this.internalState.subLayers=n}jr(JTt,this,i,n);for(const o of n)o.parent=this}}P(H_,"layerName","CompositeLayer");const Uv=Math.PI/180,ML=180/Math.PI,bm=6370972,Bc=256;function QTt(){const e=Bc/bm,t=Math.PI/180*Bc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class tkt extends Ha{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:a=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new qr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Uv),c.rotateZ(-n*Uv),c.scale(f/l);const h=Math.atan(.5/u),d=Bc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:QTt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*s}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=a}get projectionMode(){return Oi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),s=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],s[0]),Math.min(n[1],o[1],i[1],s[1]),Math.max(n[0],o[0],i[0],s[0]),Math.max(n[1],o[1],i[1],s[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(s))u=Q2(l,[i,a,s,1]);else{const d=Q2(l,[i,a,-1,1]),p=Q2(l,[i,a,1,1]),v=((n||0)/bm+1)*Bc,m=V2(QB([],d,p)),g=V2(d),y=V2(p),b=(4*g*y-(m-g-y)**2)/16,w=4*b/m,T=Math.sqrt(g-w),S=Math.sqrt(Math.max(0,v*v-w)),k=(T-S)/Math.sqrt(m);u=pbt([],d,p,k)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Uv,s=n*Uv,a=Math.cos(s),l=(i/bm+1)*Bc;return[Math.sin(o)*a*l,-Math.cos(o)*a*l,Math.sin(s)*l]}unprojectPosition(t){const[r,n,i]=t,o=tV(t),s=Math.asin(i/o),l=Math.atan2(r,-n)*ML,u=s*ML,c=(o/Bc-1)*bm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Q2(e,t){const r=Bf([],t,e);return RC(r,r,1/r[3]),r}class jV{constructor(t){P(this,"opts",void 0),P(this,"typedArrayManager",void 0),P(this,"indexStarts",[0]),P(this,"vertexStarts",[0]),P(this,"vertexCount",0),P(this,"instanceCount",0),P(this,"attributes",void 0),P(this,"_attributeDefs",void 0),P(this,"data",void 0),P(this,"getGeometry",void 0),P(this,"geometryBuffer",void 0),P(this,"buffers",void 0),P(this,"positionSize",void 0),P(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=yf,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(gr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(a))for(const u of a)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?DV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(const a in o)if(a in i)s.release(n[a]),n[a]=null;else{const l=o[a];l.copy=r,n[a]=s.allocate(n[a],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:s,objectInfo:a}=G_(i,r,n);for(const l of s){a.index++;const u=o?o(l,a):null;t(u,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:s}=this,{startRow:a=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!s)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},a,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof Ce){const f=s.accessor.stride||this.positionSize*4;i=i||s.byteLength/f}else if(s.buffer){const f=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/f}else if(s.value){const f=s.value,h=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},a,l),this.vertexCount=r[r.length-1]}}const ekt=new Uint16Array([0,2,1,0,3,2]),rkt=new Float32Array([0,1,0,0,1,0,1,1]);function nkt(e,t){if(!t)return ikt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),m=okt(e,d,v);u[c*3+0]=m[0],u[c*3+1]=m[1],u[c*3+2]=m[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(a[f++]=c-o,a[f++]=c-o-1,a[f++]=c-1,a[f++]=c-o,a[f++]=c-1,a[f++]=c),c++}}return{vertexCount:s,positions:u,indices:a,texCoords:l}}function ikt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:ekt,texCoords:rkt}}function okt(e,t,r){return ru(ru(e[0],e[1],r),ru(e[3],e[2],r),t)}const skt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,akt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,lkt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(akt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),ukt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ae.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class X_ extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:skt,fs:lkt,modules:[Fu,$u]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:s}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),i.invalidateAll()}if(t.bounds!==r.bounds){const s=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const l in a)s&&s[l]!==a[l]&&i.invalidate(l);this.setState({mesh:a,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const s=ckt(n.color),a=[Math.floor(s[0]*i),Math.floor(s[1]*o)];return n.bitmap={size:{width:i,height:o},uv:s,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return xL(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),nkt(r,this.context.viewport.resolution)}_getModel(t){return t?new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:s,disablePicking:a}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&a||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=ae;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!xL(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const s=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&s===r)return{coordinateConversion:-1,bounds:o};if(i===r&&s===t){const a=za([o[0],o[1]]),l=za([o[2],o[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}P(X_,"layerName","BitmapLayer");P(X_,"defaultProps",ukt);function ckt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function xL(e){return Number.isFinite(e[0])}const fkt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,hkt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,dkt=1024,pkt=4,IL=()=>{},vkt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function gkt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function mkt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function Rp(e){return e&&(e.id||e.url)}function _kt(e,t,r){const n=e.width,i=e.height,o=xB(e,{width:t,height:r});return L1t(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function LL(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],s=Rp(i);e[s]={...i,x:o,y:r}}}function ykt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let l=0;l<e.length;l++){const u=e[l],c=Rp(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>s&&(LL(r,a,i),n=0,i=o+i+t,o=0,a=[]),a.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return a.length>0&&LL(r,a,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:s,canvasHeight:gkt(o+i+t)}}function bkt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=G_(e);for(const s of i){o.index++;const a=t(s,o),l=Rp(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||a.url!==r[l].url)&&(n[l]={...a,source:s,sourceIndex:o.index})}return n}class wkt{constructor(t,{onUpdate:r=IL,onError:n=IL}){P(this,"gl",void 0),P(this,"onUpdate",void 0),P(this,"onError",void 0),P(this,"_loadOptions",null),P(this,"_texture",null),P(this,"_externalTexture",null),P(this,"_mapping",{}),P(this,"_textureParameters",null),P(this,"_pendingCount",0),P(this,"_autoPacking",!1),P(this,"_xOffset",0),P(this,"_yOffset",0),P(this,"_rowHeight",0),P(this,"_buffer",pkt),P(this,"_canvasWidth",dkt),P(this,"_canvasHeight",0),P(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?Rp(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(bkt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:l}=ykt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=l,this._texture||(this._texture=new Sn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||vkt})),this._texture.height!==this._canvasHeight&&(this._texture=_kt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,_1(n.url,dB,this._loadOptions).then(i=>{const o=Rp(n),{x:s,y:a,width:l,height:u}=this._mapping[o],c=mkt(r,i,l,u);this._texture.setSubImageData({data:c,x:s,y:a,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const GV=[0,0,0,255],Skt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:GV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class yu extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:fkt,fs:hkt,modules:[Fu,$u]})}initializeState(){this.state={iconManager:new wkt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:GV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:s,iconMapping:h?a:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:$a[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):qt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}P(yu,"defaultProps",Skt);P(yu,"layerName","IconLayer");const Tkt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,kkt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Pkt=[0,0,0,255],Ckt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:Pkt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class WC extends Vo{getShaders(){return super.getShaders({vs:Tkt,fs:kkt,modules:[Fu,$u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:$a[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}P(WC,"layerName","LineLayer");P(WC,"defaultProps",Ckt);const Ekt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Akt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,OL=[0,0,0,255],Mkt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:OL},getLineColor:{type:"accessor",value:OL},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class jC extends Vo{getShaders(){return super.getShaders({vs:Ekt,fs:Akt,modules:[Fu,$u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:u,radiusUnits:$a[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:$a[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}P(jC,"defaultProps",Mkt);P(jC,"layerName","ScatterplotLayer");const HV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function XV(e,t,r={}){return xkt(e,r)!==t?(Lkt(e,r),!0):!1}function xkt(e,t={}){return Math.sign(Ikt(e,t))}function Ikt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let s=r,a=n-i;s<n;s+=i)o+=(e[s]-e[a])*(e[s+1]+e[a+1]),a=s;return o/2}function Lkt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const l=r+a*i,u=r+(o-1-a)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Di(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function LT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function Dp(e,t,r,n,i=[]){const o=n+t*r;for(let s=0;s<r;s++)i[s]=e[o+s];return i}function OT(e,t,r,n,i=[]){let o,s;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),s=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),s=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),s=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),s=0;else return null;for(let a=0;a<e.length;a++)i[a]=(s&1)===a?n[s]:o*(t[a]-e[a])+e[a];return i}function wm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function YV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/r;let u=[];const c=[u],f=Dp(e,0,r,s);let h,d;const p=ZV(f,i,o,[]),v=[];Di(u,f);for(let m=1;m<l;m++){for(h=Dp(e,m,r,s,h),d=wm(h,p);d;){OT(f,h,d,p,v);const g=wm(v,p);g&&(OT(f,v,g,p,v),d=g),Di(u,v),LT(f,v),Rkt(p,i,d),n&&u.length>r&&(u=[],c.push(u),Di(u,f)),d=wm(h,p)}Di(u,h),LT(f,h)}return n?c:c[0]}const RL=0,Okt=1;function Wv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function qV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=r||{},a=[],l=[{pos:e,types:s?new Array(e.length/n).fill(Okt):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();Dkt(f,n,d[0]||f.length,u),c=ZV(u[0],i,o,c);const p=wm(u[1],c);if(p){let v=DL(f,h,n,0,d[0]||f.length,c,p);const m={pos:v[0].pos,types:v[0].types,holes:[]},g={pos:v[1].pos,types:v[1].types,holes:[]};l.push(m,g);for(let y=0;y<d.length;y++)v=DL(f,h,n,d[y],d[y+1]||f.length,c,p),v[0]&&(m.holes.push(m.pos.length),m.pos=Wv(m.pos,v[0].pos),s&&(m.types=Wv(m.types,v[0].types))),v[1]&&(g.holes.push(g.pos.length),g.pos=Wv(g.pos,v[1].pos),s&&(g.types=Wv(g.types,v[1].types)))}else{const v={positions:f};s&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),a.push(v)}}return a}function DL(e,t,r,n,i,o,s){const a=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const m=Dp(e,a-1,r,n);let g=Math.sign(s&8?m[1]-o[3]:m[0]-o[2]),y=t&&t[a-1],b=0,w=0;for(let T=0;T<a;T++)d=Dp(e,T,r,n,d),p=Math.sign(s&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&g&&g!==p&&(OT(m,d,s,o,h),Di(l,h)&&c.push(y),Di(u,h)&&f.push(y)),p<=0?(Di(l,d)&&c.push(v),b-=p):c.length&&(c[c.length-1]=RL),p>=0?(Di(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=RL),LT(m,d),g=p,y=v;return[b?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function ZV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function Rkt(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function Dkt(e,t,r,n){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,s=c<s?c:s,a=c>a?c:a}return n[0][0]=i,n[0][1]=s,n[1][0]=o,n[1][1]=a,n}const Nkt=85.051129;function Fkt(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},s=e.slice(n,i);KV(s,r,0,i-n);const a=YV(s,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)JV(l,r);return a}function $kt(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const s=[],a=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=zkt(e,n,l,h);for(let v=p;v<h;v++)s[u++]=e[v];for(let v=l;v<p;v++)s[u++]=e[v];KV(s,n,d,u),Bkt(s,n,d,u,r==null?void 0:r.maxLatitude),l=h,a[f]=u}a.pop();const c=qV(s,a,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)JV(f.positions,n);return c}function zkt(e,t,r,n){let i=-1,o=-1;for(let s=r+1;s<n;s+=t){const a=Math.abs(e[s]);a>i&&(i=a,o=s-1)}return o}function Bkt(e,t,r,n,i=Nkt){const o=e[r],s=e[n-t];if(Math.abs(o-s)>180){const a=Dp(e,0,t,r);a[0]+=Math.round((s-o)/360)*360,Di(e,a),a[1]=Math.sign(a[1])*i,Di(e,a),a[0]=o,Di(e,a)}}function KV(e,t,r,n){let i=e[0],o;for(let s=r;s<n;s+=t){o=e[s];const a=o-i;(a>180||a<-180)&&(o-=Math.round(a/360)*360),e[s]=i=o}}function JV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function Vkt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let s=0;s<e.length;s++)for(let a=0;a<t;a++)i[s*t+a]=e[s][a]||0}else i=e;return r?YV(i,{size:t,gridResolution:r}):n?Fkt(i,{size:t}):i}const Ukt=1,Wkt=2,tw=4;class jkt extends jV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?Vkt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(NL(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&NL(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:s}=r;n.fill(0,o,o+s),i?(n[o]=tw,n[o+s-2]=tw):(n[o]+=Ukt,n[o+s-2]+=Wkt),n[o+s-1]=tw}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,s=new Array(3);for(let a=i,l=0;l<o;a++,l++)this.getPointOnPath(t,l,s),n[a*3]=s[0],n[a*3+1]=s[1],n[a*3+2]=s[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function NL(e){return Array.isArray(e[0])}const Gkt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Hkt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,QV=[0,0,0,255],Xkt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:QV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},ew={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class GC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:Gkt,fs:Hkt,modules:[Fu,$u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:ew,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ew,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:ew,defaultValue:QV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new jkt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:$a[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}P(GC,"defaultProps",Xkt);P(GC,"layerName","PathLayer");var HC={exports:{}};HC.exports=Y_;HC.exports.default=Y_;function Y_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=tU(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,f,h,d;if(n&&(o=Jkt(e,t,o,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Np(o,s,r,a,l,d,0),s}function tU(e,t,r,n,i){var o,s;if(i===NT(e,t,r,n)>0)for(o=t;o<r;o+=n)s=FL(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=FL(o,e[o],e[o+1],s);return s&&q_(s,s.next)&&($p(s),s=s.next),s}function bu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(q_(r,r.next)||Xe(r.prev,r,r.next)===0)){if($p(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Np(e,t,r,n,i,o,s){if(!!e){!s&&o&&nPt(e,n,i,o);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?qkt(e,n,i,o):Ykt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),$p(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=Zkt(bu(e),t,r),Np(e,t,r,n,i,o,2)):s===2&&Kkt(e,t,r,n,i,o):Np(bu(e),t,r,n,i,o,1);break}}}}function Ykt(e){var t=e.prev,r=e,n=e.next;if(Xe(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,h=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Vc(i,a,o,l,s,u,p.x,p.y)&&Xe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function qkt(e,t,r,n){var i=e.prev,o=e,s=e.next;if(Xe(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,h=s.y,d=a<l?a<u?a:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=a>l?a>u?a:u:l>u?l:u,m=c>f?c>h?c:h:f>h?f:h,g=RT(d,p,t,r,n),y=RT(v,m,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=g&&w&&w.z<=y;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&Vc(a,c,l,f,u,h,b.x,b.y)&&Xe(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&Vc(a,c,l,f,u,h,w.x,w.y)&&Xe(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&Vc(a,c,l,f,u,h,b.x,b.y)&&Xe(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=y;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&Vc(a,c,l,f,u,h,w.x,w.y)&&Xe(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Zkt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!q_(i,o)&&eU(i,n,n.next,o)&&Fp(i,o)&&Fp(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),$p(n),$p(n.next),n=e=o),n=n.next}while(n!==e);return bu(n)}function Kkt(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&sPt(s,a)){var l=rU(s,a);s=bu(s,s.next),l=bu(l,l.next),Np(s,t,r,n,i,o,0),Np(l,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function Jkt(e,t,r,n){var i=[],o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,u=tU(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(oPt(u));for(i.sort(Qkt),o=0;o<i.length;o++)r=tPt(i[o],r);return r}function Qkt(e,t){return e.x-t.x}function tPt(e,t){var r=ePt(e,t);if(!r)return t;var n=rU(r,e);return bu(n,n.next),bu(r,r.next)}function ePt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var l=s,u=s.x,c=s.y,f=1/0,h;r=s;do n>=r.x&&r.x>=u&&n!==r.x&&Vc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),Fp(r,e)&&(h<f||h===f&&(r.x>s.x||r.x===s.x&&rPt(s,r)))&&(s=r,f=h)),r=r.next;while(r!==l);return s}function rPt(e,t){return Xe(e.prev,e,t.prev)<0&&Xe(t.next,e,e.next)<0}function nPt(e,t,r,n){var i=e;do i.z===0&&(i.z=RT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,iPt(i)}function iPt(e){var t,r,n,i,o,s,a,l,u=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1);return e}function RT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function oPt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Vc(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function sPt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!aPt(e,t)&&(Fp(e,t)&&Fp(t,e)&&lPt(e,t)&&(Xe(e.prev,e,t.prev)||Xe(e,t.prev,t))||q_(e,t)&&Xe(e.prev,e,e.next)>0&&Xe(t.prev,t,t.next)>0)}function Xe(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function q_(e,t){return e.x===t.x&&e.y===t.y}function eU(e,t,r,n){var i=Gv(Xe(e,t,r)),o=Gv(Xe(e,t,n)),s=Gv(Xe(r,n,e)),a=Gv(Xe(r,n,t));return!!(i!==o&&s!==a||i===0&&jv(e,r,t)||o===0&&jv(e,n,t)||s===0&&jv(r,e,n)||a===0&&jv(r,t,n))}function jv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Gv(e){return e>0?1:e<0?-1:0}function aPt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&eU(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Fp(e,t){return Xe(e.prev,e,e.next)<0?Xe(e,t,e.next)>=0&&Xe(e,e.prev,t)>=0:Xe(e,t,e.prev)<0||Xe(e,e.next,t)<0}function lPt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function rU(e,t){var r=new DT(e.i,e.x,e.y),n=new DT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function FL(e,t,r,n){var i=new DT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function $p(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function DT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Y_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(NT(e,0,o,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;s-=Math.abs(NT(e,u,c,r))}var f=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function NT(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}Y_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Hv=HV.CLOCKWISE,$L=HV.COUNTER_CLOCKWISE,wa={isClosed:!0};function uPt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function bd(e){return"positions"in e?e.positions:e}function Sm(e){return"holeIndices"in e?e.holeIndices:null}function cPt(e){return Array.isArray(e[0])}function fPt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function hPt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function dPt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function zL(e,t,r,n,i){let o=t;const s=r.length;for(let a=0;a<s;a++)for(let l=0;l<n;l++)e[o++]=r[a][l]||0;if(!hPt(r))for(let a=0;a<n;a++)e[o++]=r[0][a]||0;return wa.start=t,wa.end=o,wa.size=n,XV(e,i,wa),o}function BL(e,t,r,n,i=0,o,s){o=o||r.length;const a=o-i;if(a<=0)return t;let l=t;for(let u=0;u<a;u++)e[l++]=r[i+u];if(!dPt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return wa.start=t,wa.end=l,wa.size=n,XV(e,s,wa),l}function pPt(e,t){uPt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let s=0;for(let a=0;a<=o.length;a++)s=BL(r,s,i,t,o[a-1],o[a],a===0?Hv:$L),n.push(s);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!cPt(e))return BL(r,0,e,t,0,r.length,Hv),r;if(!fPt(e)){let i=0;for(const[o,s]of e.entries())i=zL(r,i,s,t,o===0?Hv:$L),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return zL(r,0,e,t,Hv),r}function vPt(e,t,r){let n=Sm(e);n&&(n=n.map(o=>o/t));let i=bd(e);if(r){const o=i.length;i=i.slice();const s=[];for(let a=0;a<o;a+=t){s[0]=i[a],s[1]=i[a+1];const l=r(s);i[a]=l[0],i[a+1]=l[1]}}return HC.exports(i,n,t)}class gPt extends jV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=pPt(t,this.positionSize);return this.opts.resolution?qV(bd(r),Sm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?$kt(bd(r),Sm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(VL(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return bd(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&VL(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=vPt(t,this.positionSize,this.opts.preproject);l=a.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;s[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const s=bd(t);for(let a=r,l=0;l<n;a++,l++){const u=s[l*o],c=s[l*o+1],f=o>2?s[l*o+2]:0;i[a*3]=u,i[a*3+1]=c,i[a*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&Sm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),s)for(let a=0;a<s.length;a++)o[r+s[a]/i-1]=0;o[r+n-1]=0}}function VL(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const nU=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,mPt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(nU,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),_Pt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(nU,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),yPt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,M1=[0,0,0,255],bPt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:M1},getLineColor:{type:"accessor",value:M1},material:!0},Xv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class XC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?mPt:_Pt,fs:yPt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Fu,x2t,$u]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===ae.DEFAULT&&(n=ae.LNGLAT),this.setState({numInstances:0,polygonTesselator:new gPt({preproject:n===ae.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||CC(t,ze.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Xv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Xv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Xv,accessor:"getFillColor",defaultValue:M1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Xv,accessor:"getLineColor",defaultValue:M1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:a,target:l})=>this.encodePickingColor(s&&s.__source?s.__source.index:a,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(u),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),n&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,s=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,s;if(n){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,o=new ks(t,{...a,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(s=new ks(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new Nu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}P(XC,"defaultProps",bPt);P(XC,"layerName","SolidPolygonLayer");function wPt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,s=e.length;let a=s,l=s;for(let h=0;h<s;h++){const d=t(e[h]);if(a>h&&d>=i&&(a=h),d>=o){l=h;break}}let u=a;const f=l-a!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:a,endRow:a+n.length}}function SPt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?TPt(e,n,r):null}function TPt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function kPt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let s=0;s<i.length;s++)t(i[s],o),r[n][s*3+0]=o[0],r[n][s*3+1]=o[1],r[n][s*3+2]=o[2]}return r}const PPt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,UL=192/256,WL=[],CPt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class YC extends yu{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:PPt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&qt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:UL,outlineBuffer:i?Math.max(n,UL*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):WL}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):WL}}P(YC,"defaultProps",CPt);P(YC,"layerName","MultiIconLayer");var qC={exports:{}};qC.exports=f0;qC.exports.default=f0;var rf=1e20;function f0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function EPt(e,t,r,n,i,o,s){o.fill(rf,0,t*r),s.fill(0,0,t*r);for(var a=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+a)*t+u+a,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,s[c]=rf;else if(f===0)o[c]=rf,s[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,s[c]=d*d}}}function APt(e,t,r,n,i,o,s){for(var a=0;a<t*r;a++){var l=Math.sqrt(n[a])-Math.sqrt(i[a]);e[a]=Math.round(255-255*(l/o+s))}}f0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,s,a,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,s=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=s+i,a=l+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;s&&l&&(this.ctx.clearRect(f,c,s,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,s,l));var p=new Uint8ClampedArray(o*a);return EPt(d,o,a,s,l,this.gridOuter,this.gridInner),jL(this.gridOuter,o,a,this.f,this.v,this.z),jL(this.gridInner,o,a,this.f,this.v,this.z),APt(p,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:s,height:l,sdfWidth:o,sdfHeight:a,top:u,left:0,advance:n}}};f0.prototype.draw=function(e){return this._draw(e,!1).data};f0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function jL(e,t,r,n,i,o){for(var s=0;s<t;s++)GL(e,s,t,r,n,i,o);for(var a=0;a<r;a++)GL(e,a*t,1,t,n,i,o)}function GL(e,t,r,n,i,o,s){var a,l,u,c;for(o[0]=0,s[0]=-rf,s[1]=rf,a=0;a<n;a++)i[a]=e[t+a*r];for(a=1,l=0,u=0;a<n;a++){do c=o[l],u=(i[a]-i[c]+a*a-c*c)/(a-c)/2;while(u<=s[l]&&--l>-1);l++,o[l]=a,s[l]=u,s[l+1]=rf}for(a=0,l=0;a<n;a++){for(;s[l+1]<a;)l++;c=o[l],e[t+a*r]=i[c]+(a-c)*(a-c)}}const MPt=32,xPt=[];function IPt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function LPt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,u=s;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:a+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:a+l*c,canvasHeight:IPt(a+(l+1)*c)}}function iU(e,t,r,n){let i=0;for(let s=t;s<r;s++){var o;const a=e[s];i+=((o=n[a])===null||o===void 0?void 0:o.width)||0}return i}function oU(e,t,r,n,i,o){let s=t,a=0;for(let l=t;l<r;l++){const u=iU(e,l,l+1,i);a+u>n&&(s<l&&o.push(l),s=l,a=0),a+=u}return a}function OPt(e,t,r,n,i,o){let s=t,a=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>a){let f=iU(e,a,l,i);u+f>n&&(s<a&&(o.push(a),s=a,u=0),f>n&&(f=oU(e,a,l,n,i,o),s=o[o.length-1])),a=l,u+=f}return u}function RPt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const s=[];return t==="break-all"?oU(e,i,o,r,n,s):OPt(e,i,o,r,n,s),s}function DPt(e,t,r,n,i,o){let s=0,a=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(a||(a=c.height),i[l]=s+c.width/2,s+=c.width):(qt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=s,s+=MPt)}o[0]=s,o[1]=a}function HL(e,t,r,n,i){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),u=new Array(s),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let m=0;m<=s;m++){const g=o[m];if((g===`
`||m===s)&&(v=m),v>p){const y=c?RPt(o,r,n,i,p,v):xPt;for(let b=0;b<=y.length;b++){const w=b===0?p:y[b-1],T=b<y.length?y[b]:v;DPt(o,w,T,i,a,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}g===`
`&&(a[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:a,y:l,rowWidth:u,size:f}}function NPt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const s=e.BYTES_PER_ELEMENT,a=r?r/s:1,l=n?n/s:0,u=i[t]||Math.ceil((e.length-l)/a),c=o&&new Set,f=new Array(t);let h=e;if(a>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*a+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,m=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class sU{constructor(t=5){P(this,"limit",void 0),P(this,"_cache",{}),P(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function FPt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Jd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:FPt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},XL=1024,$Pt=.9,YL=1.2,aU=3;let x1=new sU(aU);function zPt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=x1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function BPt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function qL(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function VPt(e){qt.assert(Number.isFinite(e)&&e>=aU,"Invalid cache limit"),x1=new sU(e)}class UPt{constructor(){P(this,"props",{...Jd}),P(this,"_key",void 0),P(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return YL}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=zPt(this._key,this.props.characterSet),i=x1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,x1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=XL);const h=f.getContext("2d");qL(h,i,s,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:m}=LPt({getFontWidth:g=>h.measureText(g).width,fontHeight:s*YL,buffer:a,characterSet:r,maxCanvasWidth:XL,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const g=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(g,0,0)}if(qL(h,i,s,o),l){const g=new qC.exports(s,a,u,c,i,o),y=h.getImageData(0,0,g.size,g.size);for(const b of r)BPt(g.draw(b),y),h.putImageData(y,d[b].x-a,d[b].y+a)}else for(const g of r)h.fillText(g,d[g].x,d[g].y+s*$Pt);return{xOffset:v,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(s," ").concat(a):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const WPt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,jPt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,GPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class ZC extends Vo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:WPt,fs:jPt,modules:[Fu,$u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(a),padding:l,sizeUnits:$a[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new ks(t,{...this.getShaders(),id:this.props.id,geometry:new Nu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}P(ZC,"defaultProps",GPt);P(ZC,"layerName","TextBackgroundLayer");const ZL={start:1,middle:0,end:-1},KL={top:1,center:0,bottom:-1},rw=[0,0,0,255],HPt=1,XPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:rw},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Jd.characterSet},fontFamily:Jd.fontFamily,fontWeight:Jd.fontWeight,lineHeight:HPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:rw},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:rw},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class KC extends H_{constructor(...t){super(...t),P(this,"state",void 0),P(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=HL(f,l,s,a,i),p=ZL[typeof u=="function"?u(r,n):u],v=KL[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),P(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,m]}=HL(f,l,s,a,i),g=ZL[typeof u=="function"?u(r,n):u],y=KL[typeof c=="function"?c(r,n):c],b=h.length,w=new Array(b*2);let T=0;for(let S=0;S<b;S++){const k=(1-g)*(v-p[S])/2;w[T++]=(g-1)*v/2+k+h[S],w[T++]=(y-1)*m/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new UPt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(s),!0;for(const a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,s=r.startIndices,a;const l=n==="auto"&&new Set;if(i&&s){const{texts:u,characterCount:c}=NPt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:s,characterSet:l});a=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=G_(r);s=[0],a=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),a+=h.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:m,getBorderWidth:g,backgroundPadding:y,background:b,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:k,sizeScale:x,sizeUnits:A,sizeMinPixels:I,sizeMaxPixels:L,transitions:N,updateTriggers:z}=this.props,V=this.getSubLayerClass("characters",YC),F=this.getSubLayerClass("background",ZC);return[b&&new F({getFillColor:v,getLineColor:m,getLineWidth:g,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:x/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:I,sizeMaxPixels:L,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getSize:N.getSize,getFillColor:N.getBackgroundColor,getLineColor:N.getBorderColor,getLineWidth:N.getBorderWidth,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:z.getPosition,getAngle:z.getAngle,getSize:z.getSize,getFillColor:z.getBackgroundColor,getLineColor:z.getBorderColor,getLineWidth:z.getBorderWidth,getPixelOffset:z.getPixelOffset,getBoundingRect:{getText:z.getText,getTextAnchor:z.getTextAnchor,getAlignmentBaseline:z.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Jd.smoothing,outlineWidth:S,outlineColor:k,iconAtlas:o,iconMapping:s,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:x*i,sizeUnits:A,sizeMinPixels:I*i,sizeMaxPixels:L*i,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getColor:N.getColor,getSize:N.getSize,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:z.getText,getPosition:z.getPosition,getAngle:z.getAngle,getColor:z.getColor,getSize:z.getSize,getPixelOffset:z.getPixelOffset,getIconOffsets:{getText:z.getText,getTextAnchor:z.getTextAnchor,getAlignmentBaseline:z.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){VPt(t)}}P(KC,"defaultProps",XPt);P(KC,"layerName","TextLayer");const Tm={circle:{type:jC,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:yu,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:KC,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},km={type:GC,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},FT={type:XC,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Bh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function nw(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=n[o],r&&(i.transitions[s]=r[o])),i[s]=a}return i}function YPt(e){if(Array.isArray(e))return e;switch(qt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return qt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function JL(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let s=i;s<o;s++){const a=e[s];qt.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:l}=a;if(l.type==="GeometryCollection"){qt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];QL(f,n,t,a,s)}}else QL(l,n,t,a,s)}return n}function QL(e,t,r,n,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!ZPt(o,s)){qt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":a.push(r({geometry:e},n,i));break;case"MultiPoint":s.forEach(f=>{a.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":s.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),s.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":s.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const qPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function ZPt(e,t){let r=qPt[e];for(qt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function lU(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Yv(e){return e.geometry.coordinates}function KPt(e,t){const r=lU(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Yv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Yv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Yv,r.polygonsOutline.data=s,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Yv,r}function JPt(e,t){const r=lU(),{points:n,lines:i,polygons:o}=e,s=kPt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:s.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const QPt=["points","linestrings","polygons"],tCt={...Bh(Tm.circle),...Bh(Tm.icon),...Bh(Tm.text),...Bh(km),...Bh(FT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Z_ extends H_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=JPt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=YPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),s[u]=[];for(const u of r.dataChanged){const c=JL(n,i,u);for(const f in l)s[f].push(wPt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=JL(n,i);const a=KPt(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=QPt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,FT.type);if(o){const s=nw(this,FT.props),a=t&&r;return a||delete s.getLineColor,s.updateTriggers.lineColors=a,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",s=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,km.type),a=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,km.type);if(s||a){const l=nw(this,km.props);return[s&&new s(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(a=>a.__source.index===i));const o=new Set(t.split("+")),s=[];for(const a of o){const l="points-".concat(a),u=Tm[a],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=nw(this,u.props);let h=r.points;if(a==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}s.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return s}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:s}=i,a=SPt(o,s);return t(a,i)}}}P(Z_,"layerName","GeoJsonLayer");P(Z_,"defaultProps",tCt);class eCt{constructor(t){P(this,"index",void 0),P(this,"isVisible",void 0),P(this,"isSelected",void 0),P(this,"parent",void 0),P(this,"children",void 0),P(this,"content",void 0),P(this,"state",void 0),P(this,"layers",void 0),P(this,"id",void 0),P(this,"bbox",void 0),P(this,"zoom",void 0),P(this,"userData",void 0),P(this,"_abortController",void 0),P(this,"_loader",void 0),P(this,"_loaderId",void 0),P(this,"_isLoaded",void 0),P(this,"_isCancelled",void 0),P(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||qt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:s,bbox:a,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:s,bbox:a,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Gr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},tO=new kt,rCt=new kt;class JC{constructor(t=[0,0,0],r=[0,0,0],n){P(this,"center",void 0),P(this,"halfDiagonal",void 0),P(this,"minimum",void 0),P(this,"maximum",void 0),n=n||tO.copy(t).add(r).scale(.5),this.center=new kt(n),this.halfDiagonal=new kt(r).subtract(this.center),this.minimum=new kt(t),this.maximum=new kt(r)}clone(){return new JC(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=rCt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Gr.INSIDE:o+i<0?Gr.OUTSIDE:Gr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=tO.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Vh=new kt,eO=new kt;class QC{constructor(t=[0,0,0],r=0){P(this,"center",void 0),P(this,"radius",void 0),this.radius=-0,this.center=new kt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Vh.from(r),this.center=new kt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new QC(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,s=Vh.copy(i).subtract(r),a=s.magnitude();if(n>=a+o)return this.clone();if(o>=a+n)return t.clone();const l=(n+a+o)*.5;return eO.copy(s).scale((-n+l)/a).add(r),this.center.copy(eO),this.radius=l,this}expand(t){const n=Vh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=Rbt(Vh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Vh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Gr.OUTSIDE:o<n?Gr.INTERSECTING:Gr.INSIDE}}const nCt=new kt,iCt=new kt,qv=new kt,Zv=new kt,Kv=new kt,oCt=new kt,sCt=new kt,Jo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class tE{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){P(this,"center",void 0),P(this,"halfAxes",void 0),this.center=new kt().from(t),this.halfAxes=new Lr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new kt(t).len(),new kt(r).len(),new kt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new kt(t).normalize(),o=new kt(r).normalize(),s=new kt(n).normalize();return new jI().fromMatrix3(new Lr([...i,...o,...s]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new jI(n),o=new Lr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new kt().from(t),this.halfAxes=o,this}clone(){return new tE(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new QC){const r=this.halfAxes,n=r.getColumn(0,qv),i=r.getColumn(1,Zv),o=r.getColumn(2,Kv),s=nCt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,s=n.y,a=n.z,l=Math.abs(o*i[Jo.COLUMN0ROW0]+s*i[Jo.COLUMN0ROW1]+a*i[Jo.COLUMN0ROW2])+Math.abs(o*i[Jo.COLUMN1ROW0]+s*i[Jo.COLUMN1ROW1]+a*i[Jo.COLUMN1ROW2])+Math.abs(o*i[Jo.COLUMN2ROW0]+s*i[Jo.COLUMN2ROW1]+a*i[Jo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Gr.OUTSIDE:u>=l?Gr.INSIDE:Gr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=iCt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,qv),o=n.getColumn(1,Zv),s=n.getColumn(2,Kv),a=i.magnitude(),l=o.magnitude(),u=s.magnitude();i.normalize(),o.normalize(),s.normalize();let c=0,f;return f=Math.abs(r.dot(i))-a,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(s))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,l=a.getColumn(0,qv),u=a.getColumn(1,Zv),c=a.getColumn(2,Kv),f=oCt.copy(l).add(u).add(c).add(s),h=sCt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,qv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Zv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Kv);return i.transformAsPoint(t),this.halfAxes=new Lr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const rO=new kt,nO=new kt;class bf{constructor(t=[0,0,1],r=0){P(this,"normal",void 0),P(this,"distance",void 0),this.normal=new kt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return Ip(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=rO.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),Ip(Lo(this.normal.len(),1)),this.distance=i,this}clone(){return new bf(this.normal,this.distance)}equals(t){return Lo(this.distance,t.distance)&&Lo(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=nO.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=rO.from(t);const n=this.getPointDistance(t),i=nO.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const iO=[new kt([1,0,0]),new kt([0,1,0]),new kt([0,0,1])],oO=new kt,aCt=new kt;new bf(new kt(1,0,0),0);class ds{constructor(t=[]){P(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*iO.length;const r=t.center,n=t.radius;let i=0;for(const o of iO){let s=this.planes[i],a=this.planes[i+1];s||(s=this.planes[i]=new bf),a||(a=this.planes[i+1]=new bf);const l=oO.copy(o).scale(-n).add(r);-o.dot(l),s.fromPointNormal(l,o);const u=oO.copy(o).scale(n).add(r),c=aCt.copy(o).negate();-c.dot(u),a.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Gr.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Gr.OUTSIDE:return Gr.OUTSIDE;case Gr.INTERSECTING:r=Gr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(Ip(Number.isFinite(r),"parentPlaneMask is required."),r===ds.MASK_OUTSIDE||r===ds.MASK_INSIDE)return r;let n=ds.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&(r&s)===0)continue;const a=i[o],l=t.intersectPlane(a);if(l===Gr.OUTSIDE)return ds.MASK_OUTSIDE;l===Gr.INTERSECTING&&(n|=s)}return n}}P(ds,"MASK_OUTSIDE",4294967295);P(ds,"MASK_INSIDE",0);P(ds,"MASK_INDETERMINATE",2147483647);new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;const wo=new Lr,lCt=new Lr,uCt=new Lr,Jv=new Lr,sO=new Lr;function cCt(e,t={}){const r=aV.EPSILON20,n=10;let i=0,o=0;const s=lCt,a=uCt;s.identity(),a.copy(e);const l=r*fCt(a);for(;o<n&&hCt(a)>l;)dCt(a,Jv),sO.copy(Jv).transpose(),a.multiplyRight(Jv),a.multiplyLeft(sO),s.multiplyRight(Jv),++i>2&&(++o,i=0);return t.unitary=s.toTarget(t.unitary),t.diagonal=a.toTarget(t.diagonal),t}function fCt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const $T=[1,0,0],zT=[2,2,1];function hCt(e){let t=0;for(let r=0;r<3;++r){const n=e[wo.getElementIndex(zT[r],$T[r])];t+=2*n*n}return Math.sqrt(t)}function dCt(e,t){const r=aV.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[wo.getElementIndex(zT[u],$T[u])]);c>n&&(i=u,n=c)}const o=$T[i],s=zT[i];let a=1,l=0;if(Math.abs(e[wo.getElementIndex(s,o)])>r){const u=e[wo.getElementIndex(s,s)],c=e[wo.getElementIndex(o,o)],f=e[wo.getElementIndex(s,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),a=1/Math.sqrt(1+d*d),l=d*a}return Lr.IDENTITY.to(t),t[wo.getElementIndex(o,o)]=t[wo.getElementIndex(s,s)]=a,t[wo.getElementIndex(s,o)]=l,t[wo.getElementIndex(o,s)]=-l,t}const Js=new kt,pCt=new kt,vCt=new kt,gCt=new kt,mCt=new kt,_Ct=new Lr,yCt={diagonal:new Lr,unitary:new Lr};function bCt(e,t=new tE){if(!e||e.length===0)return t.halfAxes=new Lr([0,0,0,0,0,0,0,0,0]),t.center=new kt,t;const r=e.length,n=new kt(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,s=0,a=0,l=0,u=0,c=0;for(const A of e){const I=Js.copy(A).subtract(n);o+=I.x*I.x,s+=I.x*I.y,a+=I.x*I.z,l+=I.y*I.y,u+=I.y*I.z,c+=I.z*I.z}o*=i,s*=i,a*=i,l*=i,u*=i,c*=i;const f=_Ct;f[0]=o,f[1]=s,f[2]=a,f[3]=s,f[4]=l,f[5]=u,f[6]=a,f[7]=u,f[8]=c;const{unitary:h}=cCt(f,yCt),d=t.halfAxes.copy(h);let p=d.getColumn(0,vCt),v=d.getColumn(1,gCt),m=d.getColumn(2,mCt),g=-Number.MAX_VALUE,y=-Number.MAX_VALUE,b=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Js.copy(A),g=Math.max(Js.dot(p),g),y=Math.max(Js.dot(v),y),b=Math.max(Js.dot(m),b),w=Math.min(Js.dot(p),w),T=Math.min(Js.dot(v),T),S=Math.min(Js.dot(m),S);p=p.multiplyByScalar(.5*(w+g)),v=v.multiplyByScalar(.5*(T+y)),m=m.multiplyByScalar(.5*(S+b)),t.center.copy(p).add(v).add(m);const k=pCt.set(g-w,y-T,b-S).multiplyByScalar(.5),x=new Lr([k[0],0,0,0,k[1],0,0,0,k[2]]);return t.halfAxes.multiplyRight(x),t}const Uc=512,aO=3,uU=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],cU=uU.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),wCt=cU.concat([[.25,.5],[.75,.5]]);class Wc{constructor(t,r,n){P(this,"x",void 0),P(this,"y",void 0),P(this,"z",void 0),P(this,"childVisible",void 0),P(this,"selected",void 0),P(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Wc(t,r,n),new Wc(t,r+1,n),new Wc(t+1,r,n),new Wc(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:s,bounds:a,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(a&&!this.insideBounds(a)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<s&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),s=Uc/o;return this.x*s<n&&this.y*s<i&&(this.x+1)*s>t&&(this.y+1)*s>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?wCt:this.z<2?cU:uU,u=[];for(const c of l){const f=BT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return bCt(u)}const i=Math.pow(2,this.z),o=Uc/i,s=this.x*o+r*Uc,a=Uc-(this.y+1)*o;return new JC([s,a,t[0]],[s+o,a+o,t[1]])}}function SCt(e,t,r,n){const i=e instanceof tkt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new bf(d.clone().negate(),p)),s=new ds(o),a=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*a||0,u=r&&r[1]*a||0,c=e instanceof Fo&&e.pitch<=60?t:0;if(n){const[d,p,v,m]=n,g=za([d,m]),y=za([v,p]);n=[g[0],Uc-g[1],y[0],Uc-y[1]]}const f=new Wc(0,0,0),h={viewport:e,project:i,cullingVolume:s,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Fo&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-aO););for(h.offset=1;f.update(h)&&!(++h.offset>aO););}return f.getSelected()}const Cs=512,TCt=[-1/0,-1/0,1/0,1/0],kCt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function fU(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function PCt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function CCt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=PCt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const s=new RegExp("{".concat(o,"}"),"g");i=i.replace(s,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function ECt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,s=e.getBounds({z:i}),a=e.getBounds({z:o});n=[Math.min(s[0],a[0]),Math.min(s[1],a[1]),Math.max(s[2],a[2]),Math.max(s[3],a[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function I1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:s}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+s],u),d=e.unproject([n+o,i+s],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const a=I1({viewport:e,z:t[0],cullRect:r}),l=I1({viewport:e,z:t[1],cullRect:r});return[Math.min(a[0],l[0]),Math.min(a[1],l[1]),Math.max(a[2],l[2]),Math.max(a[3],l[3])]}function ACt(e,t,r){return r?fU(e,r).map(i=>i*t/Cs):e.map(n=>n*t/Cs)}function eE(e,t){return Math.pow(2,e)*Cs/t}function BT(e,t,r){const n=eE(r,Cs),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,s=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,s]}function lO(e,t,r,n){const i=eE(r,n);return[e/i*Cs,t/i*Cs]}function MCt(e,t,r,n,i=Cs){if(e.isGeospatial){const[u,c]=BT(t,r,n),[f,h]=BT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,s]=lO(t,r,n,i),[a,l]=lO(t+1,r+1,n,i);return{left:o,top:s,right:a,bottom:l}}function xCt(e,t,r,n,i){const o=ECt(e,null,n),s=eE(t,r),[a,l,u,c]=ACt(o,s,i),f=[];for(let h=Math.floor(a);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function ICt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=Cs,modelMatrix:s,modelMatrixInverse:a,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(Cs/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return s&&a&&i&&!e.isGeospatial&&(c=fU(i,s)),e.isGeospatial?SCt(e,u,n,i):xCt(e,u,o,c||TCt,a)}const uO=1,K_=2,LCt="never",OCt="no-overlap",rE="best-available",RCt=5,DCt={[rE]:FCt,[OCt]:$Ct,[LCt]:()=>{}};class NCt{constructor(t){P(this,"opts",void 0),P(this,"_requestScheduler",void 0),P(this,"_cache",void 0),P(this,"_dirty",void 0),P(this,"_tiles",void 0),P(this,"_cacheByteSize",void 0),P(this,"_viewport",void 0),P(this,"_zRange",void 0),P(this,"_selectedTiles",void 0),P(this,"_frameNumber",void 0),P(this,"_modelMatrix",void 0),P(this,"_modelMatrixInverse",void 0),P(this,"_maxZoom",void 0),P(this,"_minZoom",void 0),P(this,"onTileLoad",void 0),P(this,"_getCullBounds",u0(I1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new Cvt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new qr,this._modelMatrixInverse=new qr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new qr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!Lo(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const a=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const s=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),s&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,s]=I1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:a}=t;if("west"in a)return a.west<o&&a.east>n&&a.south<s&&a.north>i;const l=Math.min(a.top,a.bottom),u=Math.max(a.top,a.bottom);return a.left<o&&a.right>n&&l<s&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:s}){const{tileSize:a,extent:l,zoomOffset:u}=this.opts;return ICt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:MCt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||rE,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:DCt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:RCt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[s,a]of t)if(a.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?a.byteLength:0,t.delete(s),this.opts.onTileUnload(a)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((s,a)=>s.zoom-a.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new eCt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function FCt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!hU(t)&&nE(t);for(const t of e)t.isVisible=Boolean(t.state&K_)}function $Ct(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&hU(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&K_),r.children&&(r.isVisible||r.state&uO))for(const n of r.children)n.state=uO;else r.isSelected&&nE(r)}function hU(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=K_,!0;t=t.parent}return!1}function nE(e){for(const t of e.children)t.isLoaded||t.content?t.state|=K_:nE(t)}const zCt={TilesetClass:NCt,data:{type:"data",value:[]},dataComparator:kCt.equals,renderSubLayers:{type:"function",value:e=>new Z_(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:rE,zRange:null,maxRequests:6,zoomOffset:0};class J_ extends H_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:s,minZoom:a,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:s,minZoom:a,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,s=this.state.isLoaded!==o,a=this.state.frameNumber!==i;o&&(s||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?CCt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=B_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}P(J_,"defaultProps",zCt);P(J_,"layerName","TileLayer");const BCt={setup(){const e=mt(),t=Ut(),r=wn(),n=Hp();return t.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panPaPos:Object,panBbox:Object,highlightNodes:Set},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,highlightedIconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0,hiddenNodesCount:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},"userStore.mapHideInactive"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},highlightNodes(e){},panPaPos(e){e&&this.deck&&this.panTo(e.x,e.z,-7)}},computed:{iconsCalc(){const e=[];if(this.hiddenNodesCount=0,!this.iconData)return e;const t=[];return this.iconData.forEach(([r,n])=>{if(r in this.scores.pathCosts){this.userStore.mapHideInactive&&this.userStore.autotakenNodes.has(r)==!1&&(this.hiddenNodesCount+=1);const i=this.highlightNodes&&this.highlightNodes.has(r),o={key:r,kind:n,pos:this.iconPositions[r],taken:this.userStore.autotakenNodes.has(r),isHighlighted:i,thisCpCost:this.gameStore.ready?this.gameStore.nodes[r].CP:0};e.push({...o,hidden:this.userStore.mapHideInactive&&!o.taken||i}),t.push({...o,hidden:!i})}}),console.log("iconsCalc",this.hiddenNodesCount,"hidden"),{normal:e,highlighted:t}},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.routing.autotakenGrindNodes.has(t)&&this.userStore.routing.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.gameStore.isLodgingTown(this.clickedObject.key)){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(this.gameStore.jobIsPz(r.job)){const n=this.userStore.pzJobs[r.job.pzk];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o}if(this.gameStore.jobIsWorkshop(r.job)){const n=this.userStore.wsJobs.find(o=>o.worker.tnk==this.clickedObject.key&&o.hk==r.job.hk);let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,128,255]}),i=o}})}}return e}},methods:{makeIconImg:WY,formatFixed:st,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStore.zoom=e.viewState.zoom,this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.townsWithLodging;let i=new ld((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},s={[n]:[]};for(var a;i.size();)a=i.pop(),r[a].forEach(l=>{if(!(l in t))return;const u=o[a]+t[l].CP;l in o?u<o[l]&&(o[l]=u,s[l]=[...s[a],l]):(i.push(l),o[l]=u,s[l]=[...s[a],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:s,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},s={0:0},a={0:0};for(const u of Object.keys(t))s[u]=1/0,a[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=s[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<a[f]&&(s[f]=h,a[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,s[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:s}},makeIconsLayer(){return new yu({data:this.iconsCalc.normal,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:400},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeHighlightedIconsLayer(){return new yu({id:"highlighted",data:this.iconsCalc.highlighted,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:800},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeLineLayer(){return new WC({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState,this.mapStore.target),this.tileLayer=new J_({data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new X_(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),new j_({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],controller:{doubleClickZoom:!1},views:[new U_({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)},panToBbox(e,t,r,n){const i=(e+t)/2,o=(r+n)/2,s=t-e,a=n-r;if(s==0&&a==0){this.panTo(i,o,-9);return}let l=6;for(;l>=0;l--){const u=2**(l-14),c=s*u,f=a*u;if(c<this.deck.viewManager.width&&f<this.deck.viewManager.height)break}this.panTo(i,o,l-14)},panTo(e,t,r){const n={...this.initialViewState};n.target=[e,-t],n.zoom=r,n.transitionDuration=100,n.transitionInterpolator=new V_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:n})}}},VCt={id:"deck-canvas",ref:"canvas"},UCt={id:"hack"},WCt={key:0,id:"topcenter"},jCt=R(") ");function GCt(e,t,r,n,i,o){return E(),M(W,null,[_("canvas",VCt,null,512),_("div",UCt,C(o.iconsCalc.length)+" icons",1),n.userStore.mapHideInactive?(E(),M("div",WCt,[R(C(e.hiddenNodesCount)+" inactive nodes hidden (",1),_("a",{href:"#",onClick:t[0]||(t[0]=s=>n.userStore.mapHideInactive=!1)},"show"),jCt])):Z("",!0)],64)}const HCt=Gt(BCt,[["render",GCt],["__scopeId","data-v-c97689e4"]]);const XCt={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},props:{tk:Number},emits:["selectWorker","editWorker"],components:{},data:()=>({}),computed:{filteredHouses(){const e={};for(const[t,r]of Object.entries(this.userStore.userWorkshops)){const n=this.gameStore.houseInfo[t];if(!n)throw Error(`unknown house ${t}`);n.affTown==this.tk&&(r.industry in e?e[r.industry][t]=r:e[r.industry]={[t]:r})}return e},filteredWorkers(){return this.userStore.userWorkers.filter(e=>e.job&&this.gameStore.jobIsWorkshop(e.job)&&e.job.hk in this.gameStore.houseInfo&&this.gameStore.houseInfo[e.job.hk].affTown==this.tk)}},methods:{formatFixed:st}},dU=e=>(Ue("data-v-c8ec0d1e"),e=e(),We(),e),YCt={key:0},qCt=dU(()=>_("summary",null,"Workshops",-1)),ZCt={class:"vscroll30"},KCt={class:"stickyhead"},JCt=dU(()=>_("thead",null,[_("tr",null,[_("th",null,"house"),_("th",null,"type"),_("th",null,"workload"),_("th",null,"$/cycle"),_("th",null,"CP"),_("th",{colspan:"3"},"worker")])],-1)),QCt=["onUpdate:modelValue"],tEt=["value"],eEt=["onUpdate:modelValue"],rEt=["onUpdate:modelValue"],nEt=["onUpdate:modelValue"],iEt=["onClick"],oEt=["onClick"],sEt={key:0},aEt=["onClick"],lEt={key:1},uEt=["onClick"];function cEt(e,t,r,n,i,o){return Object.keys(o.filteredHouses).length?(E(),M("details",YCt,[qCt,_("div",ZCt,[_("table",KCt,[JCt,_("tbody",null,[(E(!0),M(W,null,gt(o.filteredHouses,(s,a)=>(E(),M(W,null,[(E(!0),M(W,null,gt(s,(l,u)=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.char[u])+" "+C(l.label),1),_("td",null,[et(_("select",{"onUpdate:modelValue":c=>l.industry=c},[(E(!0),M(W,null,gt(n.gameStore.industries,(c,f)=>(E(),M("option",{value:f},C(c),9,tEt))),256))],8,QCt),[[He,l.industry]])]),_("td",null,[et(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualWorkload=c},null,8,eEt),[[zt,l.manualWorkload,void 0,{number:!0}]])]),_("td",null,[et(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualCycleIncome=c},null,8,rEt),[[zt,l.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[et(_("input",{type:"number",class:"float4","onUpdate:modelValue":c=>l.manualCp=c},null,8,nEt),[[zt,l.manualCp,void 0,{number:!0}]])]),_("td",null,[(E(!0),M(W,null,gt(o.filteredWorkers.filter(c=>c.job.hk==u),c=>(E(),M("div",null,[_("button",{onClick:f=>this.$emit("editWorker",c)},"edit",8,iEt),R(" "+C(n.userStore.workerLabel(c))+" @ ",1),n.userStore.displayProfitPerCp?(E(),M(W,{key:0},[R(C(o.formatFixed(n.userStore.workerIncomePerCp(c),2))+" M$/day/CP ",1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.userStore.workerIncome(c),2))+" M$/day ",1)],64)),_("button",{onClick:f=>c.job=null},"stop",8,oEt)]))),256)),l.industry=="mass"?(E(),M("div",sEt,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"add",8,aEt)])):o.filteredWorkers.filter(c=>c.job.hk==u).length==0?(E(),M("div",lEt,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"send",8,uEt)])):Z("",!0)])]))),256))],64))),256))])])])])):Z("",!0)}const fEt=Gt(XCt,[["render",cEt],["__scopeId","data-v-c8ec0d1e"]]);const hEt={setup(){const e=Ut(),t=mt(),r=wn(),n=Hp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{Worker:Gk,TownWorkers:i7,TownWorkshops:fEt,Plantzone:s7},props:{clickedNode:Object},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos","showResourceDialog","setClickedNode","selectWorker"],data:()=>({}),methods:{formatFixed:st,jobCashFlowPercent(e){return e.profit.priceDaily/this.userStore.currentNodesCashflow[this.clickedNode.key]},selectLodging(e){this.$emit("selectLodging",e)},selectHouses(e){this.$emit("selectHouses",e)},hireWorker(e){this.$emit("hireWorker",e)},editWorker(e){this.$emit("editWorker",e)},sendWorker(e){this.$emit("sendWorker",e)},panToPaPos(e){this.$emit("panToPaPos",e)},showResourceDialog(e){this.$emit("showResourceDialog",e)},setClickedNode(e){this.$emit("setClickedNode",e)},selectWorker(e){this.$emit("selectWorker",e)}},computed:{activeNodeJobs_sorted(){const e=this.userStore.currentNodesJobs[this.clickedNode.key];return e.sort((t,r)=>this.jobCashFlowPercent(r)-this.jobCashFlowPercent(t)),e}},mounted(){},updated(){}},pU=e=>(Ue("data-v-f115b063"),e=e(),We(),e),dEt={key:0,id:"mapObjDetail"},pEt=pU(()=>_("div",null,"\u02C5",-1)),vEt=[pEt],gEt={key:0,id:"clickedTownInfo",class:"vscrollable"},mEt={class:"vscroll40"},_Et={class:"stickyhead"},yEt={key:1,id:"clickedTownInfo",class:"vscrollable"},bEt={key:2,id:"clickedNodeName"},wEt=R(),SEt=pU(()=>_("abbr",{class:"tooltip",title:"is involved in a zero-cost path"},"\u2139",-1)),TEt={key:0,class:"fsxs"},kEt=R(" shared by active nodejobs: "),PEt=["onClick"],CEt={key:1},EEt=["checked"],AEt=R(" zero-cost connection to nearest town (invested for droprate) "),MEt={key:3,id:"clickedPlantzoneInfo"},xEt=["checked"],IEt=R(" zero-cost connection to nearest town (invested for droprate) ");function LEt(e,t,r,n,i,o){const s=Ot("TownWorkers"),a=Ot("TownWorkshops"),l=Ot("Plantzone");return r.clickedNode?(E(),M("div",dEt,[_("div",{class:"rolldown",onClick:t[0]||(t[0]=u=>o.setClickedNode(null))},vEt),n.gameStore.isLodgingTown(r.clickedNode.key)?(E(),M("div",gEt,[_("div",mEt,[_("table",_Et,[ht(s,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(r.clickedNode.key)],tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"])])]),n.userStore.userWorkshops?(E(),yr(a,{key:0,tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectWorker:o.selectWorker,onEditWorker:o.editWorker},null,8,["tk","onSelectWorker","onEditWorker"])):Z("",!0)])):n.gameStore.townsWithRentableStorageSet.has(r.clickedNode.key)?(E(),M("div",yEt,[_("button",{onClick:t[1]||(t[1]=u=>this.$emit("selectHouses",n.gameStore.tnk2tk(r.clickedNode.key))),class:_r({unresolved:n.gameStore.ready&&n.userStore.townsInfra[n.gameStore.tnk2tk(r.clickedNode.key)].success==!1})}," config ",2)])):Z("",!0),n.gameStore.isConnectionNode(r.clickedNode.key)?(E(),M("div",bEt,[_("p",null,[R(C(n.gameStore.uloc.node[r.clickedNode.key])+" ",1),n.userStore.routing.autotakenGrindNodes.has(r.clickedNode.key)?(E(),M(W,{key:0},[_("s",null,C(r.clickedNode.thisCpCost)+"CP",1),wEt,SEt],64)):(E(),M(W,{key:1},[R(C(r.clickedNode.thisCpCost)+"CP ",1)],64))]),r.clickedNode.key in n.userStore.currentNodesJobs?(E(),M("p",TEt,[kEt,(E(!0),M(W,null,gt(o.activeNodeJobs_sorted,u=>(E(),M("p",null,[R(C(o.formatFixed(o.jobCashFlowPercent(u)*100))+"% - ",1),this.gameStore.jobIsPz(u.worker.job)?(E(),M("span",{key:0,onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.pzk].pos),class:"clickable"},C(n.gameStore.plantzoneName(u.pzk)),9,PEt)):(E(),M("span",CEt,C(n.gameStore.uloc.char[u.worker.job.hk])+" "+C(n.userStore.userWorkshops[u.worker.job.hk].label),1)),R(" @ "+C(o.formatFixed(u.profit.priceDaily,2))+" M$/day ",1)]))),256))])):Z("",!0),_("input",{type:"checkbox",onChange:t[2]||(t[2]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,EEt),AEt])):Z("",!0),n.gameStore.isPlantzone(r.clickedNode.key)?(E(),M("div",MEt,[n.userStore.grindTakenSet.has(r.clickedNode.key)?(E(),M(W,{key:0},[_("input",{type:"checkbox",onChange:t[3]||(t[3]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,xEt),IEt],64)):Z("",!0),ht(l,{pzk:r.clickedNode.key,onShowResourceDialog:o.showResourceDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowResourceDialog","onEditWorker"])])):Z("",!0)])):Z("",!0)}const OEt=Gt(hEt,[["render",LEt],["__scopeId","data-v-f115b063"]]);const REt={setup(){const e=Ut(),t=mt(),r=wn();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],components:{WorkerJobDescription:e_,ItemIcon:fi},data:()=>({activeTab:"daily",selectedRedirect:-1}),methods:{formatFixed:st,strShortenLeft:YY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=Ut(),r=mt();let n=[];this.gameStore.townsWithLodging.forEach(o=>{const s=this.gameStore.dijDiscountedNearestPlantzones(o,12);n[o]=s});let i=[];for(const[o,s]of Object.entries(n))s.forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=r.profitPzTownArtisans(a,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=this.selectedRedirect<0?f:r.tnk2tk(this.selectedRedirect),d=this.selectedRedirect==-2?new Set:r.plantzones[a].itemkeys,p=t.townInfraAddCost(f,1,d,h);c.townCp=p.cost,c.townCpTooltip=p.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},Rr=e=>(Ue("data-v-7f09ec67"),e=e(),We(),e),DEt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},NEt={key:0},FEt={class:"stickyhead"},$Et=Rr(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Qty"),_("th",null,"M$")])],-1)),zEt={class:"right"},BEt={class:"right"},VEt=R(" Cycles total:"),UEt=Rr(()=>_("br",null,null,-1)),WEt=Rr(()=>_("br",null,null,-1)),jEt=Rr(()=>_("br",null,null,-1)),GEt=R(" \u{1F33B}farming: "),HEt=Rr(()=>_("abbr",{class:"tooltip",title:"no idea, depends on weather"},"0",-1)),XEt=Rr(()=>_("br",null,null,-1)),YEt=Rr(()=>_("span",{class:"fsxs"}," Sorted by efficiency with your currently assigned worker. Might be the node is alright but is using a bad worker! ",-1)),qEt={class:"stickyhead"},ZEt=Rr(()=>_("thead",null,[_("tr",null,[_("th",{rowspan:"2"},"town"),_("th",{rowspan:"2"},"job"),_("th",{rowspan:"2"},"M$/day"),_("th",{colspan:"2"},"CP"),_("th",{rowspan:"2"},[R(" efficiency "),_("abbr",{class:"tooltip",title:"profit divided by CP"},"\u2139")])]),_("tr",null,[_("th",{class:"rowspanned colspanned"},[R(" \xA0job "),_("abbr",{class:"tooltip",title:"cost of the node (for plantzones) OR cost of the house (for workshops)"},"\u2139")]),_("th",{class:"colspanned"},[R(" town "),_("abbr",{class:"tooltip",title:"worker lodging + material storage"},"\u2139")])])],-1)),KEt=["onClick"],JEt={class:""},QEt={class:"hlim parent"},tAt=["onClick"],eAt={class:"hlim right"},rAt={key:1,class:"hlim left"},nAt={class:"tac"},iAt={class:"tac"},oAt={class:"tac"},sAt={class:"tac"},aAt={class:"fsxs"},lAt=R(" Compares 12 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans. Stash at: "),uAt=Rr(()=>_("option",{value:"-2"},"ignore storage cost",-1)),cAt=Rr(()=>_("option",{value:"-1"},"worker hometown",-1)),fAt=Rr(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),hAt=["value"],dAt={class:"stickyhead"},pAt=Rr(()=>_("th",null,"\u{1F6CF}\uFE0Ftown",-1)),vAt=Rr(()=>_("th",null,"job",-1)),gAt=Rr(()=>_("th",null,"worker",-1)),mAt=Rr(()=>_("th",null,"+M$/day",-1)),_At=Rr(()=>_("th",null,"+CP",-1)),yAt=Rr(()=>_("th",null,"M$/day/CP",-1)),bAt=["onClick"],wAt={class:"hlim parent"},SAt=["onClick"],TAt={class:"hlim right"},kAt={class:"tac"},PAt=["title"],CAt={class:"tac"},EAt={class:"tac"},AAt=["title"],MAt=R("+"),xAt=["title"],IAt={class:"tac"};function LAt(e,t,r,n,i,o){const s=Ot("ItemIcon"),a=Ot("RouterLink"),l=Ot("WorkerJobDescription");return E(),M(W,null,[_("nav",DEt,[_("span",{onClick:t[0]||(t[0]=u=>e.activeTab="daily"),class:_r({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),_("span",{onClick:t[1]||(t[1]=u=>e.activeTab="worst"),class:_r({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),_("span",{onClick:t[2]||(t[2]=u=>e.activeTab="best"),class:_r({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(E(),M("div",NEt,[_("table",FEt,[$Et,_("tbody",null,[(E(!0),M(W,null,gt(n.userStore.jobsTally,(u,c)=>(E(),M("tr",null,[_("td",null,[ht(s,{ik:Number(c),with_name:!0},null,8,["ik"])]),_("td",zEt,C(o.formatFixed(u,u<1?2:u<10?1:0)),1),_("td",BEt,C(o.formatFixed(this.marketStore.priceBunch({[c]:u}).val/1e6,2)),1)]))),256))])]),VEt,UEt,R(" \u{1F5FA}\uFE0Fplantzones: "+C(o.formatFixed(n.userStore.cyclesTally.pz)),1),WEt,n.userStore.cyclesTally.workshop>0?(E(),M(W,{key:0},[R(" \u{1F3ED}workshops: "+C(o.formatFixed(n.userStore.cyclesTally.workshop)),1),jEt],64)):Z("",!0),GEt,HEt,XEt,R(" = "+C(o.formatFixed(n.userStore.cyclesTally.chicken))+" chicken/day ",1)])):Z("",!0),e.activeTab=="worst"?(E(),M(W,{key:1},[YEt,_("table",qEt,[ZEt,_("tbody",null,[(E(!0),M(W,null,gt(n.userStore.workersSortedByIncomePerCp,({w:u,i:c,ipc:f})=>(E(),M("tr",null,[_("td",null,[_("span",{onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos,-7),class:"clickable"},C(n.gameStore.uloc.town[n.gameStore.tnk2tk(u.tnk)]),9,KEt)]),_("td",JEt,[_("div",QEt,[this.gameStore.jobIsPz(u.job)?(E(),M(W,{key:0},[_("span",{class:"hlim left clickable",onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.job.pzk].pos)},C(n.gameStore.parentNodeName(u.job.pzk)),9,tAt),_("span",eAt,[(E(!0),M(W,null,gt(n.gameStore.plantzones[u.job.pzk].itemkeys,h=>(E(),yr(a,{tag:"a",to:{path:"./settings",hash:"#item"+h}},{default:be(()=>[ht(s,{ik:Number(h)},null,8,["ik"])]),_:2},1032,["to"]))),256))])],64)):(E(),M("span",rAt,[ht(l,{w:u},null,8,["w"])]))])]),_("td",nAt,C(o.formatFixed(c,2)),1),_("td",iAt,C(o.formatFixed(n.userStore.workerSharedConnectionCP(u),2)),1),_("td",oAt,C(o.formatFixed(n.userStore.workerSharedLodgageCP(u).value,2)),1),_("td",sAt,C(o.formatFixed(f,2)),1)]))),256))])])],64)):Z("",!0),e.activeTab=="best"?(E(),M(W,{key:2},[_("span",aAt,[lAt,et(_("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>e.selectedRedirect=u),class:"fsxs"},[uAt,cAt,fAt,(E(!0),M(W,null,gt(n.gameStore.townsWithRedirectableStorage,u=>(E(),M("option",{value:u},C(n.gameStore.uloc.node[u]),9,hAt))),256))],512),[[He,e.selectedRedirect]])]),_("table",dAt,[_("thead",null,[_("tr",null,[pAt,vAt,gAt,mAt,_At,yAt,Z("",!0)])]),_("tbody",null,[(E(!0),M(W,null,gt(o.untakenPlantzonesNearestCpTownProfit,u=>(E(),M("tr",null,[_("td",null,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos),class:"clickable"},C(n.gameStore.nodeName(u.tnk)),9,bAt)]),_("td",null,[_("div",wAt,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.key].pos),class:"hlim left clickable"},C(n.gameStore.parentNodeName(u.key)),9,SAt),_("span",TAt,[(E(!0),M(W,null,gt(u.itemkeys,c=>(E(),yr(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:be(()=>[ht(s,{ik:Number(c)},null,8,["ik"])]),_:2},1032,["to"]))),256))])])]),_("td",kAt,[u.alt_workers?(E(),M("abbr",{key:0,class:"tooltip nound",title:u.alt_workers.map(c=>`${n.gameStore.uloc.char[c.charkey]}: ${o.formatFixed(c.priceDaily,2)} M$/day = ${o.formatFixed(100*c.priceDaily/u.priceDaily)}%`).join(`
`)},C({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[u.kind]),9,PAt)):Z("",!0)]),_("td",CAt,C(o.formatFixed(u.priceDaily,2)),1),_("td",EAt,[_("abbr",{title:Array.from(u.path,c=>`${n.userStore.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`),class:"tooltip"},C(o.formatFixed(u.cp)),9,AAt),MAt,_("abbr",{title:u.townCpTooltip,class:"tooltip"},C(o.formatFixed(u.townCp)),9,xAt),R("="+C(o.formatFixed(u.cp+u.townCp)),1)]),_("td",IAt,C(o.formatFixed(u.dailyPerCp,2)),1),Z("",!0)]))),256))])])],64)):Z("",!0)],64)}const OAt=Gt(REt,[["render",LAt],["__scopeId","data-v-7f09ec67"]]);const RAt={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{tk:Number,hk:Number,show:{type:Boolean,default:!1}},data:()=>({}),watch:{},methods:{formatFixed:st,workshopNearestTownsFreeWorkersProfits(e){const t=this.gameStore.houseInfo[this.hk].affTown,r=this.gameStore.tk2tnk(t),n=this.userStore.userWorkshops[this.hk].manualCp,i=[];return this.gameStore.dijkstraNearestTowns(r,e,this.userStore.autotakenNodes,!0).forEach(([s,a,l])=>{const u=this.gameStore._tnk2tk[s];this.userStore.getFreeWorkers(u).forEach(f=>{i.push(this.gameStore.workshopSelectionEntry(this.hk,u,s,l,f,a,n))})}),i.sort((s,a)=>a.dailyPerCp-s.dailyPerCp),i},assign(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:Number(t),recipe:void 0}),this.$emit("update:show",!1)}},computed:{freeWorkers(){return this.workshopNearestTownsFreeWorkersProfits(99)},workshop(){return this.userStore.userWorkshops[this.hk]}}},vU=e=>(Ue("data-v-f1c69c13"),e=e(),We(),e),DAt=vU(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),NAt=R("): "),FAt=R(" None "),$At={key:0},zAt=vU(()=>_("tr",null,[_("th",null,"town"),_("th",null,"worker"),_("th",null,"walk"),_("th",null,"cycles/day"),_("th",null,"+M$/day"),_("th",null,"+CP"),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),BAt={key:0},VAt={class:"fsxs"},UAt={class:"center"},WAt=["title"],jAt=R("+"),GAt={class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},HAt=R("+"),XAt=["title"],YAt={class:"center"},qAt=["onClick"];function ZAt(e,t,r,n,i,o){return r.hk?(E(),M(W,{key:0},[_("div",null,[R("Nearest idle workers for "+C(n.gameStore.uloc.char[r.hk])+" "+C(o.workshop.label?'"'+o.workshop.label+'"':"")+" ("+C(o.workshop.manualWorkload)+" workload, "+C(o.workshop.manualCycleIncome)+" $/cycle, type: "+C(o.workshop.industry)+" ",1),DAt,NAt,o.freeWorkers.length==0?(E(),M(W,{key:0},[FAt],64)):Z("",!0)]),o.freeWorkers.length?(E(),M("table",$At,[zAt,(E(!0),M(W,null,gt(o.freeWorkers,s=>(E(),M(W,null,[s.profit.distance<1e6?(E(),M("tr",BAt,[_("td",null,C(n.gameStore.nodeName(s.tnk)),1),_("td",null,[R(C(s.w.label)+" ",1),_("span",VAt,C(o.formatFixed(s.profit.statsOnWs.wspd,2))+"\u{1F528} "+C(o.formatFixed(s.profit.statsOnWs.mspd,2))+"\u{1F9B6} "+C(o.formatFixed(s.profit.statsOnWs.luck,2))+"\u{1F340} ",1)]),_("td",null,C(o.formatFixed(s.profit.distance)),1),_("td",null,C(o.formatFixed(s.profit.cyclesDaily,1)),1),_("td",UAt,C(o.formatFixed(s.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(s.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},C(s.mapCp),9,WAt),jAt,_("abbr",GAt,C(s.houseCp),1),HAt,_("abbr",{class:"tooltip",title:s.infraTooltip},C(s.townCp),9,XAt),R("="+C(s.cp),1)]),_("td",YAt,C(o.formatFixed(s.dailyPerCp,3)),1),_("td",null,[_("button",{onClick:a=>o.assign(s.w,r.hk)}," assign ",8,qAt)])])):Z("",!0)],64))),256))])):Z("",!0)],64)):Z("",!0)}const KAt=Gt(RAt,[["render",ZAt],["__scopeId","data-v-f1c69c13"]]);const JAt={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{visible:Boolean},emits:["close","select"],components:{ItemIcon:fi},data(){return{searchQuery:"",searchResults:[],emptySet:new Set([])}},computed:{itemNamesKeys(){const e={};return this.gameStore.ready&&Object.keys(this.gameStore.itemkeyPlantzones).forEach(t=>{const r=this.gameStore.uloc.item[t];e[r]=Number(t)}),e}},watch:{searchQuery(e){this.searchResults={};let t=0;for(const[r,n]of Object.entries(this.itemNamesKeys))if(r.toLowerCase().includes(e.toLowerCase())&&(this.searchResults[r]={hlSet:n in this.gameStore.itemkeyPlantzones?this.gameStore.itemkeyPlantzones[n]:new Set([]),type:"dropsItem",itemKey:n},t++,t>=10))break;t=0;for(const[r,n]of Object.entries(this.gameStore.uloc.node)){if(n.toLowerCase().includes(e.toLowerCase())&&(n in this.searchResults||(this.searchResults[n]={type:"name",hlSet:new Set([])}),this.searchResults[n].hlSet.add(Number(r)),t++,t>=10))break;const i=`${r}`;if(i.toLowerCase().includes(e.toLowerCase())&&(i in this.searchResults||(this.searchResults[i]={type:"key",hlSet:new Set([])}),this.searchResults[i].hlSet.add(Number(r)),t++,t>=10))break}}},methods:{onInput(){this.searchQuery===""&&(this.searchResults={})},selectItem(e){this.$emit("select",e),this.$emit("close")},focusInput(){var e;(e=this.$refs.searchInput)==null||e.focus()}}},QAt={key:0,class:"search-bar"},t4t={key:0},e4t=["onClick"];function r4t(e,t,r,n,i,o){const s=Ot("ItemIcon");return r.visible?(E(),M("div",QAt,[et(_("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>i.searchQuery=a),onInput:t[1]||(t[1]=(...a)=>o.onInput&&o.onInput(...a)),ref:"searchInput",placeholder:"Search..."},null,544),[[zt,i.searchQuery]]),_("button",{onClick:t[2]||(t[2]=a=>o.selectItem(i.emptySet))},"reset"),i.searchResults?(E(),M("ul",t4t,[(E(!0),M(W,null,gt(i.searchResults,(a,l)=>(E(),M("li",{onClick:u=>o.selectItem(a.hlSet)},[a.type=="dropsItem"?(E(),M(W,{key:0},[ht(s,{ik:a.itemKey},null,8,["ik"]),R(" "+C(l)+" ("+C(a.hlSet.size)+" nodes) ",1)],64)):a.type=="name"?(E(),M(W,{key:1},[R(" \u{1F5FA}\uFE0F "+C(l),1)],64)):a.type=="key"?(E(),M(W,{key:2},[R(" \u{1F5FA}\uFE0F "+C(l)+" - "+C(n.gameStore.uloc.node[l]),1)],64)):Z("",!0)],8,e4t))),256))])):Z("",!0)])):Z("",!0)}const n4t=Gt(JAt,[["render",r4t]]);const i4t={setup(){const e=mt(),t=Ut(),r=wn(),n=Hp();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{ItemIcon:fi,Worker:Gk,TownWorkers:i7,Plantzone:s7,ModalDialog:Xk,WorkerEdit:jz,WorkerSendSelection:t0t,LodgingSelection:c0t,HousesSelection:evt,NodeMap:HCt,MapSelectedInfo:OEt,EmpireOverview:OAt,FloatingResourceEdit:vC,WorkerSelection:KAt,SearchBar:n4t},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:0,housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,resourceDialogWspd:150,resourceDialogRgroup:1,resourceDialogWkld:400,resourceDialogVisible:!1,panToPzk:null,panPaPos:null,selectWorkerDialogVisible:!1,selectWorkerHouseKey:0,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1,showSearchBar:!1,highlightNodes:new Set([])}),created(){console.log("addEventListener"),window.addEventListener("keydown",this.onKeydown)},watch:{},computed:{},mounted(){},beforeUnmount(){window.removeEventListener("keydown",this.onKeydown)},methods:{formatFixed:st,randBetween:va,levelup:Id,onKeydown(e){e.ctrlKey&&e.code==="KeyF"&&(e.preventDefault(),this.showSearchBar=!0,su(()=>this.$refs.searchBar.focusInput())),e.key==="Escape"&&(this.showSearchBar?this.showSearchBar=!1:this.handleSearchSelection(new Set([])))},handleSearchSelection(e){this.highlightNodes=e,su(()=>{if(this.$refs.nodeMap.updateLayers(),e.size>0){let t=1e99,r=1e99,n=-1e99,i=-1e99;e.forEach(o=>{t=Math.min(t,this.gameStore.nodes[o].pos.x),r=Math.min(r,this.gameStore.nodes[o].pos.z),n=Math.max(n,this.gameStore.nodes[o].pos.x),i=Math.max(i,this.gameStore.nodes[o].pos.z)}),this.$refs.nodeMap.panToBbox(t,n,r,i)}}),this.showSearchBar=!1},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.userStore.newWorkerName(e),r=7572;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:r,label:t,level:1,wspdSheet:this.gameStore.workerStatic[r].wspd/1e6,mspdSheet:this.gameStore.workerStatic[r].mspd/100,luckSheet:this.gameStore.workerStatic[r].luck/1e4,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),Id(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},selectWorker(e){this.selectWorkerHouseKey=e,this.selectWorkerDialogVisible=!0,console.log("selectWorkerDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);for(let n=r.userWorkers.length-1;n>=0;n--){const i=r.userWorkers[n].charkey;i in this.gameStore.workerStatic||(console.log(`unknown charkey ${i} - discarded`),r.userWorkers.splice(n,1))}r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk`,n.job),n.job=null),Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showResourceDialog(e){this.resourceDialogVisible=!0,this.resourceDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.resourceDialogWkld=this.gameStore.plantzones[e].peg.time,this.resourceDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))},panToPaPos(e){this.panPaPos=e},setClickedNode(e){this.clickedNode=e}},mounted(){this.panToHash()}},Se=e=>(Ue("data-v-95acd89c"),e=e(),We(),e),o4t=Se(()=>_("button",null,"import",-1)),s4t=Se(()=>_("br",null,null,-1)),a4t={style:{width:"24em"}},l4t=R("Test with workspeed: "),u4t={id:"canvas-limiter"},c4t={key:0},f4t={key:1},h4t=Se(()=>_("br",null,null,-1)),d4t=Se(()=>_("br",null,null,-1)),p4t={id:"topleft"},v4t=Se(()=>_("summary",null,"Empire",-1)),g4t={id:"leftside"},m4t={id:"rightside"},_4t={id:"totals"},y4t={class:"fsxs"},b4t=Se(()=>_("br",null,null,-1)),w4t={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},S4t={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},T4t=Se(()=>_("br",null,null,-1)),k4t=Se(()=>_("br",null,null,-1)),P4t=Se(()=>_("br",null,null,-1)),C4t={class:"fsxs"},E4t=R(" invested for droprate: "),A4t=["title"],M4t=Se(()=>_("br",null,null,-1)),x4t=Se(()=>_("br",null,null,-1)),I4t=Se(()=>_("br",null,null,-1)),L4t=Se(()=>_("br",null,null,-1)),O4t=Se(()=>_("br",null,null,-1)),R4t=Se(()=>_("br",null,null,-1)),D4t={class:"fsxs"},N4t=Se(()=>_("br",null,null,-1)),F4t=Se(()=>_("br",null,null,-1)),$4t=Se(()=>_("br",null,null,-1)),z4t=Se(()=>_("br",null,null,-1)),B4t=R(" (M$/day/CP) "),V4t={class:"fsxs"},U4t=Se(()=>_("br",null,null,-1)),W4t=Se(()=>_("br",null,null,-1)),j4t=Se(()=>_("br",null,null,-1)),G4t=Se(()=>_("br",null,null,-1)),H4t=Se(()=>_("label",{for:"wr_cb"}," wasm routing",-1)),X4t=Se(()=>_("div",{style:{clear:"both"}},null,-1)),Y4t={id:"workerlist"},q4t=Se(()=>_("summary",null,"All towns/workers list",-1)),Z4t=R(" show: "),K4t={class:"switch mauto"},J4t=Se(()=>_("span",{class:"slider"},null,-1)),Q4t=R(" names "),tMt={class:"switch mauto"},eMt=["disabled"],rMt=Se(()=>_("span",{class:"slider"},null,-1)),nMt=R(" stat ranks "),iMt={class:"switch mauto"},oMt=["disabled"],sMt=Se(()=>_("span",{class:"slider"},null,-1)),aMt=R(" stats after skills "),lMt={class:"switch mauto"},uMt=Se(()=>_("span",{class:"slider"},null,-1)),cMt=R(" efficiency ");function fMt(e,t,r,n,i,o){const s=Ot("WorkerEdit"),a=Ot("ModalDialog"),l=Ot("WorkerSendSelection"),u=Ot("LodgingSelection"),c=Ot("HousesSelection"),f=Ot("WorkerSelection"),h=Ot("FloatingResourceEdit"),d=Ot("NodeMap"),p=Ot("ItemIcon"),v=Ot("EmpireOverview"),m=Ot("MapSelectedInfo"),g=Ot("search-bar"),y=Ot("TownWorkers");return E(),M(W,null,[ht(a,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=b=>e.workerDialogVisible=b)},{default:be(()=>[ht(s,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=b=>e.workerDialogVisible=b)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),ht(a,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=b=>e.sendDialogVisible=b)},{default:be(()=>[ht(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=b=>e.sendDialogVisible=b)},null,8,["w","show"])]),_:1},8,["show"]),ht(a,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=b=>e.lodgingDialogVisible=b)},{default:be(()=>[ht(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=b=>e.lodgingDialogVisible=b)},null,8,["tk","o","show"])]),_:1},8,["show"]),ht(a,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=b=>e.housesDialogVisible=b)},{default:be(()=>[ht(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=b=>e.housesDialogVisible=b)},null,8,["tk","show"])]),_:1},8,["show"]),ht(a,{show:e.selectWorkerDialogVisible,"onUpdate:show":t[9]||(t[9]=b=>e.selectWorkerDialogVisible=b)},{default:be(()=>[ht(f,{hk:e.selectWorkerHouseKey,show:e.selectWorkerDialogVisible,"onUpdate:show":t[8]||(t[8]=b=>e.selectWorkerDialogVisible=b)},null,8,["hk","show"])]),_:1},8,["show"]),ht(a,{show:e.importDialogVisible,"onUpdate:show":t[12]||(t[12]=b=>e.importDialogVisible=b)},{default:be(()=>[_("form",{onSubmit:t[11]||(t[11]=ap(b=>o.fileImport(b),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[10]||(t[10]=b=>o.fileImport())}),o4t,s4t],32)]),_:1},8,["show"]),ht(a,{show:e.resourceDialogVisible,"onUpdate:show":t[15]||(t[15]=b=>e.resourceDialogVisible=b)},{default:be(()=>[ht(h,{rgk:e.resourceDialogRgroup,wspd:e.resourceDialogWspd,workload:e.resourceDialogWkld,show:e.resourceDialogVisible,"onUpdate:show":t[13]||(t[13]=b=>e.resourceDialogVisible=b)},null,8,["rgk","wspd","workload","show"]),_("div",a4t,[l4t,et(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[14]||(t[14]=b=>e.resourceDialogWspd=b),min:"40",max:"200",step:"0.01"},null,512),[[zt,e.resourceDialogWspd,void 0,{number:!0}]]),R(" "+C(e.resourceDialogWspd),1)])]),_:1},8,["show"]),_("main",null,[_("div",u4t,[ht(d,{ref:"nodeMap",clickedObj:e.clickedNode,"onUpdate:clickedObj":t[16]||(t[16]=b=>e.clickedNode=b),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[17]||(t[17]=b=>e.hoverInfo=b),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[18]||(t[18]=b=>e.panToPzk=b),panPaPos:e.panPaPos,"onUpdate:panPaPos":t[19]||(t[19]=b=>e.panPaPos=b),onPanAnywhere:t[20]||(t[20]=b=>e.panPaPos=null),highlightNodes:e.highlightNodes},null,8,["clickedObj","hoverInfo","panToPzk","panPaPos","highlightNodes"]),e.hoverInfo&&e.hoverInfo.object?(E(),M("div",{key:0,id:"tooltip",style:Xl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[R(C(e.hoverInfo.object.key)+" "+C(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+C(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(E(),M("span",c4t,[(E(!0),M(W,null,gt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,b=>(E(),yr(p,{ik:Number(b)},null,8,["ik"]))),256))])):Z("",!0),this.gameStore.townsConnectionRoots.has(e.hoverInfo.object.key)?(E(),M("span",f4t,[h4t,R("[town "+C(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):Z("",!0),d4t],4)):Z("",!0),_("div",p4t,[_("details",null,[v4t,ht(v,{onPanToPaPos:o.panToPaPos},null,8,["onPanToPaPos"])])]),_("div",g4t,[ht(m,{clickedNode:e.clickedNode,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos,onShowResourceDialog:o.showResourceDialog,onSetClickedNode:o.setClickedNode,onSelectWorker:o.selectWorker},null,8,["clickedNode","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos","onShowResourceDialog","onSetClickedNode","onSelectWorker"])]),_("div",m4t,[ht(g,{ref:"searchBar",visible:e.showSearchBar,onClose:t[21]||(t[21]=b=>e.showSearchBar=!1),onSelect:o.handleSearchSelection},null,8,["visible","onSelect"]),_("div",_4t,[_("details",null,[_("summary",null,"Total workers: "+C(n.userStore.countWorkers),1),_("p",y4t,[R(" nodes: "+C(n.userStore.workedPlantzones.size)+" ",1),b4t,n.userStore.workersFarmingCount?(E(),M(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(E(),M("abbr",S4t,"\u26A0\uFE0F")):Z("",!0):(E(),M("abbr",w4t,"\u26A0\uFE0F")),R(" farming: "+C(n.userStore.workersFarmingCount)+" ",1),T4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(n.userStore.workersWorkshopCount)+" ",1),k4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(n.userStore.workersCustomCount)+" ",1),P4t],64)):Z("",!0),n.userStore.workersIdleCount?(E(),M(W,{key:3},[R(" \u26A0\uFE0F idle: "+C(n.userStore.workersIdleCount),1)],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total CP: "+C(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),_("p",C4t,[n.userStore.routing.autotakenGrindNodesCP?(E(),M(W,{key:0},[E4t,_("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},C(n.userStore.routing.autotakenGrindNodesCP),9,A4t),M4t],64)):Z("",!0),R(" nodes: "+C(n.userStore.autotakenNodesCP)+" ",1),x4t,R(" lodging/storage: "+C(n.userStore.lodgage)+" ",1),I4t,n.userStore.farmingEnable?(E(),M(W,{key:1},[R(" farming: "+C(n.userStore.farmingCP)+" ",1),L4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:2},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),O4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:3},[R(" custom: "+C(n.userStore.customTotalCP)+" ",1),R4t],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total M$/day: "+C(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),_("p",D4t,[R(" nodes: "+C(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),N4t,n.userStore.workersFarmingCount?(E(),M(W,{key:0},[R(" farming: "+C(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),F4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),$4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),z4t],64)):Z("",!0)])]),_("details",null,[_("summary",null,"Total efficiency: "+C(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),B4t,_("p",V4t,[R(" nodes: "+C(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),U4t,n.userStore.farmingEnable?(E(),M(W,{key:0},[R(" farming: "+C(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),W4t],64)):Z("",!0),n.userStore.workersWorkshopCount?(E(),M(W,{key:1},[R(" workshops: "+C(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),j4t],64)):Z("",!0),n.userStore.workersCustomCount?(E(),M(W,{key:2},[R(" custom: "+C(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),G4t],64)):Z("",!0)])]),et(_("input",{type:"checkbox",id:"wr_cb","onUpdate:modelValue":t[22]||(t[22]=b=>n.userStore.wasmRouting=b)},null,512),[[Ve,n.userStore.wasmRouting]]),H4t]),X4t,_("div",Y4t,[_("details",null,[q4t,Z4t,_("label",K4t,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=b=>n.userStore.displayWorkerNames=b)},null,512),[[Ve,n.userStore.displayWorkerNames]]),J4t,Q4t]),_("label",tMt,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=b=>n.userStore.displayWorkerStatsRank=b),disabled:n.userStore.displayWorkerStatsForPz},null,8,eMt),[[Ve,n.userStore.displayWorkerStatsRank]]),rMt,nMt]),_("label",iMt,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=b=>n.userStore.displayWorkerStatsForPz=b),disabled:n.userStore.displayWorkerStatsRank},null,8,oMt),[[Ve,n.userStore.displayWorkerStatsForPz]]),sMt,aMt]),_("label",lMt,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=b=>n.userStore.displayProfitPerCp=b)},null,512),[[Ve,n.userStore.displayProfitPerCp]]),uMt,cMt]),_("button",{onClick:t[27]||(t[27]=b=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[28]||(t[28]=b=>o.fileExport())},"export"),Z("",!0),_("button",{onClick:t[30]||(t[30]=b=>o.fireAll())},"fire all"),_("table",null,[(E(!0),M(W,null,gt(n.gameStore.lodgingPerTown,(b,w)=>(E(),yr(y,{o:b,tk:Number(w),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"]))),256))])])])])])])],64)}const hMt=Gt(i4t,[["render",fMt],["__scopeId","data-v-95acd89c"]]);const dMt={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{e:Object,showGiantValues:Boolean},components:{ItemIcon:fi},methods:{formatFixed:st,formatDropQty(e){return e<.1?st(e,3):st(e,2)}},computed:{actualWorker(){return this.userStore.pzJobs[this.e.key].worker},takenInfo(){if(!this.userStore.workedPlantzones.has(this.e.key.toString()))return{icon:"\u274C",text:"not assigned"};if(this.actualWorker.tnk!=this.e.tnk){let t=`town used: ${this.gameStore.nodeName(this.actualWorker.tnk)}
suggested: ${this.gameStore.nodeName(this.e.tnk)}`;if(this.actualWorker.tnk in this.e.alt_towns_profits){const r=this.e.dailyPerCp/this.e.alt_towns_profits[this.actualWorker.tnk];t+=` (${st(r*100-100)}% better)`}return{icon:"\u26A0\uFE0F",text:t}}if(this.actualWorker.charkey!=this.e.charkey){let t=`worker used: ${this.gameStore.uloc.char[this.actualWorker.charkey]}
suggested: ${this.gameStore.uloc.char[this.e.charkey]}`,r="\u26A0\uFE0F";if(this.actualWorker.charkey in this.e.alt_workers_profits){const n=this.e.priceDaily/this.e.alt_workers_profits[this.actualWorker.charkey];n<1.1&&(r="\u2714\uFE0F"),t+=` (${st(n*100-100)}% better)`}return{icon:r,text:t}}return{icon:"\u2714\uFE0F",text:"all good"}}}},pMt={key:0,class:"fss"},vMt={class:"tac"},gMt={class:"tac"},mMt={key:0},_Mt={class:"fss"},yMt={key:1},bMt={class:"tac"},wMt=["title"],SMt={class:"tac"},TMt={class:"tac"},kMt={class:"tac"},PMt=["title"],CMt={class:"tac"},EMt={class:"tac"},AMt={class:"tac"},MMt={class:"tac"},xMt={class:"tac"},IMt={key:0,class:"tac"},LMt=["title"];function OMt(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon");return E(),M("tr",null,[_("td",null,[ht(s,{tag:"a",to:{path:"./",hash:"#node"+r.e.key}},{default:be(()=>[R(C(n.gameStore.plantzoneName(r.e.key)),1)]),_:1},8,["to"])]),_("td",null,[(E(!0),M(W,null,gt(r.e.unlucky,(l,u)=>(E(),M("div",null,[ht(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[_("span",null,[R(C(o.formatDropQty(l))+" ",1),ht(a,{ik:Number(u),with_name:!0},null,8,["ik"])])]),_:2},1032,["to"]),r.showGiantValues?(E(),M("span",pMt," ["+C(o.formatDropQty(r.e.unlucky_gi[u]))+"] ",1)):Z("",!0)]))),256))]),_("td",vMt,[(E(!0),M(W,null,gt(r.e.lucky,(l,u)=>(E(),M("div",null,[ht(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:be(()=>[R(C(o.formatDropQty(l))+"\xA0",1),ht(a,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])]))),256))]),_("td",gMt,[r.showGiantValues?(E(),M("div",mMt,[R(C(o.formatFixed(r.e.cycleValue_gob,0))+" ",1),_("span",_Mt,"["+C(o.formatFixed(r.e.cycleValue_gi,0))+"]",1)])):(E(),M("div",yMt,C(o.formatFixed(r.e.cycleValue,0)),1))]),_("td",bMt,[_("abbr",{class:"tooltip nound",title:r.e.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/r.e.dailyPerCp)}%`).join(`
`)},C(n.gameStore.nodeName(r.e.tnk)),9,wMt)]),_("td",SMt,C(o.formatFixed(r.e.dist,0)),1),_("td",TMt,C(r.e.cp),1),_("td",kMt,[_("abbr",{class:"tooltip nound",title:r.e.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/r.e.priceDaily)}%`).join(`
`)},C({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[r.e.kind]),9,PMt)]),_("td",CMt,C(o.formatFixed(r.e.wspd+5,1)),1),_("td",EMt,[n.userStore.allowFloating&&n.userStore.useFloatingResources[r.e.regiongroup]?(E(),M(W,{key:0},[R(" ~"+C(o.formatFixed(n.userStore.medianWorkloads[r.e.key],2)),1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(r.e.activeWorkload,2)),1)],64))]),_("td",AMt,C(o.formatFixed(r.e.cyclesDaily,1)),1),_("td",MMt,C(o.formatFixed(r.e.priceDaily,2)),1),_("td",xMt,C(o.formatFixed(r.e.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(E(),M("td",IMt,[_("abbr",{class:"tooltip nound",title:o.takenInfo.text},C(o.takenInfo.icon),9,LMt)])):Z("",!0)])}const RMt=Gt(dMt,[["render",OMt],["__scopeId","data-v-76ba9b57"]]);const DMt={setup(){const e=Ut(),t=mt(),r=wn(),n=Hp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{PlantzonesRow:RMt},data:()=>({wspd:150,mspd:10,luck:10,showGiantValues:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218]),towns:[-1],filterTown:-1,hideTaken:!1}),methods:{formatFixed:st,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=40;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i,void 0,!0,void 0,!0);o.sort((u,c)=>u[1]-c[1]);let s={},a={};for(const u of Object.values(o)){const[c,f]=u,h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(a[h.tnk]=h.dailyPerCp,!("priceDaily"in s)){s=h;continue}h.dailyPerCp>s.dailyPerCp&&(s=h)}}if(!("alt_workers"in s))throw console.log(s),new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(a).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),s.alt_towns_profits=a,s.alt_towns=l,t.push(s)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit.filter(t=>!(this.filterTown!=-1&&t.tnk!=this.filterTown||this.hideTaken&&this.userStore.workedPlantzones.has(t.key.toString())));return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e},townsFilter(){return this.gameStore.townsWithLodging.map(e=>e==1343?-1:e)}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},Zi=e=>(Ue("data-v-1a05e86a"),e=e(),We(),e),NMt={id:"toptext"},FMt=Zi(()=>_("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with only one skill (+5\u{1F528}). Home page has more tiers, levels, and skills. ",-1)),$Mt=Zi(()=>_("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),zMt=Zi(()=>_("p",null," For example, taking both Shakatu Fig nodes should not be 3+3 but 3+1 CP. Use Home page instead of Plantzones to take into account connection reuse (and also lodging/storage costs). ",-1)),BMt=Zi(()=>_("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Resources as well. \u{1F47A}=goblin, \u{1F468}=human, \u{1F422}=giant, hover for more info ",-1)),VMt=R(" Only show entries with best town = "),UMt=["value"],WMt=R(" hide taken "),jMt={class:"scroll"},GMt={class:"stickyhead"},HMt=Zi(()=>_("th",{rowspan:"2"},"Node",-1)),XMt={colspan:"3"},YMt=R("cycle drops "),qMt={class:"fss"},ZMt=R("["),KMt=R(" as giant]"),JMt=Zi(()=>_("th",{colspan:"3"},"best town",-1)),QMt=Zi(()=>_("th",{colspan:"2"},"best worker",-1)),t5t=Zi(()=>_("th",{rowspan:"2"},"workload",-1)),e5t=Zi(()=>_("th",{colspan:"3"},"daily",-1)),r5t={key:0,rowspan:"2"},n5t=Zi(()=>_("abbr",{class:"tooltip nound",title:`assigned on Home page?
  (hover for details)
  'X% better' does not consider:
  - worker stats
  - worker skills
  - connection reuse
  - lodging and storage`},"\u{1F3E0}",-1)),i5t=[n5t],o5t=Zi(()=>_("tr",null,[_("th",{class:"rowspanned colspanned"},"unlucky"),_("th",{class:"colspanned"},[R(" lucky "),_("abbr",{title:`you always get unlucky items;
  these are ADDITIONAL, with
    chance equal to luck stat`,class:"tooltip"},"\u2139")]),_("th",{class:"colspanned"},"$ value"),_("th",{class:"colspanned"},"name"),_("th",{class:"colspanned"},"walk"),_("th",{class:"colspanned"},"CP"),_("th",{class:"colspanned"},"type"),_("th",{class:"colspanned"},"wspd"),_("th",{class:"colspanned"},"cycles"),_("th",{class:"colspanned"},"M$"),_("th",{class:"colspanned"},"M$/CP")],-1));function s5t(e,t,r,n,i,o){const s=Ot("PlantzonesRow");return E(),M("main",null,[_("div",NMt,[FMt,$Mt,zMt,BMt,VMt,et(_("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(E(!0),M(W,null,gt(o.townsFilter,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.nodeName(a):"any"),9,UMt))),256))],512),[[He,e.filterTown]]),WMt,et(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>e.hideTaken=a)},null,512),[[Ve,e.hideTaken]])]),_("div",jMt,[_("table",GMt,[_("thead",null,[_("tr",null,[HMt,_("th",XMt,[YMt,_("span",qMt,[ZMt,et(_("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>e.showGiantValues=a)},null,512),[[Ve,e.showGiantValues]]),KMt])]),JMt,QMt,t5t,e5t,n.userStore.workedPlantzones.size?(E(),M("th",r5t,i5t)):Z("",!0)]),o5t]),_("tbody",null,[(E(!0),M(W,null,gt(o.allPlantzonesNearestCpTownProfit_sorted,a=>(E(),yr(s,{id:"drops"+a.key,e:a,showGiantValues:e.showGiantValues},null,8,["id","e","showGiantValues"]))),256))])])])])}const a5t=Gt(DMt,[["render",s5t],["__scopeId","data-v-1a05e86a"]]),l5t={setup(){const e=mt(),t=Ut(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},u5t=_("br",null,null,-1),c5t=_("br",null,null,-1),f5t=_("tr",null,[_("th"),_("th",null,"Town / House"),_("th",null,"Lodging"),_("th",null,"CP")],-1),h5t=_("td",null,null,-1),d5t={class:"header"},p5t=R(" P2W: "),v5t=["onUpdate:modelValue"],g5t=["onUpdate:modelValue"],m5t=["href"];function _5t(e,t,r,n,i,o){return E(),M("main",null,[R(" Total lodging slots: "+C(n.userStore.haveLodging.slots.total),1),u5t,R(" Total CP spent: "+C(n.userStore.haveLodging.cp.total),1),c5t,_("table",null,[f5t,(E(!0),M(W,null,gt(n.gameStore.lodgingPerTown,(s,a)=>(E(),M(W,null,[_("tr",null,[h5t,_("td",null,[_("span",d5t,C(n.gameStore.uloc.town[a]),1),p5t,et(_("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[a]=l,class:"short"},null,8,v5t),[[zt,n.userStore.lodgingP2W[a],void 0,{number:!0}]])]),_("td",null,C(n.userStore.haveLodging.slots.perTown[a]),1),_("td",null,C(n.userStore.haveLodging.cp.perTown[a]),1)]),(E(!0),M(W,null,gt(s.houses,l=>(E(),M("tr",null,[_("td",null,[et(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,g5t),[[Ve,n.userStore.lodgingTaken[l.key]]])]),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+l.key},C(n.gameStore.uloc.char[l.key]),9,m5t)]),_("td",null,C(l.lodgingSpaces),1),_("td",null,C(l.CP),1)]))),256))],64))),256))])])}const y5t=Gt(l5t,[["render",_5t]]);const b5t={setup(){const e=mt(),t=Ut(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:Xk,FloatingResourceEdit:vC},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.useFloatingResources":{handler(e,t){},deep:!0}},methods:{formatFixed:st,fileParse(e){let t=e.target.result,r=JSON.parse(t);"regionModifiers"in r&&(r.regionResources=r.regionModifiers,delete r.regionModifiers),"regionModifiers2"in r&&(r.regionResources2=r.regionModifiers2,delete r.regionModifiers2),this.userStore.$patch(r),this.setAllFloating(!0),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");const t={regionModifiers:this.userStore.regionResources,regionModifiers2:this.userStore.regionResources2},r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="resources.json",e.click()},clear(){this.userStore.regionResources={},this.userStore.regionResources2={}},setAllFloating(e){const t={};for(const r of Object.keys(this.gameStore.regionGroups))t[r]=e;this.userStore.useFloatingResources=t}}},di=e=>(Ue("data-v-6af04c00"),e=e(),We(),e),w5t=di(()=>_("button",null,"import",-1)),S5t=di(()=>_("br",null,null,-1)),T5t=R(" Test on node: "),k5t=["value"],P5t=di(()=>_("br",null,null,-1)),C5t=R(" With workspeed: "),E5t={id:"toptext"},A5t=di(()=>_("p",null,"These values are shown ingame as green bars at world map > resource view.",-1)),M5t=di(()=>_("p",null,"However, some green bars are hidden/misplaced, for those you can check the current workload in worker assignment panel ingame.",-1)),x5t=di(()=>_("p",null,"Low (exhausted) resource means workloads of relevant nodes are increased (up to 2x of base) so each job takes longer to complete.",-1)),I5t=di(()=>_("p",null,"If unspecified here, 0% resource will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),L5t=di(()=>_("summary",null,"Advanced",-1)),O5t=R("allow floating resources "),R5t={key:0},D5t={class:"stickyhead"},N5t=di(()=>_("thead",null,[_("tr",null,[_("th",null,"RG"),_("th",null,"Resource %"),_("th",null,"Contains nodes with workload (base \u2192 current)")])],-1)),F5t={class:"tac"},$5t={class:"tac"},z5t={key:0,class:"switch mauto"},B5t=["onUpdate:modelValue"],V5t=di(()=>_("span",{class:"slider"},null,-1)),U5t=R(" floating"),W5t=di(()=>_("br",null,null,-1)),j5t=["onClick"],G5t=R(" constant"),H5t=di(()=>_("br",null,null,-1)),X5t=["onUpdate:modelValue"];function Y5t(e,t,r,n,i,o){const s=Ot("ModalDialog"),a=Ot("FloatingResourceEdit"),l=Ot("RouterLink");return E(),M(W,null,[ht(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:be(()=>[_("form",{onSubmit:t[1]||(t[1]=ap(u=>o.fileImport(u),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),w5t],32)]),_:1},8,["show"]),ht(s,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:be(()=>[ht(a,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),S5t,T5t,et(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(E(!0),M(W,null,gt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(E(),M("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},C(n.gameStore.plantzoneName(u))+" ("+C(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base) ",9,k5t))),256))],512),[[He,e.floatingDialogWkld]]),P5t,C5t,et(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[zt,e.floatingDialogWspd,void 0,{number:!0}]]),R(" "+C(e.floatingDialogWspd),1)]),_:1},8,["show"]),_("div",E5t,[A5t,M5t,x5t,I5t,_("details",null,[L5t,_("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),_("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),_("label",null,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Ve,n.userStore.allowFloating]]),O5t]),n.userStore.allowFloating?(E(),M("span",R5t,[_("button",{onClick:t[11]||(t[11]=u=>o.setAllFloating(!0))},"all floating"),_("button",{onClick:t[12]||(t[12]=u=>o.setAllFloating(!1))},"all constant")])):Z("",!0)])]),_("table",D5t,[N5t,_("tbody",null,[(E(!0),M(W,null,gt(n.gameStore.regionGroups,(u,c)=>(E(),M("tr",null,[_("td",F5t,C(c),1),_("td",$5t,[n.userStore.allowFloating?(E(),M("label",z5t,[et(_("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingResources[c]=f},null,8,B5t),[[Ve,n.userStore.useFloatingResources[c]]]),V5t])):Z("",!0),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(E(),M(W,{key:1},[U5t,W5t,R(" ~"+C(o.formatFixed(n.userStore.medianResources[c],2))+" ",1),_("button",{onClick:f=>o.showDialog(c)},"edit",8,j5t)],64)):(E(),M(W,{key:2},[G5t,H5t,et(_("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionResources[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,X5t),[[zt,n.userStore.regionResources[c],void 0,{number:!0}]])],64))]),_("td",null,[(E(!0),M(W,null,gt(u,f=>(E(),M("div",null,[ht(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:be(()=>[R(C(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),R(" "+C(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(E(),M(W,{key:0},[R(" \u2933 "+C(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(E(),M(W,{key:1},[R(" \u2192 "+C(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])])],64)}const q5t=Gt(b5t,[["render",Y5t],["__scopeId","data-v-6af04c00"]]);const Z5t={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:st,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},Xa=e=>(Ue("data-v-f5f2ab1e"),e=e(),We(),e),K5t=Xa(()=>_("h3",null,"\u{1F3ED}Workshops config",-1)),J5t={class:"sa"},Q5t=Xa(()=>_("tr",null,[_("th",null,"House"),_("th",null,[R(" label "),_("abbr",{class:"tooltip",title:"for display only"},"\u2139")]),_("th",null,[R(" worktype "),_("abbr",{class:"tooltip",title:`used to factor in some worker skills.
also, only Mass Production can employ multiple workers at once.`},"\u2139")]),_("th",null," workload "),_("th",null,[R(" $/cycle "),_("abbr",{title:`use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator to find out.
For crates, enter profit per 1 crate - if a worker with +1/+3 packing skill occupies this workshop it will be taken into account.`,class:"tooltip"},"\u2139")]),_("th",null,[R(" CP "),_("abbr",{title:`Full cost of operating the workshop, including:
1) the workshop itself;
2) house chain to connect the workshop (*after* autoassigned houses shown in Home > town config > Found cost spoiler);
3) storage for input/output mats, if not provided by (2).
The only thing to not include here is lodging for the worker who is going to occupy the workshop.
However, if your workshop house chain does provide lodging, reduce (2) accordingly. 
The house chain can potentially provide storage and lodging not only for this workshop, but for other workshops of this town. 
In this case, use average CP value (sum up all workshop-related CP costs and divide by active workshop count).`,class:"tooltip"},"\u2139")]),_("th",null,"action")],-1)),t6t=["onUpdate:modelValue"],e6t=["onUpdate:modelValue"],r6t=K1('<option value="unk" data-v-f5f2ab1e>unknown</option><option value="jewelry" data-v-f5f2ab1e>jewelry</option><option value="mass" data-v-f5f2ab1e>mass</option><option value="weap" data-v-f5f2ab1e>weapon</option><option value="tool" data-v-f5f2ab1e>tool</option><option value="furn" data-v-f5f2ab1e>furniture</option><option value="costume" data-v-f5f2ab1e>costume</option><option value="refine" data-v-f5f2ab1e>refine</option><option value="siege" data-v-f5f2ab1e>siege</option><option value="mount" data-v-f5f2ab1e>mount</option><option value="exclus" data-v-f5f2ab1e>exclusive</option><option value="pack_produce" data-v-f5f2ab1e>pack_produce</option><option value="pack_herb" data-v-f5f2ab1e>pack_herb</option><option value="pack_mushr" data-v-f5f2ab1e>pack_mushr</option><option value="pack_fish" data-v-f5f2ab1e>pack_fish</option><option value="pack_timber" data-v-f5f2ab1e>pack_timber</option><option value="pack_ore" data-v-f5f2ab1e>pack_ore</option>',17),n6t=[r6t],i6t=["onUpdate:modelValue"],o6t=["onUpdate:modelValue"],s6t=["onUpdate:modelValue"],a6t=["onClick"],l6t=R(" new entry:"),u6t=Xa(()=>_("br",null,null,-1)),c6t={class:"borderless"},f6t=Xa(()=>_("td",null,"town",-1)),h6t=["value"],d6t=Xa(()=>_("td",null,"usage",-1)),p6t=["value"],v6t=Xa(()=>_("td",null,"level",-1)),g6t=["value"],m6t=Xa(()=>_("td",null,"house",-1)),_6t=["value"],y6t={key:0,class:"fsxs"},b6t=["disabled"],w6t=Xa(()=>_("abbr",{class:"tooltip",title:`Note that assigning house as workshop does not prevent it from being used for autolodging/autostorage on Home page.
You need to manually work around this.`},"\u2139",-1));function S6t(e,t,r,n,i,o){return E(),M(W,null,[K5t,_("table",J5t,[Q5t,(E(!0),M(W,null,gt(n.userStore.userWorkshops,(s,a)=>(E(),M("tr",null,[_("td",null,C(n.gameStore.uloc.char[a]),1),_("td",null,[et(_("input",{class:"w5em","onUpdate:modelValue":l=>s.label=l},null,8,t6t),[[zt,s.label,void 0,{number:!0}]])]),_("td",null,[et(_("select",{"onUpdate:modelValue":l=>s.industry=l},n6t,8,e6t),[[He,s.industry]])]),_("td",null,[et(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualWorkload=l},null,8,i6t),[[zt,s.manualWorkload,void 0,{number:!0}]])]),_("td",null,[et(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualCycleIncome=l},null,8,o6t),[[zt,s.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[et(_("input",{type:"number",class:"float4","onUpdate:modelValue":l=>s.manualCp=l},null,8,s6t),[[zt,s.manualCp,void 0,{number:!0}]])]),_("td",null,[_("button",{onClick:l=>o.deleteWorkshop(a)},"delete",8,a6t)])]))),256))]),l6t,u6t,_("table",c6t,[_("tr",null,[f6t,_("td",null,[et(_("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(E(!0),M(W,null,gt(o.filteredTowns,s=>(E(),M("option",{value:s},C(s>=0?n.gameStore.uloc.town[s]:"any"),9,h6t))),256))],512),[[He,e.filterTown]])])]),_("tr",null,[d6t,_("td",null,[et(_("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.filterUsage=s)},[(E(!0),M(W,null,gt(o.filteredUsages,s=>(E(),M("option",{value:s},C(s>=0?n.gameStore.uloc.housetype[s]+" "+s:"any"),9,p6t))),256))],512),[[He,e.filterUsage]])])]),_("tr",null,[v6t,_("td",null,[et(_("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.filterLevel=s)},[(E(!0),M(W,null,gt(o.filteredLevels,s=>(E(),M("option",{value:s},C(s>=0?s+"+":"any"),9,g6t))),256))],512),[[He,e.filterLevel]])])]),_("tr",null,[m6t,_("td",null,[et(_("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.selectedHouse=s)},[(E(!0),M(W,null,gt(o.filteredHouses,s=>(E(),M("option",{value:s},C(s)+" "+C(n.gameStore.uloc.char[s])+" "+C(s in n.userStore.userWorkshops?"\u2714\uFE0F":""),9,_6t))),256))],512),[[He,e.selectedHouse]]),e.selectedHouse in n.userStore.userWorkshops?(E(),M("span",y6t," already in list! ")):Z("",!0)])])]),_("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=s=>o.addWorkshop(e.selectedHouse))}," add to my workshops ",8,b6t),R(" "+C()+" ",1),w6t],64)}const T6t=Gt(Z5t,[["render",S6t],["__scopeId","data-v-f5f2ab1e"]]);const k6t={setup(){const e=Ut(),t=mt(),r=wn();return{gameStore:t,userStore:e,marketStore:r}},props:{show:{type:Boolean,default:!1}},components:{ItemIcon:fi},created(){},data:()=>({cpCost:.4,pcHours:16}),computed:{perTownPerRecipePerThrifty(){const e={};for(const t of this.userStore.wsJobs){const r=t.worker.tnk,n=t.worker.job.recipe,i=t.thriftyPercent;if(!(n in this.gameStore.craftInputs)){console.log("rcp",n,"not supported");continue}r in e||(e[r]={}),n in e[r]||(e[r][n]={}),i in e[r][n]||(e[r][n][i]={workers:0,cyclesPerDay:0,completionsPerDay:0}),e[r][n][i].workers+=1;const o=this.gameStore.craftInfo[n].rp,s=t.worker.job.hk,a=this.userStore.userWorkshops[s],l=this.gameStore.measureWorkshopWorker(s,a,t.worker).cyclesDaily;e[r][n][i].cyclesPerDay+=l;const u=this.gameStore.repeatsWorkshopWorker(t.worker,o),c=l*u;e[r][n][i].completionsPerDay+=c}return e},usedInputItems(){const e=new Set([9492]);if(!this.gameStore.ready)return e;for(const t of Object.values(this.perTownPerRecipePerThrifty))for(const r of Object.keys(t)){const n=this.gameStore.craftInputs[r];for(const i of Object.keys(n))e.add(i)}return e},tradingLevelString(){const e=this.userStore.tradingLevel;return 90<e?`G${e-90}`:60<e?`M${e-60}`:`${e}`},rows(){const e={towns:{},townStat:{},transport:{},total:{silver:0,CP:0,transportUtilization:0}};if(!this.gameStore.ready)return e;for(const[t,r]of Object.entries(this.perTownPerRecipePerThrifty)){e.towns[t]=[];const n=this.userStore.tradeDestinations[t],i=this.transportHours(t,n),o=Math.ceil(this.pcHours/i),s=Math.ceil(this.pcHours/i),a=5*s*3e4;t in this.userStore.tradeRouteCp||(this.userStore.tradeRouteCp[t]=0);const l=this.userStore.tradeRouteCp[t];t in this.userStore.tradeInfraCp||(this.userStore.tradeInfraCp[t]=0),this.userStore.tradeInfraCp[t]*this.cpCost*1e6;const u=`${this.gameStore.uloc.node[t]} \u2192 ${this.gameStore.uloc.node[n]}`;if(!(u in e.transport)){const c=5*o;e.transport[u]={duration:t4(i),wagonRuns:o,haveWagons:c,needWagons:0,utilization:0}}for(const[c,f]of Object.entries(r))for(const h of Object.values(f))t in e.townStat||(e.townStat[t]={completionsPerDay:0}),e.townStat[t].completionsPerDay+=h.completionsPerDay;for(const[c,f]of Object.entries(r))for(const[h,d]of Object.entries(f)){const p=this.recipeCost(c,Number(h)),v=d.completionsPerDay/d.cyclesPerDay,m=this.marketStore.prices[9492],g=m/3/v;p.val+=g,p.desc+=`${m} / 3 / ${st(v,2)} = ${st(g)}
`;const y=this.tradeInfo(c,t,n);y.delta=y.sellPrice-p.val-y.transportFee,y.deltaDesc=`${st(y.sellPrice)} - ${st(p.val)} - ${st(y.transportFee)}`,y.roi=y.delta/(p.val+y.transportFee),y.dailyProfit=y.delta*d.completionsPerDay/1e6,y.routeCp=this.userStore.tradeRouteAlwaysOn[t]?l*d.completionsPerDay/e.townStat[t].completionsPerDay:l*d.completionsPerDay*y.crateWeight/a;const b=this.userStore.tradeRouteAlwaysOn[t]?`${l}CP * ${st(d.completionsPerDay)} / ${st(e.townStat[t].completionsPerDay)} crates`:`${l}CP * ${st(d.completionsPerDay*y.crateWeight/a*100,3)}% utilization`,w=this.userStore.tradeInfraCp[t]*d.workers;y.cp=w+y.routeCp,y.cpDesc=`${this.userStore.tradeInfraCp[t]}CP x ${d.workers} workers + ${b}`,y.eff=y.dailyProfit/y.cp;const T=e.towns[t][e.towns[t].length-1],S=T&&c==T.rcp;e.towns[t].push({rcp:c,collapsed:S,rowspan:1,thriftyPercent:h,makeCost:p,perf:d,tradeInfo:y}),e.transport[u].needWagons+=d.completionsPerDay*y.crateWeight/3e4,e.total.silver+=d.completionsPerDay*y.delta,e.total.CP+=y.cp}}for(const t of Object.values(e.transport))t.utilization=t.needWagons/t.haveWagons,e.total.transportUtilization+=t.utilization;return e.total.eff=e.total.silver/1e6/e.total.CP,e},table(){const e=this.rows;let t;for(const[r,n]of Object.entries(e.towns))for(const i of n)i.collapsed?t.rowspan++:t=i;return this.rows}},methods:{formatFixed:st,hoursToHMS:t4,recipeCost(e,t){if(!(e in this.gameStore.craftInputs)){const n=`recipe ${e} can't be priced`;return console.log(n),{val:NaN,desc:n}}const r=this.gameStore.craftInputs[e];if(t>0){const n={},i=Object.entries(r).length;for(const o of Object.keys(r))r[o]>=10?n[o]=r[o]*(1-t/i/100):n[o]=r[o];return this.marketStore.priceBunch(n)}return this.marketStore.priceBunch(r)},distanceToTrader(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.traders[e],n=this.gameStore.traders[t],i=r[0]-n[0],o=0,s=r[1]-n[1];return Math.sqrt(i*i+o*o+s*s)},distancePriceBonus(e,t){const n=this.distanceToTrader(e,t)*68/1e8;return n>1.5?1.5:n},distance(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.nodes[e].pos,n=this.gameStore.nodes[t].pos,i=r.x-n.x,o=0,s=r.z-n.z;return Math.sqrt(i*i+o*o+s*s)},transportCostPerLt(e,t,r){const i=this.distance(e,t)*1.8/3e4;return r?i*4:i},transportHours(e,t){return this.distance(e,t)*2.6/1e6},tradeInfo(e,t,r){if(!this.gameStore.ready)return NaN;if(!(e in this.gameStore.craftOutputs))return NaN;const n=this.gameStore.craftOutputs[e][0];if(!(n in this.gameStore.itemInfo))return NaN;const i=this.gameStore.itemInfo[n].vendorPrice,o=this.distancePriceBonus(t,r),s=i*(1+o)*(1+this.userStore.bargainBonus),a=`${i} x ${1+o} x ${1+this.userStore.bargainBonus}`,l=this.gameStore.itemInfo[n].weight,u=this.transportCostPerLt(t,r),c=l*u;return{destination:r,distanceBonus:o,crateWeight:l,costPerLt:u,sellPrice:s,sellPriceDesc:a,transportFee:c}},routeSortedDestinations(e,t){const r=[];for(const n of Object.keys(this.gameStore.traders))r.push(this.tradeInfo(e,t,n));return r.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),r},townSortedDestinations(e){const t=[];for(const n of Object.keys(this.gameStore.traders))t.push(this.tradeInfo(9212,e,n));return t.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),t}}},pi=e=>(Ue("data-v-6e4bee63"),e=e(),We(),e),P6t=pi(()=>_("div",{class:"container"},null,-1)),C6t={class:"container"},E6t={class:"left"},A6t=pi(()=>_("h3",{style:{display:"inline"}},"Active recipes",-1)),M6t=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"out"),_("th",null,"sell $"),_("th",null,[_("abbr",{class:"tooltip",title:"workers"},"w")]),_("th",null,[_("abbr",{class:"tooltip",title:"crates/day"},"c/d")]),_("th",null,[_("abbr",{class:"tooltip",title:"thrifty %"},"\u{1F9EA}")]),_("th",null,"make $"),_("th",null,"wagon $"),_("th",null,"total $"),_("th",null,"ROI"),_("th",null,"M$/day"),_("th",null,"CP"),_("th",null,"M$/day/CP")])],-1)),x6t={colspan:"2",class:"tac"},I6t={colspan:"4",class:"tac"},L6t=pi(()=>_("abbr",{class:"tooltip",title:`average town infrastructure per 1 packer 
(workshops, storage, house connections)
ON TOP of the houses autoassigned 
on Home page (lodging is autoassigned)`},"infra",-1)),O6t=["onUpdate:modelValue"],R6t=R(" CP "),D6t={colspan:"6"},N6t=["onUpdate:modelValue"],F6t=["value"],$6t=R(" cost "),z6t=["onUpdate:modelValue"],B6t=R(" CP "),V6t=pi(()=>_("span",{class:"spacer"},null,-1)),U6t=["onUpdate:modelValue"],W6t=R(" always on "),j6t=["rowspan"],G6t=["rowspan"],H6t=["title"],X6t={class:"tac"},Y6t={class:"tac"},q6t={class:"tac"},Z6t={class:"tar"},K6t=["title"],J6t={class:"tar"},Q6t={class:"tar"},txt=["title"],ext={class:"tar"},rxt={class:"tar"},nxt={class:"tar"},ixt=["title"],oxt={class:"tar"},sxt={class:"slider-container"},axt=R(" Trading\xA0 "),lxt=pi(()=>_("br",null,null,-1)),uxt=pi(()=>_("summary",null,"Wagons",-1)),cxt=R(" Order issuing hours: "),fxt=pi(()=>_("br",null,null,-1)),hxt=R(" At over 100% capacity, cost of transporting 214kLT: "),dxt=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"route"),_("th",null,"wagons"),_("th",null,"duration"),_("th",null,"capacity"),_("th",null,"utilization")])],-1)),pxt={class:"tar"},vxt={class:"tar"},gxt={class:"tar"},mxt=pi(()=>_("td",{class:"tar",colspan:"4"},null,-1)),_xt={class:"tar"},yxt={class:"right"},bxt=pi(()=>_("h3",null,"Input prices",-1)),wxt=pi(()=>_("thead",null,[_("tr",null,[_("th",null,"item"),_("th",null,"custom"),_("th",null,"buy"),_("th",null,"eff")])],-1)),Sxt=["onUpdate:modelValue"],Txt=["disabled","onUpdate:modelValue"];function kxt(e,t,r,n,i,o){const s=Ot("ItemIcon");return E(),M(W,null,[P6t,_("div",C6t,[_("div",E6t,[A6t,_("table",null,[M6t,_("tbody",null,[(E(!0),M(W,null,gt(o.table.towns,(a,l)=>(E(),M(W,null,[_("tr",null,[_("td",x6t,C(n.gameStore.uloc.node[l]),1),_("td",I6t,[L6t,R(C()+" ",1),et(_("input",{type:"number",class:"w33em",step:"0.1","onUpdate:modelValue":u=>n.userStore.tradeInfraCp[l]=u},null,8,O6t),[[zt,n.userStore.tradeInfraCp[l],void 0,{number:!0}]]),R6t]),_("td",D6t,[et(_("select",{"onUpdate:modelValue":u=>n.userStore.tradeDestinations[l]=u},[(E(!0),M(W,null,gt(o.townSortedDestinations(l),u=>(E(),M("option",{key:u.destination,value:u.destination},C(n.gameStore.uloc.node[u.destination])+" "+C(o.formatFixed(u.distanceBonus*100,2))+"% "+C(o.formatFixed(30*u.costPerLt))+"$ ",9,F6t))),128))],8,N6t),[[He,n.userStore.tradeDestinations[l]]]),$6t,et(_("input",{type:"number",class:"w3em","onUpdate:modelValue":u=>n.userStore.tradeRouteCp[l]=u},null,8,z6t),[[zt,n.userStore.tradeRouteCp[l],void 0,{number:!0}]]),B6t,V6t,et(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.tradeRouteAlwaysOn[l]=u},null,8,U6t),[[Ve,n.userStore.tradeRouteAlwaysOn[l]]]),W6t])]),(E(!0),M(W,null,gt(a,u=>(E(),M("tr",{key:u.tnk+"/"+u.rcp},[u.collapsed?Z("",!0):(E(),M("td",{key:0,rowspan:u.rowspan},[u.rcp&&n.gameStore.craftOutputs[u.rcp]?(E(!0),M(W,{key:0},gt(n.gameStore.craftOutputs[u.rcp],c=>(E(),yr(s,{ik:c},null,8,["ik"]))),256)):(E(),M(W,{key:1},[R(C(e.rcp),1)],64))],8,j6t)),u.collapsed?Z("",!0):(E(),M("td",{key:1,class:"tar",rowspan:u.rowspan},[_("abbr",{class:"tooltip",title:u.tradeInfo.sellPriceDesc},C(o.formatFixed(u.tradeInfo.sellPrice)),9,H6t)],8,G6t)),_("td",X6t,C(u.perf.workers),1),_("td",Y6t,C(o.formatFixed(u.perf.completionsPerDay)),1),_("td",q6t,C(u.thriftyPercent),1),_("td",Z6t,[_("abbr",{class:"tooltip",title:u.makeCost.desc},C(o.formatFixed(u.makeCost.val)),9,K6t)]),_("td",J6t,C(o.formatFixed(u.tradeInfo.transportFee)),1),_("td",Q6t,[_("abbr",{class:"tooltip",title:u.tradeInfo.deltaDesc},C(o.formatFixed(u.tradeInfo.delta)),9,txt)]),_("td",ext,C(o.formatFixed(u.tradeInfo.roi*100))+"% ",1),_("td",rxt,C(o.formatFixed(u.tradeInfo.dailyProfit,2)),1),_("td",nxt,[_("abbr",{class:"tooltip",title:u.tradeInfo.cpDesc},C(o.formatFixed(u.tradeInfo.cp,2)),9,ixt)]),_("td",oxt,C(o.formatFixed(u.tradeInfo.eff,3)),1)]))),128))],64))),256))])]),_("div",sxt,[axt,et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.tradingLevel=a),min:"1",max:"140",step:"1"},null,512),[[zt,n.userStore.tradingLevel,void 0,{number:!0}]]),R(" \xA0"+C(o.tradingLevelString)+" \u2192 "+C(o.formatFixed(n.userStore.bargainBonus*100,1))+"% bargain ",1)]),lxt,R(" Total: "+C(o.formatFixed(o.table.total.silver/1e6,1))+" M$/day, "+C(o.formatFixed(o.table.total.CP,2))+" CP, "+C(o.formatFixed(o.table.total.eff,3))+" M$/day/CP ",1),_("details",null,[uxt,cxt,et(_("input",{type:"number",class:"w3em","onUpdate:modelValue":t[1]||(t[1]=a=>e.pcHours=a)},null,512),[[zt,e.pcHours,void 0,{number:!0}]]),fxt,hxt,_("table",null,[dxt,_("tbody",null,[(E(!0),M(W,null,gt(o.table.transport,(a,l)=>(E(),M("tr",null,[_("td",null,C(l),1),_("td",pxt,C(o.formatFixed(a.needWagons,2)),1),_("td",null,C(a.duration),1),_("td",vxt,C(a.haveWagons),1),_("td",gxt,C(o.formatFixed(a.utilization*100,2))+"% ",1)]))),256)),_("tr",null,[mxt,_("td",_xt,C(o.formatFixed(o.table.total.transportUtilization*100,2))+"% ",1)])])])])]),_("div",yxt,[bxt,_("table",null,[wxt,_("tbody",null,[(E(!0),M(W,null,gt(o.usedInputItems,a=>(E(),M("tr",null,[_("td",null,[ht(s,{ik:Number(a)},null,8,["ik"])]),_("td",null,[et(_("input",{type:"number",class:"w5em tar","onUpdate:modelValue":l=>n.userStore.customPrices[a]=l},null,8,Sxt),[[zt,n.userStore.customPrices[a],void 0,{number:!0}]])]),_("td",null,[et(_("input",{type:"checkbox",disabled:a in n.gameStore.vendorPrices,"onUpdate:modelValue":l=>n.userStore.keepItems[a]=l},null,8,Txt),[[Ve,n.userStore.keepItems[a]]])]),_("td",null,C(o.formatFixed(n.marketStore.prices[a])),1)]))),256))])])])])],64)}const Pxt=Gt(k6t,[["render",kxt],["__scopeId","data-v-6e4bee63"]]);const Cxt={setup(){const e=mt(),t=Ut(),r=wn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ItemIcon:fi,ModalDialog:Xk,WorkerEdit:jz,WorkshopsConfig:T6t,TradingConfig:Pxt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,tradingConfigVisible:!1,highlightPending:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:st,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}},fileParse(e){let t=e.target.result,r=JSON.parse(t);"effectivePrices"in r&&delete r.effectivePrices,this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileExport(){var e=document.createElement("a");let t={customPrices:this.userStore.customPrices,keepItems:this.userStore.keepItems,effectivePrices:this.marketStore.prices};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="custom_prices.json",e.click()},clearCustomPrices(){this.userStore.customPrices={},this.userStore.keepItems={}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},dr=e=>(Ue("data-v-d81ce2cc"),e=e(),We(),e),Ext=dr(()=>_("button",null,"import",-1)),Axt={id:"toptext"},Mxt={class:"settings-tiles"},xxt={class:"settings-tile"},Ixt=R(" Server: "),Lxt=K1("<option data-v-d81ce2cc>NA</option><option data-v-d81ce2cc>EU</option><option data-v-d81ce2cc>RU</option><option data-v-d81ce2cc>KR</option><option data-v-d81ce2cc>JP</option><option data-v-d81ce2cc>TH</option><option data-v-d81ce2cc>TW</option><option data-v-d81ce2cc>SA</option><option data-v-d81ce2cc>SEA</option><option data-v-d81ce2cc>MENA</option><option data-v-d81ce2cc>CEU</option><option data-v-d81ce2cc>CNA</option>",12),Oxt=[Lxt],Rxt=dr(()=>_("br",null,null,-1)),Dxt=dr(()=>_("label",{for:"vp_t"},"VP always on",-1)),Nxt=R(") "),Fxt=R(" Tax: "),$xt=K1('<option value="0.65" data-v-d81ce2cc>0.65 (0)</option><option value="0.65325" data-v-d81ce2cc>0.65325 (1000)</option><option value="0.6565" data-v-d81ce2cc>0.6565 (4000)</option><option value="0.65975" data-v-d81ce2cc>0.65975 (7000)</option><option value="0.65975" data-v-d81ce2cc>0.69225 (7000 + ring)</option><option value="0.845" data-v-d81ce2cc>0.845 (0 + VP)</option><option value="0.84825" data-v-d81ce2cc>0.84825 (1000 + VP)</option><option value="0.8515" data-v-d81ce2cc>0.8515 (4000 + VP)</option><option value="0.85475" data-v-d81ce2cc>0.85475 (7000 + VP)</option><option value="0.88725" data-v-d81ce2cc>0.88725 (7000 + ring + VP)</option><option value="1" data-v-d81ce2cc>1 (just hoarding)</option>',11),zxt=[$xt],Bxt=R(" Language: "),Vxt=dr(()=>_("option",null,"en",-1)),Uxt=dr(()=>_("option",null,"ru",-1)),Wxt=dr(()=>_("option",null,"ko",-1)),jxt=dr(()=>_("option",null,"jp",-1)),Gxt=dr(()=>_("option",null,"tw",-1)),Hxt=[Vxt,Uxt,Wxt,jxt,Gxt],Xxt={class:"settings-tile"},Yxt=dr(()=>_("div",null,"Default worker for hire:",-1)),qxt=dr(()=>_("label",{for:"dw_f"},"Random Artisan Goblin",-1)),Zxt={for:"dw_t"},Kxt={class:"settings-tile"},Jxt=R(" \u{1F33B}Farming "),Qxt=dr(()=>_("label",{for:"fe_t",style:{"margin-right":"0.4em"}},"enable",-1)),tIt={key:0},eIt={class:"slider-container"},rIt=dr(()=>_("span",null,"F2P",-1)),nIt=dr(()=>_("span",null,"P2W",-1)),iIt={style:{display:"flex"}},oIt=R(" Total profit from 10 large fences (use "),sIt=dr(()=>_("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),aIt=R(" to estimate):"),lIt=dr(()=>_("br",null,null,-1)),uIt=R(" M$/day with 10 workers "),cIt=dr(()=>_("br",null,null,-1)),fIt=R(" M$/day with 0 workers (half growth speed) "),hIt={class:"settings-tile"},dIt=R(" \u{1F3ED}Workshops "),pIt={class:"settings-tile"},vIt=R(" \u{1F5FA}\uFE0F Map "),gIt=R(" hide inactive "),mIt=R(" px icon size "),_It=dr(()=>_("div",{class:"spacer"},null,-1)),yIt=R(" Market API status: "),bIt={key:0},wIt={key:1},SIt=R(" \xA0"),TIt=dr(()=>_("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),kIt=R("If the item is for self use, select Keep (=untax) and/or enter Custom price: "),PIt={class:"scrollable"},CIt={class:"stickyhead"},EIt=dr(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Market"),_("th",null,"Custom"),_("th",null,"Keep"),_("th",null,"Effective")])],-1)),AIt=["id"],MIt=["href"],xIt=R(" "+C(" ")+" "),IIt={key:0},LIt=["title"],OIt={class:"tar"},RIt=["href"],DIt=["onUpdate:modelValue"],NIt={class:"tac"},FIt=["disabled","onUpdate:modelValue"],$It={class:"tar"};function zIt(e,t,r,n,i,o){const s=Ot("ModalDialog"),a=Ot("WorkerEdit"),l=Ot("WorkshopsConfig"),u=Ot("TradingConfig"),c=Ot("ItemIcon");return E(),M(W,null,[ht(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=f=>e.importDialogVisible=f)},{default:be(()=>[_("form",{onSubmit:t[1]||(t[1]=ap(f=>o.fileImport(f),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=f=>o.fileImport())}),Ext],32)]),_:1},8,["show"]),ht(s,{show:e.workerDialogVisible,"onUpdate:show":t[4]||(t[4]=f=>e.workerDialogVisible=f)},{default:be(()=>[ht(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[3]||(t[3]=f=>e.workerDialogVisible=f)},null,8,["workerEditing","show"])]),_:1},8,["show"]),ht(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[5]||(t[5]=f=>e.workshopsConfigVisible=f)},{default:be(()=>[ht(l)]),_:1},8,["show"]),ht(s,{show:e.tradingConfigVisible,"onUpdate:show":t[6]||(t[6]=f=>e.tradingConfigVisible=f)},{default:be(()=>[ht(u)]),_:1},8,["show"]),_("main",null,[_("div",Axt,[_("div",Mxt,[_("div",xxt,[_("div",null,[Ixt,et(_("select",{"onUpdate:modelValue":t[7]||(t[7]=f=>n.userStore.selectedRegion=f),onChange:t[8]||(t[8]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},Oxt,544),[[He,n.userStore.selectedRegion]]),Rxt,R(" \u2937 base storage: "+C(n.userStore.baseStorage)+" (",1),et(_("input",{type:"checkbox",id:"vp_t","onUpdate:modelValue":t[9]||(t[9]=f=>n.userStore.storageVP=f)},null,512),[[Ve,n.userStore.storageVP]]),Dxt,Nxt]),_("div",null,[Fxt,et(_("select",{"onUpdate:modelValue":t[10]||(t[10]=f=>n.userStore.selectedTax=f)},zxt,512),[[He,n.userStore.selectedTax]])]),_("div",null,[Bxt,et(_("select",{"onUpdate:modelValue":t[11]||(t[11]=f=>n.userStore.selectedLang=f),onChange:t[12]||(t[12]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},Hxt,544),[[He,n.userStore.selectedLang]])])]),_("div",Xxt,[Yxt,_("div",null,[et(_("input",{type:"radio",name:"dw",id:"dw_f",value:!1,"onUpdate:modelValue":t[13]||(t[13]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Ad,n.userStore.useDefaultWorker]]),qxt]),_("div",null,[et(_("input",{type:"radio",name:"dw",id:"dw_t",value:!0,"onUpdate:modelValue":t[14]||(t[14]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Ad,n.userStore.useDefaultWorker]]),_("label",Zxt,[R("Custom ("+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+C(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),_("button",{onClick:t[15]||(t[15]=f=>e.workerDialogVisible=!0)},"edit")])])]),_("div",Kxt,[Jxt,et(_("input",{type:"checkbox",id:"fe_t","onUpdate:modelValue":t[16]||(t[16]=f=>n.userStore.farmingEnable=f)},null,512),[[Ve,n.userStore.farmingEnable]]),Qxt,n.userStore.farmingEnable?(E(),M("span",tIt,[_("div",eIt,[rIt,et(_("input",{type:"range",style:{width:"4em"},"onUpdate:modelValue":t[17]||(t[17]=f=>n.userStore.farmingP2WShare=f),min:"0",max:"80",step:"10"},null,512),[[zt,n.userStore.farmingP2WShare,void 0,{number:!0}]]),nIt]),R(" (using "+C(80-n.userStore.farmingP2WShare)+"CP) ",1),_("div",iIt,[_("div",null,[oIt,sIt,aIt,lIt,et(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[18]||(t[18]=f=>n.userStore.farmingProfit=f)},null,512),[[zt,n.userStore.farmingProfit,void 0,{number:!0}]]),uIt,cIt,et(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[19]||(t[19]=f=>n.userStore.farmingBareProfit=f)},null,512),[[zt,n.userStore.farmingBareProfit,void 0,{number:!0}]]),fIt])])])):Z("",!0)]),_("div",hIt,[dIt,_("div",null,[_("button",{onClick:t[20]||(t[20]=f=>e.tradingConfigVisible=!0)},"crates"),_("button",{onClick:t[21]||(t[21]=f=>e.workshopsConfigVisible=!0)},"other")])]),Z("",!0),_("div",pIt,[vIt,_("div",null,[et(_("input",{type:"checkbox",id:"vi_hie","onUpdate:modelValue":t[24]||(t[24]=f=>n.userStore.mapHideInactive=f)},null,512),[[Ve,n.userStore.mapHideInactive]]),gIt]),_("div",null,[et(_("input",{type:"number",class:"w3em",min:"20",max:"50","onUpdate:modelValue":t[25]||(t[25]=f=>n.userStore.mapIconSize=f)},null,512),[[zt,n.userStore.mapIconSize]]),mIt])])]),_It,yIt,n.marketStore.apiAlive?(E(),M("span",bIt,"\u2713")):(E(),M("span",wIt,"\u274C")),SIt,_("button",{onClick:t[26]||(t[26]=f=>o.reload())},"reload"),TIt,_("p",null,[kIt,_("button",{onClick:t[27]||(t[27]=f=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[28]||(t[28]=f=>o.fileExport())},"export"),_("button",{onClick:t[29]||(t[29]=f=>o.clearCustomPrices())},"clear")])]),_("div",PIt,[_("table",CIt,[EIt,_("tbody",null,[(E(!0),M(W,null,gt(n.gameStore.itemKeys,f=>(E(),M("tr",{id:"item"+f},[_("td",null,[_("a",{href:this.userStore.itemUrl+f},[ht(c,{ik:f,with_name:!0},null,8,["ik"])],8,MIt),xIt,f in n.marketStore.calculatedPrices?(E(),M("span",IIt,[_("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[f]).map(([h,d])=>o.formatFixed(d,3)+" "+n.gameStore.uloc.item[h]).join(`
`)},"\u2139",8,LIt)])):Z("",!0)]),_("td",OIt,[f in n.marketStore.apiPrices?(E(),M("a",{key:0,href:this.marketStore.itemPriceUrl(f)},C(o.formatFixed(n.marketStore.apiPrices[f])),9,RIt)):(E(),M(W,{key:1},[R(C(o.formatFixed(n.gameStore.vendorPrices[f])),1)],64))]),_("td",null,[et(_("input",{type:"number",class:"price tar","onUpdate:modelValue":h=>n.userStore.customPrices[f]=h},null,8,DIt),[[zt,n.userStore.customPrices[f],void 0,{number:!0}]])]),_("td",NIt,[et(_("input",{type:"checkbox",disabled:f in n.gameStore.vendorPrices,"onUpdate:modelValue":h=>n.userStore.keepItems[f]=h},null,8,FIt),[[Ve,n.userStore.keepItems[f]]])]),_("td",$It,C(o.formatFixed(n.marketStore.prices[f])),1)],8,AIt))),256))])])])])],64)}const BIt=Gt(Cxt,[["render",zIt],["__scopeId","data-v-d81ce2cc"]]);const VIt={setup(){const e=mt(),t=Ut(),r=wn();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:st},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},UIt=_("div",{id:"toptext"},[_("p",null,"Using 150/10/10 worker")],-1),WIt=_("tr",null,[_("th",null,"Node/Town"),_("th",null,"connect"),_("th",null,"distance"),_("th",null,"M$/day"),_("th",null,"M$/day/CP")],-1),jIt={colspan:"5"};function GIt(e,t,r,n,i,o){return E(),M(W,null,[UIt,_("table",null,[WIt,(E(!0),M(W,null,gt(n.gameStore.plantzones,(s,a)=>(E(),M(W,null,[_("tr",null,[_("td",jIt,[_("h3",null,C(a)+" "+C(s.name),1)])]),(E(!0),M(W,null,gt(o.plantzonesNearestCpTownsProfits150[a],l=>(E(),M("tr",null,[_("td",null,C(n.gameStore.nodeName(l.tnk)),1),_("td",null,C(l.cp)+"CP ",1),_("td",null,C(o.formatFixed(l.dist,0)),1),_("td",null,C(o.formatFixed(l.priceDaily,2)),1),_("td",null,C(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const HIt=Gt(VIt,[["render",GIt]]),XIt={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},components:{ItemIcon:fi},data:()=>({houses:{},houseCrafts:{},towns:new Set([-1]),usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}},computed:{craftableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))e+=t.length;return e},stackableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))for(const r of t)r in this.gameStore.craftInputs&&(e+=1);return e}}},YIt={id:"toptext"},qIt=R(" Town: "),ZIt=["value"],KIt=R(" Usage: "),JIt=["value"],QIt={key:0},tLt=["href"],eLt=_("tr",null,[_("th",null,"town"),_("th",null,"node"),_("th",null,"name"),_("th",null,"CP"),_("th",null,"usage/level")],-1),rLt={key:0},nLt=["href"],iLt=R(C(" "));function oLt(e,t,r,n,i,o){const s=Ot("ItemIcon");return E(),M("main",null,[_("div",YIt,[qIt,et(_("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(E(!0),M(W,null,gt(e.towns,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.uloc.town[a]:"any"),9,ZIt))),256))],512),[[He,e.filterTown]]),KIt,et(_("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(E(!0),M(W,null,gt(e.usages,a=>(E(),M("option",{value:a},C(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,JIt))),256))],512),[[He,e.filterUsage]]),e.filterUsage!=-1?(E(),M("details",QIt,[_("summary",null,C(o.craftableCount)+" craftables, "+C(o.stackableCount)+" stackable",1),(E(!0),M(W,null,gt(this.houseCrafts[e.filterUsage].groups,(a,l)=>(E(),M("div",null,[R(" level "+C(l+1)+": ",1),_("table",null,[(E(!0),M(W,null,gt(a,u=>(E(),M("tr",null,[(E(!0),M(W,null,gt(this.gameStore.craftOutputs[u],c=>(E(),M("a",{href:this.userStore.itemUrl+c},[ht(s,{ik:c,with_name:!0},null,8,["ik"])],8,tLt))),256))]))),256))])]))),256))])):Z("",!0)]),_("table",null,[eLt,(E(!0),M(W,null,gt(e.houses,(a,l)=>(E(),M(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(E(),M("tr",rLt,[_("td",null,C(a.affTown),1),_("td",null,C(a.parentNode),1),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+a.key},C(n.gameStore.uloc.char[a.key]),9,nLt)]),_("td",null,C(a.CP)+" ("+C(a.CPfull)+")",1),_("td",null,[(E(!0),M(W,null,gt(a.CraftList,(u,c)=>(E(),M("span",null,[R(C(n.gameStore.uloc.housetype[c]),1),_("sup",null,C(u),1),iLt]))),256))])])):Z("",!0)],64))),256))])])}const sLt=Gt(XIt,[["render",oLt]]);wr([Va,Wlt,Wa,Ua,ja]);const aLt={setup(){const e=Ut();return{gameStore:mt(),userStore:e}},components:{VChart:Ga},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{townsWithHouses(){const e=[];if(!this.gameStore.ready)return e;for(const t of this.gameStore.townsWithLodging){const r=this.gameStore.tnk2tk(t);r in this.gameStore.uloc.town&&e.push(r)}return e},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>(""+r.name).localeCompare(n.name))}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready)return e;if(!this.bestLookup.success)return console.log("bestlookup failed for tk",this.tk),e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const a=this.bestLookup.indices.indexOf(n);a!==-1&&(o=this.bestLookup.states[a])}const s={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(s),r=s}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:st}},h0=e=>(Ue("data-v-8b0096ac"),e=e(),We(),e),lLt={class:"limit"},uLt={id:"controls"},cLt=h0(()=>_("p",null,[R("data from "),_("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),fLt={id:"fluid"},hLt={id:"sliders"},dLt={key:0},pLt=h0(()=>_("tr",null,[_("th"),_("th",null,"wanted"),_("th",null,"found"),_("th",null,"cost"),_("th",null,"per CP")],-1)),vLt=h0(()=>_("th",{class:"lodging"},"lodging ",-1)),gLt=["max"],mLt=h0(()=>_("th",{class:"storage"},"storage",-1)),_Lt=["max"],yLt={colspan:"3"},bLt=R(" town "),wLt=["value"],SLt={colspan:"2"},TLt=h0(()=>_("div",{style:{clear:"both"}},null,-1)),kLt={key:0,id:"houselist"};function PLt(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M("main",null,[_("div",lLt,[_("div",uLt,[cLt,_("div",fLt,[_("div",hLt,[this.gameStore.ready?(E(),M("table",dLt,[pLt,_("tr",null,[vLt,_("th",null,[et(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=a=>e.wantLodging=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,gLt),[[zt,e.wantLodging,void 0,{number:!0}]]),R(C(e.wantLodging),1)]),_("th",null,C(o.bestLookup?o.bestLookup.lodging:"?"),1),_("th",null,C(o.lodgingCost)+" CP",1),_("th",null,C(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),_("tr",null,[mLt,_("th",null,[et(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=a=>e.wantStorage=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,_Lt),[[zt,e.wantStorage,void 0,{number:!0}]]),R(C(e.wantStorage),1)]),_("th",null,C(o.bestLookup?o.bestLookup.storage:"?"),1),_("th",null,C(o.storageCost)+" CP",1),_("th",null,C(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),_("tr",null,[_("th",yLt,[bLt,et(_("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.tk=a)},[(E(!0),M(W,null,gt(this.townsWithHouses,a=>(E(),M("option",{value:a},C(n.gameStore.uloc.town[a]),9,wLt))),256))],512),[[He,e.tk]])]),_("th",SLt,C(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):Z("",!0)])])]),TLt,o.bestLookup?(E(),M("div",kLt,[(E(!0),M(W,null,gt(o.sortedResult,a=>(E(),M(W,null,[a.state>0?(E(),M("p",{key:0,class:_r({storage:a.state==1,lodging:a.state==2})},C(a.name),3)):Z("",!0)],64))),256))])):Z("",!0),ht(s,{class:"chart",option:o.chartOption},null,8,["option"])])])}const CLt=Gt(aLt,[["render",PLt],["__scopeId","data-v-8b0096ac"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ELt=typeof Object.defineProperty=="function"?Object.defineProperty:null,ALt=ELt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MLt=ALt;function xLt(){try{return MLt({},"x",{}),!0}catch{return!1}}var ILt=xLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LLt=Object.defineProperty,OLt=LLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wf=Object.prototype,cO=Wf.toString,fO=Wf.__defineGetter__,hO=Wf.__defineSetter__,RLt=Wf.__lookupGetter__,DLt=Wf.__lookupSetter__;function NLt(e,t,r){var n,i,o,s;if(typeof e!="object"||e===null||cO.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||cO.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(RLt.call(e,t)||DLt.call(e,t)?(n=e.__proto__,e.__proto__=Wf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,s="set"in r,i&&(o||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&fO&&fO.call(e,t,r.get),s&&hO&&hO.call(e,t,r.set),e}var FLt=NLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=ILt,zLt=OLt,BLt=FLt,VT;$Lt()?VT=zLt:VT=BLt;var gU=VT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VLt=gU;function ULt(e,t,r){VLt(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var WLt=ULt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jLt=WLt,GLt=jLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HLt=gU;function XLt(e,t,r){HLt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var YLt=XLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qLt=YLt,Tr=qLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=Math.floor,KLt=ZLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JLt=KLt,Fn=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QLt=Fn;function tOt(e){return QLt(e)===e}var eOt=tOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rOt=eOt,Ya=rOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nOt=4294967295>>>0,iOt=nOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oOt=Ya,sOt=iOt;function aOt(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&oOt(e.length)&&e.length>=0&&e.length<=sOt}var lOt=aOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uOt=lOt,cOt=uOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fOt=cOt;function hOt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!fOt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var dOt=hOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pOt=dOt,vOt=pOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gOt(e){return typeof e=="number"}var mU=gOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mOt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var _Ot=mOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yOt=_Ot,bOt=yOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wOt=bOt,SOt=wOt();function TOt(){return SOt&&typeof Symbol.toStringTag=="symbol"}var kOt=TOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var POt=kOt,Q_=POt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var COt=Object.prototype.toString,_U=COt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EOt=_U;function AOt(e){return EOt.call(e)}var MOt=AOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xOt=Object.prototype.hasOwnProperty;function IOt(e,t){return e==null?!1:xOt.call(e,t)}var LOt=IOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OOt=LOt,ty=OOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ROt=typeof Symbol=="function"?Symbol.toStringTag:"",DOt=ROt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NOt=ty,Uh=DOt,iw=_U;function FOt(e){var t,r,n;if(e==null)return iw.call(e);r=e[Uh],t=NOt(e,Uh);try{e[Uh]=void 0}catch{return iw.call(e)}return n=iw.call(e),t?e[Uh]=r:delete e[Uh],n}var $Ot=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zOt=Q_,BOt=MOt,VOt=$Ot,UT;zOt()?UT=VOt:UT=BOt;var Ki=UT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UOt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WOt=UOt,iE=WOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jOt=iE,GOt=jOt.prototype.toString,HOt=GOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XOt=HOt;function YOt(e){try{return XOt.call(e),!0}catch{return!1}}var qOt=YOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZOt=Q_,KOt=Ki,JOt=iE,QOt=qOt,tRt=ZOt();function eRt(e){return typeof e=="object"?e instanceof JOt?!0:tRt?QOt(e):KOt(e)==="[object Number]":!1}var yU=eRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rRt=mU,nRt=yU;function iRt(e){return rRt(e)||nRt(e)}var oRt=iRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bU=Tr,oE=oRt,sRt=mU,aRt=yU;bU(oE,"isPrimitive",sRt);bU(oE,"isObject",aRt);var jf=oE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wU=Tr,sE=vOt,aE=jf,lRt=sE(aE.isPrimitive),uRt=sE(aE.isObject),lE=sE(aE);wU(lE,"primitives",lRt);wU(lE,"objects",uRt);var cRt=lE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fRt=Number.POSITIVE_INFINITY,Fe=fRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hRt=iE,dRt=hRt.NEGATIVE_INFINITY,Dr=dRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pRt=Fe,vRt=Dr,gRt=Ya;function mRt(e){return e<pRt&&e>vRt&&gRt(e)}var SU=mRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Rt=jf.isPrimitive,yRt=SU;function bRt(e){return _Rt(e)&&yRt(e)}var TU=bRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wRt=jf.isObject,SRt=SU;function TRt(e){return wRt(e)&&SRt(e.valueOf())}var kU=TRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kRt=TU,PRt=kU;function CRt(e){return kRt(e)||PRt(e)}var ERt=CRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PU=Tr,uE=ERt,ARt=TU,MRt=kU;PU(uE,"isPrimitive",ARt);PU(uE,"isObject",MRt);var ey=uE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xRt=ey.isPrimitive;function IRt(e){return xRt(e)&&e>=0}var CU=IRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LRt=ey.isObject;function ORt(e){return LRt(e)&&e.valueOf()>=0}var EU=ORt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RRt=CU,DRt=EU;function NRt(e){return RRt(e)||DRt(e)}var FRt=NRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AU=Tr,cE=FRt,$Rt=CU,zRt=EU;AU(cE,"isPrimitive",$Rt);AU(cE,"isObject",zRt);var BRt=cE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VRt(e){return e!==e}var URt=VRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WRt=URt,te=WRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jRt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var MU=jRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GRt=MU;function HRt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(s){return GRt(e,s)}}var XRt=HRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YRt=Tr,xU=MU,qRt=XRt;YRt(xU,"factory",qRt);var qa=xU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZRt=Ki,KRt=typeof Uint32Array=="function";function JRt(e){return KRt&&e instanceof Uint32Array||ZRt(e)==="[object Uint32Array]"}var QRt=JRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t8t=QRt,e8t=t8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r8t=4294967295,n8t=r8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i8t=typeof Uint32Array=="function"?Uint32Array:null,o8t=i8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s8t=e8t,ow=n8t,dO=o8t;function a8t(){var e,t;if(typeof dO!="function")return!1;try{t=[1,3.14,-3.14,ow+1,ow+2],t=new dO(t),e=s8t(t)&&t[0]===1&&t[1]===3&&t[2]===ow-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var l8t=a8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u8t=l8t,c8t=u8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f8t=typeof Uint32Array=="function"?Uint32Array:void 0,h8t=f8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d8t(){throw new Error("not implemented")}var p8t=d8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v8t=c8t,g8t=h8t,m8t=p8t,WT;v8t()?WT=g8t:WT=m8t;var Gf=WT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _8t=Ki,y8t=typeof Float64Array=="function";function b8t(e){return y8t&&e instanceof Float64Array||_8t(e)==="[object Float64Array]"}var w8t=b8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S8t=w8t,T8t=S8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k8t=typeof Float64Array=="function"?Float64Array:null,P8t=k8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C8t=T8t,pO=P8t;function E8t(){var e,t;if(typeof pO!="function")return!1;try{t=new pO([1,3.14,-3.14,NaN]),e=C8t(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var A8t=E8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M8t=A8t,x8t=M8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I8t=typeof Float64Array=="function"?Float64Array:void 0,L8t=I8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O8t(){throw new Error("not implemented")}var R8t=O8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D8t=x8t,N8t=L8t,F8t=R8t,jT;D8t()?jT=N8t:jT=F8t;var Hf=jT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $8t=Ki,z8t=typeof Uint8Array=="function";function B8t(e){return z8t&&e instanceof Uint8Array||$8t(e)==="[object Uint8Array]"}var V8t=B8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U8t=V8t,W8t=U8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j8t=255,G8t=j8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H8t=typeof Uint8Array=="function"?Uint8Array:null,X8t=H8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y8t=W8t,sw=G8t,vO=X8t;function q8t(){var e,t;if(typeof vO!="function")return!1;try{t=[1,3.14,-3.14,sw+1,sw+2],t=new vO(t),e=Y8t(t)&&t[0]===1&&t[1]===3&&t[2]===sw-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var Z8t=q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K8t=Z8t,J8t=K8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q8t=typeof Uint8Array=="function"?Uint8Array:void 0,tDt=Q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eDt(){throw new Error("not implemented")}var rDt=eDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nDt=J8t,iDt=tDt,oDt=rDt,GT;nDt()?GT=iDt:GT=oDt;var sDt=GT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aDt=Ki,lDt=typeof Uint16Array=="function";function uDt(e){return lDt&&e instanceof Uint16Array||aDt(e)==="[object Uint16Array]"}var cDt=uDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fDt=cDt,hDt=fDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dDt=65535,pDt=dDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vDt=typeof Uint16Array=="function"?Uint16Array:null,gDt=vDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mDt=hDt,aw=pDt,gO=gDt;function _Dt(){var e,t;if(typeof gO!="function")return!1;try{t=[1,3.14,-3.14,aw+1,aw+2],t=new gO(t),e=mDt(t)&&t[0]===1&&t[1]===3&&t[2]===aw-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var yDt=_Dt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bDt=yDt,wDt=bDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=typeof Uint16Array=="function"?Uint16Array:void 0,TDt=SDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kDt(){throw new Error("not implemented")}var PDt=kDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CDt=wDt,EDt=TDt,ADt=PDt,HT;CDt()?HT=EDt:HT=ADt;var MDt=HT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xDt=sDt,IDt=MDt,LDt={uint16:IDt,uint8:xDt},ODt=LDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mO=ODt,IU;function RDt(){var e,t;return e=new mO.uint16(1),e[0]=4660,t=new mO.uint8(e.buffer),t[0]===52}IU=RDt();var DDt=IU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NDt=DDt,Xf=NDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FDt=Xf,XT;FDt===!0?XT=1:XT=0;var $Dt=XT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zDt=Gf,BDt=Hf,VDt=$Dt,LU=new BDt(1),UDt=new zDt(LU.buffer);function WDt(e){return LU[0]=e,UDt[VDt]}var jDt=WDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GDt=jDt,vi=GDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HDt=Xf,YT;HDt===!0?YT=1:YT=0;var XDt=YT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YDt=Gf,qDt=Hf,ZDt=XDt,qT=new qDt(1),KDt=new YDt(qT.buffer);function JDt(e,t){return qT[0]=e,KDt[ZDt]=t>>>0,qT[0]}var QDt=JDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t9t=QDt,d0=t9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e9t=1023,zu=e9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r9t=.34657359027997264,n9t=r9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function i9t(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var o9t=i9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var s9t=te,lw=vi,Qv=d0,_O=Fe,a9t=Dr,l9t=zu,u9t=n9t,c9t=o9t,f9t=709.782712893384,uw=.6931471803691238,cw=19082149292705877e-26,yO=1.4426950408889634,h9t=38.816242111356935,d9t=1.0397207708399179;function p9t(e){var t,r,n,i,o,s,a,l,u,c,f,h;if(e===_O||s9t(e))return e;if(e===a9t)return-1;if(e===0)return e;if(e<0?(r=!0,a=-e):(r=!1,a=e),a>=h9t){if(r)return-1;if(a>=f9t)return _O}if(o=lw(a)|0,a>u9t)a<d9t?r?(n=e+uw,i=-cw,h=-1):(n=e-uw,i=cw,h=1):(r?h=yO*e-.5:h=yO*e+.5,h|=0,c=h,n=e-c*uw,i=c*cw),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,s=1+l*c9t(l),c=3-s*t,f=l*((s-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(a=1-(f-e),n=lw(a)+(h<<20)|0,a=Qv(a,n),a-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Qv(c,n),a=c-(f-e)):(n=l9t-h<<20|0,c=Qv(c,n),a=e-(f+c),a+=1),n=lw(a)+(h<<20)|0,Qv(a,n)))}var v9t=p9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g9t=v9t,Yf=g9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function m9t(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var _9t=m9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var y9t=te,bO=vi,wO=d0,b9t=Fe,w9t=Dr,SO=zu,S9t=_9t,fw=.6931471803691238,hw=19082149292705877e-26,T9t=.41421356237309503,k9t=-.2928932188134525,P9t=1862645149230957e-24,C9t=5551115123125783e-32,E9t=9007199254740992,A9t=.6666666666666666;function M9t(e){var t,r,n,i,o,s,a,l,u,c;if(e<-1||y9t(e))return NaN;if(e===-1)return w9t;if(e===b9t||e===0)return e;if(e<0?n=-e:n=e,c=1,n<T9t){if(n<P9t)return n<C9t?e:e-e*e*.5;e>k9t&&(c=0,i=e,r=1)}return c!==0&&(n<E9t?(u=1+e,r=bO(u),c=(r>>20)-SO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=bO(u),c=(r>>20)-SO,o=0),r&=1048575,r<434334?u=wO(u,r|1072693248):(c+=1,u=wO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*hw,c*fw+o):(l=t*(1-A9t*i),c*fw-(l-(c*hw+o)-i)):(s=i/(2+i),a=s*s,l=a*S9t(a),c===0?i-(t-s*(t+l)):c*fw-(t-(s*(t+l)+(c*hw+o))-i))}var x9t=M9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I9t=x9t,$n=I9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L9t=Math.sqrt,O9t=L9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R9t=O9t,or=R9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D9t=.7853981633974483,OU=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function N9t(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var F9t=N9t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $9t(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var z9t=$9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var B9t=te,V9t=or,TO=OU,U9t=F9t,W9t=z9t,j9t=6123233995736766e-32;function G9t(e){var t,r,n,i,o;if(B9t(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*W9t(r),r=V9t(r+r),o=TO-r,r=r*i-j9t,o-=r,o+=TO;else{if(n<1e-8)return e;r=n*n,o=r*U9t(r),o=n*o+n}return t?-o:o}var H9t=G9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X9t=H9t,fE=X9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y9t(e){return Math.abs(e)}var q9t=Y9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z9t=q9t,ve=Z9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K9t=Math.ceil,J9t=K9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q9t=J9t,RU=Q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t7t=Fn,e7t=RU;function r7t(e){return e<0?e7t(e):t7t(e)}var n7t=r7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i7t=n7t,hE=i7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o7t=1023,s7t=o7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var a7t=-1023,l7t=a7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u7t=-1074,c7t=u7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f7t=Fe,h7t=Dr;function d7t(e){return e===f7t||e===h7t}var p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v7t=p7t,qf=v7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g7t=2147483648>>>0,m7t=g7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _7t=2147483647>>>0,ry=_7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y7t=Xf,DU,ZT,KT;y7t===!0?(ZT=1,KT=0):(ZT=0,KT=1);DU={HIGH:ZT,LOW:KT};var b7t=DU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w7t=Gf,S7t=Hf,NU=b7t,FU=new S7t(1),kO=new w7t(FU.buffer),T7t=NU.HIGH,k7t=NU.LOW;function P7t(e,t,r,n){return FU[0]=e,t[n]=kO[T7t],t[n+r]=kO[k7t],t}var $U=P7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C7t=$U;function E7t(e){return C7t(e,[0>>>0,0>>>0],1,0)}var A7t=E7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M7t=Tr,zU=A7t,x7t=$U;M7t(zU,"assign",x7t);var dE=zU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I7t=Xf,BU,JT,QT;I7t===!0?(JT=1,QT=0):(JT=0,QT=1);BU={HIGH:JT,LOW:QT};var L7t=BU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O7t=Gf,R7t=Hf,VU=L7t,UU=new R7t(1),PO=new O7t(UU.buffer),D7t=VU.HIGH,N7t=VU.LOW;function F7t(e,t){return PO[D7t]=e,PO[N7t]=t,UU[0]}var $7t=F7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7t=$7t,pE=z7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B7t=m7t,V7t=ry,U7t=dE,W7t=vi,j7t=pE,dw=[0,0];function G7t(e,t){var r,n;return U7t.assign(e,dw,1,0),r=dw[0],r&=V7t,n=W7t(t),n&=B7t,r|=n,j7t(r,dw[1])}var H7t=G7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X7t=H7t,vE=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y7t=22250738585072014e-324,Bu=Y7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q7t=Bu,Z7t=qf,K7t=te,J7t=ve,Q7t=4503599627370496;function tNt(e,t,r,n){return K7t(e)||Z7t(e)?(t[n]=e,t[n+r]=0,t):e!==0&&J7t(e)<q7t?(t[n]=e*Q7t,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var WU=tNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eNt=WU;function rNt(e){return eNt(e,[0,0],1,0)}var nNt=rNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iNt=Tr,jU=nNt,oNt=WU;iNt(jU,"assign",oNt);var sNt=jU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aNt=2146435072,lNt=aNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uNt=vi,cNt=lNt,fNt=zu;function hNt(e){var t=uNt(e);return t=(t&cNt)>>>20,t-fNt|0}var dNt=hNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pNt=dNt,vNt=pNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gNt=Fe,mNt=Dr,_Nt=zu,yNt=s7t,bNt=l7t,wNt=c7t,SNt=te,TNt=qf,kNt=vE,PNt=sNt.assign,CNt=vNt,ENt=dE,ANt=pE,MNt=2220446049250313e-31,xNt=2148532223>>>0,pw=[0,0],vw=[0,0];function INt(e,t){var r,n;return t===0||e===0||SNt(e)||TNt(e)?e:(PNt(e,pw,1,0),e=pw[0],t+=pw[1],t+=CNt(e),t<wNt?kNt(0,e):t>yNt?e<0?mNt:gNt:(t<=bNt?(t+=52,n=MNt):n=1,ENt.assign(e,vw,1,0),r=vw[0],r&=xNt,r|=t+_Nt<<20,n*ANt(r,vw[1])))}var LNt=INt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ONt=LNt,Zf=ONt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RNt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var DNt=RNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var NNt=Zf,FNt=DNt;function $Nt(e,t,r){var n,i,o,s;return n=e-t,i=n*n,o=n-i*FNt(i),s=1-(t-n*o/(2-o)-e),NNt(s,r)}var zNt=$Nt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BNt=te,CO=hE,VNt=Dr,EO=Fe,UNt=zNt,WNt=.6931471803691238,jNt=19082149292705877e-26,AO=1.4426950408889634,GNt=709.782712893384,HNt=-745.1332191019411,GU=1/(1<<28),XNt=-GU;function YNt(e){var t,r,n;return BNt(e)||e===EO?e:e===VNt?0:e>GNt?EO:e<HNt?0:e>XNt&&e<GU?1+e:(e<0?n=CO(AO*e-.5):n=CO(AO*e+.5),t=e-n*WNt,r=n*jNt,UNt(t,r,n))}var qNt=YNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZNt=qNt,Ge=ZNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KNt=Ya;function JNt(e){return KNt(e/2)}var QNt=JNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tFt=QNt,eFt=tFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MO=eFt;function rFt(e){return e>0?MO(e-1):MO(e+1)}var nFt=rFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iFt=nFt,gE=iFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oFt=Xf,ek;oFt===!0?ek=0:ek=1;var sFt=ek;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aFt=Gf,lFt=Hf,uFt=sFt,rk=new lFt(1),cFt=new aFt(rk.buffer);function fFt(e,t){return rk[0]=e,cFt[uFt]=t>>>0,rk[0]}var hFt=fFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dFt=hFt,p0=dFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pFt(e){return e|0}var vFt=pFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gFt=vFt,HU=gFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xO=gE,mFt=vE,_Ft=Dr,tg=Fe;function yFt(e,t){return t===_Ft?tg:t===tg?0:t>0?xO(t)?e:0:xO(t)?mFt(tg,e):tg}var bFt=yFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var wFt=ry,SFt=vi,TFt=1072693247,eg=1e300,rg=1e-300;function kFt(e,t){var r,n;return n=SFt(e),r=n&wFt,r<=TFt?t<0?eg*eg:rg*rg:t>0?eg*eg:rg*rg}var PFt=kFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CFt=ve,IO=Fe;function EFt(e,t){return e===-1?(e-e)/(e-e):e===1?1:CFt(e)<1==(t===IO)?0:IO}var AFt=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MFt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var xFt=MFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var IFt=vi,ng=p0,LO=d0,LFt=zu,OFt=xFt,RFt=1048575,OO=1048576,DFt=1072693248,NFt=536870912,FFt=524288,$Ft=20,zFt=9007199254740992,BFt=.9617966939259756,VFt=.9617967009544373,UFt=-7028461650952758e-24,WFt=[1,1.5],jFt=[0,.5849624872207642],GFt=[0,1350039202129749e-23];function HFt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x;return S=0,r<OO&&(t*=zFt,S-=53,r=IFt(t)),S+=(r>>$Ft)-LFt|0,k=r&RFt|0,r=k|DFt|0,k<=235662?x=0:k<767610?x=1:(x=0,S+=1,r-=OO),t=LO(t,r),c=WFt[x],w=t-c,T=1/(t+c),i=w*T,s=ng(i,0),n=(r>>1|NFt)+FFt,n+=x<<18,l=LO(0,n),u=t-(l-c),a=T*(w-s*l-s*u),o=i*i,b=o*o*OFt(o),b+=a*(s+i),o=s*s,l=3+o+b,l=ng(l,0),u=b-(l-3-o),w=s*l,T=a*l+u*i,h=w+T,h=ng(h,0),d=T-(h-w),p=VFt*h,v=UFt*h+d*BFt+GFt[x],f=jFt[x],y=S,m=p+v+f+y,m=ng(m,0),g=v-(m-y-f-p),e[0]=m,e[1]=g,e}var XFt=HFt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YFt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var qFt=YFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ZFt=p0,KFt=qFt,JFt=1.4426950408889634,QFt=1.4426950216293335,t$t=19259629911266175e-24;function e$t(e,t){var r,n,i,o,s,a;return i=t-1,o=i*i*KFt(i),s=QFt*i,a=i*t$t-o*JFt,n=s+a,n=ZFt(n,0),r=a-(n-s),e[0]=n,e[1]=r,e}var r$t=e$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n$t=.6931471805599453,i$t=n$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o$t=1048575,s$t=o$t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a$t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var l$t=a$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var u$t=vi,RO=d0,c$t=p0,f$t=HU,h$t=Zf,d$t=i$t,DO=zu,NO=ry,FO=s$t,p$t=l$t,$O=1048576,v$t=1071644672,Wh=20,g$t=.6931471824645996,m$t=-1904654299957768e-24;function _$t(e,t,r){var n,i,o,s,a,l,u,c,f,h,d;return h=e&NO|0,d=(h>>Wh)-DO|0,f=0,h>v$t&&(f=e+($O>>d+1)>>>0,d=((f&NO)>>Wh)-DO|0,n=(f&~(FO>>d))>>>0,o=RO(0,n),f=(f&FO|$O)>>Wh-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=c$t(o,0),a=o*g$t,l=(r-(o-t))*d$t+o*m$t,c=a+l,u=l-(c-a),o=c*c,i=c-o*p$t(o),s=c*i/(i-2)-(u+c*u),c=1-(s-c),e=u$t(c),e=f$t(e),e+=f<<Wh>>>0,e>>Wh<=0?c=h$t(c,f):c=RO(c,e),c}var y$t=_$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zO=te,BO=gE,VO=qf,b$t=Ya,UO=or,w$t=ve,gw=dE,S$t=p0,WO=HU,T$t=Dr,k$t=Fe,mw=ry,P$t=bFt,C$t=PFt,E$t=AFt,A$t=XFt,M$t=r$t,x$t=y$t,I$t=1072693247,L$t=1105199104,O$t=1139802112,jO=1083179008,R$t=1072693248,D$t=1083231232,N$t=3230714880>>>0,GO=31,Qs=1e300,ta=1e-300,F$t=8008566259537294e-32,Qo=[0,0],HO=[0,0];function XU(e,t){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m,g;if(zO(e)||zO(t))return NaN;if(gw.assign(t,Qo,1,0),a=Qo[0],l=Qo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return UO(e);if(t===-.5)return 1/UO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(VO(t))return E$t(e,t)}if(gw.assign(e,Qo,1,0),o=Qo[0],s=Qo[1],s===0){if(o===0)return P$t(e,t);if(e===1)return 1;if(e===-1&&BO(t))return-1;if(VO(e))return e===T$t?XU(-0,-t):t<0?0:k$t}if(e<0&&b$t(t)===!1)return(e-e)/(e-e);if(i=w$t(e),r=o&mw|0,n=a&mw|0,u=o>>>GO|0,c=a>>>GO|0,u&&BO(t)?u=-1:u=1,n>L$t){if(n>O$t)return C$t(e,t);if(r<I$t)return c===1?u*Qs*Qs:u*ta*ta;if(r>R$t)return c===0?u*Qs*Qs:u*ta*ta;p=M$t(HO,i)}else p=A$t(HO,i,r);if(f=S$t(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,gw.assign(v,Qo,1,0),m=WO(Qo[0]),g=WO(Qo[1]),m>=jO){if((m-jO|g)!==0||d+F$t>v-h)return u*Qs*Qs}else if((m&mw)>=D$t&&((m-N$t|g)!==0||d<=v-h))return u*ta*ta;return v=x$t(m,h,d),u*v}var $$t=XU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z$t=$$t,sr=z$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B$t=2.718281828459045,Kf=B$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V$t=2220446049250313e-31,Ds=V$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U$t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var W$t=U$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var XO=te,j$t=$n,G$t=or,H$t=ve,X$t=Ge,_w=sr,Y$t=Kf,yw=Ds,bw=W$t,ww=10.900511;function q$t(e,t){var r,n,i,o,s,a,l;return XO(e)||XO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<yw?(s=l/e,s/=t,s):l===e&&t<yw?1/t:l===t&&e<yw?1/e:(e<t&&(a=t,t=e,e=a),n=e+ww-.5,i=t+ww-.5,o=l+ww-.5,s=bw(e)*(bw(t)/bw(l)),r=e-.5-t,H$t(t*r)<o*100&&e>100?s*=X$t(r*j$t(-t/o)):s*=_w(n/o,r),o>1e10?s*=_w(n/o*(i/o),t):s*=_w(n*i/(o*o),t),s*=G$t(Y$t/i),s))}var Z$t=q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K$t=Z$t,YU=K$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J$t=Fe;function Q$t(e){return e===0&&1/e===J$t}var tzt=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ezt=tzt,rzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YO=rzt,Sw=te,nzt=Dr,ig=Fe;function izt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Sw(e)||Sw(t)?NaN:e===ig||t===ig?ig:e===t&&e===0?YO(e)?e:t:e>t?e:t;for(n=nzt,o=0;o<r;o++){if(i=arguments[o],Sw(i)||i===ig)return i;(i>n||i===n&&i===0&&YO(i))&&(n=i)}return n}var ozt=izt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var szt=ozt,Vu=szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var azt=Dr;function lzt(e){return e===0&&1/e===azt}var uzt=lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var czt=uzt,qU=czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qO=qU,Tw=te,og=Dr,fzt=Fe;function hzt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Tw(e)||Tw(t)?NaN:e===og||t===og?og:e===t&&e===0?qO(e)?e:t:e<t?e:t;for(n=fzt,o=0;o<r;o++){if(i=arguments[o],Tw(i)||i===og)return i;(i<n||i===n&&i===0&&qO(i))&&(n=i)}return n}var dzt=hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pzt=dzt,Za=pzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vzt=17976931348623157e292,Jf=vzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gzt=2147483647,mzt=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _zt=1.5707963267948966,mE=_zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yzt=3.141592653589793,Ka=yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bzt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var wzt=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Szt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var Tzt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var kzt=wzt,Pzt=Tzt;function Czt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*kzt(o),n+=i*i*Pzt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var Ezt=Czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Azt=Ezt,ZU=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ZO=-.16666666666666632,Mzt=.00833333333332249,xzt=-.0001984126982985795,Izt=27557313707070068e-22,Lzt=-25050760253406863e-24,Ozt=158969099521155e-24;function Rzt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=Mzt+o*(xzt+o*Izt)+o*i*(Lzt+o*Ozt),n=o*e,t===0?e+n*(ZO+o*r):e-(o*(.5*t-n*r)-t-n*ZO)}var Dzt=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nzt=Dzt,KU=Nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fzt=Xf,nk;Fzt===!0?nk=0:nk=1;var $zt=nk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zzt=Gf,Bzt=Hf,Vzt=$zt,JU=new Bzt(1),Uzt=new zzt(JU.buffer);function Wzt(e){return JU[0]=e,Uzt[Vzt]}var jzt=Wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gzt=jzt,Hzt=Gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xzt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var Yzt=Xzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qzt=Yzt,Zzt=qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kzt=Zzt;function Jzt(e){return Kzt(0,e)}var Qzt=Jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tBt=Qzt,eBt=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var rBt=Fn,sg=Zf,ny=eBt,QU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],nBt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],kw=16777216,Pw=5960464477539063e-23,ag=ny(20),KO=ny(20),lg=ny(20),Er=ny(20);function tW(e,t,r,n,i,o,s,a,l){var u,c,f,h,d,p,v,m,g;for(h=o,g=n[r],m=r,d=0;m>0;d++)c=Pw*g|0,Er[d]=g-kw*c|0,g=n[m-1]+c,m-=1;if(g=sg(g,i),g-=8*rBt(g*.125),v=g|0,g-=v,f=0,i>0?(d=Er[r-1]>>24-i,v+=d,Er[r-1]-=d<<24-i,f=Er[r-1]>>23-i):i===0?f=Er[r-1]>>23:g>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)m=Er[d],u===0?m!==0&&(u=1,Er[d]=16777216-m):Er[d]=16777215-m;if(i>0)switch(i){case 1:Er[r-1]&=8388607;break;case 2:Er[r-1]&=4194303;break}f===2&&(g=1-g,u!==0&&(g-=sg(1,i)))}if(g===0){for(m=0,d=r-1;d>=o;d--)m|=Er[d];if(m===0){for(p=1;Er[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[a+d]=QU[s+d],c=0,m=0;m<=a;m++)c+=e[m]*l[a+(d-m)];n[d]=c}return r+=p,tW(e,t,r,n,i,o,s,a,l)}}if(g===0)for(r-=1,i-=24;Er[r]===0;)r-=1,i-=24;else g=sg(g,-i),g>=kw?(c=Pw*g|0,Er[r]=g-kw*c|0,r+=1,i+=24,Er[r]=c):Er[r]=g|0;for(c=sg(1,i),d=r;d>=0;d--)n[d]=c*Er[d],c*=Pw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=nBt[p]*n[d+p];lg[r-d]=c}for(c=0,d=r;d>=0;d--)c+=lg[d];for(f===0?t[0]=c:t[0]=-c,c=lg[0]-c,d=1;d<=r;d++)c+=lg[d];return f===0?t[1]=c:t[1]=-c,v&7}function iBt(e,t,r,n){var i,o,s,a,l,u,c,f,h;for(o=4,a=n-1,s=(r-3)/24|0,s<0&&(s=0),u=r-24*(s+1),f=s-a,h=a+o,c=0;c<=h;c++)f<0?ag[c]=0:ag[c]=QU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=a;f++)i+=e[f]*ag[a+(c-f)];KO[c]=i}return l=o,tW(e,t,l,KO,u,o,s,a,ag)}var oBt=iBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sBt=Math.round,aBt=sBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lBt=aBt,iy=lBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var uBt=iy,JO=vi,cBt=.6366197723675814,fBt=1.5707963267341256,hBt=6077100506506192e-26,dBt=6077100506303966e-26,pBt=20222662487959506e-37,vBt=20222662487111665e-37,gBt=84784276603689e-45,QO=2047;function mBt(e,t,r){var n,i,o,s,a,l,u;return i=uBt(e*cBt),s=e-i*fBt,a=i*hBt,u=t>>20|0,r[0]=s-a,n=JO(r[0]),l=u-(n>>20&QO),l>16&&(o=s,a=i*dBt,s=o-a,a=i*pBt-(o-s-a),r[0]=s-a,n=JO(r[0]),l=u-(n>>20&QO),l>49&&(o=s,a=i*vBt,s=o-a,a=i*gBt-(o-s-a),r[0]=s-a)),r[1]=s-r[0]-a,i}var _Bt=mBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var yBt=vi,bBt=Hzt,wBt=pE,SBt=oBt,ug=_Bt,TBt=0,kBt=16777216,ea=1.5707963267341256,Hl=6077100506506192e-26,cg=2*Hl,fg=3*Hl,hg=4*Hl,PBt=2147483647,CBt=2146435072,EBt=1048575,ABt=598523,MBt=1072243195,xBt=1073928572,IBt=1074752122,LBt=1074977148,OBt=1075183036,RBt=1075388923,DBt=1075594811,NBt=1094263291,jh=[0,0,0],Gh=[0,0];function FBt(e,t){var r,n,i,o,s,a,l,u;if(i=yBt(e),o=i&PBt|0,o<=MBt)return t[0]=e,t[1]=0,0;if(o<=IBt)return(o&EBt)===ABt?ug(e,o,t):o<=xBt?e>0?(u=e-ea,t[0]=u-Hl,t[1]=u-t[0]-Hl,1):(u=e+ea,t[0]=u+Hl,t[1]=u-t[0]+Hl,-1):e>0?(u=e-2*ea,t[0]=u-cg,t[1]=u-t[0]-cg,2):(u=e+2*ea,t[0]=u+cg,t[1]=u-t[0]+cg,-2);if(o<=DBt)return o<=OBt?o===LBt?ug(e,o,t):e>0?(u=e-3*ea,t[0]=u-fg,t[1]=u-t[0]-fg,3):(u=e+3*ea,t[0]=u+fg,t[1]=u-t[0]+fg,-3):o===RBt?ug(e,o,t):e>0?(u=e-4*ea,t[0]=u-hg,t[1]=u-t[0]-hg,4):(u=e+4*ea,t[0]=u+hg,t[1]=u-t[0]+hg,-4);if(o<NBt)return ug(e,o,t);if(o>=CBt)return t[0]=NaN,t[1]=NaN,0;for(r=bBt(e),n=(o>>20)-1046,u=wBt(o-(n<<20|0),r),a=0;a<2;a++)jh[a]=u|0,u=(u-jh[a])*kBt;for(jh[2]=u,s=3;jh[s-1]===TBt;)s-=1;return l=SBt(jh,Gh,n,s),e<0?(t[0]=-Gh[0],t[1]=-Gh[1],-l):(t[0]=Gh[0],t[1]=Gh[1],l)}var $Bt=FBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zBt=$Bt,eW=zBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BBt=vi,tR=ZU,Cw=KU,VBt=eW,UBt=2147483647,WBt=2146435072,jBt=1072243195,GBt=1045430272,ts=[0,0];function HBt(e){var t,r;if(t=BBt(e),t&=UBt,t<=jBt)return t<GBt?e:Cw(e,0);if(t>=WBt)return NaN;switch(r=VBt(e,ts),r&3){case 0:return Cw(ts[0],ts[1]);case 1:return tR(ts[0],ts[1]);case 2:return-Cw(ts[0],ts[1]);default:return-tR(ts[0],ts[1])}}var XBt=HBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YBt=XBt,v0=YBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qBt=2.5066282746310007,oy=qBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZBt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var KBt=ZBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var JBt=oy,eR=sr,QBt=Ge,tVt=KBt,eVt=143.01608;function rVt(e){var t,r,n;return t=1/e,t=1+t*tVt(t),r=QBt(e),e>eVt?(n=eR(e,.5*e-.25),r=n*(n/r)):r=eR(e,e-.5)/r,JBt*r*t}var nVt=rVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iVt=.5772156649015329,oVt=iVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var sVt=oVt;function aVt(e,t){return t/((1+sVt*e)*e)}var lVt=aVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uVt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var cVt=uVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var fVt=te,hVt=Ya,dVt=qU,rR=ve,pVt=Fn,vVt=v0,nR=Fe,iR=Dr,oR=Ka,sR=nVt,aR=lVt,gVt=cVt;function mVt(e){var t,r,n,i;if(hVt(e)&&e<0||e===iR||fVt(e))return NaN;if(e===0)return dVt(e)?iR:nR;if(e>171.61447887182297)return nR;if(e<-170.5674972726612)return 0;if(r=rR(e),r>33)return e>=0?sR(e):(n=pVt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*vVt(oR*i),t*oR/(rR(i)*sR(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return aR(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return aR(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*gVt(e))}var _Vt=mVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yVt=_Vt,Uo=yVt;const bVt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wVt=te,SVt=Ya,TVt=Uo,kVt=Fe,PVt=bVt,CVt=170;function EVt(e){return wVt(e)?NaN:SVt(e)?e<0?NaN:e<=CVt?PVt[e]:kVt:TVt(e+1)}var AVt=EVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MVt=AVt,rW=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xVt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var IVt=xVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var LVt=IVt,OVt=LVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RVt=OVt,DVt=RVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NVt=10.900511,g0=NVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lR=DVt,FVt=Uo,uR=$n,cR=ve,fR=Ge,hR=sr,$Vt=Ds,zVt=Kf,BVt=g0,dR=170,VVt=4269068009004705e289;function nW(e,t){var r,n,i;return e<$Vt?t>dR?(n=nW(t,dR-t),n*=e,n*=VVt,1/n):1/(e*FVt(e+t)):(i=e+BVt-.5,e+t===e?cR(t)<10?r=fR((.5-e)*uR(t/i)):r=1:(cR(t)<10?r=fR((.5-e)*uR(t/i)):r=hR(i/(i+t),e-.5),r*=lR(e)/lR(e+t)),r*=hR(zVt/(i+t),t),r)}var UVt=nW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var WVt=ve,pR=Fn,vR=Uo,gR=rW,jVt=UVt,mR=170;function GVt(e,t){var r,n,i;if(e<=0||e+t<=0)return vR(e)/vR(e+t);if(n=pR(t),n===t){if(i=pR(e),i===e&&e<=mR&&e+t<=mR)return gR(i-1)/gR(n+i-1);if(WVt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return jVt(e,t)}var HVt=GVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XVt=HVt,_E=XVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YVt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var qVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZVt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var KVt=ZVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var _R=vi,JVt=d0,QVt=te,tUt=zu,eUt=Dr,rUt=qVt,nUt=KVt,dg=.6931471803691238,pg=19082149292705877e-26,iUt=0x40000000000000,oUt=.3333333333333333,yR=1048575,sUt=2146435072,aUt=1048576,lUt=1072693248;function uUt(e){var t,r,n,i,o,s,a,l,u,c,f,h;return e===0?eUt:QVt(e)||e<0?NaN:(r=_R(e),o=0,r<aUt&&(o-=54,e*=iUt,r=_R(e)),r>=sUt?e+e:(o+=(r>>20)-tUt|0,r&=yR,l=r+614244&1048576|0,e=JVt(e,r|l^lUt),o+=l>>20|0,a=e-1,(yR&2+r)<3?a===0?o===0?0:o*dg+o*pg:(s=a*a*(.5-oUt*a),o===0?a-s:o*dg-(s-o*pg-a)):(c=a/(2+a),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*rUt(f),n=h*nUt(f),l|=u,s=n+i,l>0?(t=.5*a*a,o===0?a-(t-c*(t+s)):o*dg-(t-(c*(t+s)+o*pg)-a)):o===0?a-c*(a-s):o*dg-(c*(a-s)-o*pg-a))))}var cUt=uUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fUt=cUt,ke=fUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var hUt=vi,Ew=ZU,bR=KU,dUt=eW,es=[0,0],pUt=2147483647,vUt=1072243195,gUt=1044381696,mUt=2146435072;function _Ut(e){var t,r;if(t=hUt(e),t&=pUt,t<=vUt)return t<gUt?1:Ew(e,0);if(t>=mUt)return NaN;switch(r=dUt(e,es),r&3){case 0:return Ew(es[0],es[1]);case 1:return-bR(es[0],es[1]);case 2:return-Ew(es[0],es[1]);default:return bR(es[0],es[1])}}var yUt=_Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bUt=yUt,yE=bUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wUt=te,SUt=qf,wR=yE,Aw=v0,TUt=ve,Hh=vE,Xh=Ka;function kUt(e){var t,r;return wUt(e)?NaN:SUt(e)?NaN:(r=e%2,t=TUt(r),t===0||t===1?Hh(0,r):t<.25?Aw(Xh*r):t<.75?(t=.5-t,Hh(wR(Xh*t),r)):t<1.25?(r=Hh(1,r)-r,Aw(Xh*r)):t<1.75?(t-=1.5,-Hh(wR(Xh*t),r)):(r-=Hh(2,r),Aw(Xh*r)))}var PUt=kUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CUt=PUt,EUt=CUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AUt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var MUt=AUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xUt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var IUt=xUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LUt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var OUt=LUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RUt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var DUt=RUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NUt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var FUt=NUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ut(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var zUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BUt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var VUt=BUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UUt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var WUt=UUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jUt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var GUt=jUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HUt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var XUt=HUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var YUt=te,qUt=qf,ZUt=ve,gc=ke,KUt=hE,JUt=EUt,QUt=Ka,Mw=Fe,tWt=MUt,eWt=IUt,rWt=OUt,nWt=DUt,iWt=FUt,oWt=zUt,sWt=VUt,aWt=WUt,lWt=GUt,uWt=XUt,cWt=.07721566490153287,fWt=.3224670334241136,hWt=1,dWt=-.07721566490153287,pWt=.48383612272381005,vWt=-.1475877229945939,gWt=.06462494023913339,mWt=-.07721566490153287,_Wt=1,yWt=.4189385332046727,vg=1.4616321449683622,bWt=4503599627370496,wWt=0x400000000000000,SWt=8470329472543003e-37,SR=1.4616321449683622,TWt=-.12148629053584961,kWt=-3638676997039505e-33;function PWt(e){var t,r,n,i,o,s,a,l,u,c,f,h,d;if(YUt(e)||qUt(e))return e;if(e===0)return Mw;if(e<0?(t=!0,e=-e):t=!1,e<SWt)return-gc(e);if(t){if(e>=bWt||(u=JUt(e),u===0))return Mw;r=gc(QUt/ZUt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-gc(e),e>=vg-1+.27?(f=1-e,n=0):e>=vg-1-.27?(f=e-(SR-1),n=1):(f=e,n=2)):(d=0,e>=vg+.27?(f=2-e,n=0):e>=vg-.27?(f=e-SR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,s=cWt+h*tWt(h),o=h*(fWt+h*eWt(h)),a=f*s+o,d+=a-.5*f;break;case 1:h=f*f,c=h*f,s=pWt+c*iWt(c),o=vWt+c*oWt(c),i=gWt+c*sWt(c),a=h*s-(kWt-c*(o+f*i)),d+=TWt+a;break;case 2:s=f*(mWt+f*aWt(f)),o=_Wt+f*lWt(f),d+=-.5*f+s/o;break}else if(e<8)switch(n=KUt(e),f=e-n,a=f*(dWt+f*nWt(f)),l=hWt+f*rWt(f),d=.5*f+a/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=gc(h)}else e<wWt?(u=gc(e),h=1/e,f=h*h,c=yWt+h*uWt(f),d=(e-.5)*(u-1)+c):d=e*(gc(e)-1);return t&&(d=r-d),d}var CWt=PWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EWt=CWt,Qf=EWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AWt=14901161193847656e-24,MWt=AWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xWt=709.782712893384,Uu=xWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IWt=Ge;function LWt(e,t){var r,n,i,o;if(i=IWt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var OWt=LWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RWt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var DWt=RWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NWt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var FWt=NWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Wt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var zWt=$Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BWt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var VWt=BWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UWt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var WWt=UWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jWt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var GWt=jWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HWt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var XWt=HWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YWt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var qWt=YWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ZWt=te,TR=Ge,KWt=p0,JWt=Fe,QWt=Dr,tjt=DWt,ejt=FWt,rjt=zWt,njt=VWt,ijt=WWt,ojt=GWt,sjt=XWt,ajt=qWt,gg=1e-300,ljt=13877787807814457e-33,kR=.8450629115104675,ujt=.12837916709551256,cjt=1,fjt=-.0023621185607526594,hjt=1,djt=-.009864944034847148,pjt=1,vjt=-.0098649429247001,gjt=1;function mjt(e){var t,r,n,i,o,s,a,l;if(ZWt(e))return NaN;if(e===JWt)return 0;if(e===QWt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<ljt?1-e:(n=e*e,i=ujt+n*tjt(n),o=cjt+n*ejt(n),s=i/o,e<.25?1-(e+e*s):(i=e*s,i+=e-.5,.5-i));if(r<1.25)return o=r-1,a=fjt+o*rjt(o),l=hjt+o*njt(o),t?1+kR+a/l:1-kR-a/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=djt+o*ijt(o),o=pjt+o*ojt(o);else{if(e<-6)return 2-gg;i=vjt+o*sjt(o),o=gjt+o*ajt(o)}return n=KWt(r,0),i=TR(-(n*n)-.5625)*TR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-gg:gg*gg}var _jt=mjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yjt=_jt,iW=yjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bjt=iW,PR=or,wjt=Ge,Sjt=Ka;function Tjt(e,t){var r,n,i,o,s;if(o=bjt(PR(t)),o!==0&&e>1){for(n=wjt(-t)/PR(Sjt*t),n*=t,r=.5,n/=r,i=n,s=2;s<e;++s)n/=s-r,n*=t,i+=n;o+=i}return o}var kjt=Tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pjt=-708.3964185322641,th=Pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mc=Ge,mg=sr,Cjt=ke,CR=Uu,ER=th;function Ejt(e,t){var r,n;return n=e*Cjt(t),t>=1?n<CR&&-t>ER?r=mg(t,e)*mc(-t):e>=1?r=mg(t/mc(t/e),e):r=mc(n-t):n>ER?r=mg(t,e)*mc(-t):t/e<CR?r=mg(t/mc(t/e),e):r=mc(n-t),r}var Ajt=Ejt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mjt=6.283185307179586,oW=Mjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xjt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var Ijt=xjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ljt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var Ojt=Ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rjt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var Djt=Rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Njt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var Fjt=Njt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $jt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var zjt=$jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bjt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var Vjt=Bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ujt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var Wjt=Ujt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jjt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var Gjt=jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hjt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var Xjt=Hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Yjt=qa,qjt=iW,xw=or,Zjt=Ge,Kjt=ke,Jjt=oW,Qjt=Ijt,tGt=Ojt,eGt=Djt,rGt=Fjt,nGt=zjt,iGt=Vjt,oGt=Wjt,sGt=Gjt,aGt=Xjt,yi=[0,0,0,0,0,0,0,0,0,0];function lGt(e,t){var r,n,i,o,s;return n=(t-e)/e,i=-Kjt(1+n)+n,o=e*i,s=xw(2*i),t<e&&(s=-s),yi[0]=Qjt(s),yi[1]=tGt(s),yi[2]=eGt(s),yi[3]=rGt(s),yi[4]=nGt(s),yi[5]=iGt(s),yi[6]=oGt(s),yi[7]=sGt(s),yi[8]=aGt(s),yi[9]=-.0005967612901927463,r=Yjt(yi,1/e),r*=Zjt(-o)/xw(Jjt*e),t<e&&(r=-r),r+=qjt(xw(o))/2,r}var uGt=lGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cGt=eval,fGt=cGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hGt=fGt;function dGt(){var e;try{hGt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var pGt=dGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vGt=pGt,sW=vGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _g=ve,gGt=Ds,mGt=1e6;function _Gt(e,t){var r,n,i,o,s,a;if(a={},arguments.length>1&&(a=t),n=a.tolerance||gGt,o=a.maxTerms||mGt,s=a.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(s+=i,_g(n*s)>=_g(i)||--o===0)break}else do i=e(),s+=i;while(_g(n*s)<_g(i)&&--o);return s}var yGt=_Gt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AR=ve,bGt=Ds,wGt=1e6;function SGt(e,t){var r,n,i,o,s;s={},arguments.length>1&&(s=t),r=s.tolerance||bGt,i=s.maxTerms||wGt,o=s.initialValue||0;do n=e(),o+=n;while(AR(r*o)<AR(n)&&--i);return o}var TGt=SGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kGt=sW,PGt=yGt,CGt=TGt,ik;kGt()?ik=PGt:ik=CGt;var bE=ik;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function EGt(e,t){var r=1,n=e,i=t;return o;function o(){var s=r;return n+=1,r*=i/n,s}}var AGt=EGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var MGt=bE,xGt=AGt;function IGt(e,t,r){var n,i;return r=r||0,i=xGt(e,t),n=MGt(i,{initialValue:r}),n}var LGt=IGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OGt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var RGt=OGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DGt=RGt,NGt=DGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FGt=NGt,sy=FGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var $Gt=sy,zGt=Qf,BGt=Uo,VGt=$n,UGt=or,WGt=ve,ra=Ge,Yh=sr,Iw=Vu,Lw=Za,MR=ke,yg=Uu,qh=th,Ow=g0,jGt=Kf;function GGt(e,t){var r,n,i,o,s,a,l;return i=e+Ow-.5,l=(t-e-Ow+.5)/i,e<1?t<=qh?ra(e*MR(t)-t-zGt(e)):Yh(t,e)*ra(-t)/BGt(e):(WGt(l*l*e)<=100&&e>150?(r=e*(VGt(l)-l)+t*(.5-Ow)/i,r=ra(r)):(o=e*MR(t/i),s=e-t,Lw(o,s)<=qh||Iw(o,s)>=yg?(n=s/e,Lw(o,s)/2>qh&&Iw(o,s)/2<yg?(a=Yh(t/i,e/2)*ra(s/2),r=a*a):Lw(o,s)/4>qh&&Iw(o,s)/4<yg&&t>e?(a=Yh(t/i,e/4)*ra(s/4),r=a*a,r*=r):n>qh&&n<yg?r=Yh(t*ra(n)/i,e):r=ra(o+s)):r=Yh(t/i,e)*ra(s)),r*=UGt(i/jGt)/$Gt(e),r)}var HGt=GGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xR=te,IR=ve,XGt=Yf,YGt=ke,qGt=sr,ZGt=hE;function KGt(e,t){var r;if(xR(e)||xR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((IR(t*(e-1))<.5||IR(t)<.2)&&(r=YGt(e)*t,r<.5))return XGt(r)}else if(ZGt(t)!==t)return NaN;return qGt(e,t)-1}var JGt=KGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QGt=JGt,tHt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eHt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var rHt=eHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nHt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var iHt=nHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oHt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var sHt=oHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Rw=ke,aHt=Ds,lHt=rHt,uHt=iHt,cHt=sHt,fHt=.15896368026733398,hHt=.5281534194946289,dHt=.45201730728149414;function pHt(e,t,r){var n,i,o,s;if(e<aHt)return-Rw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=Rw(e);while(e>=3);r=e-2}return o=r*(e+1),s=lHt(r),i+=o*fHt+o*s,i}return e<1&&(i+=-Rw(e),r=t,t=e,e+=1),e<=1.5?(o=uHt(t),n=t*r,i+=n*hHt+n*o,i):(o=r*t,s=cHt(-r),i+=o*dHt+o*s,i)}var vHt=pHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var LR=Uo,OR=Yf,gHt=$n,mHt=te,RR=vHt;function _Ht(e){return mHt(e)?NaN:e<0?e<-.5?LR(1+e)-1:OR(-gHt(e)+RR(e+2,e+1,e)):e<2?OR(RR(e+1,e,e-1)):LR(1+e)-1}var yHt=_Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bHt=yHt,wHt=bHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function SHt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,s;function s(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var THt=SHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kHt=tHt,PHt=bE,CHt=wHt,EHt=THt;function AHt(e,t,r){var n,i,o,s,a;return i=CHt(e),o=(i+1)/e,s=kHt(t,e),i-=s,i/=e,a=EHt(e,t),s+=1,n=r?o:0,i=-s*PHt(a,{initialValue:(n-i)/s}),r&&(i=-i),[i,o]}var MHt=AHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xHt=11754943508222875e-54,ay=xHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L1=ve,Po=ay,IHt=Ds,LHt=1e6;function OHt(e,t,r){var n,i,o,s,a,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),s=u[1],o=u[0],s===0&&(s=Po),a=s,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=Po),a=u[1]+u[0]/a,a===0&&(a=Po),l=1/l,i=a*l,s*=i);while(L1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=Po),a=u[1]+u[0]/a,a===0&&(a=Po),l=1/l,i=a*l,s*=i);while(u&&L1(i-1)>t&&--r);return o/s}function RHt(e,t,r){var n,i,o,s,a,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=Po),s=o,a=0,n===!0)do l=e.next().value,l&&(a=l[1]+l[0]*a,a===0&&(a=Po),s=l[1]+l[0]/s,s===0&&(s=Po),a=1/a,i=s*a,o*=i);while(l&&L1(i-1)>t&&--r);else do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Po),s=l[1]+l[0]/s,s===0&&(s=Po),a=1/a,i=s*a,o*=i);while(l&&L1(i-1)>t&&--r);return o}function DHt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||LHt,i=n.tolerance||IHt,n.keep?RHt(e,i,r):OHt(e,i,r)}var NHt=DHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aW=ve,FHt=Ds,nf=ay,$Ht=1e6;function zHt(e,t,r){var n,i,o,s,a,l;l=e(),a=l[1],i=l[0],a===0&&(a=nf),o=a,s=0;do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=nf),o=l[1]+l[0]/o,o===0&&(o=nf),s=1/s,n=o*s,a*=n);while(l&&aW(n-1)>t&&--r);return i/a}function BHt(e,t,r){var n,i,o,s,a;a=e(),s=a[1],s===0&&(s=nf),i=s,o=0;do a=e(),a&&(o=a[1]+a[0]*o,o===0&&(o=nf),i=a[1]+a[0]/i,i===0&&(i=nf),o=1/o,n=i*o,s*=n);while(a&&aW(n-1)>t&&--r);return s}function VHt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||FHt,r=n.maxIter||$Ht,n.keep?BHt(e,i,r):zHt(e,i,r)}var UHt=VHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WHt=sW,jHt=NHt,GHt=UHt,ok;WHt()?ok=jHt:ok=GHt;var lW=ok;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function HHt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var XHt=HHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YHt=lW,qHt=XHt;function ZHt(e,t){var r=qHt(e,t);return 1/(t-e+1+YHt(r))}var KHt=ZHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JHt=Qf,QHt=Fn,Zh=Uo,DR=ve,tXt=Ge,NR=sr,bi=ke,eXt=MWt,FR=Jf,rXt=oy,$R=Uu,nXt=Fe,iXt=OWt,oXt=kjt,zR=Ajt,sXt=uGt,Dw=LGt,BR=HGt,aXt=MHt,VR=KHt,lXt=170;function uW(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=lXt&&!o)return f&&t*4<e?(h=t*bi(e)-e,h+=bi(VR(t,e))):!f&&t>4*e?(h=t*bi(e)-e,a=0,h+=bi(Dw(t,e,a)/t)):(h=uW(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=bi(h)-t+(t-.5)*bi(t),h+=bi(rXt)):(h=t*bi(e)-e,a=0,h+=bi(Dw(t,e,a)/t)):h=bi(h)+JHt(t)),h>$R?nXt:tXt(h);switch(c=t<30&&t<=e+1&&e<$R,c?(g=QHt(t),d=g===t,l=d?!1:DR(g-t)===.5):d=l=!1,d&&e>.6?(f=!f,s=0):l&&e>.2?(f=!f,s=1):e<eXt&&t>1?s=6:e<.5?-.4/bi(e)<t?s=2:s=3:e<1.1?e*.75<t?s=2:s=3:(u=!1,o&&t>20&&(p=DR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?s=5:e-1/(3*e)<t?s=2:(s=4,f=!f)),s){case 0:h=iXt(t,e),o===!1&&(h*=Zh(t));break;case 1:h=oXt(t,e),o===!1&&(h*=Zh(t));break;case 2:h=o?BR(t,e):zR(t,e),h!==0&&(a=0,i=!1,f&&(a=o?1:Zh(t),o||h>=1||FR*h>a?(a/=h,o||t<1||FR/t>a?(a*=-t,i=!0):a=0):a=0)),h*=Dw(t,e,a)/t,i&&(f=!1,h=-h);break;case 3:f=!f,m=aXt(t,e,f),h=m[0],y=m[1],f=!1,o&&(h/=y);break;case 4:h=o?BR(t,e):zR(t,e),h!==0&&(h*=VR(t,e));break;case 5:h=sXt(t,e),e>=t&&(f=!f);break;case 6:h=o?NR(e,t)/Zh(t+1):NR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Zh(t),h=v-h),h}var uXt=uW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cXt=uXt,cW=cXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _c=Ge,bg=sr,fXt=ke,UR=Uu,WR=th;function hXt(e,t){var r,n;return n=e*fXt(t),t>=1?n<UR&&-t>WR?r=bg(t,e)*_c(-t):e>=1?r=bg(t/_c(t/e),e):r=_c(n-t):n>WR?r=bg(t,e)*_c(-t):t/e<UR?r=bg(t/_c(t/e),e):r=_c(n-t),r}var dXt=hXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pXt=sy,vXt=Qf,gXt=Uo,mXt=$n,_Xt=or,yXt=ve,na=Ge,Kh=sr,Nw=Vu,Fw=Za,jR=ke,wg=Uu,Jh=th,$w=g0,bXt=Kf;function wXt(e,t){var r,n,i,o,s,a,l;return i=e+$w-.5,l=(t-e-$w+.5)/i,e<1?t<=Jh?na(e*jR(t)-t-vXt(e)):Kh(t,e)*na(-t)/gXt(e):(yXt(l*l*e)<=100&&e>150?(r=e*(mXt(l)-l)+t*(.5-$w)/i,r=na(r)):(o=e*jR(t/i),s=e-t,Fw(o,s)<=Jh||Nw(o,s)>=wg?(n=s/e,Fw(o,s)/2>Jh&&Nw(o,s)/2<wg?(a=Kh(t/i,e/2)*na(s/2),r=a*a):Fw(o,s)/4>Jh&&Nw(o,s)/4<wg&&t>e?(a=Kh(t/i,e/4)*na(s/4),r=a*a,r*=r):n>Jh&&n<wg?r=Kh(t*na(n)/i,e):r=na(o+s)):r=Kh(t/i,e)*na(s)),r*=_Xt(i/bXt)/pXt(e),r)}var SXt=wXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TXt=_E,GR=rW,kXt=cW,PXt=$n,Sg=ve,HR=sr,CXt=ke,EXt=Bu,XR=Ds,AXt=dXt,MXt=SXt,ia=new Array(30);function xXt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x;if(h=t-1,k=e+h/2,n<.35?m=PXt(-n):m=CXt(r),x=-k*m,y=MXt(t,x),y<=EXt)return i;for(s?(a=y/TXt(e,t),a/=HR(k,t)):a=AXt(t,x)/HR(k,t),a*=o,ia[0]=1,b=kXt(x,t,!0,!0),b/=y,c=i+a*b,u=1,d=m/2,d*=d,p=1,g=4*k*k,f=t,T=1;T<ia.length;++T){for(u+=2,ia[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,ia[T]+=v*ia[T-w]/GR(l),l+=2;if(ia[T]/=T,ia[T]+=h/GR(u),b=(f*(f+1)*b+(x+f+1)*p)/g,p*=d,f+=2,S=a*ia[T]*b,c+=S,S>1){if(Sg(S)<Sg(XR*c))break}else if(Sg(S/XR)<Sg(c))break}return c}var IXt=xXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function LXt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var OXt=LXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zw=ve,YR=Vu,RXt=Fe;function DXt(e,t){var r,n,i;if(r=arguments.length,r===0)return RXt;if(r===2)return YR(zw(e),zw(t));for(n=[],i=0;i<r;i++)n.push(zw(arguments[i]));return YR.apply(null,n)}var NXt=DXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FXt=NXt,$Xt=FXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bw=ve,qR=Za,zXt=Fe;function BXt(e,t){var r,n,i;if(r=arguments.length,r===0)return zXt;if(r===2)return qR(Bw(e),Bw(t));for(n=[],i=0;i<r;i++)n.push(Bw(arguments[i]));return qR.apply(null,n)}var VXt=BXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UXt=VXt,WXt=UXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Vw=sy,jXt=$Xt,GXt=WXt,ZR=Yf,oa=$n,KR=or,Tg=ve,fo=Ge,ho=sr,HXt=Za,jn=ke,po=Uu,yc=th,Uw=g0,XXt=Kf;function YXt(e,t,r,n,i){var o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(!i)return ho(r,e)*ho(n,t);if(g=e+t,l=e+Uw-.5,u=t+Uw-.5,c=g+Uw-.5,o=Vw(g),o/=Vw(e)*Vw(t),o*=KR(u/XXt),o*=KR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,GXt(f,h)<.2)if(f*h>0||HXt(e,t)<1)Tg(f)<.1?o*=fo(e*oa(f)):o*=ho(r*c/l,e),Tg(h)<.1?o*=fo(t*oa(h)):o*=ho(n*c/u,t);else if(jXt(f,h)<.5)s=e<t,a=t/e,s&&a*h<.1||!s&&f/a>.1?(d=ZR(a*oa(h)),d=f+d+d*f,d=e*oa(d),o*=fo(d)):(d=ZR(oa(f)/a),d=h+d+d*h,d=t*oa(d),o*=fo(d));else if(Tg(f)<Tg(h))if(y=e*oa(f)+t*jn(n*c/u),y<=yc||y>=po){if(y+=jn(o),y>=po)return NaN;o=fo(y)}else o*=fo(y);else if(y=t*oa(h)+e*jn(r*c/l),y<=yc||y>=po){if(y+=jn(o),y>=po)return NaN;o=fo(y)}else o*=fo(y);else if(v=r*c/l,m=n*c/u,f=e*jn(v),h=t*jn(m),f>=po||f<=yc||h>=po||h<=yc)if(e<t)if(p=ho(m,t/e),d=e*(jn(v)+jn(p)),d<po&&d>yc)o*=ho(p*v,e);else{if(h+=f+jn(o),h>=po)return NaN;o=fo(h)}else if(p=ho(v,e/t),d=(jn(p)+jn(m))*t,d<po&&d>yc)o*=ho(p*m,t);else{if(h+=f+jn(o),h>=po)return NaN;o=fo(h)}else o*=ho(v,e)*ho(m,t);return o}var wE=YXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qXt=lW,ZXt=wE,KXt={keep:!0,maxIter:1e3};function JXt(e,t,r,n){var i=0;return o;function o(){var s,a,l;return a=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,s=e+2*i-1,a/=s*s,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[a,l]}}function QXt(e,t,r,n,i,o){var s,a,l;return s=ZXt(e,t,r,n,i),o&&(o[1]=s),s===0?s:(l=JXt(e,t,r,n),a=qXt(l,KXt),s/a)}var tYt=QXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ww=Ya,JR=te,eYt=gE,rYt=iy;function fW(e,t){var r,n;if(JR(e)||JR(t))return NaN;if(!Ww(e)||!Ww(t))return NaN;if(t<0)return 0;if(e<0)return r=fW(-e+t-1,t),eYt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return Ww(r)?r:rYt(r)}var nYt=fW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iYt=nYt,oYt=iYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var QR=oYt,Ml=Fn,Qh=sr,sYt=Bu;function aYt(e,t,r,n){var i,o,s,a,l;if(o=Qh(r,e),o>sYt)for(a=o,l=Ml(e-1);l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;else if(s=Ml(e*r),s<=t+1&&(s=Ml(t+2)),o=Qh(r,s)*Qh(n,e-s),o*=QR(Ml(e),Ml(s)),o===0)for(l=s-1;l>t;l--)o+=Qh(r,l)*Qh(n,e-l),o*=QR(Ml(e),Ml(l));else{for(a=o,i=o,l=s-1;l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;for(a=i,l=s+1;l<=e;l++)a*=(e-l+1)*r/(l*n),o+=a}return o}var lYt=aYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uYt=wE;function cYt(e,t,r,n,i,o,s){var a,l,u,c;if(a=uYt(e,t,r,n,o),s&&(s[1]=a),a/=e,a===0)return a;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return a*=u,a}var fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var jw=sy,hYt=bE,dYt=$n,pYt=or,Gw=Ge,kg=sr,td=ke,vYt=Bu,t8=Uu,e8=th,Hw=g0,gYt=Kf,r8={maxTerms:100};function mYt(e,t,r,n){var i=1-t,o=1;return s;function s(){var a=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,a}}function _Yt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p;return i?(d=e+t,l=e+Hw-.5,u=t+Hw-.5,c=d+Hw-.5,a=jw(d)/(jw(e)*jw(t)),f=td(c/u)*(t-.5),h=td(r*c/l)*e,f>e8&&f<t8&&h>e8&&h<t8?(e*t<u*10?a*=Gw((t-.5)*dYt(e/u)):a*=kg(c/u,t-.5),a*=kg(r*c/l,e),a*=pYt(l/gYt),o&&(o[1]=a*kg(s,t))):(a=td(a)+f+h+(td(l)-1)/2,o&&(o[1]=Gw(a+t*td(s))),a=Gw(a))):a=kg(r,e),a<vYt?n:(p=mYt(e,t,r,a),r8.initialValue=n,hYt(p,r8))}var yYt=_Yt,bYt=te,wYt=Yf,Pg=Fn,n8=$n,i8=fE,Gn=YU,Xw=or,SYt=Ge,ed=sr,TYt=Vu,o8=Za,Cg=Jf,s8=Bu,kYt=mzt,PYt=mE,hW=Ka,sa=IXt,Yw=OXt,CYt=wE,a8=tYt,EYt=lYt,rd=fYt,vo=yYt,AYt=1/hW;function MYt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,y,b;if(b=1-e,p=a,v=a+s,o[v]=-1,bYt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?Cg/2:s8*2,i?(o[p]=n?1:Gn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?Cg/2:s8*2,i?o[p]=0:o[p]=n?1:Gn(t,r),o):t===.5&&r===.5?(o[v]=AYt*Xw(b*e),y=i8(Xw(i?b:e)),y/=PYt,n||(y*=hW),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r===1?t===1?(o[p]=i?b:e,o[v]=1,o):(o[v]=t*ed(e,t-1),b<.5?y=i?-wYt(t*n8(-b)):SYt(t*n8(-b)):y=i?-(ed(e,t)-1):ed(e,t),n||(y/=t),o[p]=y,o):(o8(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),TYt(t,r)<=1?t>=o8(.2,r)||ed(e,t)<=.9?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(n?u=1:u=Yw(t+r,t,20),c=rd(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-sa(t+20,r,e,b,c,u,n)):c=sa(t+20,r,e,b,c,u,n))):r<=1||e<.1&&ed(r*e,t)<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):t>=15?i?(c=-(n?1:Gn(t,r)),i=!1,c=-sa(t,r,e,b,c,1,n)):c=sa(t,r,e,b,0,1,n):(n?u=1:u=Yw(t+r,t,20),c=rd(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-sa(t+20,r,e,b,c,u,n)):c=sa(t+20,r,e,b,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*b-r,l<0&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r<40?Pg(t)===t&&Pg(r)===r&&t<kYt-100?(m=t-1,g=r+m,c=EYt(g,m,e,b),n||(c*=Gn(t,r))):r*e<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-vo(t,r,e,c,n,o,b)):c=vo(t,r,e,0,n,o,b):t>15?(g=Pg(r),g===r&&(g-=1),f=r-g,n?u=1:u=Yw(t+f,f,g),c=rd(f,t,b,e,g,n),c=sa(t,f,e,b,c,1,n),c/=u):n?(g=Pg(r),f=r-g,f<=0&&(g-=1,f+=1),c=rd(f,t,b,e,g,n),c+=rd(t,f,e,b,20,n),i&&(c-=1),c=sa(t+20,f,e,b,c,1,n),i&&(c=-c,i=!1)):c=a8(t,r,e,b,n,o):c=a8(t,r,e,b,n,o)),o[v]<0&&(o[v]=CYt(t,r,e,b,!0)),h=b*e,o[v]!==0&&(Cg*h<o[v]?o[v]=Cg/2:o[v]/=h),o[p]=i?(n?1:Gn(t,r))-c:c,o))}var dW=MYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xYt=dW;function IYt(e,t,r,n,i){return xYt(e,t,r,n,i,[0,0],1,0)}var LYt=IYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OYt=Tr,pW=LYt,RYt=dW;OYt(pW,"assign",RYt);var vW=pW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DYt=vW.assign;function NYt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,DYt(e,t,r,n,i,o,1,0),o[0]}var FYt=NYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Yt=FYt,SE=$Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zYt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var BYt=zYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VYt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var UYt=VYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WYt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var jYt=WYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GYt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var HYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XYt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var YYt=XYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qYt=te,l8=or,u8=ke,ZYt=Fe,KYt=Dr,JYt=BYt,QYt=UYt,tqt=jYt,eqt=HYt,rqt=YYt,nqt=.08913147449493408,iqt=2.249481201171875,oqt=.807220458984375,sqt=.9399557113647461,aqt=.9836282730102539;function lqt(e){var t,r,n,i,o;return qYt(e)?NaN:e===0?ZYt:e===2?KYt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=JYt(e),t*(i*nqt+i*o)):n>=.25?(i=l8(-2*u8(n)),n-=.25,o=QYt(n),t*(i/(iqt+o))):(n=l8(-u8(n)),n<3?(r=n-1.125,o=tqt(r),t*(oqt*n+o*n)):n<6?(r=n-3,o=eqt(r),t*(sqt*n+o*n)):(r=n-6,o=rqt(r),t*(aqt*n+o*n))))}var uqt=lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cqt=uqt,m0=cqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var fqt=te,c8=fE,hqt=or,f8=OU,dqt=6123233995736766e-32;function pqt(e){var t;return fqt(e)?NaN:e<-1||e>1?NaN:e>.5?2*c8(hqt(.5-.5*e)):(t=f8-c8(e),t+=dqt,t+=f8,t)}var vqt=pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gqt=vqt,mqt=gqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _qt=1.4142135623730951,TE=_qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yqt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var bqt=yqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wqt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var Sqt=wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tqt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var kqt=Tqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pqt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var Cqt=Pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eqt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var Aqt=Eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mqt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var xqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Iqt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var Lqt=Iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oqt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var Rqt=Oqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dqt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var Nqt=Dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Fqt=_E,$qt=qa,zqt=or,Bqt=Ka,Vqt=bqt,Uqt=Sqt,Wqt=kqt,jqt=Cqt,Gqt=Aqt,Hqt=xqt,Xqt=Lqt,Yqt=Rqt,qqt=Nqt,Zqt=0,go=[1,0,0,0,0,0,0,0,0,0];function Kqt(e,t){var r,n;return n=Fqt(e/2,.5)*zqt(e*Bqt)*(t-.5),r=1/e,go[1]=Vqt(r),go[2]=Uqt(r),go[3]=Wqt(r),go[4]=jqt(r),go[5]=Gqt(r),go[6]=Hqt(r),go[7]=Xqt(r),go[8]=Yqt(r),go[9]=qqt(r),Zqt+n*$qt(go,n*n)}var Jqt=Kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qqt=_E,tZt=qa,h8=or,eZt=sr,rZt=Ka,aa=[0,0,0,0,0,0,0];function nZt(e,t){var r,n,i,o,s,a,l,u;return u=Qqt(e/2,.5)*h8(e*rZt)*t,o=e+2,s=e+4,a=e+6,aa[0]=1,aa[1]=-(e+1)/(2*o),o*=e+2,aa[2]=-e*(e+1)*(e+3)/(8*o*s),o*=e+2,aa[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*s*a),o*=e+2,s*=e+4,aa[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*s*a*(e+8)),o*=e+2,aa[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*s*a*(e+8)*(e+10)),o*=e+2,s*=e+4,a*=e+6,aa[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*s*a*(e+8)*(e+10)*(e+12)),l=h8(e),i=eZt(l*u,1/e),n=i*i,r=tZt(aa,n),r*=l,r/=i,-r}var iZt=nZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var d8=m0,oZt=Yf,p8=or,sZt=sr,aZt=mE,v8=TE;function lZt(e,t){var r,n,i,o,s,a,l;return e>1e20?-d8(2*t)*v8:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*p8(r*aZt)*e,l=sZt(o*2*t,2/e),l>.05+r?(a=-d8(2*t)*v8,l=a*a,e<5&&(i+=.3*(e-4.5)*(a+.6)),i+=(((.05*o*a-5)*a-7)*a-2)*a+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*a,l=oZt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,s=p8(e*l),-s)}var uZt=lZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var g8=m0,m8=Fn,qw=Zf,_8=iy,cZt=mqt,Eg=or,fZt=ve,y8=yE,hZt=sr,dZt=v0,b8=TE,w8=Ka,S8=Jqt,Ag=iZt,Zw=uZt,T8=268435456,pZt=1/3,vZt=2*53/3,gZt=.8549879733383485;function mZt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y;if(a=0,t>r?(u=r,r=t,t=u,s=!0):s=!1,m8(e)===e&&e<20)switch(i=qw(1,vZt),m8(e)){case 1:t===.5?a=0:a=-y8(w8*t)/dZt(w8*t);break;case 2:a=(2*t-1)/Eg(2*t*r);break;case 4:l=4*t*r,o=Eg(l),v=4*y8(cZt(o)/3)/o,m=Eg(v-4),a=t-.5<0?-m:m;break;case 6:if(t<1e-150)return(s?-1:1)*Zw(e,t);g=4*(t-t*t),y=hZt(g,pZt),p=6*(1+gZt*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*g*d-270*f+2187)/(5*(4*g*h-216*p-243));while(fZt((p-c)/p)>i);p=Eg(p-e),a=t-.5<0?-p:p;break;default:e>T8?a=g8(2*t)*b8:e<3?(n=.2742-e*.0242143,t>n?a=S8(e,t):a=Ag(e,t)):(n=qw(1,_8(e/-.654)),t>n?a=Zw(e,t):a=Ag(e,t))}else e>T8?a=-g8(2*t)*b8:e<3?(n=.2742-e*.0242143,t>n?a=S8(e,t):a=Ag(e,t)):(n=qw(1,_8(e/-.654)),t>n?a=Zw(e,t):a=Ag(e,t));return s?-a:a}var _Zt=mZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yZt=_Zt;function bZt(e,t,r){var n,i,o,s;return i=t/2,o=1-i,n=e*2,s=yZt(n,i,o),r&&(r.value=s*s/(n+s*s)),n/(n+s*s)}var wZt=bZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Mg=qa,SZt=m0,k8=or,TZt=Ge,rs=TE,je=[0,0,0,0,0,0,0],nd=[0,0,0,0];function kZt(e,t,r){var n,i,o,s,a,l,u;return n=SZt(2*r),n/=-k8(e/2),nd[0]=n,l=t-e,s=l*l,a=s*l,je[0]=-l*rs/2,je[1]=(1-2*l)/8,je[2]=-(l*rs/48),je[3]=-1/192,je[4]=-l*rs/3840,je[5]=0,je[6]=0,nd[1]=Mg(je,n),je[0]=l*rs*(3*l-2)/12,je[1]=(20*s-12*l+1)/128,je[2]=l*rs*(20*l-1)/960,je[3]=(16*s+30*l-15)/4608,je[4]=l*rs*(21*l+32)/53760,je[5]=(-(32*s)+63)/368640,je[6]=-l*rs*(120*l+17)/25804480,nd[2]=Mg(je,n),je[0]=l*rs*(-75*s+80*l-16)/480,je[1]=(-1080*a+868*s-90*l-45)/9216,je[2]=l*rs*(-1190*s+84*l+373)/53760,je[3]=(-2240*a-2508*s+2100*l-165)/368640,je[4]=0,je[5]=0,je[6]=0,nd[3]=Mg(je,n),o=Mg(nd,1/e),i=o*o,u=-TZt(-i/2),i===0?.5:(1+o*k8((1+u)/i))/2}var PZt=kZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var P8=ke,CZt=Jf,xg=CZt/4;function EZt(e,t){return r;function r(n){var i,o,s;return s=1-n,s===0?[-xg,-xg]:n===0?[-xg,-xg]:(o=P8(n)+t*P8(s)+e,i=1/n-t/s,[o,i])}}var gW=EZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AZt=te;function MZt(e){return e===0||AZt(e)?e:e<0?-1:1}var xZt=MZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IZt=xZt,mW=IZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var C8=mW,Ig=ve,LZt=Zf,Kw=Jf;function OZt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v;p=0,s=0,c=t,u=LZt(1,1-i),h=Kw,a=Kw,l=Kw,f=o;do{if(s=p,l=a,a=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(s===0&&(c===r?t=n:t=r,s=e(t),h=t-c),C8(s)*C8(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,Ig(h*2)>Ig(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&Ig(c*u)<Ig(h));return c}var _W=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RZt(e){return e===0?-1:-1+e*(-5+e*5)}var DZt=RZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NZt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var FZt=NZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Zt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var zZt=$Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var VZt=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UZt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var WZt=UZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jZt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var GZt=jZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HZt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var XZt=HZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YZt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var qZt=YZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZZt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var KZt=ZZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JZt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var QZt=JZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tKt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var eKt=tKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rKt(e){return e===0?1:1+e*(-13+e*13)}var nKt=rKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iKt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var oKt=iKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bc=qa,sKt=m0,aKt=ve,lKt=Ge,E8=ke,uKt=or,cKt=v0,fKt=yE,hKt=gW,dKt=_W,pKt=DZt,vKt=FZt,gKt=zZt,mKt=VZt,_Kt=WZt,yKt=GZt,bKt=XZt,wKt=qZt,SKt=KZt,TKt=QZt,kKt=eKt,PKt=nKt,CKt=oKt,oe=[0,0,0,0,0,0],id=[0,0,0,0];function EKt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S;return a=sKt(2*e)/-uKt(t/2),w=cKt(r),b=fKt(r),id[0]=a,g=w*w,y=b*b,v=w*b,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,oe[0]=(2*g-1)/(3*v),oe[1]=-pKt(g)/(36*p),oe[2]=vKt(g)/(1620*d),oe[3]=gKt(g)/(6480*h),oe[4]=mKt(g)/(90720*f),oe[5]=0,id[1]=bc(oe,a),oe[0]=-_Kt(g)/(405*d),oe[1]=yKt(g)/(2592*h),oe[2]=-bKt(g)/(204120*f),oe[3]=-wKt(g)/(2099520*c),oe[4]=0,oe[5]=0,id[2]=bc(oe,a),oe[0]=SKt(g)/(102060*f),oe[1]=-TKt(g)/(20995200*c),oe[2]=kKt(g)/(36741600*u),oe[3]=0,oe[4]=0,oe[5]=0,id[3]=bc(oe,a),l=bc(id,1/t),o=b/w,o*=o,m=-(l*l)/(2*g)+E8(g)+y*E8(y)/g,aKt(l)<.7?(oe[0]=g,oe[1]=v,oe[2]=(1-2*g)/3,oe[3]=PKt(g)/(36*v),oe[4]=CKt(g)/(270*p),oe[5]=0,S=bc(oe,l)):(T=lKt(m),oe[0]=T,oe[1]=o,oe[2]=0,oe[3]=3*o*(3*o+1)/6,oe[4]=4*o*(4*o+1)*(4*o+2)/24,oe[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=bc(oe,T),(S-g)*l<0&&(S=1-S)),l<0?(i=0,n=g):(i=g,n=1),(S<i||S>n)&&(S=(i+n)/2),s=hKt(-m,o),S=dKt(s,S,i,n,32,100),S}var AKt=EKt,O1={exports:{}},sk={exports:{}},zp=1e3,Bp=zp*60,Vp=Bp*60,Up=Vp*24,MKt=Up*365.25,xKt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return IKt(e);if(r==="number"&&isNaN(e)===!1)return t.long?OKt(e):LKt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function IKt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*MKt;case"days":case"day":case"d":return r*Up;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Vp;case"minutes":case"minute":case"mins":case"min":case"m":return r*Bp;case"seconds":case"second":case"secs":case"sec":case"s":return r*zp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function LKt(e){return e>=Up?Math.round(e/Up)+"d":e>=Vp?Math.round(e/Vp)+"h":e>=Bp?Math.round(e/Bp)+"m":e>=zp?Math.round(e/zp)+"s":e+"ms"}function OKt(e){return Lg(e,Up,"day")||Lg(e,Vp,"hour")||Lg(e,Bp,"minute")||Lg(e,zp,"second")||e+" ms"}function Lg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=s,t.enable=o,t.enabled=a,t.humanize=xKt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var m=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,b){if(y==="%%")return y;m++;var w=t.formatters[b];if(typeof w=="function"){var T=p[m];y=w.call(f,T),p.splice(m,1),m--}return y}),t.formatArgs.call(f,p);var g=c.log||t.log||console.log.bind(console);g.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){t.enable("")}function a(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(sk,sk.exports);(function(e,t){t=e.exports=sk.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=s,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function s(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(s());function a(){try{return window.localStorage}catch{}}})(O1,O1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RKt=34028234663852886e22,ly=RKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DKt=O1.exports,A8=cW,NKt=ve,FKt=Ge,M8=ke,$Kt=ly,x8=DKt("gammaincinv:higher_newton");function zKt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,y,b,w,T;T=e,y=1,b=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*M8(T)+T+o,l>M8($Kt))return x8("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=FKt(l)}else w=-s*T;a?(v=A8(T,t,!0,!1),c=-w*(v-n)):(m=A8(T,t,!0,!0),c=w*(m-i)),w=c,n>1e-120||b>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,y=NKt(T/e-1),b+=1,T=e,T<0&&(T=u,b=100)}while(y>2e-14&&b<35);return(y>2e-14||b>99)&&x8("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),g=T||0,g}var BKt=zKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VKt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var UKt=VKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WKt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var jKt=WKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GKt=ve,HKt=Ge,I8=ke,XKt=qa,YKt=UKt,qKt=jKt,ZKt=1e-8,KKt=.08333333333333333,JKt=.008333333333333333,wc=[1,0,0,0,0,0];function QKt(e){var t,r,n,i,o,s,a,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=HKt(-1-u),o=YKt(l)):e<1?(l=e,o=qKt(l)):(l=11+u,s=I8(l),o=l+s,l=1/l,t=s*s,r=t*s,n=r*s,i=n*s,wc[1]=(2-s)*.5,wc[2]=(-9*s+6+2*t)/6,wc[3]=-(3*r+36*s-22*t-12)*KKt,wc[4]=(60+350*t-300*s-125*r+12*n)/60,wc[5]=-(-120-274*n+900*s-1700*t+1125*r+20*i)*JKt,o+=s*l*XKt(wc,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,a=o;do o=a*(u+I8(a))/(a-1),l=GKt(a/o-1),a=o;while(l>ZKt)}return o}var yW=QKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tJt=.9189385332046728,bW=tJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eJt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function rJt(e,t){var r,n,i,o,s;n=0,i=0,r=t+t,s=e;do o=i,i=n,n=r*i-o+eJt[s],s-=1;while(s>=0);return(n-o)/2}var nJt=rJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iJt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var oJt=iJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sJt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var aJt=sJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jw=Qf,Og=ke,Qw=bW,lJt=ay,uJt=ly,cJt=nJt,fJt=oJt,hJt=aJt,dJt=.30865217988013566;function pJt(e){var t;return e<lJt?uJt:e<1?Jw(e+1)-(e+.5)*Og(e)+e-Qw:e<2?Jw(e)-(e-.5)*Og(e)+e-Qw:e<3?Jw(e-1)-(e-.5)*Og(e)+e-Qw+Og(e-1):e<12?(t=18/(e*e)-1,cJt(17,t)/(12*e)):(t=1/(e*e),e<1e3?fJt(t)/(dJt+t)/e:hJt(t)/e)}var vJt=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L8=Ge,gJt=Uo,mJt=ke,_Jt=ly,yJt=oy,bJt=vJt;function wJt(e){return e>=3?L8(bJt(e)):e>0?gJt(e)/(L8(-e+(e-.5)*mJt(e))*yJt):_Jt}var SJt=wJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TJt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var kJt=TJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PJt=ve,CJt=ke,EJt=yW,AJt=kJt;function MJt(e){var t;return PJt(e)<1?AJt(e):(t=EJt(e),CJt(e/(t-1))/e)}var xJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IJt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var LJt=IJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OJt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var RJt=OJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DJt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var NJt=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FJt=ke,$Jt=LJt,zJt=RJt,BJt=NJt;function VJt(e){var t,r;return e<-5?(r=e*e,t=FJt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?$Jt(e):e<2?zJt(e):e<1e3?(r=1/e,BJt(e)/(-12*e)):-1/(12*e)}var UJt=VJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WJt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var jJt=WJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GJt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var HJt=GJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XJt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var YJt=XJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qJt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var ZJt=qJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KJt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var JJt=KJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O8=ke,QJt=jJt,tQt=HJt,eQt=YJt,rQt=ZJt,nQt=JJt;function iQt(e){var t,r;return e<-8?(t=e*e,r=O8(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?QJt(e)/(e*e):e<-2?tQt(e):e<2?eQt(e):e<10?(t=1/e,rQt(t)/(e*e)):e<100?(t=1/e,nQt(t)/(e*e)):-O8(e)/(12*e*e*e)}var oQt=iQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sQt=O1.exports,R8=qa,wi=Qf,aQt=m0,D8=Uo,Rg=or,N8=ve,Sc=Ge,lQt=Za,uQt=sr,Hn=ke,cQt=oy,fQt=ly,hQt=oW,dQt=BKt,F8=yW,$8=SJt,pQt=xJt,vQt=UJt,gQt=oQt,mQt=sQt("gammaincinv:compute"),la=.5,tS=.3333333333333333,_Qt=.25,z8=.2,B8=.16666666666666666,yQt=.08333333333333333,bQt=.041666666666666664,Xn=[0,0,0,0,0];function wQt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G,K,q,rt,At,Nt,Pt,Ct,Zt,Y,ot,J,yt,Et,xt;if(t<la?(s=!0,a=t,yt=-1):(s=!1,a=r,yt=1),Y=0,N8(e-1)<1e-4&&(ot=0,s?t<.001?(q=t*t,V=q*t,K=V*t,S=K*t,T=S*t,k=t+q*la+V*tS+K*_Qt+S*z8+T*B8):k=-Hn(1-t):k=-Hn(r),e===1?(Y=2,At=k):(o=wi(e),Y=1)),r<1e-30&&e<la&&(ot=0,k=-Hn(r*D8(e))+(e-1)*Hn(-Hn(r*D8(e))),Y=1,o=wi(e)),e>1&&e<500&&t<1e-80){for(ot=0,l=1/e,n=1/(e+1),k=(wi(e+1)+Hn(t))*l,k=Sc(k),m=k,Zt=0;Zt<10;Zt++)k=m*Sc(k*l)*uQt(1-k*n,l);Y=1,o=wi(e)}if(u=1/e*(Hn(t)+wi(e+1)),u<Hn(z8*(1+e))&&Y===0&&(J=Sc(u),ot=0,x=e*e,rt=x*e,F=rt*e,g=e+1,d=g*g,h=g*d,f=d*d,y=e+2,c=y*y,b=e+3,Xn[0]=1,Xn[1]=1/g,Xn[2]=la*(3*e+5)/(d*y),Xn[3]=tS*(31+8*x+33*e)/(h*y*b),Xn[4]=bQt*(2888+1179*rt+125*F+3971*x+5661*e)/(f*c*b*(e+4)),k=J*R8(Xn,J),o=wi(e),Y=1),e<10&&Y===0&&(p=Rg(e)/($8(e)*cQt),v=lQt(.02,p),r<v&&(ot=0,Pt=1-e,N=Pt*Pt,z=N*Pt,w=Rg(-2/e*Hn(r/p)),k=e*F8(w),Ct=Hn(k),k>5?(A=Ct*Ct,I=A*Ct,L=I*Ct,J=1/k,Xn[0]=Ct-1,Xn[1]=(3*Pt-2*Pt*Ct+A-2*Ct+2)*la,Xn[2]=(24*Pt*Ct-11*N-24*Pt-6*A+12*Ct-12-9*Pt*A+6*N*Ct+2*I)*B8,Xn[3]=(-12*z*Ct+8.04*Pt*A-114*N*Ct+(72+36*A)+(3*L-72*Ct+162)*(Pt-168*Pt*Ct)-(12*I+25*z)-(22*Pt*I+36*N*A+120*N))*yQt,Xn[4]=0,k=k-Ct+Pt*J*R8(Xn,J)):(J=1/k,A=Ct*Ct,Nt=Ct-1,Et=Ct-Pt*J*Nt,Et<k&&(k-=Et)),o=wi(e),Y=1)),N8(a-la)<1e-5&&Y===0&&(ot=0,l=1/e,k=e-tS+(.019753086419753086+.007211444248481286*l)*l,o=wi(e),Y=1),e<1&&Y===0&&(ot=0,s?k=Sc(1/e*(Hn(a)+wi(e+1))):k=Sc(1/e*(Hn(1-a)+wi(e+1))),o=wi(e),Y=1),Y===0)if(ot=1,l=1/e,J=aQt(2*a),w=yt*J/Rg(e*la),J<fQt)w+=(pQt(w)+(vQt(w)+gQt(w)*l)*l)*l,k=e*F8(w),xt=w,G=-Rg(e/hQt)*Sc(-la*e*xt*xt)/$8(e),i=1/G;else return mQt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(At=dQt(k,e,ot,t,r,o,i,s)),At}var SQt=wQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V8=te,TQt=ay,U8=Fe,W8=SQt;function kQt(e,t,r){return V8(e)||V8(t)?NaN:t<TQt?NaN:e>1||e<0?NaN:r===!0?e===0?U8:e===1?0:W8(t,1-e,e):e===0?0:e===1?U8:W8(t,e,1-e)}var PQt=kQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CQt=PQt,EQt=CQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AQt=5e-324,MQt=AQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var j8=EQt,G8=ke,xQt=or,IQt=MQt,LQt=gW,OQt=_W;function RQt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G,K;return r<n?l=j8(r,t,!0):l=j8(n,t,!1),l/=e,g=t/e,F=xQt(1+g),T=F*F,S=T*F,k=T*T,x=S*T,A=S*S,I=k*S,L=k*k,N=x*k,c=x*x,V=l-g,y=V*V,b=y*V,w=y*y,z=F+1,f=z*z,h=z*f,d=f*f,p=(F+2)*(F-1)/(3*F),p+=(S+9*T+21*F+5)*V/(36*T*z),p-=(k-13*S+69*T+167*F+46)*y/(1620*f*S),p-=(7*x+21*k+70*S+26*T-93*F-31)*b/(6480*h*k),p-=(75*A+202*x+188*k-888*S-1345*T+118*F+138)*w/(272160*d*x),v=(28*k+131*S+402*T+581*F+208)*(F-1)/(1620*z*S),v-=(35*A-154*x-623*k-1636*S-3983*T-3514*F-925)*V/(12960*f*k),v-=(2132*I+7915*A+16821*x+35066*k+87490*S+141183*T+95993*F+21640)*y/(816480*x*h),v-=(11053*L+53308*I+117010*A+163924*x+116188*k-258428*S-677042*T-481940*F-105497)*b/(14696640*d*A),m=-((3592*I+8375*A-1323*x-29198*k-89578*S-154413*T-116063*F-29632)*(F-1))/(816480*x*f),m-=(442043*N+2054169*L+3803094*I+3470754*A+2141568*x-2393568*k-19904934*S-34714674*T-23128299*F-5253353)*V/(146966400*A*h),m-=(116932*c+819281*N+2378172*L+4341330*I+6806004*A+10622748*x+18739500*k+30651894*S+30869976*T+15431867*F+2919016)*y/(146966400*d*I),u=l+p/e+v/(e*e)+m/(e*e*e),u<=0&&(u=IQt),G=u-g*G8(u)+(1+g)*G8(1+g)-g,i=1/(1+g),s=u<g?i:0,a=u<g?1:i,K=(s+a)/2,o=LQt(G,g),OQt(o,K,s,a,32,100)}var DQt=RQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ar=ve,NQt=Zf,eS=mW,FQt=Vu,rS=Jf;function $Qt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T;b=0,a=!1,f=t,c=NQt(1,1-i),p=FQt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=b,u=l,l=p,y=e(f),b=y[0],w=y[1],T=y[2],d-=1,b===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),eS(h)*eS(b)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=b/w:(v=2*b,g=2*w-b*(T/w),ar(g)<1&&ar(v)>=ar(g)*rS?p=b/w:p=v/g,p*w/b<0&&(p=b/w,ar(p)>2*ar(t)&&(p=(p<0?-1:1)*2*ar(t)))),s=ar(p/u),s>.8&&s<2&&(p=p>0?(f-r)/2:(f-n)/2,ar(p)>f&&(p=eS(p)*f),u=p*3),t=f,f-=p,f<r){if(ar(r)<1&&ar(f)>1&&rS/ar(f)<ar(r)?m=1e3:m=f/r,ar(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-r),f=t-p,a=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(ar(n)<1&&ar(f)>1&&rS/ar(f)<ar(n)?m=1e3:m=f/n,ar(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-n),f=t-p,a=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&ar(f*c)<ar(p));return f}var zQt=$Qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BQt=vW.assign,VQt=ve,UQt=Jf,nS=Bu;function WQt(e,t,r,n){return i;function i(o){var s,a,l,u,c;return c=1-o,s=[0,0],BQt(o,e,t,!0,n,s,1,0),u=s[0]-r,a=s[1],n&&(a=-a),c===0&&(c=nS*64),o===0&&(o=nS*64),l=a*(-(c*e)+(t-2)*o+1),VQt(l)<c*o*UQt&&(l/=c*o),n&&(l=-l),a===0&&(a=(n?-1:1)*nS*64),[u,a,l]}}var jQt=WQt,GQt=qa,H8=SE,iS=Yf,X8=$n,HQt=fE,Tc=YU,Y8=or,XQt=ve,q8=Ge,mo=sr,Z8=v0,YQt=Vu,qQt=Za,K8=ke,oS=Bu,J8=mE,Q8=Ds,ZQt=wZt,KQt=PZt,JQt=AKt,QQt=DQt,tte=zQt,ete=jQt,rte=32,nte=1e3,xl=[0,0,0,0,0];function ite(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,y,b,w,T,S,k,x,A,I,L,N,z,V,F,G;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(F=0,a=0,u=1,e===.5){if(t===.5)return F=Z8(r*J8),F*=F,G=Z8(n*J8),G*=G,[F,G];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)x={},F=ZQt(e,r,x),G=x.value;else{if(t===1)return r<n?e>1?(F=mo(r,1/e),G=-iS(K8(r)/e)):(F=mo(r,1/e),G=1-F):(F=q8(X8(-n)/e),G=-iS(X8(-n)/e)),o&&(v=G,G=F,F=v),[F,G];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=qQt(e,t),f=YQt(e,t),Y8(h)>f-h&&h>5?(F=KQt(e,t,r),G=1-F):(N=e+t,l=HQt(Y8(e/N)),s=h/N,s>=.2&&s<=.8&&N>=10?(p=mo(r,1/e),p<.0025&&e+t<200?F=p*mo(e*Tc(e,t),1/e):F=JQt(r,N,l),G=1-F):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=Tc(e,t)),d===0?G=1:(G=mo(t*n*d,1/t),F=1-G)),G>1e-5&&(F=QQt(e,t,r,n),G=1-F));else if(e<1&&t<1){if(k=(1-e)/(2-e-t),b=H8(k,e,t)-r,XQt(b)/r<Q8*3)return o?[1-k,k]:[k,1-k];b<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,k=1-k),S=mo(e*r*Tc(e,t),1/e),F=S/(1+S),G=1/(1+S),F>k&&(F=k),u=k}else e>1&&t>1?(k=(e-1)/(e+t-2),m=(t-1)/(e+t-2),T=H8(k,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=m,m=k,k=v,o=!o),w=K8(r*e*Tc(e,t))/e,F=q8(w),G=F<.9?1-F:-iS(w),t<e&&F<.2&&(g=e-1,y=t-1,A=e*e,I=e*A,L=t*t,xl[0]=0,xl[1]=1,xl[2]=y/g,g*=g,xl[3]=y*(3*e*t+5*t+A-e-4)/(2*(e+2)*g),g*=e+1,xl[4]=y*(33*e*L+31*L+8*A*L-30*e*t-47*t+11*A*t+6*I*t+18+4*e-I+A*A-10*A),xl[4]/=3*(e+3)*(e+2)*g,F=GQt(xl,F)),F>k&&(F=k),u=k):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),mo(r,1/e)<.5?(F=mo(r*e*Tc(e,t),1/e),F===0&&(F=oS),G=1-F):(G=mo(1-mo(r,t*Tc(e,t)),1/t),G===0&&(G=oS),F=1-G))}return F>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=G,G=F,F=v,o=!o,z=1-u,V=1-a,a=z,u=V),a===0&&(o?(a=Q8,F<a&&(F=a)):a=oS,F<a&&(F=a)),i=rte,F<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=ete(e,t,r<n?r:n,r>=n),F=tte(c,F,a,u,i,nte),F===a&&(F=0),o?[1-F,F]:[F,1-F]}var ote=ite;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ste=ote,ate=ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sS=te,tD=ate;function lte(e,t,r,n){return sS(e)||sS(t)||sS(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?tD(t,r,1-e,e)[0]:tD(t,r,e,1-e)[0]}var ute=lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=ute,wW=cte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fte=wW,aS=te;function hte(e,t,r){return aS(e)||aS(t)||aS(r)||t<=0||r<=0||e<0||e>1?NaN:fte(e,t,r)}var dte=hte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pte(e){return t;function t(){return e}}var vte=pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gte=vte,uy=gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mte=uy,_te=wW,lS=te;function yte(e,t){if(lS(e)||lS(t)||e<=0||t<=0)return mte(NaN);return r;function r(n){return lS(n)||n<0||n>1?NaN:_te(n,e,t)}}var bte=yte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wte=Tr,SW=dte,Ste=bte;wte(SW,"factory",Ste);var Tte=SW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kte=Fn;function Pte(e){return kte(e)===e&&e>=0}var Cte=Pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ete=Cte,cy=Ete;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ate=cy,Mte=SE,uS=te,xte=Fn,Ite=Fe;function Lte(e,t,r){return uS(e)||uS(t)||uS(r)||r<0||r>1||!Ate(t)||t===Ite?NaN:e<0?0:e>=t?1:(e=xte(e+1e-7),Mte(r,e+1,t-e,!0,!0))}var Ote=Lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rte=cy,Dte=uy,Nte=SE,cS=te,Fte=Fn,$te=Fe;function zte(e,t){if(cS(e)||cS(t)||t<0||t>1||!Rte(e)||e===$te)return Dte(NaN);return r;function r(n){return cS(n)?NaN:n<0?0:n>=e?1:(n=Fte(n+1e-7),Nte(t,n+1,e-n,!0,!0))}}var Bte=zte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vte=Tr,TW=Ote,Ute=Bte;Vte(TW,"factory",Ute);var Wte=TW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var kW=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],jte=kW.length;function Gte(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<jte;o++)r=n,n=i,i=t*n-r+kW[o];return(i-r)*.5}var Hte=Gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Xte=sr,Yte=Hte,qte=9490626562425156e-8,Zte=3745194030963158e291;function Kte(e){return e<10?NaN:e>=Zte?0:e<qte?Yte(2*Xte(10/e,2)-1)/e:1/(e*12)}var Jte=Kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Qte=Qf,eD=$n,fS=Uo,tee=Vu,eee=Za,Dg=ke,ree=bW,nee=Dr,rD=Fe,od=Jte;function iee(e,t){var r,n,i;return n=eee(e,t),i=tee(e,t),n<0?NaN:n===0?rD:i===rD?nee:n>=10?(r=od(n)+od(i)-od(n+i),-.5*Dg(i)+ree+r+(n-.5)*Dg(n/(n+i))+i*eD(-n/(n+i))):i>=10?(r=od(i)-od(n+i),Qte(n)+r+n-n*Dg(n+i)+(i-.5)*eD(-n/(n+i))):Dg(fS(n)*(fS(i)/fS(n+i)))}var oee=iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var see=oee,aee=see;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nD=Ya,iD=te,lee=aee,uee=ve,oD=ke,sD=Dr;function ak(e,t){return iD(e)||iD(t)?NaN:!nD(e)||!nD(t)?NaN:e<0?ak(-e+t-1,t):t<0?sD:t===0?0:t===1?oD(uee(e)):e<t?sD:e-t<2?ak(e,e-t):-oD(e+1)-lee(e-t+1,t+1)}var cee=ak;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fee=cee,PW=fee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aD=cy,hee=PW,hS=te,dee=$n,pee=Ge,vee=ke,gee=Fe;function mee(e,t,r){var n;return hS(e)||hS(t)||hS(r)||r<0||r>1||!aD(t)||t===gee?NaN:aD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=hee(t,e),n+=e*vee(r)+(t-e)*dee(-r),pee(n)):0}var _ee=mee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lD=te;function yee(e,t){return lD(e)||lD(t)?NaN:e===t?1:0}var bee=yee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wee=uy,uD=te;function See(e){if(uD(e))return wee(NaN);return t;function t(r){return uD(r)?NaN:r===e?1:0}}var Tee=See;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kee=Tr,CW=bee,Pee=Tee;kee(CW,"factory",Pee);var Cee=CW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cD=cy,Eee=uy,Aee=PW,fD=Cee.factory,dS=te,Mee=$n,xee=Ge,Iee=ke,Lee=Fe;function Oee(e,t){if(dS(e)||dS(t)||!cD(e)||e===Lee||t<0||t>1)return Eee(NaN);if(t===0||e===0)return fD(0);if(t===1)return fD(e);return r;function r(n){var i;return dS(n)?NaN:cD(n)?n>e?0:(i=Aee(e,n),i+=n*Iee(t)+(e-n)*Mee(-t),xee(i)):0}}var Ree=Oee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dee=Tr,EW=_ee,Nee=Ree;Dee(EW,"factory",Nee);var Fee=EW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $ee=Ki,lk;function zee(e){return $ee(e)==="[object Array]"}Array.isArray?lk=Array.isArray:lk=zee;var Bee=lk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vee=Bee,AW=Vee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uee=AW;function Wee(e){return typeof e=="object"&&e!==null&&!Uee(e)}var jee=Wee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gee=jee,Hee=Gee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xee=/./,Yee=Xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qee(e){return typeof e=="boolean"}var MW=qee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zee=Boolean.prototype.toString,Kee=Zee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jee=Kee;function Qee(e){try{return Jee.call(e),!0}catch{return!1}}var tre=Qee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ere=Q_,rre=Ki,nre=tre,ire=ere();function ore(e){return typeof e=="object"?e instanceof Boolean?!0:ire?nre(e):rre(e)==="[object Boolean]":!1}var xW=ore;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sre=MW,are=xW;function lre(e){return sre(e)||are(e)}var ure=lre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IW=Tr,kE=ure,cre=MW,fre=xW;IW(kE,"isPrimitive",cre);IW(kE,"isObject",fre);var LW=kE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hre(){return new Function("return this;")()}var dre=hre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pre=typeof self=="object"?self:null,vre=pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gre=typeof window=="object"?window:null,mre=gre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _re=typeof zS=="object"?zS:null,yre=_re;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bre=LW.isPrimitive,wre=dre,hD=vre,dD=mre,pD=yre;function Sre(e){if(arguments.length){if(!bre(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return wre()}if(hD)return hD;if(dD)return dD;if(pD)return pD;throw new Error("unexpected error. Unable to resolve global object.")}var Tre=Sre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kre=Tre,Pre=kre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cre=Pre,vD=Cre(),Ere=vD.document&&vD.document.childNodes,Are=Ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mre=Int8Array,xre=Mre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ire=Yee,Lre=Are,Ore=xre;function Rre(){return typeof Ire=="function"||typeof Ore=="object"||typeof Lre=="function"}var Dre=Rre;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nre(){return/^\s*function\s*([^(]*)/i}var OW=Nre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fre=OW,$re=Fre(),zre=$re;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bre=Tr,RW=OW,Vre=zre;Bre(RW,"REGEXP",Vre);var Ure=RW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wre=AW;function jre(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!Wre(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var Gre=jre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hre=Gre,Xre=Hre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yre(e){return e!==null&&typeof e=="object"}var qre=Yre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zre=Tr,Kre=Xre,PE=qre,Jre=Kre(PE);Zre(PE,"isObjectLikeArray",Jre);var Qre=PE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tne=Qre;function ene(e){return tne(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var rne=ene;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nne=rne,ine=nne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var one=Ki,sne=Ure.REGEXP,ane=ine;function lne(e){var t,r,n;if(r=one(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=sne.exec(n.toString()),t)return t[1]}return ane(e)?"Buffer":r}var une=lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cne=une,DW=cne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fne=DW;function hne(e){var t;return e===null?"null":(t=typeof e,t==="object"?fne(e).toLowerCase():t)}var dne=hne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pne=DW;function vne(e){return pne(e).toLowerCase()}var gne=vne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mne=Dre,_ne=dne,yne=gne,bne=mne()?yne:_ne,wne=bne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sne=wne;function Tne(e){return Sne(e)==="function"}var kne=Tne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pne=kne,NW=Pne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cne=Object.getPrototypeOf,Ene=Cne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ane(e){return e.__proto__}var Mne=Ane;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xne=Ki,Ine=Mne;function Lne(e){var t=Ine(e);return t||t===null?t:xne(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var One=Lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rne=NW,Dne=Ene,Nne=One,uk;Rne(Object.getPrototypeOf)?uk=Dne:uk=Nne;var Fne=uk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $ne=Fne;function zne(e){return e==null?null:(e=Object(e),$ne(e))}var Bne=zne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vne=Bne,Une=Vne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wne=Hee,gD=NW,jne=Une,Pm=ty,Gne=Ki,Hne=Object.prototype;function Xne(e){var t;for(t in e)if(!Pm(e,t))return!1;return!0}function Yne(e){var t;return Wne(e)?(t=jne(e),t?!Pm(e,"constructor")&&Pm(t,"constructor")&&gD(t.constructor)&&Gne(t.constructor)==="[object Function]"&&Pm(t,"isPrototypeOf")&&gD(t.isPrototypeOf)&&(t===Hne||Xne(e)):!0):!1}var qne=Yne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zne=qne,FW=Zne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kne(e){return typeof e=="string"}var $W=Kne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jne=String.prototype.valueOf,Qne=Jne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tie=Qne;function eie(e){try{return tie.call(e),!0}catch{return!1}}var rie=eie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nie=Q_,iie=Ki,oie=rie,sie=nie();function aie(e){return typeof e=="object"?e instanceof String?!0:sie?oie(e):iie(e)==="[object String]":!1}var zW=aie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lie=$W,uie=zW;function cie(e){return lie(e)||uie(e)}var fie=cie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BW=Tr,CE=fie,hie=$W,die=zW;BW(CE,"isPrimitive",hie);BW(CE,"isObject",die);var pie=CE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vie=jf.isPrimitive,gie=te;function mie(e){return vie(e)&&gie(e)}var VW=mie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _ie=jf.isObject,yie=te;function bie(e){return _ie(e)&&yie(e.valueOf())}var UW=bie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wie=VW,Sie=UW;function Tie(e){return wie(e)||Sie(e)}var kie=Tie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WW=Tr,EE=kie,Pie=VW,Cie=UW;WW(EE,"isPrimitive",Pie);WW(EE,"isObject",Cie);var Eie=EE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mD=jf.isPrimitive,Aie=FW,Mie=pie.isPrimitive,_D=Eie,pS=ty;function xie(e,t){return Aie(t)?pS(t,"alpha")&&(e.alpha=t.alpha,!mD(e.alpha)||_D(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):pS(t,"alternative")&&(e.alternative=t.alternative,!Mie(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):pS(t,"p")&&(e.p=t.p,!mD(e.p)||_D(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Iie=xie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lie=ey.isPrimitive;function Oie(e){return Lie(e)&&e>0}var jW=Oie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rie=ey.isObject;function Die(e){return Rie(e)&&e.valueOf()>0}var GW=Die;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nie=jW,Fie=GW;function $ie(e){return Nie(e)||Fie(e)}var zie=$ie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HW=Tr,AE=zie,Bie=jW,Vie=GW;HW(AE,"isPrimitive",Bie);HW(AE,"isObject",Vie);var Uie=AE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wie=9007199254740991,jie=Wie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gie=308,Hie=Gie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xie=-308,Yie=Xie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qie=-324,Zie=qie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yD=te,Ng=qf,bD=sr,Kie=ve,wD=iy,Jie=jie,SD=Hie,Qie=Yie,toe=Zie,eoe=Jie+1,TD=1e308;function roe(e,t){var r,n;return yD(e)||yD(t)||Ng(t)?NaN:Ng(e)||e===0||t<toe||Kie(e)>eoe&&t<=0?e:t>SD?0*e:t<Qie?(r=bD(10,-(t+SD)),n=e*TD*r,Ng(n)?e:wD(n)/TD/r):(r=bD(10,-t),n=e*r,Ng(n)?e:wD(n)/r)}var noe=roe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ioe=noe,ooe=ioe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var soe=Uie,aoe=FW,loe=LW.isPrimitive,kD=ty,Fg=ooe;function uoe(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!aoe(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(kD(e,"digits")){if(!soe(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(kD(e,"decision")){if(!loe(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+Fg(this.pValue,-r)+`
`,n+="    statistic: "+Fg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+Fg(this.ci[0],-r)+","+Fg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var coe=uoe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ns=GLt,foe=cRt,PD=BRt,XW=Tte,hoe=Fn,doe=RU,kc=Wte,vS=Fee,CD=Iie,poe=coe,ED=1+1e-7;function AD(e,t,r){return e===0?0:XW(r,e,t-e+1)}function MD(e,t,r){return e===t?1:XW(1-r,e+1,t-e)}function voe(){var e,t,r,n,i,o,s,a,l,u,c,f,h,d,p;if(t={},foe(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(s=CD(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!PD(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!PD(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(s=CD(t,arguments[2]))}if(s)throw s;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=kc(h,c,f),r=[0,MD(h,c,e)];break;case"greater":n=1-kc(h-1,c,f),r=[AD(h,c,e),1];break;case"two-sided":if(l=vS(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=doe(u);p<=c;p++)vS(p,c,f)<=l*ED&&(d+=1);n=kc(h,c,f)+(1-kc(c-d,c,f))}else{for(d=0,p=0;p<=hoe(u);p++)vS(p,c,f)<=l*ED&&(d+=1);n=kc(d-1,c,f)+(1-kc(h-1,c,f))}r=[AD(h,c,e/2),MD(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return a={},ns(a,"rejected",n<=e),ns(a,"alpha",e),ns(a,"pValue",n),ns(a,"statistic",i),ns(a,"ci",r),ns(a,"nullValue",f),ns(a,"alternative",o),ns(a,"method","Exact binomial test"),ns(a,"print",poe),a}var goe=voe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var moe=goe,ME=moe;const _oe=Gp({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})}),yoe=Array.prototype.concat,YW=Object.prototype.toString;function qW(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const $o=Array.isArray||function(t){return YW.call(t)==="[object Array]"};function Wp(e){return YW.call(e)==="[object Function]"}function Or(e){return typeof e=="number"?e-e===0:!1}function boe(e){return yoe.apply([],e)}const ZW={calcRdx:qW,isArray:$o,isFunction:Wp,isNumber:Or,toVector:boe};let ci=Math.random;function KW(e){if(typeof e!="function")throw new TypeError("fn is not a function");ci=e}function fy(e){return e.length||1}function JW(e){return e[0].length||1}function woe(e){return{rows:fy(e),cols:JW(e)}}function xE(e,t){return $o(t)?t.map(r=>xE(e,r)):e[t]}function QW(e,t){return xE(e,t)}function R1(e,t){if($o(t)){const n=Oe(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Oe(e.length).forEach(function(s){n[s][o]=e[s][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function tj(e,t){return R1(e,t).map(r=>r[0])}function Soe(e){const t=fy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Toe(e){for(var t=fy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Aa(e){var t=[],r,n,i,o,s;for($o(e[0])||(e=[e]),n=e.length,i=e[0].length,s=0;s<i;s++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][s];t.push(r)}return t.length===1?t[0]:t}function un(e,t,r){var n,i,o,s,a;for($o(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),a=0;a<o;a++)s[n][a]=t(e[n][a],n,a);return s.length===1?s[0]:s}function hy(e,t,r){var n,i,o,s,a;for($o(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),o>0&&(s[n][0]=e[n][0]),a=1;a<o;a++)s[n][a]=t(s[n][a-1],e[n][a]);return s.length===1?s[0]:s}function IE(e,t){return un(e,t,!0)}function eh(e,t,r){var n=new Array(e),i,o;for(Wp(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function ej(){return 0}function koe(){return 1}function Poe(e,t){return e===t?1:0}function Wo(e,t){return Or(t)||(t=e),eh(e,t,ej)}function Coe(e,t){return Or(t)||(t=e),eh(e,t,koe)}function Eoe(e,t){return Or(t)||(t=e),eh(e,t,ci)}function wu(e,t){return Or(t)||(t=e),eh(e,t,Poe)}function Aoe(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function Moe(e){return IE(e,ej)}function rj(e,t,r,n){Wp(n)||(n=!1);var i=[],o=qW(e,t),s=(t*o-e*o)/((r-1)*o),a=e,l;for(l=0;a<=t&&l<r;l++,a=(e*o+s*o*l)/o)i.push(n?n(a,l):a);return i}function Oe(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function ss(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return dy(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Or(t.row)){if(Or(t.col))return e[t.row][t.col];var o=QW(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Or(t.col)){var s=tj(e,t.col);return i=t.row||{},r(s,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var a=r(e,i.start,i.end,i.step);return a.map(function(l){return r(l,n.start,n.end,n.step)})}function wd(e,t,r){var n,i;if(Or(t.row)){if(Or(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Oe(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(a,l){e[o][a]=r[l]}),e}if(Or(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Oe(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var s=t.col;return i.forEach(function(a,l){e[a][s]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Oe(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Oe(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(a,l){n.forEach(function(u,c){e[a][u]=r[l][c]})}),e}function xoe(e){var t=Wo(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function dy(e){return e.map(function(t){return Or(t)?t:t.map(function(r){return r})})}const Ioe=Object.freeze(Object.defineProperty({__proto__:null,utils:ZW,get random_fn(){return ci},setRandom:KW,rows:fy,cols:JW,dimensions:woe,row:xE,rowa:QW,col:R1,cola:tj,diag:Soe,antidiag:Toe,transpose:Aa,map:un,cumreduce:hy,alter:IE,create:eh,zeros:Wo,ones:Coe,rand:Eoe,identity:wu,symmetric:Aoe,clear:Moe,seq:rj,arange:Oe,slice:ss,sliceAssign:wd,diagonal:xoe,copy:dy},Symbol.toStringTag,{value:"Module"}));function rh(e,t){return e-t}function xD(e,t,r){return Math.max(t,Math.min(e,r))}function cn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function Loe(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function py(e){for(var t=fr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function Ooe(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function nj(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function LE(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function OE(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Roe(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function fr(e){return cn(e)/e.length}function Doe(e){return py(e)/e.length}function Noe(e){return Math.pow(nj(e),1/e.length)}function ck(e){var t=e.length,r=e.slice().sort(rh);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function Foe(e){return hy(e,function(t,r){return t+r})}function $oe(e){return hy(e,function(t,r){return t*r})}function zoe(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function fk(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(rh),s={},a=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=a,c=a+l-1,f=(u+c)/2;s[i]=f,a+=l}return e.map(function(h){return s[h]})}function Boe(e){var t=e.length,r=e.slice().sort(rh),n=1,i=0,o=0,s=[],a;for(a=0;a<t;a++)r[a]===r[a+1]?n++:(n>i?(s=[r[a]],i=n,o=0):n===i&&(s.push(r[a]),o++),n=1);return o===0?s[0]:s}function Voe(e){return OE(e)-LE(e)}function ij(e,t){return py(e)/(e.length-(t?1:0))}function oj(e){var t=e.reduce(function(n,i){return n+py(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function Uoe(e){for(var t=fr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function Es(e,t){return Math.sqrt(ij(e,t))}function sj(e){return Math.sqrt(oj(e))}function Woe(e){for(var t=fr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return fr(r)}function joe(e){for(var t=ck(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return ck(r)}function Goe(e){return Es(e)/fr(e)}function Hoe(e){var t=e.length,r=e.slice().sort(rh);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Xoe(e,t,r,n){var i=e.slice().sort(rh),o=[t.length],s=e.length,a,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),a=0;a<t.length;a++)l=t[a],u=r+l*(1-r-n),c=s*l+u,f=Math.floor(xD(c,1,s-1)),h=xD(c-f,0,1),o[a]=(1-h)*i[f-1]+h*i[f];return o}function Yoe(e,t,r){var n=e.slice().sort(rh),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),s=i-o;return o+1<n.length?n[o-1]+s*(n[o]-n[o-1]):n[o-1]}function qoe(e,t,r){var n=0,i=e.length,o=!1,s,a;for(r==="strict"&&(o=!0),a=0;a<i;a++)s=e[a],(o&&s<t||!o&&s<=t)&&n++;return n/i}function Zoe(e,t){t=t||4;var r=LE(e),n=(OE(e)-r)/t,i=e.length,o=[],s;for(s=0;s<t;s++)o[s]=0;for(s=0;s<i;s++)o[Math.min(Math.floor((e[s]-r)/n),t-1)]+=1;return o}function aj(e,t){var r=fr(e),n=fr(t),i=e.length,o=new Array(i),s;for(s=0;s<i;s++)o[s]=(e[s]-r)*(t[s]-n);return cn(o)/(i-1)}function lj(e,t){return aj(e,t)/Es(e,1)/Es(t,1)}function Koe(e,t){return e=fk(e),t=fk(t),lj(e,t)}function RE(e,t){for(var r=fr(e),n=Es(e),i=e.length,o=0,s=0;s<i;s++)o+=Math.pow((e[s]-r)/n,t);return o/e.length}function Joe(e){return RE(e,3)}function Qoe(e){return RE(e,4)-3}const tse=Object.freeze(Object.defineProperty({__proto__:null,sum:cn,sumsqrd:Loe,sumsqerr:py,sumrow:Ooe,product:nj,min:LE,max:OE,unique:Roe,mean:fr,meansqerr:Doe,geomean:Noe,median:ck,cumsum:Foe,cumprod:$oe,diff:zoe,rank:fk,mode:Boe,range:Voe,variance:ij,pooledvariance:oj,deviation:Uoe,stdev:Es,pooledstdev:sj,meandev:Woe,meddev:joe,coeffvar:Goe,quartiles:Hoe,quantiles:Xoe,percentile:Yoe,percentileOfScore:qoe,histogram:Zoe,covariance:aj,corrcoeff:lj,spearmancoeff:Koe,stanMoment:RE,skewness:Joe,kurtosis:Qoe},Symbol.toStringTag,{value:"Module"}));function ese(e,t,r){return e<t||e>r?0:1/(r-t)}function rse(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function nse(e,t,r){return t+e*(r-t)}function ise(e,t){return .5*(e+t)}function ose(e,t){return fr(e)}function sse(){throw new Error("mode is not yet implemented")}function uj(e,t){return e/2+t/2+(t/2-e/2)*(2*ci()-1)}function ase(e,t){return Math.pow(t-e,2)/12}const lse=Object.freeze(Object.defineProperty({__proto__:null,pdf:ese,cdf:rse,inv:nse,mean:ise,median:ose,mode:sse,sample:uj,variance:ase},Symbol.toStringTag,{value:"Module"}));function use(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function cse(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function fse(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function hse(e,t){return t<=e?NaN:(e+t)/2}function dse(e,t){return t<=e?NaN:(e+t)/2}function pse(){throw new Error("mode is not yet implemented")}function vse(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*uj(0,1))}function gse(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const mse=Object.freeze(Object.defineProperty({__proto__:null,pdf:use,cdf:cse,inv:fse,mean:hse,median:dse,mode:pse,sample:vse,variance:gse},Symbol.toStringTag,{value:"Module"}));function Ye(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-s}function cj(e){var t,r,n,i,o,s,a,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,a=0,e==1||e==2)return 0;for(e<=7&&(a=Math.floor(7-e),t=e+a),r=1/(t*t),n=2*Math.PI,o=l[9],s=8;s>=0;s--)o*=r,o+=l[s];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(s=1;s<=a;s++)i-=Math.log(t-1),t-=1;return i}function Bi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,s=0,a=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(a<=0)if(f=a%1+36e-17,f)n=(a&1?-1:1)*Math.PI/Math.sin(Math.PI*f),a=1-a;else return 1/0;for(c=a,a<1?u=a++:u=(a-=i=(a|0)-1)-1,l=0;l<8;++l)s=(s+t[l])*u,o=o*u+r[l];if(f=s/o+1,c<a)f/=c;else if(c>a)for(l=0;l<i;++l)f*=a,a++;return n&&(f=n/f),f}function _se(e,t){return nh(e,t)*Bi(e)}function nh(e,t){var r=Ye(e),n=e,i=1/e,o=i,s=t+1-e,a=1/1e-30,l=1/s,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),s+=2,l=h*l+s,a=s+h/a,l=1/l,u*=l*a;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function Cm(e){return e<0?NaN:Ye(e+1)}function iu(e){return e<0?NaN:Bi(e+1)}function DE(e,t){return e>170||t>170?Math.exp(fj(e,t)):iu(e)/iu(t)/iu(e-t)}function fj(e,t){return Cm(e)-Cm(t)-Cm(e-t)}function yse(e,t){return iu(e)/iu(e-t)}function vy(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(NE(e,t)):Bi(e)*Bi(t)/Bi(e+t)}function NE(e,t){return Ye(e)+Ye(t)-Ye(e+t)}function hk(e,t,r){var n=1e-30,i=1,o=t+r,s=t+1,a=t-1,l=1,u=1-o*e/s,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((a+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(s+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function gy(e,t){var r=0,n=t-1,i=1e-8,o=Ye(t),s,a,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),s=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(s=-s),s=Math.max(.001,t*Math.pow(1-1/(9*t)-s/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?s=Math.pow(e/l,1/t):s=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(s<=0)return 0;if(a=nh(t,s)-e,t>1?l=h*Math.exp(-(s-n)+n*(Math.log(s)-f)):l=Math.exp(-s+n*Math.log(s)-o),u=a/l,s-=l=u/(1-.5*Math.min(1,u*((t-1)/s-1))),s<=0&&(s=.5*(s+l)),Math.abs(l)<i*s)break}return s}function my(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,s,a,l,u;for(e<0&&(e=-e,n=!0),s=2/(2+e),a=4*s-2;r>0;r--)l=i,i=a*i-o+t[r],o=l;return u=s*Math.exp(-e*e+.5*(t[0]+a*i)-o),n?u-1:1-u}function hj(e){return 1-my(e)}function FE(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=hj(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function _0(e,t,r){var n=1e-8,i=t-1,o=r-1,s=0,a,l,u,c,f,h,d,p,v,m,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),m=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*m))):(a=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*a)/t,f=Math.exp(r*l)/r,m=c+f,e<c/m?d=Math.pow(t*m*e,1/t):d=1-Math.pow(r*m*(1-e),1/r)),g=-Ye(t)-Ye(r)+Ye(t+r);s<10;s++){if(d===0||d===1)return d;if(h=y0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&s>0)break}return d}function y0(e,t,r){var n=e===0||e===1?0:Math.exp(Ye(t+r)-Ye(t)-Ye(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*hk(e,t,r)/t:1-n*hk(1-e,r,t)/r}function Wu(e,t){var r,n,i,o,s;if(t||(t=e),e)return eh(e,t,function(){return Wu()});do r=ci(),n=1.7156*(ci()-.5),i=r-.449871,o=Math.abs(n)+.386595,s=i*i+o*(.196*o-.25472*i);while(s>.27597&&(s>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function zo(e,t,r){var n=e,i,o,s,a,l,u;if(r||(r=t),e||(e=1),t)return u=Wo(t,r),u.alter(function(){return zo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Wu(),a=1+o*l;while(a<=0);a=a*a*a,s=ci()}while(s>1-.331*Math.pow(l,4)&&Math.log(s)>.5*l*l+i*(1-a+Math.log(a)));if(e==n)return i*a;do s=ci();while(s===0);return Math.pow(s,1/n)*i*a}const bse=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ye,loggam:cj,gammafn:Bi,gammap:_se,lowRegGamma:nh,factorialln:Cm,factorial:iu,combination:DE,combinationln:fj,permutation:yse,betafn:vy,betaln:NE,betacf:hk,gammapinv:gy,erf:my,erfc:hj,erfcinv:FE,ibetainv:_0,ibeta:y0,randn:Wu,randg:zo},Symbol.toStringTag,{value:"Module"}));function wse(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/vy(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-NE(t,r))}function D1(e,t,r){return e>1||e<0?(e>1)*1:y0(e,t,r)}function Sse(e,t,r){return _0(e,t,r)}function Tse(e,t){return e/(e+t)}function kse(e,t){return _0(.5,e,t)}function Pse(e,t){return(e-1)/(e+t-2)}function Cse(e,t){var r=zo(e);return r/(r+zo(t))}function Ese(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Ase=Object.freeze(Object.defineProperty({__proto__:null,pdf:wse,cdf:D1,inv:Sse,mean:Tse,median:kse,mode:Pse,sample:Cse,variance:Ese},Symbol.toStringTag,{value:"Module"}));function ID(e,t,r,n){for(var i=0,o=1,s=1,a=1,l=0,u=0,c;Math.abs((s-u)/s)>n;)u=s,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=s+c*i,o=a+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),s=i+c*s,a=o+c*a,i=i/a,o=o/a,s=s/a,a=1;return s/t}function dj(e,t,r){return r===0||r===1?t*r===e?1:0:DE(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function Mse(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,s=e+1,a=t-e,l=s+a,u=Math.exp(Ye(l)-Ye(a)-Ye(s)+s*Math.log(o)+a*Math.log(1-o));return o<(s+1)/(l+2)?n=u*ID(o,s,a,i):n=1-u*ID(1-o,a,s,i),Math.round((1-n)*(1/i))/(1/i)}const xse=Object.freeze(Object.defineProperty({__proto__:null,pdf:dj,cdf:Mse},Symbol.toStringTag,{value:"Module"}));function Ise(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function Lse(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function Ose(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Rse(e){return e}function Dse(e){return e}function Nse(e,t){return Wu()*Math.sqrt(1/(2*randg(.5)))*t+e}const Fse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ise,cdf:Lse,inv:Ose,median:Rse,mode:Dse,sample:Nse},Symbol.toStringTag,{value:"Module"}));function $se(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/vy(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*dj((t-2)/2,(t+r-2)/2,n))}function N1(e,t,r){return e<0?0:y0(t*e/(t*e+r),t/2,r/2)}function zse(e,t,r){return r/(t*(1/_0(e,t/2,r/2)-1))}function Bse(e,t){return t>2?t/(t-2):void 0}function Vse(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function Use(e,t){var r=zo(e/2)*2,n=zo(t/2)*2;return r/e/(n/t)}function Wse(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const jse=Object.freeze(Object.defineProperty({__proto__:null,pdf:$se,cdf:N1,inv:zse,mean:Bse,mode:Vse,sample:Use,variance:Wse},Symbol.toStringTag,{value:"Module"}));function Gse(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ye(t/2))}function Hse(e,t){return e<0?0:nh(t/2,e/2)}function Xse(e,t){return 2*gy(e,.5*t)}function Yse(e){return e}function qse(e){return e*Math.pow(1-2/(9*e),3)}function Zse(e){return e-2>0?e-2:0}function Kse(e){return zo(e/2)*2}function Jse(e){return 2*e}const Qse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Gse,cdf:Hse,inv:Xse,mean:Yse,median:qse,mode:Zse,sample:Kse,variance:Jse},Symbol.toStringTag,{value:"Module"}));function tae(e,t){return e<0?0:t*Math.exp(-t*e)}function eae(e,t){return e<0?0:1-Math.exp(-t*e)}function rae(e,t){return-Math.log(1-e)/t}function nae(e){return 1/e}function iae(e){return 1/e*Math.log(2)}function oae(){return 0}function sae(e){return-1/e*Math.log(ci())}function aae(e){return Math.pow(e,-2)}const lae=Object.freeze(Object.defineProperty({__proto__:null,pdf:tae,cdf:eae,inv:rae,mean:nae,median:iae,mode:oae,sample:sae,variance:aae},Symbol.toStringTag,{value:"Module"}));function uae(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ye(t)-t*Math.log(r))}function cae(e,t,r){return e<0?0:nh(t,e/r)}function fae(e,t,r){return gy(e,t)*r}function hae(e,t){return e*t}function dae(e,t){if(e>1)return(e-1)*t}function pae(e,t){return zo(e)*t}function vae(e,t){return e*t*t}const gae=Object.freeze(Object.defineProperty({__proto__:null,pdf:uae,cdf:cae,inv:fae,mean:hae,mode:dae,sample:pae,variance:vae},Symbol.toStringTag,{value:"Module"}));function Sd(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?Sd(t-r-n+e,t,t-r,t-n):Sd(n-e,t,t-r,n);if(n*2>t)return Sd(r-e,t,r,t-n);if(r<n)return Sd(e,t,n,r);for(var i=1,o=0,s=0;s<e;s++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function Td(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?Td(t-r-n+e,t,t-r,t-n):1-Td(n-e-1,t,t-r,n);if(n*2>t)return 1-Td(r-e-1,t,r,t-n);if(r<n)return Td(e,t,n,r);for(var i=1,o=1,s=0,a=0;a<e;a++){for(;i>1&&s<n;){var l=1-r/(t-s);o*=l,i*=l,s++}o*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1)),i+=o}for(;s<n;s++)i*=1-r/(t-s);return Math.min(1,Math.max(0,i))}const mae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Sd,cdf:Td},Symbol.toStringTag,{value:"Module"}));function _ae(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ye(t)+t*Math.log(r))}function yae(e,t,r){return e<=0?0:1-nh(t,r/e)}function bae(e,t,r){return r/gy(1-e,t)}function wae(e,t){return e>1?t/(e-1):void 0}function Sae(e,t){return t/(e+1)}function Tae(e,t){return t/zo(e)}function kae(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const Pae=Object.freeze(Object.defineProperty({__proto__:null,pdf:_ae,cdf:yae,inv:bae,mean:wae,mode:Sae,sample:Tae,variance:kae},Symbol.toStringTag,{value:"Module"}));function Cae(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function Eae(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Aae(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function Mae(e,t){return t*Bi(1+1/e)*Bi(t)/Bi(1+1/e+t)}function xae(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Iae(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function Lae(){throw new Error("variance not yet implemented")}const Oae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Cae,cdf:Eae,inv:Aae,mean:Mae,median:xae,mode:Iae,variance:Lae},Symbol.toStringTag,{value:"Module"}));function Rae(e){return e/Math.abs(e)}function Dae(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Nae(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function Fae(e){return e}function $ae(e){return e}function zae(e){return e}function Bae(e,t){return 2*t*t}function Vae(e,t){var r=ci()-.5;return e-t*Rae(r)*Math.log(1-2*Math.abs(r))}const Uae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Dae,cdf:Nae,mean:Fae,median:$ae,mode:zae,variance:Bae,sample:Vae},Symbol.toStringTag,{value:"Module"}));function Wae(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function jae(e,t,r){return e<0?0:.5+.5*my((Math.log(e)-t)/Math.sqrt(2*r*r))}function Gae(e,t,r){return Math.exp(-1.4142135623730951*r*FE(2*e)+t)}function Hae(e,t){return Math.exp(e+t*t/2)}function Xae(e){return Math.exp(e)}function Yae(e,t){return Math.exp(e-t*t)}function qae(e,t){return Math.exp(Wu()*t+e)}function Zae(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const Kae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Wae,cdf:jae,inv:Gae,mean:Hae,median:Xae,mode:Yae,sample:qae,variance:Zae},Symbol.toStringTag,{value:"Module"}));function pj(e,t,r){return e!==e>>>0?!1:e<0?0:DE(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function Jae(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=pj(i,t,r);return n}const Qae=Object.freeze(Object.defineProperty({__proto__:null,pdf:pj,cdf:Jae},Symbol.toStringTag,{value:"Module"}));function vj(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*vy(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function as(e,t){var r=t/2;return y0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function F1(e,t){var r=_0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function tle(e){return e>1?0:void 0}function ele(){return 0}function rle(){return 0}function nle(e){return Wu()*Math.sqrt(e/(2*zo(e/2)))}function ile(e){return e>2?e/(e-2):e>1?1/0:void 0}const ole=Object.freeze(Object.defineProperty({__proto__:null,pdf:vj,cdf:as,inv:F1,mean:tle,median:ele,mode:rle,sample:nle,variance:ile},Symbol.toStringTag,{value:"Module"}));function sle(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function Ai(e,t,r){return .5*(1+my((e-t)/Math.sqrt(2*r*r)))}function dk(e,t,r){return-1.4142135623730951*r*FE(2*e)+t}function ale(e){return e}function lle(e){return e}function ule(e){return e}function cle(e,t){return Wu()*t+e}function fle(e,t){return t*t}const hle=Object.freeze(Object.defineProperty({__proto__:null,pdf:sle,cdf:Ai,inv:dk,mean:ale,median:lle,mode:ule,sample:cle,variance:fle},Symbol.toStringTag,{value:"Module"}));function dle(e,t,r){var n=1e-14;return Math.abs(r)<n?vj(e,t):Math.abs(e)<n?Math.exp(Ye((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ye(t/2)):t/e*(pk(e*Math.sqrt(1+2/t),t+2,r)-pk(e,t,r))}function pk(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return as(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var s=Ai(-r,0,1),a=n+1,l=a,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ye(3/2))*r;c<i||l>n||a>n;)l=a,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),a=f*D1(u,c+.5,t/2)+h*D1(u,c+1,t/2),s+=.5*a,c++;return o?1-s:s}const ple=Object.freeze(Object.defineProperty({__proto__:null,pdf:dle,cdf:pk},Symbol.toStringTag,{value:"Module"}));function vle(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function gle(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function mle(e,t,r){return t/Math.pow(1-e,1/r)}function _le(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function yle(e,t){return e*(t*Math.SQRT2)}function ble(e){return e}function wle(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const Sle=Object.freeze(Object.defineProperty({__proto__:null,pdf:vle,cdf:gle,inv:mle,mean:_le,median:yle,mode:ble,variance:wle},Symbol.toStringTag,{value:"Module"}));function lt(...e){return new lt._init(...e)}lt._init=function(...e){if($o(e[0]))if($o(e[0][0])){Wp(e[1])&&(e[0]=un(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=Wp(e[1])?un(e[0],e[1]):e[0],this.length=1;else if(Or(e[0]))this[0]=rj.apply(null,e),this.length=1;else{if(e[0]instanceof lt)return lt(e[0].toArray());this[0]=[],this.length=1}return this};lt._init.prototype=lt.prototype;lt._init.constructor=lt;lt.setRandom=KW;const Tn=lt.prototype;Tn.length=0;Tn.push=Array.prototype.push;Tn.sort=Array.prototype.sort;Tn.splice=Array.prototype.splice;Tn.slice=Array.prototype.slice;Tn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};Tn.map=function(e,t){return lt(un(this,e,t))};Tn.cumreduce=function(e,t){return lt(hy(this,e,t))};Tn.alter=function(e){return IE(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{Tn[e]=function(t){if(t)return t.call(this,Tn[e].call(this)),this;const r=lt[e](this);return Array.isArray(r)?lt(r):r}});"row col".split(" ").forEach(e=>{Tn[e]=function(t,r){return r?(r.call(this,Tn[e].call(this,t)),this):lt(lt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{Tn[e]=function(...t){return lt(lt[e](...t))}});function gj(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/iu(e)}function Tle(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(gj(n,t));return cn(r)}function kle(e){return e}function Ple(e){return e}function Cle(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=lt._random_fn();while(t>n);return r-1}function Ele(e){var t=e,r,n,i,o,s,a,l,u,c,f;for(o=Math.sqrt(t),s=Math.log(t),l=.931+2.53*o,a=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*a/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(a/(f*f)+l)<=-t+r*s-cj(r+1))return r}}function Ale(e){return e<10?Cle(e):Ele(e)}const Mle=Object.freeze(Object.defineProperty({__proto__:null,pdf:gj,cdf:Tle,mean:kle,variance:Ple,sample:Ale},Symbol.toStringTag,{value:"Module"}));function xle(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Ile(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function Lle(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function Ole(e,t,r){return(e+t+r)/3}function Rle(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Dle(e,t,r){return r}function Nle(e,t,r){var n=ci();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function Fle(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const $le=Object.freeze(Object.defineProperty({__proto__:null,pdf:xle,cdf:Ile,inv:Lle,mean:Ole,median:Rle,mode:Dle,sample:Nle,variance:Fle},Symbol.toStringTag,{value:"Module"}));function LD(e,t,r){var n=12,i=6,o=-30,s=-50,a=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*Ai(p,0,1)-1;v>=Math.exp(s/r)?v=Math.pow(v,r):v=0;var m;e>u?m=c:m=f;for(var g=p,y=(l-p)/m,b=g+y,w=0,T=r-1,S=1;S<=m;S++){for(var k=0,x=.5*(b+g),A=.5*(b-g),I=1;I<=n;I++){var L,N;i<I?(L=n-I+1,N=h[L-1]):(L=I,N=-h[L-1]);var z=A*N,V=x+z,F=V*V;if(F>a)break;var G=2*Ai(V,0,1),K=2*Ai(V,e,1),q=G*.5-K*.5;q>=Math.exp(o/T)&&(q=d[L-1]*Math.exp(-(.5*F))*Math.pow(q,T),k+=q)}k*=2*A*r/Math.sqrt(2*Math.PI),w+=k,g=b,b+=y}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function zle(e,t,r){var n=.322232421088,i=.099348462606,o=-1,s=.588581570495,a=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,m=1.208,g=1.4142,y=120,b=.5-.5*e,w=Math.sqrt(Math.log(1/(b*b))),T=w+((((w*f+u)*w+a)*w+o)*w+n)/((((w*h+c)*w+l)*w+s)*w+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-v/r+m*T/r),T*(S*Math.log(t-1)+g)}function Qd(e,t,r){var n=1,i=t,o=16,s=8,a=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,m=.125,g=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return LD(e,n,i);var b=r*.5,w=b*Math.log(r)-r*Math.log(2)-Ye(b),T=b-1,S=r*.25,k;r<=u?k=d:r<=c?k=p:r<=f?k=v:k=m,w+=Math.log(k);for(var x=0,A=1;A<=50;A++){for(var I=0,L=(2*A-1)*k,N=1;N<=o;N++){var z,V;s<N?(z=N-s-1,V=w+T*Math.log(L+g[z]*k)-(g[z]*k+L)*S):(z=N-1,V=w+T*Math.log(L-g[z]*k)+(g[z]*k-L)*S);var F;if(V>=a){s<N?F=e*Math.sqrt((g[z]*k+L)*.5):F=e*Math.sqrt((-(g[z]*k)+L)*.5);var G=LD(F,n,i),K=G*y[z]*Math.exp(V);I+=K}}if(A*k>=1&&I<=l)break;x+=I}if(I>l)throw new Error("tukey.cdf failed to converge");return x>1&&(x=1),x}function Ble(e,t,r){var n=1,i=t,o=1e-4,s=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var a=zle(e,i,r),l=Qd(a,t,r)-e,u;l>0?u=Math.max(0,a-1):u=a+1;for(var c=Qd(u,t,r)-e,f,h=1;h<s;h++){f=u-c*(u-a)/(c-l),l=c,a=u,f<0&&(f=0,c=-e),c=Qd(f,t,r)-e,u=f;var d=Math.abs(u-a);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const Vle=Object.freeze(Object.defineProperty({__proto__:null,cdf:Qd,inv:Ble},Symbol.toStringTag,{value:"Module"}));function Ule(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function Wle(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function jle(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function mj(e,t){return e*Bi(1+1/t)}function Gle(e,t){return e*Math.pow(Math.log(2),1/t)}function Hle(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Xle(e,t){return e*Math.pow(-Math.log(ci()),1/t)}function Yle(e,t){return e*e*Bi(1+2/t)-Math.pow(mj(e,t),2)}const qle=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ule,cdf:Wle,inv:jle,mean:mj,median:Gle,mode:Hle,sample:Xle,variance:Yle},Symbol.toStringTag,{value:"Module"})),Zle=Object.freeze(Object.defineProperty({__proto__:null,arcsine:mse,beta:Ase,binomial:xse,cauchy:Fse,centralF:jse,chisquare:Qse,exponential:lae,gamma:gae,hypgeom:mae,invgamma:Pae,kumaraswamy:Oae,laplace:Uae,lognormal:Kae,negbin:Qae,noncentralt:ple,normal:hle,pareto:Sle,poisson:Mle,studentt:ole,triangular:$le,tukey:Vle,uniform:lse,weibull:qle},Symbol.toStringTag,{value:"Module"}));function vk(){const e=[...arguments];return Or(e[1])?(e[0]-e[1])/e[2]:(e[0]-fr(e[1]))/Es(e[1],e[2])}function $E(){const e=[...arguments];let t;return $o(e[1])?(t=vk(e[0],e[1],e[3]),e[2]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2):e.length>2?(t=vk(e[0],e[1],e[2]),e[3]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?Ai(-Math.abs(t),0,1):Ai(-Math.abs(t),0,1)*2)}function gk(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-fr(e[1]))/(Es(e[1],!0)/Math.sqrt(e[1].length))}function Kle(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(gk(e[0],e[1],e[2],e[3])),e[4]===1?as(-t,e[3]-1):as(-t,e[3]-1)*2):Or(e[1])?(t=Math.abs(e[0]),e[2]===1?as(-t,e[1]-1):as(-t,e[1]-1)*2):(t=Math.abs(gk(e[0],e[1])),e[2]===1?as(-t,e[1].length-1):as(-t,e[1].length-1)*2)}function Jle(){var e=[...arguments],t,r,n,i,o,s,a,l;if(e.length===1){for(o=new Array(e[0].length),a=0;a<e[0].length;a++)o[a]=e[0][a];e=o}for(r=[],a=0;a<e.length;a++)r=r.concat(e[a]);for(n=fr(r),t=0,a=0;a<e.length;a++)t=t+e[a].length*Math.pow(fr(e[a])-n,2);for(t/=e.length-1,s=0,a=0;a<e.length;a++)for(i=fr(e[a]),l=0;l<e[a].length;l++)s+=Math.pow(e[a][l]-i,2);return s/=r.length-e.length,t/s}function Qle(){var e=[...arguments],t,r,n,i;if(Or(e[0]))return 1-N1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-N1(o,t,r)}function tue(e,t,r){return 1-N1(e,t,r)}function mk(){var e=[...arguments],t,r,n,i,o;return Or(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=fr(e[0]),r=fr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function _j(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=mk(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=mk(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Qd(t,n,r-n)}function eue(e){for(var t=sj(e),r=e.map(l=>fr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var s=o+1;s<e.length;++s){var a=_j(r[o],r[s],e[o].length,e[s].length,t,n,e.length);i.push([[o,s],a])}return i}function rue(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(dk(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(dk(e[1]/2,0,1)*Es(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function nue(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(F1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(F1(e[1]/2,e[2].length-1)*Es(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function iue(e,t){return e<t}function yj(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function oue(e,t,r,n){const i=yj(e,t,r,n);return $E(i,1)}function sue(e,t,r,n){const i=yj(e,t,r,n);return $E(i,2)}const aue=Object.freeze(Object.defineProperty({__proto__:null,zscore:vk,ztest:$E,tscore:gk,ttest:Kle,anovafscore:Jle,anovaftest:Qle,ftest:tue,qscore:mk,qtest:_j,tukeyhsd:eue,normalci:rue,tci:nue,significant:iue,oneSidedDifferenceOfProportions:oue,twoSidedDifferenceOfProportions:sue},Symbol.toStringTag,{value:"Module"}));function Gi(e){return $o(e)||e.constructor.name==="jStat"}function _n(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),un(e,function(r,n,i){return r+t[n][i]})):un(e,function(r){return r+t})}function Su(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),un(e,function(r,n,i){return r-t[n][i]||0})):un(e,function(r){return r-t})}function _k(e,t){return Gi(t)?(Gi(t[0])||(t=[t]),re(e,Bo(t))):un(e,function(r){return r/t})}function re(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,s=Wo(i,r=Gi(t)?t[0].length:o);let a=0;if(Gi(t)){for(;a<r;a++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][a];s[l][a]=n}return i===1&&a===1?s[0][0]:s}return un(e,function(l){return l*t})}function lue(e,t){return re(e.map(r=>[r]),[t])}function $1(e,t){Gi(e[0])||(e=[e]),Gi(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Aa(e):e,n=t[0].length===1&&t.length!==1?Aa(t):t,i=[],o=r.length,s=r[0].length,a,l;for(let u=0;u<o;u++){for(i[u]=[],a=0,l=0;l<s;l++)a+=r[u][l]*n[u][l];i[u]=a}return i.length===1?i[0]:i}function yk(e,t){return un(e,r=>Math.pow(r,t))}function uue(e){return un(e,t=>Math.exp(t))}function cue(e){return un(e,t=>Math.log(t))}function fue(e){return un(e,t=>Math.abs(t))}function wf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Gi(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function hue(e,t){return Math.acos($1(e,t)/(wf(e)*wf(t)))}function zE(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Bo(e){for(var t=e.length,r=e[0].length,n=wu(t,r),i=bj(e,n),o=[],s=0,a;s<t;s++)for(o[s]=[],a=r;a<i[0].length;a++)o[s][a-r]=i[s][a];return o}function due(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,s=i-t+1,a=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[s<0?s+t:s]*=e[l][c],n[a<t?a+t:a]*=e[l][c],s++,a--;s=--i-t+1,a=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function pue(e,t){var r=0,n=0,i=e.length,o=e[0].length,s=1,a=0,l=[],u,c,f,h;for(e=zE(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(s=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-s*e[r][h]}for(r=i-1;r>=0;r--){for(a=0,n=r+1;n<=i-1;n++)a=a+l[n]*e[r][n];l[r]=(e[r][u-1]-a)/e[r][r]}return l}function bj(e,t){var r=zE(e,t),n=r.length,i=r[0].length,o=0,s,a,l;for(a=0;a<n;a++){var u=a;for(l=a+1;l<n;l++)Math.abs(r[l][a])>Math.abs(r[u][a])&&(u=l);var c=r[a];for(r[a]=r[u],r[u]=c,l=a+1;l<n;l++)for(o=r[l][a]/r[a][a],s=a;s<i;s++)r[l][s]-=r[a][s]*o}for(a=n-1;a>=0;a--){for(o=r[a][a],l=0;l<a;l++)for(s=i-1;s>a-1;s--)r[l][s]-=r[a][s]*r[l][a]/o;for(r[a][a]/=o,s=n;s<i;s++)r[a][s]/=o}return r}function vue(e,t){var r=e[0].length,n=Wo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r-1,-1,-1).forEach(function(s){i=Oe(s+1,r).map(function(a){return n[a]*e[s][a]}),n[s]=(t[s]-cn(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function gue(e,t){var r=e[0].length,n=Wo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r).forEach(function(s){i=Oe(s).map(function(a){return e[s][a]*n[a]}),n[s]=(t[s]-cn(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function mue(e){var t=e.length,r=wu(t),n=Wo(e.length,e[0].length),i;return Oe(t).forEach(function(o){n[0][o]=e[0][o]}),Oe(1,t).forEach(function(o){Oe(o).forEach(function(s){i=Oe(s).map(function(a){return r[o][a]*n[a][s]}),r[o][s]=(e[o][s]-cn(i))/n[s][s]}),Oe(o,t).forEach(function(s){i=Oe(o).map(function(a){return r[o][a]*n[a][s]}),n[o][s]=e[i.length][s]-cn(i)})}),[r,n]}function _ue(e){var t=e.length,r=Wo(e.length,e[0].length),n;return Oe(t).forEach(function(i){n=Oe(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-cn(n)),Oe(i+1,t).forEach(function(o){n=Oe(i).map(function(s){return r[i][s]*r[o][s]}),r[o][i]=(e[i][o]-cn(n))/r[i][i]})}),r}function yue(e,t,r,n){for(var i=0,o=0,s=e.length,a=[],l=[],u=[],c,f,h,d;i<s;i++)for(a[i]=[],l[i]=[],u[i]=[],o=0;o<s;o++)i>o?(a[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],a[i][o]=u[i][o]=0):(u[i][o]=e[i][o],a[i][o]=l[i][o]=0);for(h=re(re(Bo(u),_n(a,l)),-1),f=re(Bo(u),t),c=r,d=_n(re(h,r),f),i=2;Math.abs(wf(Su(d,c)))>n;)c=d,d=_n(re(h,c),f),i++;return d}function bue(e,t,r,n){for(var i=0,o=e.length,s=[],a=[],l=[],u,c,f,h,d;i<o;i++)for(s[i]=[],a[i]=[],l[i]=[],u=0;u<o;u++)i>u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):i<u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):(l[i][u]=e[i][u],s[i][u]=a[i][u]=0);for(h=re(re(Bo(_n(l,s)),a),-1),f=re(Bo(_n(l,s)),t),c=r,d=_n(re(h,r),f),i=2;Math.abs(wf(Su(d,c)))>n;)c=d,d=_n(re(h,c),f),i=i+1;return d}function wue(e,t,r,n,i){for(var o=0,s=e.length,a=[],l=[],u=[],c,f,h,d,p;o<s;o++)for(a[o]=[],l[o]=[],u[o]=[],c=0;c<s;c++)o>c?(a[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],a[o][c]=u[o][c]=0):(u[o][c]=e[o][c],a[o][c]=l[o][c]=0);for(d=re(Bo(_n(u,re(a,i))),Su(re(u,1-i),re(l,i))),h=re(re(Bo(_n(u,re(a,i))),t),i),f=r,p=_n(re(d,r),h),o=2;Math.abs(wf(Su(p,f)))>n;)f=p,p=_n(re(d,f),h),o++;return p}function Sue(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],s,a,l,u,c;n<t-1;n++){for(s=0,u=n+1;u<r;u++)s+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,s=c*Math.sqrt(s),a=Math.sqrt((s*s-e[n+1][n]*s)/2),i=Wo(t,1),i[n+1][0]=(e[n+1][n]-s)/(2*a),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*a);o=Su(wu(t,r),re(re(i,Aa(i)),2)),e=re(o,re(e,o))}return e}function wj(e){var t=e.length,r=e[0].length,n=Wo(r,r);e=dy(e);var i,o,s;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(cn(Oe(t).map(function(a){return e[a][o]*e[a][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(s=o+1;s<r;s++)for(n[o][s]=cn(Oe(t).map(function(a){return e[a][o]*e[a][s]})),i=0;i<t;i++)e[i][s]=e[i][s]-e[i][o]*n[o][s]}return[e,n]}function Tue(e){e=dy(e);var t=e.length,r=wu(t);return Oe(t-1,-1,-1).forEach(function(n){wd(r,{row:n},_k(ss(r,{row:n}),e[n][n])),wd(e,{row:n},_k(ss(e,{row:n}),e[n][n])),Oe(n).forEach(function(i){var o=re(e[i][n],-1),s=ss(e,{row:i}),a=re(ss(e,{row:n}),o);wd(e,{row:i},_n(s,a));var l=ss(r,{row:i}),u=re(ss(r,{row:n}),o);wd(r,{row:i},_n(l,u))})}),r}function Sj(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=wj(e),o=e[0].length,s=ss(n,{col:{end:o}}),a=ss(i,{row:{end:o}}),l=Tue(a),u=Aa(s);u[0].length===void 0&&(u=[u]);var c=re(re(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function Tj(e){for(var t=1,r=e.length,n=wu(r,r),i=[],o,s,a,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,s=0;s<r;s++)for(a=0;a<r;a++)s!=a&&c<Math.abs(e[s][a])&&(c=Math.abs(e[s][a]),l=s,u=a);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=wu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=re(n,h),o=re(re(Bo(h),e),h),e=o,t=0,s=1;s<r;s++)for(a=1;a<r;a++)s!=a&&Math.abs(e[s][a])>.001&&(t=1)}for(s=0;s<r;s++)i.push(e[s][s]);return[n,i]}function kue(e,t,r,n,i,o){var s,a,l,u,c;if(o===2)for(;n<=r;)s=t*e(n,i),a=t*e(n+t,i+s),l=i+(s+a)/2,i=l,n=n+t;if(o===4)for(;n<=r;)s=t*e(n,i),a=t*e(n+t/2,i+s/2),u=t*e(n+t/2,i+a/2),c=t*e(n+t,i+u),l=i+(s+2*a+2*u+c)/6,i=l,n=n+t;return i}function Pue(e,t,r,n){for(var i=0,o=(r-t)/2,s=[],a=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)s[h]=f;for(u=s.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(s[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)a[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=a.length,l=a,a=[],u++}return l}function Cue(e,t,r,n){function i(p,v){for(var m=0,g=p.length,y;m<g;m++)p[m]===v&&(y=m);return y}for(var o=Math.abs(r-e[i(e,r)+1]),s=0,a=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),a[s]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,s++;for(h=a.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*a[d+1]-a[d])/(Math.pow(4,f)-1);h=l.length,a=l,l=[],f++}return a}function Eue(e,t,r,n){for(var i=(r-t)/n,o=e(t),s=[],a=t,l=0,u=1,c;a<=r;a=a+i,l++)s[l]=a;for(c=s.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(s[u]);return i/3*(o+e(r))}function Aue(e,t,r,n){for(var i=e.length,o=0,s=0,a=[],l=[],u=[],c=[],f;s<i;s++){for(a[s]=1,f=0;f<i;f++)s!=f&&(a[s]*=(n-e[f])/(e[s]-e[f]));for(l[s]=0,f=0;f<i;f++)s!=f&&(l[s]+=1/(e[s]-e[f]));u[s]=(1-2*(n-e[s])*l[s])*(a[s]*a[s]),c[s]=(n-e[s])*(a[s]*a[s]),o+=u[s]*t[s]+c[s]*r[s]}return o}function Mue(e,t,r){for(var n=0,i=0,o,s,a=e.length;i<a;i++){for(s=t[i],o=0;o<a;o++)i!=o&&(s*=(r-e[o])/(e[i]-e[o]));n+=s}return n}function xue(e,t,r){for(var n=e.length,i=0,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)s[i]=[],a[i]=[],s[i][i-1]=c[i-1],s[i][i]=2*(c[i-1]+c[i]),s[i][i+1]=c[i],a[i][0]=l[i];for(u=re(Bo(s),a),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+yk(r-e[o],2)*u[o]+(r-e[o])*yk(r-e[o],2)*h[o]}function Iue(){throw new Error("gauss_quadrature not yet implemented")}function Lue(e){var t=e.length,r=e[0].length,n=0,i,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)s[n]=cn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-s[i];for(h=Aa(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=$1([h[n]],[h[i]])/(r-1);for(l=Tj(d),p=l[0],a=l[1],v=Aa(p),n=0;n<a.length;n++)for(i=n;i<a.length;i++)a[n]<a[i]&&(o=a[n],a[n]=a[i],a[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Aa(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=$1([v[n]],[f[i]]);return[e,a,v,c]}const Oue=Object.freeze(Object.defineProperty({__proto__:null,add:_n,subtract:Su,divide:_k,multiply:re,outer:lue,dot:$1,pow:yk,exp:uue,log:cue,abs:fue,norm:wf,angle:hue,aug:zE,inv:Bo,det:due,gauss_elimination:pue,gauss_jordan:bj,triaUpSolve:vue,triaLowSolve:gue,lu:mue,cholesky:_ue,gauss_jacobi:yue,gauss_seidel:bue,SOR:wue,householder:Sue,QR:wj,lstsq:Sj,jacobi:Tj,rungekutta:kue,romberg:Pue,richardson:Cue,simpson:Eue,hermite:Aue,lagrange:Mue,cubic_spline:xue,gauss_quadrature:Iue,PCA:Lue},Symbol.toStringTag,{value:"Module"}));function Rue(e){var t=e[0].length,r=Oe(t).map(function(n){var i=Oe(t).filter(function(o){return o!==n});return kj(R1(e,n).map(function(o){return o[0]}),R1(e,i))});return r}function kj(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=Sj(t,e),s=re(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),a=Su(e,s),l=fr(e),u=cn(s.map(function(d){return Math.pow(d-l,2)})),c=cn(e.map(function(d,p){return Math.pow(d-s[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:s,resid:a,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Due(e){var t=Rue(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=as(l,e.df_resid);return(u>.5?1-u:u)*2}),s=F1(.975,e.df_resid),a=e.coef.map(function(l,u){var c=s*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:a}}function Nue(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,s){return D1(i/(s/o+i),o/2,s/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function Fue(e,t){var r=kj(e,t),n=Due(r),i=Nue(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const $ue={ols:Fue},zue=Object.freeze(Object.defineProperty({__proto__:null,models:$ue},Symbol.toStringTag,{value:"Module"}));Object.assign(lt,Ioe,tse,aue,Oue,zue,bse);for(const[e,t]of Object.entries(Zle)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),lt[e]=r,lt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?lt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?lt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){lt.prototype[e]=function(){return lt(lt.map(this,function(t){return lt[e](t)}))}});lt.prototype.randn=function(){return lt(lt.randn.apply(null,arguments))};const BE=ZW.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(n,i){var o=[],s=0,a=this;if(BE(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,lt.prototype[r].call(a,n))}),this;if(this.length>1){for(a=n===!0?this:this.transpose();s<a.length;s++)o[s]=lt[r](a[s]);return o}return lt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(n,i){var o=[],s=0,a=this;if(BE(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,lt.prototype[r].call(a,n))}),this;if(this.length>1){for(r!=="sumrow"&&(a=n===!0?this:this.transpose());s<a.length;s++)o[s]=lt[r](a[s]);return n===!0?lt[r](lt.utils.toVector(o)):o}return lt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){lt.prototype[r]=function(){var n=[],i=0,o=this,s=Array.prototype.slice.call(arguments),a;if(BE(s[s.length-1])){a=s[s.length-1];var l=s.slice(0,s.length-1);return setTimeout(function(){a.call(o,lt.prototype[r].apply(o,l))}),this}else{a=void 0;var u=function(f){return lt[r].apply(o,[f].concat(s))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));lt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};lt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?lt.normal.cdf(-i,0,1):lt.normal.cdf(-i,0,1)*2};lt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};lt.prototype.ttest=function(t,r){return r===1?1-lt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):lt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};lt.prototype.anovafscore=function(){return lt.anovafscore(this.toArray())};lt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return lt.ftest(this.anovafscore(),this.length-1,t-this.length)};lt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};lt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{lt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,lt.prototype[e].call(n,t)),this):typeof lt[e](this,t)=="number"?lt[e](this,t):lt(lt[e](this,t))}});lt.jStat=lt;function Bue(e,t,r,n){let i=[];for(let s=0;s<=r;s++){const a=.5+s+0,u=lt.lognormal.pdf(a,e,n)*t;u<.01||i.push([s,u])}return i}function Vue(e,t,r,n){let i=[];for(let s=0;s<=r;s++){const a=.5+s+0,u=lt.gamma.pdf(a,e,n)*t;u<.01||i.push([s,u])}return i}function Uue(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.uniform.pdf(s,e-n/2,e+n/2)*t;l<.01||i.push([o,l])}return i}function Wue(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.triangular.pdf(s,e-n,e+n,e)*t;l<.01||i.push([o,l])}return i}function jue(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=lt.normal.pdf(s,e,n)*t;l<.01||i.push([o,l])}return i}function _y(e,t,r,n){if(n)return Gue(e,t,r);const i=t;let o=[];for(let s=0;s<=r;s++){const a=lt.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*i;l<.01||o.push([s,l])}return o}function Gue(e,t,r){const n=t;let i=[],o=0;for(let s=0;s<=r;s++){const a=lt.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*n;if(l<.01)continue;const u=Math.floor(s*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function Hue(e,t,r,n,i,o){let s=[],a=0;for(let p=0;p<=i;p++){const v=lt.binomial.pdf(p,i,e/i);if(v<0){s=null;break}const m=v*t;if(m<.01)continue;const g=Math.floor(p*1.684);if(a)for(let y=a;y<g;y++)s.push([y,0]);s.push([g,m]),a=g+1}const l=n/t,u={};for(let p=0;p<=i;p++){const v=lt.binomial.pdf(p,i,r/i);if(v<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(v*n<.01)continue;const g=o?Math.floor(p*1.684):p;s.forEach(y=>{const[b,w]=y,T=b+g,S=w*v*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,v]of Object.entries(u)){if(v<.01)continue;const m=parseInt(p);m<c&&(c=m),m>f&&(f=m)}const h=[];for(let p=c;p<=f;p++)if(p in u){const v=u[p];h.push([p,v])}else h.push([p,0]);return{bellU:s,bellL:h}}function Pj(e,t){let r={};if(e)for(let[o,s]of e)r[o]=s;for(let[o,s]of t)o in r?r[o]+=s:r[o]=s;let n=Object.entries(r).sort((o,s)=>o[0]-s[0]),i=[];for(let[o,s]of n)i.push([o,s]);return i}function yy(e,t,r,n,i){if(n)throw Error("not implemented");return Xue(e,t,r,i)}function Xue(e,t,r,n){let i,o,s;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:s};i=0;for(const[p,[v,m]]of Object.entries(e)){const g=parseInt(v);if(n&&g==0)continue;const y=g in t?t[g]:0,b=m-y;i+=b*b}const a=3,l=r+2,u=Object.keys(e).sort((p,v)=>e[v][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const v=e[p][0];if(n&&v=="0")return;const m=e[p][1],g=v in t?t[v]:0;(m>=a||g>=a||f<l)&&(c[v]={y_model:m,y_observed:g},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:s};let d=0;o=0;for(const[p,{y_model:v,y_observed:m}]of Object.entries(c)){const g=v-m;o+=g*g/v,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:s}):(isFinite(o)?s=1-lt.chisquare.cdf(o,d-1-r):s=0,{mse:i,chisq:o,pval:s,variables:r})}function Cj(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}wr([Va,Rf,xu,Iu,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);const Yue={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Ga},methods:{formatFixed:st,isGoodVal:ei,formatKMG:t_,makeBinomialArray:_y,loss:yy,applyGiantBonus:Cj,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],s=i/n;o<=n&&0<s&&s<1?(r.loss.binomtest=ME(o,Math.round(n),{p:s}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,s,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,s),r.loss.binomtest=NaN)}return r},tuneModelA(e,t,r){let n=[t];t===void 0&&(n=[1,10,20,40,110,120,140,150],n=n.filter(o=>o>=e&&o<=this.stats.max*5),r&&n.push(r));let i={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return n.forEach(o=>{const s=this.makeModelA(e,o);if(!s)return;ei(s.loss.mse)&&(!ei(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>60?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>50?(e.lo/=1.684,e.init/=1.684,e.hi/=1.64):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of r)if(Math.floor(this.sweepRange.range/s)<20){t=s;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let s=n;s<=this.sweepRange.hi;s+=t){let a=this.tuneModelA(s,void 0);s>this.sweepRange.init&&s<this.sweepRange.init+t&&o.push([this.sweepRange.init,a.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([s,a.n,a.loss.mse,a.loss.chisq,a.loss.pval]),a.loss.mse<i.loss.mse&&(i=a)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${st(r[0],2)}<br/>n=${st(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>st(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Nr=e=>(Ue("data-v-cd6f3e00"),e=e(),We(),e),que=Nr(()=>_("span",{class:"title"},"Model A",-1)),Zue=Nr(()=>_("span",null,[R(": all points were taken from a single distribution with "),_("i",null,"np = M")],-1)),Kue=R(" with giant bonus"),Jue={key:0},Que={style:{float:"left"}},tce=R(" Sweeping through "),ece=Nr(()=>_("i",null,"np",-1)),rce={key:0,id:"chartSweep"},nce={key:1},ice={style:{padding:"1em"}},oce=Nr(()=>_("th",null,null,-1)),sce=Nr(()=>_("th",null,"np",-1)),ace=Nr(()=>_("th",null,"n",-1)),lce=Nr(()=>_("th",null,"MSE",-1)),uce=Nr(()=>_("th",null,"p-val",-1)),cce=Nr(()=>_("td",null,"Best fit:",-1)),fce=Nr(()=>_("td",null,"Manual:",-1)),hce=R(" np: "),dce=["value","min","max","step"],pce=R(" n: "),vce=["value","min"],gce=Nr(()=>_("br",null,null,-1)),mce={id:"chartHisto",style:{float:"left"}},_ce=Nr(()=>_("div",{style:{clear:"both"}},null,-1)),yce=Nr(()=>_("br",null,null,-1)),bce=Nr(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),wce={key:0,class:"fsxs"},Sce=R("p-val: "),Tce=Nr(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),kce=[Sce,Tce],Pce=Nr(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Cce=Nr(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Ece(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[que,Zue,_("p",null,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>r.isGiant=a)},null,512),[[Ve,r.isGiant]]),Kue]),r.isGiant?(E(),M("p",Jue,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):Z("",!0),_("div",null,[_("div",Que,[tce,ece,R(" values in "+C(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+C(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(E(),M("div",rce,[ht(s,{option:o.makeChartASweep},null,8,["option"])])):(E(),M("div",nce," [failed] ")),_("div",ice,[_("table",null,[_("tr",null,[oce,sce,ace,lce,Z("",!0),uce]),o.modelASweep.result?(E(),M("tr",{key:0,class:_r({strike:r.stats.aBad})},[cce,_("td",null,C(o.formatFixed(o.modelASweep.result.np,4)),1),_("td",null,C(o.formatFixed(o.modelASweep.result.n)),1),_("td",null,C(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):Z("",!0),_("tr",null,[fce,_("td",null,C(o.formatFixed(e.selected_np,4)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelA.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelA.loss.pval,4)),1)])]),hce,_("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedNP(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,dce),pce,_("input",{type:"range",onInput:t[2]||(t[2]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,vce),gce])]),_("div",mce,[o.modelA.bell?(E(),yr(s,{key:0,option:o.makeChartHist},null,8,["option"])):(E(),M(W,{key:1},[R(" [failed to build the requested distribution np="+C(o.modelA.np)+" n="+C(o.modelA.n)+" ] ",1)],64))]),_ce,yce,bce,e.isBinary?(E(),M("p",wce,kce)):(E(),M(W,{key:1},[Pce,Cce],64))])],64)}const Ace=Gt(Yue,[["render",Ece],["__scopeId","data-v-cd6f3e00"]]);wr([Va,Rf,xu,Iu,Hut,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);const Mce={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:Ga},methods:{isGoodVal:ei,formatFixed:st,formatKMG:t_,makeBinomialArray:_y,loss:yy,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],s=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>s){const l={...i};l[0]=s,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=ME(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;ei(o.loss.mse)&&(!ei(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),s=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,s,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of n)if(Math.floor(t/a)<40){r=a;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const s=[];for(let a=i;a<=this.sweep_hi;a+=r){const l=this.tuneModelB(a,void 0);if(!l)continue;s.push([a,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),ei(l.loss.mse)&&(!ei(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",a,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:s}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${st(r[0],2)}<br/>n=${st(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>st(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>st(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>st(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),s=r.size([1,0])[0]*.1,a=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-s,y1:i[1],x2:i[0]+s,y2:i[1]},style:a},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:a},{type:"line",transition:["shape"],shape:{x1:o[0]-s,y1:o[1],x2:o[0]+s,y2:o[1]},style:a}]}},tooltip:{show:!1},z:100}]}}}},kr=e=>(Ue("data-v-7790bb48"),e=e(),We(),e),xce=kr(()=>_("span",{class:"title"},"Model B",-1)),Ice=kr(()=>_("span",null,[R(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),_("i",null,"np"),R(", that \u03BB"),_("i",null,"np"),R(" = M")],-1)),Lce=R("Sweeping through "),Oce=kr(()=>_("i",null,"np",-1)),Rce={style:{float:"left"}},Dce={key:0,id:"chartSweep"},Nce={style:{padding:"1em"}},Fce={style:{float:"left"}},$ce=kr(()=>_("th",null,null,-1)),zce=kr(()=>_("th",null,"np",-1)),Bce=kr(()=>_("th",null,"n",-1)),Vce=kr(()=>_("th",null,"MSE",-1)),Uce=kr(()=>_("th",null,"p-val",-1)),Wce={key:0},jce=kr(()=>_("td",null,"Best fit:",-1)),Gce=kr(()=>_("td",null,"Manual:",-1)),Hce=R(" np\u1D38: "),Xce=["value","min","max","step"],Yce=R(" n\u1D38: "),qce=["value"],Zce=kr(()=>_("div",{style:{clear:"both"}},null,-1)),Kce={key:0,style:{float:"left"}},Jce={id:"chartHisto"},Qce=kr(()=>_("br",null,null,-1)),tfe={key:0},efe=R(" Corresponding range for "),rfe=kr(()=>_("i",null,"np",-1)),nfe={key:1},ife=kr(()=>_("div",{style:{clear:"both"}},null,-1)),ofe=kr(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),sfe={key:0,class:"fsxs"},afe=R("p-val: "),lfe=kr(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),ufe=[afe,lfe],cfe=kr(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),ffe=kr(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function hfe(e,t,r,n,i,o){const s=Ot("v-chart");return E(),M(W,null,[xce,Ice,o.modelB?(E(),M(W,{key:0},[_("p",null,[Lce,Oce,R(" values in "+C(o.formatFixed(this.sweep_lo,2))+"\u2026"+C(o.formatFixed(this.sweep_hi,2))+" range:",1)]),_("div",null,[_("div",Rce,[o.modelBSweep?(E(),M("div",Dce,[ht(s,{option:o.makeChartBSweep},null,8,["option"])])):Z("",!0),_("div",Nce,[_("div",Fce,[_("table",null,[_("tr",null,[$ce,zce,Bce,Vce,Z("",!0),Uce]),o.modelBSweep.result?(E(),M("tr",Wce,[jce,_("td",null,C(o.formatFixed(o.modelBSweep.result.np,3)),1),_("td",null,C(o.modelBSweep.result.n),1),_("td",null,C(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):Z("",!0),_("tr",null,[Gce,_("td",null,C(o.formatFixed(e.selected_np,3)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelB.loss.mse,2)),1),Z("",!0),_("td",null,C(o.formatFixed(o.modelB.loss.pval,4)),1)])]),_("p",null,[Hce,_("input",{type:"range",onInput:t[0]||(t[0]=a=>o.applySelectedNp(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,Xce),Yce,_("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,qce)])]),Zce])]),o.modelB.bell?(E(),M("div",Kce,[_("div",Jce,[ht(s,{option:o.makeChartBHist},null,8,["option"])]),_("div",null,[R(" Bin 0 has 1-\u03BB \u2248 "+C(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+C(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Qce,R(" Depending on actual \u03BB could potentially be "+C(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+C(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(E(),M("p",tfe,[efe,rfe,R(": "+C(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+C(o.formatFixed(o.npRangeForBinary.max,3)),1)])):Z("",!0)])])):(E(),M("div",nfe," bad parameters ")),ife]),_("div",null,[ofe,o.npRangeForBinary?(E(),M("p",sfe,ufe)):(E(),M(W,{key:1},[cfe,ffe],64))])],64)):Z("",!0)],64)}const dfe=Gt(Mce,[["render",hfe],["__scopeId","data-v-7790bb48"]]);wr([Va,Rf,xu,Iu,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);class pfe{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const vfe={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Ga},methods:{isGoodVal:ei,formatFixed:st,formatKMG:t_,makeBinomialArray:_y,makeBinomialArraysForGiant:Hue,sumDistributions:Pj,loss:yy,applyGiantBonus:Cj,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let s={il:0,iu:0,model:i};for(let a=-30;a<=30;a++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+a*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<s.model.loss.mse&&(s={il:a,iu:l,model:d})}return s},findPsRound(e,t,r,n,i,o){for(;t<=150;){let s=this.findPsStep(e,r,n,o,i);if(s.il==0&&s.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:s.model};if(r+=s.iu*o,n+=s.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:s.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const s={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);s.bellU=l.bellU,s.bellL=l.bellL,s.bell=this.sumDistributions(s.bellL,s.bellU)}else s.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),s.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),s.bell=this.sumDistributions(s.bellL,s.bellU);s.loss=this.loss(s.bell,this.histogram.map,3),ei(s.loss.mse)&&(!ei(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let s=new pfe;s.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(s,e,n,i,o,r);const a=s.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:s,psGridDots:a}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,s=(n+i)/2;let a=.2;this.stats.mean<2&&(a=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+a,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+a;if(l/u>e){const g=l,y=l/e;t=o-g/2,r=o+g/2,n=s-y/2,i=s+y/2}else{const g=u*e,y=u;t=o-g/2,r=o+g/2,n=s-y/2,i=s+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(g){const y=g.data;return`np\u1D41=${st(y[0],2)}<br/>np\u1D38=${st(y[1],2)}<br/>n=${st(y[2],2)}<br/>MSE=${y[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${st(y[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:g=>`${g[1]} \u2192 ${st(g[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},kn=e=>(Ue("data-v-ada12390"),e=e(),We(),e),gfe=kn(()=>_("span",{class:"title"},"Model C",-1)),mfe=R(": some points were taken from a distribution L, and the rest from distribution U,"),_fe=kn(()=>_("br",null,null,-1)),yfe=kn(()=>_("br",null,null,-1)),bfe=R(" with giant bonus on Unlucky"),wfe=R(" with giant bonus on Lucky"),Sfe={style:{float:"left"}},Tfe={style:{width:"570px",height:"270px"}},kfe={key:1,class:"inner"},Pfe={style:{padding:"1em"}},Cfe={style:{float:"left"}},Efe=kn(()=>_("tr",null,[_("th"),_("th",null,"np\u1D41"),_("th",null,"np\u1D38"),_("th",null,"n"),_("th",null,"MSE"),_("th",null,"p-val")],-1)),Afe=kn(()=>_("td",null,"Best fit:",-1)),Mfe=kn(()=>_("td",null,"Manual:",-1)),xfe=["value","min","max","step"],Ife=R(" np\u1D41 "),Lfe=kn(()=>_("br",null,null,-1)),Ofe=["value","max","step"],Rfe=R(" np\u1D38 "),Dfe=kn(()=>_("br",null,null,-1)),Nfe=["value"],Ffe=R(" n "),$fe=kn(()=>_("div",{style:{clear:"both"}},null,-1)),zfe={key:0,id:"chartHisto",style:{float:"left"}},Bfe=kn(()=>_("div",{style:{clear:"both"}},null,-1)),Vfe=kn(()=>_("br",null,null,-1)),Ufe=kn(()=>_("p",{class:"fsxs"},[R("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),Wfe=kn(()=>_("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),jfe=kn(()=>_("p",{class:"fsxs"},[R("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Gfe(e,t,r,n,i,o){var a,l;const s=Ot("v-chart");return E(),M(W,null,[gfe,_("span",null,[mfe,_fe,R(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+C(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+C(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+C(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+C(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),yfe,_("p",null,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>r.isGiant=u)},null,512),[[Ve,r.isGiant]]),bfe]),_("p",null,[et(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=u=>e.isGiant_lucky=u)},null,512),[[Ve,e.isGiant_lucky]]),wfe]),_("div",Sfe,[_("div",Tfe,[((l=(a=o.modelCSweep)==null?void 0:a.result)==null?void 0:l.npU)&&e.bestPval?(E(),yr(s,{key:0,option:o.makeChartCGrid},null,8,["option"])):(E(),M("div",kfe," np\u1D41=0 or no bestPval "))]),_("div",Pfe,[_("div",Cfe,[_("table",null,[Efe,o.modelCSweep.result?(E(),M("tr",{key:0,class:_r({strike:r.stats.dBad})},[Afe,_("td",null,C(o.formatFixed(o.modelCSweep.result.npU,2)),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.npL,2)),1),_("td",null,C(o.modelCSweep.result.n),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),_("td",null,C(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):Z("",!0),_("tr",null,[Mfe,_("td",null,C(o.formatFixed(e.selected_npU,2)),1),_("td",null,C(o.formatFixed(e.selected_npL,2)),1),_("td",null,C(e.selected_n),1),_("td",null,C(o.formatFixed(o.modelC.loss.mse,2)),1),_("td",null,C(o.formatFixed(o.modelC.loss.pval,4)),1)])]),_("p",null,[_("input",{type:"range",onInput:t[2]||(t[2]=u=>o.applySelectedNpU(Number(u.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,xfe),Ife,Lfe,_("input",{type:"range",onInput:t[3]||(t[3]=u=>o.applySelectedNpL(Number(u.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,Ofe),Rfe,Dfe,_("input",{type:"range",onInput:t[4]||(t[4]=u=>o.applySelectedN(Number(u.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Nfe),Ffe])]),$fe])]),o.modelC.bell?(E(),M("div",zfe,[ht(s,{option:o.makeChartCHist},null,8,["option"])])):Z("",!0),Bfe,Vfe,Ufe,Wfe,jfe],64)}const Hfe=Gt(vfe,[["render",Gfe],["__scopeId","data-v-ada12390"]]);wr([Va,Rf,xu,Iu,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);const Xfe={setup(){const e=mt(),t=_oe(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{ItemIcon:fi,VChart:Ga,DRMA:Ace,DRMB:dfe,DRMC:Hfe},provide(){return{[Wz]:Ze(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const s=lt.binomial.cdf(o,n,1-t/100);i.push(s)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,s)=>o-s),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,m]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,m]of Object.entries(n))for(let g of m.weights)g>this.stats.generalConfidence/100,g>1-this.stats.generalConfidence/100;let i=[],o=[],s=0,a=100,l=0;for(const[v,m]of Object.entries(n)){a=Math.min(a,v),l=Math.max(l,v);let{len:g,luckyLen:y,sorted:b,weights:w}=m;s+=y,i.push(...b),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:a,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:lt.min(i),max:lt.max(i),range:lt.range(i),sum:lt.sum(i),mean:lt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:lt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:s,share:s/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-s,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,m]of Object.entries(n)){let{len:g,luckyLen:y,luckeyLen95:b,sorted:w,weights:T}=m;for(let S=0;S<g;S++){const k=w[S],x=T[S];f+=k*(1-x),h+=k*x}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,m]of Object.entries(n)){let{len:g,sorted:y,weights:b}=m;for(let w=0;w<g;w++){const T=b[w],S=y[w]-c.unlucky.mean;d+=S*S*(1-T);const k=y[w]-c.lucky.mean;p+=k*k*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=lt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:st,binomialTest:ME,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed_202505_202508.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ji=e=>(Ue("data-v-cab9f55a"),e=e(),We(),e),Yfe={id:"menu"},qfe={style:{display:"none"}},Zfe=Ji(()=>_("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),Kfe=Ji(()=>_("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),Jfe={key:1},Qfe=Ji(()=>_("tr",null,[_("th",{class:"fsxs"},"n"),_("th",{class:"fsxs"},"np\u1D41"),_("th",{class:"fsxs"},"np\u1D38"),_("th",{class:"fsxs"},"item"),_("th",{class:"fsxs"},"normal"),_("th",{class:"fsxs"},"giant")],-1)),the={class:"fsxs"},ehe={class:"fsxs"},rhe={class:"fsxs"},nhe={class:"center"},ihe=["title","onClick"],ohe=["title"],she={id:"content"},ahe=Ji(()=>_("tr",null,[_("td",null,"mute"),_("td",null,"luck")],-1)),lhe={class:"center"},uhe=["onUpdate:modelValue"],che=R(" Possible luck procs observed with "),fhe=K1('<option value="1.5" data-v-cab9f55a>\xB11.5\u03C3</option><option value="2" data-v-cab9f55a>\xB12\u03C3</option><option value="2.5" data-v-cab9f55a>\xB12.5\u03C3</option><option value="3" data-v-cab9f55a>\xB13\u03C3</option><option value="3.5" data-v-cab9f55a>\xB13.5\u03C3</option><option value="4" data-v-cab9f55a>\xB14\u03C3</option>',6),hhe=[fhe],dhe=Ji(()=>_("tr",null,[_("th"),_("th",null,"min"),_("th",null,"max")],-1)),phe=Ji(()=>_("td",null,"count",-1)),vhe=Ji(()=>_("td",null,"% of total",-1)),ghe={id:"settings"},mhe=R(" Use model:"),_he=Ji(()=>_("br",null,null,-1)),yhe=Ji(()=>_("label",{for:"option1"},[R("A. Same item drop regardless of luck (plants, lumber, ores)"),_("br")],-1)),bhe=Ji(()=>_("label",{for:"option2"},[R("B. Item only drops when luck procs (sacks, lumbering rares)"),_("br")],-1)),whe=Ji(()=>_("label",{for:"option3"},[R("C. Different drops when luck procs and when not (eggs, honey)"),_("br")],-1)),She={key:0,id:"modelA",style:{float:"left"}},The={key:1},khe={key:2};function Phe(e,t,r,n,i,o){const s=Ot("RouterLink"),a=Ot("ItemIcon"),l=Ot("DRMA"),u=Ot("DRMB"),c=Ot("DRMC");return E(),M("main",null,[_("div",Yfe,[_("div",qfe,C(n.dropratesStore.selected_pzk)+" "+C(n.dropratesStore.selected_ik)+" "+C(n.dropratesStore.selected_specie),1),Zfe,Kfe,(E(!0),M(W,null,gt(i.alldata,(f,h)=>(E(),M(W,null,[h in n.gameStore.plantzoneStatic?(E(),yr(s,{key:0,tag:"a",to:{path:"./",hash:"#node"+h}},{default:be(()=>[R(C(h)+" "+C(n.gameStore.plantzoneName(h)),1)]),_:2},1032,["to"])):(E(),M("span",Jfe,C(h),1)),_("table",null,[Qfe,(E(!0),M(W,null,gt(f,(d,p)=>(E(),M("tr",null,[_("td",the,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].rolls),1)],64)):Z("",!0)]),_("td",ehe,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].unlucky?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].unlucky[p]),1)],64)):Z("",!0)]),_("td",rhe,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].lucky?(E(),M(W,{key:0},[R(C(n.gameStore.plantzones[Number(h)].lucky[p]),1)],64)):Z("",!0)]),_("td",null,[ht(s,{tag:"a",to:{path:"./settings",hash:"#item"+p}},{default:be(()=>[_("span",null,[ht(a,{ik:Number(p)},null,8,["ik"])])]),_:2},1032,["to"]),R(" "+C(n.gameStore.itemName(p)),1)]),(E(),M(W,null,gt(["normal","giant"],v=>_("td",nhe,[v in d?(E(),M(W,{key:0},[h!=n.dropratesStore.selected_pzk||p!=n.dropratesStore.selected_ik||v!=n.dropratesStore.selected_specie?(E(),M("button",{key:0,title:`item ${p} ${v}`,onClick:m=>o.activate(h,p,v)},C(Object.values(d[v]).flat().length),9,ihe)):(E(),M("button",{key:1,title:`item ${p} ${v}`,class:"pressed"},C(Object.values(d[v]).flat().length),9,ohe))],64)):Z("",!0)])),64))]))),256))])],64))),256))]),_("div",she,[_("details",null,[_("summary",null,[R("Dataset: size N = "+C(o.stats.len)+", sum "+C(o.stats.sum)+", mean M = "+C(o.formatFixed(o.stats.mean,3))+"\xB1"+C(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(E(),M(W,{key:0},[R(C(this.stats.maxLuck),1)],64)):(E(),M(W,{key:1},[R(C(o.formatFixed(this.stats.minLuck,2))+"\u2026"+C(o.formatFixed(this.stats.maxLuck,2)),1)],64)),R("\u{1F340} \u2192 \u03BB \u2208 "+C(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+C(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),_("div",null,[_("table",null,[ahe,(E(!0),M(W,null,gt(o.stats.dataRaw,(f,h)=>(E(),M("tr",{class:_r({strike:i.hide_buckets[h]})},[_("td",lhe,[et(_("input",{"onUpdate:modelValue":d=>i.hide_buckets[h]=d,type:"checkbox"},null,8,uhe),[[Ve,i.hide_buckets[h]]])]),_("td",null,C(h),1),(E(!0),M(W,null,gt(f,d=>(E(),M("td",null,C(d),1))),256))],2))),256))])]),_("p",null,[che,et(_("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>i.generalSigmas=f)},hhe,512),[[He,i.generalSigmas]]),R(" ("+C(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),_("table",null,[dhe,_("tr",null,[phe,_("td",null,C(o.formatFixed(o.stats.lucky.lenLo,2)),1),_("td",null,C(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),_("tr",null,[vhe,_("td",null,C(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),_("td",null,C(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),_("div",ghe,[mhe,_he,et(_("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ad,n.dropratesStore.selected_model]]),yhe,et(_("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ad,n.dropratesStore.selected_model]]),bhe,et(_("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ad,n.dropratesStore.selected_model]]),whe]),n.dropratesStore.selected_model=="a"?(E(),M("div",She,[ht(l,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Z("",!0),n.dropratesStore.selected_model=="b"?(E(),M("div",The,[ht(u,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):Z("",!0),n.dropratesStore.selected_model=="c"?(E(),M("div",khe,[ht(c,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Z("",!0)])])}const Che=Gt(Xfe,[["render",Phe],["__scopeId","data-v-cab9f55a"]]),Ehe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Ahe=["step"],Mhe=["max","step"];function xhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.mean=s),class:"vmid",min:0,max:2,step:.01},null,8,Ahe),[[zt,r.me.mean]]),R(" \u03BC="+C(r.me.mean),1)]),_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.sigma=s),class:"vmid",min:0,max:.7,step:.01},null,8,Mhe),[[zt,r.me.sigma]]),R(" \u03C3="+C(r.me.sigma),1)])],64)}const Ihe=Gt(Ehe,[["render",xhe]]),Lhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Ohe=["step"],Rhe=["step"];function Dhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.center=s),class:"vmid",min:0,max:2,step:.01},null,8,Ohe),[[zt,r.me.center]]),R(" c="+C(r.me.center),1)]),_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.width=s),class:"vmid",min:0,max:2,step:.01},null,8,Rhe),[[zt,r.me.width]]),R(" w="+C(r.me.width),1)])],64)}const Nhe=Gt(Lhe,[["render",Dhe]]),Fhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},$he=["step"],zhe=["step"];function Bhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.center=s),class:"vmid",min:0,max:2,step:.01},null,8,$he),[[zt,r.me.center]]),R(" c="+C(r.me.center),1)]),_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.width=s),class:"vmid",min:0,max:2,step:.01},null,8,zhe),[[zt,r.me.width]]),R(" w="+C(r.me.width),1)])],64)}const Vhe=Gt(Fhe,[["render",Bhe]]),Uhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Whe=["min","step"],jhe=["min","max","step"];function Ghe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.at=s),class:"vmid",min:.1,max:2,step:.01},null,8,Whe),[[zt,r.me.at]]),R(" \u03B1\u03B8="+C(r.me.at),1)]),_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.theta=s),class:"vmid",min:.01,max:.3,step:.001},null,8,jhe),[[zt,r.me.theta]]),R(" \u03B8="+C(r.me.theta),1)])],64)}const Hhe=Gt(Uhe,[["render",Ghe]]),Xhe={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Yhe=["min","step"],qhe=R(" e"),Zhe=_("sup",null,"\u03BC",-1),Khe=["min","max","step"];function Jhe(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.emu=s),class:"vmid",min:.1,max:2,step:.01},null,8,Yhe),[[zt,r.me.emu]]),qhe,Zhe,R("="+C(r.me.emu),1)]),_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=s=>r.me.sigma=s),class:"vmid",min:.1,max:.7,step:.01},null,8,Khe),[[zt,r.me.sigma]]),R(" \u03C3="+C(r.me.sigma),1)])],64)}const Qhe=Gt(Xhe,[["render",Jhe]]),tde={data:()=>({}),props:{me:Object,isLast:Boolean},emits:["delete"],components:{FishCurveNormal:Ihe,FishCurveLognormal:Qhe,FishCurveUniform:Nhe,FishCurveTriangular:Vhe,FishCurveGamma:Hhe},methods:{formatFixed:st,morph(e){const t=this.me.kind,r=e.target.value;let n=0,i=0;switch(t){case"Normal":n=this.me.mean,i=this.me.sigma;break;case"Triangular":n=this.me.center,i=this.me.width/2;break;case"Uniform":n=this.me.center,i=this.me.width/2;break;case"Gamma":n=this.me.at,i=Math.sqrt(this.me.at*this.me.theta);break;case"Lognormal":n=this.me.emu;const o=this.me.sigma*this.me.sigma;i=Math.sqrt((Math.exp(o)-1)*Math.exp(2*Math.log(this.me.emu)+o));break;default:throw Error(`unknown curve kind ${t}`)}switch(console.log(`${t} -> ${r} (${n}, ${i})`),r){case"Normal":this.me.mean=n,this.me.sigma=i,this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;case"Triangular":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Uniform":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Gamma":this.me.at=n,this.me.theta=i*i/n,this.me.alpha=Math.round(this.me.alpha*100)/100,this.me.theta=Math.round(this.me.theta*1e3)/1e3;break;case"Lognormal":this.me.emu=n,this.me.sigma=Math.sqrt(Math.log(1+i*i/n/n)),this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;default:throw Error(`unknown curve kind ${r}`)}this.me.kind=r}},computed:{componentName(){return"FishCurve"+this.me.kind}}},ede=["disabled","step"],rde=["value"],nde=_("option",null,"Normal",-1),ide=_("option",null,"Triangular",-1),ode=_("option",null,"Uniform",-1),sde=_("option",null,"Gamma",-1),ade=_("option",null,"Lognormal",-1),lde=[nde,ide,ode,sde,ade];function ude(e,t,r,n,i,o){return E(),M(W,null,[_("td",null,[et(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>r.me.amount=s),disabled:r.isLast,class:"vmid",min:0,max:1,step:.01},null,8,ede),[[zt,r.me.amount]]),R(" "+C(o.formatFixed(r.me.amount*100,1))+"% ",1)]),_("td",null,[_("select",{value:r.me.kind,onChange:t[1]||(t[1]=s=>o.morph(s))},lde,40,rde)]),(E(),yr(aH(o.componentName),{me:r.me,"onUpdate:me":t[2]||(t[2]=s=>r.me=s)},null,40,["me"])),_("td",null,[_("button",{onClick:t[3]||(t[3]=s=>e.$emit("delete"))},"delete")])],64)}const cde=Gt(tde,[["render",ude]]);wr([Va,Rf,xu,Iu,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);const fde={data:()=>({curves:[],presets:[[{amount:1,kind:"Lognormal",emu:1.01,sigma:.41}],[{amount:1,kind:"Gamma",at:1.05,theta:.163}],[{amount:.81,kind:"Normal",mean:1.09,sigma:.38},{amount:1,kind:"Normal",mean:.7,sigma:.16}],[{amount:.48,kind:"Normal",mean:.74,sigma:.2},{amount:.75,kind:"Normal",mean:1.19,sigma:.21},{amount:1,kind:"Normal",mean:1.62,sigma:.21}],[{amount:.5,kind:"Triangular",center:1,width:.76},{amount:.32,kind:"Triangular",center:.69,width:.34},{amount:1,kind:"Normal",mean:1.25,sigma:.42}],[{amount:.25,kind:"Normal",mean:.62,sigma:.16},{amount:.34,kind:"Normal",mean:.87,sigma:.15},{amount:.5,kind:"Normal",mean:1.18,sigma:.18},{amount:1,kind:"Normal",mean:1.47,sigma:.28}]],forceMSE:!1,bestPval:0}),mounted(){this.loadPreset(0)},props:{stats:Object,histogram:Object,avg_size:Number,mode_relative:Boolean},components:{VChart:Ga,FishCurve:cde},methods:{isGoodVal:ei,formatFixed:st,formatKMG:t_,makeBinomialArray:_y,makeNormalArray:jue,makeLognormalArray:Bue,makeUniformArray:Uue,makeGammaArray:Vue,makeTriangularArray:Wue,sumDistributions:Pj,loss:yy,removeCurve(e){this.curves.splice(e,1),this.curves[this.curves.length-1].amount=1},addCurve(){this.curves[this.curves.length-1].amount/=2,this.curves.push({amount:1,kind:"Normal",mean:1,sigma:.1})},loadPreset(e){const t=this.presets[e];this.curves=[];for(const r of t)this.curves.push({...r})},makeModel(){const e={bells:[],bell:[]};let t=-1,r=this.stats.len;for(const n of this.curves){let i=null;switch(t+=3,n.kind){case"Normal":n.amount=="rest"&&(n.amount=r),i=this.makeNormalArray(n.mean*this.avg_size,n.amount*r,this.stats.max,n.sigma*this.avg_size),r-=n.amount*r;break;case"Triangular":i=this.makeTriangularArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Uniform":i=this.makeUniformArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Gamma":i=this.makeGammaArray(n.at/n.theta,n.amount*r,this.stats.max,n.theta*this.avg_size),r-=n.amount*r;break;case"Lognormal":i=this.makeLognormalArray(Math.log(n.emu*this.avg_size),n.amount*r,this.stats.max,n.sigma),r-=n.amount*r;break;default:throw Error(`unknown curve kind ${n.kind}`)}e.bells.push(i),e.bell=this.sumDistributions(e.bell,i)}return e.loss=this.loss(e.bell,this.histogram.map,t),e||console.log("makeModel failed",npU,npL,stdDev),e}},computed:{modelC(){const e=this.makeModel();return console.log("model",e),e},makeHistogramOption(){const e={legend:{},title:{text:`MSE=${st(this.modelC.loss.mse,2)}
p-val=${st(this.modelC.loss.pval,4)}`,textStyle:{fontWeight:"normal",fontSize:11},right:"3%",top:"10%"},tooltip:{trigger:"axis",extraCssText:"background: var(--color-background);border-color: gray;color: var(--color-text);",valueFormatter:t=>st(t,1),formatter:function(t){const r=t[0].axisValue;let n=`<div style="text-align:center;">[ ${r}...${r+1} )</div>`;return t.forEach(i=>{const o=i.seriesName=="observed"?i.data[1]:st(i.data[1],1);n+=`<div>
                <div style="display:inline-block;">${i.marker} ${i.seriesName}</div>
                <div style="float:right;margin-left:10px;font-weight:600">${o}</div>
              </div>`}),n}},dataset:[{source:this.histogram.arr},{source:this.modelC.bell}],xAxis:{min:this.stats.min==0?-1:null,max:this.mode_relative?this.stats.max<5?this.stats.max+1:null:this.avg_size*3},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>st(t,0)}},{name:"curve \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}}]};for(const[t,r]of this.modelC.bells.entries())e.dataset.push({source:r}),e.series.push({name:`curve ${t}`,type:"line",datasetIndex:2+t,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}});return e}}},hde=e=>(Ue("data-v-8fa4bafa"),e=e(),We(),e),dde=["onClick"],pde={key:0,id:"chartHisto",style:{float:"left"}},vde=hde(()=>_("div",{style:{clear:"both"}},null,-1));function gde(e,t,r,n,i,o){const s=Ot("FishCurve"),a=Ot("v-chart");return E(),M(W,null,[_("div",null,[(E(!0),M(W,null,gt(e.presets,(l,u)=>(E(),M("button",{onClick:c=>o.loadPreset(u)},"preset"+C(u),9,dde))),256)),_("table",null,[(E(!0),M(W,null,gt(e.curves,(l,u)=>(E(),M("tr",null,[_("td",null,C(u),1),(E(),yr(s,{key:u,isLast:u==e.curves.length-1,me:e.curves[u],"onUpdate:me":c=>e.curves[u]=c,onDelete:c=>o.removeCurve(u)},null,8,["isLast","me","onUpdate:me","onDelete"]))]))),256))]),_("button",{onClick:t[0]||(t[0]=(...l)=>o.addCurve&&o.addCurve(...l))},"add curve")]),o.modelC.bell?(E(),M("div",pde,[ht(a,{option:o.makeHistogramOption,"update-options":{notMerge:!0},autoresize:""},null,8,["option"])])):Z("",!0),vde],64)}const mde=Gt(fde,[["render",gde],["__scopeId","data-v-8fa4bafa"]]);wr([Va,Rf,xu,Iu,Wa,Ua,ja,Lu,Ff,Nf,Df,Ou]);const _de={setup(){},components:{VChart:Ga,FishModel:mde},provide(){return{[Wz]:Ze(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{mode_relative:!0,relative_base:100,alldata:{},selectedFish:"ALL",selectedLuck:68.3,generalSigmas:4,fish_info:{},hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e=[];if(this.selectedFish in this.alldata){const t=this.get_fish_info(this.selectedFish);for(const r of this.alldata[this.selectedFish])this.mode_relative?e.push(this.relative_base*r/t.avg_size):e.push(r)}return e},weightedDataset(){let e={};const t=this.currentDataset,r=t.length;let n=[];for(let i=0;i<r;i++){const o=lt.binomial.cdf(i,r,1-this.selectedLuck/100);n.push(o)}return e={len:r,luckyLen:r*this.selectedLuck/100,sorted:[...t].sort((i,o)=>i-o),weights:n},e.grouped=e.sorted.reduce((i,o)=>{const s=Math.floor(o);return i[s]||(i[s]=[]),i[s].push(o),i},{}),e},stats(){const e=this.currentDataset;let t=e.length;const r=this.weightedDataset;for(let p of r.weights)p>this.stats.generalConfidence/100,p>1-this.stats.generalConfidence/100;let n=[],i=[],o=100,s=0;o=Math.min(o,this.selectedLuck),s=Math.max(s,this.selectedLuck);let{len:a,luckyLen:l,sorted:u,weights:c,grouped:f}=r;n.push(...u),i.push(...c);const h={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},d={generalSigmas:this.generalSigmas,generalConfidence:h[this.generalSigmas],lenRaw:t,dataRaw:e,dataFlatSorted:n,weightsFlat:i,len:n.length,min:lt.min(n),max:lt.max(n),range:lt.range(n),sum:lt.sum(n),mean:lt.mean(n),meanErr:0,meanLo:0,meanHi:0,std:lt.stdev(n,!0),bell:[],histo:[]};return d.meanErr=Math.sqrt(d.mean/d.max*(1-d.mean/d.max)*d.max/d.len),d.meanLo=d.mean-this.generalSigmas*d.meanErr,d.meanHi=d.mean+this.generalSigmas*d.meanErr,console.log("stats",d),d},histogram(){const e={arr:[],map:{}};if(this.stats.len>0){const r=this.stats.dataFlatSorted[this.stats.len-1],n=Math.ceil(r/1);console.log("binCount",n);const i=Array(n).fill(0);for(const o of this.stats.dataFlatSorted){const s=Math.floor(o/1);i[s]++}for(let o=0;o<n;o++){const s=o*1;e.arr.push([s,i[o]]),e.map[s]=i[o]}}return this.stats.range>0||(e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len),console.log("histogram",e),e}},methods:{formatFixed:st,isNumber:jY,async fetchObservations(){const e=Date.now();if(this.alldata=await(await fetch("data/manual/catches_by_fish.json")).json(),this.fish_info=await(await fetch("data/manual/fish_info.json")).json(),this.mode_relative){console.log("filling group ALL");const o=[];for(const[s,a]of Object.entries(this.alldata)){const l=this.get_fish_info(s),u=(l.BaseSize+l.FishVarySize)/2;for(const c of a)o.push(this.relative_base*c/u)}this.alldata.ALL=o,this.fish_info.ALL={BaseSize:"x",FishVarySize:"x",avg_size:this.relative_base}}const t={},r={};for(const[o,s]of Object.entries(this.alldata)){const a=this.get_fish_info(o),l=`${a.BaseSize}_${a.FishVarySize}`,u=s.length;l in t||(t[l]={fishes:[],totalSamples:0}),t[l].fishes.push(o),t[l].totalSamples+=u}console.log("bs_group_sizes",t);for(const[o,s]of Object.entries(this.alldata)){const l=`${this.get_fish_info(o).avg_size}`,u=s.length;l in r||(r[l]={fishes:[],totalSamples:0}),r[l].fishes.push(o),r[l].totalSamples+=u}console.log("avg_group_sizes",r);const n={},i={};for(const[o,s]of Object.entries(this.alldata)){const a=this.get_fish_info(o),l=`${a.BaseSize}_${a.FishVarySize}`,u=t[l];if(u.fishes.length>1&&u.totalSamples>1500){const h=u.fishes.join("+");h in n||(n[h]={sizes:[],info:{BaseSize:a.BaseSize,FishVarySize:a.FishVarySize}});for(const d of s)n[h].sizes.push(d)}const c=`${a.avg_size}`,f=r[c];if(f.fishes.length>1&&f.totalSamples>1500){const h=f.fishes.join("+");if(h in n)continue;h in i||(i[h]={sizes:[],info:{BaseSize:"x",FishVarySize:"x",avg_size:a.avg_size}});for(const d of s)i[h].sizes.push(d)}}for(const[o,s]of Object.entries(n)){const a=`by BS/FVS (${o})`;this.alldata[a]=s.sizes,this.fish_info[a]=s.info}for(const[o,s]of Object.entries(i)){const a=`by AVG (${o})`;this.alldata[a]=s.sizes,this.fish_info[a]=s.info}console.log("fetchObservations took",Date.now()-e,"ms")},activate(e){this.selectedFish=e},get_fish_info(e){const t=e in this.fish_info?this.fish_info[e]:{BaseSize:1,FishVarySize:1};return"avg_size"in t||(t.avg_size=(t.BaseSize+t.FishVarySize)/2),t}}},Ej=e=>(Ue("data-v-26a3dc92"),e=e(),We(),e),yde={id:"menu"},bde={style:{display:"none"}},wde=R("relative sizes (scaled to Avg= "),Sde=R(" ) "),Tde=Ej(()=>_("br",null,null,-1)),kde=Ej(()=>_("tr",null,[_("th",null,"ik"),_("th",null,"BS"),_("th",null,"FVS"),_("th",null,"Avg"),_("th",null,"data")],-1)),Pde={key:0},Cde=["title"],Ede=["onClick"],Ade={id:"content"};function Mde(e,t,r,n,i,o){const s=Ot("FishModel");return E(),M("main",null,[_("div",yde,[_("div",bde,C(i.selectedFish),1),et(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>i.mode_relative=a)},null,512),[[Ve,i.mode_relative]]),wde,et(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=a=>i.relative_base=a),step:"10",style:{width:"3.5em"}},null,512),[[zt,i.relative_base]]),Sde,Tde,_("table",null,[kde,(E(!0),M(W,null,gt(i.alldata,(a,l)=>(E(),M(W,null,[a.length>1e3?(E(),M("tr",Pde,[_("td",null,[l.startsWith("by")?(E(),M("abbr",{key:0,class:"tooltip",title:l},"group",8,Cde)):(E(),M(W,{key:1},[R(C(l),1)],64))]),_("td",null,C(o.get_fish_info(l).BaseSize),1),_("td",null,C(o.get_fish_info(l).FishVarySize),1),_("td",null,C(o.get_fish_info(l).avg_size),1),_("td",null,[_("button",{class:_r({pressed:l===i.selectedFish}),onClick:u=>o.activate(l)},C(a.length),11,Ede)])])):Z("",!0)],64))),256))])]),_("div",Ade,[_("details",null,[_("summary",null,"Dataset: size N = "+C(o.stats.len)+", mean M = "+C(o.formatFixed(o.stats.mean,3))+"\xB1"+C(o.formatFixed(1.96*o.stats.meanErr,3))+", min = "+C(o.formatFixed(o.stats.min,3))+", max = "+C(o.formatFixed(o.stats.max,3)),1),_("div",null,[_("table",null,[(E(!0),M(W,null,gt(o.weightedDataset.grouped,(a,l)=>(E(),M("tr",null,[(E(!0),M(W,null,gt(a,u=>(E(),M("td",null,C(o.formatFixed(u,3)),1))),256))]))),256))])])]),_("div",null,[ht(s,{stats:o.stats,histogram:o.histogram,avg_size:i.mode_relative?i.relative_base:i.fish_info[i.selectedFish].avg_size},null,8,["stats","histogram","avg_size"])])])])}const xde=Gt(_de,[["render",Mde],["__scopeId","data-v-26a3dc92"]]),Ide={setup(){return{gameStore:mt()}},components:{},data(){return{cases:[{label:"ehwaz-pinto",expected:5,tasks:[[1,160],[1,136]]},{label:"glish-lynch_f/heidel-glish_r",expected:9,tasks:[[302,488],[301,480]]}]}},computed:{run_all(){const e=[];for(const t of this.cases)e.push(this.run_case(t));return e}},methods:{run_case(e){const t=mt(),r=[];for(const o of e.tasks)r.push({source:o[0],target:o[1]});const n=t.route([],r);return{...e,...n,passed:n.totalCost==e.expected}}}},Lde={id:"tests"},Ode=_("div",{id:"content"},null,-1);function Rde(e,t,r,n,i,o){return E(),M("main",null,[_("div",Lde,[(E(!0),M(W,null,gt(o.run_all,s=>(E(),M("div",null,[R(C(s.label)+" "+C(s.totalCost)+" "+C(s.passed?"\u2714\uFE0F":"\u274C")+" ",1),_("button",{onClick:t[0]||(t[0]=()=>{})},"view")]))),256))]),Ode])}const Dde=Gt(Ide,[["render",Rde]]);const Nde={setup(){const e=mt(),t=Ut();return{gameStore:e,userStore:t}},components:{},data(){return{deck:null,tileLayer:null,geoLayer:null,iconLayer:null,initialViewState:{target:[0,0],zoom:-12,minZoom:-12,maxZoom:-5},hoverx:0,hovery:0,selectedZone:0,highlightedIcon:0}},computed:{},mounted(){this.deck=this.initializeDeck()},watch:{highlightedIcon(e){this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.geoLayer,this.iconLayer]})}},methods:{makeIconsLayer(){return new yu({data:"data/deck_rg_graphs.json",getPosition:e=>[e.graphx,e.graphz],getColor:e=>[66,66,66,255],getIcon:function(e){return{url:"data/icons/target_percent.png",width:128,height:128,anchorX:64,anchorY:64}},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.k==this.highlightedIcon?50:0,updateTriggers:{getSize:this.highlightedIcon}})},makeGeoLayer(){return new Z_({id:"GeoJsonLayerCur",data:"data/rg_2025-05_1_5.geojson",stroked:!1,getLineWidth:50,lineWidthMinPixels:1,getLineColor:[255,255,255],getFillColor:e=>e.properties.c,pickable:!0,autoHighlight:!0,coordinateSystem:ae.CARTESIAN,modelMatrix:[301.1765,0,0,0,0,301.1765,0,0,0,0,1,0,-2048e3,-2048e3,0,1],opacity:.1,onHover:({object:e})=>{e&&e.properties&&(this.highlightedIcon=e.properties.rg)}})},initializeDeck(){return this.tileLayer=new J_({id:"TileLayer",data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:t=>{const{bbox:{left:r,bottom:n,right:i,top:o}}=t.tile;return new X_(t,{data:null,image:t.data,bounds:[r,n,i,o]})}}),this.iconLayer=this.makeIconsLayer(),this.geoLayer=this.makeGeoLayer(),new j_({canvas:"deck-canvas",mapbox:!1,initialViewState:this.initialViewState,layers:[this.tileLayer,this.geoLayer,this.iconLayer],controller:{doubleClickZoom:!1},getTooltip:({object:t})=>{if(t&&t.properties&&t.properties.rg)return`RG${t.properties.rg}`},views:[new U_({controller:!0})],onHover:(t,r)=>{t.coordinate&&(this.hoverx=Math.round(t.coordinate[0]),this.hovery=Math.round(t.coordinate[1]))}})}}},Fde={id:"canvas-limiter"},$de={id:"deck-canvas",ref:"canvas"},zde={id:"coords"};function Bde(e,t,r,n,i,o){return E(),M("main",null,[_("div",Fde,[_("canvas",$de,null,512),_("div",zde," x: "+C(i.hoverx)+" y: "+C(-i.hovery),1)])])}const Vde=Gt(Nde,[["render",Bde],["__scopeId","data-v-95c1054d"]]),Ude=BY({history:nY("/workerman/"),routes:[{path:"/",name:"home",component:hMt},{path:"/plantzones",component:a5t},{path:"/resources",component:q5t},{path:"/settings",component:BIt},{path:"/about",component:()=>dq(()=>import("./AboutView.a2a97185.js"),[])},{path:"/othertowns",component:HIt},{path:"/workshops",component:sLt},{path:"/housecraft",component:CLt},{path:"/droprates",component:Che},{path:"/routertests",component:Dde},{path:"/regionmap",component:Vde},{path:"/fishsize",component:xde},{path:"/lodging",component:y5t}]});const VE=cX(cq),Wde=NX();VE.use(Wde);VE.use(Ude);VE.mount("#app");export{W as F,Gt as _,_ as a,R as b,M as c,Ot as d,yr as e,ht as f,K1 as g,We as h,E as o,Ue as p,lH as r,C as t,mt as u,be as w};
