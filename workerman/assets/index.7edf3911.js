function pj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function XT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const vj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gj=XT(vj);function f8(e){return!!e||e===""}function Rl(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=fr(n)?_j(n):Rl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(fr(e))return e;if(Qe(e))return e}}const mj=/;(?![^(]*\))/g,yj=/:(.+)/;function _j(e){const t={};return e.split(mj).forEach(r=>{if(r){const n=r.split(yj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Yr(e){let t="";if(fr(e))t=e;else if(Bt(e))for(let r=0;r<e.length;r++){const n=Yr(e[r]);n&&(t+=n+" ")}else if(Qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function bj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Hl(e[n],t[n]);return r}function Hl(e,t){if(e===t)return!0;let r=DC(e),n=DC(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Rd(e),n=Rd(t),r||n)return e===t;if(r=Bt(e),n=Bt(t),r||n)return r&&n?bj(e,t):!1;if(r=Qe(e),n=Qe(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Hl(e[a],t[a]))return!1}}return String(e)===String(t)}function YT(e,t){return e.findIndex(r=>Hl(r,t))}const L=e=>fr(e)?e:e==null?"":Bt(e)||Qe(e)&&(e.toString===p8||!Gt(e.toString))?JSON.stringify(e,h8,2):String(e),h8=(e,t)=>t&&t.__v_isRef?h8(e,t.value):Cc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:nf(t)?{[`Set(${t.size})`]:[...t.values()]}:Qe(t)&&!Bt(t)&&!v8(t)?String(t):t,Le={},Ac=[],Ai=()=>{},wj=()=>!1,Sj=/^on[^a-z]/,T1=e=>Sj.test(e),qT=e=>e.startsWith("onUpdate:"),Zr=Object.assign,ZT=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Tj=Object.prototype.hasOwnProperty,ae=(e,t)=>Tj.call(e,t),Bt=Array.isArray,Cc=e=>P0(e)==="[object Map]",nf=e=>P0(e)==="[object Set]",DC=e=>P0(e)==="[object Date]",Gt=e=>typeof e=="function",fr=e=>typeof e=="string",Rd=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",d8=e=>Qe(e)&&Gt(e.then)&&Gt(e.catch),p8=Object.prototype.toString,P0=e=>p8.call(e),Pj=e=>P0(e).slice(8,-1),v8=e=>P0(e)==="[object Object]",KT=e=>fr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tg=XT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Ej=/-(\w)/g,To=P1(e=>e.replace(Ej,(t,r)=>r?r.toUpperCase():"")),Aj=/\B([A-Z])/g,of=P1(e=>e.replace(Aj,"-$1").toLowerCase()),E1=P1(e=>e.charAt(0).toUpperCase()+e.slice(1)),l_=P1(e=>e?`on${E1(e)}`:""),Dd=(e,t)=>!Object.is(e,t),Pg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},cm=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},fm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let NC;const Cj=()=>NC||(NC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ao;class g8{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ao&&(this.parent=ao,this.index=(ao.scopes||(ao.scopes=[])).push(this)-1)}run(t){if(this.active){const r=ao;try{return ao=this,t()}finally{ao=r}}}on(){ao=this}off(){ao=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function m8(e){return new g8(e)}function Mj(e,t=ao){t&&t.active&&t.effects.push(e)}const JT=e=>{const t=new Set(e);return t.w=0,t.n=0,t},y8=e=>(e.w&Ts)>0,_8=e=>(e.n&Ts)>0,kj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ts},xj=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];y8(i)&&!_8(i)?i.delete(e):t[r++]=i,i.w&=~Ts,i.n&=~Ts}t.length=r}},Ww=new WeakMap;let Uh=0,Ts=1;const Hw=30;let _i;const Dl=Symbol(""),Xw=Symbol("");class QT{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Mj(this,n)}run(){if(!this.active)return this.fn();let t=_i,r=gs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=_i,_i=this,gs=!0,Ts=1<<++Uh,Uh<=Hw?kj(this):FC(this),this.fn()}finally{Uh<=Hw&&xj(this),Ts=1<<--Uh,_i=this.parent,gs=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_i===this?this.deferStop=!0:this.active&&(FC(this),this.onStop&&this.onStop(),this.active=!1)}}function FC(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let gs=!0;const b8=[];function af(){b8.push(gs),gs=!1}function sf(){const e=b8.pop();gs=e===void 0?!0:e}function Mn(e,t,r){if(gs&&_i){let n=Ww.get(e);n||Ww.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=JT()),w8(i)}}function w8(e,t){let r=!1;Uh<=Hw?_8(e)||(e.n|=Ts,r=!y8(e)):r=!e.has(_i),r&&(e.add(_i),_i.deps.push(e))}function ca(e,t,r,n,i,o){const a=Ww.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Bt(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Bt(e)?KT(r)&&s.push(a.get("length")):(s.push(a.get(Dl)),Cc(e)&&s.push(a.get(Xw)));break;case"delete":Bt(e)||(s.push(a.get(Dl)),Cc(e)&&s.push(a.get(Xw)));break;case"set":Cc(e)&&s.push(a.get(Dl));break}if(s.length===1)s[0]&&Yw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Yw(JT(l))}}function Yw(e,t){const r=Bt(e)?e:[...e];for(const n of r)n.computed&&BC(n);for(const n of r)n.computed||BC(n)}function BC(e,t){(e!==_i||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Lj=XT("__proto__,__v_isRef,__isVue"),S8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Rd)),Ij=tP(),Oj=tP(!1,!0),Rj=tP(!0),$C=Dj();function Dj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=ce(this);for(let o=0,a=this.length;o<a;o++)Mn(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(ce)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){af();const n=ce(this)[t].apply(this,r);return sf(),n}}),e}function tP(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Kj:C8:t?A8:E8).get(n))return n;const a=Bt(n);if(!e&&a&&ae($C,i))return Reflect.get($C,i,o);const s=Reflect.get(n,i,o);return(Rd(i)?S8.has(i):Lj(i))||(e||Mn(n,"get",i),t)?s:He(s)?a&&KT(i)?s:s.value:Qe(s)?e?M8(s):lf(s):s}}const Nj=T8(),Fj=T8(!0);function T8(e=!1){return function(r,n,i,o){let a=r[n];if(Nd(a)&&He(a)&&!He(i))return!1;if(!e&&!Nd(i)&&(qw(i)||(i=ce(i),a=ce(a)),!Bt(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=Bt(r)&&KT(n)?Number(n)<r.length:ae(r,n),l=Reflect.set(r,n,i,o);return r===ce(o)&&(s?Dd(i,a)&&ca(r,"set",n,i):ca(r,"add",n,i)),l}}function Bj(e,t){const r=ae(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&ca(e,"delete",t,void 0),n}function $j(e,t){const r=Reflect.has(e,t);return(!Rd(t)||!S8.has(t))&&Mn(e,"has",t),r}function zj(e){return Mn(e,"iterate",Bt(e)?"length":Dl),Reflect.ownKeys(e)}const P8={get:Ij,set:Nj,deleteProperty:Bj,has:$j,ownKeys:zj},Vj={get:Rj,set(e,t){return!0},deleteProperty(e,t){return!0}},Uj=Zr({},P8,{get:Oj,set:Fj}),eP=e=>e,A1=e=>Reflect.getPrototypeOf(e);function dp(e,t,r=!1,n=!1){e=e.__v_raw;const i=ce(e),o=ce(t);r||(t!==o&&Mn(i,"get",t),Mn(i,"get",o));const{has:a}=A1(i),s=n?eP:r?iP:Fd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function pp(e,t=!1){const r=this.__v_raw,n=ce(r),i=ce(e);return t||(e!==i&&Mn(n,"has",e),Mn(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function vp(e,t=!1){return e=e.__v_raw,!t&&Mn(ce(e),"iterate",Dl),Reflect.get(e,"size",e)}function zC(e){e=ce(e);const t=ce(this);return A1(t).has.call(t,e)||(t.add(e),ca(t,"add",e,e)),this}function VC(e,t){t=ce(t);const r=ce(this),{has:n,get:i}=A1(r);let o=n.call(r,e);o||(e=ce(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Dd(t,a)&&ca(r,"set",e,t):ca(r,"add",e,t),this}function UC(e){const t=ce(this),{has:r,get:n}=A1(t);let i=r.call(t,e);i||(e=ce(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&ca(t,"delete",e,void 0),o}function GC(){const e=ce(this),t=e.size!==0,r=e.clear();return t&&ca(e,"clear",void 0,void 0),r}function gp(e,t){return function(n,i){const o=this,a=o.__v_raw,s=ce(a),l=t?eP:e?iP:Fd;return!e&&Mn(s,"iterate",Dl),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function mp(e,t,r){return function(...n){const i=this.__v_raw,o=ce(i),a=Cc(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?eP:t?iP:Fd;return!t&&Mn(o,"iterate",l?Xw:Dl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function La(e){return function(...t){return e==="delete"?!1:this}}function Gj(){const e={get(o){return dp(this,o)},get size(){return vp(this)},has:pp,add:zC,set:VC,delete:UC,clear:GC,forEach:gp(!1,!1)},t={get(o){return dp(this,o,!1,!0)},get size(){return vp(this)},has:pp,add:zC,set:VC,delete:UC,clear:GC,forEach:gp(!1,!0)},r={get(o){return dp(this,o,!0)},get size(){return vp(this,!0)},has(o){return pp.call(this,o,!0)},add:La("add"),set:La("set"),delete:La("delete"),clear:La("clear"),forEach:gp(!0,!1)},n={get(o){return dp(this,o,!0,!0)},get size(){return vp(this,!0)},has(o){return pp.call(this,o,!0)},add:La("add"),set:La("set"),delete:La("delete"),clear:La("clear"),forEach:gp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=mp(o,!1,!1),r[o]=mp(o,!0,!1),t[o]=mp(o,!1,!0),n[o]=mp(o,!0,!0)}),[e,r,t,n]}const[jj,Wj,Hj,Xj]=Gj();function rP(e,t){const r=t?e?Xj:Hj:e?Wj:jj;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(ae(r,i)&&i in n?r:n,i,o)}const Yj={get:rP(!1,!1)},qj={get:rP(!1,!0)},Zj={get:rP(!0,!1)},E8=new WeakMap,A8=new WeakMap,C8=new WeakMap,Kj=new WeakMap;function Jj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qj(e){return e.__v_skip||!Object.isExtensible(e)?0:Jj(Pj(e))}function lf(e){return Nd(e)?e:nP(e,!1,P8,Yj,E8)}function tW(e){return nP(e,!1,Uj,qj,A8)}function M8(e){return nP(e,!0,Vj,Zj,C8)}function nP(e,t,r,n,i){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=Qj(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function aa(e){return Nd(e)?aa(e.__v_raw):!!(e&&e.__v_isReactive)}function Nd(e){return!!(e&&e.__v_isReadonly)}function qw(e){return!!(e&&e.__v_isShallow)}function k8(e){return aa(e)||Nd(e)}function ce(e){const t=e&&e.__v_raw;return t?ce(t):e}function mi(e){return cm(e,"__v_skip",!0),e}const Fd=e=>Qe(e)?lf(e):e,iP=e=>Qe(e)?M8(e):e;function x8(e){gs&&_i&&(e=ce(e),w8(e.dep||(e.dep=JT())))}function L8(e,t){e=ce(e),e.dep&&Yw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function C1(e){return I8(e,!1)}function Eg(e){return I8(e,!0)}function I8(e,t){return He(e)?e:new eW(e,t)}class eW{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:ce(t),this._value=r?t:Fd(t)}get value(){return x8(this),this._value}set value(t){t=this.__v_isShallow?t:ce(t),Dd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Fd(t),L8(this))}}function mr(e){return He(e)?e.value:e}const rW={get:(e,t,r)=>mr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function O8(e){return aa(e)?e:new Proxy(e,rW)}function Zw(e){const t=Bt(e)?new Array(e.length):{};for(const r in e)t[r]=Ag(e,r);return t}class nW{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Ag(e,t,r){const n=e[t];return He(n)?n:new nW(e,t,r)}class iW{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new QT(t,()=>{this._dirty||(this._dirty=!0,L8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=ce(this);return x8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function oW(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=Ai):(n=e.get,i=e.set),new iW(n,i,o||!i,r)}function ms(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){M1(o,t,r)}return i}function Ci(e,t,r,n){if(Gt(e)){const o=ms(e,t,r,n);return o&&d8(o)&&o.catch(a=>{M1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ci(e[o],t,r,n));return i}function M1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){ms(l,null,10,[e,a,s]);return}}aW(e,r,i,n)}function aW(e,t,r,n=!0){console.error(e)}let hm=!1,Kw=!1;const Tn=[];let ta=0;const od=[];let Gh=null,sc=0;const ad=[];let ns=null,lc=0;const R8=Promise.resolve();let oP=null,Jw=null;function Bd(e){const t=oP||R8;return e?t.then(this?e.bind(this):e):t}function sW(e){let t=ta+1,r=Tn.length;for(;t<r;){const n=t+r>>>1;$d(Tn[n])<e?t=n+1:r=n}return t}function D8(e){(!Tn.length||!Tn.includes(e,hm&&e.allowRecurse?ta+1:ta))&&e!==Jw&&(e.id==null?Tn.push(e):Tn.splice(sW(e.id),0,e),N8())}function N8(){!hm&&!Kw&&(Kw=!0,oP=R8.then($8))}function lW(e){const t=Tn.indexOf(e);t>ta&&Tn.splice(t,1)}function F8(e,t,r,n){Bt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),N8()}function uW(e){F8(e,Gh,od,sc)}function cW(e){F8(e,ns,ad,lc)}function k1(e,t=null){if(od.length){for(Jw=t,Gh=[...new Set(od)],od.length=0,sc=0;sc<Gh.length;sc++)Gh[sc]();Gh=null,sc=0,Jw=null,k1(e,t)}}function B8(e){if(k1(),ad.length){const t=[...new Set(ad)];if(ad.length=0,ns){ns.push(...t);return}for(ns=t,ns.sort((r,n)=>$d(r)-$d(n)),lc=0;lc<ns.length;lc++)ns[lc]();ns=null,lc=0}}const $d=e=>e.id==null?1/0:e.id;function $8(e){Kw=!1,hm=!0,k1(e),Tn.sort((r,n)=>$d(r)-$d(n));const t=Ai;try{for(ta=0;ta<Tn.length;ta++){const r=Tn[ta];r&&r.active!==!1&&ms(r,null,14)}}finally{ta=0,Tn.length=0,B8(),hm=!1,oP=null,(Tn.length||od.length||ad.length)&&$8(e)}}function fW(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(fm))}let s,l=n[s=l_(t)]||n[s=l_(To(t))];!l&&o&&(l=n[s=l_(of(t))]),l&&Ci(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Ci(u,e,6,i)}}function z8(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=z8(u,t,!0);c&&(s=!0,Zr(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Bt(o)?o.forEach(l=>a[l]=null):Zr(a,o),n.set(e,a),a)}function x1(e,t){return!e||!T1(t)?!1:(t=t.slice(2).replace(/Once$/,""),ae(e,t[0].toLowerCase()+t.slice(1))||ae(e,of(t))||ae(e,t))}let Rr=null,L1=null;function dm(e){const t=Rr;return Rr=e,L1=e&&e.type.__scopeId||null,t}function en(e){L1=e}function rn(){L1=null}function Ee(e,t=Rr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&tM(-1);const o=dm(t),a=e(...i);return dm(o),n._d&&tM(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function u_(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const y=dm(e);try{if(r.shapeFlag&4){const w=i||n;g=co(c.call(w,w,f,o,d,h,p)),m=l}else{const w=t;g=co(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),m=t.props?l:hW(l)}}catch(w){ld.length=0,M1(w,e,1),g=kt(Ps)}let _=g;if(m&&v!==!1){const w=Object.keys(m),{shapeFlag:T}=_;w.length&&T&7&&(a&&w.some(qT)&&(m=dW(m,a)),_=zc(_,m))}return r.dirs&&(_=zc(_),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),g=_,dm(y),g}const hW=e=>{let t;for(const r in e)(r==="class"||r==="style"||T1(r))&&((t||(t={}))[r]=e[r]);return t},dW=(e,t)=>{const r={};for(const n in e)(!qT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function pW(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?jC(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!x1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?jC(n,a,u):!0:!!a;return!1}function jC(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!x1(r,o))return!0}return!1}function vW({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const gW=e=>e.__isSuspense;function mW(e,t){t&&t.pendingBranch?Bt(e)?t.effects.push(...e):t.effects.push(e):cW(e)}function Cg(e,t){if(cr){let r=cr.provides;const n=cr.parent&&cr.parent.provides;n===r&&(r=cr.provides=Object.create(n)),r[e]=t}}function En(e,t,r=!1){const n=cr||Rr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function WC(e,t){return aP(e,null,t)}const HC={};function go(e,t,r){return aP(e,t,r)}function aP(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Le){const s=cr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=qw(e)):aa(e)?(l=()=>e,n=!0):Bt(e)?(c=!0,u=e.some(m=>aa(m)||qw(m)),l=()=>e.map(m=>{if(He(m))return m.value;if(aa(m))return Cl(m);if(Gt(m))return ms(m,s,2)})):Gt(e)?t?l=()=>ms(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Ci(e,s,3,[h])}:l=Ai,t&&n){const m=l;l=()=>Cl(m())}let f,h=m=>{f=g.onStop=()=>{ms(m,s,4)}};if(Vd)return h=Ai,t?r&&Ci(t,s,3,[l(),c?[]:void 0,h]):l(),Ai;let d=c?[]:HC;const p=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((y,_)=>Dd(y,d[_])):Dd(m,d)))&&(f&&f(),Ci(t,s,3,[m,d===HC?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>sn(p,s&&s.suspense):v=()=>uW(p);const g=new QT(l,v);return t?r?p():d=g.run():i==="post"?sn(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&ZT(s.scope.effects,g)}}function yW(e,t,r){const n=this.proxy,i=fr(e)?e.includes(".")?V8(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=cr;Vc(this);const s=aP(i,o.bind(n),r);return a?Vc(a):Nl(),s}function V8(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Cl(e,t){if(!Qe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Cl(e.value,t);else if(Bt(e))for(let r=0;r<e.length;r++)Cl(e[r],t);else if(nf(e)||Cc(e))e.forEach(r=>{Cl(r,t)});else if(v8(e))for(const r in e)Cl(e[r],t);return e}function sP(e){return Gt(e)?{setup:e,name:e.name}:e}const sd=e=>!!e.type.__asyncLoader,U8=e=>e.type.__isKeepAlive;function _W(e,t){G8(e,"a",t)}function bW(e,t){G8(e,"da",t)}function G8(e,t,r=cr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(I1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)U8(i.parent.vnode)&&wW(n,t,r,i),i=i.parent}}function wW(e,t,r,n){const i=I1(t,e,n,!0);O1(()=>{ZT(n[t],i)},r)}function I1(e,t,r=cr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;af(),Vc(r);const s=Ci(t,r,e,a);return Nl(),sf(),s});return n?i.unshift(o):i.push(o),o}}const wa=e=>(t,r=cr)=>(!Vd||e==="sp")&&I1(e,t,r),SW=wa("bm"),j8=wa("m"),TW=wa("bu"),PW=wa("u"),EW=wa("bum"),O1=wa("um"),AW=wa("sp"),CW=wa("rtg"),MW=wa("rtc");function kW(e,t=cr){I1("ec",e,t)}function Tt(e,t){const r=Rr;if(r===null)return e;const n=D1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Le]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&Cl(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function Gs(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(af(),Ci(l,r,8,[e.el,s,e,t]),sf())}}const W8="components";function de(e,t){return LW(W8,e,!0,t)||e}const xW=Symbol();function LW(e,t,r=!0,n=!1){const i=Rr||cr;if(i){const o=i.type;if(e===W8){const s=sH(o,!1);if(s&&(s===t||s===To(t)||s===E1(To(t))))return o}const a=XC(i[e]||o[e],t)||XC(i.appContext[e],t);return!a&&n?o:a}}function XC(e,t){return e&&(e[t]||e[To(t)]||e[E1(To(t))])}function Nt(e,t,r,n){let i;const o=r&&r[n];if(Bt(e)||fr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Qe(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function IW(e,t,r={},n,i){if(Rr.isCE||Rr.parent&&sd(Rr.parent)&&Rr.parent.isCE)return kt("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),O();const a=o&&H8(o(r)),s=fa(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function H8(e){return e.some(t=>gm(t)?!(t.type===Ps||t.type===W&&!H8(t.children)):!0)?e:null}const Qw=e=>e?i7(e)?D1(e)||e.proxy:Qw(e.parent):null,pm=Zr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qw(e.parent),$root:e=>Qw(e.root),$emit:e=>e.emit,$options:e=>Y8(e),$forceUpdate:e=>e.f||(e.f=()=>D8(e.update)),$nextTick:e=>e.n||(e.n=Bd.bind(e.proxy)),$watch:e=>yW.bind(e)}),OW={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&ae(n,t))return a[t]=1,n[t];if(i!==Le&&ae(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&ae(u,t))return a[t]=3,o[t];if(r!==Le&&ae(r,t))return a[t]=4,r[t];tS&&(a[t]=0)}}const c=pm[t];let f,h;if(c)return t==="$attrs"&&Mn(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Le&&ae(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,ae(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&ae(i,t)?(i[t]=r,!0):n!==Le&&ae(n,t)?(n[t]=r,!0):ae(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Le&&ae(e,a)||t!==Le&&ae(t,a)||(s=o[0])&&ae(s,a)||ae(n,a)||ae(pm,a)||ae(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:ae(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let tS=!0;function RW(e){const t=Y8(e),r=e.proxy,n=e.ctx;tS=!1,t.beforeCreate&&YC(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:w,render:T,renderTracked:S,renderTriggered:P,errorCaptured:C,serverPrefetch:A,expose:M,inheritAttrs:k,components:R,directives:B,filters:z}=t;if(u&&DW(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);Qe(Z)&&(e.data=lf(Z))}if(tS=!0,o)for(const Z in o){const q=o[Z],tt=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):Ai,Pt=!Gt(q)&&Gt(q.set)?q.set.bind(r):Ai,Ot=Ye({get:tt,set:Pt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:bt=>Ot.value=bt})}if(s)for(const Z in s)X8(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Cg(q,Z[q])})}c&&YC(c,e,"c");function j(Z,q){Bt(q)?q.forEach(tt=>Z(tt.bind(r))):q&&Z(q.bind(r))}if(j(SW,f),j(j8,h),j(TW,d),j(PW,p),j(_W,v),j(bW,g),j(kW,C),j(MW,S),j(CW,P),j(EW,y),j(O1,w),j(AW,A),Bt(M))if(M.length){const Z=e.exposed||(e.exposed={});M.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:tt=>r[q]=tt})})}else e.exposed||(e.exposed={});T&&e.render===Ai&&(e.render=T),k!=null&&(e.inheritAttrs=k),R&&(e.components=R),B&&(e.directives=B)}function DW(e,t,r=Ai,n=!1){Bt(e)&&(e=eS(e));for(const i in e){const o=e[i];let a;Qe(o)?"default"in o?a=En(o.from||i,o.default,!0):a=En(o.from||i):a=En(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function YC(e,t,r){Ci(Bt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function X8(e,t,r,n){const i=n.includes(".")?V8(r,n):()=>r[n];if(fr(e)){const o=t[e];Gt(o)&&go(i,o)}else if(Gt(e))go(i,e.bind(r));else if(Qe(e))if(Bt(e))e.forEach(o=>X8(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&go(i,o,e)}}function Y8(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>vm(l,u,a,!0)),vm(l,t,a)),o.set(t,l),l}function vm(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&vm(e,o,r,!0),i&&i.forEach(a=>vm(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=NW[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const NW={data:qC,props:_l,emits:_l,methods:_l,computed:_l,beforeCreate:Gr,created:Gr,beforeMount:Gr,mounted:Gr,beforeUpdate:Gr,updated:Gr,beforeDestroy:Gr,beforeUnmount:Gr,destroyed:Gr,unmounted:Gr,activated:Gr,deactivated:Gr,errorCaptured:Gr,serverPrefetch:Gr,components:_l,directives:_l,watch:BW,provide:qC,inject:FW};function qC(e,t){return t?e?function(){return Zr(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function FW(e,t){return _l(eS(e),eS(t))}function eS(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Gr(e,t){return e?[...new Set([].concat(e,t))]:t}function _l(e,t){return e?Zr(Zr(Object.create(null),e),t):t}function BW(e,t){if(!e)return t;if(!t)return e;const r=Zr(Object.create(null),e);for(const n in t)r[n]=Gr(e[n],t[n]);return r}function $W(e,t,r,n=!1){const i={},o={};cm(o,R1,1),e.propsDefaults=Object.create(null),q8(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:tW(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function zW(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=ce(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(x1(e.emitsOptions,h))continue;const d=t[h];if(l)if(ae(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=To(h);i[p]=rS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{q8(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!ae(t,f)&&((c=of(f))===f||!ae(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=rS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!ae(t,f)&&!0)&&(delete o[f],u=!0)}u&&ca(e,"set","$attrs")}function q8(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Tg(l))continue;const u=t[l];let c;i&&ae(i,c=To(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:x1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=ce(r),u=s||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=rS(i,l,f,u[f],e,!ae(u,f))}}return a}function rS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=ae(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(Vc(i),n=u[r]=l.call(null,t),Nl())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===of(r))&&(n=!0))}return n}function Z8(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=Z8(f,t,!0);Zr(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Ac),Ac;if(Bt(o))for(let c=0;c<o.length;c++){const f=To(o[c]);ZC(f)&&(a[f]=Le)}else if(o)for(const c in o){const f=To(c);if(ZC(f)){const h=o[c],d=a[f]=Bt(h)||Gt(h)?{type:h}:h;if(d){const p=QC(Boolean,d.type),v=QC(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||ae(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function ZC(e){return e[0]!=="$"}function KC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function JC(e,t){return KC(e)===KC(t)}function QC(e,t){return Bt(t)?t.findIndex(r=>JC(r,e)):Gt(t)&&JC(t,e)?0:-1}const K8=e=>e[0]==="_"||e==="$stable",lP=e=>Bt(e)?e.map(co):[co(e)],VW=(e,t,r)=>{if(t._n)return t;const n=Ee((...i)=>lP(t(...i)),r);return n._c=!1,n},J8=(e,t,r)=>{const n=e._ctx;for(const i in e){if(K8(i))continue;const o=e[i];if(Gt(o))t[i]=VW(i,o,n);else if(o!=null){const a=lP(o);t[i]=()=>a}}},Q8=(e,t)=>{const r=lP(t);e.slots.default=()=>r},UW=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=ce(t),cm(t,"_",r)):J8(t,e.slots={})}else e.slots={},t&&Q8(e,t);cm(e.slots,R1,1)},GW=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Le;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(Zr(i,t),!r&&s===1&&delete i._):(o=!t.$stable,J8(t,i)),a=t}else t&&(Q8(e,t),a={default:1});if(o)for(const s in i)!K8(s)&&!(s in a)&&delete i[s]};function t7(){return{app:null,config:{isNativeTag:wj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jW=0;function WW(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!Qe(i)&&(i=null);const o=t7(),a=new Set;let s=!1;const l=o.app={_uid:jW++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:uH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=kt(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,D1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function nS(e,t,r,n,i=!1){if(Bt(e)){e.forEach((h,d)=>nS(h,t&&(Bt(t)?t[d]:t),r,n,i));return}if(sd(n)&&!i)return;const o=n.shapeFlag&4?D1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Le?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(fr(u)?(c[u]=null,ae(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))ms(l,s,12,[a,c]);else{const h=fr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Bt(v)&&ZT(v,o):Bt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],ae(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,ae(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,sn(p,r)):p()}}}const sn=mW;function HW(e){return XW(e)}function XW(e,t){const r=Cj();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ai,cloneNode:p,insertStaticContent:v}=e,g=($,G,X,J=null,Q=null,lt=null,vt=!1,at=null,it=!!G.dynamicChildren)=>{if($===G)return;$&&!jf($,G)&&(J=pt($),wt($,Q,lt,!0),$=null),G.patchFlag===-2&&(it=!1,G.dynamicChildren=null);const{type:rt,ref:Rt,shapeFlag:Mt}=G;switch(rt){case uP:m($,G,X,J);break;case Ps:y($,G,X,J);break;case Mg:$==null&&_(G,X,J,vt);break;case W:B($,G,X,J,Q,lt,vt,at,it);break;default:Mt&1?S($,G,X,J,Q,lt,vt,at,it):Mt&6?z($,G,X,J,Q,lt,vt,at,it):(Mt&64||Mt&128)&&rt.process($,G,X,J,Q,lt,vt,at,it,At)}Rt!=null&&Q&&nS(Rt,$&&$.ref,lt,G||$,!G)},m=($,G,X,J)=>{if($==null)n(G.el=s(G.children),X,J);else{const Q=G.el=$.el;G.children!==$.children&&u(Q,G.children)}},y=($,G,X,J)=>{$==null?n(G.el=l(G.children||""),X,J):G.el=$.el},_=($,G,X,J)=>{[$.el,$.anchor]=v($.children,G,X,J,$.el,$.anchor)},w=({el:$,anchor:G},X,J)=>{let Q;for(;$&&$!==G;)Q=h($),n($,X,J),$=Q;n(G,X,J)},T=({el:$,anchor:G})=>{let X;for(;$&&$!==G;)X=h($),i($),$=X;i(G)},S=($,G,X,J,Q,lt,vt,at,it)=>{vt=vt||G.type==="svg",$==null?P(G,X,J,Q,lt,vt,at,it):M($,G,Q,lt,vt,at,it)},P=($,G,X,J,Q,lt,vt,at)=>{let it,rt;const{type:Rt,props:Mt,shapeFlag:Dt,transition:$t,patchFlag:Kt,dirs:ge}=$;if($.el&&p!==void 0&&Kt===-1)it=$.el=p($.el);else{if(it=$.el=a($.type,lt,Mt&&Mt.is,Mt),Dt&8?c(it,$.children):Dt&16&&A($.children,it,null,J,Q,lt&&Rt!=="foreignObject",vt,at),ge&&Gs($,null,J,"created"),Mt){for(const Te in Mt)Te!=="value"&&!Tg(Te)&&o(it,Te,null,Mt[Te],lt,$.children,J,Q,K);"value"in Mt&&o(it,"value",null,Mt.value),(rt=Mt.onVnodeBeforeMount)&&Hi(rt,J,$)}C(it,$,$.scopeId,vt,J)}ge&&Gs($,null,J,"beforeMount");const me=(!Q||Q&&!Q.pendingBranch)&&$t&&!$t.persisted;me&&$t.beforeEnter(it),n(it,G,X),((rt=Mt&&Mt.onVnodeMounted)||me||ge)&&sn(()=>{rt&&Hi(rt,J,$),me&&$t.enter(it),ge&&Gs($,null,J,"mounted")},Q)},C=($,G,X,J,Q)=>{if(X&&d($,X),J)for(let lt=0;lt<J.length;lt++)d($,J[lt]);if(Q){let lt=Q.subTree;if(G===lt){const vt=Q.vnode;C($,vt,vt.scopeId,vt.slotScopeIds,Q.parent)}}},A=($,G,X,J,Q,lt,vt,at,it=0)=>{for(let rt=it;rt<$.length;rt++){const Rt=$[rt]=at?as($[rt]):co($[rt]);g(null,Rt,G,X,J,Q,lt,vt,at)}},M=($,G,X,J,Q,lt,vt)=>{const at=G.el=$.el;let{patchFlag:it,dynamicChildren:rt,dirs:Rt}=G;it|=$.patchFlag&16;const Mt=$.props||Le,Dt=G.props||Le;let $t;X&&js(X,!1),($t=Dt.onVnodeBeforeUpdate)&&Hi($t,X,G,$),Rt&&Gs(G,$,X,"beforeUpdate"),X&&js(X,!0);const Kt=Q&&G.type!=="foreignObject";if(rt?k($.dynamicChildren,rt,at,X,J,Kt,lt):vt||tt($,G,at,null,X,J,Kt,lt,!1),it>0){if(it&16)R(at,G,Mt,Dt,X,J,Q);else if(it&2&&Mt.class!==Dt.class&&o(at,"class",null,Dt.class,Q),it&4&&o(at,"style",Mt.style,Dt.style,Q),it&8){const ge=G.dynamicProps;for(let me=0;me<ge.length;me++){const Te=ge[me],Pr=Mt[Te],Gi=Dt[Te];(Gi!==Pr||Te==="value")&&o(at,Te,Pr,Gi,Q,$.children,X,J,K)}}it&1&&$.children!==G.children&&c(at,G.children)}else!vt&&rt==null&&R(at,G,Mt,Dt,X,J,Q);(($t=Dt.onVnodeUpdated)||Rt)&&sn(()=>{$t&&Hi($t,X,G,$),Rt&&Gs(G,$,X,"updated")},J)},k=($,G,X,J,Q,lt,vt)=>{for(let at=0;at<G.length;at++){const it=$[at],rt=G[at],Rt=it.el&&(it.type===W||!jf(it,rt)||it.shapeFlag&70)?f(it.el):X;g(it,rt,Rt,null,J,Q,lt,vt,!0)}},R=($,G,X,J,Q,lt,vt)=>{if(X!==J){for(const at in J){if(Tg(at))continue;const it=J[at],rt=X[at];it!==rt&&at!=="value"&&o($,at,rt,it,vt,G.children,Q,lt,K)}if(X!==Le)for(const at in X)!Tg(at)&&!(at in J)&&o($,at,X[at],null,vt,G.children,Q,lt,K);"value"in J&&o($,"value",X.value,J.value)}},B=($,G,X,J,Q,lt,vt,at,it)=>{const rt=G.el=$?$.el:s(""),Rt=G.anchor=$?$.anchor:s("");let{patchFlag:Mt,dynamicChildren:Dt,slotScopeIds:$t}=G;$t&&(at=at?at.concat($t):$t),$==null?(n(rt,X,J),n(Rt,X,J),A(G.children,X,Rt,Q,lt,vt,at,it)):Mt>0&&Mt&64&&Dt&&$.dynamicChildren?(k($.dynamicChildren,Dt,X,Q,lt,vt,at),(G.key!=null||Q&&G===Q.subTree)&&e7($,G,!0)):tt($,G,X,Rt,Q,lt,vt,at,it)},z=($,G,X,J,Q,lt,vt,at,it)=>{G.slotScopeIds=at,$==null?G.shapeFlag&512?Q.ctx.activate(G,X,J,vt,it):N(G,X,J,Q,lt,vt,it):j($,G,it)},N=($,G,X,J,Q,lt,vt)=>{const at=$.component=rH($,J,Q);if(U8($)&&(at.ctx.renderer=At),nH(at),at.asyncDep){if(Q&&Q.registerDep(at,Z),!$.el){const it=at.subTree=kt(Ps);y(null,it,G,X)}return}Z(at,$,G,X,Q,lt,vt)},j=($,G,X)=>{const J=G.component=$.component;if(pW($,G,X))if(J.asyncDep&&!J.asyncResolved){q(J,G,X);return}else J.next=G,lW(J.update),J.update();else G.el=$.el,J.vnode=G},Z=($,G,X,J,Q,lt,vt)=>{const at=()=>{if($.isMounted){let{next:Rt,bu:Mt,u:Dt,parent:$t,vnode:Kt}=$,ge=Rt,me;js($,!1),Rt?(Rt.el=Kt.el,q($,Rt,vt)):Rt=Kt,Mt&&Pg(Mt),(me=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&Hi(me,$t,Rt,Kt),js($,!0);const Te=u_($),Pr=$.subTree;$.subTree=Te,g(Pr,Te,f(Pr.el),pt(Pr),$,Q,lt),Rt.el=Te.el,ge===null&&vW($,Te.el),Dt&&sn(Dt,Q),(me=Rt.props&&Rt.props.onVnodeUpdated)&&sn(()=>Hi(me,$t,Rt,Kt),Q)}else{let Rt;const{el:Mt,props:Dt}=G,{bm:$t,m:Kt,parent:ge}=$,me=sd(G);if(js($,!1),$t&&Pg($t),!me&&(Rt=Dt&&Dt.onVnodeBeforeMount)&&Hi(Rt,ge,G),js($,!0),Mt&&ft){const Te=()=>{$.subTree=u_($),ft(Mt,$.subTree,$,Q,null)};me?G.type.__asyncLoader().then(()=>!$.isUnmounted&&Te()):Te()}else{const Te=$.subTree=u_($);g(null,Te,X,J,$,Q,lt),G.el=Te.el}if(Kt&&sn(Kt,Q),!me&&(Rt=Dt&&Dt.onVnodeMounted)){const Te=G;sn(()=>Hi(Rt,ge,Te),Q)}(G.shapeFlag&256||ge&&sd(ge.vnode)&&ge.vnode.shapeFlag&256)&&$.a&&sn($.a,Q),$.isMounted=!0,G=X=J=null}},it=$.effect=new QT(at,()=>D8(rt),$.scope),rt=$.update=()=>it.run();rt.id=$.uid,js($,!0),rt()},q=($,G,X)=>{G.component=$;const J=$.vnode.props;$.vnode=G,$.next=null,zW($,G.props,J,X),GW($,G.children,X),af(),k1(void 0,$.update),sf()},tt=($,G,X,J,Q,lt,vt,at,it=!1)=>{const rt=$&&$.children,Rt=$?$.shapeFlag:0,Mt=G.children,{patchFlag:Dt,shapeFlag:$t}=G;if(Dt>0){if(Dt&128){Ot(rt,Mt,X,J,Q,lt,vt,at,it);return}else if(Dt&256){Pt(rt,Mt,X,J,Q,lt,vt,at,it);return}}$t&8?(Rt&16&&K(rt,Q,lt),Mt!==rt&&c(X,Mt)):Rt&16?$t&16?Ot(rt,Mt,X,J,Q,lt,vt,at,it):K(rt,Q,lt,!0):(Rt&8&&c(X,""),$t&16&&A(Mt,X,J,Q,lt,vt,at,it))},Pt=($,G,X,J,Q,lt,vt,at,it)=>{$=$||Ac,G=G||Ac;const rt=$.length,Rt=G.length,Mt=Math.min(rt,Rt);let Dt;for(Dt=0;Dt<Mt;Dt++){const $t=G[Dt]=it?as(G[Dt]):co(G[Dt]);g($[Dt],$t,X,null,Q,lt,vt,at,it)}rt>Rt?K($,Q,lt,!0,!1,Mt):A(G,X,J,Q,lt,vt,at,it,Mt)},Ot=($,G,X,J,Q,lt,vt,at,it)=>{let rt=0;const Rt=G.length;let Mt=$.length-1,Dt=Rt-1;for(;rt<=Mt&&rt<=Dt;){const $t=$[rt],Kt=G[rt]=it?as(G[rt]):co(G[rt]);if(jf($t,Kt))g($t,Kt,X,null,Q,lt,vt,at,it);else break;rt++}for(;rt<=Mt&&rt<=Dt;){const $t=$[Mt],Kt=G[Dt]=it?as(G[Dt]):co(G[Dt]);if(jf($t,Kt))g($t,Kt,X,null,Q,lt,vt,at,it);else break;Mt--,Dt--}if(rt>Mt){if(rt<=Dt){const $t=Dt+1,Kt=$t<Rt?G[$t].el:J;for(;rt<=Dt;)g(null,G[rt]=it?as(G[rt]):co(G[rt]),X,Kt,Q,lt,vt,at,it),rt++}}else if(rt>Dt)for(;rt<=Mt;)wt($[rt],Q,lt,!0),rt++;else{const $t=rt,Kt=rt,ge=new Map;for(rt=Kt;rt<=Dt;rt++){const Vr=G[rt]=it?as(G[rt]):co(G[rt]);Vr.key!=null&&ge.set(Vr.key,rt)}let me,Te=0;const Pr=Dt-Kt+1;let Gi=!1,op=0;const zs=new Array(Pr);for(rt=0;rt<Pr;rt++)zs[rt]=0;for(rt=$t;rt<=Mt;rt++){const Vr=$[rt];if(Te>=Pr){wt(Vr,Q,lt,!0);continue}let In;if(Vr.key!=null)In=ge.get(Vr.key);else for(me=Kt;me<=Dt;me++)if(zs[me-Kt]===0&&jf(Vr,G[me])){In=me;break}In===void 0?wt(Vr,Q,lt,!0):(zs[In-Kt]=rt+1,In>=op?op=In:Gi=!0,g(Vr,G[In],X,null,Q,lt,vt,at,it),Te++)}const ap=Gi?YW(zs):Ac;for(me=ap.length-1,rt=Pr-1;rt>=0;rt--){const Vr=Kt+rt,In=G[Vr],Vs=Vr+1<Rt?G[Vr+1].el:J;zs[rt]===0?g(null,In,X,Vs,Q,lt,vt,at,it):Gi&&(me<0||rt!==ap[me]?bt(In,X,Vs,2):me--)}}},bt=($,G,X,J,Q=null)=>{const{el:lt,type:vt,transition:at,children:it,shapeFlag:rt}=$;if(rt&6){bt($.component.subTree,G,X,J);return}if(rt&128){$.suspense.move(G,X,J);return}if(rt&64){vt.move($,G,X,At);return}if(vt===W){n(lt,G,X);for(let Mt=0;Mt<it.length;Mt++)bt(it[Mt],G,X,J);n($.anchor,G,X);return}if(vt===Mg){w($,G,X);return}if(J!==2&&rt&1&&at)if(J===0)at.beforeEnter(lt),n(lt,G,X),sn(()=>at.enter(lt),Q);else{const{leave:Mt,delayLeave:Dt,afterLeave:$t}=at,Kt=()=>n(lt,G,X),ge=()=>{Mt(lt,()=>{Kt(),$t&&$t()})};Dt?Dt(lt,Kt,ge):ge()}else n(lt,G,X)},wt=($,G,X,J=!1,Q=!1)=>{const{type:lt,props:vt,ref:at,children:it,dynamicChildren:rt,shapeFlag:Rt,patchFlag:Mt,dirs:Dt}=$;if(at!=null&&nS(at,null,X,$,!0),Rt&256){G.ctx.deactivate($);return}const $t=Rt&1&&Dt,Kt=!sd($);let ge;if(Kt&&(ge=vt&&vt.onVnodeBeforeUnmount)&&Hi(ge,G,$),Rt&6)nt($.component,X,J);else{if(Rt&128){$.suspense.unmount(X,J);return}$t&&Gs($,null,G,"beforeUnmount"),Rt&64?$.type.remove($,G,X,Q,At,J):rt&&(lt!==W||Mt>0&&Mt&64)?K(rt,G,X,!1,!0):(lt===W&&Mt&384||!Q&&Rt&16)&&K(it,G,X),J&&Ht($)}(Kt&&(ge=vt&&vt.onVnodeUnmounted)||$t)&&sn(()=>{ge&&Hi(ge,G,$),$t&&Gs($,null,G,"unmounted")},X)},Ht=$=>{const{type:G,el:X,anchor:J,transition:Q}=$;if(G===W){Y(X,J);return}if(G===Mg){T($);return}const lt=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if($.shapeFlag&1&&Q&&!Q.persisted){const{leave:vt,delayLeave:at}=Q,it=()=>vt(X,lt);at?at($.el,lt,it):it()}else lt()},Y=($,G)=>{let X;for(;$!==G;)X=h($),i($),$=X;i(G)},nt=($,G,X)=>{const{bum:J,scope:Q,update:lt,subTree:vt,um:at}=$;J&&Pg(J),Q.stop(),lt&&(lt.active=!1,wt(vt,$,G,X)),at&&sn(at,G),sn(()=>{$.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},K=($,G,X,J=!1,Q=!1,lt=0)=>{for(let vt=lt;vt<$.length;vt++)wt($[vt],G,X,J,Q)},pt=$=>$.shapeFlag&6?pt($.component.subTree):$.shapeFlag&128?$.suspense.next():h($.anchor||$.el),St=($,G,X)=>{$==null?G._vnode&&wt(G._vnode,null,null,!0):g(G._vnode||null,$,G,null,null,null,X),B8(),G._vnode=$},At={p:g,um:wt,m:bt,r:Ht,mt:N,mc:A,pc:tt,pbc:k,n:pt,o:e};let st,ft;return t&&([st,ft]=t(At)),{render:St,hydrate:st,createApp:WW(St,st)}}function js({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function e7(e,t,r=!1){const n=e.children,i=t.children;if(Bt(n)&&Bt(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=as(i[o]),s.el=a.el),r||e7(a,s))}}function YW(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const qW=e=>e.__isTeleport,W=Symbol(void 0),uP=Symbol(void 0),Ps=Symbol(void 0),Mg=Symbol(void 0),ld=[];let bi=null;function O(e=!1){ld.push(bi=e?null:[])}function ZW(){ld.pop(),bi=ld[ld.length-1]||null}let zd=1;function tM(e){zd+=e}function r7(e){return e.dynamicChildren=zd>0?bi||Ac:null,ZW(),zd>0&&bi&&bi.push(e),e}function D(e,t,r,n,i,o){return r7(b(e,t,r,n,i,o,!0))}function fa(e,t,r,n,i){return r7(kt(e,t,r,n,i,!0))}function gm(e){return e?e.__v_isVNode===!0:!1}function jf(e,t){return e.type===t.type&&e.key===t.key}const R1="__vInternal",n7=({key:e})=>e!=null?e:null,kg=({ref:e,ref_key:t,ref_for:r})=>e!=null?fr(e)||He(e)||Gt(e)?{i:Rr,r:e,k:t,f:!!r}:e:null;function b(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&n7(t),ref:t&&kg(t),scopeId:L1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(fP(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=fr(r)?8:16),zd>0&&!a&&bi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&bi.push(l),l}const kt=KW;function KW(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===xW)&&(e=Ps),gm(e)){const s=zc(e,t,!0);return r&&fP(s,r),zd>0&&!o&&bi&&(s.shapeFlag&6?bi[bi.indexOf(e)]=s:bi.push(s)),s.patchFlag|=-2,s}if(lH(e)&&(e=e.__vccOpts),t){t=JW(t);let{class:s,style:l}=t;s&&!fr(s)&&(t.class=Yr(s)),Qe(l)&&(k8(l)&&!Bt(l)&&(l=Zr({},l)),t.style=Rl(l))}const a=fr(e)?1:gW(e)?128:qW(e)?64:Qe(e)?4:Gt(e)?2:0;return b(e,t,r,n,i,a,o,!0)}function JW(e){return e?k8(e)||R1 in e?Zr({},e):e:null}function zc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?QW(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&n7(s),ref:t&&t.ref?r&&i?Bt(i)?i.concat(kg(t)):[i,kg(t)]:kg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zc(e.ssContent),ssFallback:e.ssFallback&&zc(e.ssFallback),el:e.el,anchor:e.anchor}}function U(e=" ",t=0){return kt(uP,null,e,t)}function cP(e,t){const r=kt(Mg,null,e);return r.staticCount=t,r}function ut(e="",t=!1){return t?(O(),fa(Ps,null,e)):kt(Ps,null,e)}function co(e){return e==null||typeof e=="boolean"?kt(Ps):Bt(e)?kt(W,null,e.slice()):typeof e=="object"?as(e):kt(uP,null,String(e))}function as(e){return e.el===null||e.memo?e:zc(e)}function fP(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Bt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),fP(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(R1 in t)?t._ctx=Rr:i===3&&Rr&&(Rr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Rr},r=32):(t=String(t),n&64?(r=16,t=[U(t)]):r=8);e.children=t,e.shapeFlag|=r}function QW(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Yr([t.class,n.class]));else if(i==="style")t.style=Rl([t.style,n.style]);else if(T1(i)){const o=t[i],a=n[i];a&&o!==a&&!(Bt(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Hi(e,t,r,n=null){Ci(e,t,7,[r,n])}const tH=t7();let eH=0;function rH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||tH,o={uid:eH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new g8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Z8(n,i),emitsOptions:z8(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=fW.bind(null,o),e.ce&&e.ce(o),o}let cr=null;const hP=()=>cr||Rr,Vc=e=>{cr=e,e.scope.on()},Nl=()=>{cr&&cr.scope.off(),cr=null};function i7(e){return e.vnode.shapeFlag&4}let Vd=!1;function nH(e,t=!1){Vd=t;const{props:r,children:n}=e.vnode,i=i7(e);$W(e,r,i,t),UW(e,n);const o=i?iH(e,t):void 0;return Vd=!1,o}function iH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=mi(new Proxy(e.ctx,OW));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?aH(e):null;Vc(e),af();const o=ms(n,e,0,[e.props,i]);if(sf(),Nl(),d8(o)){if(o.then(Nl,Nl),t)return o.then(a=>{eM(e,a,t)}).catch(a=>{M1(a,e,0)});e.asyncDep=o}else eM(e,o,t)}else o7(e,t)}function eM(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=O8(t)),o7(e,r)}let rM;function o7(e,t,r){const n=e.type;if(!e.render){if(!t&&rM&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Zr(Zr({isCustomElement:o,delimiters:s},a),l);n.render=rM(i,u)}}e.render=n.render||Ai}Vc(e),af(),RW(e),sf(),Nl()}function oH(e){return new Proxy(e.attrs,{get(t,r){return Mn(e,"get","$attrs"),t[r]}})}function aH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=oH(e))},slots:e.slots,emit:e.emit,expose:t}}function D1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(O8(mi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in pm)return pm[r](e)}}))}function sH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function lH(e){return Gt(e)&&"__vccOpts"in e}const Ye=(e,t)=>oW(e,t,Vd);function dP(e,t,r){const n=arguments.length;return n===2?Qe(t)&&!Bt(t)?gm(t)?kt(e,null,[t]):kt(e,t):kt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&gm(r)&&(r=[r]),kt(e,t,r))}const uH="3.2.37",cH="http://www.w3.org/2000/svg",Pl=typeof document<"u"?document:null,nM=Pl&&Pl.createElement("template"),fH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Pl.createElementNS(cH,e):Pl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Pl.createTextNode(e),createComment:e=>Pl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{nM.innerHTML=n?`<svg>${e}</svg>`:e;const s=nM.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function hH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function dH(e,t,r){const n=e.style,i=fr(r);if(r&&!i){for(const o in r)iS(n,o,r[o]);if(t&&!fr(t))for(const o in t)r[o]==null&&iS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const iM=/\s*!important$/;function iS(e,t,r){if(Bt(r))r.forEach(n=>iS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=pH(e,t);iM.test(r)?e.setProperty(of(n),r.replace(iM,""),"important"):e[n]=r}}const oM=["Webkit","Moz","ms"],c_={};function pH(e,t){const r=c_[t];if(r)return r;let n=To(t);if(n!=="filter"&&n in e)return c_[t]=n;n=E1(n);for(let i=0;i<oM.length;i++){const o=oM[i]+n;if(o in e)return c_[t]=o}return t}const aM="http://www.w3.org/1999/xlink";function vH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(aM,t.slice(6,t.length)):e.setAttributeNS(aM,t,r);else{const o=gj(t);r==null||o&&!f8(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function gH(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=f8(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[a7,mH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let oS=0;const yH=Promise.resolve(),_H=()=>{oS=0},bH=()=>oS||(yH.then(_H),oS=a7());function ea(e,t,r,n){e.addEventListener(t,r,n)}function wH(e,t,r,n){e.removeEventListener(t,r,n)}function SH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=TH(t);if(n){const u=o[t]=PH(n,i);ea(e,s,u,l)}else a&&(wH(e,s,a,l),o[t]=void 0)}}const sM=/(?:Once|Passive|Capture)$/;function TH(e){let t;if(sM.test(e)){t={};let r;for(;r=e.match(sM);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[of(e.slice(2)),t]}function PH(e,t){const r=n=>{const i=n.timeStamp||a7();(mH||i>=r.attached-1)&&Ci(EH(n,r.value),t,5,[n])};return r.value=e,r.attached=bH(),r}function EH(e,t){if(Bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const lM=/^on[a-z]/,AH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?hH(e,n,i):t==="style"?dH(e,r,n):T1(t)?qT(t)||SH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):CH(e,t,n,i))?gH(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),vH(e,t,n,i))};function CH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&lM.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||lM.test(t)&&fr(r)?!1:t in e}const Es=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Bt(t)?r=>Pg(t,r):t};function MH(e){e.target.composing=!0}function uM(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pe={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Es(i);const o=n||i.props&&i.props.type==="number";ea(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=fm(s)),e._assign(s)}),r&&ea(e,"change",()=>{e.value=e.value.trim()}),t||(ea(e,"compositionstart",MH),ea(e,"compositionend",uM),ea(e,"change",uM))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Es(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&fm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Kr={deep:!0,created(e,t,r){e._assign=Es(r),ea(e,"change",()=>{const n=e._modelValue,i=Uc(e),o=e.checked,a=e._assign;if(Bt(n)){const s=YT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(nf(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(s7(e,o))})},mounted:cM,beforeUpdate(e,t,r){e._assign=Es(r),cM(e,t,r)}};function cM(e,{value:t,oldValue:r},n){e._modelValue=t,Bt(t)?e.checked=YT(t,n.props.value)>-1:nf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Hl(t,s7(e,!0)))}const ud={created(e,{value:t},r){e.checked=Hl(t,r.props.value),e._assign=Es(r),ea(e,"change",()=>{e._assign(Uc(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Es(n),t!==r&&(e.checked=Hl(t,n.props.value))}},cn={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=nf(t);ea(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?fm(Uc(a)):Uc(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Es(n)},mounted(e,{value:t}){fM(e,t)},beforeUpdate(e,t,r){e._assign=Es(r)},updated(e,{value:t}){fM(e,t)}};function fM(e,t){const r=e.multiple;if(!(r&&!Bt(t)&&!nf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=Uc(o);if(r)Bt(t)?o.selected=YT(t,a)>-1:o.selected=t.has(a);else if(Hl(Uc(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Uc(e){return"_value"in e?e._value:e.value}function s7(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const kH=["ctrl","shift","alt","meta"],xH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>kH.some(r=>e[`${r}Key`]&&!t.includes(r))},mm=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=xH[t[i]];if(o&&o(r,t))return}return e(r,...n)},LH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Wf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Wf(e,!0),n.enter(e)):n.leave(e,()=>{Wf(e,!1)}):Wf(e,t))},beforeUnmount(e,{value:t}){Wf(e,t)}};function Wf(e,t){e.style.display=t?e._vod:"none"}const IH=Zr({patchProp:AH},fH);let hM;function OH(){return hM||(hM=HW(IH))}const RH=(...e)=>{const t=OH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=DH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function DH(e){return fr(e)?document.querySelector(e):e}var NH=!1;function yp(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function f_(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function FH(){return l7().__VUE_DEVTOOLS_GLOBAL_HOOK__}function l7(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const BH=typeof Proxy=="function",$H="devtools-plugin:setup",zH="plugin:settings:set";let Cu,aS;function VH(){var e;return Cu!==void 0||(typeof window<"u"&&window.performance?(Cu=!0,aS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Cu=!0,aS=global.perf_hooks.performance):Cu=!1),Cu}function UH(){return VH()?aS.now():Date.now()}class GH{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return UH()}},r&&r.on(zH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function u7(e,t){const r=e,n=l7(),i=FH(),o=BH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit($H,e,t);else{const a=o?new GH(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let sS;const Ud=e=>sS=e,c7=Symbol("pinia");function Xl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var bo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(bo||(bo={}));const ls=typeof window<"u",dM=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function jH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function pP(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){d7(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function f7(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function xg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Lg=typeof navigator=="object"?navigator:{userAgent:""},h7=(()=>/Macintosh/.test(Lg.userAgent)&&/AppleWebKit/.test(Lg.userAgent)&&!/Safari/.test(Lg.userAgent))(),d7=ls?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!h7?WH:"msSaveOrOpenBlob"in Lg?HH:XH:()=>{};function WH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?f7(n.href)?pP(e,t,r):(n.target="_blank",xg(n)):xg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){xg(n)},0))}function HH(e,t="download",r){if(typeof e=="string")if(f7(e))pP(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){xg(n)})}else navigator.msSaveOrOpenBlob(jH(e,r),t)}function XH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return pP(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(dM.HTMLElement))||"safari"in dM,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||h7)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function lr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function vP(e){return"_a"in e&&"install"in e}function p7(){if(!("clipboard"in navigator))return lr("Your browser doesn't support the Clipboard API","error"),!0}function v7(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(lr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function YH(e){if(!p7())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),lr("Global state copied to clipboard.")}catch(t){if(v7(t))return;lr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function qH(e){if(!p7())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),lr("Global state pasted from clipboard.")}catch(t){if(v7(t))return;lr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function ZH(e){try{d7(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let $o;function KH(){$o||($o=document.createElement("input"),$o.type="file",$o.accept=".json");function e(){return new Promise((t,r)=>{$o.onchange=async()=>{const n=$o.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},$o.oncancel=()=>t(null),$o.onerror=r,$o.click()})}return e}async function JH(e){try{const r=await(await KH())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),lr(`Global state imported from "${i.name}".`)}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function di(e){return{_custom:{display:e}}}const g7="\u{1F34D} Pinia (root)",lS="_root";function QH(e){return vP(e)?{id:lS,label:g7}:{id:e.$id,label:e.$id}}function tX(e){if(vP(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function eX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:di(e.type),key:di(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function rX(e){switch(e){case bo.direct:return"mutation";case bo.patchFunction:return"$patch";case bo.patchObject:return"$patch";default:return"unknown"}}let pc=!0;const Ig=[],bl="pinia:mutations",Mr="pinia",ym=e=>"\u{1F34D} "+e;function nX(e,t){u7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Ig,app:e},r=>{typeof r.now!="function"&&lr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:bl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Mr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{YH(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await qH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{ZH(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await JH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),lr(`Store "${n}" reset.`)):lr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):lr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:ym(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:ce(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:ym(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Mr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):g7.toLowerCase().includes(n.filter.toLowerCase())):i).map(QH)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Mr){const i=n.nodeId===lS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=tX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Mr){const o=n.nodeId===lS?t:t._s.get(n.nodeId);if(!o)return lr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;vP(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),pc=!1,n.set(o,a,n.state.value),pc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return lr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return lr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",pc=!1,n.set(o,a,n.state.value),pc=!0}})})}function iX(e,t){Ig.includes(ym(t.$id))||Ig.push(ym(t.$id)),u7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Ig,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=m7++;r.addTimelineEvent({layerId:bl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:di(t.$id),action:di(l),args:u},groupId:c}}),a(f=>{El=void 0,r.addTimelineEvent({layerId:bl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:di(t.$id),action:di(l),args:u,result:f},groupId:c}})}),s(f=>{El=void 0,r.addTimelineEvent({layerId:bl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:di(t.$id),action:di(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{go(()=>mr(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Mr),pc&&r.addTimelineEvent({layerId:bl,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:El}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Mr),!pc)return;const u={time:n(),title:rX(s),data:{store:di(t.$id),...eX(a)},groupId:El};El=void 0,s===bo.patchFunction?u.subtitle="\u2935\uFE0F":s===bo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:bl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=mi(a=>{i(a),r.addTimelineEvent({layerId:bl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:di(t.$id),info:di("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`"${t.$id}" store installed \u{1F195}`)})}let m7=0,El;function pM(e,t){const r=t.reduce((n,i)=>(n[i]=ce(e)[i],n),{});for(const n in r)e[n]=function(){const i=m7,o=new Proxy(e,{get(...a){return El=i,Reflect.get(...a)},set(...a){return El=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function oX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){pM(t,Object.keys(r.actions));const n=t._hotUpdate;ce(t)._hotUpdate=function(i){n.apply(this,arguments),pM(t,Object.keys(i._hmrPayload.actions))}}iX(e,t)}}function aX(){const e=m8(!0),t=e.run(()=>C1({}));let r=[],n=[];const i=mi({install(o){Ud(i),i._a=o,o.provide(c7,i),o.config.globalProperties.$pinia=i,ls&&nX(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!NH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return ls&&!0&&typeof Proxy<"u"&&i.use(oX),i}function y7(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];Xl(i)&&Xl(n)&&!He(n)&&!aa(n)?e[r]=y7(i,n):e[r]=n}return e}const sX=()=>{};function vM(e,t,r,n=sX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&hP()&&O1(i),i}function Mu(e,...t){e.slice().forEach(r=>{r(...t)})}function uS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];Xl(i)&&Xl(n)&&e.hasOwnProperty(r)&&!He(n)&&!aa(n)?e[r]=uS(i,n):e[r]=n}return e}const lX=Symbol("pinia:skipHydration");function uX(e){return!Xl(e)||!e.hasOwnProperty(lX)}const{assign:gi}=Object;function gM(e){return!!(He(e)&&e.effect)}function mM(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=Zw(n?C1(i?i():{}).value:r.state.value[e]);return gi(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=mi(Ye(()=>{Ud(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=cS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{gi(h,f)})},l}function cS(e,t,r={},n,i,o){let a;const s=gi({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!P._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=mi([]),h=mi([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=C1({});let g;function m(A){let M;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),M={type:bo.patchFunction,storeId:e,events:d}):(uS(n.state.value[e],A),M={type:bo.patchObject,payload:A,storeId:e,events:d});const k=g=Symbol();Bd().then(()=>{g===k&&(u=!0)}),c=!0,Mu(f,M,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function _(){a.stop(),f=[],h=[],n._s.delete(e)}function w(A,M){return function(){Ud(n);const k=Array.from(arguments),R=[],B=[];function z(Z){R.push(Z)}function N(Z){B.push(Z)}Mu(h,{args:k,name:A,store:P,after:z,onError:N});let j;try{j=M.apply(this&&this.$id===e?this:P,k)}catch(Z){throw Mu(B,Z),Z}return j instanceof Promise?j.then(Z=>(Mu(R,Z),Z)).catch(Z=>(Mu(B,Z),Promise.reject(Z))):(Mu(R,j),j)}}const T=mi({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:vM.bind(null,h),$patch:m,$reset:y,$subscribe(A,M={}){const k=vM(f,A,M.detached,()=>R()),R=a.run(()=>go(()=>n.state.value[e],B=>{(M.flush==="sync"?c:u)&&A({storeId:e,type:bo.direct,events:d},B)},gi({},l,M)));return k},$dispose:_},P=lf(gi(ls?{_customProperties:mi(new Set),_hmrPayload:T}:{},S));n._s.set(e,P);const C=n._e.run(()=>(a=m8(),a.run(()=>t())));for(const A in C){const M=C[A];if(He(M)&&!gM(M)||aa(M))i?yp(v.value,A,Ag(C,A)):o||(p&&uX(M)&&(He(M)?M.value=p[A]:uS(M,p[A])),n.state.value[e][A]=M),T.state.push(A);else if(typeof M=="function"){const k=i?M:w(A,M);C[A]=k,T.actions[A]=M,s.actions[A]=M}else gM(M)&&(T.getters[A]=o?r.getters[A]:M,ls&&(C._getters||(C._getters=mi([]))).push(A))}gi(P,C),gi(ce(P),C),Object.defineProperty(P,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");m(M=>{gi(M,A)})}});{P._hotUpdate=mi(M=>{P._hotUpdating=!0,M._hmrPayload.state.forEach(k=>{if(k in P.$state){const R=M.$state[k],B=P.$state[k];typeof R=="object"&&Xl(R)&&Xl(B)?y7(R,B):M.$state[k]=B}yp(P,k,Ag(M.$state,k))}),Object.keys(P.$state).forEach(k=>{k in M.$state||f_(P,k)}),u=!1,c=!1,n.state.value[e]=Ag(M._hmrPayload,"hotState"),c=!0,Bd().then(()=>{u=!0});for(const k in M._hmrPayload.actions){const R=M[k];yp(P,k,w(k,R))}for(const k in M._hmrPayload.getters){const R=M._hmrPayload.getters[k],B=o?Ye(()=>(Ud(n),R.call(P,P))):R;yp(P,k,B)}Object.keys(P._hmrPayload.getters).forEach(k=>{k in M._hmrPayload.getters||f_(P,k)}),Object.keys(P._hmrPayload.actions).forEach(k=>{k in M._hmrPayload.actions||f_(P,k)}),P._hmrPayload=M._hmrPayload,P._getters=M._getters,P._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};ls&&["_p","_hmrPayload","_getters","_customProperties"].forEach(M=>{Object.defineProperty(P,M,{value:P[M],...A})})}return n._p.forEach(A=>{if(ls){const M=a.run(()=>A({store:P,app:n._a,pinia:n,options:s}));Object.keys(M||{}).forEach(k=>P._customProperties.add(k)),gi(P,M)}else gi(P,a.run(()=>A({store:P,app:n._a,pinia:n,options:s})))}),P.$state&&typeof P.$state=="object"&&typeof P.$state.constructor=="function"&&!P.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${P.$id}".`),p&&o&&r.hydrate&&r.hydrate(P.$state,p),u=!0,c=!0,P}function E0(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=hP();if(s=s||u&&En(c7),s&&Ud(s),!sS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=sS,s._s.has(n)||(o?cS(n,t,i,s):mM(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?cS(f,t,i,s,!0):mM(f,gi({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(ls&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const uc=typeof window<"u";function cX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ce=Object.assign;function h_(e,t){const r={};for(const n in t){const i=t[n];r[n]=Li(i)?i.map(e):e(i)}return r}const cd=()=>{},Li=Array.isArray,fX=/\/$/,hX=e=>e.replace(fX,"");function d_(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=gX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function dX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function yM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function pX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Gc(t.matched[n],r.matched[i])&&_7(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Gc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!vX(e[r],t[r]))return!1;return!0}function vX(e,t){return Li(e)?_M(e,t):Li(t)?_M(t,e):e===t}function _M(e,t){return Li(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function gX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Gd;(function(e){e.pop="pop",e.push="push"})(Gd||(Gd={}));var fd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fd||(fd={}));function mX(e){if(!e)if(uc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),hX(e)}const yX=/^[^#]+#/;function _X(e,t){return e.replace(yX,"#")+t}function bX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const N1=()=>({left:window.pageXOffset,top:window.pageYOffset});function wX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=bX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function bM(e,t){return(history.state?history.state.position-t:-1)+e}const fS=new Map;function SX(e,t){fS.set(e,t)}function TX(e){const t=fS.get(e);return fS.delete(e),t}let PX=()=>location.protocol+"//"+location.host;function b7(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),yM(l,"")}return yM(r,e)+n+i}function EX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=b7(e,location),p=r.value,v=t.value;let g=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:g,type:Gd.pop,direction:g?g>0?fd.forward:fd.back:fd.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ce({},h.state,{scroll:N1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function wM(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?N1():null}}function AX(e){const{history:t,location:r}=window,n={value:b7(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:PX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ce({},t.state,wM(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ce({},i.value,t.state,{forward:l,scroll:N1()});o(c.current,c,!0);const f=Ce({},wM(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function CX(e){e=mX(e);const t=AX(e),r=EX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ce({location:"",base:e,go:n,createHref:_X.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function MX(e){return typeof e=="string"||e&&typeof e=="object"}function w7(e){return typeof e=="string"||typeof e=="symbol"}const Ia={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},S7=Symbol("");var SM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(SM||(SM={}));function jc(e,t){return Ce(new Error,{type:e,[S7]:!0},t)}function zo(e,t){return e instanceof Error&&S7 in e&&(t==null||!!(e.type&t))}const TM="[^/]+?",kX={sensitive:!1,strict:!1,start:!0,end:!0},xX=/[.+*?^${}()[\]/\\]/g;function LX(e,t){const r=Ce({},kX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(xX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;o.push({name:p,repeatable:v,optional:g});const y=m||TM;if(y!==TM){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let _=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),i+=_,d+=20,g&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(Li(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Li(m)?m.join("/"):m;if(!y)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function IX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function OX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=IX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(PM(n))return 1;if(PM(i))return-1}return i.length-n.length}function PM(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const RX={type:0,value:""},DX=/[a-zA-Z0-9_]/;function NX(e){if(!e)return[[]];if(e==="/")return[[RX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:DX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function FX(e,t,r){const n=LX(NX(e.path),r),i=Ce(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function BX(e,t){const r=[],n=new Map;t=AM({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=zX(c);p.aliasOf=h&&h.record;const v=AM(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of _)g.push(Ce({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let m,y;for(const _ of g){const{path:w}=_;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";_.path=f.record.path+(w&&S+w)}if(m=FX(_,f,v),h?h.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),d&&c.name&&!EM(m)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],m,h&&h.children[S])}h=h||m,l(m)}return y?()=>{a(y)}:cd}function a(c){if(w7(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&OX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!T7(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!EM(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw jc(1,{location:c});v=h.record.name,d=Ce($X(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw jc(1,{location:c,currentLocation:f});v=h.record.name,d=Ce({},f.params,c.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:UX(g)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function $X(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function zX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:VX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function VX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function EM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function UX(e){return e.reduce((t,r)=>Ce(t,r.meta),{})}function AM(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function T7(e,t){return t.children.some(r=>r===e||T7(e,r))}const P7=/#/g,GX=/&/g,jX=/\//g,WX=/=/g,HX=/\?/g,E7=/\+/g,XX=/%5B/g,YX=/%5D/g,A7=/%5E/g,qX=/%60/g,C7=/%7B/g,ZX=/%7C/g,M7=/%7D/g,KX=/%20/g;function gP(e){return encodeURI(""+e).replace(ZX,"|").replace(XX,"[").replace(YX,"]")}function JX(e){return gP(e).replace(C7,"{").replace(M7,"}").replace(A7,"^")}function hS(e){return gP(e).replace(E7,"%2B").replace(KX,"+").replace(P7,"%23").replace(GX,"%26").replace(qX,"`").replace(C7,"{").replace(M7,"}").replace(A7,"^")}function QX(e){return hS(e).replace(WX,"%3D")}function tY(e){return gP(e).replace(P7,"%23").replace(HX,"%3F")}function eY(e){return e==null?"":tY(e).replace(jX,"%2F")}function _m(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function rY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(E7," "),a=o.indexOf("="),s=_m(a<0?o:o.slice(0,a)),l=a<0?null:_m(o.slice(a+1));if(s in t){let u=t[s];Li(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function CM(e){let t="";for(let r in e){const n=e[r];if(r=QX(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Li(n)?n.map(o=>o&&hS(o)):[n&&hS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function nY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Li(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const iY=Symbol(""),MM=Symbol(""),mP=Symbol(""),k7=Symbol(""),dS=Symbol("");function Hf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function ss(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(jc(4,{from:r,to:t})):f instanceof Error?s(f):MX(f)?s(jc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function p_(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(oY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(ss(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=cX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&ss(h,r,n,o,a)()}))}}return i}function oY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function kM(e){const t=En(mP),r=En(k7),n=Ye(()=>t.resolve(mr(e.to))),i=Ye(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(Gc.bind(null,c));if(h>-1)return h;const d=xM(l[u-2]);return u>1&&xM(c)===d&&f[f.length-1].path!==d?f.findIndex(Gc.bind(null,l[u-2])):h}),o=Ye(()=>i.value>-1&&lY(r.params,n.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&_7(r.params,n.value.params));function s(l={}){return sY(l)?t[mr(e.replace)?"replace":"push"](mr(e.to)).catch(cd):Promise.resolve()}return{route:n,href:Ye(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const aY=sP({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:kM,setup(e,{slots:t}){const r=lf(kM(e)),{options:n}=En(mP),i=Ye(()=>({[LM(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[LM(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:dP("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),cc=aY;function sY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Li(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function xM(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const LM=(e,t,r)=>e!=null?e:t!=null?t:r,uY=sP({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=En(dS),i=Ye(()=>e.route||n.value),o=En(MM,0),a=Ye(()=>{let u=mr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ye(()=>i.value.matched[a.value]);Cg(MM,Ye(()=>a.value+1)),Cg(iY,s),Cg(dS,i);const l=C1();return go(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Gc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return IM(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=dP(h,Ce({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return IM(r.default,{Component:g,route:u})||g}}});function IM(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const x7=uY;function cY(e){const t=BX(e.routes,e),r=e.parseQuery||rY,n=e.stringifyQuery||CM,i=e.history,o=Hf(),a=Hf(),s=Hf(),l=Eg(Ia);let u=Ia;uc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=h_.bind(null,Y=>""+Y),f=h_.bind(null,eY),h=h_.bind(null,_m);function d(Y,nt){let K,pt;return w7(Y)?(K=t.getRecordMatcher(Y),pt=nt):pt=Y,t.addRoute(pt,K)}function p(Y){const nt=t.getRecordMatcher(Y);nt&&t.removeRoute(nt)}function v(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,nt){if(nt=Ce({},nt||l.value),typeof Y=="string"){const ft=d_(r,Y,nt.path),$=t.resolve({path:ft.path},nt),G=i.createHref(ft.fullPath);return Ce(ft,$,{params:h($.params),hash:_m(ft.hash),redirectedFrom:void 0,href:G})}let K;if("path"in Y)K=Ce({},Y,{path:d_(r,Y.path,nt.path).path});else{const ft=Ce({},Y.params);for(const $ in ft)ft[$]==null&&delete ft[$];K=Ce({},Y,{params:f(Y.params)}),nt.params=f(nt.params)}const pt=t.resolve(K,nt),St=Y.hash||"";pt.params=c(h(pt.params));const At=dX(n,Ce({},Y,{hash:JX(St),path:pt.path})),st=i.createHref(At);return Ce({fullPath:At,hash:St,query:n===CM?nY(Y.query):Y.query||{}},pt,{redirectedFrom:void 0,href:st})}function y(Y){return typeof Y=="string"?d_(r,Y,l.value.path):Ce({},Y)}function _(Y,nt){if(u!==Y)return jc(8,{from:nt,to:Y})}function w(Y){return P(Y)}function T(Y){return w(Ce(y(Y),{replace:!0}))}function S(Y){const nt=Y.matched[Y.matched.length-1];if(nt&&nt.redirect){const{redirect:K}=nt;let pt=typeof K=="function"?K(Y):K;return typeof pt=="string"&&(pt=pt.includes("?")||pt.includes("#")?pt=y(pt):{path:pt},pt.params={}),Ce({query:Y.query,hash:Y.hash,params:"path"in pt?{}:Y.params},pt)}}function P(Y,nt){const K=u=m(Y),pt=l.value,St=Y.state,At=Y.force,st=Y.replace===!0,ft=S(K);if(ft)return P(Ce(y(ft),{state:St,force:At,replace:st}),nt||K);const $=K;$.redirectedFrom=nt;let G;return!At&&pX(n,pt,K)&&(G=jc(16,{to:$,from:pt}),Pt(pt,pt,!0,!1)),(G?Promise.resolve(G):A($,pt)).catch(X=>zo(X)?zo(X,2)?X:tt(X):Z(X,$,pt)).then(X=>{if(X){if(zo(X,2))return P(Ce({replace:st},y(X.to),{state:St,force:At}),nt||$)}else X=k($,pt,!0,st,St);return M($,pt,X),X})}function C(Y,nt){const K=_(Y,nt);return K?Promise.reject(K):Promise.resolve()}function A(Y,nt){let K;const[pt,St,At]=fY(Y,nt);K=p_(pt.reverse(),"beforeRouteLeave",Y,nt);for(const ft of pt)ft.leaveGuards.forEach($=>{K.push(ss($,Y,nt))});const st=C.bind(null,Y,nt);return K.push(st),ku(K).then(()=>{K=[];for(const ft of o.list())K.push(ss(ft,Y,nt));return K.push(st),ku(K)}).then(()=>{K=p_(St,"beforeRouteUpdate",Y,nt);for(const ft of St)ft.updateGuards.forEach($=>{K.push(ss($,Y,nt))});return K.push(st),ku(K)}).then(()=>{K=[];for(const ft of Y.matched)if(ft.beforeEnter&&!nt.matched.includes(ft))if(Li(ft.beforeEnter))for(const $ of ft.beforeEnter)K.push(ss($,Y,nt));else K.push(ss(ft.beforeEnter,Y,nt));return K.push(st),ku(K)}).then(()=>(Y.matched.forEach(ft=>ft.enterCallbacks={}),K=p_(At,"beforeRouteEnter",Y,nt),K.push(st),ku(K))).then(()=>{K=[];for(const ft of a.list())K.push(ss(ft,Y,nt));return K.push(st),ku(K)}).catch(ft=>zo(ft,8)?ft:Promise.reject(ft))}function M(Y,nt,K){for(const pt of s.list())pt(Y,nt,K)}function k(Y,nt,K,pt,St){const At=_(Y,nt);if(At)return At;const st=nt===Ia,ft=uc?history.state:{};K&&(pt||st?i.replace(Y.fullPath,Ce({scroll:st&&ft&&ft.scroll},St)):i.push(Y.fullPath,St)),l.value=Y,Pt(Y,nt,K,st),tt()}let R;function B(){R||(R=i.listen((Y,nt,K)=>{if(!Ht.listening)return;const pt=m(Y),St=S(pt);if(St){P(Ce(St,{replace:!0}),pt).catch(cd);return}u=pt;const At=l.value;uc&&SX(bM(At.fullPath,K.delta),N1()),A(pt,At).catch(st=>zo(st,12)?st:zo(st,2)?(P(st.to,pt).then(ft=>{zo(ft,20)&&!K.delta&&K.type===Gd.pop&&i.go(-1,!1)}).catch(cd),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(st,pt,At))).then(st=>{st=st||k(pt,At,!1),st&&(K.delta&&!zo(st,8)?i.go(-K.delta,!1):K.type===Gd.pop&&zo(st,20)&&i.go(-1,!1)),M(pt,At,st)}).catch(cd)}))}let z=Hf(),N=Hf(),j;function Z(Y,nt,K){tt(Y);const pt=N.list();return pt.length?pt.forEach(St=>St(Y,nt,K)):console.error(Y),Promise.reject(Y)}function q(){return j&&l.value!==Ia?Promise.resolve():new Promise((Y,nt)=>{z.add([Y,nt])})}function tt(Y){return j||(j=!Y,B(),z.list().forEach(([nt,K])=>Y?K(Y):nt()),z.reset()),Y}function Pt(Y,nt,K,pt){const{scrollBehavior:St}=e;if(!uc||!St)return Promise.resolve();const At=!K&&TX(bM(Y.fullPath,0))||(pt||!K)&&history.state&&history.state.scroll||null;return Bd().then(()=>St(Y,nt,At)).then(st=>st&&wX(st)).catch(st=>Z(st,Y,nt))}const Ot=Y=>i.go(Y);let bt;const wt=new Set,Ht={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:w,replace:T,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:N.add,isReady:q,install(Y){const nt=this;Y.component("RouterLink",cc),Y.component("RouterView",x7),Y.config.globalProperties.$router=nt,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>mr(l)}),uc&&!bt&&l.value===Ia&&(bt=!0,w(i.location).catch(St=>{}));const K={};for(const St in Ia)K[St]=Ye(()=>l.value[St]);Y.provide(mP,nt),Y.provide(k7,lf(K)),Y.provide(dS,l);const pt=Y.unmount;wt.add(Y),Y.unmount=function(){wt.delete(Y),wt.size<1&&(u=Ia,R&&R(),R=null,l.value=Ia,bt=!1,j=!1),pt()}}};return Ht}function ku(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function fY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>Gc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>Gc(u,l))||i.push(l))}return[r,n,i]}function Ni(e){return`data/icons/item/${e}.webp`}function hY(e){return`<img src="${Ni(e)}" class="iconitem" />`}function Ft(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function us(e,t){return e+(t-e)*Math.random()}function fo(e){return!isNaN(e)&&isFinite(e)}function dY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function pY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function vY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function gY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function mY(e){const t=/\d+/g;return e.match(t).join("-")}function yP(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function hd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=us(i.wspd_lo,i.wspd_hi)/1e6,o+=us(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=us(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const se=E0({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdBase:5,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},prerelease_housesconfig:1}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=xt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!xt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=dY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=xt(),t=Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]);return console.log("floatingRegionGroups",t),t},modHists(){const e={},t=xt();for(const r of Object.keys(t.regionGroups))if(this.allowFloating&&this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}else this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];return e},medianModifiers(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){let n=0;const i=this.modHists[r].length;if(i%2)n=this.modHists[r][(i-1)/2];else{const o=this.modHists[r][(i-1-1)/2],a=this.modHists[r][(i-1+1)/2];n=(o+a)/2}e[r]=n}return e},medianWorkloads(){const e={},t=xt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=xt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=xt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=xt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=xt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>e.displayWorkerStatsForPz?xt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=xt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=xt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes getter",t),t},pzJobs(e){const t={},r=xt(),n=new Set([...e.autotakenGrindNodes]);return this.workingWorkers.forEach(i=>{if(!i||!r.jobIsPz(i.job))return;const o=i.job;if(!o)return;const a=r.workerStatsOnPlantzone(i),s=r.profitPzTownStats(o,i.tnk,a.wspd,a.mspd,a.luck,r.isGiant(i.charkey));try{const[l,u]=r.dijkstraPath(o,i.tnk,n);l&&l.forEach(c=>n.add(c)),t[o]={pzk:o,worker:i,profit:s,usedPath:l}}catch{console.log(`Failed to build path: ${i.tnk} - ${o}`)}}),t},currentNodesJobs(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(r):t[i]=[r]);return t},currentNodesCashflow(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i]+=n.profit.priceDaily:t[i]=n.profit.priceDaily);return t},nodeSharing(e){const t={},r={};for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(function(o){let a=0;o in nodesJobs?(r[o]+=i.profit.priceDaily,i.profit.priceDaily>a?nodesJobs[o].push(n):(a=i.profit.priceDaily,nodesJobs[o].unshift(n))):(r[o]=i.profit.priceDaily,nodesJobs[o]=[n])});return{jobs:t,cashFlows:r}},pzjobsSharedCP(e){const t={},r=xt();for(const[n,i]of Object.entries(e.pzJobs))t[n]=0,i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n]+=s});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerCP(e){return(e.farmingProfit-e.farmingBareProfit)/10},workerBringsItemkeys:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[worker.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.tnk);t[o]=new Set([...t[o],...r.plantzones[i.job].itemkeys])}return t},baseStorage(e){return e.selectedRegion=="RU"?8:16},townInfra:e=>(t,r,n)=>{const i=xt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?2:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townsInfra(e){const t={},r=xt();return r.ready&&r.towns.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},workerIncome:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job))return e.pzJobs[t.job].profit.priceDaily;if(r.jobIsFarming(t.job))return e.farmingProfitPerCP;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t)}},workerSharedCp:e=>t=>{const r=xt();if(r.jobIsPz(t.job))return e.pzjobsSharedCP[t.job];if(r.jobIsFarming(t.job))return 0;if(r.jobIsCustom(t.job))return t.job[2];if(r.jobIsWorkshop(t.job)){const n=e.workersWorkshop.filter(i=>i.job.hk==t.job.hk).length;return e.userWorkshops[t.job.hk].manualCp/n}},workerSharedLodgingCp:e=>t=>{const r=xt();if(!r.ready)return;const n=e.workerIncome(t),i=r.tnk2tk(t.tnk),o=e.prerelease_housesconfig?e.townsInfra[i].cost:e.haveLodging.cp.perTown[i],a=e.townsTotalIncome[i].income;let s;if(a>0)s=n/a*o;else{const l=e.userWorkers.filter(u=>r.tnk2tk(u.tnk)==i).length;s=1/l*o}return s},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t)/(e.workerSharedCp(t)+e.workerSharedLodgingCp(t));return isNaN(r)&&console.log("workerIncomePerCp ret NaN (NaN income / 0 cp?) for worker",t.label),r},workersSortedByIncomePerCp(e){const t=Date.now(),r=[];return e.workingWorkers.forEach(n=>{r.push({w:n,i:e.workerIncome(n),ipc:e.workerIncomePerCp(n)})}),r.sort((n,i)=>n.ipc-i.ipc),console.log("workersSortedByIncomePerCp took",Date.now()-t,"ms"),r},townsTotalIncome(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]={income:0,mapCp:0});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].income+=e.workerIncome(i),t[o].mapCp+=e.workerSharedCp(i)}for(const[n,i]of Object.entries(t)){const o=e.prerelease_housesconfig?e.townsInfra[n].cost:e.haveLodging.cp.perTown[n];i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(o=>t.add(o));const r=xt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenGrindNodesCP(e){const t=xt(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodesCP(e){const t=xt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgingCp(n.worker);return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+(e.prerelease_housesconfig?e.lodgage:e.haveLodging.cp.total)+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},jobsUsingNodes:e=>t=>{const r=xt(),n=t.filter(a=>!r.townSet.has(a)),i=new Set(n),o=[];for(const[a,s]of Object.entries(e.pzJobs))s.usedPath.filter(u=>i.has(u)).length&&o.push(s);return o},workerPzStats(e){const t=xt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},pzProfitsBefore(e){const t=e.pzJobsTotalDailyProfit,r=e.autotakenNodesCP,n=e.pzJobsTotalLodgingCost,i=e.pzJobsDailyProfitPerCp;return{daily:t,cp:r,lodgingCp:n,dailyPerCp:i}},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=xt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return console.log("jobsTally getter"),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),Po=E0({id:"market",state:()=>({ready:!1,apiPrices:[],calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=se(),r=`https://apiv2.bdolytics.com/${t.selectedLang}/${t.selectedRegion}/market/central-market-data`,n=await(await fetch(r)).json(),i=xt(),o=new Set(i.itemKeys),a={};n.data.forEach(s=>{o.has(s.item_id)&&(a[s.item_id]=s.price)});for(const s of Object.keys(i.vendorPrices))t.keepItems[s]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:se().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=se(),r=xt();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var pS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L7={exports:{}},I7={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g;i=Math.floor,f=Math.min,n=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,_,w,T){var S;if(_==null&&(_=0),T==null&&(T=n),_<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);_<w;)S=i((_+w)/2),T(y,m[S])<0?w=S:_=S+1;return[].splice.apply(m,[_,_-_].concat(y)),y},s=function(m,y,_){return _==null&&(_=n),m.push(y),v(m,0,m.length-1,_)},a=function(m,y){var _,w;return y==null&&(y=n),_=m.pop(),m.length?(w=m[0],m[0]=_,g(m,0,y)):w=_,w},u=function(m,y,_){var w;return _==null&&(_=n),w=m[0],m[0]=y,g(m,0,_),w},l=function(m,y,_){var w;return _==null&&(_=n),m.length&&_(m[0],y)<0&&(w=[m[0],y],y=w[0],m[0]=w[1],g(m,0,_)),y},o=function(m,y){var _,w,T,S,P,C;for(y==null&&(y=n),S=function(){C=[];for(var A=0,M=i(m.length/2);0<=M?A<M:A>M;0<=M?A++:A--)C.push(A);return C}.apply(this).reverse(),P=[],w=0,T=S.length;w<T;w++)_=S[w],P.push(g(m,_,y));return P},p=function(m,y,_){var w;if(_==null&&(_=n),w=m.indexOf(y),w!==-1)return v(m,0,w,_),g(m,w,_)},h=function(m,y,_){var w,T,S,P,C;if(_==null&&(_=n),T=m.slice(0,y),!T.length)return T;for(o(T,_),C=m.slice(y),S=0,P=C.length;S<P;S++)w=C[S],l(T,w,_);return T.sort(_).reverse()},d=function(m,y,_){var w,T,S,P,C,A,M,k,R;if(_==null&&(_=n),y*10<=m.length){if(S=m.slice(0,y).sort(_),!S.length)return S;for(T=S[S.length-1],M=m.slice(y),P=0,A=M.length;P<A;P++)w=M[P],_(w,T)<0&&(c(S,w,0,null,_),S.pop(),T=S[S.length-1]);return S}for(o(m,_),R=[],C=0,k=f(y,m.length);0<=k?C<k:C>k;0<=k?++C:--C)R.push(a(m,_));return R},v=function(m,y,_,w){var T,S,P;for(w==null&&(w=n),T=m[_];_>y;){if(P=_-1>>1,S=m[P],w(T,S)<0){m[_]=S,_=P;continue}break}return m[_]=T},g=function(m,y,_){var w,T,S,P,C;for(_==null&&(_=n),T=m.length,C=y,S=m[y],w=2*y+1;w<T;)P=w+1,P<T&&!(_(m[w],m[P])<0)&&(w=P),m[y]=m[w],y=w,w=2*y+1;return m[y]=S,v(m,C,y,_)},r=function(){m.push=s,m.pop=a,m.replace=u,m.pushpop=l,m.heapify=o,m.updateItem=p,m.nlargest=h,m.nsmallest=d;function m(y){this.cmp=y!=null?y:n,this.nodes=[]}return m.prototype.push=function(y){return s(this.nodes,y,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return e.exports=y()}(this,function(){return r})}).call(pS)})(I7);(function(e){e.exports=I7.exports})(L7);const jh=yY(L7.exports),xt=E0({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},towns:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>this.skillData[i].tier!=4&&!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnIndustry(e,t){return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=se(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(i=>+i)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json();const t=await(await fetch("data/manual/plantzone_uniques.json")).json();this.itemKeys=t.sort((i,o)=>i-o),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.hk2nk=await(await fetch("data/hk2nk.json")).json(),this.tk2nk=await(await fetch("data/distances_tk2nk.json")).json(),this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.towns=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795],this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795};const r={};for(const[i,o]of Object.entries(this._tk2tnk))r[o]=i;this._tnk2tk=r;const n={};for(const[i,o]of Object.entries(this.plantzoneStatic))if(i in this.plantzoneDrops){const a=o.regiongroup;a in n?n[a].push(i):n[a]=[i]}this.regionGroups=n,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[i,o]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[i]=Object.keys(o).sort((a,s)=>a-s);this.giantSpecies=new Set([2,4,8]),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e/0)}},tnk2tk(e){if(this.ready){if(e in this._tnk2tk)return this._tnk2tk[e];console.log("unknown tnk",e)}},dijTownsInCpRadius(e,t){let r=new jh((s,l)=>n[s]-n[l]),n={[e]:this.nodes[e].CP},i={[e]:[e]};r.push(e);for(var o;r.size()&&(o=r.pop(),!(n[o]>=t));)this.links[o].forEach(s=>{const l=n[o]+this.nodes[s].CP;s in n?l<n[s]&&(n[s]=l,i[s]=[...i[o],s]):(n[s]=l,i[s]=[...i[o],s],r.push(s))});const a={};return this.towns.forEach(s=>{s in n&&(a[s]=n[s])}),a},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=se();let n=new Set,i=new jh((u,c)=>o[u]-o[c]),o={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},a={[e]:[e]};i.push(e);for(var s;i.size()&&(s=i.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=o[s]+c;u in o?f<o[u]&&(o[u]=f,a[u]=[...a[s],u]):(o[u]=f,i.push(u),a[u]=[...a[s],u])});const l=[];return n.forEach(u=>{l.push([u,o[u],a[u]])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];let n={[e]:this.nodes[e].CP},i={[e]:[e]},o=new jh((s,l)=>n[s]-n[l]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(s=>{this.nodes[s]==null&&console.log("dijkstraPath: no exploration node",s);const l=r&&r.has(s)?0:this.nodes[s].CP,u=n[a]+l;s in n?u<n[s]&&(n[s]=u,i[s]=[...i[a],s]):(n[s]=u,i[s]=[...i[a],s],o.push(s))});return[i[t],n[t]]},dijkstraNearestTowns(e,t,r,n){if(!this.ready)return;let i=new Set,o=new jh((c,f)=>a[c]-a[f]),a={[e]:this.nodes[e].CP},s={[e]:[e]};o.push(e);for(var l;o.size()&&(l=o.pop(),!(this.townSet.has(l)&&(!n||l!=1343)&&(i.add(l),i.size==t)));)this.links[l].forEach(c=>{this.nodes[c]==null&&console.log("dijkstraNearestTowns: no exploration node",c);const f=r&&r.has(c)?0:this.nodes[c].CP,h=a[l]+f;c in a?h<a[c]&&(a[c]=h,s[c]=[...s[l],c]):(o.push(c),a[c]=h,s[c]=[...s[l],c])});const u=[];return i.forEach(c=>{u.push([c,a[c],s[c]])}),u},plantzoneNearestTownsFreeWorkersProfits(e,t){const r=se(),n=[];return this.dijkstraNearestTowns(e,t,r.autotakenNodes).forEach(([o,a,s])=>{const l=this._tnk2tk[o];r.getFreeWorkers(l).forEach(c=>{const f=this.workerStatsOnPlantzone(c);n.push(this.pzSelectionEntry(e,l,o,a,s,c,f))})}),n.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),n},pzSelectionEntry(e,t,r,n,i,o,a){const s=se(),l=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),u=this.plantzones[e].itemkeys,c=new Set([...s.townsStoreItemkeys[t],...u]).size,f=s.townsInfra[t],h=s.townInfra(t,s.townWorkingWorkers(t).length+1,c),d=h.cost-f.cost,p=`old: ${f.wantLodging} \u{1F6CF}\uFE0F ${f.wantStorage} \u{1F4E6} ${Ft(f.cost)}CP
new: ${h.wantLodging} \u{1F6CF}\uFE0F ${h.wantStorage} \u{1F4E6} ${Ft(h.cost)}CP`,v={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:d,infraTooltip:p,cp:n+d,profit:l,w:o,statsOnPz:a};return v.dailyPerCp=s.jobEfficiencyDelta(v.profit.priceDaily,n+d),v},farmSelectionEntry(e){const t=se(),r=t.townsInfra[e],i=t.townsStoreItemkeys[e].size,o=t.townInfra(e,t.townWorkingWorkers(e).length+1,i),a=o.cost-r.cost,s=`old: ${r.wantLodging} \u{1F6CF}\uFE0F ${r.wantStorage} \u{1F4E6} ${Ft(r.cost)}CP
new: ${o.wantLodging} \u{1F6CF}\uFE0F ${o.wantStorage} \u{1F4E6} ${Ft(o.cost)}CP`;return{townCp:a,infraTooltip:s,dailyPerCp:t.jobEfficiencyDelta(t.farmingProfitPerCP,a)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=se(),s=Po(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"};i=this.medianGiant(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!0),o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},l=s&&s.dailyPerCp>a.dailyPerCp?s:a,u=this.medianHuman(t);o=this.profitPzTownStats(e,t,u.wspd+5,u.mspd,u.luck,!1),o.charkey=u.charkey,o.wspd=u.wspd;const c={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h=[{charkey:s.charkey,priceDaily:s.priceDaily},{charkey:c.charkey,priceDaily:c.priceDaily},{charkey:a.charkey,priceDaily:a.priceDaily}];return h.sort((d,p)=>d&&p&&p.priceDaily-d.priceDaily),f.alt_workers=h,f.connected=!0,f},makeMedianChar(e){const t={},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):this.makeMedianChar(7573)},profitWorkshopWorker(e,t,r){const n=se(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a;return 24*60/l*t.manualCycleIncome/1e6},itemName(e){if(!this.ready)return e;const t=se();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=se();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1];return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this.hk2nk[t],n=this._tnk2tk[e];return this.tk2nk[n][r]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},isTown(e){return[1,2].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e){const t=e.job;if(this.jobIsIdle(t))return"idle";if(this.jobIsPz(t))return this.uloc.node[t];if(this.jobIsFarming(t))return"["+this.jobIcon(t)+"]";if(this.jobIsCustom(t))return"["+this.jobIcon(t)+"] "+t[3];if(this.jobIsWorkshop(t)){const n=xt().uloc.char[t.hk],i=mY(n);return"["+this.jobIcon(t)+"] "+i}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=pY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i}},getters:{uloc(){const e=se();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townSet(){return new Set(this.towns)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=Po(),r=se();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky);a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi),a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n}}}),F1=E0({id:"map",state:()=>({target:[0,0],zoom:-8})}),_Y=E0({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const $e=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},bY={class:"wrapper"},wY=U("Home"),SY=U("Plantzones"),TY=U("Modifiers"),PY=U("Settings"),EY=U("About"),AY={async beforeCreate(){xt().fetchData();const t=se(),r=localStorage.getItem("user");t.migrate(r);const n=Po(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=F1(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},CY=Object.assign(AY,{__name:"App",setup(e){return(t,r)=>(O(),D(W,null,[b("header",null,[b("div",bY,[b("nav",null,[kt(mr(cc),{to:"/"},{default:Ee(()=>[wY]),_:1}),kt(mr(cc),{to:"/plantzones"},{default:Ee(()=>[SY]),_:1}),kt(mr(cc),{to:"/modifiers"},{default:Ee(()=>[TY]),_:1}),kt(mr(cc),{to:"/settings"},{default:Ee(()=>[PY]),_:1}),kt(mr(cc),{to:"/about"},{default:Ee(()=>[EY]),_:1})])])]),kt(mr(x7))],64))}}),MY=$e(CY,[["__scopeId","data-v-14b67078"]]),kY="modulepreload",xY=function(e){return"/workerman/"+e},OM={},LY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=xY(i),i in OM)return;OM[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":kY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const IY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean},data:()=>({}),methods:{formatFixed:Ft,percentageToColor:vY}},OY=U(" @ "),RY=U(" idle ");function DY(e,t,r,n,i,o){return O(),D("tr",null,[b("td",null,[b("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),b("td",null,L(r.w.label),1),b("td",{style:Rl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),5),b("td",{style:Rl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),5),b("td",{style:Rl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),5),b("td",null,[b("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),b("td",null,[r.w.job?(O(),D(W,{key:0},[typeof r.w.job=="number"?(O(),D("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("pan",this.gameStore.nodes[r.w.job].pos)),class:"clickable"},L(n.gameStore.workerJobDescription(r.w)),1)):(O(),D(W,{key:1},[U(L(n.gameStore.workerJobDescription(r.w)),1)],64)),OY,n.userStore.displayProfitPerCp?(O(),D(W,{key:2},[U(L(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(O(),D(W,{key:3},[U(L(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(O(),D(W,{key:1},[RY],64))]),b("td",null,[r.w.job?(O(),D("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(O(),D("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))])])}const O7=$e(IY,[["render",DY],["__scopeId","data-v-c2fd2972"]]);const NY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{o:Object,tk:String},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:O7},data:()=>({}),methods:{formatFixed:Ft,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},_P=e=>(en("data-v-bf156dd7"),e=e(),rn(),e),FY={colspan:"2"},BY=U(" worker "),$Y=_P(()=>b("td",null,"\u{1F528}",-1)),zY=_P(()=>b("td",null,"\u{1F9B6}",-1)),VY=_P(()=>b("td",null,"\u{1F340}",-1)),UY=U(" \xA0 "),GY={colspan:"8"},jY=U(" empty slot ");function WY(e,t,r,n,i,o){const a=de("Worker");return O(),D(W,null,[b("tr",null,[b("td",FY,[BY,n.userStore.prerelease_housesconfig?(O(),D("button",{key:0,onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")):ut("",!0)]),$Y,zY,VY,b("td",{colspan:"3",class:Yr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})},[b("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},L(n.gameStore.uloc.town[r.tk]),1),U(" "+L()+" ",1),n.userStore.displayProfitPerCp?(O(),D(W,{key:0},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(O(),D(W,{key:1},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),UY,n.userStore.prerelease_housesconfig?(O(),D(W,{key:2},[U(L(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),b("span",null,L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),U(" \u{1F4E6} "+L(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),b("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk))}," config ")],64)):(O(),D(W,{key:3},[U(L(n.userStore.haveLodging.slots.perTown[r.tk])+" \u{1F6CF}\uFE0F / "+L(n.userStore.haveLodging.cp.perTown[r.tk])+" CP ",1),b("button",{onClick:t[3]||(t[3]=s=>this.$emit("selectLodging",r.tk))}," lodging ")],64))],2)]),(O(!0),D(W,null,Nt(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(O(),fa(a,{w:s,homeless:!0,class:Yr({homeless:!n.userStore.prerelease_housesconfig&&l>n.userStore.haveLodging.slots.perTown[r.tk]-1}),onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPan:t[4]||(t[4]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","onFire","onEdit","onSend"]))),256)),n.userStore.prerelease_housesconfig?ut("",!0):(O(),D(W,{key:0},[n.userStore.townFreeLodgingCount(r.tk)>0?(O(!0),D(W,{key:0},Nt(n.userStore.townFreeLodgingCount(r.tk),s=>(O(),D("tr",null,[b("td",GY,[jY,n.userStore.townFreeLodgingCount(r.tk)>0?(O(),D("button",{key:0,onClick:t[5]||(t[5]=l=>this.$emit("hireWorker",r.tk))}," hire ")):ut("",!0)])]))),256)):ut("",!0)],64))],64)}const HY=$e(NY,[["render",WY],["__scopeId","data-v-bf156dd7"]]);const XY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{},data:()=>({}),methods:{formatFixed:Ft,makeIconSrc:Ni},computed:{freeWorkers(){return this.gameStore.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter((r,n,i)=>n===i.findIndex(o=>o.tnk===r.tnk&&JSON.stringify(o.statsOnPz)===JSON.stringify(r.statsOnPz)))}}},A0=e=>(en("data-v-d1f3351b"),e=e(),rn(),e),YY={key:0},qY=["src"],ZY=U(" workload: "),KY={id:"plantzoneWorkerInfo"},JY=A0(()=>b("br",null,null,-1)),QY=A0(()=>b("abbr",{title:"\u03A3 of connection nodes costs shared proportionally between all active jobs using them + full cost of this node"},"\u2139\uFE0F",-1)),tq=A0(()=>b("br",null,null,-1)),eq=["title"],rq=A0(()=>b("br",null,null,-1)),nq=["title"],iq=U(" worker: none "),oq=U(" Nearest towns with idle workers: "),aq={key:0},sq=A0(()=>b("tr",null,[b("th",null,"town"),b("th",null,"walk"),b("th",null,[U("worker "),b("abbr",{title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1)),lq={key:0},uq={class:"fsxs"},cq=["title"],fq=U("+"),hq=["title"],dq=["onClick","disabled"],pq=U(" None ");function vq(e,t,r,n,i,o){const a=de("RouterLink");return O(),D(W,null,[b("div",null,[kt(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),U(" "+L(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(O(),D("span",YY,[(O(!0),D(W,null,Nt(this.gameStore.plantzones[r.pzk].itemkeys,s=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+s}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(s),class:"iconitem"},null,8,qY)]),_:2},1032,["to"]))),256)),U(" [\u{1F340}"+L(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2))+"x] ",1)])):ut("",!0)]),b("div",null,[ZY,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(O(),D(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),b("button",{onClick:t[0]||(t[0]=s=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(O(),D(W,{key:1},[U(L(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),Tt(b("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=s),min:"0",max:"100",step:"1",class:"w42em"},null,512),[[pe,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),b("div",KY,[n.userStore.workedPlantzones.has(r.pzk.toString())?(O(),D(W,{key:0},[U(" worker: "+L(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+L(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(O(),D(W,{key:0},[b("button",{onClick:t[2]||(t[2]=s=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),b("button",{onClick:t[3]||(t[3]=s=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):ut("",!0),JY,U(" connection cost: "+L(o.formatFixed(n.userStore.pzjobsSharedCP[r.pzk],3))+" CP ",1),QY,tq,U(" "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" cost: "+L(o.formatFixed(n.userStore.workerSharedLodgingCp(n.userStore.pzJobs[r.pzk].worker),3))+" CP ",1),b("abbr",{title:n.userStore.prerelease_housesconfig?"total lodgage costs of hometown shared proportionally between all active jobs from that town":"total lodging costs of hometown shared between all active jobs from that town"},"\u2139\uFE0F",8,eq),rq,U(" efficiency: "+L(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),b("abbr",{title:n.userStore.prerelease_housesconfig?"income / (connectionCost + lodgageCost)":"income / (connectionCost + lodgingCost)"},"\u2139\uFE0F",8,nq)],64)):(O(),D(W,{key:1},[iq],64))]),b("div",null,[oq,o.freeWorkers.length?(O(),D("table",aq,[sq,(O(!0),D(W,null,Nt(o.freeWorkers,s=>(O(),D(W,null,[s.profit.dist<1e6?(O(),D("tr",lq,[b("td",null,L(n.gameStore.nodeName(s.tnk)),1),b("td",null,L(o.formatFixed(s.profit.dist)),1),b("td",null,[U(L(s.w.label)+" ",1),b("span",uq,L(o.formatFixed(s.statsOnPz.wspd,2))+"\u{1F528} "+L(o.formatFixed(s.statsOnPz.mspd,2))+"\u{1F9B6} "+L(o.formatFixed(s.statsOnPz.luck,2))+"\u{1F340} ",1)]),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,cq),fq,b("abbr",{title:s.infraTooltip},L(s.townCp),9,hq),U("="+L(s.cp),1)]),b("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>n.userStore.assignWorker(s.w,s.pz.key),disabled:n.userStore.workedPlantzones.has(r.pzk.toString())}," assign ",8,dq)])])):ut("",!0)],64))),256))])):(O(),D(W,{key:1},[pq],64))])],64)}const gq=$e(XY,[["render",vq],["__scopeId","data-v-d1f3351b"]]);const mq={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function yq(e,t,r,n,i,o){return Tt((O(),D("div",{onClick:t[1]||(t[1]=mm(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[b("div",{onClick:t[0]||(t[0]=mm(()=>{},["stop"])),class:"dialog_content"},[IW(e.$slots,"default",{},void 0,!0)])],512)),[[LH,r.show]])}const bP=$e(mq,[["render",yq],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vS=function(e,t){return vS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},vS(e,t)};function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _q=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),bq=function(){function e(){this.browser=new _q,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),wl=new bq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(wl.wxa=!0,wl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?wl.worker=!0:typeof navigator>"u"?(wl.node=!0,wl.svgSupported=!0):wq(navigator.userAgent,wl);function wq(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Xt=wl;var wP=12,Sq="sans-serif",Yl=wP+"px "+Sq,Tq=20,Pq=100,Eq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Aq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Tq)/Pq;t[n]=i}return t}var Cq=Aq(Eq),lu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=lu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Yl),e.measureText(r);r=r||"",n=n||Yl;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||wP,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Cq[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},R7=uu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),D7=uu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),uf=Object.prototype.toString,B1=Array.prototype,Mq=B1.forEach,kq=B1.filter,SP=B1.slice,xq=B1.map,RM=function(){}.constructor,_p=RM?RM.prototype:null,TP="__proto__",Lq=2311;function N7(){return Lq++}function PP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zt(e){if(e==null||typeof e!="object")return e;var t=e,r=uf.call(e);if(r==="[object Array]"){if(!pd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zt(e[n])}}else if(D7[r]){if(!pd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!R7[r]&&!pd(e)&&!bm(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==TP&&(t[a]=zt(e[a]))}return t}function ie(e,t,r){if(!It(t)||!It(e))return r?zt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==TP){var i=e[n],o=t[n];It(o)&&It(i)&&!ct(o)&&!ct(i)&&!bm(o)&&!bm(i)&&!DM(o)&&!DM(i)&&!pd(o)&&!pd(i)?ie(i,o,r):(r||!(n in e))&&(e[n]=zt(t[n]))}return e}function Iq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=ie(r,e[n],t);return r}function ot(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==TP&&(e[r]=t[r]);return e}function te(e,t,r){for(var n=ve(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}lu.createCanvas;function ue(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Oq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Fi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else te(e,t,r)}function Fr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function F(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Mq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Ct(e,t,r){if(!e)return[];if(!t)return EP(e);if(e.map&&e.map===xq)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function uu(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function yr(e,t,r){if(!e)return[];if(!t)return EP(e);if(e.filter&&e.filter===kq)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ve(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Rq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(SP.call(arguments)))}}var Vt=_p&&Ut(_p.bind)?_p.call.bind(_p.bind):Rq;function _e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(SP.call(arguments)))}}function ct(e){return Array.isArray?Array.isArray(e):uf.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Et(e){return typeof e=="string"}function gS(e){return uf.call(e)==="[object String]"}function be(e){return typeof e=="number"}function It(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function DM(e){return!!R7[uf.call(e)]}function kn(e){return!!D7[uf.call(e)]}function bm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function $1(e){return e.colorStops!=null}function Dq(e){return e.image!=null}function Nq(e){return uf.call(e)==="[object RegExp]"}function wm(e){return e!==e}function wi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function qt(e,t){return e!=null?e:t}function dd(e,t,r){return e!=null?e:t!=null?t:r}function EP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return SP.apply(e,t)}function F7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Ii(e,t){if(!e)throw new Error(t)}function mo(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var B7="__ec_primitive__";function Sm(e){e[B7]=!0}function pd(e){return e[B7]}var Fq=function(){function e(t){this.data={};var r=ct(t);this.data={};var n=this;t instanceof e?t.each(i):t&&F(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ve(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new Fq(e)}function $7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function z1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ot(r,t),r}function z7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function ht(e,t){return e.hasOwnProperty(t)}function Dr(){}var Bq=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mS=function(e,t){return mS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mS(e,t)};function Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function cf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function $q(e,t){return e[0]=t[0],e[1]=t[1],e}function zq(e){return[e[0],e[1]]}function NM(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function V7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Vq(e){return Math.sqrt(Uq(e))}function Uq(e){return e[0]*e[0]+e[1]*e[1]}function v_(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function AP(e,t){var r=Vq(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function yS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Gq=yS;function jq(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Mc=jq;function qr(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function vc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function gc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var xu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),Wq=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new xu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new xu(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new xu(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new xu(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new xu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new xu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const Hq=Wq;var Xq=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Bi=Xq;var Yq=Math.log(2);function _S(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/Yq);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*_S(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function FM(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=_S(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*_S(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var BM="___zrEVENTSAVED",g_=[];function qq(e,t,r,n,i){return bS(g_,t,n,i,!0)&&bS(e,r,g_[0],g_[1])}function bS(e,t,r,n,i){if(t.getBoundingClientRect&&Xt.domSupported&&!U7(t)){var o=t[BM]||(t[BM]={}),a=Zq(t,o),s=Kq(a,o,i);if(s)return s(e,r,n),!0}return!1}function Zq(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function Kq(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?FM(s,a):FM(a,s))}function U7(e){return e.nodeName.toUpperCase()==="CANVAS"}var Jq=/([&<>"'])/g,Qq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hn(e){return e==null?"":(e+"").replace(Jq,function(t,r){return Qq[r]})}var tZ=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,m_=[],eZ=Xt.browser.firefox&&+Xt.browser.version.split(".")[0]<39;function wS(e,t,r,n){return r=r||{},n?$M(e,t,r):eZ&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):$M(e,t,r),r}function $M(e,t,r){if(Xt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(U7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(bS(m_,e,n,i)){r.zrX=m_[0],r.zrY=m_[1];return}}r.zrX=r.zrY=0}function CP(e){return e||window.event}function Un(e,t,r){if(t=CP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&wS(e,a,t,r)}else{wS(e,t,t,r);var o=rZ(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&tZ.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function rZ(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function nZ(e,t,r,n){e.addEventListener(t,r,n)}function iZ(e,t,r,n){e.removeEventListener(t,r,n)}var ql=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function zM(e){return e.which===2||e.which===3}var oZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=wS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in y_)if(y_.hasOwnProperty(r)){var n=y_[r](this._track,t);if(n)return n}},e}();function VM(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function aZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var y_={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=VM(n)/VM(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=aZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Wc(){return[1,0,0,1,0,0]}function MP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function G7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function kc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function SS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function kP(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function sZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function V1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var lZ=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const xe=lZ;var bp=Math.min,wp=Math.max,Ws=new xe,Hs=new xe,Xs=new xe,Ys=new xe,Xf=new xe,Yf=new xe,uZ=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=bp(t.x,this.x),n=bp(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=wp(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=wp(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=Wc();return SS(o,o,[-r.x,-r.y]),sZ(o,o,[n,i]),SS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),g=Math.abs(u-i),m=Math.abs(s-c),y=Math.abs(f-a),_=Math.min(v,g),w=Math.min(m,y);o<l||u<i?_>p&&(p=_,v<g?xe.set(Yf,-v,0):xe.set(Yf,g,0)):_<d&&(d=_,v<g?xe.set(Xf,v,0):xe.set(Xf,-g,0)),s<c||f<a?w>p&&(p=w,m<y?xe.set(Yf,0,-m):xe.set(Yf,0,y)):_<d&&(d=_,m<y?xe.set(Xf,0,m):xe.set(Xf,0,-y))}return r&&xe.copy(r,h?Xf:Yf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Ws.x=Xs.x=r.x,Ws.y=Ys.y=r.y,Hs.x=Ys.x=r.x+r.width,Hs.y=Xs.y=r.y+r.height,Ws.transform(n),Ys.transform(n),Hs.transform(n),Xs.transform(n),t.x=bp(Ws.x,Hs.x,Xs.x,Ys.x),t.y=bp(Ws.y,Hs.y,Xs.y,Ys.y);var l=wp(Ws.x,Hs.x,Xs.x,Ys.x),u=wp(Ws.y,Hs.y,Xs.y,Ys.y);t.width=l-t.x,t.height=u-t.y},e}();const oe=uZ;var j7="silent";function cZ(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:fZ}}function fZ(){ql(this.event)}var hZ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Bi),qf=function(){function e(t,r){this.x=t,this.y=r}return e}(),dZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],__=new oe(0,0,0,0),W7=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new qf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new hZ,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Hq(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(F(dZ,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=H7(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new qf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new qf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=cZ(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new qf(r,n);if(UM(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new oe(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(__.copy(h.getBoundingRect()),h.transform&&__.applyTransform(h.transform),__.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var y=r+g*Math.cos(m),_=n+g*Math.sin(m);if(UM(s,a,y,_,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new oZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new qf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Bi);F(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){W7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=H7(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||Gq(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function pZ(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?j7:!0}return!1}function UM(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=pZ(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==j7)){t.target=a;break}}}function H7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const vZ=W7;var X7=32,Zf=7;function gZ(e){for(var t=0;e>=X7;)t|=e&1,e>>=1;return e+t}function GM(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;mZ(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function mZ(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function jM(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function b_(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function w_(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function yZ(e,t){var r=Zf,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=w_(e[g],e,p,v,0,t);p+=y,v-=y,v!==0&&(m=b_(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)a[m]=e[d+m];var y=0,_=v,w=d;if(e[w++]=e[_++],--g===0){for(m=0;m<p;m++)e[w+m]=a[y+m];return}if(p===1){for(m=0;m<g;m++)e[w+m]=e[_+m];e[w+g]=a[y];return}for(var T=r,S,P,C;;){S=0,P=0,C=!1;do if(t(e[_],a[y])<0){if(e[w++]=e[_++],P++,S=0,--g===0){C=!0;break}}else if(e[w++]=a[y++],S++,P=0,--p===1){C=!0;break}while((S|P)<T);if(C)break;do{if(S=w_(e[_],a,y,p,0,t),S!==0){for(m=0;m<S;m++)e[w+m]=a[y+m];if(w+=S,y+=S,p-=S,p<=1){C=!0;break}}if(e[w++]=e[_++],--g===0){C=!0;break}if(P=b_(a[y],e,_,g,0,t),P!==0){for(m=0;m<P;m++)e[w+m]=e[_+m];if(w+=P,_+=P,g-=P,g===0){C=!0;break}}if(e[w++]=a[y++],--p===1){C=!0;break}T--}while(S>=Zf||P>=Zf);if(C)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[w+m]=e[_+m];e[w+g]=a[y]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[w+m]=a[y+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)a[m]=e[v+m];var y=d+p-1,_=g-1,w=v+g-1,T=0,S=0;if(e[w--]=e[y--],--p===0){for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m];return}if(g===1){for(w-=p,y-=p,S=w+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[_];return}for(var P=r;;){var C=0,A=0,M=!1;do if(t(a[_],e[y])<0){if(e[w--]=e[y--],C++,A=0,--p===0){M=!0;break}}else if(e[w--]=a[_--],A++,C=0,--g===1){M=!0;break}while((C|A)<P);if(M)break;do{if(C=p-w_(a[_],e,d,p,p-1,t),C!==0){for(w-=C,y-=C,p-=C,S=w+1,T=y+1,m=C-1;m>=0;m--)e[S+m]=e[T+m];if(p===0){M=!0;break}}if(e[w--]=a[_--],--g===1){M=!0;break}if(A=g-b_(e[y],a,0,g,g-1,t),A!==0){for(w-=A,_-=A,g-=A,S=w+1,T=_+1,m=0;m<A;m++)e[S+m]=a[T+m];if(g<=1){M=!0;break}}if(e[w--]=e[y--],--p===0){M=!0;break}P--}while(C>=Zf||A>=Zf);if(M)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),g===1){for(w-=p,y-=p,S=w+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[_]}else{if(g===0)throw new Error;for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Og(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<X7){o=GM(e,r,n,t),jM(e,r,n,r+o,t);return}var a=yZ(e,t),s=gZ(i);do{if(o=GM(e,r,n,t),o<s){var l=i;l>s&&(l=s),jM(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var Pn=1,Wh=2,fc=4,WM=!1;function S_(){WM||(WM=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function HM(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var _Z=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=HM}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Og(n,HM)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=Pn),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(S_(),c.z=0),isNaN(c.z2)&&(S_(),c.z2=0),isNaN(c.zlevel)&&(S_(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=ue(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const bZ=_Z;var Y7;Y7=Xt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const TS=Y7;var Rg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Rg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Rg.bounceIn(e*2)*.5:Rg.bounceOut(e*2-1)*.5+.5}};const q7=Rg;var Sp=Math.pow,ys=Math.sqrt,Tm=1e-8,Z7=1e-4,XM=ys(3),Tp=1/3,ho=cf(),Xn=cf(),xc=cf();function cs(e){return e>-Tm&&e<Tm}function K7(e){return e>Tm||e<-Tm}function or(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function YM(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Pm(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(cs(c)&&cs(f))if(cs(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(cs(v)){var g=f/c,p=-s/a+g,m=-g/2;p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m)}else if(v>0){var y=ys(v),_=c*s+1.5*a*(-f+y),w=c*s+1.5*a*(-f-y);_<0?_=-Sp(-_,Tp):_=Sp(_,Tp),w<0?w=-Sp(-w,Tp):w=Sp(w,Tp);var p=(-s-(_+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ys(c*c*c)),S=Math.acos(T)/3,P=ys(c),C=Math.cos(S),p=(-s-2*P*C)/(3*a),m=(-s+P*(C+XM*Math.sin(S)))/(3*a),A=(-s+P*(C-XM*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m),A>=0&&A<=1&&(o[d++]=A)}}return d}function J7(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(cs(a)){if(K7(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(cs(c))i[0]=-o/(2*a);else if(c>0){var f=ys(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Em(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function wZ(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;ho[0]=l,ho[1]=u;for(var y=0;y<1;y+=.05)Xn[0]=or(e,r,i,a,y),Xn[1]=or(t,n,o,s,y),g=Mc(ho,Xn),g<d&&(f=y,d=g);d=1/0;for(var _=0;_<32&&!(h<Z7);_++)p=f-h,v=f+h,Xn[0]=or(e,r,i,a,p),Xn[1]=or(t,n,o,s,p),g=Mc(Xn,ho),p>=0&&g<d?(f=p,d=g):(xc[0]=or(e,r,i,a,v),xc[1]=or(t,n,o,s,v),m=Mc(xc,ho),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=or(e,r,i,a,f),c[1]=or(t,n,o,s,f)),ys(d)}function SZ(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=or(e,r,i,a,p),g=or(t,n,o,s,p),m=v-u,y=g-c;f+=Math.sqrt(m*m+y*y),u=v,c=g}return f}function kr(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function qM(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function TZ(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(cs(o)){if(K7(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(cs(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ys(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Q7(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Am(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function PZ(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;ho[0]=a,ho[1]=s;for(var h=0;h<1;h+=.05){Xn[0]=kr(e,r,i,h),Xn[1]=kr(t,n,o,h);var d=Mc(ho,Xn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<Z7);p++){var v=u-c,g=u+c;Xn[0]=kr(e,r,i,v),Xn[1]=kr(t,n,o,v);var d=Mc(Xn,ho);if(v>=0&&d<f)u=v,f=d;else{xc[0]=kr(e,r,i,g),xc[1]=kr(t,n,o,g);var m=Mc(xc,ho);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=kr(e,r,i,u),l[1]=kr(t,n,o,u)),ys(f)}function EZ(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=kr(e,r,i,h),p=kr(t,n,o,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var AZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function t9(e){var t=e&&AZ.exec(e);if(t){var r=t[1].split(","),n=+mo(r[0]),i=+mo(r[1]),o=+mo(r[2]),a=+mo(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Pm(0,n,o,1,l,s)&&or(0,i,a,1,s[0])}}}var CZ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Dr,this.ondestroy=t.ondestroy||Dr,this.onrestart=t.onrestart||Dr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:q7[t]||t9(t)},e}();const MZ=CZ;var e9=function(){function e(t){this.value=t}return e}(),kZ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new e9(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),xZ=function(){function e(t){this._list=new kZ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new e9(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const C0=xZ;var ZM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Mi(e){return e=Math.round(e),e<0?0:e>255?255:e}function LZ(e){return e=Math.round(e),e<0?0:e>360?360:e}function jd(e){return e<0?0:e>1?1:e}function T_(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Mi(parseFloat(t)/100*255):Mi(parseInt(t,10))}function Fl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?jd(parseFloat(t)/100):jd(parseFloat(t))}function P_(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function fs(e,t,r){return e+(t-e)*r}function Vn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function PS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var r9=new C0(20),Pp=null;function Lu(e,t){Pp&&PS(Pp,t),Pp=r9.put(e,Pp||t.slice())}function qn(e,t){if(!!e){t=t||[];var r=r9.get(e);if(r)return PS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in ZM)return PS(t,ZM[n]),Lu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Vn(t,0,0,0,1);return}return Vn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Lu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Vn(t,0,0,0,1);return}return Vn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Lu(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Vn(t,+u[0],+u[1],+u[2],1):Vn(t,0,0,0,1);c=Fl(u.pop());case"rgb":if(u.length>=3)return Vn(t,T_(u[0]),T_(u[1]),T_(u[2]),u.length===3?c:Fl(u[3])),Lu(e,t),t;Vn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Vn(t,0,0,0,1);return}return u[3]=Fl(u[3]),ES(u,t),Lu(e,t),t;case"hsl":if(u.length!==3){Vn(t,0,0,0,1);return}return ES(u,t),Lu(e,t),t;default:return}}Vn(t,0,0,0,1)}}function ES(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Fl(e[1]),i=Fl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Vn(t,Mi(P_(a,o,r+1/3)*255),Mi(P_(a,o,r)*255),Mi(P_(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function IZ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function KM(e,t){var r=qn(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return sa(r,r.length===4?"rgba":"rgb")}}function E_(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Mi(fs(a[0],s[0],l)),r[1]=Mi(fs(a[1],s[1],l)),r[2]=Mi(fs(a[2],s[2],l)),r[3]=jd(fs(a[3],s[3],l)),r}}function OZ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=qn(t[i]),s=qn(t[o]),l=n-i,u=sa([Mi(fs(a[0],s[0],l)),Mi(fs(a[1],s[1],l)),Mi(fs(a[2],s[2],l)),jd(fs(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function A_(e,t,r,n){var i=qn(e);if(e)return i=IZ(i),t!=null&&(i[0]=LZ(t)),r!=null&&(i[1]=Fl(r)),n!=null&&(i[2]=Fl(n)),sa(ES(i),"rgba")}function AS(e,t){var r=qn(e);if(r&&t!=null)return r[3]=jd(t),sa(r,"rgba")}function sa(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Cm(e,t){var r=qn(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function RZ(e){return e.type==="linear"}function DZ(e){return e.type==="radial"}(function(){return Xt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var CS=Array.prototype.slice;function Zo(e,t,r){return(t-e)*r+e}function C_(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=Zo(t[o],r[o],n);return e}function NZ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=Zo(t[a][s],r[a][s],n)}return e}function Ep(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function JM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function FZ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function BZ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:CS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function vd(e){if(Fr(e)){var t=e.length;if(Fr(e[0])){for(var r=[],n=0;n<t;n++)r.push(CS.call(e[n]));return r}return CS.call(e)}return e}function Dg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function $Z(e){return Fr(e&&e[0])?2:1}var Ap=0,Ng=1,n9=2,Hh=3,MS=4,kS=5,QM=6;function ek(e){return e===MS||e===kS}function Cp(e){return e===Ng||e===n9}var Kf=[0,0,0,0],zZ=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=QM,l=r;if(Fr(r)){var u=$Z(r);s=u,(u===1&&!be(r[0])||u===2&&!be(r[0][0]))&&(a=!0)}else if(be(r)&&!wm(r))s=Ap;else if(Et(r))if(!isNaN(+r))s=Ap;else{var c=qn(r);c&&(l=c,s=Hh)}else if($1(r)){var f=ot({},l);f.colorStops=Ct(r.colorStops,function(d){return{offset:d.offset,color:qn(d.color)}}),RZ(r)?s=MS:DZ(r)&&(s=kS),l=f}o===0?this.valType=s:(s!==this.valType||s===QM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:q7[n]||t9(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=Cp(i),u=ek(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?BZ(h,d,i):u&&FZ(h.colorStops,d.colorStops))}if(!s&&i!==kS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===Ap?n[c].additiveValue=n[c].value-p:i===Hh?n[c].additiveValue=Ep([],n[c].value,p,-1):Cp(i)&&(n[c].additiveValue=i===Ng?Ep([],n[c].value,p,-1):JM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===Hh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var y=n?this._additiveValue:u?Kf:t[l];if((Cp(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(Cp(o))o===Ng?C_(y,d[i],p[i],m):NZ(y,d[i],p[i],m);else if(ek(o)){var _=d[i],w=p[i],T=o===MS;t[l]={type:T?"linear":"radial",x:Zo(_.x,w.x,m),y:Zo(_.y,w.y,m),colorStops:Ct(_.colorStops,function(P,C){var A=w.colorStops[C];return{offset:Zo(P.offset,A.offset,m),color:Dg(C_([],P.color,A.color,m))}}),global:w.global},T?(t[l].x2=Zo(_.x2,w.x2,m),t[l].y2=Zo(_.y2,w.y2,m)):t[l].r=Zo(_.r,w.r,m)}else if(u)C_(y,d[i],p[i],m),n||(t[l]=Dg(y));else{var S=Zo(d[i],p[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===Ap?t[n]=t[n]+i:r===Hh?(qn(t[n],Kf),Ep(Kf,Kf,i,1),t[n]=Dg(Kf)):r===Ng?Ep(t[n],t[n],i,1):r===n9&&JM(t[n],t[n],i,1)},e}(),VZ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){PP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ve(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new zZ(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Hh&&u&&(u=Dg(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,vd(u),i),this._trackKeys.push(s)}l.addKeyframe(t,vd(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new MZ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Ct(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=vd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ve(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const xP=VZ;function mc(){return new Date().getTime()}var UZ=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=mc()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(TS(n),!r._paused&&r.update())}TS(n)},t.prototype.start=function(){this._running||(this._time=mc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=mc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=mc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new xP(r,n.loop);return this.addAnimator(i),i},t}(Bi);const GZ=UZ;var jZ=300,M_=Xt.domSupported,k_=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Ct(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),rk={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},nk=!1;function xS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function WZ(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function x_(e){e&&(e.zrByTouch=!0)}function HZ(e,t){return Un(e.dom,new XZ(e,t),!0)}function i9(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var XZ=function(){function e(t,r){this.stopPropagation=Dr,this.stopImmediatePropagation=Dr,this.preventDefault=Dr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),pi={mousedown:function(e){e=Un(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Un(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Un(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Un(this.dom,e);var t=e.toElement||e.relatedTarget;i9(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){nk=!0,e=Un(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){nk||(e=Un(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Un(this.dom,e),x_(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),pi.mousemove.call(this,e),pi.mousedown.call(this,e)},touchmove:function(e){e=Un(this.dom,e),x_(e),this.handler.processGesture(e,"change"),pi.mousemove.call(this,e)},touchend:function(e){e=Un(this.dom,e),x_(e),this.handler.processGesture(e,"end"),pi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<jZ&&pi.click.call(this,e)},pointerdown:function(e){pi.mousedown.call(this,e)},pointermove:function(e){xS(e)||pi.mousemove.call(this,e)},pointerup:function(e){pi.mouseup.call(this,e)},pointerout:function(e){xS(e)||pi.mouseout.call(this,e)}};F(["click","dblclick","contextmenu"],function(e){pi[e]=function(t){t=Un(this.dom,t),this.trigger(e,t)}});var LS={pointermove:function(e){xS(e)||LS.mousemove.call(this,e)},pointerup:function(e){LS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function YZ(e,t){var r=t.domHandlers;Xt.pointerEventsSupported?F(k_.pointer,function(n){Fg(t,n,function(i){r[n].call(e,i)})}):(Xt.touchEventsSupported&&F(k_.touch,function(n){Fg(t,n,function(i){r[n].call(e,i),WZ(t)})}),F(k_.mouse,function(n){Fg(t,n,function(i){i=CP(i),t.touching||r[n].call(e,i)})}))}function qZ(e,t){Xt.pointerEventsSupported?F(rk.pointer,r):Xt.touchEventsSupported||F(rk.mouse,r);function r(n){function i(o){o=CP(o),i9(e,o.target)||(o=HZ(e,o),t.domHandlers[n].call(e,o))}Fg(t,n,i,{capture:!0})}}function Fg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,nZ(e.domTarget,t,r,n)}function L_(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&iZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var ik=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),ZZ=function(e){Ae(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new ik(r,pi),M_&&(i._globalHandlerScope=new ik(document,LS)),YZ(i,i._localHandlerScope),i}return t.prototype.dispose=function(){L_(this._localHandlerScope),M_&&L_(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,M_&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?qZ(this,n):L_(n)}},t}(Bi);const KZ=ZZ;var o9=1;Xt.hasGlobalWindow&&(o9=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Mm=o9,IS=.4,OS="#333",RS="#ccc",JZ="#eee",ok=MP,ak=5e-5;function qs(e){return e>ak||e<-ak}var Zs=[],Iu=[],I_=Wc(),O_=Math.abs,Ml=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return qs(this.rotation)||qs(this.x)||qs(this.y)||qs(this.scaleX-1)||qs(this.scaleY-1)||qs(this.skewX)||qs(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&ok(n);return}n=n||Wc(),r?this.getLocalTransform(n):ok(n),t&&(r?kc(n,t,n):G7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Zs);var n=Zs[0]<0?-1:1,i=Zs[1]<0?-1:1,o=((Zs[0]-n)*r+n)/Zs[0]||0,a=((Zs[1]-i)*r+i)/Zs[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Wc(),V1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(kc(Iu,t.invTransform,r),r=Iu);var n=this.originX,i=this.originY;(n||i)&&(I_[4]=n,I_[5]=i,kc(Iu,r,I_),Iu[4]-=n,Iu[5]-=i,r=Iu),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&qr(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&qr(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&O_(t[0]-1)>1e-10&&O_(t[3]-1)>1e-10?Math.sqrt(O_(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){QZ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&kP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Eo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function QZ(e,t){for(var r=0;r<Eo.length;r++){var n=Eo[r];e[n]=t[n]}}var sk={};function An(e,t){t=t||Yl;var r=sk[t];r||(r=sk[t]=new C0(500));var n=r.get(e);return n==null&&(n=lu.measureText(e,t).width,r.put(e,n)),n}function lk(e,t,r,n){var i=An(e,t),o=IP(t),a=Xh(0,i,r),s=hc(0,o,n),l=new oe(a,s,i,o);return l}function LP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return lk(i[0],t,r,n);for(var a=new oe(0,0,0,0),s=0;s<i.length;s++){var l=lk(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Xh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function hc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function IP(e){return An("\u56FD",e)}function ha(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function km(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ha(n[0],r.width),u+=ha(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var R_="__zr_normal__",D_=Eo.concat(["ignore"]),tK=uu(Eo,function(e,t){return e[t]=!0,e},{ignore:!1}),Ou={},eK=new oe(0,0,0,0),OP=function(){function e(t){this.id=N7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=eK;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ou,n,c):km(Ou,n,c),o.x=Ou.x,o.y=Ou.y,a=Ou.align,s=Ou.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ha(f[0],c.width),d=ha(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;v&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==g.fill||y!==g.stroke||_!==g.autoStroke||a!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=y,g.autoStroke=_,g.align=a,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=Pn,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?RS:OS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&qn(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,sa(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ot(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(It(t))for(var n=t,i=ve(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==R_)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,D_)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(R_,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===R_,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ue(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){PP("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Pn),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,h),g&&g.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Pn)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ue(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=ue(i,t),a=ue(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ot(r,o),o.textConfig&&(n=n||{},ot(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=ot({},i?this.textConfig:n.textConfig),ot(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<D_.length;c++){var f=D_[c],h=o&&tK[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Ml,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ot(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Pn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new xP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=ue(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){N_(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){N_(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=N_(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Pn;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Fi(OP,Bi);Fi(OP,Ml);function N_(e,t,r,n,i){r=r||{};var o=[];a9(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function F_(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function rK(e){return Fr(e[0])}function nK(e,t,r){if(Fr(t[r]))if(Fr(e[r])||(e[r]=[]),kn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),F_(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(rK(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?F_(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else F_(o,i,a);o.length=i.length}else e[r]=t[r]}function iK(e,t){return e===t||Fr(e)&&Fr(t)&&oK(e,t)}function oK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function a9(e,t,r,n,i,o,a,s){for(var l=ve(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!It(o),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],y=n[m];if(y!=null&&r[m]!=null&&(d||o[m]))if(It(y)&&!Fr(y)&&!$1(y)){if(t){s||(r[m]=y,e.updateDuringAnimation(t));continue}a9(e,m,r[m],y,i,o&&o[m],a,s)}else v.push(m);else s||(r[m]=y,e.updateDuringAnimation(t),v.push(m))}var _=v.length;if(!f&&_)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var P=ue(p,T);p.splice(P,1)}}}if(i.force||(v=yr(v,function(k){return!iK(n[k],r[k])}),_=v.length),_>0||i.force&&!a.length){var C=void 0,A=void 0,M=void 0;if(s){A={},h&&(C={});for(var w=0;w<_;w++){var m=v[w];A[m]=r[m],h?C[m]=n[m]:r[m]=n[m]}}else if(h){M={};for(var w=0;w<_;w++){var m=v[w];M[m]=vd(r[m]),nK(r,n,m)}}var T=new xP(r,!1,!1,f?yr(p,function(R){return R.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&C&&T.whenWithKeys(0,C,v),M&&T.whenWithKeys(0,M,v),T.whenWithKeys(u==null?500:u,s?A:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const s9=OP;var l9=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=ue(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=ue(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new oe(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(oe.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(s9);l9.prototype.type="group";const De=l9;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Bg={},u9={};function aK(e){delete u9[e]}function sK(e){if(!e)return!1;if(typeof e=="string")return Cm(e,1)<IS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Cm(t[i].color,1);return r/=n,r<IS}return!1}var lK=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new bZ,a=n.renderer||"canvas";Bg[a]||(a=ve(Bg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new Bg[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Xt.node&&!Xt.worker&&!l?new KZ(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Xt.touchEventsSupported:!!c,h=44,d;f&&(d=qt(n.pointerSize,h)),this.handler=new vZ(o,s,u,s.root,d),this.animation=new GZ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=sK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=mc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=mc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof De&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,aK(this.id)},e}();function uk(e,t){var r=new lK(N7(),e,t);return u9[r.id]=r,r}function uK(e,t){Bg[e]=t}var ck=1e-4,c9=20;function cK(e){return e.replace(/^\s+|\s+$/g,"")}function da(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function We(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Et(e)?cK(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),c9),e=(+e).toFixed(t),r?e:+e}function xm(e){return e.sort(function(t,r){return t-r}),e}function yo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return fK(e)}function fK(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function hK(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function dK(e,t){var r=Math.max(yo(e),yo(t)),n=e+t;return r>c9?n:qe(n,r)}function f9(e){var t=Math.PI*2;return(e%t+t)%t}function Lm(e){return e>-ck&&e<ck}var pK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function pa(e){if(e instanceof Date)return e;if(Et(e)){var t=pK.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function vK(e){return Math.pow(10,RP(e))}function RP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function h9(e,t){var r=RP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function fk(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function As(e){var t=parseFloat(e);return t==e&&(t!==0||!Et(e)||e.indexOf("x")<=0)?t:NaN}function gK(e){return!isNaN(As(e))}function d9(){return Math.round(Math.random()*9)}function p9(e,t){return t===0?e:p9(t,e%t)}function hk(e,t){return e==null?t:t==null?e:e*t/p9(e,t)}function re(e){throw new Error(e)}function dk(e,t,r){return(t-e)*r+e}var v9="series\0",mK="\0_ec_\0";function Ze(e){return e instanceof Array?e:e==null?[]:[e]}function DS(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var pk=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function M0(e){return It(e)&&!ct(e)&&!(e instanceof Date)?e.value:e}function yK(e){return It(e)&&!(e instanceof Array)}function _K(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();F(t,function(l,u){if(!It(l)){t[u]=null;return}});var s=bK(e,a,r);return(n||i)&&wK(s,e,a,t),n&&SK(s,t),n||i?TK(s,t,i):o&&PK(s,t),EK(s),s}function bK(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Wd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function wK(e,t,r,n){F(n,function(i,o){if(!(!i||i.id==null)){var a=gd(i.id),s=r.get(a);if(s!=null){var l=e[s];Ii(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function SK(e,t){F(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Wd(r)&&!Wd(o)&&g9("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function TK(e,t,r){F(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Wd(i.existing)||i.existing&&n.id!=null&&!g9("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function PK(e,t){F(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function EK(e){var t=jt();F(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),F(e,function(r){var n=r.newOption;Ii(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),F(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!It(o)){if(a.name=o.name!=null?gd(o.name):i?i.name:v9+n,i)a.id=gd(i.id);else if(o.id!=null)a.id=gd(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function g9(e,t,r){var n=Zn(t[e],null),i=Zn(r[e],null);return n!=null&&i!=null&&n===i}function gd(e){return Zn(e,"")}function Zn(e,t){return e==null?t:Et(e)?e:be(e)||gS(e)?e+"":t}function DP(e){var t=e.name;return!!(t&&t.indexOf(v9))}function Wd(e){return e&&e.id!=null&&gd(e.id).indexOf(mK)===0}function AK(e,t,r){F(e,function(n){var i=n.newOption;It(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=CK(t,i,n.existing,r))})}function CK(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function MK(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=Zn(a[u].seriesId,null);if(f==null)return;for(var h=Ze(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Zl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ct(t.dataIndex)?Ct(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ct(t.name)?Ct(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Oe(){var e="__ec_inner_"+kK++;return function(t){return t[e]||(t[e]={})}}var kK=d9();function B_(e,t,r){var n=NP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=k0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function NP(e,t){var r;if(Et(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return F(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&ue(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var Si={useDefault:!0,enableAll:!1,enableNone:!1};function k0(e,t,r,n){n=n||Si;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Ii(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Ii(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function m9(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function xK(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function LK(e){return e==="auto"?Xt.domSupported?"html":"richText":e||"html"}function IK(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(be(n)){var a=dk(r||0,n,i);return qe(a,o?Math.max(yo(r||0),yo(n)):t)}else{if(Et(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=dk(d,p,i);s[f]=qe(a,o?Math.max(yo(d),yo(p)):t)}}return s}}var OK=".",Ks="___EC__COMPONENT__CONTAINER___",y9="___EC__EXTENDED_CLASS___";function _o(e){var t={main:"",sub:""};if(e){var r=e.split(OK);t.main=r[0]||"",t.sub=r[1]||""}return t}function RK(e){Ii(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function DK(e){return!!(e&&e[y9])}function FP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return NK(n)?i=function(o){mt(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Oq(i,this)),ot(i.prototype,r),i[y9]=!0,i.extend=this.extend,i.superCall=$K,i.superApply=zK,i.superClass=n,i}}function NK(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function _9(e,t){e.extend=t.extend}var FK=Math.round(Math.random()*10);function BK(e){var t=["__\0is_clz",FK++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function $K(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function zK(e,t,r){return this.superClass.prototype[t].apply(e,r)}function U1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){RK(i),n.prototype.type=i;var o=_o(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Ks){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[Ks]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=_o(n),o=[],a=t[i.main];return a&&a[Ks]?F(a,function(s,l){l!==Ks&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=_o(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return F(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=_o(n),o=t[i.main];return o&&o[Ks]};function r(n){var i=t[n.main];return(!i||!i[Ks])&&(i=t[n.main]={},i[Ks]=!0),i}}function Hd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&ue(i,l)>=0||o&&ue(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var VK=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],UK=Hd(VK),GK=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return UK(this,t,r)},e}(),NS=new C0(50);function jK(e){if(typeof e=="string"){var t=NS.get(e);return t&&t.image}else return e}function b9(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=NS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!G1(t)&&o.pending.push(a)):(t=lu.loadImage(e,vk,vk),t.__zrImageSrc=e,NS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function vk(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function G1(e){return e&&e.width&&e.height}var $_=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function WK(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=w9(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=S9(o[a],i);return o.join(`
`)}function w9(e,t,r,n){n=n||{};var i=ot({},n);i.font=t,r=qt(r,"..."),i.maxIterations=qt(n.maxIterations,2);var o=i.minChar=qt(n.minChar,0);i.cnCharWidth=An("\u56FD",t);var a=i.ascCharWidth=An("a",t);i.placeholder=qt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=An(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function S9(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=An(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?HK(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=An(e,n)}return e===""&&(e=t.placeholder),e}function HK(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function XK(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=IP(i),s=qt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?T9(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=qt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=w9(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<f.length;g++)f[g]=S9(f[g],v);for(var m=d,y=0,g=0;g<f.length;g++)y=Math.max(An(f[g],i),y);c==null&&(c=y);var _=y;return n&&(m+=n[0]+n[2],_+=n[1]+n[3],c+=n[1]+n[3]),l&&(_=c),{lines:f,height:d,outerWidth:_,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:y,contentHeight:h,width:c}}var YK=function(){function e(){}return e}(),gk=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),qK=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function ZK(e,t){var r=new qK;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=$_.lastIndex=0,l;(l=$_.exec(e))!=null;){var u=l.index;u>s&&z_(r,e.substring(s,u),t,a),z_(r,l[2],t,a,l[1]),s=$_.lastIndex}s<e.length&&z_(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function g(q,tt,Pt){q.width=tt,q.lineHeight=Pt,f+=Pt,h=Math.max(h,tt)}t:for(var m=0;m<r.lines.length;m++){for(var y=r.lines[m],_=0,w=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],P=S.styleName&&t.rich[S.styleName]||{},C=S.textPadding=P.padding,A=C?C[1]+C[3]:0,M=S.font=P.font||t.font;S.contentHeight=IP(M);var k=qt(P.height,S.contentHeight);if(S.innerHeight=k,C&&(k+=C[0]+C[2]),S.height=k,S.lineHeight=dd(P.lineHeight,t.lineHeight,k),S.align=P&&P.align||t.align,S.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),g(y,w,_),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break t}var R=P.width,B=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")S.percentWidth=R,c.push(S),S.contentWidth=An(S.text,M);else{if(B){var z=P.backgroundColor,N=z&&z.image;N&&(N=jK(N),G1(N)&&(S.width=Math.max(S.width,N.width*k/N.height)))}var j=p&&n!=null?n-w:null;j!=null&&j<S.width?!B||j<A?(S.text="",S.width=S.contentWidth=0):(S.text=WK(S.text,j-A,M,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=An(S.text,M)):S.contentWidth=An(S.text,M)}S.width+=A,w+=S.width,P&&(_=Math.max(_,S.lineHeight))}g(y,w,_)}r.outerWidth=r.width=qt(n,h),r.outerHeight=r.height=qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var S=c[m],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function z_(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ha(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=T9(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],y=new YK;if(y.styleName=i,y.text=m,y.isLineHolder=!m&&!o,typeof a.width=="number"?y.width=a.width:y.width=f?f[g]:An(m,l),!g&&!u){var _=(s[s.length-1]||(s[0]=new gk)).tokens,w=_.length;w===1&&_[0].isLineHolder?_[0]=y:(m||!w||o)&&_.push(y)}else s.push(new gk([y]))}}function KK(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var JK=uu(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function QK(e){return KK(e)?!!JK[e]:!0}function T9(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=An(h,t),p=n?!1:!QK(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var FS="__zr_style_"+Math.round(Math.random()*10),Bl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},j1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Bl[FS]=!0;var mk=["z","z2","invisible"],tJ=["invisible"],eJ=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&rJ(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new oe(0,0,0,0)),n?oe.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new oe(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ot(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Wh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Wh)},t.prototype.styleUpdated=function(){this.__dirty&=~Wh},t.prototype.createStyle=function(r){return z1(Bl,r)},t.prototype.useStyle=function(r){r[FS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[FS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,mk)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ve(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ve(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?tJ:mk,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ot(r,n),r},t.prototype.getAnimationStyleProps=function(){return j1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Pn|Wh}(),t}(s9),V_=new oe(0,0,0,0),U_=new oe(0,0,0,0);function rJ(e,t,r){return V_.copy(e.getBoundingRect()),e.transform&&V_.applyTransform(e.transform),U_.width=t,U_.height=r,!V_.intersect(U_)}const cu=eJ;var ln=Math.min,un=Math.max,G_=Math.sin,j_=Math.cos,Js=Math.PI*2,Mp=cf(),kp=cf(),xp=cf();function nJ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=ln(i,n[0]),o=un(o,n[0]),a=ln(a,n[1]),s=un(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function yk(e,t,r,n,i,o){i[0]=ln(e,r),i[1]=ln(t,n),o[0]=un(e,r),o[1]=un(t,n)}var _k=[],bk=[];function iJ(e,t,r,n,i,o,a,s,l,u){var c=J7,f=or,h=c(e,r,i,a,_k);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,_k[d]);l[0]=ln(p,l[0]),u[0]=un(p,u[0])}h=c(t,n,o,s,bk);for(var d=0;d<h;d++){var v=f(t,n,o,s,bk[d]);l[1]=ln(v,l[1]),u[1]=un(v,u[1])}l[0]=ln(e,l[0]),u[0]=un(e,u[0]),l[0]=ln(a,l[0]),u[0]=un(a,u[0]),l[1]=ln(t,l[1]),u[1]=un(t,u[1]),l[1]=ln(s,l[1]),u[1]=un(s,u[1])}function oJ(e,t,r,n,i,o,a,s){var l=Q7,u=kr,c=un(ln(l(e,r,i),1),0),f=un(ln(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=ln(e,i,h),a[1]=ln(t,o,d),s[0]=un(e,i,h),s[1]=un(t,o,d)}function aJ(e,t,r,n,i,o,a,s,l){var u=vc,c=gc,f=Math.abs(i-o);if(f%Js<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(Mp[0]=j_(i)*r+e,Mp[1]=G_(i)*n+t,kp[0]=j_(o)*r+e,kp[1]=G_(o)*n+t,u(s,Mp,kp),c(l,Mp,kp),i=i%Js,i<0&&(i=i+Js),o=o%Js,o<0&&(o=o+Js),i>o&&!a?o+=Js:i<o&&a&&(i+=Js),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(xp[0]=j_(d)*r+e,xp[1]=G_(d)*n+t,u(s,xp,s),c(l,xp,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Qs=[],tl=[],Xi=[],Oa=[],Yi=[],qi=[],W_=Math.min,H_=Math.max,el=Math.cos,rl=Math.sin,Vo=Math.abs,BS=Math.PI,is=BS*2,X_=typeof Float32Array<"u",Jf=[];function Y_(e){var t=Math.round(e/BS*1e8)/1e8;return t%2*BS}function sJ(e,t){var r=Y_(e[0]);r<0&&(r+=is);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=is?i=r+is:t&&r-i>=is?i=r-is:!t&&r>i?i=r+(is-Y_(r-i)):t&&r<i&&(i=r-(is-Y_(i-r))),e[0]=r,e[1]=i}var lJ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Vo(n/Mm/t)||0,this._uy=Vo(n/Mm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Vo(t-this._xi),i=Vo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),Jf[0]=i,Jf[1]=o,sJ(Jf,a),i=Jf[0],o=Jf[1];var s=o-i;return this.addData(ye.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=el(o)*n+t,this._yi=rl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&X_&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();X_&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,X_&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Xi[0]=Xi[1]=Yi[0]=Yi[1]=Number.MAX_VALUE,Oa[0]=Oa[1]=qi[0]=qi[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case ye.M:r=i=t[a++],n=o=t[a++],Yi[0]=i,Yi[1]=o,qi[0]=i,qi[1]=o;break;case ye.L:yk(r,n,t[a],t[a+1],Yi,qi),r=t[a++],n=t[a++];break;case ye.C:iJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Yi,qi),r=t[a++],n=t[a++];break;case ye.Q:oJ(r,n,t[a++],t[a++],t[a],t[a+1],Yi,qi),r=t[a++],n=t[a++];break;case ye.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=el(d)*f+u,o=rl(d)*h+c),aJ(u,c,f,h,d,p,v,Yi,qi),r=el(p)*f+u,n=rl(p)*h+c;break;case ye.R:i=r=t[a++],o=n=t[a++];var g=t[a++],m=t[a++];yk(i,o,i+g,o+m,Yi,qi);break;case ye.Z:r=i,n=o;break}vc(Xi,Xi,Yi),gc(Oa,Oa,qi)}return a===0&&(Xi[0]=Xi[1]=Oa[0]=Oa[1]=0),new oe(Xi[0],Xi[1],Oa[0]-Xi[0],Oa[1]-Xi[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case ye.M:o=s=t[h++],a=l=t[h++];break;case ye.L:{var g=t[h++],m=t[h++],y=g-o,_=m-a;(Vo(y)>n||Vo(_)>i||h===r-1)&&(v=Math.sqrt(y*y+_*_),o=g,a=m);break}case ye.C:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++],S=t[h++],P=t[h++];v=SZ(o,a,w,T,g,m,S,P,10),o=S,a=P;break}case ye.Q:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++];v=EZ(o,a,w,T,g,m,10),o=g,a=m;break}case ye.A:var C=t[h++],A=t[h++],M=t[h++],k=t[h++],R=t[h++],B=t[h++],z=B+R;h+=1,t[h++],p&&(s=el(R)*M+C,l=rl(R)*k+A),v=H_(M,k)*W_(is,Math.abs(B)),o=el(z)*M+C,a=rl(z)*k+A;break;case ye.R:{s=o=t[h++],l=a=t[h++];var N=t[h++],j=t[h++];v=N*2+j*2;break}case ye.Z:{var y=s-o,_=l-a;v=Math.sqrt(y*y+_*_),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,y,_=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y))return;t:for(var S=0;S<a;){var P=n[S++],C=S===1;switch(C&&(u=n[S],c=n[S+1],s=u,l=c),P!==ye.L&&_>0&&(t.lineTo(w,T),_=0),P){case ye.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=Vo(f-u),M=Vo(h-c);if(A>i||M>o){if(d){var k=p[m++];if(g+k>y){var R=(y-g)/k;t.lineTo(u*(1-R)+f*R,c*(1-R)+h*R);break t}g+=k}t.lineTo(f,h),u=f,c=h,_=0}else{var B=A*A+M*M;B>_&&(w=f,T=h,_=B)}break}case ye.C:{var z=n[S++],N=n[S++],j=n[S++],Z=n[S++],q=n[S++],tt=n[S++];if(d){var k=p[m++];if(g+k>y){var R=(y-g)/k;Em(u,z,j,q,R,Qs),Em(c,N,Z,tt,R,tl),t.bezierCurveTo(Qs[1],tl[1],Qs[2],tl[2],Qs[3],tl[3]);break t}g+=k}t.bezierCurveTo(z,N,j,Z,q,tt),u=q,c=tt;break}case ye.Q:{var z=n[S++],N=n[S++],j=n[S++],Z=n[S++];if(d){var k=p[m++];if(g+k>y){var R=(y-g)/k;Am(u,z,j,R,Qs),Am(c,N,Z,R,tl),t.quadraticCurveTo(Qs[1],tl[1],Qs[2],tl[2]);break t}g+=k}t.quadraticCurveTo(z,N,j,Z),u=j,c=Z;break}case ye.A:var Pt=n[S++],Ot=n[S++],bt=n[S++],wt=n[S++],Ht=n[S++],Y=n[S++],nt=n[S++],K=!n[S++],pt=bt>wt?bt:wt,St=Vo(bt-wt)>.001,At=Ht+Y,st=!1;if(d){var k=p[m++];g+k>y&&(At=Ht+Y*(y-g)/k,st=!0),g+=k}if(St&&t.ellipse?t.ellipse(Pt,Ot,bt,wt,nt,Ht,At,K):t.arc(Pt,Ot,pt,Ht,At,K),st)break t;C&&(s=el(Ht)*bt+Pt,l=rl(Ht)*wt+Ot),u=el(At)*bt+Pt,c=rl(At)*wt+Ot;break;case ye.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ft=n[S++],$=n[S++];if(d){var k=p[m++];if(g+k>y){var G=y-g;t.moveTo(f,h),t.lineTo(f+W_(G,ft),h),G-=ft,G>0&&t.lineTo(f+ft,h+W_(G,$)),G-=$,G>0&&t.lineTo(f+H_(ft-G,0),h+$),G-=ft,G>0&&t.lineTo(f,h+H_($-G,0));break t}g+=k}t.rect(f,h,ft,$);break;case ye.Z:if(d){var k=p[m++];if(g+k>y){var R=(y-g)/k;t.lineTo(u*(1-R)+s*R,c*(1-R)+l*R);break t}g+=k}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Kl=lJ;function Ru(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function uJ(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=wZ(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function cJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=PZ(e,t,r,n,i,o,s,l,null);return c<=u/2}var wk=Math.PI*2;function Lp(e){return e%=wk,e<0&&(e+=wk),e}var Qf=Math.PI*2;function fJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%Qf<1e-4)return!0;if(o){var f=n;n=Lp(i),i=Lp(f)}else n=Lp(n),i=Lp(i);n>i&&(i+=Qf);var h=Math.atan2(l,s);return h<0&&(h+=Qf),h>=n&&h<=i||h+Qf>=n&&h+Qf<=i}function nl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var Ra=Kl.CMD,il=Math.PI*2,hJ=1e-4;function dJ(e,t){return Math.abs(e-t)<hJ}var Wr=[-1,-1,-1],jn=[-1,-1];function pJ(){var e=jn[0];jn[0]=jn[1],jn[1]=e}function vJ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=Pm(t,n,o,s,u,Wr);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=Wr[v],m=g===0||g===1?.5:1,y=or(e,r,i,a,g);y<l||(h<0&&(h=J7(t,n,o,s,jn),jn[1]<jn[0]&&h>1&&pJ(),d=or(t,n,o,s,jn[0]),h>1&&(p=or(t,n,o,s,jn[1]))),h===2?g<jn[0]?f+=d<t?m:-m:g<jn[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<jn[0]?f+=d<t?m:-m:f+=s<d?m:-m)}return f}function gJ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=TZ(t,n,o,s,Wr);if(l===0)return 0;var u=Q7(t,n,o);if(u>=0&&u<=1){for(var c=0,f=kr(t,n,o,u),h=0;h<l;h++){var d=Wr[h]===0||Wr[h]===1?.5:1,p=kr(e,r,i,Wr[h]);p<a||(Wr[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=Wr[0]===0||Wr[0]===1?.5:1,p=kr(e,r,i,Wr[0]);return p<a?0:o<t?d:-d}}function mJ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);Wr[0]=-l,Wr[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=il-1e-4){n=0,i=il;var c=o?1:-1;return a>=Wr[0]+e&&a<=Wr[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=il,i+=il);for(var h=0,d=0;d<2;d++){var p=Wr[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=il+v),(v>=n&&v<=i||v+il>=n&&v+il<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function P9(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],g=p===1;switch(v===Ra.M&&p>1&&(r||(s+=nl(l,u,c,f,n,i))),g&&(l=o[p],u=o[p+1],c=l,f=u),v){case Ra.M:c=o[p++],f=o[p++],l=c,u=f;break;case Ra.L:if(r){if(Ru(l,u,o[p],o[p+1],t,n,i))return!0}else s+=nl(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Ra.C:if(r){if(uJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=vJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Ra.Q:if(r){if(cJ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=gJ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Ra.A:var m=o[p++],y=o[p++],_=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var P=!!(1-o[p++]);h=Math.cos(T)*_+m,d=Math.sin(T)*w+y,g?(c=h,f=d):s+=nl(l,u,h,d,n,i);var C=(n-m)*w/_+m;if(r){if(fJ(m,y,w,T,T+S,P,t,C,i))return!0}else s+=mJ(m,y,w,T,T+S,P,C,i);l=Math.cos(T+S)*_+m,u=Math.sin(T+S)*w+y;break;case Ra.R:c=l=o[p++],f=u=o[p++];var A=o[p++],M=o[p++];if(h=c+A,d=f+M,r){if(Ru(c,f,h,f,t,n,i)||Ru(h,f,h,d,t,n,i)||Ru(h,d,c,d,t,n,i)||Ru(c,d,c,f,t,n,i))return!0}else s+=nl(h,f,h,d,n,i),s+=nl(c,d,c,f,n,i);break;case Ra.Z:if(r){if(Ru(l,u,c,f,t,n,i))return!0}else s+=nl(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!dJ(u,f)&&(s+=nl(l,u,c,f,n,i)||0),s!==0}function yJ(e,t,r){return P9(e,0,!1,t,r)}function _J(e,t,r,n){return P9(e,t,!0,r,n)}var E9=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Bl),bJ={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},j1.style)},q_=Eo.concat(["invisible","culling","z","z2","zlevel","parent"]),wJ=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<q_.length;++s)i[q_[s]]=this[q_[s]];i.__dirty|=Pn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ve(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Et(r)){var n=Cm(r,0);return n>.5?OS:n>.2?JZ:RS}else if(r)return RS}return OS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Et(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=Cm(r,0)<IS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~fc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Kl(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&fc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),_J(s,l/u,r,n)))return!0}if(this.hasFill())return yJ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=fc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ot(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&fc)},t.prototype.createStyle=function(r){return z1(E9,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ot({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=ot({},i.shape),ot(u,n.shape)):(u=ot({},o?this.shape:i.shape),ot(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=ot({},this.shape);for(var c={},f=ve(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return bJ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ae(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(r.style)},a.prototype.getDefaultShape=function(){return zt(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Pn|Wh|fc}(),t}(cu);const fe=wJ;var SJ=te({strokeFirst:!0,font:Yl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},E9),A9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return z1(SJ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=LP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(cu);A9.prototype.type="tspan";const $S=A9;var TJ=te({x:0,y:0},Bl),PJ={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},j1.style)};function EJ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var C9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return z1(TJ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=EJ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return PJ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new oe(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(cu);C9.prototype.type="image";const Sa=C9;function AJ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var yc=Math.round;function M9(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(yc(n*2)===yc(i*2)&&(e.x1=e.x2=kl(n,s,!0)),yc(o*2)===yc(a*2)&&(e.y1=e.y2=kl(o,s,!0))),e}}function k9(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=kl(n,s,!0),e.y=kl(i,s,!0),e.width=Math.max(kl(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(kl(i+a,s,!1)-e.y,a===0?0:1)),e}}function kl(e,t,r){if(!t)return e;var n=yc(e*2);return(n+yc(t))%2===0?n/2:(n+(r?1:-1))/2}var CJ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),MJ={},x9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new CJ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=k9(MJ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?AJ(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(fe);x9.prototype.type="rect";const Ke=x9;var Sk={fill:"#000"},Tk=2,kJ={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},j1.style)},L9=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=Sk,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,RJ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new oe(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||Sk},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ot(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ve(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},ot(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return kJ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Yl,i=r.padding,o=xk(r),a=XK(o,r),s=Z_(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",_=v,w=hc(g,a.contentHeight,y);if(s||i){var T=Xh(v,c,m),S=hc(g,u,y);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(_=kk(v,m,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var P=0,C=!1,A=Mk("fill"in r?r.fill:(C=!0,p.fill)),M=Ck("stroke"in r?r.stroke:!l&&(!p.autoStroke||C)?(P=Tk,p.stroke):null),k=r.textShadowBlur>0,R=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=a.calculatedLineHeight,z=0;z<h.length;z++){var N=this._getOrCreateChild($S),j=N.createStyle();N.useStyle(j),j.text=h[z],j.x=_,j.y=w,m&&(j.textAlign=m),j.textBaseline="middle",j.opacity=r.opacity,j.strokeFirst=!0,k&&(j.shadowBlur=r.textShadowBlur||0,j.shadowColor=r.textShadowColor||"transparent",j.shadowOffsetX=r.textShadowOffsetX||0,j.shadowOffsetY=r.textShadowOffsetY||0),j.stroke=M,j.fill=A,M&&(j.lineWidth=r.lineWidth||P,j.lineDash=r.lineDash,j.lineDashOffset=r.lineDashOffset||0),j.font=n,Ek(j,r),w+=d,R&&N.setBoundingRect(new oe(Xh(j.x,r.width,j.textAlign),hc(j.y,B,j.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=xk(r),i=ZK(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Xh(u,a,h),v=hc(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var y=g+o;Z_(r)&&this._renderBackground(r,r,p,v,a,s);for(var _=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,P=S.length,C=T.lineHeight,A=T.width,M=0,k=g,R=y,B=P-1,z=void 0;M<P&&(z=S[M],!z.align||z.align==="left");)this._placeToken(z,r,C,m,k,"left",_),A-=z.width,k+=z.width,M++;for(;B>=0&&(z=S[B],z.align==="right");)this._placeToken(z,r,C,m,R,"right",_),A-=z.width,R-=z.width,B--;for(k+=(o-(k-g)-(y-R)-A)/2;M<=B;)z=S[M],this._placeToken(z,r,C,m,k+z.width/2,"center",_),k+=z.width,M++;m+=C}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&Z_(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=kk(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild($S),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,y=!1,_=0,w=Mk("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,m.fill)),T=Ck("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||y)?(_=Tk,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=a,g.y=f,S&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||Yl,g.opacity=dd(u.opacity,n.opacity,1),Ek(g,u),T&&(g.lineWidth=dd(u.lineWidth,n.lineWidth,_),g.lineDash=qt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),w&&(g.fill=w);var P=r.contentWidth,C=r.contentHeight;v.setBoundingRect(new oe(Xh(g.x,P,g.textAlign),hc(g.y,C,g.textBaseline),P,C))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Ke),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=o,m.width=a,m.height=s,m.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=qt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(Sa),g.onload=function(){p.dirtyStyle()};var _=g.style;_.image=l.image,_.x=i,_.y=o,_.width=a,_.height=s}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=qt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||g).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=dd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return OJ(r)&&(n=[r.fontStyle,r.fontWeight,IJ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&mo(n)||r.textFont||r.font},t}(cu),xJ={left:!0,right:1,center:1},LJ={top:1,bottom:1,middle:1},Pk=["fontStyle","fontWeight","fontSize","fontFamily"];function IJ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?wP+"px":e+"px"}function Ek(e,t){for(var r=0;r<Pk.length;r++){var n=Pk[r],i=t[n];i!=null&&(e[n]=i)}}function OJ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function RJ(e){return Ak(e),F(e.rich,Ak),e}function Ak(e){if(e){e.font=L9.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||xJ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||LJ[r]?r:"top";var n=e.padding;n&&(e.padding=F7(e.padding))}}function Ck(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Mk(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function kk(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function xk(e){var t=e.text;return t!=null&&(t+=""),t}function Z_(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Je=L9;var ne=Oe(),DJ=function(e,t,r,n){if(n){var i=ne(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ne(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},Lk=1,Ik={},I9=Oe(),BP=Oe(),$P=0,x0=1,W1=2,ti=["emphasis","blur","select"],Ok=["normal","emphasis","blur","select"],NJ=10,FJ=9,$l="highlight",$g="downplay",md="select",zg="unselect",yd="toggleSelect";function Du(e){return e!=null&&e!=="none"}var Rk=new C0(100);function Dk(e){if(Et(e)){var t=Rk.get(e);return t||(t=KM(e,-.1),Rk.put(e,t)),t}else if($1(e)){var r=ot({},e);return r.colorStops=Ct(e.colorStops,function(n){return{offset:n.offset,color:KM(n.color,-.1)}}),r}return e}function H1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function O9(e){H1(e,"emphasis",W1)}function R9(e){e.hoverState===W1&&H1(e,"normal",$P)}function zP(e){H1(e,"blur",x0)}function D9(e){e.hoverState===x0&&H1(e,"normal",$P)}function BJ(e){e.selected=!0}function $J(e){e.selected=!1}function Nk(e,t,r){t(e,r)}function Ta(e,t,r){Nk(e,t,r),e.isGroup&&e.traverse(function(n){Nk(n,t,r)})}function zS(e,t){switch(t){case"emphasis":e.hoverState=W1;break;case"normal":e.hoverState=$P;break;case"blur":e.hoverState=x0;break;case"select":e.selected=!0}}function zJ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function VJ(e,t,r,n){var i=r&&ue(r,"select")>=0,o=!1;if(e instanceof fe){var a=I9(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Du(s)||Du(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ot({},n),u=ot({},u),u.fill=s):!Du(u.fill)&&Du(s)?(o=!0,n=ot({},n),u=ot({},u),u.fill=Dk(s)):!Du(u.stroke)&&Du(l)&&(o||(n=ot({},n),u=ot({},u)),u.stroke=Dk(l)),n.style=u}}if(n&&n.z2==null){o||(n=ot({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:NJ)}return n}function UJ(e,t,r){if(r&&r.z2==null){r=ot({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:FJ)}return r}function GJ(e,t,r){var n=ue(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:zJ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=ot({},r),a=ot({opacity:n?i:o.opacity*.1},a),r.style=a),r}function K_(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return VJ(this,e,t,r);if(e==="blur")return GJ(this,e,r);if(e==="select")return UJ(this,e,r)}return r}function VP(e){e.stateProxy=K_;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=K_),r&&(r.stateProxy=K_)}function Fk(e,t){!$9(e,t)&&!e.__highByOuter&&Ta(e,O9)}function Bk(e,t){!$9(e,t)&&!e.__highByOuter&&Ta(e,R9)}function Xd(e,t){e.__highByOuter|=1<<(t||0),Ta(e,O9)}function Yd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Ta(e,R9)}function N9(e){Ta(e,zP)}function UP(e){Ta(e,D9)}function F9(e){Ta(e,BJ)}function B9(e){Ta(e,$J)}function $9(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function z9(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=BP(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){D9(u)}),s&&r.push(o)),a.isBlured=!1}),F(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function VS(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&UP(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){zP(g)}),Fr(t))o(u.getData(),t);else if(It(t))for(var p=ve(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),BP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function US(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){BP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){zP(o)})}}}function jJ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Zl(i,t);o=(ct(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ne(a);VS(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&VS(n,c,f,r)}}}function GP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ne(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function WJ(e,t,r){var n=ne(e),i=GP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&US(n.componentMainType,n.componentIndex,r),F(o,function(s){return Fk(s,t)})):(VS(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&US(n.componentMainType,n.componentIndex,r),Fk(e,t))}function HJ(e,t,r){z9(r);var n=ne(e),i=GP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?F(i,function(o){return Bk(o,t)}):Bk(e,t)}function XJ(e,t,r){if(!!WS(t)){var n=t.dataType,i=e.getData(n),o=Zl(i,t);ct(o)||(o=[o]),e[t.type===yd?"toggleSelect":t.type===md?"select":"unselect"](o,n)}}function $k(e){var t=e.getAllData();F(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?F9(o):B9(o)})})}function YJ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();F(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function GS(e,t,r){jP(e,!0),Ta(e,VP),ZJ(e,t,r)}function qJ(e){jP(e,!1)}function Jl(e,t,r,n){n?qJ(e):GS(e,t,r)}function ZJ(e,t,r){var n=ne(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var zk=["emphasis","blur","select"],KJ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function qd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<zk.length;i++){var o=zk[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[KJ[r]]()}}function jP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function jS(e){return!!(e&&e.__highDownDispatcher)}function JJ(e){var t=Ik[e];return t==null&&Lk<=32&&(t=Ik[e]=Lk++),t}function WS(e){var t=e.type;return t===md||t===zg||t===yd}function Vk(e){var t=e.type;return t===$l||t===$g}function QJ(e){var t=I9(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Nu=Kl.CMD,tQ=[[],[],[]],Uk=Math.sqrt,eQ=Math.atan2;function rQ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Nu.M,f=Nu.C,h=Nu.L,d=Nu.R,p=Nu.A,v=Nu.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var g=t[4],m=t[5],y=Uk(t[0]*t[0]+t[1]*t[1]),_=Uk(t[2]*t[2]+t[3]*t[3]),w=eQ(-t[1]/_,t[0]/y);r[a]*=y,r[a++]+=g,r[a]*=_,r[a++]+=m,r[a++]*=y,r[a++]*=_,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],qr(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],qr(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=tQ[l];T[0]=r[a++],T[1]=r[a++],qr(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var J_=Math.sqrt,Ip=Math.sin,Op=Math.cos,th=Math.PI;function Gk(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function HS(e,t){return(e[0]*t[0]+e[1]*t[1])/(Gk(e)*Gk(t))}function jk(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(HS(e,t))}function Wk(e,t,r,n,i,o,a,s,l,u,c){var f=l*(th/180),h=Op(f)*(e-r)/2+Ip(f)*(t-n)/2,d=-1*Ip(f)*(e-r)/2+Op(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=J_(p),s*=J_(p));var v=(i===o?-1:1)*J_((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,g=v*a*d/s,m=v*-s*h/a,y=(e+r)/2+Op(f)*g-Ip(f)*m,_=(t+n)/2+Ip(f)*g+Op(f)*m,w=jk([1,0],[(h-g)/a,(d-m)/s]),T=[(h-g)/a,(d-m)/s],S=[(-1*h-g)/a,(-1*d-m)/s],P=jk(T,S);if(HS(T,S)<=-1&&(P=th),HS(T,S)>=1&&(P=0),P<0){var C=Math.round(P/th*1e6)/1e6;P=th*2+C%2*th}c.addData(u,y,_,a,s,w,P,f,o)}var nQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,iQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function oQ(e){var t=new Kl;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=Kl.CMD,l=e.match(nQ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(iQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0,P=void 0,C=r,A=n,M=void 0,k=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,t.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[g++],h=s.L,t.addData(h,r,n);break;case"H":r=d[g++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,t.addData(h,r,n);break;case"V":n=d[g++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,t.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=d[g++],A=d[g++],r=d[g++],n=d[g++],t.addData(h,m,y,C,A,r,n);break;case"s":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=r+d[g++],A=n+d[g++],r+=d[g++],n+=d[g++],t.addData(h,m,y,C,A,r,n);break;case"Q":C=d[g++],A=d[g++],r=d[g++],n=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"q":C=d[g++]+r,A=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"T":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r=d[g++],n=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"t":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"A":_=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r=d[g++],n=d[g++],h=s.A,Wk(C,A,r,n,S,P,_,w,T,h,t);break;case"a":_=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r+=d[g++],n+=d[g++],h=s.A,Wk(C,A,r,n,S,P,_,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var V9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(fe);function U9(e){return e.setData!=null}function G9(e,t){var r=oQ(e),n=ot({},t);return n.buildPath=function(i){if(U9(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){rQ(r,i),this.dirtyShape()},n}function aQ(e,t){return new V9(G9(e,t))}function sQ(e,t){var r=G9(e,t),n=function(i){Ae(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(V9);return n}function lQ(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new fe(t);return a.createPathProxy(),a.buildPath=function(s){if(U9(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var uQ=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),j9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new uQ},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(fe);j9.prototype.type="circle";const WP=j9;var cQ=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),W9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new cQ},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(fe);W9.prototype.type="ellipse";const H9=W9;var X9=Math.PI,Q_=X9*2,ol=Math.sin,Fu=Math.cos,fQ=Math.acos,Er=Math.atan2,Hk=Math.abs,_d=Math.sqrt,Yh=Math.max,Zi=Math.min,hi=1e-4;function hQ(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<hi))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Rp(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/_d(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,y=p-h,_=v-d,w=y*y+_*_,T=i-o,S=h*v-p*d,P=(_<0?-1:1)*_d(Yh(0,T*T*w-S*S)),C=(S*_-y*P)/w,A=(-S*y-_*P)/w,M=(S*_+y*P)/w,k=(-S*y+_*P)/w,R=C-g,B=A-m,z=M-g,N=k-m;return R*R+B*B>z*z+N*N&&(C=M,A=k),{cx:C,cy:A,x0:-c,y0:-f,x1:C*(i/T-1),y1:A*(i/T-1)}}function dQ(e){var t;if(ct(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function pQ(e,t){var r,n=Yh(t.r,0),i=Yh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=Hk(u-l),p=d>Q_&&d%Q_;if(p>hi&&(d=p),!(n>hi))e.moveTo(c,f);else if(d>Q_-hi)e.moveTo(c+n*Fu(l),f+n*ol(l)),e.arc(c,f,n,l,u,!h),i>hi&&(e.moveTo(c+i*Fu(u),f+i*ol(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0,P=void 0,C=void 0,A=void 0,M=void 0,k=void 0,R=void 0,B=void 0,z=void 0,N=n*Fu(l),j=n*ol(l),Z=i*Fu(u),q=i*ol(u),tt=d>hi;if(tt){var Pt=t.cornerRadius;Pt&&(r=dQ(Pt),v=r[0],g=r[1],m=r[2],y=r[3]);var Ot=Hk(n-i)/2;if(_=Zi(Ot,m),w=Zi(Ot,y),T=Zi(Ot,v),S=Zi(Ot,g),A=P=Yh(_,w),M=C=Yh(T,S),(P>hi||C>hi)&&(k=n*Fu(u),R=n*ol(u),B=i*Fu(l),z=i*ol(l),d<X9)){var bt=hQ(N,j,B,z,k,R,Z,q);if(bt){var wt=N-bt[0],Ht=j-bt[1],Y=k-bt[0],nt=R-bt[1],K=1/ol(fQ((wt*Y+Ht*nt)/(_d(wt*wt+Ht*Ht)*_d(Y*Y+nt*nt)))/2),pt=_d(bt[0]*bt[0]+bt[1]*bt[1]);A=Zi(P,(n-pt)/(K+1)),M=Zi(C,(i-pt)/(K-1))}}}if(!tt)e.moveTo(c+N,f+j);else if(A>hi){var St=Zi(m,A),At=Zi(y,A),st=Rp(B,z,N,j,n,St,h),ft=Rp(k,R,Z,q,n,At,h);e.moveTo(c+st.cx+st.x0,f+st.cy+st.y0),A<P&&St===At?e.arc(c+st.cx,f+st.cy,A,Er(st.y0,st.x0),Er(ft.y0,ft.x0),!h):(St>0&&e.arc(c+st.cx,f+st.cy,St,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,n,Er(st.cy+st.y1,st.cx+st.x1),Er(ft.cy+ft.y1,ft.cx+ft.x1),!h),At>0&&e.arc(c+ft.cx,f+ft.cy,At,Er(ft.y1,ft.x1),Er(ft.y0,ft.x0),!h))}else e.moveTo(c+N,f+j),e.arc(c,f,n,l,u,!h);if(!(i>hi)||!tt)e.lineTo(c+Z,f+q);else if(M>hi){var St=Zi(v,M),At=Zi(g,M),st=Rp(Z,q,k,R,i,-At,h),ft=Rp(N,j,B,z,i,-St,h);e.lineTo(c+st.cx+st.x0,f+st.cy+st.y0),M<C&&St===At?e.arc(c+st.cx,f+st.cy,M,Er(st.y0,st.x0),Er(ft.y0,ft.x0),!h):(At>0&&e.arc(c+st.cx,f+st.cy,At,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,i,Er(st.cy+st.y1,st.cx+st.x1),Er(ft.cy+ft.y1,ft.cx+ft.x1),h),St>0&&e.arc(c+ft.cx,f+ft.cy,St,Er(ft.y1,ft.x1),Er(ft.y0,ft.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var vQ=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Y9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new vQ},t.prototype.buildPath=function(r,n){pQ(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(fe);Y9.prototype.type="sector";const L0=Y9;var gQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),q9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new gQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(fe);q9.prototype.type="ring";const Z9=q9;function mQ(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)vc(c,c,e[h]),gc(f,f,e[h]);vc(c,c,n[0]),gc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(zq(e[h]));continue}else l=e[h-1],u=e[h+1];V7(o,u,l),v_(o,o,t);var v=yS(p,l),g=yS(p,u),m=v+g;m!==0&&(v/=m,g/=m),v_(a,o,-v),v_(s,o,g);var y=NM([],p,a),_=NM([],p,s);n&&(gc(y,y,c),vc(y,y,f),gc(_,_,c),vc(_,_,f)),i.push(y),i.push(_)}return r&&i.push(i.shift()),i}function K9(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=mQ(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var yQ=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),J9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new yQ},t.prototype.buildPath=function(r,n){K9(r,n,!0)},t}(fe);J9.prototype.type="polygon";const Zd=J9;var _Q=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),Q9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _Q},t.prototype.buildPath=function(r,n){K9(r,n,!1)},t}(fe);Q9.prototype.type="polyline";const tN=Q9;var bQ={},wQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),eN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new wQ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=M9(bQ,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(fe);eN.prototype.type="line";const Cs=eN;var on=[],SQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function Xk(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?YM:or)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?YM:or)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?qM:kr)(e.x1,e.cpx1,e.x2,t),(r?qM:kr)(e.y1,e.cpy1,e.y2,t)]}var rN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new SQ},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Am(i,l,a,h,on),l=on[1],a=on[2],Am(o,u,s,h,on),u=on[1],s=on[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(Em(i,l,c,a,h,on),l=on[1],c=on[2],a=on[3],Em(o,u,f,s,h,on),u=on[1],f=on[2],s=on[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return Xk(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=Xk(this.shape,r,!0);return AP(n,n)},t}(fe);rN.prototype.type="bezier-curve";const X1=rN;var TQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),nN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new TQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(fe);nN.prototype.type="arc";const HP=nN;var PQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),fe.prototype.getBoundingRect.call(this)},t}(fe);const EQ=PQ;var AQ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const iN=AQ;var CQ=function(e){Ae(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(iN);const XP=CQ;var MQ=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(iN);const kQ=MQ;var al=[0,0],sl=[0,0],Dp=new xe,Np=new xe,xQ=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new xe;for(var n=0;n<2;n++)this._axes[n]=new xe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);xe.sub(i[0],n[1],n[0]),xe.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Dp.set(1/0,1/0),Np.set(0,0),!this._intersectCheckOneSide(this,t,Dp,Np,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Dp,Np,i,-1)&&(n=!1,i)||i||xe.copy(r,n?Dp:Np),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,al),this._getProjMinMaxOnAxis(l,r._corners,sl),al[1]<sl[0]||al[0]>sl[1]){if(s=!1,o)return s;var c=Math.abs(sl[0]-al[1]),f=Math.abs(al[0]-sl[1]);Math.min(c,f)>i.len()&&(c<f?xe.scale(i,u,-c*a):xe.scale(i,u,f*a))}else if(n){var c=Math.abs(sl[0]-al[1]),f=Math.abs(al[0]-sl[1]);Math.min(c,f)<n.len()&&(c<f?xe.scale(n,u,c*a):xe.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const Im=xQ;var LQ=[],IQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new oe(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(LQ)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(cu);const OQ=IQ;var RQ=Oe();function YP(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=qt(n.duration,200),c=qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function qP(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):It(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=YP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function hr(e,t,r,n,i,o){qP("update",e,t,r,n,i,o)}function Ao(e,t,r,n,i,o){qP("enter",e,t,r,n,i,o)}function bd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Ql(e,t,r,n,i,o){bd(e)||qP("leave",e,t,r,n,i,o)}function Yk(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Ql(e,{style:{opacity:0}},t,r,n)}function XS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||Yk(i,t,r,n)}):Yk(e,t,r,n)}function oN(e){RQ(e).oldStyle=e.style}var Om=Math.max,Rm=Math.min,YS={};function DQ(e){return fe.extend(e)}var NQ=sQ;function FQ(e,t){return NQ(e,t)}function $i(e,t){YS[e]=t}function aN(e){if(YS.hasOwnProperty(e))return YS[e]}function Y1(e,t,r,n){var i=aQ(e,t);return r&&(n==="center"&&(r=lN(r,i.getBoundingRect())),uN(i,r)),i}function sN(e,t,r){var n=new Sa({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(lN(t,o))}}});return n}function lN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var BQ=lQ;function uN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function Kd(e,t){return M9(e,e,{lineWidth:t}),e}function $Q(e){return k9(e.shape,e.shape,e.style),e}var zQ=kl;function Vg(e,t){for(var r=MP([]);e&&e!==t;)kc(r,e.getLocalTransform(),r),e=e.parent;return r}function Lc(e,t,r){return t&&!Fr(t)&&(t=Ml.getLocalTransform(t)),r&&(t=V1([],t)),qr([],e,t)}function cN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Lc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function qk(e){return!e.isGroup}function VQ(e){return e.shape!=null}function fN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){qk(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return VQ(a)&&(s.shape=ot({},a.shape)),s}var o=n(e);t.traverse(function(a){if(qk(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),hr(a,l,r,ne(a).dataIndex)}}})}function UQ(e,t){return Ct(e,function(r){var n=r[0];n=Om(n,t.x),n=Rm(n,t.x+t.width);var i=r[1];return i=Om(i,t.y),i=Rm(i,t.y+t.height),[n,i]})}function GQ(e,t){var r=Om(e.x,t.x),n=Rm(e.x+e.width,t.x+t.width),i=Om(e.y,t.y),o=Rm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function ZP(e,t,r){var n=ot({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,r),new Sa(n)):Y1(e.replace("path://",""),n,r,"center")}function jQ(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(hN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function hN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=t2(c,f,l,u);if(WQ(h))return!1;var d=e-i,p=t-o,v=t2(d,p,l,u)/h;if(v<0||v>1)return!1;var g=t2(d,p,c,f)/h;return!(g<0||g>1)}function t2(e,t,r,n){return e*n-r*t}function WQ(e){return e<=1e-6&&e>=-1e-6}function KP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Et(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&F(ve(l),function(c){ht(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ne(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:te({content:n,formatterParams:s},i)}}function Zk(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function ff(e,t){if(e)if(ct(e))for(var r=0;r<e.length;r++)Zk(e[r],t);else Zk(e,t)}$i("circle",WP);$i("ellipse",H9);$i("sector",L0);$i("ring",Z9);$i("polygon",Zd);$i("polyline",tN);$i("rect",Ke);$i("line",Cs);$i("bezierCurve",X1);$i("arc",HP);const HQ=Object.freeze(Object.defineProperty({__proto__:null,updateProps:hr,initProps:Ao,removeElement:Ql,removeElementWithFadeOut:XS,isElementRemoved:bd,extendShape:DQ,extendPath:FQ,registerShape:$i,getShapeClass:aN,makePath:Y1,makeImage:sN,mergePath:BQ,resizePath:uN,subPixelOptimizeLine:Kd,subPixelOptimizeRect:$Q,subPixelOptimize:zQ,getTransform:Vg,applyTransform:Lc,transformDirection:cN,groupTransition:fN,clipPointsByRect:UQ,clipRectByRect:GQ,createIcon:ZP,linePolygonIntersect:jQ,lineLineIntersect:hN,setTooltipConfig:KP,traverseElements:ff,Group:De,Image:Sa,Text:Je,Circle:WP,Ellipse:H9,Sector:L0,Ring:Z9,Polygon:Zd,Polyline:tN,Rect:Ke,Line:Cs,BezierCurve:X1,Arc:HP,IncrementalDisplayable:OQ,CompoundPath:EQ,LinearGradient:XP,RadialGradient:kQ,BoundingRect:oe,OrientedBoundingRect:Im,Point:xe,Path:fe},Symbol.toStringTag,{value:"Module"}));var q1={};function XQ(e,t){for(var r=0;r<ti.length;r++){var n=ti[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function Kk(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<ti.length;u++){var c=ti[u],f=t[c];l[c]=qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function hf(e,t,r,n){r=r||q1;for(var i=e instanceof Je,o=!1,a=0;a<Ok.length;a++){var s=t[Ok[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Je,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=Kk(r,t),c=t.normal,f=!!c.getShallow("show"),h=dn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Dm(c,r,!1));for(var a=0;a<ti.length;a++){var d=ti[a],s=t[d];if(s){var p=l.ensureState(d),v=!!qt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=dn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=Dm(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(Z1(l).setLabelText=function(m){var y=Kk(r,t,m);XQ(l,y)})}else l&&(l.ignore=!0);e.dirty()}function fu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ti.length;n++){var i=ti[n];r[i]=e.getModel([i,t])}return r}function dn(e,t,r,n,i){var o={};return YQ(o,e,r,n,i),t&&ot(o,t),o}function Dm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=qt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function YQ(e,t,r,n,i){r=r||q1;var o=t.ecModel,a=o&&o.option.textStyle,s=qQ(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);e4(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),e4(e,t,a,r,n,i,!0,!1)}function qQ(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||q1).rich;if(r){t=t||{};for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var Jk=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Qk=["align","lineHeight","width","height","tag","verticalAlign"],t4=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function e4(e,t,r,n,i,o,a,s){r=!i&&r||q1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<Jk.length;v++){var g=Jk[v],m=qt(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<Qk.length;v++){var g=Qk[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!a||!n.disableBox){for(var v=0;v<t4.length;v++){var g=t4[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var _=t.getShallow("borderType");_!=null&&(e.borderDash=_),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function dN(e,t){var r=t&&t.getModel("textStyle");return mo([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Z1=Oe();function ZQ(e,t,r,n){if(!!e){var i=Z1(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var KQ=["textStyle","color"],e2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],r2=new Je,JQ=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(KQ):null)},e.prototype.getFont=function(){return dN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<e2.length;n++)r[e2[n]]=this.getShallow(e2[n]);return r2.useStyle(r),r2.update(),r2.getBoundingRect()},e}();const QQ=JQ;var pN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ttt=Hd(pN),ett=function(){function e(){}return e.prototype.getLineStyle=function(t){return ttt(this,t)},e}(),vN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],rtt=Hd(vN),ntt=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return rtt(this,t,r)},e}(),hu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){ie(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Xt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();FP(hu);BK(hu);Fi(hu,ett);Fi(hu,ntt);Fi(hu,GK);Fi(hu,QQ);const br=hu;var itt=Math.round(Math.random()*10);function K1(e){return[e||"",itt++].join("_")}function ott(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=_o(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=_o(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function att(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(F(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),F(p.successor,v?m:g)}F(h,function(){var y="";throw new Error(y)});function g(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function m(y){h[y]=!0,g(y)}};function r(o){var a={},s=[];return F(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),F(f,function(h){ue(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);ue(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return F(o,function(l){ue(a,l)>=0&&s.push(l)}),s}}function J1(e,t){return ie(ie({},e,!0),t,!0)}const stt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},ltt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Nm="ZH",JP="EN",Jd=JP,Ug={},QP={},gN=Xt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Nm)>-1?Nm:Jd}():Jd;function mN(e,t){e=e.toUpperCase(),QP[e]=new br(t),Ug[e]=t}function utt(e){if(Et(e)){var t=Ug[e.toUpperCase()]||{};return e===Nm||e===JP?zt(t):ie(zt(t),zt(Ug[Jd]),!1)}else return ie(zt(e),zt(Ug[Jd]),!1)}function ctt(e){return QP[e]}function ftt(){return QP[Jd]}mN(JP,stt);mN(Nm,ltt);var tE=1e3,eE=tE*60,wd=eE*60,Yn=wd*24,r4=Yn*365,qh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Fp="{yyyy}-{MM}-{dd}",n4={year:"{yyyy}",month:"{yyyy}-{MM}",day:Fp,hour:Fp+" "+qh.hour,minute:Fp+" "+qh.minute,second:Fp+" "+qh.second,millisecond:qh.none},n2=["year","month","day","hour","minute","second","millisecond"],yN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ll(e,t){return e+="","0000".substr(0,t-e.length)+e}function Ic(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function htt(e){return e===Ic(e)}function dtt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Q1(e,t,r,n){var i=pa(e),o=i[rE(r)](),a=i[Oc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[ty(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[Qd(r)](),f=(c-1)%12+1,h=i[ey(r)](),d=i[ry(r)](),p=i[ny(r)](),v=n instanceof br?n:ctt(n||gN)||ftt(),g=v.getModel("time"),m=g.get("month"),y=g.get("monthAbbr"),_=g.get("dayOfWeek"),w=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,ll(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,ll(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,ll(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,ll(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,ll(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,ll(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,ll(p,3)).replace(/{S}/g,p+"")}function ptt(e,t,r,n,i){var o=null;if(Et(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=ot({},qh);if(e.level>0)for(var s=0;s<n2.length;++s)a[n2[s]]="{primary|"+a[n2[s]]+"}";var l=r?r.inherit===!1?r:te(r,a):a,u=_N(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=yN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ct(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return Q1(new Date(e.value),o,i,n)}function _N(e,t){var r=pa(e),n=r[Oc(t)]()+1,i=r[ty(t)](),o=r[Qd(t)](),a=r[ey(t)](),s=r[ry(t)](),l=r[ny(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function i4(e,t,r){var n=be(e)?pa(e):e;switch(t=t||_N(e,r),t){case"year":return n[rE(r)]();case"half-year":return n[Oc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Oc(r)]()+1)/4);case"month":return n[Oc(r)]();case"day":return n[ty(r)]();case"half-day":return n[Qd(r)]()/24;case"hour":return n[Qd(r)]();case"minute":return n[ey(r)]();case"second":return n[ry(r)]();case"millisecond":return n[ny(r)]()}}function rE(e){return e?"getUTCFullYear":"getFullYear"}function Oc(e){return e?"getUTCMonth":"getMonth"}function ty(e){return e?"getUTCDate":"getDate"}function Qd(e){return e?"getUTCHours":"getHours"}function ey(e){return e?"getUTCMinutes":"getMinutes"}function ry(e){return e?"getUTCSeconds":"getSeconds"}function ny(e){return e?"getUTCMilliseconds":"getMilliseconds"}function vtt(e){return e?"setUTCFullYear":"setFullYear"}function bN(e){return e?"setUTCMonth":"setMonth"}function wN(e){return e?"setUTCDate":"setDate"}function SN(e){return e?"setUTCHours":"setHours"}function TN(e){return e?"setUTCMinutes":"setMinutes"}function PN(e){return e?"setUTCSeconds":"setSeconds"}function EN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function AN(e){if(!gK(e))return Et(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function CN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var I0=F7;function qS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&mo(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?pa(e):e;if(isNaN(+l)){if(s)return"-"}else return Q1(l,n,r)}if(t==="ordinal")return gS(e)?i(e):be(e)&&o(e)?e+"":"-";var u=As(e);return o(u)?AN(u):gS(e)?i(e):typeof e=="boolean"?e+"":"-"}var o4=["a","b","c","d","e","f","g"],i2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function MN(e,t,r){ct(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=o4[o];e=e.replace(i2(a),i2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(i2(o4[l],s),r?Hn(u):u)}return e}function gtt(e,t){var r=Et(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Hn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Hn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function tu(e,t){return t=t||"transparent",Et(e)?e:It(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function a4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Gg=F,mtt=["left","right","top","bottom","width","height"],Bp=[["width","left","right"],["height","top","bottom"]];function nE(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=a+g,p>i||l.newline?(o+=s+r,a=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Rc=nE;_e(nE,"vertical");_e(nE,"horizontal");function Ms(e,t,r){r=I0(r||0);var n=t.width,i=t.height,o=We(e.left,n),a=We(e.top,i),s=We(e.right,n),l=We(e.bottom,i),u=We(e.width,n),c=We(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new oe(o+r[3],a+r[0],u,c);return p.margin=r,p}function ytt(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new oe(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ms(te({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function t0(e){var t=e.layoutMode||e.constructor.layoutMode;return It(t)?t:t?{type:t}:null}function Hc(e,t,r){var n=r&&r.ignoreSize;!ct(n)&&(n=[n,n]);var i=a(Bp[0],0),o=a(Bp[1],1);u(Bp[0],e,i),u(Bp[1],e,o);function a(c,f){var h={},d=0,p={},v=0,g=2;if(Gg(c,function(_){p[_]=e[_]}),Gg(c,function(_){s(t,_)&&(h[_]=p[_]=t[_]),l(h,_)&&d++,l(p,_)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var y=c[m];if(!s(h,y)&&s(e,y)){h[y]=e[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Gg(c,function(d){f[d]=h[d]})}}function iy(e){return _tt({},e)}function _tt(e,t){return t&&e&&Gg(mtt,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var btt=Oe(),df=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=K1("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=t0(this),o=i?iy(r):{},a=n.getTheme();ie(r,a.get(this.mainType)),ie(r,this.getDefaultOption()),i&&Hc(r,o,i)},t.prototype.mergeOption=function(r,n){ie(this.option,r,!0);var i=t0(this);i&&Hc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!DK(r))return r.defaultOption;var n=btt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=ie(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return k0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(br);_9(df,br);U1(df);ott(df);att(df,wtt);function wtt(e){var t=[];return F(df.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Ct(t,function(r){return _o(r).main}),e!=="dataset"&&ue(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=df;var kN="";typeof navigator<"u"&&(kN=navigator.platform||"");var Bu="rgba(0, 0, 0, 0.2)";const Stt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Bu,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Bu,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Bu,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Bu,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Bu,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Bu,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:kN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var xN=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ni="original",Jr="arrayRows",zi="objectRows",Pa="keyedColumns",_s="typedArray",LN="unknown",wo="column",pf="row",bn={Must:1,Might:2,Not:3},IN=Oe();function Ttt(e){IN(e).datasetMap=jt()}function Ptt(e,t,r){var n={},i=ON(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=IN(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),F(e,function(v,g){var m=It(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});F(e,function(v,g){var m=v.name,y=p(v);if(c==null){var _=h.valueWayDim;d(n[m],_,y),d(a,_,y),h.valueWayDim+=y}else if(c===g)d(n[m],0,y),d(o,0,y);else{var _=h.categoryWayDim;d(n[m],_,y),d(a,_,y),h.categoryWayDim+=y}});function d(v,g,m){for(var y=0;y<m;y++)v.push(g+y)}function p(v){var g=v.dimsDef;return g?g.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function ON(e){var t=e.get("data",!0);if(!t)return k0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Si).models[0]}function Ett(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:k0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Si).models}function RN(e,t){return Att(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Att(e,t,r,n,i,o){var a,s=5;if(kn(e))return bn.Not;var l,u;if(n){var c=n[o];It(c)?(l=c.name,u=c.type):Et(c)&&(l=c)}if(u!=null)return u==="ordinal"?bn.Must:bn.Not;if(t===Jr){var f=e;if(r===pf){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===zi){var v=e;if(!l)return bn.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(a=w(g[l]))!=null)return a}}else if(t===Pa){var m=e;if(!l)return bn.Not;var h=m[l];if(!h||kn(h))return bn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===ni)for(var y=e,d=0;d<y.length&&d<s;d++){var g=y[d],_=M0(g);if(!ct(_))return bn.Not;if((a=w(_[o]))!=null)return a}function w(T){var S=Et(T);if(T!=null&&isFinite(T)&&T!=="")return S?bn.Might:bn.Not;if(S&&T!=="-")return bn.Must}return bn.Not}var Ctt=jt();function Mtt(e,t,r){var n=Ctt.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var s4=Oe();Oe();var iE=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ze(this.get("color",!0)),o=this.get("colorLayer",!0);return xtt(this,s4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){Ltt(this,s4)},e}();function ktt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function xtt(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:ktt(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function Ltt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var $p,eh,l4,u4="\0_ec_inner",Itt=1,DN=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new br(o),this._locale=new br(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=h4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,h4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?l4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&F(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;Ttt(this),F(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?zt(f):ie(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Me.topologicalTravel(s,Me.getAllClassMainTypes(),c,this);function c(f){var h=Mtt(this,f,Ze(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=_K(d,h,p);AK(v,f,Me),i[f]=null,o.set(f,null),a.set(f,0);var g=[],m=[],y=0,_;F(v,function(w,T){var S=w.existing,P=w.newOption;if(!P)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var C=f==="series",A=Me.getClass(f,w.keyInfo.subType,!C);if(!A)return;if(f==="tooltip"){if(_)return;_=!0}if(S&&S.constructor===A)S.name=w.keyInfo.name,S.mergeOption(P,this),S.optionUpdated(P,!1);else{var M=ot({componentIndex:T},w.keyInfo);S=new A(P,this,this,M),ot(S,M),w.brandNew&&(S.__requireNewView=!0),S.init(P,this,this),S.optionUpdated(null,!0)}}S?(g.push(S.option),m.push(S),y++):(g.push(void 0),m.push(void 0))},this),i[f]=g,o.set(f,m),a.set(f,y),f==="series"&&$p(this)}this._seriesIndices||$p(this)},t.prototype.getOption=function(){var r=zt(this.option);return F(r,function(n,i){if(Me.hasClass(i)){for(var o=Ze(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Wd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[u4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],F(Ze(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=c4("id",o,s):a!=null?l=c4("name",a,s):l=yr(s,function(u){return!!u}),f4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):yr(this._componentsMap.get(i),function(u){return!!u});return l(f4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?yr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Et(r)?o.get(r):It(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Zn(r,null);return yr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return yr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return yr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){eh(this),F(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){F(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){eh(this),F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return F(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return eh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){eh(this);var i=[];F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){$p(this);var n=this._componentsMap,i=[];n.each(function(o,a){Me.hasClass(a)&&i.push(a)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){F(n.get(o),function(a){a&&(o!=="series"||!Ott(a,r))&&a.restoreData()})})},t.internalField=function(){$p=function(r){var n=r._seriesIndices=[];F(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},eh=function(r){},l4=function(r,n){r.option={},r.option[u4]=Itt,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;It(i)&&i.enabled==null&&(i.enabled=!0),Rtt(n,r._theme.option),ie(n,Stt,!1),r._mergeOption(n,null)}}(),t}(br);function Ott(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Rtt(e,t){var r=e.color&&!e.colorLayer;F(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?ie(e[i],n,!1):zt(n):e[i]==null&&(e[i]=n))})}function c4(e,t,r){if(ct(t)){var n=jt();return F(t,function(o){if(o!=null){var a=Zn(o,null);a!=null&&n.set(o,!0)}}),yr(r,function(o){return o&&n.get(o[e])})}else{var i=Zn(t,null);return yr(r,function(o){return o&&i!=null&&o[e]===i})}}function f4(e,t){return t.hasOwnProperty("subType")?yr(e,function(r){return r&&r.subType===t.subType}):e}function h4(e){var t=jt();return e&&F(Ze(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Fi(DN,iE);const NN=DN;var Dtt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Ntt=function(){function e(t){F(Dtt,function(r){this[r]=Vt(t[r],t)},this)}return e}();const FN=Ntt;var o2={},Ftt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];F(o2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){F(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){o2[t]=r},e.get=function(t){return o2[t]},e}();const oE=Ftt;var Btt=/^(min|max)?(.+)$/,$tt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(F(Ze(t.series),function(a){a&&a.data&&kn(a.data)&&Sm(a.data)}),F(Ze(t.dataset),function(a){a&&a.source&&kn(a.source)&&Sm(a.source)})),t=zt(t);var i=this._optionBackup,o=ztt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)Vtt(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!Gtt(a,this._currentMediaIndices)&&(s=Ct(a,function(c){return zt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function ztt(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ct(u)&&F(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),F(l,function(d){return h(d)}),F(n,function(d){return h(d.option)});function h(d){F(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Vtt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return F(e,function(o,a){var s=a.match(Btt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Utt(n[u],o,l)||(i=!1)}}),i}function Utt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Gtt(e,t){return e.join(",")===t.join(",")}const jtt=$tt;var si=F,e0=It,d4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function a2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=d4.length;r<n;r++){var i=d4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?ie(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?ie(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function xr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,te(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Zh(e){xr(e,"itemStyle"),xr(e,"lineStyle"),xr(e,"areaStyle"),xr(e,"label"),xr(e,"labelLine"),xr(e,"upperLabel"),xr(e,"edgeLabel")}function Xe(e,t){var r=e0(e)&&e[t],n=e0(r)&&r.textStyle;if(n)for(var i=0,o=pk.length;i<o;i++){var a=pk[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function Gn(e){e&&(Zh(e),Xe(e,"label"),e.emphasis&&Xe(e.emphasis,"label"))}function Wtt(e){if(!!e0(e)){a2(e),Zh(e),Xe(e,"label"),Xe(e,"upperLabel"),Xe(e,"edgeLabel"),e.emphasis&&(Xe(e.emphasis,"label"),Xe(e.emphasis,"upperLabel"),Xe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(a2(t),Gn(t));var r=e.markLine;r&&(a2(r),Gn(r));var n=e.markArea;n&&Gn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!kn(o))for(var a=0;a<o.length;a++)Gn(o[a]);F(e.categories,function(u){Zh(u)})}if(i&&!kn(i))for(var a=0;a<i.length;a++)Gn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)Gn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ct(l[a])?(Gn(l[a][0]),Gn(l[a][1])):Gn(l[a]);e.type==="gauge"?(Xe(e,"axisLabel"),Xe(e,"title"),Xe(e,"detail")):e.type==="treemap"?(xr(e.breadcrumb,"itemStyle"),F(e.levels,function(u){Zh(u)})):e.type==="tree"&&Zh(e.leaves)}}function Uo(e){return ct(e)?e:e?[e]:[]}function p4(e){return(ct(e)?e[0]:e)||{}}function Htt(e,t){si(Uo(e.series),function(n){e0(n)&&Wtt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),si(r,function(n){si(Uo(e[n]),function(i){i&&(Xe(i,"axisLabel"),Xe(i.axisPointer,"label"))})}),si(Uo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Xe(i,"axisLabel"),Xe(i&&i.axisPointer,"label")}),si(Uo(e.calendar),function(n){xr(n,"itemStyle"),Xe(n,"dayLabel"),Xe(n,"monthLabel"),Xe(n,"yearLabel")}),si(Uo(e.radar),function(n){Xe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),si(Uo(e.geo),function(n){e0(n)&&(Gn(n),si(Uo(n.regions),function(i){Gn(i)}))}),si(Uo(e.timeline),function(n){Gn(n),xr(n,"label"),xr(n,"itemStyle"),xr(n,"controlStyle",!0);var i=n.data;ct(i)&&F(i,function(o){It(o)&&(xr(o,"label"),xr(o,"itemStyle"))})}),si(Uo(e.toolbox),function(n){xr(n,"iconStyle"),si(n.feature,function(i){xr(i,"iconStyle")})}),Xe(p4(e.axisPointer),"label"),Xe(p4(e.tooltip).axisPointer,"label")}function Xtt(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Ytt(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function v4(e){e&&F(qtt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var qtt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Ztt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],s2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function rh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<s2.length;r++){var n=s2[r][1],i=s2[r][0];t[n]!=null&&(t[i]=t[n])}}function g4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function m4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function Ktt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function BN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&BN(e[r].children,t)}function $N(e,t){Htt(e,t),e.series=Ze(e.series),F(e.series,function(r){if(!!It(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),g4(r.label);var i=r.data;if(i&&!kn(i))for(var o=0;o<i.length;o++)g4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=Xtt(r,"pointer.color");a!=null&&Ytt(r,"itemStyle.color",a)}else if(n==="bar"){rh(r),rh(r.backgroundStyle),rh(r.emphasis);var i=r.data;if(i&&!kn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(rh(i[o]),rh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),m4(r),BN(r.data,m4)}else n==="graph"||n==="sankey"?Ktt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&te(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),v4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),F(Ztt,function(r){var n=e[r];n&&(ct(n)||(n=[n]),F(n,function(i){v4(i)}))})}function Jtt(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(Qtt)}function Qtt(e){F(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var y=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=dK(h,y),v=y;break}}}return n[0]=h,n[1]=v,n})})}var oy=function(){function e(t){this.data=t.data||(t.sourceFormat===Pa?{}:[]),this.sourceFormat=t.sourceFormat||LN,this.seriesLayoutBy=t.seriesLayoutBy||wo,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&RN(this,n)===bn.Must&&(i.type="ordinal")}}return e}();function aE(e){return e instanceof oy}function ZS(e,t,r){r=r||zN(e);var n=t.seriesLayoutBy,i=eet(e,r,n,t.sourceHeader,t.dimensions),o=new oy({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function sE(e){return new oy({data:e,sourceFormat:kn(e)?_s:ni})}function tet(e){return new oy({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function zN(e){var t=LN;if(kn(e))t=_s;else if(ct(e)){e.length===0&&(t=Jr);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ct(i)){t=Jr;break}else if(It(i)){t=zi;break}}}}else if(It(e)){for(var o in e)if(ht(e,o)&&Fr(e[o])){t=Pa;break}}return t}function eet(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:y4(i),startIndex:a,dimensionsDetectedCount:o};if(t===Jr){var s=e;n==="auto"||n==null?_4(function(u){u!=null&&u!=="-"&&(Et(u)?a==null&&(a=1):a=0)},r,s,10):a=be(n)?n:n?1:0,!i&&a===1&&(i=[],_4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===pf?s.length:s[0]?s[0].length:null}else if(t===zi)i||(i=ret(e));else if(t===Pa)i||(i=[],F(e,function(u,c){i.push(c)}));else if(t===ni){var l=M0(e[0]);o=ct(l)&&l.length||1}return{startIndex:a,dimensionsDefine:y4(i),dimensionsDetectedCount:o}}function ret(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return F(r,function(i,o){n.push(o)}),n}}function y4(e){if(!!e){var t=jt();return Ct(e,function(r,n){r=It(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function _4(e,t,r,n){if(t===pf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function VN(e){var t=e.sourceFormat;return t===zi||t===Pa}var ul,cl,fl,b4,w4,UN=function(){function e(t,r){var n=aE(t)?t:sE(t);this._source=n;var i=this._data=n.data;n.sourceFormat===_s&&(this._offset=0,this._dimSize=r,this._data=i),w4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;w4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=b4[lE(u,c)];if(ot(a,d),u===_s)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=GN(u,c);a.getItem=Vt(p,null,s,f,h);var v=jN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-a,m=l[h],y=0;y<g;y++){var _=c[y*f+h];m[a+y]=_,_<p&&(p=_),_>v&&(v=_)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};b4=(t={},t[Jr+"_"+wo]={pure:!0,appendData:o},t[Jr+"_"+pf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[zi]={pure:!0,appendData:o},t[Pa]={pure:!0,appendData:function(a){var s=this._data;F(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[ni]={appendData:o},t[_s]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),S4=function(e,t,r,n){return e[n]},net=(ul={},ul[Jr+"_"+wo]=function(e,t,r,n){return e[n+t]},ul[Jr+"_"+pf]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},ul[zi]=S4,ul[Pa]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},ul[ni]=S4,ul);function GN(e,t){var r=net[lE(e,t)];return r}var T4=function(e,t,r){return e.length},iet=(cl={},cl[Jr+"_"+wo]=function(e,t,r){return Math.max(0,e.length-t)},cl[Jr+"_"+pf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},cl[zi]=T4,cl[Pa]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},cl[ni]=T4,cl);function jN(e,t){var r=iet[lE(e,t)];return r}var l2=function(e,t,r){return e[t]},oet=(fl={},fl[Jr]=l2,fl[zi]=function(e,t,r){return e[r]},fl[Pa]=l2,fl[ni]=function(e,t,r){var n=M0(e);return n instanceof Array?n[t]:n},fl[_s]=l2,fl);function WN(e){var t=oet[e];return t}function lE(e,t){return e===Jr?e+"_"+t:e}function Xc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return WN(o)(n,a,s)}else{var l=n;return o===ni&&(l=M0(n)),l}}}}var aet=/\{@(.+?)\}/g,HN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ct(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Et(o)){var c=MN(o,l);return c.replace(aet,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Xc(s,t,p);if(a&&ct(a.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=a.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Xc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function P4(e){var t,r;return It(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Sd(e){return new set(e)}var set=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ct(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){E4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:E4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ct(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),E4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function bs(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!be(e)&&e!=null&&e!=="-"&&(e=+pa(e)),e==null||e===""?NaN:+e)}var uet=jt({number:function(e){return parseFloat(e)},time:function(e){return+pa(e)},trim:function(e){return Et(e)?mo(e):e}});function XN(e){return uet.get(e)}var YN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},cet=function(){function e(t,r){if(!be(r)){var n="";re(n)}this._opFn=YN[t],this._rvalFloat=As(r)}return e.prototype.evaluate=function(t){return be(t)?this._opFn(t,this._rvalFloat):this._opFn(As(t),this._rvalFloat)},e}(),qN=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=be(t)?t:As(t),i=be(r)?r:As(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Et(t),l=Et(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),fet=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=As(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=As(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function het(e,t){return e==="eq"||e==="ne"?new fet(e==="eq",t):ht(YN,e)?new cet(e,t):null}var det=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return bs(t,r)},e}();function pet(e,t){var r=new det,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==wo&&re(a);var s=[],l={},u=e.dimensionsDefine;if(u)F(u,function(v,g){var m=v.name,y={index:g,name:m,displayName:v.displayName};if(s.push(y),m!=null){var _="";ht(l,m)&&re(_),l[m]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=GN(i,wo);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(vet,null,e)),r.cloneRawData=Vt(get,null,e);var h=jN(i,wo);r.count=Vt(h,null,n,o,s);var d=WN(i);r.retrieveValue=function(v,g){var m=f(n,o,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=Vt(met,null,s,l),r.cloneAllDimensionInfo=Vt(yet,null,s),r}function vet(e){var t=e.sourceFormat;if(!uE(t)){var r="";re(r)}return e.data}function get(e){var t=e.sourceFormat,r=e.data;if(!uE(t)){var n="";re(n)}if(t===Jr){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===zi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(ot({},r[o]));return i}}function met(e,t,r){if(r!=null){if(be(r)||!isNaN(r)&&!ht(t,r))return e[r];if(ht(t,r))return t[r]}}function yet(e){return zt(e)}var ZN=jt();function _et(e){e=zt(e);var t=e.type,r="";t||re(r);var n=t.split(":");n.length!==2&&re(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,ZN.set(t,e)}function bet(e,t,r){var n=Ze(e),i=n.length,o="";i||re(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=wet(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function wet(e,t,r,n){var i="";t.length||re(i),It(e)||re(i);var o=e.type,a=ZN.get(o);a||re(i);var s=Ct(t,function(u){return pet(u,a)}),l=Ze(a.transform({upstream:s[0],upstreamList:s,config:zt(e.config)}));return Ct(l,function(u,c){var f="";It(u)||re(f),u.data||re(f);var h=zN(u.data);uE(h)||re(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:wo,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:wo,sourceHeader:0,dimensions:u.dimensions};return ZS(u.data,d,null)})}function uE(e){return e===Jr||e===zi}var ay="undefined",Tet=typeof Uint32Array===ay?Array:Uint32Array,Pet=typeof Uint16Array===ay?Array:Uint16Array,KN=typeof Int32Array===ay?Array:Int32Array,A4=typeof Float64Array===ay?Array:Float64Array,JN={float:A4,int:KN,ordinal:Array,number:Array,time:A4},u2;function nh(e){return e>65535?Tet:Pet}function $u(){return[1/0,-1/0]}function Eet(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function C4(e,t,r,n,i){var o=JN[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var Aet=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=u2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],VN(i),this._dimensions=Ct(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new JN[r||"float"](this._rawCount),this._rawExtent[o]=$u(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=$u());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];C4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=u2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var g=a[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Ct(a,function(y){return y.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=$u()),C4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=nh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=nh(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[t[g]][p];s[g]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ve(t),o=i.length;if(!o)return this;var a=r.count(),s=nh(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var g=d[i[0]],m=0;m<n;m++){var y=g[m];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var g=d[i[0]],_=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],m=0;m<n;m++){var y=g[m],S=_[m];(y>=f&&y<=h||isNaN(y))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var m=0;m<a;m++){var P=r.getRawIndex(m),y=d[i[0]][P];(y>=f&&y<=h||isNaN(y))&&(l[u++]=P)}else for(var m=0;m<a;m++){for(var C=!0,P=r.getRawIndex(m),A=0;A<o;A++){var M=i[A],y=d[M][P];(y<t[M][0]||y>t[M][1])&&(C=!1)}C&&(l[u++]=r.getRawIndex(m))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=$u();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],y=i[v];y&&(y[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(nh(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),g=Math.min(p+l*2,a),m=(g+v)/2,y=0,_=v;_<g;_++){var w=this.getRawIndex(_),T=o[w];isNaN(T)||(y+=T)}y/=g-v;var S=p,P=Math.min(p+l,a),C=p-1,A=o[u];c=-1,h=S;for(var M=-1,k=0,_=S;_<P;_++){var w=this.getRawIndex(_),T=o[w];if(isNaN(T)){k++,M<0&&(M=w);continue}f=Math.abs((C-m)*(T-A)-(C-_)*(y-A)),f>c&&(c=f,h=w)}k>0&&k<P-S&&(d[s++]=Math.min(M,h),h=Math.max(M,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=$u(),h=new(nh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),y=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[y]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=$u();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&uu(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?Eet(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return bs(r[o],this._dimensions[o])}u2={arrayRows:t,objectRows:function(r,n,i,o){return bs(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return bs(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const KS=Aet;var QN=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(zp(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=kn(s)?_s:ni,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=qt(f.sourceHeader,h.sourceHeader),v=qt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[ZS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var _=m.get("source",!0);i=[ZS(_,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&k4(o)}var a,s=[],l=[];return F(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&k4(f),s.push(c),l.push(u._getVersionSign())}),n?a=bet(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[tet(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];zp(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new KS,s.initData(new UN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(zp(t)){var r=ON(t);return r?[r.getSourceManager()]:[]}else return Ct(Ett(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(zp(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function M4(e){var t=e.option.transform;t&&Sm(e.option.transform)}function zp(e){return e.mainType==="series"}function k4(e){throw new Error(e)}var tF="line-height:1";function eF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Hn(n+"")+"px;color:"+Hn(r)+";font-weight:"+Hn(i+""),valueStyle:"font-size:"+Hn(a+"")+"px;color:"+Hn(o)+";font-weight:"+Hn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Cet=[0,10,20,30],Met=["",`
`,`

`,`


`];function ks(e,t){return t.type=e,t}function JS(e){return e.type==="section"}function rF(e){return JS(e)?ket:xet}function nF(e){if(JS(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return F(e.blocks,function(i){var o=nF(i);o>=t&&(t=o+ +(n&&(!o||JS(i)&&!i.noHeader)))}),t}return 0}function ket(e,t,r,n){var i=t.noHeader,o=Let(nF(t)),a=[],s=t.blocks||[];Ii(!s||ct(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(ht(u,l)){var c=new qN(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}F(s,function(p,v){var g=t.valueFormatter,m=rF(p)(g?ot(ot({},e),{valueFormatter:g}):e,p,v>0?o.html:0,n);m!=null&&a.push(m)});var f=e.renderMode==="richText"?a.join(o.richText):QS(a.join(""),i?r:o.html);if(i)return f;var h=qS(t.header,"ordinal",e.useUTC),d=eF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?iF(e,h,d)+o.richText+f:QS('<div style="'+d+";"+tF+';">'+Hn(h)+"</div>"+f,r)}function xet(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ct(w)?w:[w],Ct(w,function(T,S){return qS(T,ct(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":qS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,g=!s&&o,m=eF(n,i),y=m.nameStyle,_=m.valueStyle;return i==="richText"?(s?"":f)+(o?"":iF(e,h,y))+(a?"":Ret(e,p,v,g,_)):QS((s?"":f)+(o?"":Iet(h,!s,y))+(a?"":Oet(p,v,g,_)),r)}}function x4(e,t,r,n,i,o){if(!!e){var a=rF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function Let(e){return{html:Cet[e],richText:Met[e]}}function QS(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+tF+';">'+e+r+"</div>"}function Iet(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Hn(e)+"</span>"}function Oet(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ct(e)?e:[e],'<span style="'+o+";"+n+'">'+Ct(e,function(a){return Hn(a)}).join("&nbsp;&nbsp;")+"</span>"}function iF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Ret(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ct(t)?t.join("  "):t,o)}function Det(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return tu(n)}function oF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var c2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=d9()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=gtt({color:r,type:t,renderMode:n,markerId:i});return Et(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ct(r)?F(r,function(o){return ot(n,o)}):ot(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Net(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ct(s),u=Det(t,r),c,f,h,d;if(a>1||l&&!a){var p=Fet(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=Xc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var g=DP(t),m=g&&t.name||"",y=i.getName(r),_=n?m:y;return ks("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[ks("nameValue",{markerType:"item",markerColor:u,name:_,noName:!mo(_),value:c,valueType:f})].concat(h||[])})}function Fet(e,t,r,n,i){var o=t.getData(),a=uu(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?F(n,function(f){c(Xc(o,r,f),f)}):F(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(ks("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Da=Oe();function Vp(e,t){return e.getName(t)||e.getId(t)}var Bet="__universalTransitionEnabled",sy=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Sd({count:zet,reset:Vet}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Da(this).sourceManager=new QN(this);o.prepareSource();var a=this.getInitialData(r,i);I4(a,this),this.dataTask.context.data=a,Da(this).dataBeforeProcessed=a,L4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=t0(this),o=i?iy(r):{},a=this.subType;Me.hasClass(a)&&(a+="Series"),ie(r,n.getTheme().get(this.subType)),ie(r,this.getDefaultOption()),DS(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Hc(r,o,i)},t.prototype.mergeOption=function(r,n){r=ie(this.option,r,!0),this.fillDataTextStyle(r.data);var i=t0(this);i&&Hc(this.option,r,i);var o=Da(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);I4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Da(this).dataBeforeProcessed=a,L4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!kn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&DS(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=t3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Da(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=t3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Da(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return Da(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Da(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Net({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Xt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=iE.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=Vp(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ve(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[Vp(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Bet])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){It(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=Vp(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=Vp(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Fi(sy,HN);Fi(sy,iE);_9(sy,Me);function L4(e){var t=e.name;DP(e)||(e.name=$et(e)||t)}function $et(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return F(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function zet(e){return e.model.getRawData().count()}function Vet(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Uet}function Uet(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function I4(e,t){F($7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,_e(Get,t))})}function Get(e,t){var r=t3(e);return r&&r.setOutputEnd((t||this).count()),t}function t3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Co=sy;var cE=function(){function e(){this.group=new De,this.uid=K1("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();FP(cE);U1(cE);const ei=cE;function fE(){var e=Oe();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var aF=Oe(),jet=fE(),hE=function(){function e(){this.group=new De,this.uid=K1("viewChart"),this.renderTask=Sd({plan:Wet,reset:Het}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||R4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||R4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){ff(this.group,t)},e.markUpdateMethod=function(t,r){aF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function O4(e,t,r){e&&jS(e)&&(t==="emphasis"?Xd:Yd)(e,r)}function R4(e,t,r){var n=Zl(e,t),i=t&&t.highlightKey!=null?JJ(t.highlightKey):null;n!=null?F(Ze(n),function(o){O4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){O4(o,r,i)})}FP(hE);U1(hE);function Wet(e){return jet(e.model)}function Het(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&aF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),Xet[l]}var Xet={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Kn=hE;var Fm="\0__throttleOriginMethod",D4="\0__throttleRate",N4="\0__throttleType";function ly(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,g=c||r;c=null,s=n-(g?i:o)-v,clearTimeout(a),g?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function sF(e,t,r,n){var i=e[t];if(!!i){var o=i[Fm]||i,a=i[N4],s=i[D4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=ly(o,r,n==="debounce"),i[Fm]=o,i[N4]=n,i[D4]=r}return i}}function e3(e,t){var r=e[t];r&&r[Fm]&&(r.clear&&r.clear(),e[t]=r[Fm])}var F4=Oe(),B4={itemStyle:Hd(vN,!0),lineStyle:Hd(pN,!0)},Yet={lineStyle:"stroke",itemStyle:"fill"};function lF(e,t){var r=e.visualStyleMapper||B4[t];return r||(console.warn("Unkown style type '"+t+"'."),B4.itemStyle)}function uF(e,t){var r=e.visualDrawType||Yet[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var qet={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=lF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=uF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=ot({},a);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},ih=new br,Zet={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=lF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){ih.option=l[n];var u=i(ih),c=a.ensureUniqueItemVisual(s,"style");ot(c,u),ih.option.decal&&(a.setItemVisual(s,"decal",ih.option.decal),ih.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Ket={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),F4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=F4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=uF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},Up=Math.PI;function Jet(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new De,n=new Ke({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Je({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ke({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new HP({shape:{startAngle:-Up/2,endAngle:-Up/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Up*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Up*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var Qet=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;F(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Ii(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;F(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var y=a.getPerformArgs(g,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),a.updatePayload(g,n),g.perform(y)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||Sd({plan:irt,reset:ort,count:srt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||Sd({reset:trt});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Ii(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,F(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,Sd({reset:ert,onDirty:nrt})));m.context={model:v,overallProgress:f},m.agent=a,m.__block=f,o._pipe(v,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:lrt(t)}),t.uid=K1("stageHandler"),r&&(t.visualType=r),t},e}();function trt(e){e.overallReset(e.ecModel,e.api,e.payload)}function ert(e){return e.overallProgress&&rrt}function rrt(){this.agent.dirty(),this.getDownstream().dirty()}function nrt(){this.agent&&this.agent.dirty()}function irt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function ort(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Ct(t,function(r,n){return cF(n)}):art}var art=cF(0);function cF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function srt(e){return e.data.count()}function lrt(e){Bm=null;try{e(r0,fF)}catch{}return Bm}var r0={},fF={},Bm;hF(r0,NN);hF(fF,FN);r0.eachSeriesByType=r0.eachRawSeriesByType=function(e){Bm=e};r0.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Bm=e.subType)};function hF(e,t){for(var r in t.prototype)e[r]=Dr}const dF=Qet;var $4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const urt={color:$4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],$4]};var jr="#B9B8CE",z4="#100C2A",Gp=function(){return{axisLine:{lineStyle:{color:jr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},V4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],pF={darkMode:!0,color:V4,backgroundColor:z4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:jr}},textStyle:{color:jr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:jr}},dataZoom:{borderColor:"#71708A",textStyle:{color:jr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:jr}},timeline:{lineStyle:{color:jr},label:{color:jr},controlStyle:{color:jr,borderColor:jr}},calendar:{itemStyle:{color:z4},dayLabel:{color:jr},monthLabel:{color:jr},yearLabel:{color:jr}},timeAxis:Gp(),logAxis:Gp(),valueAxis:Gp(),categoryAxis:Gp(),line:{symbol:"circle"},graph:{color:V4},gauge:{title:{color:jr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:jr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};pF.categoryAxis.splitLine.show=!1;const crt=pF;var frt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Et(t)){var o=_o(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};F(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),r3=["symbol","symbolSize","symbolRotate","symbolOffset"],U4=r3.concat(["symbolKeepAspect"]),hrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<r3.length;a++){var s=r3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ot({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ve(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:o?c:null}}},drt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<U4.length;s++){var l=U4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function vF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function uy(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function prt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function zu(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Zl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ct(h)?f.getName(h[0]):f.getName(h),selected:Et(l)?l:ot({},l)})}})}function vrt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(zu("map","selectchanged",t,i,n),zu("pie","selectchanged",t,i,n)):n.fromAction==="select"?(zu("map","selected",t,i,n),zu("pie","selected",t,i,n)):n.fromAction==="unselect"&&(zu("map","unselected",t,i,n),zu("pie","unselected",t,i,n))})}function _c(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var grt=Math.round(Math.random()*9),mrt=typeof Object.defineProperty=="function",yrt=function(){function e(){this._id="__ec_inner_"+grt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return mrt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const _rt=yrt;var brt=fe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),wrt=fe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),Srt=fe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),Trt=fe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),Prt={line:Cs,rect:Ke,roundRect:Ke,square:Ke,circle:WP,diamond:wrt,pin:Srt,arrow:Trt,triangle:brt},Ert={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},n3={};F(Prt,function(e,t){n3[t]=new e});var Art=fe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=km(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=n3[n];i||(n="rect",i=n3[n]),Ert[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Crt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Oi(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=sN(e.slice(8),new oe(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=Y1(e.slice(7),{},new oe(t,r,n,i),a?"center":"cover"):l=new Art({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Crt,o&&l.setColor(o),l}function gF(e){return ct(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function dE(e,t){if(e!=null)return ct(e)||(e=[e,e]),[We(e[0],t[0])||0,We(qt(e[1],e[0]),t[1])||0]}function xl(e){return isFinite(e)}function Mrt(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=xl(n)?n:0,i=xl(i)?i:1,o=xl(o)?o:0,a=xl(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function krt(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=xl(a)?a:.5,s=xl(s)?s:.5,l=l>=0&&xl(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function i3(e,t,r){for(var n=t.type==="radial"?krt(e,t,r):Mrt(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function xrt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function jp(e){return parseInt(e,10)}function Wp(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||jp(s[n])||jp(e.style[n]))-(jp(s[o])||0)-(jp(s[a])||0)|0}function Lrt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:be(e)?[e]:ct(e)?e:null}function mF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Lrt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Ct(r,function(o){return o/i}),n/=i)}return[r,n]}var Irt=new Kl(!0);function $m(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function G4(e){return typeof e=="string"&&e!=="none"}function zm(e){var t=e.fill;return t!=null&&t!=="none"}function j4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function W4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function o3(e,t,r){var n=b9(t.image,t.__image,r);if(G1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*Bq),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Ort(e,t,r,n){var i,o=$m(r),a=zm(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Irt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,g=a&&!!h.image,m=o&&!!d.image,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(y=f?i3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(_=f?i3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),g&&(w=f||!t.__canvasFillPattern?o3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(T=f||!t.__canvasStrokePattern?o3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=y:g&&(w?e.fillStyle=w:a=!1),v?e.strokeStyle=_:m&&(T?e.strokeStyle=T:o=!1)}var P=t.getGlobalScale();c.setScale(P[0],P[1],t.segmentIgnoreThreshold);var C,A;e.setLineDash&&r.lineDash&&(i=mF(t),C=i[0],A=i[1]);var M=!0;(u||f&fc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),M=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),M&&c.rebuildPath(e,l?s:1),C&&(e.setLineDash(C),e.lineDashOffset=A),n||(r.strokeFirst?(o&&W4(e,r),a&&j4(e,r)):(a&&j4(e,r),o&&W4(e,r))),C&&e.setLineDash([])}function Rrt(e,t,r){var n=t.__image=b9(r.image,t.__image,t,t.onload);if(!(!n||!G1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function Drt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Yl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=mF(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?($m(r)&&e.strokeText(i,r.x,r.y),zm(r)&&e.fillText(i,r.x,r.y)):(zm(r)&&e.fillText(i,r.x,r.y),$m(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var H4=["shadowBlur","shadowOffsetX","shadowOffsetY"],X4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function yF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){fn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?Bl.opacity:a}(n||t.blend!==r.blend)&&(o||(fn(e,i),o=!0),e.globalCompositeOperation=t.blend||Bl.blend);for(var s=0;s<H4.length;s++){var l=H4[s];(n||t[l]!==r[l])&&(o||(fn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(fn(e,i),o=!0),e.shadowColor=t.shadowColor||Bl.shadowColor),o}function Y4(e,t,r,n,i){var o=n0(t,i.inHover),a=n?null:r&&n0(r,i.inHover)||{};if(o===a)return!1;var s=yF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(fn(e,i),s=!0),G4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(fn(e,i),s=!0),G4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(fn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(fn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<X4.length;c++){var f=X4[c],h=f[0];(n||o[h]!==a[h])&&(s||(fn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function Nrt(e,t,r,n,i){return yF(e,n0(t,i.inHover),r&&n0(r,i.inHover),n,i)}function _F(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Frt(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),_F(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function Brt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var q4=1,Z4=2,K4=3,J4=4;function $rt(e){var t=zm(e),r=$m(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function fn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function n0(e,t){return t&&e.__hoverStyle||e.style}function bF(e,t){Ll(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ll(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Pn,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||xrt(o,a))&&(a&&a.length&&(fn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(fn(e,r),e.save(),Frt(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof fe&&t.autoBatch&&$rt(t.style);s||Brt(i,u.transform)?(fn(e,r),_F(e,t)):c||fn(e,r);var f=n0(t,r.inHover);t instanceof fe?(r.lastDrawType!==q4&&(l=!0,r.lastDrawType=q4),Y4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Ort(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof $S?(r.lastDrawType!==K4&&(l=!0,r.lastDrawType=K4),Y4(e,t,u,l,r),Drt(e,t,f)):t instanceof Sa?(r.lastDrawType!==Z4&&(l=!0,r.lastDrawType=Z4),Nrt(e,t,u,l,r),Rrt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==J4&&(l=!0,r.lastDrawType=J4),zrt(e,t,r)),c&&n&&fn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function zrt(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ll(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ll(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var f2=new _rt,Q4=new C0(100),t6=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Vm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&f2.delete(e);var o=f2.get(e);if(o)return o;var a=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,f2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<t6.length;++h){var d=a[t6[h]];if(d!=null&&!ct(d)&&!Et(d)&&!be(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=Q4.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=SF(a.dashArrayX),m=Vrt(a.dashArrayY),y=wF(a.symbol),_=Urt(g),w=TF(m),T=!i&&lu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},P=A(),C;T&&(T.width=P.width*r,T.height=P.height*r,C=T.getContext("2d")),M(),f&&Q4.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=P.width,u.svgHeight=P.height;function A(){for(var k=1,R=0,B=_.length;R<B;++R)k=hk(k,_[R]);for(var z=1,R=0,B=y.length;R<B;++R)z=hk(z,y[R].length);k*=z;var N=w*_.length*y.length;return{width:Math.max(1,Math.min(k,a.maxTileWidth)),height:Math.max(1,Math.min(N,a.maxTileHeight))}}function M(){C&&(C.clearRect(0,0,T.width,T.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,T.width,T.height)));for(var k=0,R=0;R<m.length;++R)k+=m[R];if(k<=0)return;for(var B=-w,z=0,N=0,j=0;B<P.height;){if(z%2===0){for(var Z=N/2%y.length,q=0,tt=0,Pt=0;q<P.width*2;){for(var Ot=0,R=0;R<g[j].length;++R)Ot+=g[j][R];if(Ot<=0)break;if(tt%2===0){var bt=(1-a.symbolSize)*.5,wt=q+g[j][tt]*bt,Ht=B+m[z]*bt,Y=g[j][tt]*a.symbolSize,nt=m[z]*a.symbolSize,K=Pt/2%y[Z].length;pt(wt,Ht,Y,nt,y[Z][K])}q+=g[j][tt],++Pt,++tt,tt===g[j].length&&(tt=0)}++j,j===g.length&&(j=0)}B+=m[z],++N,++z,z===m.length&&(z=0)}function pt(St,At,st,ft,$){var G=i?1:r,X=Oi($,St*G,At*G,st*G,ft*G,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else bF(C,X)}}}}function wF(e){if(!e||e.length===0)return[["rect"]];if(Et(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Et(e[r])){t=!1;break}if(t)return wF([e]);for(var n=[],r=0;r<e.length;++r)Et(e[r])?n.push([e[r]]):n.push(e[r]);return n}function SF(e){if(!e||e.length===0)return[[0,0]];if(be(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!be(e[n])){r=!1;break}if(r)return SF([e]);for(var i=[],n=0;n<e.length;++n)if(be(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Ct(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Vrt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(be(e)){var t=Math.ceil(e);return[t,t]}var r=Ct(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function Urt(e){return Ct(e,function(t){return TF(t)})}function TF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Grt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=Vm(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=Vm(i,t)}}})}var jrt=new Bi;const vi=jrt;var PF={};function Wrt(e,t){PF[e]=t}function Hrt(e){return PF[e]}var Xrt=typeof window<"u",Yrt=1,qrt=800,Zrt=900,Krt=1e3,Jrt=2e3,Qrt=5e3,EF=1e3,tnt=1100,pE=2e3,AF=3e3,ent=4e3,cy=4500,rnt=4600,nnt=5e3,int=6e3,CF=7e3,ont={PROCESSOR:{FILTER:Krt,SERIES_FILTER:qrt,STATISTIC:Qrt},VISUAL:{LAYOUT:EF,PROGRESSIVE_LAYOUT:tnt,GLOBAL:pE,CHART:AF,POST_CHART_LAYOUT:rnt,COMPONENT:ent,BRUSH:nnt,CHART_ITEM:cy,ARIA:int,DECAL:CF}},Ar="__flagInMainProcess",an="__pendingUpdate",h2="__needsUpdateStatus",e6=/^[a-zA-Z0-9_]+$/,d2="__connectUpdateStatus",r6=0,ant=1,snt=2;function MF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return xF(this,e,t)}}function kF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return xF(this,e,t)}}function xF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Bi.prototype[t].apply(e,r)}var LF=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Bi),IF=LF.prototype;IF.on=kF("on");IF.off=kF("off");var Vu,p2,Hp,Na,v2,g2,m2,oh,ah,n6,i6,y2,o6,Xp,a6,OF,Rn,s6,RF=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,new frt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Et(n)&&(n=DF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=uk(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:qt(i.useDirtyRect,l),useCoarsePointer:qt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=ly(Vt(u.flush,u),17),n=zt(n),n&&$N(n,!0),o._theme=n,o._locale=utt(i.locale||gN),o._coordSysMgr=new oE;var c=o._api=a6(o);function f(h,d){return h.__prio-d.__prio}return Og(Gm,f),Og(a3,f),o._scheduler=new dF(o,c,a3,Gm),o._messageCenter=new LF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),n6(u,o),i6(u,o),Sm(o),o}return t.prototype._onframe=function(){if(!this._disposed){s6(this);var r=this._scheduler;if(this[an]){var n=this[an].silent;this[Ar]=!0;try{Vu(this),Na.update.call(this,null,this[an].updateParams)}catch(l){throw this[Ar]=!1,this[an]=null,l}this._zr.flush(),this[Ar]=!1,this[an]=null,oh.call(this,n),ah.call(this,n)}else if(r.unfinished){var i=Yrt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),g2(this,o),r.performVisualTasks(o),Xp(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Ar]){if(this._disposed){this.id;return}var o,a,s;if(It(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Ar]=!0,!this._model||n){var l=new jtt(this._api),u=this._theme,c=this._model=new NN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},s3);var f={seriesTransition:s,optionChanged:!0};if(i)this[an]={silent:o,updateParams:f},this[Ar]=!1,this.getZr().wakeUp();else{try{Vu(this),Na.update.call(this,null,f)}catch(h){throw this[an]=null,this[Ar]=!1,h}this._ssr||this._zr.flush(),this[an]=null,this[Ar]=!1,oh.call(this,o),ah.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Xrt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Xt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return F(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;F(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return F(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(l6[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();F(Pd,function(_,w){if(_.group===i){var T=n?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(zt(r)),S=_.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=lu.createCanvas(),m=uk(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var y="";return F(h,function(_){var w=_.left-l,T=_.top-u;y+='<g transform="translate('+w+","+T+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ke({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),F(h,function(_){var w=new Sa({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(w)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return v2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return v2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=B_(i,r);return F(a,function(s,l){l.indexOf("Models")>=0&&F(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=B_(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?vF(s,l,n):uy(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;F(lnt,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&_c(s,function(p){var v=ne(p);if(v&&v.dataIndex!=null){var g=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ot({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),F(Td,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),F(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),vrt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&m9(this.getDom(),gE,"");var n=this,i=n._api,o=n._model;F(n._componentsViews,function(a){a.dispose(o,i)}),F(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Pd[n.id]},t.prototype.resize=function(r){if(!this[Ar]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[an]&&(o==null&&(o=this[an].silent),i=!0,this[an]=null),this[Ar]=!0;try{i&&Vu(this),Na.update.call(this,{type:"resize",animation:ot({duration:0},r&&r.animation)})}catch(a){throw this[Ar]=!1,a}this[Ar]=!1,oh.call(this,o),ah.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(It(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!l3[r]){var i=l3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ot({},r);return n.type=Td[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(It(n)||(n={silent:!!n}),!!Um[r.type]&&!!this._model){if(this[Ar]){this._pendingActions.push(r);return}var i=n.silent;m2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Xt.browser.weChat&&this._throttledZrFlush(),oh.call(this,i),ah.call(this,i)}},t.prototype.updateLabelLayout=function(){vi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Vu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),p2(f,!0),p2(f,!1),h.plan()},p2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,y=f._api,_=0;_<v.length;_++)v[_].__alive=!1;h?d.eachComponent(function(S,P){S!=="series"&&w(P)}):d.eachSeries(w);function w(S){var P=S.__requireNewView;S.__requireNewView=!1;var C="_ec_"+S.id+"_"+S.type,A=!P&&g[C];if(!A){var M=_o(S.type),k=h?ei.getClass(M.main,M.sub):Kn.getClass(M.sub);A=new k,A.init(d,y),g[C]=A,v.push(A),m.add(A.group)}S.__viewId=A.__id=C,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,y)}for(var _=0;_<v.length;){var T=v[_];T.__alive?_++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,y),v.splice(_,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Hp=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){F([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var y={mainType:p,query:m};v&&(y.subType=v);var _=d.excludeSeriesId,w;_!=null&&(w=jt(),F(Ze(_),function(S){var P=Zn(S,null);P!=null&&w.set(P,!0)})),g&&g.eachComponent(y,function(S){var P=w&&w.get(S.id)!==null;if(!P)if(Vk(d))if(S instanceof Co)d.type===$l&&!d.notBlur&&!S.get(["emphasis","disabled"])&&jJ(S,d,f._api);else{var C=GP(S.mainType,S.componentIndex,d.name,f._api),A=C.focusSelf,M=C.dispatchers;d.type===$l&&A&&!d.notBlur&&US(S.mainType,S.componentIndex,f._api),M&&F(M,function(k){d.type===$l?Xd(k):Yd(k)})}else WS(d)&&S instanceof Co&&(XJ(S,d,f._api),$k(S),Rn(f))},f),g&&g.eachComponent(y,function(S){var P=w&&w.get(S.id)!==null;P||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,g,f._api,d)}},Na={prepareAndUpdate:function(f){Vu(this),Na.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(!!d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),g2(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),y2(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");v.setBackgroundColor(y),_!=null&&_!=="auto"&&v.setDarkMode(_),vi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,y){if(m!=="series"){var _=h.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var w=_.updateTransform(y,d,p,f);w&&w.update&&v.push(_)}else v.push(_)}});var g=jt();d.eachSeries(function(m){var y=h._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,p,f);_&&_.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),Xp(this,d,p,f,{},g),vi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),Kn.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),y2(this,h,this._api,f,{}),vi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Kn.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),vi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Na.update.call(this,f)}},v2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,y=B_(v,d),_=0;_<g.length;_++){var w=g[_];if(w[h]&&(m=w[h](v,y,p))!=null)return m}},g2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},m2=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=Um[v],y=m.actionInfo,_=(y.update||"update").split(":"),w=_.pop(),T=_[0]!=null&&_o(_[0]);this[Ar]=!0;var S=[f],P=!1;f.batch&&(P=!0,S=Ct(f.batch,function(z){return z=te(ot({},z),f),z.batch=null,z}));var C=[],A,M=WS(f),k=Vk(f);if(k&&z9(this._api),F(S,function(z){if(A=m.action(z,d._model,d._api),A=A||ot({},z),A.type=y.event||A.type,C.push(A),k){var N=NP(f),j=N.queryOptionMap,Z=N.mainTypeSpecified,q=Z?j.keys()[0]:"series";Hp(d,w,z,q),Rn(d)}else M?(Hp(d,w,z,"series"),Rn(d)):T&&Hp(d,w,z,T.main,T.sub)}),w!=="none"&&!k&&!M&&!T)try{this[an]?(Vu(this),Na.update.call(this,f),this[an]=null):Na[w].call(this,f)}catch(z){throw this[Ar]=!1,z}if(P?A={type:y.event||v,escapeConnect:g,batch:C}:A=C[0],this[Ar]=!1,!h){var R=this._messageCenter;if(R.trigger(A.type,A),M){var B={type:"selectchanged",escapeConnect:g,selected:YJ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};R.trigger(B.type,B)}}},oh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();m2.call(this,d,f)}},ah=function(f){!f&&this.trigger("updated")},n6=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[an]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},i6=function(f,h){f.on("mouseover",function(d){var p=d.target,v=_c(p,jS);v&&(WJ(v,d,h._api),Rn(h))}).on("mouseout",function(d){var p=d.target,v=_c(p,jS);v&&(HJ(v,d,h._api),Rn(h))}).on("click",function(d){var p=d.target,v=_c(p,function(y){return ne(y).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=ne(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,_){var w=_.get("zlevel")||0,T=_.get("z")||0,S=_.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:w,z:T,idx:_.componentIndex,type:y,key:S})}),p){var v=h.concat(d),g,m;Og(v,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),F(v,function(y){var _=f.getComponent(y.type,y.idx),w=y.zlevel,T=y.key;g!=null&&(w=Math.max(g,w)),T?(w===g&&T!==m&&w++,m=T):m&&(w===g&&w++,m=""),g=w,_.setZLevel(w)})}}y2=function(f,h,d,p,v){n(h),o6(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive=!1}),Xp(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},o6=function(f,h,d,p,v,g){F(g||f._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,h,d,p),s(y,m),c(y,m)})},Xp=function(f,h,d,p,v,g){var m=f._scheduler;v=ot(v||{},{updatedSeries:h.getSeries()}),vi.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];w.__alive=!0;var T=w.renderTask;m.updatePayload(T,p),u(_,w),g&&g.get(_.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(y=!0),w.group.silent=!!_.get("silent"),a(_,w),$k(_)}),m.unfinished=y||m.unfinished,vi.trigger("series:layoutlabels",h,d,v),vi.trigger("series:transition",h,d,v),h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];s(_,w),c(_,w)}),o(f,h),vi.trigger("series:afterupdate",h,d,v)},Rn=function(f){f[h2]=!0,f.getZr().wakeUp()},s6=function(f){!f[h2]||(f.getZr().storage.traverse(function(h){bd(h)||i(h)}),f[h2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===W1&&f.states.emphasis?h.push("emphasis"):f.hoverState===x0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Xt.node&&!Xt.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var y=f.childrenRef(),_=0;_<y.length;_++)p=Math.max(l(y[_],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var w=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!bd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(bd(m))return;if(m instanceof fe&&QJ(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(p){m.stateTransition=g;var _=m.getTextContent(),w=m.getTextGuideLine();_&&(_.stateTransition=g),w&&(w.stateTransition=g)}m.__dirty&&i(m)}})}a6=function(f){return new(function(h){mt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Xd(p,v),Rn(f)},d.prototype.leaveEmphasis=function(p,v){Yd(p,v),Rn(f)},d.prototype.enterBlur=function(p){N9(p),Rn(f)},d.prototype.leaveBlur=function(p){UP(p),Rn(f)},d.prototype.enterSelect=function(p){F9(p),Rn(f)},d.prototype.leaveSelect=function(p){B9(p),Rn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(FN))(f)},OF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[d2]=p}}F(Td,function(d,p){f._messageCenter.on(p,function(v){if(l6[f.group]&&f[d2]!==r6){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];F(Pd,function(y){y!==f&&y.group===f.group&&m.push(y)}),h(m,r6),F(m,function(y){y[d2]!==ant&&y.dispatchAction(g)}),h(m,snt)}})})}}(),t}(Bi),vE=RF.prototype;vE.on=MF("on");vE.off=MF("off");vE.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var lnt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Um={},Td={},a3=[],s3=[],Gm=[],DF={},l3={},Pd={},l6={},unt=+new Date-0,gE="_echarts_instance_";function cnt(e,t,r){var n=!(r&&r.ssr);if(n){var i=fnt(e);if(i)return i}var o=new RF(e,t,r);return o.id="ec_"+unt++,Pd[o.id]=o,n&&m9(e,gE,o.id),OF(o),vi.trigger("afterinit",o),o}function fnt(e){return Pd[xK(e,gE)]}function NF(e,t){DF[e]=t}function FF(e){ue(s3,e)<0&&s3.push(e)}function BF(e,t){yE(a3,e,t,Jrt)}function hnt(e){mE("afterinit",e)}function dnt(e){mE("afterupdate",e)}function mE(e,t){vi.on(e,t)}function du(e,t,r){Ut(t)&&(r=t,t="");var n=It(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Td[t]&&(Ii(e6.test(n)&&e6.test(t)),Um[n]||(Um[n]={action:r,actionInfo:e}),Td[t]=n)}function pnt(e,t){oE.register(e,t)}function vnt(e,t){yE(Gm,e,t,EF,"layout")}function pu(e,t){yE(Gm,e,t,AF,"visual")}var u6=[];function yE(e,t,r,n,i){if((Ut(t)||It(t))&&(r=t,t=n),!(ue(u6,r)>=0)){u6.push(r);var o=dF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function $F(e,t){l3[e]=t}function gnt(e,t,r){var n=Hrt("registerMap");n&&n(e,t,r)}var mnt=_et;pu(pE,qet);pu(cy,Zet);pu(cy,Ket);pu(pE,hrt);pu(cy,drt);pu(CF,Grt);FF($N);BF(Zrt,Jtt);$F("default",Jet);du({type:$l,event:$l,update:$l},Dr);du({type:$g,event:$g,update:$g},Dr);du({type:md,event:md,update:md},Dr);du({type:zg,event:zg,update:zg},Dr);du({type:yd,event:yd,update:yd},Dr);NF("light",urt);NF("dark",crt);function sh(e){return e==null?0:e.length||1}function c6(e){return e}var ynt=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||c6,this._newKeyGetter=i||c6,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=sh(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=sh(u),h=sh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=sh(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=sh(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const zF=ynt;var _nt=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function bnt(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};F(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;_2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),Snt(d.type)&&(o[0]=h),_2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}xN.each(function(g,m){var y=_2(n,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Ct(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new _nt(s,t),r}function _2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function wnt(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Snt(e){return!(e==="ordinal"||e==="time")}var Tnt=function(){function e(t){this.otherDims={},t!=null&&ot(this,t)}return e}();const jg=Tnt;var Pnt=Oe(),Ent={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},VF=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=jF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=VN(this.source),n=!WF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Ent[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function UF(e){return e instanceof VF}function GF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=It(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function jF(e){var t=Pnt(e);return t.dimNameMap||(t.dimNameMap=GF(e.dimensionsDefine))}function WF(e){return e>30}var lh=It,Fa=Ct,Ant=typeof Int32Array>"u"?Array:Int32Array,Cnt="e\0\0",f6=-1,Mnt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],knt=["_approximateExtent"],h6,Yp,uh,ch,b2,qp,w2,xnt=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;UF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Et(f)?new jg({name:f}):f instanceof jg?f:new jg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();F(a,function(g){v.set(o[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(be(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof KS&&(o=t),!o){var a=this.dimensions,s=aE(t)||Fr(t)?new UN(t,a.length):t;o=new KS;var l=Fa(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=bnt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&w2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==_s&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===ni;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&yK(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=Zn(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=Zn(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)w2(this,c);h6(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){lh(t)?ot(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=uh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Yp(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ct(t)?i.getValues(Fa(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?f6:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Fa(ch(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Fa(ch(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ve(t);return F(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=Fa(ch(t),this._getStoreDimIndex,this),s=qp(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=Fa(ch(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=qp(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=qp(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new br(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new zF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Yp(t,n)},function(n){return Yp(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},lh(t)?ot(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ct(o)?o=o.slice():lh(o)&&(o=ot({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,lh(r)?ot(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){lh(t)?ot(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ot(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;DJ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){F(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Fa(this.dimensions,this._getDimInfo,this),this.hostModel)),b2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(EP(arguments)))})},e.internalField=function(){h6=function(t){var r=t._invertedIndicesMap;F(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new Ant(a.categories.length);for(var l=0;l<n.length;l++)n[l]=f6;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},uh=function(t,r,n){return Zn(t._getCategory(r,n),null)},Yp=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=uh(t,t._idDimIdx,r)),n==null&&(n=Cnt+r),n},ch=function(t){return ct(t)||(t=t!=null?[t]:[]),t},qp=function(t){var r=new e(t._schema?t._schema:Fa(t.dimensions,t._getDimInfo,t),t.hostModel);return b2(r,t),r},b2=function(t,r){F(Mnt.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,F(knt,function(n){t[n]=zt(r[n])}),t._calculationInfo=ot({},r._calculationInfo)},w2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=uh(t,o,r)),l==null&&a!=null&&(i[r]=l=uh(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const zl=xnt;function HF(e,t){aE(e)||(e=sE(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=Int(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&WF(a),l=n===e.dimensionsDefine,u=l?jF(e):GF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new KN(a),d=0;d<h.length;d++)h[d]=-1;function p(A){var M=h[A];if(M<0){var k=n[A],R=It(k)?k:{name:k},B=new jg,z=R.name;z!=null&&u.get(z)!=null&&(B.name=B.displayName=z),R.type!=null&&(B.type=R.type),R.displayName!=null&&(B.displayName=R.displayName);var N=o.length;return h[A]=N,B.storeDimIndex=A,o.push(B),B}return o[M]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(A,M){var k=Ze(A).slice();if(k.length===1&&!Et(k[0])&&k[0]<0){f.set(M,!1);return}var R=f.set(M,[]);F(k,function(B,z){var N=Et(B)?u.get(B):B;N!=null&&N<a&&(R[z]=N,g(p(N),M,z))})});var v=0;F(r,function(A){var M,k,R,B;if(Et(A))M=A,B={};else{B=A,M=B.name;var z=B.ordinalMeta;B.ordinalMeta=null,B=ot({},B),B.ordinalMeta=z,k=B.dimsDef,R=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var N=f.get(M);if(N!==!1){if(N=Ze(N),!N.length)for(var j=0;j<(k&&k.length||1);j++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&N.push(v++)}F(N,function(Z,q){var tt=p(Z);if(l&&B.type!=null&&(tt.type=B.type),g(te(tt,B),M,q),tt.name==null&&k){var Pt=k[q];!It(Pt)&&(Pt={name:Pt}),tt.name=tt.displayName=Pt.name,tt.defaultTooltip=Pt.defaultTooltip}R&&te(tt.otherDims,R)})}});function g(A,M,k){xN.get(M)!=null?A.otherDims[M]=k:(A.coordDim=M,A.coordDimIndex=k,i.set(M,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var w=m||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(s)F(o,function(A){T(A)}),o.sort(function(A,M){return A.storeDimIndex-M.storeDimIndex});else for(var S=0;S<a;S++){var P=p(S),C=P.coordDim;C==null&&(P.coordDim=Ont(w,i,_),P.coordDimIndex=0,(!m||y<=0)&&(P.isExtraCoord=!0),y--),T(P),P.type==null&&(RN(e,S)===bn.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return Lnt(o),new VF({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function Lnt(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Int(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return F(t,function(o){var a;It(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function Ont(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Rnt=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function Dnt(e){var t=e.get("coordinateSystem"),r=new Rnt(t),n=Nnt[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Nnt={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Si).models[0],o=e.getReferringComponents("yAxis",Si).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),Uu(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),Uu(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Si).models[0];t.coordSysDims=["single"],r.set("single",i),Uu(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Si).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),Uu(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),Uu(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();F(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),Uu(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Uu(e){return e.get("type")==="category"}function Fnt(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;Bnt(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(F(o,function(y,_){Et(y)&&(o[_]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;F(o,function(y){y.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(g),a.appendCalculationDimension(m)):(o.push(g),o.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function Bnt(e){return!UF(e.schema)}function eu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function XF(e,t){return eu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function $nt(e,t){var r=e.get("coordinateSystem"),n=oE.get(r),i;return t&&t.coordSysDims&&(i=Ct(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=wnt(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function znt(e,t,r){var n,i;return r&&F(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function O0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=sE(e)):(i=n.getSource(),o=i.sourceFormat===ni);var a=Dnt(t),s=$nt(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?_e(Ptt,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=HF(i,c),h=znt(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=Fnt(t,{schema:f,store:d}),v=new zl(f,t);v.setCalculationInfo(p);var g=h!=null&&Vnt(i)?function(m,y,_,w){return w===h?_:this.defaultDimValueGetter(m,y,_,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,g),v}function Vnt(e){if(e.sourceFormat===ni){var t=Unt(e.data||[]);return!ct(M0(t))}}function Unt(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var YF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();U1(YF);const Ea=YF;var Gnt=0,jnt=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Gnt}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Ct(n,Wnt);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Et(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function Wnt(e){return It(e)&&e.value!=null?e.value:e+""}const u3=jnt;function c3(e){return e.type==="interval"||e.type==="log"}function Hnt(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=h9(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=qF(a),l=i.niceTickExtent=[qe(Math.ceil(e[0]/a)*a,s),qe(Math.floor(e[1]/a)*a,s)];return Xnt(l,e),i}function S2(e){var t=Math.pow(10,RP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,qe(r*t)}function qF(e){return yo(e)+2}function d6(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Xnt(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),d6(e,0,t),d6(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function fy(e,t){return e>=t[0]&&e<=t[1]}function hy(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function dy(e,t){return e*(t[1]-t[0])+t[0]}var ZF=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new u3({})),ct(i)&&(i=new u3({categories:Ct(i,function(o){return It(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Et(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),fy(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),hy(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(dy(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ea);Ea.registerClass(ZF);const KF=ZF;var hl=qe,JF=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return fy(r,this._extent)},t.prototype.normalize=function(r){return hy(r,this._extent)},t.prototype.scale=function(r){return dy(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=qF(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:hl(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=hl(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:hl(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=hl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=yo(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=hl(r.value,i,!0);return AN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=Hnt(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=hl(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=hl(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ea);Ea.registerClass(JF);const R0=JF;var QF=typeof Float32Array<"u",Ynt=QF?Float32Array:Array;function na(e){return ct(e)?QF?new Float32Array(e):e:new Ynt(e)}var f3="__ec_stack_";function _E(e){return e.get("stack")||f3+e.seriesIndex}function bE(e){return e.dim+e.index}function qnt(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(te({bandWidth:i,axisKey:n,stackId:f3+o},e));for(var a=rB(t),s=[],o=0;o<e.count;o++){var l=a[n][f3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function tB(e,t){var r=[];return t.eachSeriesByType(e,function(n){nB(n)&&r.push(n)}),r}function Znt(e){var t={};F(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function eB(e){var t=Znt(e),r=[];return F(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=We(n.get("barWidth"),s),v=We(n.get("barMaxWidth"),s),g=We(n.get("barMinWidth")||(iB(n)?.5:1),s),m=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:y,axisKey:bE(o),stackId:_E(n)})}),rB(r)}function rB(e){var t={};F(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return F(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ve(o).length;s=Math.max(35-l*4,15)+"%"}var u=We(s,a),c=We(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),F(o,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var w=m.width;y&&(w=Math.min(w,y)),_&&(w=Math.max(w,_)),m.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),_&&_>w&&(w=_),w!==d&&(m.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;F(o,function(m,y){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;F(o,function(m,y){r[i][y]=r[i][y]||{bandWidth:a,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function Knt(e,t,r){if(e&&t){var n=e[bE(t)];return n!=null&&r!=null?n[_E(r)]:n}}function Jnt(e,t){var r=tB(e,t),n=eB(r);F(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=_E(i),u=n[bE(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function Qnt(e){return{seriesType:e,plan:fE(),reset:function(t){if(!!nB(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=eu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=tit(i,o),p=iB(t),v=t.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(_,w){for(var T=_.count,S=p&&na(T*3),P=p&&l&&na(T*3),C=p&&na(T),A=n.master.getRect(),M=h?A.width:A.height,k,R=w.getStore(),B=0;(k=_.next())!=null;){var z=R.get(f?g:a,k),N=R.get(s,k),j=d,Z=void 0;f&&(Z=+z-R.get(a,k));var q=void 0,tt=void 0,Pt=void 0,Ot=void 0;if(h){var bt=n.dataToPoint([z,N]);if(f){var wt=n.dataToPoint([Z,N]);j=wt[0]}q=j,tt=bt[1]+y,Pt=bt[0]-j,Ot=m,Math.abs(Pt)<v&&(Pt=(Pt<0?-1:1)*v)}else{var bt=n.dataToPoint([N,z]);if(f){var wt=n.dataToPoint([N,Z]);j=wt[1]}q=bt[0]+y,tt=j,Pt=m,Ot=bt[1]-j,Math.abs(Ot)<v&&(Ot=(Ot<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=tt,S[B+2]=h?Pt:Ot,P&&(P[B]=h?A.x:q,P[B+1]=h?tt:A.y,P[B+2]=M),C[k]=k):w.setItemLayout(k,{x:q,y:tt,width:Pt,height:Ot}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:C,largeBackgroundPoints:P,valueAxisHorizontal:h})}}}}}}function nB(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function iB(e){return e.pipelineContext&&e.pipelineContext.large}function tit(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var eit=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},oB=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return Q1(r.value,n4[dtt(Ic(this._minLevelUnit))]||n4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return ptt(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=lit(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Yn,n[1]+=Yn),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Yn}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Zp.length,l=Math.min(eit(Zp,this._approxInterval,0,s),s-1);this._interval=Zp[l][1],this._minLevelUnit=Zp[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return be(r)?r:+pa(r)},t.prototype.contain=function(r){return fy(this.parse(r),this._extent)},t.prototype.normalize=function(r){return hy(this.parse(r),this._extent)},t.prototype.scale=function(r){return dy(r,this._extent)},t.type="time",t}(R0),Zp=[["second",tE],["minute",eE],["hour",wd],["quarter-day",wd*6],["half-day",wd*12],["day",Yn*1.2],["half-week",Yn*3.5],["week",Yn*7],["month",Yn*31],["quarter",Yn*95],["half-year",r4/2],["year",r4]];function rit(e,t,r,n){var i=pa(t),o=pa(r),a=function(p){return i4(i,p,n)===i4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function nit(e,t){return e/=Yn,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function iit(e){var t=30*Yn;return e/=t,e>6?6:e>3?3:e>2?2:1}function oit(e){return e/=wd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function p6(e,t){return e/=t?eE:tE,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function ait(e){return h9(e,!0)}function sit(e,t,r){var n=new Date(e);switch(Ic(t)){case"year":case"month":n[bN(r)](0);case"day":n[wN(r)](1);case"hour":n[SN(r)](0);case"minute":n[TN(r)](0);case"second":n[PN(r)](0),n[EN(r)](0)}return n.getTime()}function lit(e,t,r,n){var i=1e4,o=yN,a=0;function s(M,k,R,B,z,N,j){for(var Z=new Date(k),q=k,tt=Z[B]();q<R&&q<=n[1];)j.push({value:q}),tt+=M,Z[z](tt),q=Z.getTime();j.push({value:q,notAdd:!0})}function l(M,k,R){var B=[],z=!k.length;if(!rit(Ic(M),n[0],n[1],r)){z&&(k=[{value:sit(new Date(n[0]),M,r)},{value:n[1]}]);for(var N=0;N<k.length-1;N++){var j=k[N].value,Z=k[N+1].value;if(j!==Z){var q=void 0,tt=void 0,Pt=void 0,Ot=!1;switch(M){case"year":q=Math.max(1,Math.round(t/Yn/365)),tt=rE(r),Pt=vtt(r);break;case"half-year":case"quarter":case"month":q=iit(t),tt=Oc(r),Pt=bN(r);break;case"week":case"half-week":case"day":q=nit(t),tt=ty(r),Pt=wN(r),Ot=!0;break;case"half-day":case"quarter-day":case"hour":q=oit(t),tt=Qd(r),Pt=SN(r);break;case"minute":q=p6(t,!0),tt=ey(r),Pt=TN(r);break;case"second":q=p6(t,!1),tt=ry(r),Pt=PN(r);break;case"millisecond":q=ait(t),tt=ny(r),Pt=EN(r);break}s(q,j,Z,tt,Pt,Ot,B),M==="year"&&R.length>1&&N===0&&R.unshift({value:R[0].value-q})}}for(var N=0;N<B.length;N++)R.push(B[N]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=Ic(o[d]);if(!!htt(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Ic(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(M,k){return M.value-k.value});for(var g=[],m=0;m<c.length;++m){var y=c[m].value;(m===0||c[m-1].value!==y)&&(g.push(c[m]),y>=n[0]&&y<=n[1]&&f++)}var _=(n[1]-n[0])/t;if(f>_*1.5&&h>_/1.5||(u.push(g),f>_||e===o[d]))break}c=[]}}}for(var w=yr(Ct(u,function(M){return yr(M,function(k){return k.value>=n[0]&&k.value<=n[1]&&!k.notAdd})}),function(M){return M.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var P=w[d],C=0;C<P.length;++C)T.push({value:P[C].value,level:S-d});T.sort(function(M,k){return M.value-k.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Ea.registerClass(oB);const uit=oB;var v6=Ea.prototype,Ed=R0.prototype,cit=qe,fit=Math.floor,hit=Math.ceil,Kp=Math.pow,li=Math.log,wE=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new R0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Ed.getTicks.call(this,r);return Ct(a,function(s){var l=s.value,u=qe(Kp(this.base,l));return u=l===i[0]&&this._fixMin?Jp(u,o[0]):u,u=l===i[1]&&this._fixMax?Jp(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=li(this.base);r=li(Math.max(0,r))/i,n=li(Math.max(0,n))/i,Ed.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=v6.getExtent.call(this);n[0]=Kp(r,n[0]),n[1]=Kp(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=Jp(n[0],o[0])),this._fixMax&&(n[1]=Jp(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=li(r[0])/li(n),r[1]=li(r[1])/li(n),v6.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=vK(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[qe(hit(n[0]/o)*o),qe(fit(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Ed.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=li(r)/li(this.base),fy(r,this._extent)},t.prototype.normalize=function(r){return r=li(r)/li(this.base),hy(r,this._extent)},t.prototype.scale=function(r){return r=dy(r,this._extent),Kp(this.base,r)},t.type="log",t}(Ea),aB=wE.prototype;aB.getMinorTicks=Ed.getMinorTicks;aB.getLabel=Ed.getLabel;function Jp(e,t){return cit(e,yo(t))}Ea.registerClass(wE);const dit=wE;var pit=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=Qp(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=Qp(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=Qp(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=Qp(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ct(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ha(l[0],1),ha(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=wm(s)||wm(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[git[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=vit[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),vit={min:"_determinedMin",max:"_determinedMax"},git={min:"_dataMin",max:"_dataMax"};function mit(e,t,r){var n=e.rawExtentInfo;return n||(n=new pit(e,t,r),e.rawExtentInfo=n,n)}function Qp(e,t){return t==null?null:wm(t)?NaN:e.parse(t)}function sB(e,t){var r=e.type,n=mit(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=tB("bar",a),l=!1;if(F(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=eB(s),c=yit(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function yit(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=Knt(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;F(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;F(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function g6(e,t){var r=t,n=sB(e,r),i=n.extent,o=r.get("splitNumber");e instanceof dit&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function _it(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new KF({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new uit({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ea.getClass(t)||R0)}}function bit(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function D0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Et(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(SE(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function SE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function wit(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof KF?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=D0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=Sit(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function Sit(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new oe(e.x,e.y,o,a);return s}function TE(e){var t=e.get("interval");return t==null?"auto":t}function lB(e){return e.type==="category"&&TE(e.getLabelModel())===0}function Tit(e,t){var r={};return F(e.mapDimensionsAll(t),function(n){r[XF(e,n)]=!0}),ve(r)}var Pit=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),m6=[],Eit={registerPreprocessor:FF,registerProcessor:BF,registerPostInit:hnt,registerPostUpdate:dnt,registerUpdateLifecycle:mE,registerAction:du,registerCoordinateSystem:pnt,registerLayout:vnt,registerVisual:pu,registerTransform:mnt,registerLoading:$F,registerMap:gnt,registerImpl:Wrt,PRIORITY:ont,ComponentModel:Me,ComponentView:ei,SeriesModel:Co,ChartView:Kn,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){ei.registerClass(e)},registerSeriesModel:function(e){Co.registerClass(e)},registerChartView:function(e){Kn.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){uK(e,t)}};function Br(e){if(ct(e)){F(e,function(t){Br(t)});return}ue(m6,e)>=0||(m6.push(e),Ut(e)&&(e={install:e}),e.install(Eit))}var i0=Oe();function Ait(e){return e.type==="category"?Mit(e):xit(e)}function Cit(e,t){return e.type==="category"?kit(e,t):{ticks:Ct(e.scale.getTicks(),function(r){return r.value})}}function Mit(e){var t=e.getLabelModel(),r=uB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function uB(e,t){var r=cB(e,"labels"),n=TE(t),i=fB(r,n);if(i)return i;var o,a;return Ut(n)?o=pB(e,n):(a=n==="auto"?Lit(e):n,o=dB(e,a)),hB(r,n,{labels:o,labelCategoryInterval:a})}function kit(e,t){var r=cB(e,"ticks"),n=TE(t),i=fB(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=pB(e,n,!0);else if(n==="auto"){var s=uB(e,e.getLabelModel());a=s.labelCategoryInterval,o=Ct(s.labels,function(l){return l.tickValue})}else a=n,o=dB(e,a,!0);return hB(r,n,{ticks:o,tickCategoryInterval:a})}function xit(e){var t=e.scale.getTicks(),r=D0(e);return{labels:Ct(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function cB(e,t){return i0(e)[t]||(i0(e)[t]=[])}function fB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function hB(e,t,r){return e.push({key:t,value:r}),r}function Lit(e){var t=i0(e).autoInterval;return t!=null?t:i0(e).autoInterval=e.calculateCategoryInterval()}function Iit(e){var t=Oit(e),r=D0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,g=LP(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,y=d/f;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),w=i0(e.model),T=e.getExtent(),S=w.lastAutoInterval,P=w.lastTickCount;return S!=null&&P!=null&&Math.abs(S-_)<=1&&Math.abs(P-a)<=1&&S>_&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?_=S:(w.lastTickCount=a,w.lastAutoInterval=_,w.axisExtent0=T[0],w.axisExtent1=T[1]),_}function Oit(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function dB(e,t,r){var n=D0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=lB(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function pB(e,t,r){var n=e.scale,i=D0(e),o=[];return F(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var y6=[0,1],Rit=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return hK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),_6(n,i.count())),da(t,y6,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),_6(n,i.count()));var o=da(t,n,y6,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Cit(this,r),i=n.ticks,o=Ct(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return Dit(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Ct(n,function(o){return Ct(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return Ait(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Iit(this)},e}();function _6(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Dit(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;F(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=qe(d),p=qe(p),f?d>p:d<p}}const Nit=Rit;function Fit(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Im(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function Bit(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new oe(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Im(p.localRect,p.transform)),f||(f=new Im(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function b6(e,t,r){var n=lu.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var $it=function(e){Ae(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Mm,typeof r=="string"?a=b6(r,n,i):It(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(z7(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=b6("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new oe(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var _=new oe(0,0,0,0);_.copy(y),a.push(_)}else{for(var w=!1,T=1/0,S=0,P=0;P<a.length;++P){var C=a[P];if(C.intersect(y)){var A=new oe(0,0,0,0);A.copy(C),A.union(y),a[P]=A,w=!0;break}else if(l){u.copy(y),u.union(C);var M=y.width*y.height,k=C.width*C.height,R=u.width*u.height,B=R-M-k;B<T&&(T=B,S=P)}}if(l&&(a[S].union(y),w=!0),!w){var _=new oe(0,0,0,0);_.copy(y),a.push(_)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&Pn||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Pn||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var m=f+1;m<a.length;)a[f].intersect(a[m])?(g=!0,a[f].union(a[m]),a.splice(m,1)):m++;f++}}while(g);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,y){if(a.clearRect(v,g,m,y),n&&n!=="transparent"){var _=void 0;$1(n)?(_=n.__canvasGradient||i3(a,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=_):Dq(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,_=o3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=_||n,a.fillRect(v,g,m,y),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,g,m,y),a.restore())}!i||u?p(0,0,s,l):i.length&&F(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Bi);const T2=$it;var w6=1e5,dl=314159,tv=.01,zit=.001;function Vit(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Uit(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Git=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ot({},n||{}),this.dpr=n.devicePixelRatio||Mm,this._singleCanvas=o,this.root=t;var a=t.style;a&&(z7(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new T2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[dl]=d,d.zlevel=dl,s.push(dl),this._domRoot=t}else{this._width=Wp(t,0,n),this._height=Wp(t,1,n);var u=this._domRoot=Uit(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(w6)),o||(o=n.ctx,o.save()),Ll(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(w6)},e.prototype.paintOne=function(t,r){bF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;TS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(dl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var g=o[v],m=g.ctx,y=a&&g.createRepaintRects(t,r,d._width,d._height),_=n?g.__startIndex:g.__drawIndex,w=!n&&g.incremental&&Date.now,T=w&&Date.now(),S=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,S,y);else if(_===g.__startIndex){var P=t[_];(!P.incremental||!P.notClear||n)&&g.clear(!1,S,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=g.__startIndex);var C,A=function(B){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(C=_;C<g.__endIndex;C++){var N=t[C];if(N.__inHover&&(f=!0),i._doPaintEl(N,g,a,B,z,C===g.__endIndex-1),w){var j=Date.now()-T;if(j>15)break}}z.prevElClipPaths&&m.restore()};if(y)if(y.length===0)C=g.__endIndex;else for(var M=d.dpr,k=0;k<y.length;++k){var R=y[k];m.save(),m.beginPath(),m.rect(R.x*M,R.y*M,R.width*M,R.height*M),m.clip(),A(R),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=C,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Xt.wxa&&F(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Ll(s,t,o,a),t.setPrevPaintRect(l))}else Ll(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=dl);var n=this._layers[t];return n||(n=new T2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ie(n,this._layerConfig[t],!0):this._layerConfig[t-tv]&&ie(n,this._layerConfig[t-tv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!Vit(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+zit,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?tv:0),this._needsManuallyCompositing),c.__builtin__||PP("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&Pn&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,F(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?ie(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+tv){var a=this._layers[o];ie(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(ue(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Wp(o,0,i),r=Wp(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(dl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[dl].dom;var r=new T2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Ll(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const jit=Git;function vf(e){e.registerPainter("canvas",jit)}var Wit=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return O0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new De,i=Oi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=Oi(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Co);const Hit=Wit;function o0(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Xc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Xc(e,t,r[a]));return o.join(" ")}}function vB(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ct(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Xit=function(e){mt(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=Oi(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=Yit,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Xd(this.childAt(0))},t.prototype.downplay=function(){Yd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):hr(h,d,s,n),oN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Ao(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=_.get("focus"),d=_.get("blurScope"),p=_.get("disabled"),v=fu(y),g=_.getShallow("scale"),m=y.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=dE(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var S=r.getItemVisual(n,"style"),P=S.fill;if(s instanceof Sa){var C=s.style;s.useStyle(ot({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},S))}else s.__isEmptyBrush?s.useStyle(ot({},S)):s.useStyle(S),s.style.decal=null,s.setColor(P,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),M=this._z2;A!=null?M==null&&(this._z2=s.z2,s.z2+=A):M!=null&&(s.z2=M,this._z2=null);var k=a&&a.useNameLabel;hf(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:R,inheritColor:P,defaultOpacity:S.opacity});function R(N){return k?r.getName(N):o0(r,N)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=s.ensureState("emphasis");B.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var z=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;B.scaleX=this._sizeX*z,B.scaleY=this._sizeY*z,this.setSymbolScale(1),Jl(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ne(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&Ql(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Ql(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return gF(r.getItemVisual(n,"symbolSize"))},t}(De);function Yit(e,t){this.parent.drift(e,t)}const py=Xit;function P2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function S6(e){return e!=null&&!It(e)&&(e={isIgnore:e}),e||{}}function T6(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:fu(t),cursorStyle:t.get("cursor")}}var qit=function(){function e(t){this.group=new De,this._SymbolCtor=t||py}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=S6(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=T6(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(P2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!P2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):hr(d,m,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=T6(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=S6(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(P2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){ff(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const gB=qit;function mB(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Zit(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Ct(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return eu(t,f[0])&&(h=!0,f[0]=d),eu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Zit(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:be(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function yB(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function Kit(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Jit(e,t,r,n,i,o,a,s){for(var l=Kit(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=mB(i,t,a),m=e.getLayout("points")||[],y=t.getLayout("points")||[],_=0;_<l.length;_++){var w=l[_],T=!0,S=void 0,P=void 0;switch(w.cmd){case"=":S=w.idx*2,P=w.idx1*2;var C=m[S],A=m[S+1],M=y[P],k=y[P+1];(isNaN(C)||isNaN(A))&&(C=M,A=k),u.push(C,A),c.push(M,k),f.push(r[S],r[S+1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var R=w.idx,B=g.dataDimsForPoint,z=i.dataToPoint([t.get(B[0],R),t.get(B[1],R)]);P=R*2,u.push(z[0],z[1]),c.push(y[P],y[P+1]);var N=yB(g,i,t,R);f.push(N[0],N[1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(R));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,nt){return v[Y]-v[nt]});for(var j=u.length,Z=na(j),q=na(j),tt=na(j),Pt=na(j),Ot=[],_=0;_<p.length;_++){var bt=p[_],wt=_*2,Ht=bt*2;Z[wt]=u[Ht],Z[wt+1]=u[Ht+1],q[wt]=c[Ht],q[wt+1]=c[Ht+1],tt[wt]=f[Ht],tt[wt+1]=f[Ht+1],Pt[wt]=h[Ht],Pt[wt+1]=h[Ht+1],Ot[_]=d[bt]}return{current:Z,next:q,stackedOnCurrent:tt,stackedOnNext:Pt,status:Ot}}var Ba=Math.min,$a=Math.max;function Vl(e,t){return isNaN(e)||isNaN(t)}function h3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=t[v*2],y=t[v*2+1];if(v>=i||v<0)break;if(Vl(m,y)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](m,y),f=m,h=y;else{var _=m-u,w=y-c;if(_*_+w*w<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],P=t[T*2+1];S===m&&P===y&&g<n;)g++,T+=o,v+=o,S=t[T*2],P=t[T*2+1],m=t[v*2],y=t[v*2+1],_=m-u,w=y-c;var C=g+1;if(l)for(;Vl(S,P)&&C<n;)C++,T+=o,S=t[T*2],P=t[T*2+1];var A=.5,M=0,k=0,R=void 0,B=void 0;if(C>=n||Vl(S,P))d=m,p=y;else{M=S-u,k=P-c;var z=m-u,N=S-m,j=y-c,Z=P-y,q=void 0,tt=void 0;if(s==="x"){q=Math.abs(z),tt=Math.abs(N);var Pt=M>0?1:-1;d=m-Pt*q*a,p=y,R=m+Pt*tt*a,B=y}else if(s==="y"){q=Math.abs(j),tt=Math.abs(Z);var Ot=k>0?1:-1;d=m,p=y-Ot*q*a,R=m,B=y+Ot*tt*a}else q=Math.sqrt(z*z+j*j),tt=Math.sqrt(N*N+Z*Z),A=tt/(tt+q),d=m-M*a*(1-A),p=y-k*a*(1-A),R=m+M*a*A,B=y+k*a*A,R=Ba(R,$a(S,m)),B=Ba(B,$a(P,y)),R=$a(R,Ba(S,m)),B=$a(B,Ba(P,y)),M=R-m,k=B-y,d=m-M*q/tt,p=y-k*q/tt,d=Ba(d,$a(u,m)),p=Ba(p,$a(c,y)),d=$a(d,Ba(u,m)),p=$a(p,Ba(c,y)),M=m-d,k=y-p,R=m+M*tt/q,B=y+k*tt/q}e.bezierCurveTo(f,h,d,p,m,y),f=R,h=B}else e.lineTo(m,y)}u=m,c=y,v+=o}return g}var _B=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Qit=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _B},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&Vl(i[a*2-2],i[a*2-1]);a--);for(;o<a&&Vl(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=h3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=Kl.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],_=u?(r-s)/(d-s):(r-l)/(p-l),_<=1&&_>=0){var w=u?(p-l)*_+l:(d-s)*_+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],g=o[f++],m=o[f++],y=o[f++];var T=u?Pm(s,d,v,m,r,c):Pm(l,p,g,y,r,c);if(T>0)for(var S=0;S<T;S++){var P=c[S];if(P<=1&&P>=0){var w=u?or(l,p,g,y,P):or(s,d,v,m,P);return u?[r,w]:[w,r]}}s=m,l=y;break}}},t}(fe),tot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(_B),eot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new tot},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Vl(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Vl(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=h3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);h3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(fe);function bB(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Ke({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(g){i(g,f)}:null;Ao(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function wB(e,t,r){var n=e.getArea(),i=qe(n.r0,1),o=qe(n.r,1),a=new L0({shape:{cx:qe(e.cx,1),cy:qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,Ao(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function SB(e,t,r,n,i){if(e){if(e.type==="polar")return wB(e,t,r);if(e.type==="cartesian2d")return bB(e,t,r,n,i)}else return null;return null}function gf(e,t){return e.type===t}function P6(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function E6(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function A6(e,t){var r=E6(e),n=r[0],i=r[1],o=E6(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function C6(e){return be(e)?e:e?.5:0}function rot(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=na(n*2),o=0;o<n;o++){var a=yB(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function za(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function not(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=OZ(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function iot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Ct(o.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=not(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";F(h,function(_){_.offset=(_.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new XP(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=g,y}}}function oot(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&aot(o,t))){var a=t.mapDimension(o.dim),s={};return F(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function aot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(py.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function sot(e,t){return isNaN(e)||isNaN(t)}function lot(e){for(var t=e.length/2;t>0&&sot(e[t*2-2],e[t*2-1]);t--);return t-1}function M6(e,t){return[e[t*2],e[t*2+1]]}function uot(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function TB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ti.length;t++)if(e.get([ti[t],"endLabel","show"]))return!0;return!1}function E2(e,t,r,n){if(gf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=TB(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=bB(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return wB(t,r,n)}function cot(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var fot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new De,n=new gB;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,y=r.get("animation"),_=!c.isEmpty(),w=c.get("origin"),T=mB(a,l,w),S=_&&rot(a,l,T),P=r.get("showSymbol"),C=r.get("connectNulls"),A=P&&!h&&oot(r,l,a),M=this._data;M&&M.eachItemGraphicEl(function(nt,K){nt.__temp&&(s.remove(nt),M.setItemGraphicEl(K,null))}),P||p.remove(),s.add(m);var k=h?!1:r.get("step"),R;a&&a.getArea&&r.get("clip",!0)&&(R=a.getArea(),R.width!=null?(R.x-=.1,R.y-=.1,R.width+=.2,R.height+=.2):R.r0&&(R.r0-=.5,R.r+=.5)),this._clipShapeForSymbol=R;var B=iot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&k===this._step))P&&p.updateData(l,{isIgnore:A,clipShape:R,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),y&&this._initSymbolLabelAnimation(l,a,R),k&&(f=za(f,a,k,C),S&&(S=za(S,a,k,C))),v=this._newPolyline(f),_?g=this._newPolygon(f,S):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,tu(B)),m.setClipPath(E2(this,a,!0,r));else{_&&!g?g=this._newPolygon(f,S):g&&!_&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,tu(B));var z=m.getClipPath();if(z){var N=E2(this,a,!1,r);Ao(z,{shape:N.shape},r)}else m.setClipPath(E2(this,a,!0,r));P&&p.updateData(l,{isIgnore:A,clipShape:R,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),(!P6(this._stackedOnPoints,S)||!P6(this._points,f))&&(y?this._doUpdateAnimation(l,S,a,i,k,w,C):(k&&(f=za(f,a,k,C),S&&(S=za(S,a,k,C))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:S})))}var j=r.getModel("emphasis"),Z=j.get("focus"),q=j.get("blurScope"),tt=j.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),qd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Pt=v.getState("emphasis").style;Pt.lineWidth=+v.style.lineWidth+1}ne(v).seriesIndex=r.seriesIndex,Jl(v,Z,q,tt);var Ot=C6(r.get("smooth")),bt=r.get("smoothMonotone");if(v.setShape({smooth:Ot,smoothMonotone:bt,connectNulls:C}),g){var wt=l.getCalculationInfo("stackedOnSeries"),Ht=0;g.useStyle(te(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),wt&&(Ht=C6(wt.get("smooth"))),g.setShape({smooth:Ot,stackedOnSmooth:Ht,smoothMonotone:bt,connectNulls:C}),qd(g,r,"areaStyle"),ne(g).seriesIndex=r.seriesIndex,Jl(g,Z,q,tt)}var Y=function(nt){o._changePolyState(nt)};l.eachItemGraphicEl(function(nt){nt&&(nt.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=k,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,n){ne(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Zl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new py(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Kn.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Zl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Kn.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;zS(this._polyline,r),n&&zS(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Qit({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new eot({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,y=void 0,_=void 0;if(i)if(a){var w=i,T=n.pointToCoord(g);o?(m=w.startAngle,y=w.endAngle,_=-T[1]/180*Math.PI):(m=w.r0,y=w.r,_=T[0])}else{var S=i;o?(m=S.x,y=S.x+S.width,_=d.x):(m=S.y+S.height,y=S.y,_=d.y)}var P=y===m?0:(_-m)/(y-m);l&&(P=1-P);var C=Ut(f)?f(p):c*P+h,A=v.getSymbolPath(),M=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:C}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(TB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Je({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=lot(l);c>=0&&(hf(s,fu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?vB(a,d):o0(a,f)},enableTextSetter:!0},cot(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),y=g.inverse,_=n.shape,w=y?m?_.x:_.y+_.height:m?_.x+_.width:_.y,T=(m?v:0)*(y?-1:1),S=(m?0:-v)*(y?-1:1),P=m?"x":"y",C=uot(f,w,P),A=C.range,M=A[1]-A[0],k=void 0;if(M>=1){if(M>1&&!d){var R=M6(f,A[0]);u.attr({x:R[0]+T,y:R[1]+S}),a&&(k=h.getRawValue(A[0]))}else{var R=c.getPointOn(w,P);R&&u.attr({x:R[0]+T,y:R[1]+S});var B=h.getRawValue(A[0]),z=h.getRawValue(A[1]);a&&(k=IK(i,p,B,z,C.t))}o.lastFrameIndex=A[0]}else{var N=r===1||o.lastFrameIndex>0?A[0]:0,R=M6(f,N);a&&(k=h.getRawValue(N)),u.attr({x:R[0]+T,y:R[1]+S})}a&&Z1(u).setLabelText(k)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Jit(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(a&&(d=za(h.current,i,a,l),p=za(h.stackedOnCurrent,i,a,l),v=za(h.next,i,a,l),g=za(h.stackedOnNext,i,a,l)),A6(d,v)>3e3||c&&A6(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),hr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),hr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],_=h.status,w=0;w<_.length;w++){var T=_[w].cmd;if(T==="="){var S=r.getItemGraphicEl(_[w].idx1);S&&y.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var P=u.shape.__points,C=0;C<y.length;C++){var A=y[C].el,M=y[C].ptIdx*2;A.x=P[M],A.y=P[M+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Kn);const hot=fot;function PE(e,t){return{seriesType:e,plan:fE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Ct(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");eu(n,s[0])&&(s[0]=u),eu(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=a&&na(v*l),m=[],y=[],_=d.start,w=0;_<d.end;_++){var T=void 0;if(l===1){var S=c.get(f,_);T=i.dataToPoint(S,null,y)}else m[0]=c.get(f,_),m[1]=c.get(h,_),T=i.dataToPoint(m,null,y);a?(g[w++]=T[0],g[w++]=T[1]):p.setItemLayout(_,T.slice())}a&&p.setLayout("points",g)}}}}}}var dot={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},pot=function(e){return Math.round(e.length/2)};function PB(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Et(o)?p=dot[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,pot))}}}}}function N0(e){e.registerChartView(hot),e.registerSeriesModel(Hit),e.registerLayout(PE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,PB("line"))}var EB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return O0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Co);Co.registerClass(EB);const k6=EB;var vot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return O0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=J1(k6.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(k6);const got=vot;var mot=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),yot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new mot},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),y=Math.sin(f);p?(r.moveTo(v*a+i,g*a+o),r.arc(v*u+i,g*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+o),r.arc(i,o,s,c,f,!h),r.arc(m*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(fe);const x6=yot;function _ot(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return km(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,y=r?Math.abs(h-d)/2:0,_=Math.cos,w=Math.sin,T=c+h*_(v),S=f+h*w(v),P="left",C="top";switch(s){case"startArc":T=c+(d-l)*_(m),S=f+(d-l)*w(m),P="center",C="top";break;case"insideStartArc":T=c+(d+l)*_(m),S=f+(d+l)*w(m),P="center",C="bottom";break;case"startAngle":T=c+p*_(v)+ev(v,l+y,!1),S=f+p*w(v)+rv(v,l+y,!1),P="right",C="middle";break;case"insideStartAngle":T=c+p*_(v)+ev(v,-l+y,!1),S=f+p*w(v)+rv(v,-l+y,!1),P="left",C="middle";break;case"middle":T=c+p*_(m),S=f+p*w(m),P="center",C="middle";break;case"endArc":T=c+(h+l)*_(m),S=f+(h+l)*w(m),P="center",C="bottom";break;case"insideEndArc":T=c+(h-l)*_(m),S=f+(h-l)*w(m),P="center",C="top";break;case"endAngle":T=c+p*_(g)+ev(g,l+y,!0),S=f+p*w(g)+rv(g,l+y,!0),P="left",C="middle";break;case"insideEndAngle":T=c+p*_(g)+ev(g,-l+y,!0),S=f+p*w(g)+rv(g,-l+y,!0),P="right",C="middle";break;default:return km(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=P,n.verticalAlign=C,n}}function bot(e,t,r,n){if(be(n)){e.setTextConfig({rotation:n});return}else if(ct(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function ev(e,t,r){return t*Math.sin(e)*(r?-1:1)}function rv(e,t,r){return t*Math.cos(e)*(r?1:-1)}var A2=Math.max,C2=Math.min;function wot(e,t){var r=e.getArea&&e.getArea();if(gf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var Sot=function(e){mt(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){ff(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=Tot(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=wot(u,s);a.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),_=y.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,P=o&&o.type==="changeAxisOrder";function C(k){var R=nv[u.type](s,k),B=xot(u,f,R);return B.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",_),w[k]=B,B}s.diff(l).add(function(k){var R=s.getItemModel(k),B=nv[u.type](s,k,R);if(m&&C(k),!(!s.hasValue(k)||!D6[u.type](B))){var z=!1;p&&(z=L6[u.type](v,B));var N=I6[u.type](r,s,k,B,f,h,c.model,!1,g);d&&(N.forceLabelAnimation=!0),N6(N,s,k,R,B,r,f,u.type==="polar"),S?N.attr({shape:B}):d?O6(d,h,N,B,k,f,!1,!1):Ao(N,{shape:B},r,k),s.setItemGraphicEl(k,N),a.add(N),N.ignore=z}}).update(function(k,R){var B=s.getItemModel(k),z=nv[u.type](s,k,B);if(m){var N=void 0;T.length===0?N=C(R):(N=T[R],N.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&N.setShape("r",_),w[k]=N);var j=nv[u.type](s,k),Z=CB(f,j,u);hr(N,{shape:Z},h,k)}var q=l.getItemGraphicEl(R);if(!s.hasValue(k)||!D6[u.type](z)){a.remove(q);return}var tt=!1;if(p&&(tt=L6[u.type](v,z),tt&&a.remove(q)),q?oN(q):q=I6[u.type](r,s,k,z,f,h,c.model,!!q,g),d&&(q.forceLabelAnimation=!0),P){var Pt=q.getTextContent();if(Pt){var Ot=Z1(Pt);Ot.prevValue!=null&&(Ot.prevValue=Ot.value)}}else N6(q,s,k,B,z,r,f,u.type==="polar");S?q.attr({shape:z}):d?O6(d,h,q,z,k,f,!0,P):hr(q,{shape:z},r,k,null),s.setItemGraphicEl(k,q),q.ignore=tt,a.add(q)}).remove(function(k){var R=l.getItemGraphicEl(k);R&&XS(R,r,k)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new De);A.removeAll();for(var M=0;M<w.length;++M)A.add(w[M]);a.add(A),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),B6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),B6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&SB(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Ct(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){XS(o,r,ne(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Kn),L6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=A2(t.x,e.x),s=C2(t.x+t.width,i),l=A2(t.y,e.y),u=C2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=C2(t.r,e.r),o=A2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},I6={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Ke({shape:ot({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?x6:L0,c=new u({shape:n,z2:1});c.name="item";var f=AB(i);if(c.calculateTextPosition=_ot(f,{isRoundCap:u===x6}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?hr:Ao)(c,{shape:p},o)}return c}};function Tot(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function O6(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?hr:Ao)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?hr:Ao)(r,{shape:u},c,i)}function R6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Pot=["x","y","width","height"],Eot=["cx","cy","r","startAngle","endAngle"],D6={cartesian2d:function(e){return!R6(e,Pot)},polar:function(e){return!R6(e,Eot)}},nv={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Cot(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Aot(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function AB(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function N6(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=fu(n);hf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:o0(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,bot(e,d==="outside"?c:d,AB(a),n.get(["label","rotate"]))}ZQ(h,f,o.getRawValue(r),function(v){return vB(t,v)});var p=n.getModel(["emphasis"]);Jl(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),qd(e,n),Aot(i)&&(e.style.fill="none",e.style.stroke="none",F(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Cot(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Mot=function(){function e(){}return e}(),F6=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Mot},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(fe);function B6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new F6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new F6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ne(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",$6),f.on("mousemove",$6)),r&&r.push(f)}var $6=ly(function(e){var t=this,r=kot(t,e.offsetX,e.offsetY);ne(t).dataIndex=r>=0?r:null},30,!1);function kot(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function CB(e,t,r){if(gf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function xot(e,t,r){var n=e.type==="polar"?L0:Ke;return new n({shape:CB(t,r,e),silent:!0,z2:0})}const Lot=Sot;function vy(e){e.registerChartView(Lot),e.registerSeriesModel(got),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,_e(Jnt,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Qnt("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,PB("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Iot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return O0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Co);const Oot=Iot;var MB=4,Rot=function(){function e(){}return e}(),Dot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Rot},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<MB,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new oe(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(fe),Not=function(){function e(){this.group=new De}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Dot({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Oi(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<MB;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ne(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Fot=Not;var Bot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=PE("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new Fot:new gB,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Kn);const $ot=Bot;var zot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const Vot=zot;var d3=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Si).models[0]},t.type="cartesian2dAxis",t}(Me);Fi(d3,Pit);var kB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Uot=ie({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},kB),EE=ie({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},kB),Got=ie({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},EE),jot=te({logBase:10},EE);const Wot={category:Uot,value:EE,time:Got,log:jot};var Hot={value:1,category:1,time:1,log:1};function z6(e,t,r,n){F(Hot,function(i,o){var a=ie(ie({},Wot[o],!0),n,!0),s=function(l){mt(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=t0(this),d=h?iy(c):{},p=f.getTheme();ie(c,p.get(o+"Axis")),ie(c,this.getDefaultOption()),c.type=V6(c),h&&Hc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=u3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",V6)}function V6(e){return e.type||(e.data?"category":"value")}var Xot=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Ct(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),yr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Yot=Xot;var p3=["x","y"];function U6(e){return e.type==="interval"||e.type==="time"}var qot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=p3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!U6(r)||!U6(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=V1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new oe(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return qr(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return qr(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new oe(i,o,a,s)},t}(Yot),Zot=function(e){mt(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Nit);const Kot=Zot;function v3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),wi(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function G6(e){return e.get("coordinateSystem")==="cartesian2d"}function j6(e){var t={xAxisModel:null,yAxisModel:null};return F(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Si).models[0];t[n]=o}),t}var M2=Math.log;function Jot(e,t,r){var n=R0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=sB(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=M2(e.base);u=[M2(u[0])/h,M2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],g=u[1];if(c&&f)p=(g-v)/a;else if(c)for(g=u[0]+p*a;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=S2(p),g=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=S2(p),v=u[1]-p*a;else{var m=e.getTicks().length-1;m>a&&(p=S2(p));var y=p*a;g=Math.ceil(u[1]/p)*p,v=qe(g-y),v<0&&u[0]>=0?(v=0,g=qe(y)):g>0&&u[1]<=0&&(g=0,v=-qe(y))}var _=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*_,g+p*w),n.setInterval.call(e,p),(_||w)&&n.setNiceExtent.call(e,v+p,g-p)}var Qot=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=p3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ve(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;c3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(g6(v,p),c3(v)&&(s=d))}c.length&&(s||(s=c.pop(),g6(s.scale,s.model)),F(c,function(g){Jot(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var o={};F(n.x,function(a){W6(n,"y",a,o)}),F(n.y,function(a){W6(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Ms(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(F(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=wit(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),F(this._coordsList,function(u){u.calcAffineTransform()});function l(){F(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),tat(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}It(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Si).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Si).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,ue(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,F(s.x,function(c,f){F(s.y,function(h,d){var p="x"+f+"y"+d,v=new qot(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!k2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new Kot(c,_it(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){F(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(G6(i)){var o=j6(i),a=o.xAxisModel,s=o.yAxisModel;if(!k2(a,r)||!k2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){F(Tit(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return F(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);ue(r,o)<0&&r.push(o),ue(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!G6(i)){var o=j6(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=p3,e}();function k2(e,t){return e.getCoordSysModel()===t}function W6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)H6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&H6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function H6(e){return e&&e.type!=="category"&&e.type!=="time"&&bit(e)}function tat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const eat=Qot;var hs=Math.PI,Ul=function(){function e(t,r){this.group=new De,this.opt=r,this.axisModel=t,te(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!X6[t]},e.prototype.add=function(t){X6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=f9(r-t),o,a;return Lm(i)?(a=n>0?"top":"bottom",o="center"):Lm(i-hs)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<hs?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),X6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(qr(s,s,a),qr(l,l,a));var c=ot({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Cs({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Kd(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Et(h)&&(h=[h,h]),(Et(d)||be(d))&&(d=[d,d]);var p=dE(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];F([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(h[y]!=="none"&&h[y]!=null){var _=Oi(h[y],-v/2,-g/2,v,g,c.stroke,!0),w=m.r+m.offset,T=u?l:s;_.attr({rotation:m.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(_)}})}}},axisTickLabel:function(e,t,r,n){var i=iat(r,n,t,e),o=aat(r,n,t,e);if(nat(t,o,i),oat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=Fit(Ct(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Bit(a)}},axisName:function(e,t,r,n){var i=wi(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,q6(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*hs/180);var p;q6(o)?h=Ul.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=rat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,y=wi(e.nameTruncateMaxWidth,g.maxWidth,p),_=new Je({x:f[0],y:f[1],rotation:h.rotation,silent:Ul.isLabelSilent(t),style:dn(s,{text:i,font:v,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(KP({el:_,componentModel:t,itemName:i}),_.__fullText=i,_.anid="name",t.get("triggerEvent")){var w=Ul.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ne(_).eventData=w}n.add(_),_.updateTransform(),r.add(_),_.decomposeTransform()}}};function rat(e,t,r,n){var i=f9(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Lm(i-hs/2)?(a=l?"bottom":"top",o="center"):Lm(i-hs*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<hs*1.5&&i>hs/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function nat(e,t,r){if(!lB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Dn(o),Dn(u)):Y6(o,a)&&(n?(Dn(a),Dn(c)):(Dn(o),Dn(u))),i===!1?(Dn(s),Dn(f)):Y6(l,s)&&(i?(Dn(l),Dn(h)):(Dn(s),Dn(f)))}}function Dn(e){e&&(e.ignore=!0)}function Y6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=MP([]);return kP(i,i,-e.rotation),r.applyTransform(kc([],i,e.getLocalTransform())),n.applyTransform(kc([],i,t.getLocalTransform())),r.intersect(n)}}function q6(e){return e==="middle"||e==="center"}function xB(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(qr(a,a,t),qr(s,s,t));var c=new Cs({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});Kd(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function iat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=xB(u,t.transform,l,te(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function oat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=te(s.getLineStyle(),te(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=xB(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function aat(e,t,r,n){var i=r.axis,o=wi(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(wi(n.labelRotate,a.get("rotate"))||0)*hs/180,c=Ul.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=Ul.isLabelSilent(r),p=r.get("triggerEvent");return F(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,_=v.rawLabel,w=a;if(f&&f[m]){var T=f[m];It(T)&&T.textStyle&&(w=new br(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=i.dataToCoord(m),C=new Je({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:dn(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?_:i.type==="value"?m+"":m,g):S})});if(C.anid="label_"+m,p){var A=Ul.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=_,A.tickIndex=g,i.type==="category"&&(A.dataIndex=m),ne(C).eventData=A}t.add(C),C.updateTransform(),h.push(C),e.add(C),C.decomposeTransform()}),h}}const LB=Ul;function sat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return lat(r,e,t),r.seriesInvolved&&cat(r,e),r}function lat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];F(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=a0(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(F(s.getAxes(),_e(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&F(p.baseAxes,_e(v,d?"cross":!0,h)),d&&F(p.otherAxes,_e(v,"cross",!1))}function v(g,m,y){var _=y.model.getModel("axisPointer",i),w=_.get("show");if(!(!w||w==="auto"&&!g&&!g3(_))){m==null&&(m=_.get("triggerTooltip")),_=g?uat(y,f,i,t,g,m):_;var T=_.get("snap"),S=a0(y.model),P=m||T||y.type==="category",C=e.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:m,involveSeries:P,snap:T,useHandle:g3(_),seriesModels:[],linkGroup:null};u[S]=C,e.seriesInvolved=e.seriesInvolved||P;var A=fat(o,y);if(A!=null){var M=a[A]||(a[A]={axesInfo:{}});M.axesInfo[S]=C,M.mapper=o[A].mapper,C.linkGroup=M}}}})}function uat(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};F(s,function(h){l[h]=zt(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&te(u,f.textStyle)}}return e.model.getModel("axisPointer",new br(l,r,n))}function cat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||F(e.coordSysAxesInfo[a0(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function fat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(x2(o[n+"AxisId"],r.id)||x2(o[n+"AxisIndex"],r.componentIndex)||x2(o[n+"AxisName"],r.name))return i}}function x2(e,t){return e==="all"||ct(e)&&ue(e,t)>=0||e===t}function hat(e){var t=AE(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=g3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function AE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[a0(e)]}function dat(e){var t=AE(e);return t&&t.axisPointerModel}function g3(e){return!!e.get(["handle","show"])}function a0(e){return e.type+"||"+e.id}var Z6={},pat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&hat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=dat(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){Z6[r]=n},t.getAxisPointerClass=function(r){return r&&Z6[r]},t.type="axis",t}(ei);const IB=pat;var m3=Oe();function vat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=m3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=a.getAreaStyle();s=ct(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),_=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(_=g,w=l.y,T=y-_,S=l.height,g=_+T):(_=l.x,w=g,T=l.width,S=y-w,g=w+S);var P=u[p-1].tickValue;P!=null&&h.set(P,d),t.add(new Ke({anid:P!=null?"area_"+P:null,shape:{x:_,y:w,width:T,height:S},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}m3(e).splitAreaColors=h}}}function gat(e){m3(e).splitAreaColors=null}var mat=["axisLine","axisTickLabel","axisName"],yat=["splitArea","splitLine","minorSplitLine"],OB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=v3(s,r),u=new LB(r,ot({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(c3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));F(mat,u.add,u),this._axisGroup.add(u.getGroup()),F(yat,function(f){r.get([f,"show"])&&_at[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||fN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){gat(this)},t.type="cartesianAxis",t}(IB),_at={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ct(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,y=f[v].tickValue,_=new Cs({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});Kd(_.shape,p.lineWidth),t.add(_)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new Cs({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});Kd(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,r,n){vat(e,t,r,n)}},RB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(OB),bat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=RB.type,r}return t.type="yAxis",t}(OB),wat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Ke({shape:r.coordinateSystem.getRect(),style:te({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ei),K6={offset:0};function DB(e){e.registerComponentView(wat),e.registerComponentModel(Vot),e.registerCoordinateSystem("cartesian2d",eat),z6(e,"x",d3,K6),z6(e,"y",d3,K6),e.registerComponentView(RB),e.registerComponentView(bat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function F0(e){Br(DB),e.registerSeriesModel(Oot),e.registerChartView($ot),e.registerLayout(PE("scatter"))}var J6="\0_ec_interaction_mutex";function Q6(e,t){return!!Sat(e)[t]}function Sat(e){return e[J6]||(e[J6]={})}du({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Dr);var Tat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=te(zt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!zM(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!Wg("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||Q6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&ql(r.event),NB(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){zM(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=Wg("zoomOnMouseWheel",r,this._opt),i=Wg("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;L2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);L2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!Q6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;L2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Bi);function L2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(ql(n.event),NB(e,t,r,n,i))}function NB(e,t,r,n,i){i.isAvailableBehavior=Vt(Wg,null,r,n),e.trigger(t,i)}function Wg(e,t,r){var n=r[e];return!e||n&&(!Et(n)||t.event[n+"Key"])}const Pat=Tat;function Eat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function Aat(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Cat={axisPointer:1,tooltip:1,brush:1};function Mat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Cat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var t5=qr,kat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Ml,n._rawTransformable=new Ml,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new oe(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new oe(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new oe(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[We(r[0],n.getWidth()),We(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=qr([],o,r),i=qr([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),G7(this.transform||(this.transform=[]),n.transform||Wc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],V1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Ml;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?t5(i,r,o):$q(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?t5([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=e5(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=e5(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Ml);function e5(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const xat=kat;function r5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Lat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(r5(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(r5(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Iat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Oat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){Nat(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Fat(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function Rat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function n5(e){return arguments.length?e:zat}function Kh(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Dat(e,t){return Ms(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Nat(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Fat(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=I2(s),o=O2(o),s&&o;){i=I2(i),a=O2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&($at(Bat(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!I2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!O2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function I2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function O2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Bat(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function $at(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function zat(e,t){return e.parentNode===t.parentNode?1:2}var Vat=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Uat=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Vat},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=We(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(fe),Gat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new De,r}return t.prototype.init=function(r,n){this._controller=new Pat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){i5(o,c)&&o5(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!i5(o,c)){h&&s5(u,f,h,s,r);return}o5(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&s5(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];nJ(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new xat;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Mat(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){Eat(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Aat(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Kn);function i5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function o5(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new py(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,hr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],y=m.getLayout(),_=m.children.length,w=void 0,T=void 0;if(v.x===y.x&&a.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};w=Math.atan2(S.y-y.y,S.x-y.x),w<0&&(w=Math.PI*2+w),T=S.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-y.y,v.x-y.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<y.x,T&&(w=w-Math.PI)):(T=v.x>y.x,T||(w=w-Math.PI));var P=T?"left":"right",C=s.getModel("label"),A=C.get("rotate"),M=A*(Math.PI/180),k=g.getTextContent();k&&(g.setTextConfig({position:C.get("position")||P,rotation:A==null?-w:M,origin:"center"}),k.setStyle("verticalAlign","middle"))}var R=s.get(["emphasis","focus"]),B=R==="relative"?$7(a.getAncestorsIndices(),a.getDescendantIndices()):R==="ancestor"?a.getAncestorsIndices():R==="descendant"?a.getDescendantIndices():null;B&&(ne(r).focus=B),jat(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(z){if(z!=="blur"){var N=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);N&&N.hoverState===x0||zS(r.__edge,z)}})}function jat(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new X1({shape:y3(c,f,h,i,i)})),hr(v,{shape:y3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],y=0;y<g.length;y++){var _=g[y].getLayout();m.push([_.x,_.y])}v||(v=n.__edge=new Uat({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),hr(v,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),qd(v,l,"lineStyle"),VP(v),s.add(v))}function a5(e,t,r,n,i){var o=t.tree.root,a=FB(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?Ql(h,{shape:y3(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&Ql(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function FB(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function s5(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=FB(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Ql(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){a5(u,e,n,i,l)}),a5(o,e,n,i,l)}function y3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=Kh(u,f),p=Kh(u,f+(h-f)*r),v=Kh(c,h+(f-h)*r),g=Kh(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const Wat=Gat;var Jn=Oe();function Hat(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,BB(t,r,e),F(r,function(n){F(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,_e(Xat,e))})}),t.wrapMethod("cloneShallow",_e(qat,e)),F(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,_e(Yat,e))}),Ii(r[t.dataType]===t)}function Xat(e,t){if(Jat(this)){var r=ot({},Jn(this).datas);r[this.dataType]=t,BB(t,r,e)}else CE(t,this.dataType,Jn(this).mainData,e);return t}function Yat(e,t){return e.struct&&e.struct.update(),t}function qat(e,t){return F(Jn(t).datas,function(r,n){r!==t&&CE(r.cloneShallow(),n,t,e)}),t}function Zat(e){var t=Jn(this).mainData;return e==null||t==null?t:Jn(t).datas[e]}function Kat(){var e=Jn(this).mainData;return e==null?[{data:e}]:Ct(ve(Jn(e).datas),function(t){return{type:t,data:Jn(e).datas[t]}})}function Jat(e){return Jn(e).mainData===e}function BB(e,t,r){Jn(e).datas={},F(t,function(n,i){CE(n,i,e,r)})}function CE(e,t,r,n){Jn(r).datas[t]=e,Jn(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Zat,e.getLinkedDataAll=Kat}var Qat=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Et(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),tst=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ct(h)?h.length:1),o.push(c);var d=new Qat(Zn(c.name,""),i);f?est(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=HF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new zl(l,r);return u.initData(o),n&&n(u),Hat({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function est(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const rst=tst;function nst(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var ist=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new br(i,this,this.ecModel),a=rst.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return ks("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=nst(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Co);const ost=ist;function ast(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function fh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function sst(e,t){e.eachSeriesByType("tree",function(r){lst(r,t)})}function lst(e,t){var r=Dat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=n5(function(_,w){return(_.parentNode===w.parentNode?1:2)/_.depth})):(i=r.width,o=r.height,a=n5());var s=e.getData().tree.root,l=s.children[0];if(l){Iat(s),ast(l,Oat,a),s.hierNode.modifier=-l.hierNode.prelim,fh(l,Rat);var u=l,c=l,f=l;fh(l,function(_){var w=_.getLayout().x;w<u.getLayout().x&&(u=_),w>c.getLayout().x&&(c=_),_.depth>f.depth&&(f=_)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),fh(l,function(_){g=(_.getLayout().x+d)*p,m=(_.depth-1)*v;var w=Kh(g,m);_.setLayout({x:w.x,y:w.y,rawX:g,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),fh(l,function(_){m=(_.getLayout().x+d)*v,g=y==="LR"?(_.depth-1)*p:i-(_.depth-1)*p,_.setLayout({x:g,y:m},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),fh(l,function(_){g=(_.getLayout().x+d)*p,m=y==="TB"?(_.depth-1)*v:o-(_.depth-1)*v,_.setLayout({x:g,y:m},!0)}))}}}function ust(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");ot(s,a)})})}function cst(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=Lat(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function fst(e){e.registerChartView(Wat),e.registerSeriesModel(ost),e.registerLayout(sst),e.registerVisual(ust),cst(e)}var s0=F,hst=It,jm=-1,ME=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=zt(t);this.type=n,this.mappingMethod=r,this._normalizeData=vst[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(R2(i),dst(i)):r==="category"?i.categories?pst(i):R2(i,!0):(Ii(r!=="linear"||i.dataExtent),R2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ve(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){It(t)?F(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ct(t)?[]:It(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&s0(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ct(t))t=t.slice();else if(hst(t)){var r=[];s0(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Et(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(ov(f[1],t,c[1]))return a}else if(c[1]===1/0){if(ov(f[0],c[0],t))return a}else if(ov(f[0],c[0],t)&&ov(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:hh("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),Jh.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=E_(r,t.parsedVisual,i),o?i:sa(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return sa(E_(t,this.option.parsedVisual),"rgba")},category:Jh,piecewise:function(t,r){var n=b3.call(this,r);return n==null&&(n=sa(E_(t,this.option.parsedVisual),"rgba")),n},fixed:Sl}},colorHue:iv(function(t,r){return A_(t,r)}),colorSaturation:iv(function(t,r){return A_(t,null,r)}),colorLightness:iv(function(t,r){return A_(t,null,null,r)}),colorAlpha:iv(function(t,r){return AS(t,r)}),decal:{applyVisual:hh("decal"),_normalizedToVisual:{linear:null,category:Jh,piecewise:null,fixed:null}},opacity:{applyVisual:hh("opacity"),_normalizedToVisual:_3([0,1])},liftZ:{applyVisual:hh("liftZ"),_normalizedToVisual:{linear:Sl,category:Sl,piecewise:Sl,fixed:Sl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:l5,category:Jh,piecewise:function(t,r){var n=b3.call(this,r);return n==null&&(n=l5.call(this,t)),n},fixed:Sl}},symbolSize:{applyVisual:hh("symbolSize"),_normalizedToVisual:_3([0,1])}},e}();function dst(e){var t=e.pieceList;e.hasSpecialVisual=!1,F(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function pst(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(s0(t,function(a,s){r[a]=s}),!ct(n)){var i=[];It(n)?s0(n,function(a,s){var l=r[s];i[l!=null?l:jm]=a}):i[jm]=n,n=$B(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function R2(e,t){var r=e.visual,n=[];It(r)?s0(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),$B(e,n)}function iv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:_3([0,1])}}function l5(e){var t=this.option.visual;return t[Math.round(da(e,[0,1],[0,t.length-1],!0))]||{}}function hh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function Jh(e){var t=this.option.visual;return t[this.option.loop&&e!==jm?e%t.length:e]}function Sl(){return this.option.visual[0]}function _3(e){return{linear:function(t){return da(t,e,this.option.visual,!0)},category:Jh,piecewise:function(t,r){var n=b3.call(this,r);return n==null&&(n=da(t,e,this.option.visual,!0)),n},fixed:Sl}}function b3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=ME.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function $B(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Ct(t,function(r){var n=qn(r);return n||[0,0,0,1]})),t}var vst={linear:function(e){return da(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=ME.findPieceIndex(e,t,!0);if(r!=null)return da(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?jm:t},fixed:Dr};function ov(e,t,r){return e?t<=r:t<r}const pn=ME;var u5=Cs.prototype,D2=X1.prototype,zB=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(zB);function N2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var gst=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zB},t.prototype.buildPath=function(r,n){N2(n)?u5.buildPath.call(this,r,n):D2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return N2(this.shape)?u5.pointAt.call(this,r):D2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=N2(n)?[n.x2-n.x1,n.y2-n.y1]:D2.tangentAt.call(this,r);return AP(i,i)},t}(fe);const mst=gst;var F2=["fromSymbol","toSymbol"];function c5(e){return"_"+e+"Type"}function f5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=gF(i),u=dE(a||0,l),c=Oi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function yst(e){var t=new mst({name:"line",subPixelOptimize:!0});return w3(t.shape,e),t}function w3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var _st=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=yst(a);s.shape.percent=0,Ao(s,{shape:{percent:1}},o,n),this.add(s),F(F2,function(l){var u=f5(l,r,n);this.add(u),this[c5(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};w3(l.shape,s),hr(a,l,o,n),F(F2,function(u){var c=r.getItemVisual(n,u),f=c5(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=f5(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=fu(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;a.useStyle(g),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,F(F2,function(S){var P=this.childOfName(S);if(P){P.setColor(m),P.style.opacity=g.opacity;for(var C=0;C<ti.length;C++){var A=ti[C],M=a.getState(A);if(M){var k=M.style||{},R=P.ensureState(A),B=R.style||(R.style={});k.stroke!=null&&(B[P.__isEmptyBrush?"stroke":"fill"]=k.stroke),k.opacity!=null&&(B.opacity=k.opacity)}}P.markRedraw()}},this);var y=o.getRawValue(n);hf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,P){return o.getFormattedLabel(S,P,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?qe(y):y)+""});var _=this.getTextContent();if(_){var w=c.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=w.get("position")||"middle";var T=w.get("distance");ct(T)||(T=[T,T]),_.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),Jl(this,h,d,f)},t.prototype.highlight=function(){Xd(this)},t.prototype.downplay=function(){Yd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");w3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=V7([],f,c);AP(h,h);function d(M,k){var R=M.__specifiedRotation;if(R==null){var B=l.tangentAt(k);M.attr("rotation",(k===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else M.attr("rotation",R)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,g=o.__labelDistance,m=g[0]*a,y=g[1]*a,_=u/2,w=l.tangentAt(_),T=[w[1],-w[0]],S=l.pointAt(_);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var P=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var C=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(C=Math.PI+C),o.rotation=C}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*m+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*P+c[0],o.y=c[1]+A,p=w[0]<0?"right":"left",o.originX=-m*P,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*P+f[0],o.y=f[1]+A,p=w[0]>=0?"right":"left",o.originX=m*P,o.originY=-A;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(De);const bst=_st;var wst=function(){function e(t){this.group=new De,this._LineCtor=t||bst}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=h5(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=h5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!Sst(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(B2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){ff(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!B2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!B2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function Sst(e){return e.animators&&e.animators.length>0}function h5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:fu(t)}}function d5(e){return isNaN(e[0])||isNaN(e[1])}function B2(e){return e&&!d5(e[0])&&!d5(e[1])}const Tst=wst;function Pst(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=Gu(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Gu(s,[0,a]),i=o=Gu(s,[i,o]),n=0}t[0]=Gu(t[0],r),t[1]=Gu(t[1],r);var l=$2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=Gu(t[n],c);var f;return f=$2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=$2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function $2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Gu(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var p5={color:"fill",borderColor:"stroke"},Est={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},la=Oe(),Ast=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return O0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=la(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Co);const Cst=Ast;function Mst(e,t){return t=t||[0,0],Ct(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function kst(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Mst,e)}}}function xst(e,t){return t=t||[0,0],Ct([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function Lst(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(xst,e)}}}function Ist(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Ost(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Ist,e)}}}function Rst(e,t){return t=t||[0,0],Ct(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Dst(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(Rst,e)}}}function Nst(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Fst(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||ht(e,"text")))}function Bst(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},ht(n,"text")&&(a.text=n.text),ht(n,"rich")&&(a.rich=n.rich),ht(n,"textFill")&&(a.fill=n.textFill),ht(n,"textStroke")&&(a.stroke=n.textStroke),ht(n,"fontFamily")&&(a.fontFamily=n.fontFamily),ht(n,"fontSize")&&(a.fontSize=n.fontSize),ht(n,"fontStyle")&&(a.fontStyle=n.fontStyle),ht(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=ht(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),ht(n,"textPosition")&&(i.position=n.textPosition),ht(n,"textOffset")&&(i.offset=n.textOffset),ht(n,"textRotation")&&(i.rotation=n.textRotation),ht(n,"textDistance")&&(i.distance=n.textDistance)}return v5(a,e),F(a.rich,function(l){v5(l,l)}),{textConfig:i,textContent:o}}function v5(e,t){!t||(t.font=t.textFont||t.font,ht(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),ht(t,"textAlign")&&(e.align=t.textAlign),ht(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),ht(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),ht(t,"textWidth")&&(e.width=t.textWidth),ht(t,"textHeight")&&(e.height=t.textHeight),ht(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),ht(t,"textPadding")&&(e.padding=t.textPadding),ht(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),ht(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),ht(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),ht(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),ht(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),ht(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),ht(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function g5(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";m5(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,F(t.rich,function(s){m5(s,s)}),n}function m5(e,t){!t||(ht(t,"fill")&&(e.textFill=t.fill),ht(t,"stroke")&&(e.textStroke=t.fill),ht(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),ht(t,"font")&&(e.font=t.font),ht(t,"fontStyle")&&(e.fontStyle=t.fontStyle),ht(t,"fontWeight")&&(e.fontWeight=t.fontWeight),ht(t,"fontSize")&&(e.fontSize=t.fontSize),ht(t,"fontFamily")&&(e.fontFamily=t.fontFamily),ht(t,"align")&&(e.textAlign=t.align),ht(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),ht(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),ht(t,"width")&&(e.textWidth=t.width),ht(t,"height")&&(e.textHeight=t.height),ht(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),ht(t,"padding")&&(e.textPadding=t.padding),ht(t,"borderColor")&&(e.textBorderColor=t.borderColor),ht(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),ht(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),ht(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),ht(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),ht(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),ht(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),ht(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),ht(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),ht(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),ht(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var VB={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},y5=ve(VB);uu(Eo,function(e,t){return e[t]=1,e},{});Eo.join(", ");var Wm=["","style","shape","extra"],Yc=Oe();function kE(e,t,r,n,i){var o=e+"Animation",a=YP(e,n,i)||{},s=Yc(t).userDuring;return a.duration>0&&(a.during=s?Vt(Wst,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),ot(a,r[o]),a}function $st(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Yc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Xst(e,t,f),b5("shape",t,f),b5("extra",t,f),!o&&s&&(Hst(e,t,c),_5("shape",e,t,c),_5("extra",e,t,c),Yst(e,t,u,c)),f.style=u,Vst(e,f,a),Gst(e,t),s)if(o){var h={};F(Wm,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ot(p?h[p]:h,v.enterFrom))});var d=kE("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else Ust(e,t,i||0,r,c);zst(e,t),u?e.dirty():e.markRedraw()}function zst(e,t){for(var r=Yc(e).leaveToProps,n=0;n<Wm.length;n++){var i=Wm[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Yc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ot(i?r[i]:r,o.leaveTo))}}function xE(e,t,r,n){if(e){var i=e.parent,o=Yc(e).leaveToProps;if(o){var a=kE("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function Dc(e){return e==="all"}function Vst(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function Ust(e,t,r,n,i){if(i){var o=kE("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Gst(e,t){ht(t,"silent")&&(e.silent=t.silent),ht(t,"ignore")&&(e.ignore=t.ignore),e instanceof cu&&ht(t,"invisible")&&(e.invisible=t.invisible),e instanceof fe&&ht(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var so={},jst={setTransform:function(e,t){return so.el[e]=t,this},getTransform:function(e){return so.el[e]},setShape:function(e,t){var r=so.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=so.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=so.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=so.el.style;if(t)return t[e]},setExtra:function(e,t){var r=so.el.extra||(so.el.extra={});return r[e]=t,this},getExtra:function(e){var t=so.el.extra;if(t)return t[e]}};function Wst(){var e=this,t=e.el;if(!!t){var r=Yc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}so.el=t,n(jst)}}function _5(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),Dc(l))ot(a,o);else for(var u=Ze(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if(Dc(s)||ue(s,e)>=0){!a&&(a=n[e]={});for(var d=ve(o),c=0;c<d.length;c++){var f=d[c],h=o[f];qst(i[f],h)&&(a[f]=h)}}}}}function b5(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ve(n),a=0;a<o.length;a++){var s=o[a];i[s]=vd(n[s])}}function Hst(e,t,r){for(var n=t.transition,i=Dc(n)?Eo:Ze(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function Xst(e,t,r){for(var n=0;n<y5.length;n++){var i=y5[n],o=VB[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<Eo.length;n++){var s=Eo[n];t[s]!=null&&(r[s]=t[s])}}function Yst(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!Dc(a)){var l=Ze(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Dc(s)||Dc(a)||ue(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ve(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function qst(e,t){return Fr(e)?e!==t:e!=null&&isFinite(e)}var UB=Oe(),Zst=["percent","easing","shape","style","extra"];function Kst(e){e.stopAnimation("keyframe"),e.attr(UB(e))}function GB(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ct(t)){F(t,function(s){GB(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=YP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=UB(e);F(Wm,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),F(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ve(f);if(s||(h=yr(h,function(v){return ue(Zst,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;F(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var ua="emphasis",ds="normal",LE="blur",IE="select",xs=[ds,ua,LE,IE],z2={normal:["itemStyle"],emphasis:[ua,"itemStyle"],blur:[LE,"itemStyle"],select:[IE,"itemStyle"]},V2={normal:["label"],emphasis:[ua,"label"],blur:[LE,"label"],select:[IE,"label"]},Jst=["x","y"],Qst="e\0\0",Nn={normal:{},emphasis:{},blur:{},select:{}},tlt={cartesian2d:kst,geo:Lst,single:Ost,polar:Dst,calendar:Nst};function S3(e){return e instanceof fe}function T3(e){return e instanceof cu}function elt(e,t){t.copyTransform(e),T3(t)&&T3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,S3(t)&&S3(e)&&t.setShape(e.shape))}var rlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=w5(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){U2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&xE(h,la(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);U2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?SB(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=w5(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=U2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){ff(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Kn);const nlt=rlt;function OE(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=HB(n);r=Y1(o,null,i,n.layout||"center"),la(r).customPathData=o}else if(t==="image")r=new Sa({}),la(r).customImagePath=e.style.image;else if(t==="text")r=new Je({});else if(t==="group")r=new De;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=aN(t);if(!a){var s="";re(s)}r=new a}return la(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function RE(e,t,r,n,i,o,a){Kst(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=Jst);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;ht(u,"textFill")&&(u.fill=u.textFill),ht(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=S3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=Vm(f,e)),l.__decalPattern=c}if(T3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}$st(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),GB(t,n.keyframeAnimation,o)}function jB(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),VP(o)}}function ilt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<xs.length;s++)olt(n,t,xs[s])}}function olt(e,t,r){var n=r===ds,i=n?t:Hm(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function w5(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):tlt[o.type](o));for(var s=te({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:P,visual:M,barLayout:k,currentSeriesIndices:R,font:B},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:alt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<xs.length;v++){var g=xs[v];d[g]=e.getModel(z2[g]),p[g]=e.getModel(V2[g])}function m(z){return z===u?c||(c=t.getItemModel(z)):t.getItemModel(z)}function y(z,N){return t.hasItemOption?z===u?f[N]||(f[N]=m(z).getModel(z2[N])):m(z).getModel(z2[N]):d[N]}function _(z,N){return t.hasItemOption?z===u?h[N]||(h[N]=m(z).getModel(V2[N])):m(z).getModel(V2[N]):p[N]}return function(z,N){return u=z,c=null,f={},h={},i&&i(te({dataIndexInside:z,dataIndex:t.getRawIndex(z),actionType:N?N.type:null},l),s)};function w(z,N){return N==null&&(N=u),t.getStore().get(t.getDimensionIndex(z||0),N)}function T(z,N){N==null&&(N=u),z=z||0;var j=t.getDimensionInfo(z);if(!j){var Z=t.getDimensionIndex(z);return Z>=0?t.getStore().get(Z,N):void 0}var q=t.get(j.name,N),tt=j&&j.ordinalMeta;return tt?tt.categories[q]:q}function S(z,N){N==null&&(N=u);var j=t.getItemVisual(N,"style"),Z=j&&j.fill,q=j&&j.opacity,tt=y(N,ds).getItemStyle();Z!=null&&(tt.fill=Z),q!=null&&(tt.opacity=q);var Pt={inheritColor:Et(Z)?Z:"#000"},Ot=_(N,ds),bt=dn(Ot,null,Pt,!1,!0);bt.text=Ot.getShallow("show")?qt(e.getFormattedLabel(N,ds),o0(t,N)):null;var wt=Dm(Ot,Pt,!1);return A(z,tt),tt=g5(tt,bt,wt),z&&C(tt,z),tt.legacy=!0,tt}function P(z,N){N==null&&(N=u);var j=y(N,ua).getItemStyle(),Z=_(N,ua),q=dn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?dd(e.getFormattedLabel(N,ua),e.getFormattedLabel(N,ds),o0(t,N)):null;var tt=Dm(Z,null,!0);return A(z,j),j=g5(j,q,tt),z&&C(j,z),j.legacy=!0,j}function C(z,N){for(var j in N)ht(N,j)&&(z[j]=N[j])}function A(z,N){z&&(z.textFill&&(N.textFill=z.textFill),z.textPosition&&(N.textPosition=z.textPosition))}function M(z,N){if(N==null&&(N=u),ht(p5,z)){var j=t.getItemVisual(N,"style");return j?j[p5[z]]:null}if(ht(Est,z))return t.getItemVisual(N,z)}function k(z){if(o.type==="cartesian2d"){var N=o.getBaseAxis();return qnt(te({axis:N},z))}}function R(){return r.getCurrentSeriesIndices()}function B(z){return dN(z,r)}}function alt(e){var t={};return F(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function U2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=DE(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&Jl(s,n.focus,n.blurScope,n.emphasisDisabled),s}function DE(e,t,r,n,i,o){var a=-1,s=t;t&&WB(t,n,i)&&(a=ue(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=OE(n),s&&elt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Nn.normal.cfg=Nn.normal.conOpt=Nn.emphasis.cfg=Nn.emphasis.conOpt=Nn.blur.cfg=Nn.blur.conOpt=Nn.select.cfg=Nn.select.conOpt=null,Nn.isLegacy=!1,llt(u,r,n,i,l,Nn),slt(u,r,n,i,l),RE(e,u,r,n,Nn,i,l),ht(n,"info")&&(la(u).info=n.info);for(var c=0;c<xs.length;c++){var f=xs[c];if(f!==ds){var h=Hm(n,f),d=NE(n,h,f);jB(f,u,h,d,Nn)}}return ilt(u,n,i),n.type==="group"&&ult(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function WB(e,t,r){var n=la(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&dlt(o)&&HB(o)!==n.customPathData||i==="image"&&ht(a,"image")&&a.image!==n.customImagePath}function slt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&WB(a,o,n)&&(a=null),a||(a=OE(o),e.setClipPath(a)),RE(null,a,t,o,null,n,i)}}function llt(e,t,r,n,i,o){if(!e.isGroup){S5(r,null,o),S5(r,ua,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=OE(a),e.setTextContent(c)),RE(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<xs.length;h++){var d=xs[h];if(d!==ds){var p=o[d].conOpt;jB(d,c,p,NE(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function S5(e,t,r){var n=t?Hm(e,t):e,i=t?NE(e,n,ua):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?Hm(s,t):s:null;if(i&&(r.isLegacy||Fst(i,o,!!a,!!l))){r.isLegacy=!0;var u=Bst(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function Hm(e,t){return t?e?e[t]:null:e}function NE(e,t,r){var n=t&&t.style;return n==null&&r===ua&&e&&(n=e.styleEmphasis),n}function ult(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){flt({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),DE(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);clt(t,p,i)}}}function clt(e,t,r){t&&xE(t,la(e).option,r)}function flt(e){new zF(e.oldChildren,e.newChildren,T5,T5,e).add(P5).update(P5).remove(hlt).execute()}function T5(e,t){var r=e&&e.name;return r!=null?r:Qst+t}function P5(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;DE(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function hlt(e){var t=this.context,r=t.oldChildren[e];r&&xE(r,la(r).option,t.seriesModel)}function HB(e){return e&&(e.pathData||e.d)}function dlt(e){return e&&(ht(e,"pathData")||ht(e,"d"))}function plt(e){e.registerChartView(nlt),e.registerSeriesModel(Cst)}var Al=Oe(),E5=zt,G2=Vt,vlt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new De,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=_e(A5,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}M5(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=AE(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Al(t).pointerEl=new HQ[o.type](E5(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Al(t).labelEl=new Je(E5(r.label));t.add(o),C5(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Al(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Al(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),C5(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=ZP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){ql(u.event)},onmousedown:G2(this._onHandleDragMove,this,0,0),drift:G2(this._onHandleDragMove,this),ondragend:G2(this._onHandleDragEnd,this)}),n.add(i)),M5(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ct(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,sF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){A5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,j2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(j2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(j2(i)),Al(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),e3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function A5(e,t,r,n){XB(Al(r).lastProp,n)||(Al(r).lastProp=n,t?hr(r,n,e):(r.stopAnimation(),r.attr(n)))}function XB(e,t){if(It(e)&&It(t)){var r=!0;return F(t,function(n,i){r=r&&XB(e[i],n)}),!!r}else return e===t}function C5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function j2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function M5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const glt=vlt;function mlt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function ylt(e,t,r,n,i){var o=r.get("value"),a=YB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=I0(s.get("padding")||0),u=s.getFont(),c=LP(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),_lt(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:dn(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function _lt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function YB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:SE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};F(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Et(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function qB(e,t,r){var n=Wc();return kP(n,n,r.rotation),SS(n,n,r.position),Lc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function blt(e,t,r,n,i,o){var a=LB.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),ylt(t,n,i,o,{position:qB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function wlt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Slt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Tlt=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=k5(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=mlt(o),d=Plt[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=v3(l.model,i);blt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=v3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=qB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=k5(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(glt);function k5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Plt={line:function(e,t,r){var n=wlt([t,r[0]],[t,r[1]],x5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:Slt([t-n/2,r[0]],[n,i],x5(e))}}};function x5(e){return e.dim==="x"?0:1}const Elt=Tlt;var Alt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const Clt=Alt;var ia=Oe(),Mlt=F;function ZB(e,t,r){if(!Xt.node){var n=t.getZr();ia(n).records||(ia(n).records={}),klt(n,t);var i=ia(n).records[e]||(ia(n).records[e]={});i.handler=r}}function klt(e,t){if(ia(e).initialized)return;ia(e).initialized=!0,r("click",_e(L5,"click")),r("mousemove",_e(L5,"mousemove")),r("globalout",Llt);function r(n,i){e.on(n,function(o){var a=Ilt(t);Mlt(ia(e).records,function(s){s&&i(s,o,a.dispatchAction)}),xlt(a.pendings,t)})}}function xlt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Llt(e,t,r){e.handler("leave",null,r)}function L5(e,t,r,n){t.handler(e,r,n)}function Ilt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function P3(e,t){if(!Xt.node){var r=t.getZr(),n=(ia(r).records||{})[e];n&&(ia(r).records[e]=null)}}var Olt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";ZB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){P3("axisPointer",n)},t.prototype.dispose=function(r,n){P3("axisPointer",n)},t.type="axisPointer",t}(ei);const Rlt=Olt;function KB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Zl(o,e);if(a==null||a<0||ct(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Ct(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var I5=Oe();function Dlt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Hg(i)&&(i=KB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Hg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Hg(i),h={},d={},p={list:[],map:{}},v={showPointer:_e(Flt,d),showTooltip:_e(Blt,p)};F(s.coordSysMap,function(m,y){var _=l||m.containPoint(i);F(s.coordSysAxesInfo[y],function(w,T){var S=w.axis,P=Ult(u,w);if(!f&&_&&(!u||P)){var C=P&&P.value;C==null&&!l&&(C=S.pointToData(i)),C!=null&&O5(w,C,v,!1,h)}})});var g={};return F(c,function(m,y){var _=m.linkGroup;_&&!d[y]&&F(_.axesInfo,function(w,T){var S=d[T];if(w!==m&&S){var P=S.value;_.mapper&&(P=m.axis.scale.parse(_.mapper(P,R5(w),R5(m)))),g[m.key]=P}})}),F(g,function(m,y){O5(c[y],m,v,!0,h)}),$lt(d,c,h),zlt(p,i,e,a),Vlt(c,a,r),h}}function O5(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Nlt(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Nlt(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return F(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),F(h,function(g){o.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:o,snapToValue:i}}function Flt(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Blt(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=a0(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function $lt(e,t,r){var n=r.axesInfo=[];F(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function zlt(e,t,r,n){if(Hg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Vlt(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=I5(n)[i]||{},a=I5(n)[i]={};F(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&F(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];F(o,function(u,c){!a[c]&&l.push(u)}),F(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Ult(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function R5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Hg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function JB(e){IB.registerAxisPointerClass("CartesianAxisPointer",Elt),e.registerComponentModel(Clt),e.registerComponentView(Rlt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ct(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=sat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Dlt)}function B0(e){Br(DB),Br(JB)}function Glt(e,t){var r=I0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ke({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var jlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const Wlt=jlt;function QB(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function t$(e){if(!!Xt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var e$=t$(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hlt=t$(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function r$(e,t){if(!e)return t;t=CN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Xlt(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Ylt=r$(Hlt,"transition"),FE=r$(e$,"transform"),qlt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Xt.transform3dSupported?"will-change:transform;":"");function Zlt(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Klt(e,t,r){if(!Et(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=tu(t);var o=Zlt(r),a=Math.max(Math.round(i)*1.5,6),s="",l=FE+":",u;ue(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Jlt(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Xt.transformSupported?","+FE+n:",left"+n+",top"+n),Ylt+":"+i}function D5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Xt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Xt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+FE+":"+a+";":[["top",0],["left",0],[e$,a]]}function Qlt(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),F(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function tut(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=oF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(Jlt(i,r)),o&&n.push("background-color:"+o),F(["width","color","radius"],function(d){var p="border-"+d,v=CN(p),g=e.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(Qlt(c)),f!=null&&n.push("padding:"+I0(f).join("px ")+"px"),n.join(";")+";"}function N5(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&qq(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var eut=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Xt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;N5(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();Un(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Xlt(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=qlt+tut(t,!this._firstShow,this._longHide)+D5(o[0],o[1],!0)+("border-color:"+tu(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Et(o)&&n.get("trigger")==="item"&&!QB(n)&&(s=Klt(n,i,o)),Et(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ct(t)||(t=[t]);for(var l=0;l<t.length;l++)bm(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(N5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=D5(n[0],n[1]);F(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Xt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const rut=eut;var nut=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),B5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;It(t)&&re(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Je({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:oF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),F(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),F(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=F5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;B5(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=os(o.borderWidth||0),s=F5(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function os(e){return Math.max(0,e)}function F5(e){var t=os(e.shadowBlur||0),r=os(e.shadowOffsetX||0),n=os(e.shadowOffsetY||0);return{left:os(t-r),right:os(t+r),top:os(t-n),bottom:os(t+n)}}function B5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const iut=nut;var out=new Ke({shape:{x:-1,y:-1,width:2,height:2}}),aut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Xt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=LK(i.get("renderMode"));this._tooltipContent=o==="richText"?new iut(n):new rut(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Xt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?sF(this,"_updatePosition",50,"fixRate"):e3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");ZB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Xt.node||!i.getDom())){var a=$5(o,i);this._ticket="";var s=o.dataByCoordSys,l=cut(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=out;c.x=o.x,c.y=o.y,c.update(),ne(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=KB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide($5(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=dh([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;_c(i,function(u){if(ne(u).dataIndex!=null)return s=u,!0;if(ne(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=dh([n.tooltipOption],o),l=this._renderMode,u=[],c=ks("section",{blocks:[],noHeader:!0}),f=[],h=new c2;F(r,function(y){F(y.dataByAxis,function(_){var w=i.getComponent(_.axisDim+"Axis",_.axisIndex),T=_.value;if(!(!w||T==null)){var S=YB(T,w.axis,i,_.seriesDataIndices,_.valueLabelOpt),P=ks("section",{header:S,noHeader:!mo(S),sortBlocks:!0,blocks:[]});c.blocks.push(P),F(_.seriesDataIndices,function(C){var A=i.getSeriesByIndex(C.seriesIndex),M=C.dataIndexInside,k=A.getDataParams(M);if(!(k.dataIndex<0)){k.axisDim=_.axisDim,k.axisIndex=_.axisIndex,k.axisType=_.axisType,k.axisId=_.axisId,k.axisValue=SE(w.axis,{value:T}),k.axisValueLabel=S,k.marker=h.makeTooltipMarker("item",tu(k.color),l);var R=P4(A.formatTooltip(M,!0,null)),B=R.frag;if(B){var z=dh([A],o).get("valueFormatter");P.blocks.push(z?ot({valueFormatter:z},B):B)}R.text&&f.push(R.text),u.push(k)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=x4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ne(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=dh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),y=new c2;m.marker=y.makeTooltipMarker("item",tu(m.color),d);var _=P4(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=_.frag,P=S?x4(T?ot({valueFormatter:T},S):S,y,d,w,o.get("useUTC"),v.get("textStyle")):_.text,C="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,P,m,C,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ne(n),a=o.tooltipConfig,s=a.option||{};if(Et(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=dh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new c2;this._showOrMove(h,function(){var g=zt(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Et(h)){var g=r.ecModel.get("useUTC"),m=ct(i)?i[0]:i,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,y&&(d=Q1(m.axisValue,d,g)),d=MN(d,i,!0)}else if(Ut(h)){var _=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,_)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ct(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ct(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ct(n))i=We(n[0],u),o=We(n[1],c);else if(It(n)){var v=n;v.width=f[0],v.height=f[1];var g=Ms(v,{width:u,height:c});i=g.x,o=g.y,h=null,d=null}else if(Et(n)&&l){var m=uut(n,p,f,r.get("borderWidth"));i=m[0],o=m[1]}else{var m=sut(i,o,a,u,c,h?null:20,d?null:20);i=m[0],o=m[1]}if(h&&(i-=z5(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=z5(d)?f[1]/2:d==="bottom"?f[1]:0),QB(r)){var m=lut(i,o,a,u,c);i=m[0],o=m[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&F(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&F(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,a&&F(v,function(m,y){var _=g[y];a=a&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),o&&F(h.seriesDataIndices,function(m){var y=m.seriesIndex,_=n[y],w=o[y];_&&w&&w.data!==_.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Xt.node||!n.getDom()||(e3(this,"_updatePosition"),this._tooltipContent.dispose(),P3("itemTooltip",n))},t.type="tooltip",t}(ei);function dh(e,t,r){var n=t.ecModel,i;r?(i=new br(r,n,n),i=new br(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof br&&(a=a.get("tooltip",!0)),Et(a)&&(a={formatter:a}),a&&(i=new br(a,i,n)))}return i}function $5(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function sut(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function lut(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function uut(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function z5(e){return e==="center"||e==="middle"}function cut(e,t,r){var n=NP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=k0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ne(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const fut=aut;function mf(e){Br(JB),e.registerComponentModel(Wlt),e.registerComponentView(fut),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Dr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Dr)}var V5=F;function U5(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function G5(e,t,r){var n={};return V5(t,function(o){var a=n[o]=i();V5(e[o],function(s,l){if(!!pn.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new pn(u),l==="opacity"&&(u=zt(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new pn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function hut(e,t,r){var n;F(r,function(i){t.hasOwnProperty(i)&&U5(t[i])&&(n=!0)}),n&&F(r,function(i){t.hasOwnProperty(i)&&U5(t[i])?e[i]=zt(t[i]):delete e[i]})}function dut(e,t,r,n){var i={};return F(e,function(o){var a=pn.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return vF(s,f,T)}function c(T,S){prt(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=t[v],m=i[v],y=0,_=m.length;y<_;y++){var w=m[y];g[w]&&g[w].applyVisual(p,u,c)}}}}}var put=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),vut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Je({style:dn(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Je({style:dn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){a4(p,"_"+r.get("target"))}),v&&d.on("click",function(){a4(v,"_"+r.get("subtarget"))}),ne(c).eventData=ne(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var m=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=Ms(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),o.x=_.x,o.y=_.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),m=o.getBoundingRect();var T=_.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var P=new Ke({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(P)}},t.type="title",t}(ei);function yf(e){e.registerComponentModel(put),e.registerComponentView(vut)}function n$(e,t){if(!e)return!1;for(var r=ct(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function av(e){DS(e,"label",["show"])}var sv=Oe(),i$=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=sv(s)[a];if(!l||!l.data){sv(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&av(l),F(l.data,function(c){c instanceof Array?(av(c[0]),av(c[1])):av(c)}),u=this.createMarkerModelFromSeries(l,this,n),ot(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),sv(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return ks("section",{header:this.name,blocks:[ks("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return sv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Fi(i$,HN.prototype);const qc=i$;function E3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function gut(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function lv(e,t,r,n,i,o){var a=[],s=eu(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=BE(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=yo(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var W2={min:_e(lv,"min"),max:_e(lv,"max"),average:_e(lv,"average"),median:_e(lv,"median")};function Xm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!gut(t)&&!ct(t.coord)&&n){var i=n.dimensions,o=o$(t,r,n,e);if(t=zt(t),t.type&&W2[t.type]&&o.baseAxis&&o.valueAxis){var a=ue(i,o.baseAxis.dim),s=ue(i,o.valueAxis.dim),l=W2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)W2[u[c]]&&(u[c]=BE(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function o$(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(mut(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function mut(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Ym(e,t){return e&&e.containData&&t.coord&&!E3(t)?e.containData(t.coord):!0}function yut(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!E3(t)&&!E3(r)?e.containZone(t.coord,r.coord):!0}function _ut(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return bs(a,t[o])}:function(r,n,i,o){return bs(r.value,t[o])}}function BE(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var H2=Oe(),but=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){H2(s).keep=!1}),n.eachSeries(function(s){var l=qc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!H2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){H2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;F(r,function(o){var a=qc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?N9(l):UP(l))})}})},t.type="marker",t}(ei);const a$=but;var wut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(qc);const Sut=wut;var uv=Oe(),Tut=function(e,t,r,n){var i=e.getData(),o;if(ct(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=wi(n.yAxis,n.xAxis);else{var u=o$(n,i,t,e);s=u.valueAxis;var c=XF(i,u.valueDataDim);l=BE(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=zt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&be(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var g=[Xm(e,o[0]),Xm(e,o[1]),ot({},o[2])];return g[2].type=g[2].type||null,ie(g[2],g[0]),ie(g[2],g[1]),g};function qm(e){return!isNaN(e)&&!isFinite(e)}function j5(e,t,r,n){var i=1-e,o=n.dimensions[e];return qm(t[i])&&qm(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Put(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(j5(1,r,n,e)||j5(0,r,n,e)))return!0}return Ym(e,t[0])&&Ym(e,t[1])}function X2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get("x"),i.getWidth()),u=We(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(gf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;qm(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):qm(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var Eut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=qc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=uv(a).from,u=uv(a).to;l.each(function(c){X2(l,c,!0,o,i),X2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Tst);this.group.add(c.group);var f=Aut(a,r,n),h=f.from,d=f.to,p=f.line;uv(n).from=h,uv(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");ct(v)||(v=[v,v]),ct(g)||(g=[g,g]),ct(m)||(m=[m,m]),ct(y)||(y=[y,y]),f.from.each(function(w){_(h,w,!0),_(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ne(w).dataModel=n,w.traverse(function(T){ne(T).dataModel=n})});function _(w,T,S){var P=w.getItemModel(T);X2(w,T,S,r,o);var C=P.getModel("itemStyle").getItemStyle();C.fill==null&&(C.fill=uy(l,"color")),w.setItemVisual(T,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:qt(P.get("symbolOffset",!0),y[S?0:1]),symbolRotate:qt(P.get("symbolRotate",!0),m[S?0:1]),symbolSize:qt(P.get("symbolSize"),g[S?0:1]),symbol:qt(P.get("symbol",!0),v[S?0:1]),style:C})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(a$);function Aut(e,t,r){var n;e?n=Ct(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ot(ot({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new zl(n,r),o=new zl(n,r),a=new zl([],r),s=Ct(r.get("data"),_e(Tut,t,e,r));e&&(s=yr(s,_e(Put,e)));var l=_ut(!!e,n);return i.initData(Ct(s,function(u){return u[0]}),null,l),o.initData(Ct(s,function(u){return u[1]}),null,l),a.initData(Ct(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Cut=Eut;function gy(e){e.registerComponentModel(Sut),e.registerComponentView(Cut),e.registerPreprocessor(function(t){n$(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Mut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(qc);const kut=Mut;var cv=Oe(),xut=function(e,t,r,n){var i=Xm(e,n[0]),o=Xm(e,n[1]),a=i.coord,s=o.coord;a[0]=wi(a[0],-1/0),a[1]=wi(a[1],-1/0),s[0]=wi(s[0],1/0),s[1]=wi(s[1],1/0);var l=Iq([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function Zm(e){return!isNaN(e)&&!isFinite(e)}function W5(e,t,r,n){var i=1-e;return Zm(t[i])&&Zm(r[i])}function Lut(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return gf(e,"cartesian2d")?r&&n&&(W5(1,r,n)||W5(0,r,n))?!0:yut(e,i,o):Ym(e,i)||Ym(e,o)}function H5(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get(r[0]),i.getWidth()),u=We(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(gf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);Zm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):Zm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var X5=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Iut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=qc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Ct(X5,function(f){return H5(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new De});this.group.add(c.group),this.markKeep(c);var f=Out(a,r,n);n.setData(f),f.each(function(h){var d=Ct(X5,function(C){return H5(f,h,C,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],_=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];xm(y),xm(_);var w=!(g[0]>y[1]||g[1]<y[0]||m[0]>_[1]||m[1]<_[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),P=uy(l,"color");S.fill||(S.fill=P,Et(S.fill)&&(S.fill=AS(S.fill,.4))),S.stroke||(S.stroke=P),f.setItemVisual(h,"style",S)}),f.diff(cv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Zd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=cv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?hr(p,{shape:{points:v.points}},n,h):p=new Zd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=cv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),hf(h,fu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Et(v.fill)?AS(v.fill,1):"#000"}),qd(h,p),Jl(h,null,null,p.get(["emphasis","disabled"])),ne(h).dataModel=n}),cv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(a$);function Out(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Ct(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ot(ot({},f),{name:u,ordinalMeta:null})});i=Ct(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new zl(i,r)}else i=[{name:"value",type:"float"}],n=new zl(i,r);var s=Ct(r.get("data"),_e(xut,t,e,r));e&&(s=yr(s,_e(Lut,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return bs(d,i[h])}:function(u,c,f,h){return bs(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const Rut=Iut;function $0(e){e.registerComponentModel(kut),e.registerComponentView(Rut),e.registerPreprocessor(function(t){n$(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Dut=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Nut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ct(n)&&F(n,function(o,a){Et(o)&&(o={type:o}),n[a]=ie(o,Dut(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&DP(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Ct(o,function(s){return(Et(s)||be(s))&&(s={name:s}),new br(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;F(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&ue(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const A3=Nut;var ju=_e,C3=F,fv=De,Fut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new fv),this.group.add(this._selectorGroup=new fv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ms(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Ms(te({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Glt(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),C3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new fv;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(m,v,p,d,n,r,_,T,w,f,o);S.on("click",ju(Y5,v,null,o,h)).on("mouseover",ju(M3,m.name,null,o,h)).on("mouseout",ju(k3,m.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(P){if(!c.get(v)&&P.legendVisualProvider){var C=P.legendVisualProvider;if(!C.containName(v))return;var A=C.indexOfName(v),M=C.getItemVisual(A,"style"),k=C.getItemVisual(A,"legendIcon"),R=qn(M.fill);R&&R[3]===0&&(R[3]=.2,M=ot(ot({},M),{fill:sa(R,"rgba")}));var B=this._createItem(P,v,p,d,n,r,{},M,k,f,o);B.on("click",ju(Y5,null,v,o,h)).on("mouseover",ju(M3,null,v,o,h)).on("mouseout",ju(k3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();C3(r,function(u){var c=u.type,f=new Je({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);hf(f,{normal:h,emphasis:d},{defaultText:u.title}),GS(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),g=a.isSelected(n),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),_=o.get("icon");c=_||c||"roundRect";var w=But(c,o,l,u,d,g,h),T=new fv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!_||_==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var P=_==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add($ut({itemWidth:p,itemHeight:v,icon:c,iconRotate:P,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var C=s==="left"?p+5:-5,A=s,M=a.get("formatter"),k=n;Et(M)&&M?k=M.replace("{name}",n!=null?n:""):Ut(M)&&(k=M(n));var R=o.get("inactiveColor");T.add(new Je({style:dn(S,{text:k,x:C,y:v/2,fill:g?S.getTextColor():R,align:A,verticalAlign:"middle"})}));var B=new Ke({shape:T.getBoundingRect(),invisible:!0}),z=o.getModel("tooltip");return z.get("show")&&KP({el:B,componentModel:a,itemName:n,itemTooltipOption:z.option}),T.add(B),T.eachChild(function(N){N.silent=!0}),B.silent=!f,this.getContentGroup().add(T),GS(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Rc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Rc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var _={x:0,y:0};return _[g]=c[g]+p+h[g],_[m]=Math.max(c[m],h[m]),_[y]=Math.min(0,h[y]+d[1-v]),_}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ei);function But(e,t,r,n,i,o,a){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),C3(g,function(y,_){g[_]==="inherit"&&(g[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:Vm(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function $ut(e){var t=e.icon||"roundRect",r=Oi(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function Y5(e,t,r,n){k3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),M3(e,t,r,n)}function s$(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function M3(e,t,r,n){s$(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function k3(e,t,r,n){s$(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const l$=Fut;function zut(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function ph(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();F(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function Vut(e){e.registerAction("legendToggleSelect","legendselectchanged",_e(ph,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",_e(ph,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",_e(ph,"inverseSelect")),e.registerAction("legendSelect","legendselected",_e(ph,"select")),e.registerAction("legendUnSelect","legendunselected",_e(ph,"unSelect"))}function u$(e){e.registerComponentModel(A3),e.registerComponentView(l$),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,zut),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Vut(e)}var Uut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=iy(r);e.prototype.init.call(this,r,n,i),q5(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),q5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=J1(A3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(A3);function q5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Hc(t,r,{type:"box",ignoreSize:!!i})}const Gut=Uut;var Z5=De,Y2=["width","height"],q2=["x","y"],jut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Z5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Z5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ct(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Je({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",y=ZP(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=Y2[u],f=q2[u],h=Y2[1-u],d=q2[1-u];a&&Rc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=zt(i);a&&(m[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(r,o,m,u,c,h,d,f);if(a){if(s==="end")g[u]+=y[c]+p;else{var _=v[c]+p;g[u]-=_,y[f]-=_}y[c]+=v[c]+p,g[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Rc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Rc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],g=[-d.x,-d.y];n||(g[o]=c[u]);var m=[0,0],y=[-p.x,-p.y],_=qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?y[o]+=i[a]-p[a]:m[o]+=p[a]+_}y[1-o]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(y);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-_,0),S[s]=T[s],f.setClipPath(new Ke({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&hr(c,{x:P.contentPosition[0],y:P.contentPosition[1]},v?r:null),this._updatePageInfoView(r,P),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;F(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Et(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=Y2[a],l=q2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[a]=-v.s;for(var g=u+1,m=v,y=v,_=null;g<=h;++g)_=w(c[g]),(!_&&y.e>m.s+o||_&&!T(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=_;for(var g=u-1,m=v,y=v,_=null;g>=-1;--g)_=w(c[g]),(!_||!T(y,_.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=_;return p;function w(S){if(S){var P=S.getBoundingRect(),C=P[l]+S[l];return{s:C,e:C+P[s],i:S.__legendDataIndex}}}function T(S,P){return S.e>=P&&S.s<=P+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(l$);const Wut=jut;function Hut(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Xut(e){Br(u$),e.registerComponentModel(Gut),e.registerComponentView(Wut),Hut(e)}function _f(e){Br(u$),Br(Xut)}var Yut={get:function(e,t,r){var n=zt((qut[e]||{})[t]);return r&&ct(n)?n[n.length-1]:n}},qut={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const c$=Yut;var K5=pn.mapVisual,Zut=pn.eachVisual,Kut=ct,J5=F,Jut=xm,Qut=da,tct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&hut(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=G5(this.option.controller,n,r),this.targetVisuals=G5(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ze(r),n},t.prototype.eachTargetSeries=function(r,n){F(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ct(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Et(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=Jut([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});ie(o,i),ie(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){Kut(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},J5(p,function(g,m){if(!!pn.isValidType(m)){var y=c$.get(m,"inactive",s);y!=null&&(v[m]=y,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";J5(this.stateList,function(m){var y=this.itemSize,_=f[m];_||(_=f[m]={color:s?p:[p]}),_.symbol==null&&(_.symbol=h&&zt(h)||(s?g:[g])),_.symbolSize==null&&(_.symbolSize=d&&zt(d)||(s?y[0]:[y[0],y[0]])),_.symbol=K5(_.symbol,function(S){return S==="none"?g:S});var w=_.symbolSize;if(w!=null){var T=-1/0;Zut(w,function(S){S>T&&(T=S)}),_.symbolSize=K5(w,function(S){return Qut(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const Km=tct;var Q5=[20,140],ect=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=Q5[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=Q5[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ct(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),F(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=xm((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=tx(this,"outOfRange",this.getExtent()),i=tx(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=J1(Km.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Km);function tx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const rct=ect;var nct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=I0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Ke({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=pn.prepareVisualTypes(f);return F(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),pn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;ytt(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ei);const f$=nct;var ex=[["left","right","width"],["top","bottom","height"]];function h$(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=ex[a],l=[0,null,10],u={},c=0;c<3;c++)u[ex[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Ms(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function Xg(e,t){return F(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var lo=da,ict=F,rx=Math.min,Z2=Math.max,oct=12,act=6,sct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Je({style:dn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=h$(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new De;u.add(c),c.add(i.outOfRange=nx()),c.add(i.inRange=nx(null,s?ox(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Ke({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=Z2(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ha(r.get("handleSize"),o[0]),f=Oi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=ox(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){ql(m.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),jP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Je({cursor:h,draggable:!0,drift:l,onmousemove:function(m){ql(m.event)},ondragend:u,style:dn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ha(r.get("indicatorSize"),i[0]),l=Oi(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Sa){var c=l.style;l.useStyle(ot({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Je({silent:!0,invisible:!0,style:dn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:act)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():ix(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[lo(n[0],i,o,!0),lo(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];Pst(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[lo(o[0],a,s,!0),lo(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new XP(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new De(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();ict([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=lo(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Lc(i.handleLabelPoints[c],Vg(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=lo(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var y=Lc(c.indicatorLabelPoint,Vg(f,this.group)),_=c.indicatorLabel;_.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";_.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var P={x:g,y:v,style:{fill:d}},C={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(P,A),_.animateTo(C,A)}else f.attr(P),_.attr(C);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var k=0;k<M.length;k++)this._api.enterBlur(M[k])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=rx(Z2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=rx(Z2(a[0],r),a[1]);var l=lct(i,s,a),u=[r-l,r+l],c=lo(r,a,s,!0),f=[lo(u[0],a,s,!0),lo(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||ix(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=MK(h,d);this._dispatchHighDown("downplay",Xg(p[0],i)),this._dispatchHighDown("highlight",Xg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(_c(r.target,function(l){var u=ne(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Xg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=Vg(n,o?null:this.group);return ct(r)?Lc(r,a,i):cN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(f$);function nx(e,t,r,n){return new Zd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){ql(i.event)},ondragend:n})}function lct(e,t,r){var n=oct/2,i=e.get("hoverLinkDataSize");return i&&(n=lo(i,t,r,!0)/2),n}function ix(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function ox(e){return e==="vertical"?"ns-resize":"ew-resize"}const uct=sct;var cct={type:"selectDataRange",event:"dataRangeSelected",update:"update"},fct=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},hct=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(dut(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(dct,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function dct(e,t,r,n){for(var i=t.targetVisuals[n],o=pn.prepareVisualTypes(i),a={color:uy(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ax=F;function pct(e){var t=e&&e.visualMap;ct(t)||(t=t?[t]:[]),ax(t,function(r){if(!!r){Wu(r,"splitList")&&!Wu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ct(n)&&ax(n,function(i){It(i)&&(Wu(i,"start")&&!Wu(i,"min")&&(i.min=i.start),Wu(i,"end")&&!Wu(i,"max")&&(i.max=i.end))})}})}function Wu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var sx=!1;function d$(e){sx||(sx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(cct,fct),F(hct,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(pct))}function vct(e){e.registerComponentModel(rct),e.registerComponentView(uct),d$(e)}var gct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],mct[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Ct(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=pn.listVisualTypes(),o=this.isCategory();F(r.pieces,function(s){F(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),F(n,function(s,l){var u=!1;F(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&F(this.stateList,function(c){(r[c]||(r[c]={}))[l]=c$.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,F(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;F(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=zt(r)},t.prototype.getValueState=function(r){var n=pn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=pn.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return F(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=J1(Km.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Km),mct={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),fk(e),F(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;F(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),lx(t,e)},pieces:function(e){var t=this.option;F(t.pieces,function(r,n){It(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=pn.retrieveVisuals(r),e.push(i)},this),lx(t,e),fk(e),F(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function lx(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const yct=gct;var _ct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=wi(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),F(c.viewPieceList,function(d){var p=d.piece,v=new De;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Je({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Rc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:Xg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return h$(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new De,l=this.visualMapModel.textStyleModel;s.add(new Je({style:dn(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Ct(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Oi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=zt(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,F(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(f$);const bct=_ct;function wct(e){e.registerComponentModel(yct),e.registerComponentView(bct),d$(e)}function Sct(e){Br(vct),Br(wct)}var ux={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Tct=function(){function e(t){var r=this._condVal=Et(t)?new RegExp(t):Nq(t)?t:null;if(r==null){var n="";re(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Et(r)?this._condVal.test(t):be(r)?this._condVal.test(t+""):!1},e}(),Pct=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Ect=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),Act=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Cct=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Mct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function $E(e,t){if(e===!0||e===!1){var r=new Pct;return r.value=e,r}var n="";return p$(e)||re(n),e.and?cx("and",e,t):e.or?cx("or",e,t):e.not?kct(e,t):xct(e,t)}function cx(e,t,r){var n=t[e],i="";ct(n)||re(i),n.length||re(i);var o=e==="and"?new Ect:new Act;return o.children=Ct(n,function(a){return $E(a,r)}),o.children.length||re(i),o}function kct(e,t){var r=e.not,n="";p$(r)||re(n);var i=new Cct;return i.child=$E(r,t),i.child||re(n),i}function xct(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ve(e),a=e.parser,s=a?XN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=ht(ux,u)?ux[u]:u,f=e[u],h=s?s(f):f,d=het(c,h)||c==="reg"&&new Tct(h);d||re(r),i.push(d)}}i.length||re(r);var p=new Mct;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function p$(e){return It(e)&&!Fr(e)}var Lct=function(){function e(t,r){this._cond=$E(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Ict(e,t){return new Lct(e,t)}var Oct={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Ict(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;ht(s,"dimension")||re(l);var c=t.getDimensionInfo(u);return c||re(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},Rct={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ze(r);i.length||re(n);var o=[];F(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&re(n),h!=="asc"&&h!=="desc"&&re(n),p&&p!=="min"&&p!=="max"){var v="";re(v)}if(h!=="asc"&&h!=="desc"){var g="";re(g)}var m=t.getDimensionInfo(f);m||re(n);var y=d?XN(d):null;d&&!y&&re(n),o.push({dimIdx:m.index,parser:y,comparator:new qN(h,p)})});var a=t.sourceFormat;a!==Jr&&a!==zi&&re(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function my(e){e.registerTransform(Oct),e.registerTransform(Rct)}var Dct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new QN(this),M4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),M4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:wo},t}(Me),Nct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ei);function yy(e){e.registerComponentModel(Dct),e.registerComponentView(Nct)}var K2=null;function Fct(e){return K2||(K2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),K2(e)}var J2=null;function Bct(e){J2||(J2=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),J2(e)}function $ct(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function hv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function v$(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function x3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(v$(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var zct='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',L3=0,Yg=null;function Vct(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=jct.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||Jm(e)}),a=x3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Jm(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(L3||(Yg=$ct(zct)),Wct(e),e.__resize_rendered__=x3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),L3++}function Uct(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",zE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--L3&&Yg&&Yg.parentNode.removeChild(Yg)}}function Gct(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function jct(){var e=x3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(VE(this),this.addEventListener("scroll",zE,!0)),this.__resize_rendered__=t,Jm(this))}function zE(){var e=this;VE(this),this.__resize_raf__&&Bct(this.__resize_raf__),this.__resize_raf__=Fct(function(){var t=Gct(e);t&&(e.__resize_last__=t,Jm(e))})}function Jm(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Wct(e){var t=v$(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=hv("div",{className:"resize-triggers"}),n=hv("div",{className:"resize-expand-trigger"}),i=hv("div"),o=hv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},VE(e),e.addEventListener("scroll",zE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function VE(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var Ko=function(){return Ko=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ko.apply(this,arguments)},Hct=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Xct(e){return t=Object.create(null),Hct.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Yct={autoresize:Boolean},qct={loading:Boolean,loadingOptions:Object},Zct=/^on[^a-z]/,Kct=function(e){return Zct.test(e)},fx=[],vh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=fx.indexOf(o);a===-1&&(a=fx.push(o)-1,vh[a]={}),r=vh[a]&&vh[a][n]?vh[a][n]:vh[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var Jct="ecTheme",bf=sP({name:"echarts",props:Ko(Ko({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Yct),qct),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Eg(),i=Eg(),o=Eg(),a=En("ecTheme",null),s=En("ecInitOptions",null),l=En("ecUpdateOptions",null),u=Zw(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ye(function(){return o.value||e.option||null}),v=Ye(function(){return e.theme||mr(a)||{}}),g=Ye(function(){return e.initOptions||mr(s)||{}}),m=Ye(function(){return e.updateOptions||mr(l)||{}}),y=Ye(function(){return function(C){var A={};for(var M in C)Kct(M)||(A[M]=C[M]);return A}(r)}),_=hP().proxy.$listeners;function w(C){if(n.value){var A=i.value=cnt(n.value,v.value,g.value);e.group&&(A.group=e.group);var M=_;M||(M={},Object.keys(r).filter(function(R){return R.indexOf("on")===0&&R.length>2}).forEach(function(R){var B=R.charAt(2).toLowerCase()+R.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),M[B]=r[R]})),Object.keys(M).forEach(function(R){var B=M[R];if(B){var z=R.toLowerCase();z.charAt(0)==="~"&&(z=z.substring(1),B.__once__=!0);var N=A;if(z.indexOf("zr:")===0&&(N=A.getZr(),z=z.substring(3)),B.__once__){delete B.__once__;var j=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];j.apply(void 0,Z),N.off(z,B)}}N.on(z,B)}}),c.value?Bd(function(){A&&!A.isDisposed()&&A.resize(),k()}):k()}function k(){var R=C||p.value;R&&A.setOption(R,m.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;go(f,function(C){typeof S=="function"&&(S(),S=null),C||(S=go(function(){return e.option},function(A,M){A&&(i.value?i.value.setOption(A,Ko({notMerge:A.value!==(M==null?void 0:M.value)},m.value)):w())},{deep:!0}))},{immediate:!0}),go([v,g],function(){T(),w()},{deep:!0}),WC(function(){e.group&&i.value&&(i.value.group=e.group)});var P=Xct(i);return function(C,A,M){var k=En("ecLoadingOptions",{}),R=Ye(function(){return Ko(Ko({},mr(k)),M==null?void 0:M.value)});WC(function(){var B=C.value;B&&(A.value?B.showLoading(R.value):B.hideLoading())})}(i,h,d),function(C,A,M){var k=null;go([M,C,A],function(R,B,z){var N=R[0],j=R[1],Z=R[2];N&&j&&Z&&(k=ly(function(){j.resize()},100),Vct(N,k)),z(function(){k&&N&&Uct(N,k)})})}(i,c,n),j8(function(){w()}),O1(T),Ko({chart:i,root:n,setOption:function(C,A){e.manualUpdate&&(o.value=C),i.value?i.value.setOption(C,A||{}):w(C)},nonEventAttrs:y},P)},render:function(){var e=Ko({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",dP("x-vue-echarts",e)}});Br([vf,N0,F0,yf,mf,_f,B0,Sct,$0]);const Qct={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{VChart:bf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${Ft(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:Ft,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return Ft(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},vu=e=>(en("data-v-4610c876"),e=e(),rn(),e),tft=U(" Observations: "),eft=vu(()=>b("abbr",{title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),rft=vu(()=>b("br",null,null,-1)),nft=["value"],ift=vu(()=>b("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),oft={class:"fsxs tar"},aft=vu(()=>b("th",null,"work time",-1)),sft=vu(()=>b("th",null,"workload \u2264",-1)),lft=vu(()=>b("th",null,"modifier \u2265",-1)),uft=vu(()=>b("th",null,"chance",-1));function cft(e,t,r,n,i,o){const a=de("v-chart");return O(),D(W,null,[tft,eft,rft,b("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,nft),b("div",null,[kt(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),ift,b("table",oft,[b("tr",null,[aft,(O(!0),D(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),D("td",null,L(10*s.tier)+" min",1))),256))]),b("tr",null,[sft,(O(!0),D(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),D("td",null,L(o.formatFixed(s.wld,2)),1))),256))]),b("tr",null,[lft,(O(!0),D(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),D("td",null,L(o.formatFixed(100*s.mod,2)),1))),256))]),b("tr",null,[uft,(O(!0),D(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),D("td",null,L(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const UE=$e(Qct,[["render",cft],["__scopeId","data-v-4610c876"]]);const fft={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{FloatingModifierEdit:UE},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}const t=this.gameStore.wspdBonus(this.workerEditing,e);return console.log("cpt: currentWspdBonus",e,t),t}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Ni,formatFixed:Ft,randBetween:us,levelup:hd,spaceSep(e,t){return Ft(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(g=>g==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,g)=>g.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=this.workerEditing.level-1,n=t-1,i=this.gameStore.workerStatic[this.workerEditing.charkey],o=this.gameStore.workerStatic[e],a=i.wspd_lo*r,l=i.wspd_hi*r-a,u=this.workerEditing.wspdSheet*1e6-i.wspd,c=(u-a)/l||0,f=o.wspd_lo*n,h=o.wspd_hi*n,d=f+(h-f)*c,p=i.mspd_lo*r,v=i.mspd_hi*r,m=((this.workerEditing.mspdSheet/(i.mspd/100)-1)*1e6-p)/(v-p)||0,y=o.mspd_lo*n,_=o.mspd_hi*n,w=y+(_-y)*m,T=i.luck_lo*r,S=i.luck_hi*r,P=this.workerEditing.luckSheet*1e4-i.luck,C=(P-T)/(S-T)||0,A=o.luck_lo*n,M=o.luck_hi*n,k=A+(M-A)*C;console.log(`recalculating levelups: 
        ${o.wspd/1e6}+${n}*[${o.wspd_lo/1e6}\u2026${o.wspd_hi/1e6}]*${Math.round(c*1e3)/10}%\u{1F528} 
        ${o.mspd/100}+${n}*[${o.mspd_lo/1e6}\u2026${o.mspd_hi/1e6}]*${Math.round(m*1e3)/10}%\u{1F9B6} 
        ${o.luck/1e4}+${n}*[${o.luck_lo/1e4}\u2026${o.luck_hi/1e4}]*${Math.round(C*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(o.wspd-i.wspd+d-u)/1e6,this.workerEditing.mspdSheet=o.mspd/100*(1+w/1e6),this.workerEditing.luckSheet+=(o.luck-i.luck+k-P)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,hd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),hd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=us(t.wspd_lo,t.wspd_hi),n+=us(t.mspd_lo,t.mspd_hi),i+=us(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},$r=e=>(en("data-v-f181a43e"),e=e(),rn(),e),hft={key:0,id:"columns"},dft={id:"worker"},pft={class:"borderless"},vft=$r(()=>b("td",null,"name:",-1)),gft={style:{float:"right"}},mft=$r(()=>b("td",null,"type:",-1)),yft=["value"],_ft=["value"],bft=$r(()=>b("td",null,"job:",-1)),wft=U(" idle "),Sft={key:0},Tft={key:1},Pft=U(" \u270D\uFE0F "),Eft=U(" @ "),Aft=U("M$/day "),Cft=U("CP "),Mft=U(" [\u{1F33B}] "),kft={class:"fsxs"},xft=U(" \u270D\uFE0F "),Lft=U(" @ "),Ift=U("M$/day "),Oft=U("CP "),Rft=U(" UNKNOWN_JOBTYPE "),Dft={key:0},Nft=$r(()=>b("td",null,"$/day:",-1)),Fft={key:0},Bft={key:0},$ft={key:3,class:"fsxs"},zft={colspan:"2"},Vft={class:"borderless"},Uft=$r(()=>b("tr",null,[b("th",null,"stats:"),b("th",null,"sheet"),b("th",null,"+"),b("th",null,"skill"),b("th",null,"="),b("th",null,"final"),b("th")],-1)),Gft={class:"center"},jft={rowspan:"3"},Wft=$r(()=>b("br",null,null,-1)),Hft=$r(()=>b("td",null,null,-1)),Xft=$r(()=>b("td",null,null,-1)),Yft=$r(()=>b("td",null,"\u{1F528}",-1)),qft={class:"center"},Zft=$r(()=>b("td",null,null,-1)),Kft=$r(()=>b("td",null,null,-1)),Jft=$r(()=>b("td",null,"\u{1F9B6}",-1)),Qft={class:"center"},tht=$r(()=>b("td",null,null,-1)),eht=$r(()=>b("td",null,null,-1)),rht=$r(()=>b("td",null,"\u{1F340}",-1)),nht={class:"center"},iht=$r(()=>b("td",null,"skills:",-1)),oht={style:{float:"right"}},aht=["disabled"],sht={colspan:"2",s:""},lht=["id","onUpdate:modelValue"],uht=["value"],cht=["src"],fht=U(" use floating modifier for this regionGroup "),hht={key:0,id:"chartPane"};function dht(e,t,r,n,i,o){const a=de("FloatingModifierEdit");return r.workerEditing?(O(),D("div",hft,[b("div",dft,[b("table",pft,[b("tr",null,[vft,b("td",null,[Tt(b("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[pe,r.workerEditing.label]]),U(" lvl."+L(r.workerEditing.level)+" ",1),b("button",{onClick:t[1]||(t[1]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),b("button",{onClick:t[2]||(t[2]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),ut("",!0),b("div",gft,[e.wasChanged&&r.workerInitial?(O(),D("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):ut("",!0)])])]),b("tr",null,[mft,b("td",null,[e.prerelease_charkind?(O(),D("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(O(!0),D(W,null,Nt(n.gameStore.workerStatic,(s,l)=>(O(),D("option",{value:l},L(l)+" "+L(n.gameStore.uloc.char[l])+" "+L(s.wspd/1e6)+" / "+L(s.mspd/100)+" / "+L(s.luck/1e4),9,_ft))),256))],40,yft)):(O(),D(W,{key:1},[U(L(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),b("tr",null,[bft,b("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(O(),D(W,{key:0},[wft],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(O(),D(W,{key:1},[U(L(n.gameStore.plantzoneName(r.workerEditing.job))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(O(),D("span",Sft,[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job],2))+" ",1),b("span",{onClick:t[6]||(t[6]=s=>e.showChartPane=!e.showChartPane)},L(e.showChartPane?"\u25C0":"\u25B6"),1)])):(O(),D("span",Tft,L(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(O(),D(W,{key:2},[Pft,Tt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[7]||(t[7]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),Eft,Tt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),Aft,Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Cft],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(O(),D(W,{key:3},[Mft],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(O(),D(W,{key:4},[U(L(n.gameStore.workerJobDescription(r.workerEditing))+" ",1),n.userStore.userWorkshops[r.workerEditing.job.hk].label?(O(),D(W,{key:0},[U(' "'+L(n.userStore.userWorkshops[r.workerEditing.job.hk].label)+'" ',1)],64)):ut("",!0),U(" "+L(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" workload ",1),b("span",kft," ["+L(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(O(),D(W,{key:5},[xft,Tt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),Lft,Tt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),Ift,Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Oft],64)):(O(),D(W,{key:6},[Rft],64))])]),r.workerEditing.job?(O(),D("tr",Dft,[Nft,b("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(O(),D(W,{key:0},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(O(),D("span",Fft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Yr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):ut("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(O(),D(W,{key:1},[U(L(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(O(),D(W,{key:2},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(O(),D("span",Bft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Yr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):ut("",!0)],64)):ut("",!0),n.gameStore.isGiant(r.workerEditing.charkey)?(O(),D("span",$ft," with giant bonus ")):ut("",!0)])])):ut("",!0),b("tr",null,[b("td",zft,[b("table",Vft,[Uft,b("tr",Gft,[b("td",jft,[b("button",{onClick:t[13]||(t[13]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),Wft,b("button",{onClick:t[14]||(t[14]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),b("td",null,[Tt(b("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.wspdSheet]])]),Hft,b("td",null,L(o.formatFixed(o.currentWspdBonus,2)),1),Xft,b("td",null,L(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),Yft]),b("tr",qft,[b("td",null,[Tt(b("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.mspdSheet]])]),Zft,b("td",null,L(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),Kft,b("td",null,L(o.formatFixed(r.workerEditing.mspdBase*(r.workerEditing.mspdSheet/r.workerEditing.mspdBase+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),Jft]),b("tr",Qft,[b("td",null,[Tt(b("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.luckSheet]])]),tht,b("td",null,L(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),eht,b("td",null,L(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),rht])])])]),b("tr",nht,[iht,b("td",null,[b("div",oht,[r.workerEditing.job?(O(),D("button",{key:0,disabled:!(r.workerEditing.job in n.userStore.pzJobs),onClick:t[18]||(t[18]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,aht)):ut("",!0)])])]),(O(),D(W,null,Nt(9,s=>b("tr",null,[b("td",sht,[Tt(b("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(O(!0),D(W,null,Nt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(O(),D("option",{value:l},L(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,uht))),256))],8,lht),[[cn,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(O(),D("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,cht)):ut("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&typeof r.workerEditing.job=="number"&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating?(O(),D(W,{key:0},[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]=s)},null,512),[[Kr,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]]]),fht],64)):ut("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(O(),D("div",hht,[kt(a,{rgk:n.gameStore.plantzones[r.workerEditing.job].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job].workload,show:!0},null,8,["rgk","wspd","workload"])])):ut("",!0)])):ut("",!0)}const g$=$e(fft,[["render",dht],["__scopeId","data-v-f181a43e"]]),pht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{options:Object,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:""}),methods:{makeIconSrc:Ni,formatFixed:Ft,assignWorker(e,t){this.userStore.assignWorker(e,t),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}}},vht=b("tr",null,[b("th",null,"node"),b("th",null,"workload"),b("th",null,"walk"),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1),ght=["href"],mht=U(L(" ")+" "),yht=["src"],_ht=["title"],bht=U("+"),wht=["title"],Sht=["onClick"],Tht=b("tr",null,[b("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1),Pht={key:0},Eht=b("td",null,[U(" \u{1F33B} Farm "),b("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10"},"\u2139\uFE0F")],-1),Aht=b("td",null,"x",-1),Cht=b("td",null,"x",-1),Mht=["title"],kht=b("abbr",{title:"see Settings > Workshops config"},"\u2139\uFE0F",-1),xht=["onClick"],Lht=U(" \u270D\uFE0F Custom job "),Iht=b("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually"},"\u2139\uFE0F",-1),Oht={style:{float:"right"}},Rht=U(" label: "),Dht=b("td",null,"x",-1),Nht=b("td",null,"x",-1);function Fht(e,t,r,n,i,o){const a=de("RouterLink");return r.options?(O(),D(W,{key:0},[b("div",null,[U(" Send "+L(r.options.worker.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(O(),D(W,{key:0},[U(L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).luck,2))+"\u{1F340} ",1)],64)):(O(),D(W,{key:1},[U(L(o.formatFixed(r.options.worker.wspdSheet,2))+"\u{1F528} "+L(o.formatFixed(r.options.worker.mspdSheet,2))+"\u{1F9B6} "+L(o.formatFixed(r.options.worker.luckSheet,2))+"\u{1F340} ",1)],64)),U(" ) where? "+L(r.options.jobs.length)+" top untaken nodes near "+L(n.gameStore.uloc.town[n.gameStore.tnk2tk(r.options.worker.tnk)])+": ",1)]),b("table",null,[vht,(O(!0),D(W,null,Nt(r.options.jobs,s=>(O(),D("tr",null,[b("td",null,[b("a",{href:this.userStore.codexNodeUrl+s.pz.key},L(s.pz.name),9,ght),(O(!0),D(W,null,Nt(this.gameStore.plantzones[s.pz.key].itemkeys,l=>(O(),D(W,null,[mht,kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,yht)]),_:2},1032,["to"])],64))),256))]),b("td",null,L(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+L(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),b("td",null,L(o.formatFixed(s.profit.dist,0)),1),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?"\u2713":"\u2717"} ${n.gameStore.uloc.node[l]}`).join(`
`)},L(s.mapCp),9,_ht),bht,b("abbr",{title:s.infraTooltip},L(o.formatFixed(s.townCp)),9,wht),U("="+L(o.formatFixed(s.cp)),1)]),b("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>o.assignWorker(r.options.worker,s.pz.key)},"assign",8,Sht)])]))),256)),Tht,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(O(),D("tr",Pht,[Eht,Aht,Cht,b("td",null,L(n.userStore.farmingProfitPerCP),1),b("td",null,[b("abbr",{title:n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).infraTooltip},L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).townCp)),9,Mht)]),b("td",null,L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:t[0]||(t[0]=s=>o.assignWorker(r.options.worker,"farming"))},"assign")])])):ut("",!0),(O(!0),D(W,null,Nt(n.userStore.userWorkshops,(s,l)=>(O(),D("tr",null,[(!o.workshopBusy(l)||s.industry=="mass")&&n.gameStore.houseDistance(r.options.worker.tnk,l)<1e6?(O(),D(W,{key:0},[b("td",null,[U(" \u{1F3ED} "+L(n.gameStore.uloc.char[l])+" ",1),kht]),b("td",null,L(s.manualWorkload),1),b("td",null,L(o.formatFixed(n.gameStore.houseDistance(r.options.worker.tnk,l),0)),1),b("td",null,L(o.formatFixed(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),2)),1),b("td",null,L(n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),1),b("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),3,!0)),1),b("td",null,[b("button",{onClick:u=>o.assignWorkerWorkshop(r.options.worker,l)},"assign",8,xht)])],64)):ut("",!0)]))),256)),b("tr",null,[b("td",null,[Lht,Iht,b("div",Oht,[Rht,Tt(b("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[pe,e.customLabel]])])]),Dht,Nht,b("td",null,[Tt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[2]||(t[2]=s=>e.customProfit=s)},null,512),[[pe,e.customProfit,void 0,{number:!0}]])]),b("td",null,[Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[3]||(t[3]=s=>e.customCP=s)},null,512),[[pe,e.customCP,void 0,{number:!0}]])]),b("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(e.customProfit,e.customCP),3,!0)),1),b("td",null,[b("button",{onClick:t[4]||(t[4]=s=>o.assignWorkerCustom(r.options.worker))},"assign")])])])],64)):ut("",!0)}const Bht=$e(pht,[["render",Fht]]),$ht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:Ft}},zht=U(" Connect to nearest town "),Vht=b("tr",null,[b("th",null,"House"),b("th",null,"\u{1F6CF}\uFE0F"),b("th",null,"CP")],-1),Uht=["disabled","onUpdate:modelValue"],Ght=U(" "+L(" ")+" "),jht=["href"],Wht=["disabled"],Hht=U(" P2W slots \u2192 Total: ");function Xht(e,t,r,n,i,o){return r.o?(O(),D(W,{key:0},[b("h3",null,L(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(O(),D(W,{key:0},[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Kr,n.userStore.activateAncado]]),zht],64)):ut("",!0),b("table",null,[Vht,(O(!0),D(W,null,Nt(r.o.houses,a=>(O(),D("tr",null,[b("td",null,[Tt(b("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,Uht),[[Kr,n.userStore.lodgingTaken[a.key]]]),Ght,b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,jht)]),b("td",null,L(a.lodgingSpaces),1),b("td",null,L(a.CP),1)]))),256)),b("tr",null,[b("td",null,[Tt(b("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,Wht),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Hht]),b("td",null,L(n.userStore.haveLodging.slots.perTown[r.tk]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):ut("",!0)}const Yht=$e($ht,[["render",Xht]]);const qht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>i-n),e.length&&(e.push("S"),e.push("F"));const t=Array(this.userStore.storagePersonal[this.tk]).fill("P");return e.concat(t)}},methods:{formatFixed:Ft,makeIconSrc:Ni,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},zr=e=>(en("data-v-a2e84901"),e=e(),rn(),e),Zht=U(" Connect to nearest town "),Kht={class:"section"},Jht=zr(()=>b("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),Qht=zr(()=>b("br",null,null,-1)),tdt=U(" - 1 initial"),edt=zr(()=>b("br",null,null,-1)),rdt=U(" - "),ndt=["disabled"],idt=U(" from P2W"),odt=zr(()=>b("br",null,null,-1)),adt={key:0},sdt={key:1,class:"red"},ldt=zr(()=>b("br",null,null,-1)),udt={class:"section"},cdt={id:"storageParent"},fdt={id:"storageLeft"},hdt=zr(()=>b("h3",null,"\u{1F4E6} storage",-1)),ddt=zr(()=>b("br",null,null,-1)),pdt=U(" + 1 Seal + 1 Free slot"),vdt=zr(()=>b("br",null,null,-1)),gdt=U(" + "),mdt=U(" Personal items"),ydt=zr(()=>b("br",null,null,-1)),_dt=zr(()=>b("span",{class:"markInnate underline"},"initial",-1)),bdt=zr(()=>b("br",null,null,-1)),wdt=U(" - "),Sdt=U(" "+L(" ")),Tdt=zr(()=>b("span",{class:"markP2W underline"},"from P2W",-1)),Pdt=zr(()=>b("br",null,null,-1)),Edt=zr(()=>b("span",{class:"markProvided underline"},"required",-1)),Adt={key:1},Cdt={key:2,class:"red"},Mdt=zr(()=>b("br",null,null,-1)),kdt=zr(()=>b("span",{class:"markExtra underline"},"extra",-1)),xdt={id:"storageItemList"},Ldt={key:0},Idt={key:0,class:"textItem"},Odt={key:1,class:"textItem"},Rdt=["title"],Ddt=["src"],Ndt=["title"];function Fdt(e,t,r,n,i,o){return r.tk>0?(O(),D(W,{key:0},[b("h2",null,L(n.gameStore.uloc.town[r.tk]),1),r.tk==619?(O(),D(W,{key:0},[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Kr,n.userStore.activateAncado]]),Zht],64)):ut("",!0),b("div",Kht,[Jht,U(" "+L(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),Qht,tdt,edt,rdt,Tt(b("input",{type:"number",class:"w42em",min:"0",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,ndt),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),idt,odt,U(" = "+L(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(O(),D("span",adt,"\u2190 max possible")):ut("",!0),n.userStore.townsInfra[r.tk].errL?(O(),D("span",sdt,"\u2190 too much!")):ut("",!0),ldt,b("strong",null,L(n.userStore.townsInfra[r.tk].lodging)+" found ",1)]),b("div",udt,[b("div",cdt,[b("div",fdt,[hdt,U(" "+L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),ddt,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(O(),D(W,{key:0},[pdt,vdt],64)):ut("",!0),gdt,Tt(b("input",{type:"number",class:"w42em",min:"0","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[pe,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),mdt,ydt,U(" - "+L(n.userStore.baseStorage)+" ",1),_dt,bdt,wdt,Tt(b("input",{type:"number",class:"w3em",min:"0","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[pe,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),Sdt,Tdt,Pdt,U(" = "+L(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),Edt,n.userStore.townsInfra[r.tk].warnS?(O(),D("span",Adt,"\u2190 max possible")):ut("",!0),n.userStore.townsInfra[r.tk].errS?(O(),D("span",Cdt,"\u2190 too much!")):ut("",!0),Mdt,b("strong",null,L(n.userStore.townsInfra[r.tk].storage)+" found",1),U(" \u2192 "+L(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),kdt]),b("div",xdt,[(O(!0),D(W,null,Nt(o.storageViewCount,a=>(O(),D(W,null,[a>1&&(a-1)%9==0?(O(),D("br",Ldt)):ut("",!0),b("div",{class:Yr(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(O(),D("span",Idt)):isNaN(o.ingameSortedItems[a-1])?(O(),D("span",Odt,L(o.ingameSortedItems[a-1]),1)):(O(),D("abbr",{key:2,title:o.ingameSortedItems[a-1]+" "+n.gameStore.uloc.item[o.ingameSortedItems[a-1]]},[b("img",{src:o.makeIconSrc(o.ingameSortedItems[a-1]),class:"iconitem"},null,8,Ddt)],8,Rdt))],2)],64))),256))])])]),U(" Found cost: "+L(n.userStore.townsInfra[r.tk].cost)+" CP ",1),n.userStore.townsInfra[r.tk].success?(O(),D("abbr",{key:1,title:o.houseCraftPickedTooltip(r.tk)},"\u2139\uFE0F",8,Ndt)):ut("",!0)],64)):ut("",!0)}const Bdt=$e(qht,[["render",Fdt],["__scopeId","data-v-a2e84901"]]);function Qm(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const GE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),hx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);hx&&parseFloat(hx[1]);const $dt="3.2.7";function va(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const I3=typeof process!="object"||String(process)!=="[object process]"||process.browser,zdt=typeof window<"u"&&typeof window.orientation<"u",dx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);dx&&parseFloat(dx[1]);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Vdt{constructor(t,r){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){va(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){va(this.isRunning),this.isRunning=!1,this._reject(t)}}class Q2{}const tb=new Map;function Udt(e){va(e.source&&!e.url||!e.source&&e.url);let t=tb.get(e.source||e.url);return t||(e.url&&(t=Gdt(e.url),tb.set(e.url,t)),e.source&&(t=m$(e.source),tb.set(e.source,t))),va(t),t}function Gdt(e){if(!e.startsWith("http"))return e;const t=jdt(e);return m$(t)}function m$(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function jdt(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function y$(e,t=!0,r){const n=r||new Set;if(e){if(px(e))n.add(e);else if(px(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)y$(e[i],t,n)}}return r===void 0?Array.from(n):[]}function px(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const eb=()=>{};class O3{static isSupported(){return typeof Worker<"u"&&I3||typeof Q2!==void 0}constructor(t){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:r,source:n,url:i}=t;va(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=eb,this.onError=o=>console.log(o),this.worker=I3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=eb,this.onError=eb,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||y$(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=Udt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new Q2(n,{eval:!1})}else if(this.source)t=new Q2(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class Wdt{static isSupported(){return O3.isSupported()}constructor(t){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new Vdt(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new O3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return zdt?this.maxMobileConcurrency:this.maxConcurrency}}const Hdt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ra{static isSupported(){return O3.isSupported()}static getWorkerFarm(t={}){return ra._workerFarm=ra._workerFarm||new ra({}),ra._workerFarm.setProps(t),ra._workerFarm}constructor(t){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...Hdt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new Wdt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(ra,"_workerFarm",void 0);const Xdt="latest";function Ydt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=Xdt);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return va(i),i}function qdt(e,t=$dt){va(e,"no worker provided");const r=e.version;return!(!t||!r)}function Zdt(e,t){return!ra.isSupported()||!I3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function Kdt(e,t,r,n,i){const o=e.id,a=Ydt(e,r),l=ra.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",Jdt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function Jdt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function _$(e){return e&&typeof e=="object"&&e.isBuffer}function Qdt(e){return _$(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function b$(e){if(_$(e))return Qdt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function t0t(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function e0t(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function r0t(e){const t=[];for await(const r of e)t.push(r);return e0t(...t)}function vx(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class gx{constructor(t,r){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=vx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(vx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class _y{constructor(t){E(this,"id",void 0),E(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof gx?this.stats[r]=t:this.stats[r]=new gx(r,n)),this.stats[r]}}const n0t="Queued Requests",i0t="Active Requests",o0t="Cancelled Requests",a0t="Queued Requests Ever",s0t="Active Requests Ever",l0t={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class u0t{constructor(t={}){E(this,"props",void 0),E(this,"stats",void 0),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"deferredUpdate",null),this.props={...l0t,...t},this.stats=new _y({id:this.props.id}),this.stats.get(n0t),this.stats.get(i0t),this.stats.get(o0t),this.stats.get(a0t),this.stats.get(s0t)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let c0t="";const mx={};function f0t(e){for(const t in mx)if(e.startsWith(t)){const r=mx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(c0t).concat(e)),e}function h0t(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const d0t=e=>typeof e=="boolean",Ad=e=>typeof e=="function",z0=e=>e!==null&&typeof e=="object",yx=e=>z0(e)&&e.constructor==={}.constructor,p0t=e=>e&&typeof e[Symbol.iterator]=="function",v0t=e=>e&&typeof e[Symbol.asyncIterator]=="function",wf=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Sf=e=>typeof Blob<"u"&&e instanceof Blob,g0t=e=>e&&typeof e=="object"&&e.isBuffer,m0t=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||z0(e)&&Ad(e.tee)&&Ad(e.cancel)&&Ad(e.getReader),y0t=e=>z0(e)&&Ad(e.read)&&Ad(e.pipe)&&d0t(e.readable),w$=e=>m0t(e)||y0t(e),_0t=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,b0t=/^([-\w.]+\/[-\w.+]+)/;function w0t(e){const t=b0t.exec(e);return t?t[1]:e}function _x(e){const t=_0t.exec(e);return t?t[1]:""}const S0t=/\?.*/;function by(e){if(wf(e)){const t=rb(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:w0t(r)||_x(t)}}return Sf(e)?{url:rb(e.name||""),type:e.type||""}:typeof e=="string"?{url:rb(e),type:_x(e)}:{url:"",type:""}}function T0t(e){return wf(e)?e.headers["content-length"]||-1:Sf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function rb(e){return e.replace(S0t,"")}async function S$(e){if(wf(e))return e;const t={},r=T0t(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=by(e);i&&(t["content-type"]=i);const o=await A0t(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function P0t(e){if(!e.ok){const t=await E0t(e);throw new Error(t)}}async function E0t(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function A0t(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=C0t(r);return"data:base64,".concat(n)}return null}function C0t(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function bx(e,t){if(typeof e=="string"){e=f0t(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await S$(e)}function T$(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Aa(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||T$()}const qg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},dv=qg.window||qg.self||qg.global,gh=qg.process||{},P$=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Aa();const nb=globalThis;function E$(e){if(!e&&!Aa())return"Node";if(T$(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":nb.chrome?"Chrome":nb.safari?"Safari":nb.mozInnerScreenX?"Firefox":"Unknown"}function M0t(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class k0t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",{}),this.storage=M0t(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function x0t(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function L0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function ib(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let t1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(t1||(t1={}));function Sx(e){return typeof e=="string"?t1[e.toUpperCase()]||t1.WHITE:e}function I0t(e,t,r){return!Aa&&typeof e=="string"&&(t&&(t=Sx(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Sx(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function O0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function e1(e,t){if(!e)throw new Error(t||"Assertion failed")}function Hu(){let e;if(Aa&&"performance"in dv){var t,r;e=dv==null||(t=dv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in gh){var n;const i=gh==null||(n=gh.hrtime)===null||n===void 0?void 0:n.call(gh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Xu={debug:Aa&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},R0t={enabled:!0,level:0};function Wn(){}const Tx={},Px={once:!0};class V0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",P$),E(this,"_startTs",Hu()),E(this,"_deltaTs",Hu()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new k0t("__probe-".concat(this.id,"__"),R0t),this.userData={},this.timeStamp("".concat(this.id," started")),O0t(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Hu()-this._startTs).toPrecision(10))}getDelta(){return Number((Hu()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){e1(t,r)}warn(t){return this._getLogFunction(0,t,Xu.warn,arguments,Px)}error(t){return this._getLogFunction(0,t,Xu.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Xu.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Xu.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Xu.debug||Xu.info,arguments,Px)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Wn,n&&[n],{tag:B0t(r)}):Wn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?Aa?F0t({image:i,message:o,scale:a}):N0t({image:i,message:o,scale:a}):Wn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Wn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Ex({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Wn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=A$(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Ex({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,e1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Hu();const a=o.tag||o.message;if(o.once)if(!Tx[a])Tx[a]=Hu();else return Wn;return r=D0t(this.id,o.message,o),n.bind(console,r,...o.args)}return Wn}}E(V0,"VERSION",P$);function A$(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return e1(Number.isFinite(t)&&t>=0),t}function Ex(e){const{logLevel:t,message:r}=e;e.logLevel=A$(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return e1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function D0t(e,t,r){if(typeof t=="string"){const n=r.time?L0t(x0t(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=I0t(t,r.color,r.background)}return t}function N0t(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Wn}function F0t(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=ib(o,r,n);console.log(...a)},o.src=t,Wn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...ib(t,r,n)),Wn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...ib(o,r,n)),o.src=t.toDataURL(),Wn}return Wn}function B0t(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Ax=new V0({id:"loaders.gl"});class $0t{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class z0t{constructor(){E(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const C$={fetch:null,mimeType:void 0,nothrow:!1,log:new z0t,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:GE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},V0t={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function M$(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const k$=()=>{const e=M$();return e.globalOptions=e.globalOptions||{...C$},e.globalOptions};function U0t(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],G0t(e,r),W0t(t,e,n)}function x$(e,t){const r=k$(),n=e||r;return typeof n.fetch=="function"?n.fetch:z0(n.fetch)?i=>bx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:bx}function G0t(e,t){Cx(e,null,C$,V0t,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Cx(n,r.id,i,o,t)}}function Cx(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&z0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)Ax.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=j0t(s,i);Ax.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function j0t(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function W0t(e,t,r){const i={...e.options||{}};return H0t(i,r),i.log===null&&(i.log=new $0t),Mx(i,k$()),Mx(i,t),i}function Mx(e,t){for(const r in t)if(r in t){const n=t[r];yx(n)&&yx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function H0t(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function jE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function WE(e){var t,r;Qm(e,"null loader"),Qm(jE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const L$=()=>{const e=M$();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function X0t(e){const t=L$();e=Array.isArray(e)?e:[e];for(const r of e){const n=WE(r);t.find(i=>n===i)||t.unshift(n)}}function Y0t(){return L$()}const q0t=new V0({id:"loaders.gl"}),Z0t=/\.([^.]+)$/;async function K0t(e,t=[],r,n){if(!I$(e))return null;let i=kx(e,t,{...r,nothrow:!0},n);if(i)return i;if(Sf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=kx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(O$(e));return i}function kx(e,t=[],r,n){if(!I$(e))return null;if(t&&!Array.isArray(t))return WE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...Y0t()),Q0t(i);const o=J0t(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(O$(e));return o}function J0t(e,t,r,n){const{url:i,type:o}=by(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=ob(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||tpt(t,a),l=l||(s?"matched url ".concat(a):""),s=s||ob(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||rpt(t,e),l=l||(s?"matched initial data ".concat(R$(e)):""),s=s||ob(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;q0t.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function I$(e){return!(e instanceof Response&&e.status===204)}function O$(e){const{url:t,type:r}=by(e);let n="No valid loader found (";n+=t?"".concat(h0t(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?R$(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function Q0t(e){for(const t of e)WE(t)}function tpt(e,t){const r=t&&Z0t.exec(t),n=r&&r[1];return n?ept(e,n):null}function ept(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function ob(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function rpt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(npt(t,r))return r}else if(ArrayBuffer.isView(t)){if(xx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&xx(t,0,r))return r;return null}function npt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function xx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>ipt(e,t,r,i))}function ipt(e,t,r,n){if(n instanceof ArrayBuffer)return t0t(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=R3(e,t,n.length);return n===i;default:return!1}}function R$(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?R3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?R3(e,0,t):""}function R3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const opt=256*1024;function*apt(e,t){const r=(t==null?void 0:t.chunkSize)||opt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const spt=256*1024;function*lpt(e,t={}){const{chunkSize:r=spt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const upt=1024*1024;async function*cpt(e,t){const r=(t==null?void 0:t.chunkSize)||upt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Lx(e,t){return GE?fpt(e,t):hpt(e)}async function*fpt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield b$(a)}}catch{r.releaseLock()}}async function*hpt(e,t){for await(const r of e)yield b$(r)}function dpt(e,t){if(typeof e=="string")return apt(e,t);if(e instanceof ArrayBuffer)return lpt(e,t);if(Sf(e))return cpt(e,t);if(w$(e))return Lx(e,t);if(wf(e))return Lx(e.body,t);throw new Error("makeIterator")}const D$="Cannot convert supplied data type";function ppt(e,t,r){if(t.text&&typeof e=="string")return e;if(g0t(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(D$)}async function vpt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return ppt(e,t);if(Sf(e)&&(e=await S$(e)),wf(e)){const i=e;return await P0t(i),t.binary?await i.arrayBuffer():await i.text()}if(w$(e)&&(e=dpt(e,r)),p0t(e)||v0t(e))return r0t(e);throw new Error(D$)}function gpt(e,t,r=null){if(r)return r;const n={fetch:x$(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function mpt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function HE(e,t,r,n){va(!n||typeof n=="object"),t&&!Array.isArray(t)&&!jE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=by(e),a=mpt(t,n),s=await K0t(e,a,r);return s?(r=U0t(r,s,a,i),n=gpt({url:i,parse:HE,loaders:a},r,n),await ypt(s,e,r,n)):null}async function ypt(e,t,r,n){if(qdt(e),wf(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await vpt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(Zdt(e,r))return await Kdt(e,t,r,n,HE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw va(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function r1(e,t,r,n){!Array.isArray(t)&&!jE(t)&&(r=t,t=void 0);const i=x$(r);let o=e;return typeof e=="string"&&(o=await i(e)),Sf(e)&&(o=await i(e)),await HE(o,t,r)}const _pt="3.2.7",{_parseImageNode:bpt}=globalThis,D3=typeof Image<"u",N3=typeof ImageBitmap<"u",wpt=Boolean(bpt),F3=GE?!0:wpt;function Spt(e){switch(e){case"auto":return N3||D3||F3;case"imagebitmap":return N3;case"image":return D3;case"data":return F3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function Tpt(){if(N3)return"imagebitmap";if(D3)return"image";if(F3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Ppt(e){const t=Apt(e);if(!t)throw new Error("Not an image");return t}function Ept(e){switch(Ppt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Apt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const Cpt=/^data:image\/svg\+xml/,Mpt=/\.svg((\?|#).*)?$/;function XE(e){return e&&(Cpt.test(e)||Mpt.test(e))}function kpt(e,t){if(XE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return N$(e,t)}function N$(e,t){if(XE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function F$(e,t,r){const n=kpt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await xpt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function xpt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const Lpt={};let Ix=!0;async function Ipt(e,t,r){let n;XE(r)?n=await F$(e,t,r):n=N$(e,r);const i=t&&t.imagebitmap;return await Opt(n,i)}async function Opt(e,t=null){if((Rpt(t)||!Ix)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),Ix=!1}return await createImageBitmap(e)}function Rpt(e){for(const t in e||Lpt)return!1;return!0}const po=!1,Cd=!0;function B$(e){const t=U0(e);return Dpt(t)||Bpt(t)||Npt(t)||Fpt(t)}function Dpt(e){const t=U0(e);return t.byteLength>=24&&t.getUint32(0,po)===2303741511?{mimeType:"image/png",width:t.getUint32(16,po),height:t.getUint32(20,po)}:null}function Npt(e){const t=U0(e);return t.byteLength>=10&&t.getUint32(0,po)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Cd),height:t.getUint16(8,Cd)}:null}function Fpt(e){const t=U0(e);return t.byteLength>=14&&t.getUint16(0,po)===16973&&t.getUint32(2,Cd)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Cd),height:t.getUint32(22,Cd)}:null}function Bpt(e){const t=U0(e);if(!(t.byteLength>=3&&t.getUint16(0,po)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=$pt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,po);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,po),width:t.getUint16(o+7,po)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,po)}return null}function $pt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function U0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function zpt(e,t){const{mimeType:r}=B$(e)||{},n=globalThis._parseImageNode;return Qm(n),await n(e,r)}async function Vpt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=Upt(i);let s;switch(a){case"imagebitmap":s=await Ipt(e,t,o);break;case"image":s=await F$(e,t,o);break;case"data":s=await zpt(e);break;default:Qm(!1)}return i==="data"&&(s=Ept(s)),s}function Upt(e){switch(e){case"auto":case"data":return Tpt();default:return Spt(e),e}}const Gpt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],jpt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Wpt={image:{type:"auto",decode:!0}},$$={id:"image",module:"images",name:"Images",version:_pt,mimeTypes:jpt,extensions:Gpt,parse:Vpt,tests:[e=>Boolean(B$(new DataView(e)))],options:Wpt},Wt=new V0({id:"deck"});let B3={};function Hpt(e){B3=e}function Lr(e,t,r,n){Wt.level>0&&B3[e]&&B3[e].call(null,t,r,n)}function Xpt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Ypt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Xpt,parseTextSync:JSON.parse},Md="8.8.8",Zg=globalThis.deck&&globalThis.deck.VERSION;if(Zg&&Zg!==Md)throw new Error("deck.gl - multiple versions detected: ".concat(Zg," vs ").concat(Md));Zg||(Wt.log(1,"deck.gl ".concat(Md))(),globalThis.deck={...globalThis.deck,VERSION:Md,version:Md,log:Wt,_registerLoggers:Hpt},X0t([Ypt,[$$,{imagebitmap:{premultiplyAlpha:"none"}}]]));const qpt=globalThis.deck,Lt=new V0({id:"luma.gl"});function Hr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Zpt="Invalid WebGLRenderingContext",Kpt="Requires WebGL2";function wy(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Qt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Jpt(e){return Qt(e)?e:null}function Sy(e){return Hr(wy(e),Zpt),e}function Or(e){return Hr(Qt(e),Kpt),e}const Qh={};function Qpt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function tvt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function evt(e,t){Qh[e]=!0,t!==void 0&&Qpt(t)}function rvt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(Qh[n]=!0);while(n!==0);for(n in Qh)if(Qh[n])return delete Qh[n],parseInt(n,10);return 0}}const G0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};G0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};G0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const gu=function(t){const r=this;this.gl=t,rvt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{tvt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};gu.prototype.VERTEX_ARRAY_BINDING_OES=34229;gu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new G0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};gu.prototype.createVertexArrayOES=function(){const t=new G0(this);return this.vertexArrayObjects.push(t),t};gu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};gu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof G0&&t.hasBeenBound&&t.ext===this)};gu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){evt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function nvt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new gu(this)),this.__OESVertexArrayObject))}}const Ox="OES_element_index",Rx="WEBGL_draw_buffers",ivt="EXT_disjoint_timer_query",ovt="EXT_disjoint_timer_query_webgl2",avt="EXT_texture_filter_anisotropic",Dx="WEBGL_debug_renderer_info",svt=35723,lvt=4352,uvt=36795,cvt=34047,fvt=37445,hvt=37446,Re=e=>Qt(e)?void 0:0,dvt={[3074]:e=>Qt(e)?void 0:36064,[svt]:e=>Qt(e)?void 0:lvt,[35977]:Re,[32937]:Re,[uvt]:(e,t)=>{const r=Qt(e)?e.getExtension(ovt):e.getExtension(ivt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[fvt]:(e,t)=>{const r=e.getExtension(Dx);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[hvt]:(e,t)=>{const r=e.getExtension(Dx);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[cvt]:(e,t)=>{const r=e.luma.extensions[avt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Re,[35071]:Re,[37447]:Re,[36063]:(e,t)=>{if(!Qt(e)){const r=e.getExtension(Rx);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Re,[35374]:Re,[35377]:Re,[34852]:e=>{if(!Qt(e)){const t=e.getExtension(Rx);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Ox)?2147483647:65535,[33001]:e=>e.getExtension(Ox)?16777216:65535,[33e3]:e=>16777216,[37157]:Re,[35373]:Re,[35657]:Re,[36183]:Re,[37137]:Re,[34045]:Re,[35978]:Re,[35979]:Re,[35968]:Re,[35376]:Re,[35375]:Re,[35659]:Re,[37154]:Re,[35371]:Re,[35658]:Re,[35076]:Re,[35077]:Re,[35380]:Re};function pvt(e,t,r){const n=dvt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const vvt="OES_vertex_array_object",z$="ANGLE_instanced_arrays",gvt="WEBGL_draw_buffers",mvt="EXT_disjoint_timer_query",yvt="EXT_texture_filter_anisotropic",_vt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function bvt(e,t){return{webgl2:Qt(e),ext:e.getExtension(t)}}const V$={[vvt]:{meta:{suffix:"OES"},createVertexArray:()=>{Hr(!1,_vt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[z$]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){Hr(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[gvt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Hr(!1)}},[mvt]:{meta:{suffix:"EXT"},createQuery:()=>{Hr(!1)},deleteQuery:()=>{Hr(!1)},beginQuery:()=>{Hr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},ab={readBuffer:(e,t,r)=>{Qt(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=bvt(e,z$);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Qt(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Qt(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[yvt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:pvt,hint(e,t,r,n){return t(r,n)}};function wvt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(nvt(e),Svt(e),Pvt(e,V$),Tvt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=wvt;function Svt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function Tvt(e,t){let{target:r,target2:n}=t;Object.keys(ab).forEach(i=>{if(typeof ab[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=ab[i].bind(null,e,o);r[i]=a,n[i]=a}})}function Pvt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&Evt(e,{extension:r,target:e.luma,target2:e})}function Evt(e,t){let{extension:r,target:n,target2:i}=t;const o=V$[r];Hr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const YE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Va=(e,t,r)=>t?e.enable(r):e.disable(r),Nx=(e,t,r)=>e.hint(r,t),yn=(e,t,r)=>e.pixelStorei(r,t),Avt=(e,t)=>{const r=Qt(e)?36009:36160;return e.bindFramebuffer(r,t)},Cvt=(e,t)=>e.bindFramebuffer(36008,t);function mh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Mvt={[3042]:Va,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Va,[2885]:(e,t)=>e.cullFace(t),[2929]:Va,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Va,[35723]:Nx,[36006]:Avt,[2886]:(e,t)=>e.frontFace(t),[33170]:Nx,[2849]:(e,t)=>e.lineWidth(t),[32823]:Va,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Va,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Va,[3088]:(e,t)=>e.scissor(...t),[2960]:Va,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:yn,[3317]:yn,[37440]:yn,[37441]:yn,[37443]:yn,[3330]:yn,[3332]:yn,[3331]:yn,[36010]:Cvt,[3314]:yn,[32878]:yn,[3316]:yn,[3315]:yn,[32877]:yn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=mh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=mh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=mh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=mh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=mh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function je(e,t,r){return t[e]!==void 0?t[e]:r[e]}const kvt={blendEquation:(e,t,r)=>e.blendEquationSeparate(je(32777,t,r),je(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(je(32969,t,r),je(32968,t,r),je(32971,t,r),je(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(je(32824,t,r),je(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(je(32938,t,r),je(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,je(2962,t,r),je(2967,t,r),je(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,je(34816,t,r),je(36003,t,r),je(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,je(2964,t,r),je(2965,t,r),je(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,je(34817,t,r),je(34818,t,r),je(34819,t,r))},Fx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},Ki=(e,t)=>e.isEnabled(t),Bx={[3042]:Ki,[2884]:Ki,[2929]:Ki,[3024]:Ki,[32823]:Ki,[32926]:Ki,[32928]:Ki,[3089]:Ki,[2960]:Ki,[35977]:Ki};function U$(e){for(const t in e)return!1;return!0}function xvt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function $x(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Lvt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function Ivt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class Ovt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Dvt(t):Object.assign({},YE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Hr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ga(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){Hr(o!==void 0);const a=t[o],s=this.cache[o];xvt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function G$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(Hr(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new Ovt(e,{copyState:n}),Ivt(e);for(const o in Fx){const a=Fx[o];Lvt(e,o,a)}$x(e,"getParameter"),$x(e,"isEnabled")}return e.state.enable=r,e}function Rvt(e){e.state||G$(e,{copyState:!1}),e.state.push()}function zx(e){Hr(e.state),e.state.pop()}function ga(e,t){if(Hr(wy(e),"setParameters requires a WebGL context"),U$(t))return;const r={};for(const i in t){const o=Number(i),a=Mvt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=kvt[i];o(e,t,n)}}function Dvt(e,t){if(t=t||YE,typeof t=="number"){const i=t,o=Bx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=Bx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Nvt(e){ga(e,YE)}function Qn(e,t,r){if(U$(t))return r(e);const{nocatch:n=!0}=t;Rvt(e),ga(e,t);let i;if(n)i=r(e),zx(e);else try{i=r(e)}finally{zx(e)}return i}function Zc(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function sb(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Zc(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Bvt(t,n,i,o,r)}function Fvt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Bvt(e,t,r,n,i){const o=Vx(e[0],t,r);let a=Ux(e[1],t,n,i),s=Vx(e[0]+1,t,r);const l=s===r-1?s:s-1;s=Ux(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function Vx(e,t,r){return Math.min(Math.round(e*t),r-1)}function Ux(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const qE=Aa(),$vt=qE&&typeof document<"u",j$={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function W$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hr(qE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},j$,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=Gvt({canvas:o,width:t,height:r,onError:n});return i=Uvt(a,e),i?(i=ZE(i,e),jvt(i),i):null}function ZE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Wvt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},j$,t);const{manageState:r,debug:n}=t;return r&&G$(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Lt.log(1,...o)()}}),qE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Lt.level=Math.max(Lt.level,1)):Lt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function zvt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function Vvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=Fvt(t.useDevicePixels);Hvt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function Uvt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function Gvt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?($vt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function jvt(e){const t=Qt(e)?"WebGL2":"WebGL1",r=zvt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Lt.info(1,"".concat(t).concat(i," context ").concat(n))()}function Wvt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function Hvt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Lt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Lt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const kd="8.5.16",Xvt="set luma.log.level=1 (or higher) to trace rendering";class H${constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new _y({id:t})),this.stats.get(t)}}const Il=new H$;if(globalThis.luma&&globalThis.luma.VERSION!==kd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(kd));globalThis.luma||(Aa()&&Lt.log(1,"luma.gl ".concat(kd," - ").concat(Xvt))(),globalThis.luma=globalThis.luma||{VERSION:kd,version:kd,log:Lt,stats:Il,globals:{modules:{},nodeIO:{}}});function Yvt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function qvt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function gt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function lb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return gt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function ws(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const ub={};function Ls(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";ub[e]=ub[e]||1;const t=ub[e]++;return"".concat(e,"-").concat(t)}function Gx(e){return gt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function Kc(e){let t=!0;for(const r in e){t=!1;break}return t}function X$(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Lt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Yu="Resource subclass must define virtual methods";class Ca{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sy(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Ls(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=lb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Qt(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?ws(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=ws(this.gl,a[f]))}}return a}setParameter(t,r){t=lb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=lb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return X$(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Yu)}_deleteHandle(){throw new Error(Yu)}_bindHandle(t){throw new Error(Yu)}_getOptsFromHandle(){throw new Error(Yu)}_getParameter(t,r){throw new Error(Yu)}_setParameter(t,r){throw new Error(Yu)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new H$}_addStats(){const t=this[Symbol.toStringTag],r=Il.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Il.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Il.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Il.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Zvt="Failed to deduce GL constant from typed array";function $3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Zvt)}}function l0(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Kvt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Jvt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function z3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Lt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const Qvt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},tgt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Sn{static getBytesPerElement(t){return l0(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return gt(t.size),l0(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Sn(Qvt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Sn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Sn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=z3("Accessor",t,tgt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const jx=10,Y$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},egt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Y$},rgt={removedProps:Y$};class Pe extends Ca{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Sn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Sn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=z3("Buffer",t,egt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=z3("Buffer",t,rgt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Sn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;gt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Or(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Or(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Or(this.gl);const o=l0(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,gt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(gt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(jx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;gt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,jx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=$3(t);return gt(o),this.setAccessor(new Sn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;gt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=l0(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Sn(this.accessor,{type:$3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Lt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Lt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Lt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Lt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Sn(this.accessor,t),this}}const KE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},q$={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},Z$={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function ngt(e,t){const r=KE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Qt(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function igt(e,t){const r=KE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const ogt=[9729,9728],Wx=globalThis.WebGLBuffer||function(){};class ru extends Ca{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&ngt(t,n),o=o&&(!i||igt(t,n))),o}constructor(t,r){const{id:n=Ls("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:r,width:f,height:h,depth:m,format:o,type:p,dataFormat:d,border:a,mipmaps:g,parameters:u,compressed:v}),g&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Qn(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let g=null;({data:u,dataType:g}=this._getDataType({data:u,compressed:p}));let m,y=0;if(Qn(this.gl,l,()=>{switch(g){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":m=Or(v),m.bindBuffer(35052,u.handle||u),m.texImage2D(r,i,o,f,h,a,d,c,s),m.bindBuffer(35052,null);break;case"browser-object":Qt(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[_,w]of u.entries())v.compressedTexImage2D(r,_,w.format,w.width,w.height,a,w.data),y+=w.levelSize;break;default:gt(!1,"Unknown image data type")}}),g==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const _=q$[this.dataFormat]||4,w=Z$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*_*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:g={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),gt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const m=i;i=m.data,s=m.shape[0],l=m.shape[1]}i instanceof Pe&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Qn(this.gl,g,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof Wx){const m=Or(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(r,u,o,a,s,l,h,f,p),m.bindBuffer(35052,null)}else Qt(this.gl)?Or(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Lt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Pe?{data:r.handle,dataType:"buffer"}:r instanceof Wx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=KE[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},gt(i,"Could not deduced texture size"),gt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),gt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:gt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qt(this.gl)||!this.width||!this.height?!1:!Gx(this.width)||!Gx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:ogt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let agt="";function sgt(e,t){return gt(typeof e=="string"),e=agt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class vn extends ru{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return ru.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sy(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:sgt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const V3=[34069,34070,34071,34072,34073,34074];class K$ extends ru{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sy(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(V3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),V3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Lt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}K$.FACES=V3;class lgt extends ru{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Qn(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Pe&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=q$[this.dataFormat]||4,p=Z$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const pl="EXT_color_buffer_float",Hx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:pl,bpp:2},[33327]:{gl2:pl,bpp:4},[34842]:{gl2:pl,bpp:8},[33326]:{gl2:pl,bpp:4},[33328]:{gl2:pl,bpp:8},[34836]:{gl2:pl,bpp:16},[35898]:{gl2:pl,bpp:4}};function ugt(e,t,r){const n=r[t];if(!n)return!1;const i=Qt(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class bc extends Ca{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||ugt(t,r,Hx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return gt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Hx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const cgt=256,fgt=1024,hgt=16384,Xx=6144,Yx=6145,qx=6146,Zx=34041,J$="clear: bad arguments";function JE(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=hgt,r!==!0&&(o.clearColor=r)),n&&(a|=cgt,n!==!0&&(o.clearDepth=n)),i&&(a|=fgt,n!==!0&&(o.clearStencil=n)),gt(a!==0,J$),Qn(e,o,()=>{e.clear(a)})}function dgt(e){let{framebuffer:t=null,buffer:r=Xx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(e),Qn(e,{framebuffer:t},()=>{switch(r){case Xx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case Yx:e.clearBufferfv(Yx,0,[i]);break;case qx:e.clearBufferiv(qx,0,[i]);break;case Zx:const[o,a]=i;e.clearBufferfi(Zx,0,o,a);break;default:gt(!1,J$)}})}function pgt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return gt(!1),0}}function Ty(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=Q$(e);gt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),gt(p[o]),u=u||p[o].type,a=ggt(a,u,i,s,l),u=u||$3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function Kx(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ty(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Jvt({data:n,width:i,height:o}));Kvt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function vgt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=Q$(e);gt(h);const{gl:p,handle:v}=h,g=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const m=p.bindFramebuffer(36160,v);gt(t);let y=null;if(t instanceof ru&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!g)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Or(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,m||null),d&&h.delete(),y}function Q$(e){return e instanceof nr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Egt(e),deleteFramebuffer:!0}}function ggt(e,t,r,n,i){if(e)return e;t=t||5121;const o=l0(t,{clamped:!1}),a=pgt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function mgt(e){const t=new vn(e,{format:6408,type:5126,dataFormat:6408}),r=new nr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const tz={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[mgt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},ygt=2;function _gt(e,t){return QE(e,t)}function QE(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>ez(e,r))}function bgt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in tz)e.luma.caps[t]===void 0&&(e.luma.caps[t]=ez(e,t));return e.luma.caps}function ez(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=wgt(e,t)),e.luma.caps[t]||Lt.log(ygt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function wgt(e,t){const r=tz[t];gt(r,t);let n;const i=Qt(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:gt(!1);return n}const Jx="Multiple render targets not supported";class nr extends Ca{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new nr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Or(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Or(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(gt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return gt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Lt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){gt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof bc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(Tgt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&JE(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{dgt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Lt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Lt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Lt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Lt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Lt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Lt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Or(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=ws(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?ws(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?ws(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(Kx(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Lt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=Kx(this,{targetMaxHeight:100});return Lt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new vn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new bc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new bc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&gt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof bc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Or(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=Sgt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:gt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Jpt(this.gl);r?r.readBuffer(t):gt(t===36064||t===1029,Jx),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Or(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):gt(t.length===1&&(t[0]===36064||t[0]===1029),Jx)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=bgt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function Sgt(e){return e<34069?e+34069:e}function Tgt(e){return(nr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const Pgt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nr.ATTACHMENT_PARAMETERS=Pgt;function rz(e,t){gt(e instanceof vn||e instanceof K$||e instanceof lgt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function Egt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new nr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function Kg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const Agt=35632,Cgt=35633;function Mgt(e){switch(e){case Agt:return"fragment";case Cgt:return"vertex";default:return"unknown type"}}function kgt(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||Kg(t)||"(unnamed)",l="".concat(Mgt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=xgt(t);return{shaderName:l,errors:Qx(o,u),warnings:Qx(a,u)}}function Qx(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=nz("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function xgt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return nz(s,i-l)+r+o})}function nz(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function iz(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const Lgt="Shader: GLSL source code must be a JavaScript string";class u0 extends Ca{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return gt(!1),"unknown"}}constructor(t,r){Sy(t),gt(typeof r.source=="string",Lgt);const n=Kg(r.source,null)||r.id||Ls("unnamed ".concat(u0.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=Kg(r,null);n&&(this.id=Ls(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(u0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Kg(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=kgt(n,this.source,this.shaderType,this.id);throw Lt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Lt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class cb extends u0{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class fb extends u0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Igt={[5126]:Fe.bind(null,"uniform1fv",_n,1,Cr),[35664]:Fe.bind(null,"uniform2fv",_n,2,Cr),[35665]:Fe.bind(null,"uniform3fv",_n,3,Cr),[35666]:Fe.bind(null,"uniform4fv",_n,4,Cr),[5124]:Fe.bind(null,"uniform1iv",Ua,1,Cr),[35667]:Fe.bind(null,"uniform2iv",Ua,2,Cr),[35668]:Fe.bind(null,"uniform3iv",Ua,3,Cr),[35669]:Fe.bind(null,"uniform4iv",Ua,4,Cr),[35670]:Fe.bind(null,"uniform1iv",Ua,1,Cr),[35671]:Fe.bind(null,"uniform2iv",Ua,2,Cr),[35672]:Fe.bind(null,"uniform3iv",Ua,3,Cr),[35673]:Fe.bind(null,"uniform4iv",Ua,4,Cr),[35674]:Fe.bind(null,"uniformMatrix2fv",_n,4,Go),[35675]:Fe.bind(null,"uniformMatrix3fv",_n,9,Go),[35676]:Fe.bind(null,"uniformMatrix4fv",_n,16,Go),[35678]:vr,[35680]:vr,[5125]:Fe.bind(null,"uniform1uiv",pv,1,Cr),[36294]:Fe.bind(null,"uniform2uiv",pv,2,Cr),[36295]:Fe.bind(null,"uniform3uiv",pv,3,Cr),[36296]:Fe.bind(null,"uniform4uiv",pv,4,Cr),[35685]:Fe.bind(null,"uniformMatrix2x3fv",_n,6,Go),[35686]:Fe.bind(null,"uniformMatrix2x4fv",_n,8,Go),[35687]:Fe.bind(null,"uniformMatrix3x2fv",_n,6,Go),[35688]:Fe.bind(null,"uniformMatrix3x4fv",_n,12,Go),[35689]:Fe.bind(null,"uniformMatrix4x2fv",_n,8,Go),[35690]:Fe.bind(null,"uniformMatrix4x3fv",_n,12,Go),[35678]:vr,[35680]:vr,[35679]:vr,[35682]:vr,[36289]:vr,[36292]:vr,[36293]:vr,[36298]:vr,[36299]:vr,[36300]:vr,[36303]:vr,[36306]:vr,[36307]:vr,[36308]:vr,[36311]:vr},Ogt={},Rgt={},Dgt={},tL=[0];function tA(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(tL[0]=e,e=tL);const i=e.length;if(i%t&&Lt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function _n(e,t){return tA(e,t,Float32Array,Ogt)}function Ua(e,t){return tA(e,t,Int32Array,Rgt)}function pv(e,t){return tA(e,t,Uint32Array,Dgt)}function eL(e,t,r){const n=Igt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function Ngt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function Fgt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!Bgt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function Bgt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?zgt(e):isFinite(e)||e===!0||e===!1||e instanceof ru||e instanceof bc?!0:e instanceof nr?Boolean(e.texture):!1}function $gt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function zgt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function vr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Fe(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{gt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Cr(e,t,r,n){e[t](r,n)}function Go(e,t,r,n){e[t](r,!1,n)}const Vgt=5120,Ugt=5121,Ggt=5122,jgt=5123,rL=0,vv=1,Wgt=2,Hgt=3,gv=4,Xgt=5,Ygt=6,ir=5126,qgt=35664,Zgt=35665,Kgt=35666,yh=5124,Jgt=35667,Qgt=35668,tmt=35669,_h=5125,emt=36294,rmt=36295,nmt=36296,imt=35670,omt=35671,amt=35672,smt=35673,lmt=35674,umt=35675,cmt=35676,fmt=35685,hmt=35686,dmt=35687,pmt=35688,vmt=35689,gmt=35690,U3={[ir]:[ir,1,"float"],[qgt]:[ir,2,"vec2"],[Zgt]:[ir,3,"vec3"],[Kgt]:[ir,4,"vec4"],[yh]:[yh,1,"int"],[Jgt]:[yh,2,"ivec2"],[Qgt]:[yh,3,"ivec3"],[tmt]:[yh,4,"ivec4"],[_h]:[_h,1,"uint"],[emt]:[_h,2,"uvec2"],[rmt]:[_h,3,"uvec3"],[nmt]:[_h,4,"uvec4"],[imt]:[ir,1,"bool"],[omt]:[ir,2,"bvec2"],[amt]:[ir,3,"bvec3"],[smt]:[ir,4,"bvec4"],[lmt]:[ir,8,"mat2"],[fmt]:[ir,8,"mat2x3"],[hmt]:[ir,8,"mat2x4"],[umt]:[ir,12,"mat3"],[dmt]:[ir,12,"mat3x2"],[pmt]:[ir,12,"mat3x4"],[cmt]:[ir,16,"mat4"],[vmt]:[ir,16,"mat4x2"],[gmt]:[ir,16,"mat4x3"]};function mmt(e){switch(e){case rL:return rL;case vv:return vv;case Hgt:return vv;case Wgt:return vv;case gv:return gv;case Xgt:return gv;case Ygt:return gv;default:return gt(!1),0}}function nL(e){const t=U3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function oz(e,t){switch(e){case Vgt:case Ugt:case Ggt:case jgt:e=ir;break}for(const r in U3){const[n,i,o]=U3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class ymt{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Qt(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=nL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new Sn(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=nL(n),s=new Sn({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const iL=4,_mt=35981,bmt=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class az extends Ca{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",bmt),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=_mt}=t;return this.hash=r||"",this.vs=typeof n=="string"?new cb(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new fb(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,gt(this.vs instanceof cb),gt(this.fs instanceof fb),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Or(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new ymt(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:g,samplers:m}=t;if((g||m)&&(Lt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Lt.priority>=r){const y=p?p.id:"default",_="mode=".concat(ws(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(ws(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Lt.log(r,_)()}return gt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const y=mmt(n);d.begin(y)}this._bindTextures(),Qn(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Qt(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt.priority>=2&&Fgt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof nr&&(o=o.texture),o instanceof ru)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&$gt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new cb({handle:i});break;case 35632:n.fs=new fb({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Ls(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Lt.time(iL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Lt.timeEnd(iL,"linkProgram for ".concat(this._getName()))(),t.debug||Lt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=Ngt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=eL(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=eL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const wmt=34918,Smt=34919,Tmt=35007,Pmt=36795,Emt=35976,Amt=35887,Cmt=36202;class n1 extends Ca{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Qt(t),i=QE(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:gt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Tmt)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?Cmt:Amt)}beginTransformFeedbackQuery(){return this.begin(Emt)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,Smt);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(Pmt)}getResult(){return this.gl2.getQueryParameter(this.handle,wmt)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return n1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class sz extends Ca{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Kc(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Lt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Pe?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let mv=null;function Mmt(e){return(!mv||mv.byteLength<e)&&(mv=new ArrayBuffer(e)),mv}function kmt(e,t){const r=Mmt(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function xmt(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const Lmt="elements must be GL.ELEMENT_ARRAY_BUFFER";class wn extends Ca{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qt(t)||E$()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new wn(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return wn.MAX_ATTRIBUTES=wn.MAX_ATTRIBUTES||t.getParameter(34921),wn.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:wn._setConstantFloatArray(t,r,n);break;case Int32Array:wn._setConstantIntArray(t,r,n);break;case Uint32Array:wn._setConstantUintArray(t,r,n);break;default:gt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return wn.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return gt(!t||t.target===34963,Lmt),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(gt(Qt(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!wn.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Pe(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=kmt(r.constructor,o);xmt({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:gt(!1)}}static _setConstantIntArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:gt(!1)}}static _setConstantUintArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:gt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return gt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const Imt="VertexArray: attributes must be Buffers or constants (i.e. typed array)",Omt=/^(.+)__LOCATION_([0-9]+)$/,Rmt=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Dmt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new wn(t),X$(this,"VertexArray","v6.0",Rmt),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pe(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Pe&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Pe&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Lt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=Sn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return gt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=Omt.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Pe)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Pe){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Pe){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(Imt)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(wn.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){wn.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Pe){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function Nmt(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=c0(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function c0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return Nmt(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function oL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;gt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&hb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&hb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||hb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:c0(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function hb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=Fmt(a);return!o||!s?(t[i]={[r]:s?c0(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function Fmt(e){return e!=null}function Bmt(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=aL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat($mt(a.name,l))),n[s]=aL(t,i[o],l,r)}}return n}function aL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Pe){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const g=r.divisor>0;v="".concat(g?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(ws(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(c0(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(c0(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function $mt(e,t){const{type:r,size:n}=t,i=oz(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function zmt(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=sL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=sL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function sL(e){const{type:t,size:r}=e.accessor,n=oz(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const lL=Aa()&&typeof document<"u";let Vmt=0;class Umt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=g=>W$(g),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Il.get("animation-loop-".concat(Vmt++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Lt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return gt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=n1.isSupported(this.gl,["timers"])?new n1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Lt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=lL?new Promise((t,r)=>{if(lL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):qvt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Yvt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?ZE(this.props.gl,t):this.onCreateContext(t),!wy(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Nvt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Vvt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const j0="vs",eA="fs";function Cn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const db={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Gmt(e){const t={};for(const r in e){const n=e[r],i=jmt(n);t[r]=i}return t}function jmt(e){let t=uL(e);return t==="object"?e?"type"in e?Object.assign({},e,db[e.type]):"value"in e?(t=uL(e.value),Object.assign({type:t},e,db[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},db[t])}function uL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const Wmt="vs",Hmt="fs";class cL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Cn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=Xmt(c),a&&(this.uniforms=Gmt(a))}getModuleSource(t){let r;switch(t){case Wmt:r=this.vs||"";break;case Hmt:r=this.fs||"";break;default:Cn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Cn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function Xmt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function Ymt(e){return qmt(uz(e))}function qmt(e){const t={},r={};return lz({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function lz(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&lz({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function uz(e,t){return e.map(r=>(r instanceof cL||(Cn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Cn(r.name,"shader module has no name"),r=new cL(r),r.dependencies=uz(r.dependencies)),r))}function Zmt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const Kmt=7936,Jmt=7937,Qmt=7938,t1t=35724,rA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Tl={};Object.keys(rA).forEach(e=>{Tl[e]=e});function e1t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function r1t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Kmt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Jmt);return{gpuVendor:n1t(r,n),vendor:r,renderer:n,version:e.getParameter(Qmt),shadingLanguageVersion:e.getParameter(t1t)}}function n1t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const pb={};function fL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=rA[t];if(Cn(n,t),!Zmt(r))return!0;if(t in pb)return pb[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),pb[t]=l,l}function i1t(e,t){const r=rA[t];Cn(r,t);const n=e1t(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Cn(i===!1||i===!0),i}function yv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>i1t(e,r))}function o1t(e){switch(r1t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function a1t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return yv(e,Tl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),yv(e,Tl.GLSL_DERIVATIVES)&&fL(e,Tl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),yv(e,Tl.GLSL_FRAG_DATA)&&fL(e,Tl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),yv(e,Tl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const s1t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,l1t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,u1t={[j0]:s1t,[eA]:l1t},Jg="__LUMA_INJECT_DECLARATIONS__",hL=/void\s+main\s*\([^)]*\)\s*\{\n?/,dL=/}\n?[^{}]*$/,vb=[];function pL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===j0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),vb.length=a.length;for(let l=0,u=a.length;l<u;++l)vb[l]=a[l].injection;const s="".concat(vb.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(Jg,s));break;case"vs:#main-start":i&&(e=e.replace(hL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(dL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(Jg,s));break;case"fs:#main-start":i||(e=e.replace(hL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(dL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(Jg,""),n&&(e=e.replace(/\}\s*$/,o=>o+u1t[t])),e}function G3(e){const t={};return Cn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function Jc(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const cz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],c1t=[...cz,[Jc("attribute"),"in $1"],[Jc("varying"),"out $1"]],f1t=[...cz,[Jc("varying"),"in $1"]],fz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],h1t=[...fz,[Jc("in"),"attribute $1"],[Jc("out"),"varying $1"]],d1t=[...fz,[Jc("in"),"varying $1"]],j3="gl_FragColor",W3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,p1t=/void\s+main\s*\([^)]*\)\s*\{\n?/;function v1t(e,t,r){switch(t){case 300:return r?i1(e,c1t):g1t(e);case 100:return r?i1(e,h1t):m1t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function i1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function g1t(e){e=i1(e,f1t);const t=e.match(W3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(j3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(p1t,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(j3,"\\b"),"g"),r)}return e}function m1t(e){e=i1(e,d1t);const t=e.match(W3);if(t){const r=t[1];e=e.replace(W3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),j3)}return e}const y1t=`

`.concat(Jg,`

`),hz={[j0]:"vertex",[eA]:"fragment"},_1t=`precision highp float;

`;function b1t(e,t){const{vs:r,fs:n}=t,i=Ymt(t.modules||[]);return{gl:e,vs:vL(e,Object.assign({},t,{source:r,type:j0,modules:i})),fs:vL(e,Object.assign({},t,{source:n,type:eA,modules:i})),getUniforms:w1t(i)}}function vL(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Cn(typeof n=="string","shader source must be a string");const h=i===j0,d=n.split(`
`);let p=100,v="",g=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],g=d.slice(1).join(`
`)):v="#version ".concat(p);const m={};o.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,a);let y=c?"".concat(v,`
`).concat(T1t({id:r,source:n,type:i}),`
`).concat(S1t({type:i}),`
`).concat(o1t(e),`
`).concat(a1t(e),`
`).concat(P1t(m),`
`).concat(h?"":_1t,`
`):"".concat(v,`
`);const _=A1t(s),w={},T={},S={};for(const P in l){const C=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],A=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const M=A[2],k=A[3];M?k==="decl"?T[P]=[C]:S[P]=[C]:w[P]=[C]}else S[P]=[C]}for(const P of o){f&&P.checkDeprecations(g,f),y+=P.getModuleSource(i,p);const A=P.injections[i];for(const M in A){const k=M.match(/^(v|f)s:#([\w-]+)$/);if(k){const B=k[2]==="decl"?T:S;B[M]=B[M]||[],B[M].push(A[M])}else w[M]=w[M]||[],w[M].push(A[M])}}return y+=y1t,y=pL(y,i,T),y+=E1t(_[i],w),y+=g,y=pL(y,i,S),y=v1t(y,u?100:p,h),y}function w1t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function S1t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(hz[t].toUpperCase(),`
`)}function T1t(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(hz[n],`

`):""}function P1t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function E1t(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function A1t(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const C1t="void main() {gl_FragColor = vec4(0);}",dz=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,M1t=`#version 300 es
`.concat(dz);function pz(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function vz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?M1t:t>300?"#version ".concat(t,`
`).concat(dz):C1t;const o=L1t(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function k1t(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Cn(!1),null}}function x1t(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Cn(!1),null}}function L1t(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Cn(!1),null}}const I1t=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,O1t={name:"fp32",vs:I1t,fs:null};function f0(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const Xr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function R1t(e,{precision:t=Xr.precision}={}){return e=D1t(e),"".concat(parseFloat(e.toPrecision(t)))}function nu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _r(e,t,r){return F1t(e,n=>Math.max(t,Math.min(r,n)))}function Gl(e,t,r){return nu(e)?e.map((n,i)=>Gl(n,t[i],r)):r*t+(1-r)*e}function So(e,t,r){const n=Xr.EPSILON;r&&(Xr.EPSILON=r);try{if(e===t)return!0;if(nu(e)&&nu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!So(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Xr.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Xr.EPSILON=n}}function D1t(e){return Math.round(e/Xr.EPSILON)*Xr.EPSILON}function N1t(e){return e.clone?e.clone():new Array(e.length)}function F1t(e,t,r){if(nu(e)){const n=e;r=r||N1t(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function B1t(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class nA extends B1t(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:nu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Xr)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+R1t(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!So(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(Xr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function $1t(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function ke(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function xd(e,t,r=""){if(Xr.debug&&!$1t(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class gz extends nA{get x(){return this[0]}set x(t){this[0]=ke(t)}get y(){return this[1]}set y(t){this[1]=ke(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return ke(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return ke(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return f0(t>=0&&t<this.ELEMENTS,"index is out of range"),ke(this[t])}setComponent(t,r){return f0(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Ld=1e-6,Ri=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function z1t(){var e=new Ri(2);return Ri!=Float32Array&&(e[0]=0,e[1]=0),e}function o1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function mz(e,t){return e[0]=-t[0],e[1]=-t[1],e}function yz(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function V1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function U1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=z1t();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function G1t(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function _z(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function j1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function W1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function bz(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function wz(){var e=new Ri(3);return Ri!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function H1t(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function gL(e,t,r){var n=new Ri(3);return n[0]=e,n[1]=t,n[2]=r,n}function X1t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Y1t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function q1t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Z1t(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Sz(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qg(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function K1t(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function iA(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function Tz(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Pz(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,g=a*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function J1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Q1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function tyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function eyt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&Sz(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var Ez=X1t,Az=H1t,gb=Y1t;(function(){var e=wz();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const mb=[0,0,0];let _v;class _t extends gz{static get ZERO(){return _v||(_v=new _t(0,0,0),Object.freeze(_v)),_v}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&nu(t)?this.copy(t):(Xr.debug&&(ke(t),ke(r),ke(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Xr.debug&&(ke(t.x),ke(t.y),ke(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=ke(t)}angle(t){return eyt(this,t)}cross(t){return Qg(this,this,t),this.check()}rotateX({radians:t,origin:r=mb}){return J1t(this,this,r,t),this.check()}rotateY({radians:t,origin:r=mb}){return Q1t(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=mb}){return tyt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return iA(this,this,t),this.check()}transformAsVector(t){return _z(this,this,t),this.check()}transformByMatrix3(t){return Tz(this,this,t),this.check()}transformByMatrix2(t){return j1t(this,this,t),this.check()}transformByQuaternion(t){return Pz(this,this,t),this.check()}}let bv;class oA extends gz{static get ZERO(){return bv||(bv=new oA(0,0,0,0),Object.freeze(bv)),bv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),nu(t)&&arguments.length===1?this.copy(t):(Xr.debug&&(ke(t),ke(r),ke(n),ke(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Xr.debug&&(ke(t.x),ke(t.y),ke(t.z),ke(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=ke(t)}get w(){return this[3]}set w(t){this[3]=ke(t)}transform(t){return iA(this,this,t),this.check()}transformByMatrix3(t){return bz(this,this,t),this.check()}transformByMatrix2(t){return W1t(this,this,t),this.check()}transformByQuaternion(t){return Pz(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Cz extends nA{toString(){let t="[";if(Xr.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=ke(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function ryt(){var e=new Ri(9);return Ri!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function nyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function iyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function oyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function mL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],_=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+g*a+m*u,e[4]=v*i+g*s+m*c,e[5]=v*o+g*l+m*f,e[6]=y*n+_*a+w*u,e[7]=y*i+_*s+w*c,e[8]=y*o+_*l+w*f,e}function ayt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function syt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function yL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function lyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[3]=c-m,e[6]=h+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-u-f,e}var H3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(H3||(H3={}));const uyt=Object.freeze([1,0,0,0,1,0,0,0,1]);class wr extends Cz{static get IDENTITY(){return fyt()}static get ZERO(){return cyt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return H3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(uyt)}fromObject(t){return this.check()}fromQuaternion(t){return lyt(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return oyt(this)}transpose(){return nyt(this,this),this.check()}invert(){return iyt(this,this),this.check()}multiplyLeft(t){return mL(this,t,this),this.check()}multiplyRight(t){return mL(this,this,t),this.check()}rotate(t){return syt(this,this,t),this.check()}scale(t){return Array.isArray(t)?yL(this,this,t):yL(this,this,[t,t]),this.check()}translate(t){return ayt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=V1t(r||[-0,-0],t,this);break;case 3:n=Tz(r||[-0,-0,-0],t,this);break;case 4:n=bz(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return xd(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let wv,Sv;function cyt(){return wv||(wv=new wr([0,0,0,0,0,0,0,0,0]),Object.freeze(wv)),wv}function fyt(){return Sv||(Sv=new wr,Object.freeze(Sv)),Sv}function hyt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function X3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=r*s-n*a,_=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,P=i*u-o*l,C=c*v-f*p,A=c*g-h*p,M=c*m-d*p,k=f*g-h*v,R=f*m-d*v,B=h*m-d*g,z=y*B-_*R+w*k+T*M-S*A+P*C;return z?(z=1/z,e[0]=(s*B-l*R+u*k)*z,e[1]=(i*R-n*B-o*k)*z,e[2]=(v*P-g*S+m*T)*z,e[3]=(h*S-f*P-d*T)*z,e[4]=(l*M-a*B-u*A)*z,e[5]=(r*B-i*M+o*A)*z,e[6]=(g*w-p*P-m*_)*z,e[7]=(c*P-h*w+d*_)*z,e[8]=(a*R-s*M+u*C)*z,e[9]=(n*M-r*R-o*C)*z,e[10]=(p*S-v*w+m*y)*z,e[11]=(f*w-c*S-d*y)*z,e[12]=(s*A-a*k-l*C)*z,e[13]=(r*k-n*A+i*C)*z,e[14]=(v*_-p*T-g*y)*z,e[15]=(c*T-f*_+h*y)*z,e):null}function pyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*a-r*o,y=t*s-n*o,_=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,P=u*p-c*d,C=u*v-f*d,A=u*g-h*d,M=c*v-f*p,k=c*g-h*p,R=f*g-h*v;return m*R-y*k+_*M+w*A-T*C+S*P}function jl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],_=r[0],w=r[1],T=r[2],S=r[3];return e[0]=_*n+w*s+T*f+S*v,e[1]=_*i+w*l+T*h+S*g,e[2]=_*o+w*u+T*d+S*m,e[3]=_*a+w*c+T*p+S*y,_=r[4],w=r[5],T=r[6],S=r[7],e[4]=_*n+w*s+T*f+S*v,e[5]=_*i+w*l+T*h+S*g,e[6]=_*o+w*u+T*d+S*m,e[7]=_*a+w*c+T*p+S*y,_=r[8],w=r[9],T=r[10],S=r[11],e[8]=_*n+w*s+T*f+S*v,e[9]=_*i+w*l+T*h+S*g,e[10]=_*o+w*u+T*d+S*m,e[11]=_*a+w*c+T*p+S*y,_=r[12],w=r[13],T=r[14],S=r[15],e[12]=_*n+w*s+T*f+S*v,e[13]=_*i+w*l+T*h+S*g,e[14]=_*o+w*u+T*d+S*m,e[15]=_*a+w*c+T*p+S*y,e}function a1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,g,m;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+g*o+t[14],e[15]=u*n+d*i+m*o+t[15]),e}function aA(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vyt(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,R,B,z,N;return s<Ld?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],y=t[7],_=t[8],w=t[9],T=t[10],S=t[11],P=i*i*c+u,C=o*i*c+a*l,A=a*i*c-o*l,M=i*o*c-a*l,k=o*o*c+u,R=a*o*c+i*l,B=i*a*c+o*l,z=o*a*c-i*l,N=a*a*c+u,e[0]=f*P+v*C+_*A,e[1]=h*P+g*C+w*A,e[2]=d*P+m*C+T*A,e[3]=p*P+y*C+S*A,e[4]=f*M+v*k+_*R,e[5]=h*M+g*k+w*R,e[6]=d*M+m*k+T*R,e[7]=p*M+y*k+S*R,e[8]=f*B+v*z+_*N,e[9]=h*B+g*z+w*N,e[10]=d*B+m*z+T*N,e[11]=p*B+y*z+S*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Mz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function gyt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function kz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function myt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function yyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _yt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function byt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var wyt=byt;function Syt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var Tyt=Syt;function Pyt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],g=t[2],m=n[0],y=n[1],_=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Ld&&Math.abs(v-T)<Ld&&Math.abs(g-S)<Ld?hyt(e):(c=p-w,f=v-T,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-_*f,o=_*c-m*h,a=m*f-y*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+f*v+h*g),e[15]=1,e)}function Eyt(){var e=new Ri(4);return Ri!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ayt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function sA(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Cyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Myt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function kyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function xyt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Lyt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function Tf(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function Iyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=Eyt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var Y3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(Y3||(Y3={}));const Oyt=45*Math.PI/180,Ryt=1,yb=.1,_b=500,Dyt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Nr extends Cz{static get IDENTITY(){return Fyt()}static get ZERO(){return Nyt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Y3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=g,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Dyt)}fromObject(t){return this.check()}fromQuaternion(t){return yyt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=yb,far:s=_b}=t;return s===1/0?Byt(this,r,n,i,o,a):_yt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Pyt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=yb,far:s=_b}=t;return Tyt(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=Oyt,aspect:n=Ryt,focalDistance:i=1,near:o=yb,far:a=_b}=t;_L(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return _L(r),wyt(this,r,n,i,o),this.check()}determinant(){return pyt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return dyt(this,this),this.check()}invert(){return X3(this,this),this.check()}multiplyLeft(t){return jl(this,t,this),this.check()}multiplyRight(t){return jl(this,this,t),this.check()}rotateX(t){return Mz(this,this,t),this.check()}rotateY(t){return gyt(this,this,t),this.check()}rotateZ(t){return kz(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return vyt(this,this,t,r),this.check()}scale(t){return aA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return a1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Tf(r||[-0,-0,-0,-0],t,this),xd(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=U1t(r||[-0,-0],t,this);break;case 3:i=iA(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return xd(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=G1t(r||[-0,-0],t,this);break;case 3:n=_z(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return xd(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Tv,Pv;function Nyt(){return Tv||(Tv=new Nr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Tv)),Tv}function Fyt(){return Pv||(Pv=new Nr,Object.freeze(Pv)),Pv}function _L(e){if(e>Math.PI*2)throw Error("expected radians")}function Byt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function bL(){var e=new Ri(4);return Ri!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function $yt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function xz(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function wL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function zyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function Vyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function Uyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function Gyt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function tm(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Ld?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*i+g*l,e[1]=v*o+g*u,e[2]=v*a+g*c,e[3]=v*s+g*f,e}function jyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function Wyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Lz(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var Hyt=Ayt,Xyt=sA,Yyt=xyt,qyt=Lyt,Zyt=Cyt,Kyt=Myt,Iz=kyt,Jyt=function(){var e=wz(),t=gL(1,0,0),r=gL(0,1,0);return function(n,i,o){var a=Sz(i,o);return a<-.999999?(Qg(e,t,i),Az(e)<1e-6&&Qg(e,r,i),Z1t(e,e),xz(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Qg(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,Iz(n,n))}}();(function(){var e=bL(),t=bL();return function(r,n,i,o,a,s){return tm(e,n,a,s),tm(t,i,o,s),tm(r,e,t,2*s*(1-s)),r}})();(function(){var e=ryt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Iz(t,Lz(t,e))}})();const Qyt=[0,0,0,1];class SL extends nA{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Lz(this,t),this.check()}fromAxisRotation(t,r){return xz(this,t,r),this.check()}identity(){return $yt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=ke(t)}get y(){return this[1]}set y(t){this[1]=ke(t)}get z(){return this[2]}set z(t){this[2]=ke(t)}get w(){return this[3]}set w(t){this[3]=ke(t)}len(){return Zyt(this)}lengthSquared(){return Kyt(this)}dot(t){return Yyt(this,t)}rotationTo(t,r){return Jyt(this,t,r),this.check()}add(t){return Hyt(this,this,t),this.check()}calculateW(){return Gyt(this,this),this.check()}conjugate(){return Wyt(this,this),this.check()}invert(){return jyt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(qyt(this,t,r,n),this.check())}multiplyRight(t){return wL(this,this,t),this.check()}multiplyLeft(t){return wL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return zyt(this,this,t),this.check()}rotateY(t){return Vyt(this,this,t),this.check()}rotateZ(t){return Uyt(this,this,t),this.check()}scale(t){return Xyt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=Qyt,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return tm(this,i,o,a),this.check()}transformVector4(t,r=new oA){return Iyt(r,t,this),xd(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Oz={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},TL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,t_t={lightSources:{}};function bb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function e_t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=bb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=bb(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=bb(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function Rz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t_t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},e_t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return Rz({lightSources:t})}return{}}const r_t={name:"lights",vs:TL,fs:TL,getUniforms:Rz,defines:{MAX_LIGHTS:3}},n_t=new Uint8Array([0,255,255,255]),i_t={pickingSelectedColor:null,pickingHighlightColor:n_t,pickingActive:!1,pickingAttribute:!1};function o_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i_t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const a_t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,s_t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,l_t={name:"picking",vs:a_t,fs:s_t,getUniforms:o_t},u_t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,c_t={};function f_t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function h_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c_t;if(!("material"in e))return{};const{material:t}=e;return t?f_t(t):{lighting_uEnabled:!1}}const d_t={name:"gouraud-lighting",dependencies:[r_t],vs:u_t,defines:{LIGHTING_VERTEX:1},getUniforms:h_t},p_t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,v_t={name:"transform",vs:p_t,fs:null};class W0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new W0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(_=>this._getHash(_.name)).sort(),d=a.map(_=>this._getHash(_)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),g=[],m=[];for(const _ of p)g.push(this._getHash(_)),g.push(this._getHash(i[_]));for(const _ of v)m.push(this._getHash(_)),m.push(this._getHash(o[_]));const y="".concat(c,"/").concat(f,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[y]){const _=b1t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new az(this.gl,{hash:y,vs:_.vs,fs:_.fs,varyings:a,bufferMode:s}),this._getUniforms[y]=_.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const g_t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function m_t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=y_t(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Pe(e,l),u],__t(o,u)}}if(i){const o=i.value||i;gt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Pe(e,{data:o,target:34963}),a]}return n}function y_t(e,t){const{attributeMap:r=g_t}=t||{};return r&&r[e]||e}function __t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}gt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const qu=2,b_t=1e4,w_t="Model needs drawMode and vertexCount",PL=()=>{},S_t={};class ma{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Ls("model")}=r;gt(wy(t)),this.id=n,this.gl=t,this.id=r.id||Ls("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||W0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},gt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),w_t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return gt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return gt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=m_t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Kc(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return JE(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Lt.priority>=qu&&(u=this._logDrawCallStart(qu));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Lt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:g}=this,{onBeforeRender:m=PL,onAfterRender:y=PL}=this.props;m(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(S_t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:g,offset:f?d:0}));return y(),Lt.priority>=qu&&this._logDrawCallEnd(u,l,n),_}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}gt(r instanceof az,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Dmt(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Pe&&r.delete()}}_setAnimationProps(t){this.animated&&gt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Kc(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new sz(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:b_t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Lt.group(qu,">>> DRAWING MODEL ".concat(this.id),{collapsed:Lt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=Bmt({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=oL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=oL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Lt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Lt.log("UNUSED UNIFORMS",Object.keys(s))();const f=zmt(this.vertexArray.configuration);Lt.table(t,o)(),Lt.table(t,a)(),Lt.table(t+1,f)(),i&&i.log({logLevel:qu,message:"Rendered to ".concat(i.id)}),Lt.groupEnd(qu)()}}class T_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Pe?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&gt(Qt(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new sz(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],gt(n[o]instanceof Pe)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Pe(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const P_t="transform_uSampler_",s1="transform_uSize_",EL="transform_position";function E_t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const g=x_t(d,r);if(g){const{updatedLine:m,inject:y}=g;h[p]=m,c=G3([c,y]),Object.assign(l,g.samplerTextureMap),a--}}n&&!s&&(s=k_t(d,n))}),n){gt(i);const d="".concat(s1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(EL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(EL,`, 0, 1.);
`);c=G3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function A_t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(s1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(s1).concat(s)]=[o,a];return i}function C_t(e){return pz(e,["attribute","in"])}function M_t(e){const t="".concat(P_t).concat(e),r="".concat(s1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function k_t(e,t){const r=pz(e,["varying","out"]);return r&&r.name===t?r.type:null}function x_t(e,t){const r={},n=C_t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=M_t(o),c=k1t(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const L_t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},I_t="transform_output";class O_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=A_t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=Ty(r);if(!t)return n;const i=n.constructor,o=x1t(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof vn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Pe(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new nr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(L_t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=rz(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=E_t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=G3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||vz({version:iz(i),input:this.targetTextureVarying,inputType:a,output:I_t}),f=this.hasSourceTextures||this.targetTextureVarying?[v_t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class lA{static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();gt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new ma(r,Object.assign({},t,{fs:t.fs||vz({version:iz(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){R_t(r)&&(this.bufferTransform=new T_t(t,r)),D_t(r)&&(this.textureTransform=new O_t(t,r)),gt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function R_t(e){return!!(!Kc(e.feedbackBuffers)||!Kc(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function D_t(e){return!!(!Kc(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const AL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class mu{static get DRAW_MODE(){return AL}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Ls("geometry"),drawMode:n=AL.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,gt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(gt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return gt(Number.isFinite(n)),n}}let N_t=1,F_t=1;class Dz{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=N_t++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=F_t++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const Nz="#define SMOOTH_EDGE_RADIUS 0.5",B_t=`
`.concat(Nz,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),$_t=`
`.concat(Nz,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),z_t={name:"geometry",vs:B_t,fs:$_t},le={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(le,"IDENTITY",{get:()=>(Wt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ti={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Is={common:0,meters:1,pixels:2},CL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},H0={DRAW:"draw",MASK:"mask"},V_t=Object.keys(le).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(le[e],";")).join(""),U_t=Object.keys(Ti).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Ti[e],";")).join(""),G_t=Object.keys(Is).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Is[e],";")).join(""),j_t="".concat(V_t,`
`).concat(U_t,`
`).concat(G_t,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function W_t(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function X0(e){let t={},r;return n=>{for(const i in n)if(!W_t(n[i],t[i])){r=e(n),t=n;break}return r}}const ML=[0,0,0,0],H_t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Fz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],X_t=[0,0,0],Bz=[0,0,0],Y_t=X0(K_t);function $z(e,t,r=Bz){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===le.LNGLAT_OFFSETS||t===le.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Ti.WEB_MERCATOR:(t===le.LNGLAT||t===le.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ti.WEB_MERCATOR_AUTO_OFFSET:t===le.LNGLAT?n=i:t===le.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Ti.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Ti.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function q_t(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=ML,l=ML,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=$z(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=Tf([],l,a),o=n||o,a=jl([],i,o),a=jl([],a,H_t)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function Z_t({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=le.DEFAULT,coordinateOrigin:i=Bz,autoWrapLongitude:o=!1}){n===le.DEFAULT&&(n=e.isGeospatial?le.LNGLAT:le.CARTESIAN);const a=Y_t({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||Fz,a}function K_t({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=q_t(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Tf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:X_t,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Fz,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case le.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case le.LNGLAT:case le.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case le.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const J_t={};function Q_t(e=J_t){return"viewport"in e?Z_t(e):{}}const uA={name:"project",dependencies:[O1t,z_t],vs:j_t,getUniforms:Q_t},t2t=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,yu={name:"project32",dependencies:[uA],vs:t2t};function e2t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Nc(e,t){const r=Tf([],t,e);return sA(r,r,1/r[3]),r}function kL(e,t){const r=e%t;return r<0?t+r:r}function q3(e,t,r){return e<t?t:e>r?r:e}function r2t(e){return Math.log(e)*Math.LOG2E}const cA=Math.log2||r2t;function ya(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Pi=Math.PI,zz=Pi/4,ki=Pi/180,Z3=180/Pi,h0=512,K3=4003e4,Ev=85.051129,n2t=1.5;function i2t(e){return cA(e)}function Os(e){const[t,r]=e;ya(Number.isFinite(t)),ya(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*ki,i=r*ki,o=h0*(n+Pi)/(2*Pi),a=h0*(Pi+Math.log(Math.tan(zz+i*.5)))/(2*Pi);return[o,a]}function Qc(e){const[t,r]=e,n=t/h0*(2*Pi)-Pi,i=2*(Math.atan(Math.exp(r/h0*(2*Pi)-Pi))-zz);return[n*Z3,i*Z3]}function o2t(e){const{latitude:t}=e;ya(Number.isFinite(t));const r=Math.cos(t*ki);return i2t(K3*r)-9}function J3(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;ya(Number.isFinite(t)&&Number.isFinite(r));const i=h0,o=Math.cos(t*ki),a=i/360,s=a/o,l=i/K3/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=ki*Math.tan(t*ki)/o,f=a*c/2,h=i/K3*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function Vz(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=J3({longitude:r,latitude:n,highPrecision:!0}),c=Os(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=Qc(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function a2t(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=e2t();a1(s,s,[0,0,-i]),Mz(s,s,-r*ki),kz(s,s,n*ki);const l=o/t;return aA(s,s,[l,l,l]),a&&a1(s,s,q1t([],a)),s}function s2t(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=l1(n2t)}=e;n!==void 0&&(c=l1(n));const f=c*ki,h=i*ki,d=Uz(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),g=Math.sin(v)*p/Math.sin(q3(Math.PI/2-h-v,.01,Math.PI-.01)),m=Math.sin(h)*g+p,y=p*10,_=Math.min(m*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:_}}function l1(e){return 2*Math.atan(.5/e)*Z3}function Uz(e){return .5/Math.tan(.5*e*ki)}function Gz(e,t){const[r,n,i=0]=e;return ya(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Nc(t,[r,n,i,1])}function Py(e,t,r=0){const[n,i,o]=e;if(ya(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Nc(t,[n,i,o,1]);const a=Nc(t,[n,i,0,1]),s=Nc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return yz([],a,s,c)}function jz(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=l2t(e.padding),h=Os([s,q3(c,-Ev,Ev)]),d=Os([u,q3(l,-Ev,Ev)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];ya(v[0]>0&&v[1]>0);const g=v[0]/p[0],m=v[1]/p[1],y=(f.right-f.left)/2/g,_=(f.top-f.bottom)/2/m,w=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+_],T=Qc(w),S=Math.min(o,cA(Math.abs(Math.min(g,m))));return ya(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function l2t(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(ya(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const xL=Math.PI/180;function u2t(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*xL:Math.atan(.5/e.altitude),f=(90-e.pitch)*xL;return c>f-.01?(l=LL(e,0,t),u=LL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function LL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Nc(n,[t,0,1,1]),o=Nc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=yz([],i,o,s),u=Qc(l);return u.push(r),u}const IL=512;function c2t(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=kL(i+180,360)-180),(s<-180||s>180)&&(s=kL(s+180,360)-180);const l=cA(r/IL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=Qc([0,u])[1];if(o<c)o=c;else{const f=Qc([0,IL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const f2t=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,h2t=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,d2t=X0(y2t),p2t=X0(_2t),v2t=[0,0,0,1],g2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function m2t(e,t){const[r,n,i]=e,o=Py([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function y2t({viewport:e,center:t}){return new Nr(e.viewProjectionMatrix).invert().transform(t)}function _2t({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>m2t(a,n));for(const a of t){const s=a.clone().translate(new _t(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Nr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function b2t(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||v2t,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=d2t({viewport:e.viewport,center:t.project_uCenter}),o=[],a=p2t({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new _t(e.viewport.center).negate());t.project_uCoordinateSystem===le.LNGLAT&&t.project_uProjectionMode===Ti.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(g2t),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const wb={name:"shadow",dependencies:[uA],vs:f2t,fs:h2t,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?b2t(e,t):{}},_u={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...l_t},w2t=[uA],S2t=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function T2t(e){const t=W0.getDefaultProgramManager(e);for(const r of w2t)t.addDefaultModule(r);for(const r of S2t)t.addShaderHook(r);return t}const P2t=[255,255,255],E2t=1;let A2t=0;class C2t{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:r=P2t}=t,{intensity:n=E2t}=t;this.id=t.id||"ambient-".concat(A2t++),this.color=r,this.intensity=n}}const M2t=[255,255,255],k2t=1,x2t=[0,0,-1];let L2t=0;class OL{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:r=M2t}=t,{intensity:n=k2t}=t,{direction:i=x2t}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(L2t++),this.color=r,this.intensity=n,this.type="directional",this.direction=new _t(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class I2t{constructor(t,r={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Ey extends I2t{constructor(...t){super(...t),E(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ga(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&R2t(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const g=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(g)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=Wz(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=O2t(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;Qn(t,{scissorTest:!0,scissor:u},()=>JE(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ga(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:g}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:g})}catch(m){h.raiseError(m,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Zc(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function Wz(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||Wz(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function O2t(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Zc(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function R2t(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ga(e,{viewport:[0,0,t,r]}),e.clear(16640)}class D2t extends Ey{constructor(t,r){super(t,r),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new vn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new bc(t,{format:33189,width:1,height:1}),this.fbo=new nr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;Qn(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Zc(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const N2t={color:[255,255,255],intensity:1},RL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],F2t=[0,0,0,200/255];class Hz{constructor(t={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",F2t),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=W0.getDefaultProgramManager(t),wb&&this.programManager.addDefaultModule(wb)),this.dummyShadowMap||(this.dummyShadowMap=new vn(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(wb),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Nr().lookAt({eye:new _t(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new D2t(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new C2t(N2t),this.directionalLights.push(new OL(RL[0]),new OL(RL[1])))}}class B2t{constructor(t={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const tf=new B2t;function td(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $2t(e,t){const r=e%t;return r<0?t+r:r}function z2t(e){return[e[12],e[13],e[14]]}function V2t(e){return{left:Zu(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Zu(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Zu(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Zu(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Zu(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Zu(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const DL=new _t;function Zu(e,t,r,n){DL.set(e,t,r);const i=DL.len();return{distance:n/i,normal:new _t(-e/i,-t/i,-r/i)}}function U2t(e){return e-Math.fround(e)}let bh;function Sb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;bh=tf.allocate(bh,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];bh[s+l]=u,bh[s+l+r]=U2t(u)}s+=r*2}return bh.subarray(0,o*r*2)}const G2t=Math.PI/180,j2t=td(),NL=[0,0,0],W2t={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function H2t({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Nr().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Nr().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=_r((c+e-f)/2,0,e)-e/2,v=_r((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Rs{constructor(t={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||W2t,this.focalDistance=t.focalDistance||1,this.position=t.position||NL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ti.WEB_MERCATOR:Ti.WEB_MERCATOR_AUTO_OFFSET:Ti.IDENTITY}equals(t){return t instanceof Rs?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&So(t.projectionMatrix,this.projectionMatrix)&&So(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=Gz(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=Py([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Os(t);return r[1]=_r(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?Qc(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?J3({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,V2t(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=o2t({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||J3({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=NL;if(o&&(s=a?new Nr(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new _t(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=j2t,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Nr().multiplyRight(r).translate(new _t(this.center).negate()),this.projectionMatrix=n||H2t({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*G2t,focalDistance:c,padding:u,near:s,far:l});const f=td();jl(f,f,this.projectionMatrix),jl(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=X3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=z2t(this.viewMatrixInverse);const h=td(),d=td();aA(h,h,[this.width/2,-this.height/2,1]),a1(h,h,[1,-1,0]),jl(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=X3(td(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Wt.warn("Pixel project matrix not invertible")()}}E(Rs,"displayName","Viewport");const X2t=512,Y2t=4003e4,q2t=Math.PI/180;function FL(e){const t=Math.cos(e*q2t);return X2t/Y2t/t}class Mo extends Rs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:g=1.5}=t;const m=Math.pow(2,i);p=p||1,v=v||1;let y,_=null;c?(g=c[5]/2,y=l1(g)):(t.fovy?(y=t.fovy,g=Uz(y)):y=l1(g),_=s2t({width:p,height:v,pitch:o,fovy:y,nearZMultiplier:s,farZMultiplier:l}));let w=a2t({height:v,pitch:o,bearing:a,scale:m,altitude:g});h&&(w=new Nr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,..._,fovy:y,focalDistance:g}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=g,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Mo({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*FL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/FL(n);return[r,n,i]}addMetersToLngLat(t,r){return Vz(t,r)}panByPosition(t,r){const n=Py(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=o1([],i,mz([],n)),a=o1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=u2t(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=jz({width:n,height:i,bounds:t,...r});return new Mo({width:n,height:i,longitude:o,latitude:a,zoom:s})}}E(Mo,"displayName","WebMercatorViewport");function Tb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Mo){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function Z2t(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===le.DEFAULT&&(i=t.isGeospatial?le.LNGLAT:le.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function Xz(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=Tf([],[a,s,l,1],r)),n){case le.LNGLAT:return Tb([a,s,l],t,o);case le.LNGLAT_OFFSETS:return Tb([a+i[0],s+i[1],l+(i[2]||0)],t,o);case le.METER_OFFSETS:return Tb(Vz(i,[a,s,l]),t,o);case le.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function K2t(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=Z2t(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=$z(r,n,i),f=Xz(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);Ez(f,f,h)}return f}const dc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},u1=Symbol.for("component"),Fc=Symbol.for("asyncPropDefaults"),iu=Symbol.for("asyncPropOriginal"),ps=Symbol.for("asyncPropResolved");function Ay(e,t=()=>!0){return Array.isArray(e)?Yz(e,t,[]):t(e)?[e]:[]}function Yz(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Yz(i,t,r):t(i)&&r.push(i)}return r}function J2t({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class Q2t{constructor(t,r,n){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=r1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class tbt{constructor({gl:t,protocol:r}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new Q2t(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const ebt="layerManager.setLayers",rbt="layerManager.activateViewport";class nbt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",a=>{Lr(rbt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new tbt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&T2t(t),stats:n||new _y({id:"deck.gl"}),viewport:i||new Rs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Dz,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Lr(ebt,this,r,t),this._lastRenderedLayers=t;const n=Ay(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Wt.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Wt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=dc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=dc.MATCHED,r!==t&&(t.lifecycle=dc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=dc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=dc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Pf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Pf(n,i)))return!1}return!0}class ibt{constructor(t){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Ay(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Pf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Wt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const obt=/([0-9]+\.?[0-9]*)(%|px)/;function Ga(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=obt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function ja(e,t){return e.relative?Math.round(e.position*t):e.position}function ur(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class qz{constructor(t){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};ur(!l||l instanceof Rs),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ga(n),this._y=Ga(i),this._width=Ga(o),this._height=Ga(a),this._padding=s&&{left:Ga(s.left||0),right:Ga(s.right||0),top:Ga(s.top||0),bottom:Ga(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Pf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:ja(this._x,t),y:ja(this._y,r),width:ja(this._width,t),height:ja(this._height,r)};return this._padding&&(n.padding={left:ja(this._padding.left,t),top:ja(this._padding.top,r),right:ja(this._padding.right,t),bottom:ja(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class Y0{constructor(t){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const BL=()=>{},Q3={BREAK:1,SNAP_TO_END:2,IGNORE:3},abt=e=>e,sbt=Q3.BREAK;class lbt{constructor(t){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Y0(t.timeline),this.onViewStateChange=t.onViewStateChange||BL,this.onStateChange=t.onStateChange||BL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===Q3.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===Q3.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||abt,interpolator:o,interruption:r.transitionInterruption||sbt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class ubt{constructor(t){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!So(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];ur(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const cbt=["longitude","latitude","zoom","bearing","pitch"],fbt=["longitude","latitude","zoom"];class Cy extends ubt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:cbt,required:fbt},super(n.transitionProps),E(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=Gl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,Gl(t.around,r.around,n)))}return i}}const Wa={transitionDuration:0},hbt=300,Av=e=>1-(1-e)*(1-e),Ku={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},vl={};class Zz{constructor(t){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new lbt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?hbt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(Ku.WHEEL,c&&n),this.toggleEvents(Ku.PAN,c&&(i||o)),this.toggleEvents(Ku.PINCH,c&&(s||l)),this.toggleEvents(Ku.TRIPLE_PAN,c&&l),this.toggleEvents(Ku.DOUBLE_TAP,c&&a),this.toggleEvents(Ku.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Wa,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Wa,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Av},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Wa,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Av},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Wa,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Wa,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Av},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return vl._startPinchRotation=t.rotation,vl._lastPinchEvent=t,this.updateViewport(n,Wa,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:vl._startPinchRotation-n})}return this.updateViewport(r,Wa,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),vl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=vl;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Av},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return vl._startPinchRotation=null,vl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Wa:t?{...r,transitionInterpolator:new Cy({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class Kz{constructor(t,r){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const $L=5,dbt=1.2;class pbt extends Kz{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:w,normalize:T=!0}=t;ur(Number.isFinite(o)),ur(Number.isFinite(i)),ur(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:w}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=_r(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=_r(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=_r(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,c2t(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>$L&&(h=a/(l-c)*dbt):a<0&&l>$L&&(h=1-s/l),h=_r(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let g=n;return h>0?g=n+h*(p-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:v}}}class vbt extends Zz{constructor(...t){super(...t),E(this,"ControllerState",pbt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Cy({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class Jz extends qz{get ViewportType(){return Mo}get ControllerType(){return vbt}}E(Jz,"displayName","MapView");class gbt extends Ey{constructor(t,r){super(t,r),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new vn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,Qn(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===H0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const mbt=new Nr().lookAt({eye:[0,0,1]});function ybt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=_r((u+e-c)/2,0,e)-e/2,p=_r((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Nr().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class _bt extends Rs{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),g=Math.pow(2,f);p={unitsPerMeter:[v/d,g/d,1],metersPerUnit:[d/v,d/g,1]}}super({...t,longitude:void 0,position:s,viewMatrix:mbt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:ybt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=Py(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=o1([],i,mz([],n)),a=o1([],this.center,o);return{target:this.unprojectFlat(a)}}}class bbt extends Kz{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return _r(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[_r(i[0],n,r),_r(i[1],n,r)]:_r(i,n,r),t.rotationX=_r(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=$2t(s+180,360)-180),t}}class wbt extends bbt{constructor(t){super(t),E(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=_r(a+o,i,n);break;case"Y":s=_r(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return _r(r+o,i,n)}}class Sbt extends Zz{constructor(...t){super(...t),E(this,"ControllerState",wbt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Cy(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class fA extends qz{get ViewportType(){return _bt}get ControllerType(){return Sbt}}E(fA,"displayName","OrthographicView");function Tbt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=Ebt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function Pbt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Mo){const{longitude:s,latitude:l,zoom:u}=jz({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Mo({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new fA({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function Ebt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class Abt{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new vn(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===H0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new gbt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=Tbt({layers:t.layers,viewport:o}),l||!So(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=Pbt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Wt.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Cbt=new Hz;class Mbt{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Pf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new Abt),t.some(r=>r instanceof Hz)||this._internalEffects.push(Cbt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class kbt extends Ey{shouldDrawLayer(t){return t.props.operation===H0.DRAW}}const zL={blendFunc:[1,0,32771,0],blendEquation:32774};class Qz extends Ey{constructor(...t){super(...t),E(this,"pickZ",void 0),E(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const g=p?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=Qn(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...zL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(_=>_.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:g&&Lbt.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===H0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,zL),i.blend=!0,i.blendColor=xbt(this._colors,t,n)):i.blend=!1,i}}function xbt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Wt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function Lbt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const Ibt="deckRenderer.renderLayers";class Obt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new kbt(t),this.pickLayersPass=new Qz(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||nr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Lr(Ibt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new nr(this.gl),new nr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const Rbt={pickedColor:null,pickedObjectIndex:-1};function Dbt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let g=0;g<l;g++){if(e[h+3]-1>=0){const y=g+a-r,_=y*y+v;_<=c&&(c=_,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),g=f/4-v*l;return{...p,pickedColor:d,pickedX:a+g,pickedY:s+v}}Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Rbt}function Nbt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function tV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=Bbt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function Fbt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=tV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=eV({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function eV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function Bbt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class $bt{constructor(t){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new Qz(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new nr(n),nr.isSupported(n,{colorBufferFloat:!0}))){const i=new nr(n);i.attach({[36064]:new vn(n,{format:Qt(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Zc(this.gl);if(!h)return{result:[],emptyInfo:tV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=sb(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*d),{width:m,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceWidth:m,deviceHeight:y}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],P=new Set;for(let C=0;C<s;C++){let A;if(_){const k=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:_,cullRect:w,effects:f,pass:"picking:".concat(l)});A=Dbt({...k,deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceRect:_})}else A={pickedColor:null,pickedObjectIndex:-1};let M;A.pickedLayer&&u&&this.depthFBO&&(M=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&C+1<s&&(P.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=Fbt({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:M,pixelRatio:d});for(const k of T.values())k.layer&&S.push(k);if(!A.pickedColor)break}for(const C of P)C.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Zc(this.gl),p=sb(this.gl,[i,o],!0),v=p.x,g=p.y+p.height,m=sb(this.gl,[i+a,o+s],!0),y=m.x+m.width,_=m.y,w={x:v,y:_,width:y-v,height:g-_},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=Nbt(T),P=new Map,C=Number.isFinite(u);for(let A=0;A<S.length&&!(C&&u&&P.size>=u);A++){const M=S[A];let k={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};k=eV({layer:M.pickedLayer,info:k,mode:l}),P.has(k.object)||P.set(k.object,k)}return Array.from(P.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,g=new(u?Float32Array:Uint8Array)(p*v*4);return Ty(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const zbt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Vbt{constructor(t){E(this,"el",null),E(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,zbt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Ef={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(x,I,V){return setTimeout(_(x,V),I)}function h(x,I,V){return Array.isArray(x)?(d(x,V[I],V),!0):!1}function d(x,I,V){var H;if(!!x)if(x.forEach)x.forEach(I,V);else if(x.length!==i)for(H=0;H<x.length;)I.call(V,x[H],H,x),H++;else for(H in x)x.hasOwnProperty(H)&&I.call(V,x[H],H,x)}function p(x,I,V){var H="DEPRECATED METHOD: "+I+`
`+V+` AT 
`;return function(){var et=new Error("get-stack-trace"),yt=et&&et.stack?et.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yt=t.console&&(t.console.warn||t.console.log);return Yt&&Yt.call(t.console,H,yt),x.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(I),H=1;H<arguments.length;H++){var et=arguments[H];if(et!==i&&et!==null)for(var yt in et)et.hasOwnProperty(yt)&&(V[yt]=et[yt])}return V}:v=Object.assign;var g=p(function(I,V,H){for(var et=Object.keys(V),yt=0;yt<et.length;)(!H||H&&I[et[yt]]===i)&&(I[et[yt]]=V[et[yt]]),yt++;return I},"extend","Use `assign`."),m=p(function(I,V){return g(I,V,!0)},"merge","Use `assign`.");function y(x,I,V){var H=I.prototype,et;et=x.prototype=Object.create(H),et.constructor=x,et._super=H,V&&v(et,V)}function _(x,I){return function(){return x.apply(I,arguments)}}function w(x,I){return typeof x==s?x.apply(I&&I[0]||i,I):x}function T(x,I){return x===i?I:x}function S(x,I,V){d(M(I),function(H){x.addEventListener(H,V,!1)})}function P(x,I,V){d(M(I),function(H){x.removeEventListener(H,V,!1)})}function C(x,I){for(;x;){if(x==I)return!0;x=x.parentNode}return!1}function A(x,I){return x.indexOf(I)>-1}function M(x){return x.trim().split(/\s+/g)}function k(x,I,V){if(x.indexOf&&!V)return x.indexOf(I);for(var H=0;H<x.length;){if(V&&x[H][V]==I||!V&&x[H]===I)return H;H++}return-1}function R(x){return Array.prototype.slice.call(x,0)}function B(x,I,V){for(var H=[],et=[],yt=0;yt<x.length;){var Yt=I?x[yt][I]:x[yt];k(et,Yt)<0&&H.push(x[yt]),et[yt]=Yt,yt++}return V&&(I?H=H.sort(function(pr,Ur){return pr[I]>Ur[I]}):H=H.sort()),H}function z(x,I){for(var V,H,et=I[0].toUpperCase()+I.slice(1),yt=0;yt<o.length;){if(V=o[yt],H=V?V+et:I,H in x)return H;yt++}return i}var N=1;function j(){return N++}function Z(x){var I=x.ownerDocument||x;return I.defaultView||I.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,tt="ontouchstart"in t,Pt=z(t,"PointerEvent")!==i,Ot=tt&&q.test(navigator.userAgent),bt="touch",wt="pen",Ht="mouse",Y="kinect",nt=25,K=1,pt=2,St=4,At=8,st=1,ft=2,$=4,G=8,X=16,J=ft|$,Q=G|X,lt=J|Q,vt=["x","y"],at=["clientX","clientY"];function it(x,I){var V=this;this.manager=x,this.callback=I,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(H){w(x.options.enable,[x])&&V.handler(H)},this.init()}it.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(Z(this.element),this.evWin,this.domHandler)}};function rt(x){var I,V=x.options.inputClass;return V?I=V:Pt?I=Qy:Ot?I=sp:tt?I=t_:I=Vs,new I(x,Rt)}function Rt(x,I,V){var H=V.pointers.length,et=V.changedPointers.length,yt=I&K&&H-et===0,Yt=I&(St|At)&&H-et===0;V.isFirst=!!yt,V.isFinal=!!Yt,yt&&(x.session={}),V.eventType=I,Mt(x,V),x.emit("hammer.input",V),x.recognize(V),x.session.prevInput=V}function Mt(x,I){var V=x.session,H=I.pointers,et=H.length;V.firstInput||(V.firstInput=Kt(I)),et>1&&!V.firstMultiple?V.firstMultiple=Kt(I):et===1&&(V.firstMultiple=!1);var yt=V.firstInput,Yt=V.firstMultiple,sr=Yt?Yt.center:yt.center,pr=I.center=ge(H);I.timeStamp=c(),I.deltaTime=I.timeStamp-yt.timeStamp,I.angle=Gi(sr,pr),I.distance=Pr(sr,pr),Dt(V,I),I.offsetDirection=Te(I.deltaX,I.deltaY);var Ur=me(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Ur.x,I.overallVelocityY=Ur.y,I.overallVelocity=u(Ur.x)>u(Ur.y)?Ur.x:Ur.y,I.scale=Yt?zs(Yt.pointers,H):1,I.rotation=Yt?op(Yt.pointers,H):0,I.maxPointers=V.prevInput?I.pointers.length>V.prevInput.maxPointers?I.pointers.length:V.prevInput.maxPointers:I.pointers.length,$t(V,I);var Wi=x.element;C(I.srcEvent.target,Wi)&&(Wi=I.srcEvent.target),I.target=Wi}function Dt(x,I){var V=I.center,H=x.offsetDelta||{},et=x.prevDelta||{},yt=x.prevInput||{};(I.eventType===K||yt.eventType===St)&&(et=x.prevDelta={x:yt.deltaX||0,y:yt.deltaY||0},H=x.offsetDelta={x:V.x,y:V.y}),I.deltaX=et.x+(V.x-H.x),I.deltaY=et.y+(V.y-H.y)}function $t(x,I){var V=x.lastInterval||I,H=I.timeStamp-V.timeStamp,et,yt,Yt,sr;if(I.eventType!=At&&(H>nt||V.velocity===i)){var pr=I.deltaX-V.deltaX,Ur=I.deltaY-V.deltaY,Wi=me(H,pr,Ur);yt=Wi.x,Yt=Wi.y,et=u(Wi.x)>u(Wi.y)?Wi.x:Wi.y,sr=Te(pr,Ur),x.lastInterval=I}else et=V.velocity,yt=V.velocityX,Yt=V.velocityY,sr=V.direction;I.velocity=et,I.velocityX=yt,I.velocityY=Yt,I.direction=sr}function Kt(x){for(var I=[],V=0;V<x.pointers.length;)I[V]={clientX:l(x.pointers[V].clientX),clientY:l(x.pointers[V].clientY)},V++;return{timeStamp:c(),pointers:I,center:ge(I),deltaX:x.deltaX,deltaY:x.deltaY}}function ge(x){var I=x.length;if(I===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var V=0,H=0,et=0;et<I;)V+=x[et].clientX,H+=x[et].clientY,et++;return{x:l(V/I),y:l(H/I)}}function me(x,I,V){return{x:I/x||0,y:V/x||0}}function Te(x,I){return x===I?st:u(x)>=u(I)?x<0?ft:$:I<0?G:X}function Pr(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.sqrt(H*H+et*et)}function Gi(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.atan2(et,H)*180/Math.PI}function op(x,I){return Gi(I[1],I[0],at)+Gi(x[1],x[0],at)}function zs(x,I){return Pr(I[0],I[1],at)/Pr(x[0],x[1],at)}var ap={mousedown:K,mousemove:pt,mouseup:St},Vr="mousedown",In="mousemove mouseup";function Vs(){this.evEl=Vr,this.evWin=In,this.pressed=!1,it.apply(this,arguments)}y(Vs,it,{handler:function(I){var V=ap[I.type];V&K&&I.button===0&&(this.pressed=!0),V&pt&&I.which!==1&&(V=St),this.pressed&&(V&St&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[I],changedPointers:[I],pointerType:Ht,srcEvent:I}))}});var KG={pointerdown:K,pointermove:pt,pointerup:St,pointercancel:At,pointerout:At},JG={2:bt,3:wt,4:Ht,5:Y},SC="pointerdown",TC="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(SC="MSPointerDown",TC="MSPointerMove MSPointerUp MSPointerCancel");function Qy(){this.evEl=SC,this.evWin=TC,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Qy,it,{handler:function(I){var V=this.store,H=!1,et=I.type.toLowerCase().replace("ms",""),yt=KG[et],Yt=JG[I.pointerType]||I.pointerType,sr=Yt==bt,pr=k(V,I.pointerId,"pointerId");yt&K&&(I.button===0||sr)?pr<0&&(V.push(I),pr=V.length-1):yt&(St|At)&&(H=!0),!(pr<0)&&(V[pr]=I,this.callback(this.manager,yt,{pointers:V,changedPointers:[I],pointerType:Yt,srcEvent:I}),H&&V.splice(pr,1))}});var QG={touchstart:K,touchmove:pt,touchend:St,touchcancel:At},tj="touchstart",ej="touchstart touchmove touchend touchcancel";function PC(){this.evTarget=tj,this.evWin=ej,this.started=!1,it.apply(this,arguments)}y(PC,it,{handler:function(I){var V=QG[I.type];if(V===K&&(this.started=!0),!!this.started){var H=rj.call(this,I,V);V&(St|At)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}}});function rj(x,I){var V=R(x.touches),H=R(x.changedTouches);return I&(St|At)&&(V=B(V.concat(H),"identifier",!0)),[V,H]}var nj={touchstart:K,touchmove:pt,touchend:St,touchcancel:At},ij="touchstart touchmove touchend touchcancel";function sp(){this.evTarget=ij,this.targetIds={},it.apply(this,arguments)}y(sp,it,{handler:function(I){var V=nj[I.type],H=oj.call(this,I,V);!H||this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}});function oj(x,I){var V=R(x.touches),H=this.targetIds;if(I&(K|pt)&&V.length===1)return H[V[0].identifier]=!0,[V,V];var et,yt,Yt=R(x.changedTouches),sr=[],pr=this.target;if(yt=V.filter(function(Ur){return C(Ur.target,pr)}),I===K)for(et=0;et<yt.length;)H[yt[et].identifier]=!0,et++;for(et=0;et<Yt.length;)H[Yt[et].identifier]&&sr.push(Yt[et]),I&(St|At)&&delete H[Yt[et].identifier],et++;if(!!sr.length)return[B(yt.concat(sr),"identifier",!0),sr]}var aj=2500,EC=25;function t_(){it.apply(this,arguments);var x=_(this.handler,this);this.touch=new sp(this.manager,x),this.mouse=new Vs(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}y(t_,it,{handler:function(I,V,H){var et=H.pointerType==bt,yt=H.pointerType==Ht;if(!(yt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(et)sj.call(this,V,H);else if(yt&&lj.call(this,H))return;this.callback(I,V,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function sj(x,I){x&K?(this.primaryTouch=I.changedPointers[0].identifier,AC.call(this,I)):x&(St|At)&&AC.call(this,I)}function AC(x){var I=x.changedPointers[0];if(I.identifier===this.primaryTouch){var V={x:I.clientX,y:I.clientY};this.lastTouches.push(V);var H=this.lastTouches,et=function(){var yt=H.indexOf(V);yt>-1&&H.splice(yt,1)};setTimeout(et,aj)}}function lj(x){for(var I=x.srcEvent.clientX,V=x.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var et=this.lastTouches[H],yt=Math.abs(I-et.x),Yt=Math.abs(V-et.y);if(yt<=EC&&Yt<=EC)return!0}return!1}var CC=z(a.style,"touchAction"),MC=CC!==i,kC="compute",xC="auto",e_="manipulation",Us="none",Vf="pan-x",Uf="pan-y",lp=cj();function r_(x,I){this.manager=x,this.set(I)}r_.prototype={set:function(x){x==kC&&(x=this.compute()),MC&&this.manager.element.style&&lp[x]&&(this.manager.element.style[CC]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(I){w(I.options.enable,[I])&&(x=x.concat(I.getTouchAction()))}),uj(x.join(" "))},preventDefaults:function(x){var I=x.srcEvent,V=x.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var H=this.actions,et=A(H,Us)&&!lp[Us],yt=A(H,Uf)&&!lp[Uf],Yt=A(H,Vf)&&!lp[Vf];if(et){var sr=x.pointers.length===1,pr=x.distance<2,Ur=x.deltaTime<250;if(sr&&pr&&Ur)return}if(!(Yt&&yt)&&(et||yt&&V&J||Yt&&V&Q))return this.preventSrc(I)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function uj(x){if(A(x,Us))return Us;var I=A(x,Vf),V=A(x,Uf);return I&&V?Us:I||V?I?Vf:Uf:A(x,e_)?e_:xC}function cj(){if(!MC)return!1;var x={},I=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(V){x[V]=I?t.CSS.supports("touch-action",V):!0}),x}var up=1,On=2,Au=4,xa=8,No=xa,Gf=16,ji=32;function Fo(x){this.options=v({},this.defaults,x||{}),this.id=j(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=up,this.simultaneous={},this.requireFail=[]}Fo.prototype={defaults:{},set:function(x){return v(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var I=this.simultaneous;return x=cp(x,this),I[x.id]||(I[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=cp(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var I=this.requireFail;return x=cp(x,this),k(I,x)===-1&&(I.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=cp(x,this);var I=k(this.requireFail,x);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var I=this,V=this.state;function H(et){I.manager.emit(et,x)}V<xa&&H(I.options.event+LC(V)),H(I.options.event),x.additionalEvent&&H(x.additionalEvent),V>=xa&&H(I.options.event+LC(V))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=ji},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(ji|up)))return!1;x++}return!0},recognize:function(x){var I=v({},x);if(!w(this.options.enable,[this,I])){this.reset(),this.state=ji;return}this.state&(No|Gf|ji)&&(this.state=up),this.state=this.process(I),this.state&(On|Au|xa|Gf)&&this.tryEmit(I)},process:function(x){},getTouchAction:function(){},reset:function(){}};function LC(x){return x&Gf?"cancel":x&xa?"end":x&Au?"move":x&On?"start":""}function IC(x){return x==X?"down":x==G?"up":x==ft?"left":x==$?"right":""}function cp(x,I){var V=I.manager;return V?V.get(x):x}function ai(){Fo.apply(this,arguments)}y(ai,Fo,{defaults:{pointers:1},attrTest:function(x){var I=this.options.pointers;return I===0||x.pointers.length===I},process:function(x){var I=this.state,V=x.eventType,H=I&(On|Au),et=this.attrTest(x);return H&&(V&At||!et)?I|Gf:H||et?V&St?I|xa:I&On?I|Au:On:ji}});function fp(){ai.apply(this,arguments),this.pX=null,this.pY=null}y(fp,ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var x=this.options.direction,I=[];return x&J&&I.push(Uf),x&Q&&I.push(Vf),I},directionTest:function(x){var I=this.options,V=!0,H=x.distance,et=x.direction,yt=x.deltaX,Yt=x.deltaY;return et&I.direction||(I.direction&J?(et=yt===0?st:yt<0?ft:$,V=yt!=this.pX,H=Math.abs(x.deltaX)):(et=Yt===0?st:Yt<0?G:X,V=Yt!=this.pY,H=Math.abs(x.deltaY))),x.direction=et,V&&H>I.threshold&&et&I.direction},attrTest:function(x){return ai.prototype.attrTest.call(this,x)&&(this.state&On||!(this.state&On)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var I=IC(x.direction);I&&(x.additionalEvent=this.options.event+I),this._super.emit.call(this,x)}});function n_(){ai.apply(this,arguments)}y(n_,ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Us]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&On)},emit:function(x){if(x.scale!==1){var I=x.scale<1?"in":"out";x.additionalEvent=this.options.event+I}this._super.emit.call(this,x)}});function i_(){Fo.apply(this,arguments),this._timer=null,this._input=null}y(i_,Fo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xC]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime>I.time;if(this._input=x,!H||!V||x.eventType&(St|At)&&!et)this.reset();else if(x.eventType&K)this.reset(),this._timer=f(function(){this.state=No,this.tryEmit()},I.time,this);else if(x.eventType&St)return No;return ji},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===No&&(x&&x.eventType&St?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function o_(){ai.apply(this,arguments)}y(o_,ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Us]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&On)}});function a_(){ai.apply(this,arguments)}y(a_,ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return fp.prototype.getTouchAction.call(this)},attrTest:function(x){var I=this.options.direction,V;return I&(J|Q)?V=x.overallVelocity:I&J?V=x.overallVelocityX:I&Q&&(V=x.overallVelocityY),this._super.attrTest.call(this,x)&&I&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&u(V)>this.options.velocity&&x.eventType&St},emit:function(x){var I=IC(x.offsetDirection);I&&this.manager.emit(this.options.event+I,x),this.manager.emit(this.options.event,x)}});function hp(){Fo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(hp,Fo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[e_]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime<I.time;if(this.reset(),x.eventType&K&&this.count===0)return this.failTimeout();if(H&&et&&V){if(x.eventType!=St)return this.failTimeout();var yt=this.pTime?x.timeStamp-this.pTime<I.interval:!0,Yt=!this.pCenter||Pr(this.pCenter,x.center)<I.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Yt||!yt?this.count=1:this.count+=1,this._input=x;var sr=this.count%I.taps;if(sr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=No,this.tryEmit()},I.interval,this),On):No}return ji},failTimeout:function(){return this._timer=f(function(){this.state=ji},this.options.interval,this),ji},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==No&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Bo(x,I){return I=I||{},I.recognizers=T(I.recognizers,Bo.defaults.preset),new s_(x,I)}Bo.VERSION="2.0.7",Bo.defaults={domEvents:!1,touchAction:kC,enable:!0,inputTarget:null,inputClass:null,preset:[[o_,{enable:!1}],[n_,{enable:!1},["rotate"]],[a_,{direction:J}],[fp,{direction:J},["swipe"]],[hp],[hp,{event:"doubletap",taps:2},["tap"]],[i_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var fj=1,OC=2;function s_(x,I){this.options=v({},Bo.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=rt(this),this.touchAction=new r_(this,this.options.touchAction),RC(this,!0),d(this.options.recognizers,function(V){var H=this.add(new V[0](V[1]));V[2]&&H.recognizeWith(V[2]),V[3]&&H.requireFailure(V[3])},this)}s_.prototype={set:function(x){return v(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?OC:fj},recognize:function(x){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(x);var V,H=this.recognizers,et=I.curRecognizer;(!et||et&&et.state&No)&&(et=I.curRecognizer=null);for(var yt=0;yt<H.length;)V=H[yt],I.stopped!==OC&&(!et||V==et||V.canRecognizeWith(et))?V.recognize(x):V.reset(),!et&&V.state&(On|Au|xa)&&(et=I.curRecognizer=V),yt++}},get:function(x){if(x instanceof Fo)return x;for(var I=this.recognizers,V=0;V<I.length;V++)if(I[V].options.event==x)return I[V];return null},add:function(x){if(h(x,"add",this))return this;var I=this.get(x.options.event);return I&&this.remove(I),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var I=this.recognizers,V=k(I,x);V!==-1&&(I.splice(V,1),this.touchAction.update())}return this},on:function(x,I){if(x!==i&&I!==i){var V=this.handlers;return d(M(x),function(H){V[H]=V[H]||[],V[H].push(I)}),this}},off:function(x,I){if(x!==i){var V=this.handlers;return d(M(x),function(H){I?V[H]&&V[H].splice(k(V[H],I),1):delete V[H]}),this}},emit:function(x,I){this.options.domEvents&&hj(x,I);var V=this.handlers[x]&&this.handlers[x].slice();if(!(!V||!V.length)){I.type=x,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var H=0;H<V.length;)V[H](I),H++}},destroy:function(){this.element&&RC(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function RC(x,I){var V=x.element;if(!!V.style){var H;d(x.options.cssProps,function(et,yt){H=z(V.style,yt),I?(x.oldCssProps[H]=V.style[H],V.style[H]=et):V.style[H]=x.oldCssProps[H]||""}),I||(x.oldCssProps={})}}function hj(x,I){var V=r.createEvent("Event");V.initEvent(x,!0,!0),V.gesture=I,I.target.dispatchEvent(V)}v(Bo,{INPUT_START:K,INPUT_MOVE:pt,INPUT_END:St,INPUT_CANCEL:At,STATE_POSSIBLE:up,STATE_BEGAN:On,STATE_CHANGED:Au,STATE_ENDED:xa,STATE_RECOGNIZED:No,STATE_CANCELLED:Gf,STATE_FAILED:ji,DIRECTION_NONE:st,DIRECTION_LEFT:ft,DIRECTION_RIGHT:$,DIRECTION_UP:G,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:lt,Manager:s_,Input:it,TouchAction:r_,TouchInput:sp,MouseInput:Vs,PointerEventInput:Qy,TouchMouseInput:t_,SingleTouchInput:PC,Recognizer:Fo,AttrRecognizer:ai,Tap:hp,Pan:fp,Swipe:a_,Pinch:n_,Rotate:o_,Press:i_,on:S,off:P,each:d,merge:m,extend:g,assign:v,inherit:y,bindFn:_,prefixed:z});var dj=typeof t<"u"?t:typeof self<"u"?self:{};dj.Hammer=Bo,typeof i=="function"&&i.amd?i(function(){return Bo}):e.exports?e.exports=Bo:t[n]=Bo})(window,document,"Hammer")})(Ef);const Ubt=Ef.exports,Ji=pj({__proto__:null,default:Ubt},[Ef.exports]),rV=1,nV=2,tT=4,Gbt={mousedown:rV,mousemove:nV,mouseup:tT};function jbt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function Wbt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(jbt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function Hbt(e){e.prototype.handler=function(r){let n=Gbt[r.type];n&rV&&r.button>=0&&(this.pressed=!0),n&nV&&r.which===0&&(n=tT),this.pressed&&(n&tT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}Wbt(Ef.exports.PointerEventInput);Hbt(Ef.exports.MouseInput);const Xbt=Ef.exports.Manager;class My{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const Ybt=Ji?[[Ji.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ji.Rotate,{enable:!1}],[Ji.Pinch,{enable:!1}],[Ji.Swipe,{enable:!1}],[Ji.Pan,{threshold:0,enable:!1}],[Ji.Press,{enable:!1}],[Ji.Tap,{event:"doubletap",taps:2,enable:!1}],[Ji.Tap,{event:"anytap",enable:!1}],[Ji.Tap,{enable:!1}]]:null,VL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},qbt={doubletap:["tap"]},Zbt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},hA={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Kbt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},UL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Jbt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",wc=typeof window<"u"?window:global;let eT=!1;try{const e={get passive(){return eT=!0,!0}};wc.addEventListener("test",null,e),wc.removeEventListener("test",null)}catch{eT=!1}const Qbt=Jbt.indexOf("firefox")!==-1,{WHEEL_EVENTS:twt}=hA,GL="wheel",jL=4.000244140625,ewt=40,rwt=.25;class nwt extends My{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;wc.WheelEvent&&(Qbt&&i.deltaMode===wc.WheelEvent.DOM_DELTA_PIXEL&&(o/=wc.devicePixelRatio),i.deltaMode===wc.WheelEvent.DOM_DELTA_LINE&&(o*=ewt)),o!==0&&o%jL===0&&(o=Math.floor(o/jL)),i.shiftKey&&o&&(o=o*rwt),this.callback({type:GL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(twt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,eT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===GL&&(this.options.enable=r)}}const{MOUSE_EVENTS:iwt}=hA,WL="pointermove",HL="pointerover",XL="pointerout",YL="pointerenter",qL="pointerleave";class owt extends My{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(iwt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===WL&&(this.enableMoveEvent=r),t===HL&&(this.enableOverEvent=r),t===XL&&(this.enableOutEvent=r),t===YL&&(this.enableEnterEvent=r),t===qL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(HL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(XL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(YL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(qL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(WL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:awt}=hA,ZL="keydown",KL="keyup";class swt extends My{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:ZL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:KL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(awt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===ZL&&(this.enableDownEvent=r),t===KL&&(this.enableUpEvent=r)}}const JL="contextmenu";class lwt extends My{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:JL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===JL&&(this.options.enable=r)}}const rT=1,c1=2,nT=4,uwt={pointerdown:rT,pointermove:c1,pointerup:nT,mousedown:rT,mousemove:c1,mouseup:nT},cwt=1,fwt=2,hwt=3,dwt=0,pwt=1,vwt=2,gwt=1,mwt=2,ywt=4;function _wt(e){const t=uwt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===nT||t===c1&&!Number.isFinite(r)?(o=i===cwt,a=i===fwt,s=i===hwt):t===c1?(o=Boolean(r&gwt),a=Boolean(r&ywt),s=Boolean(r&mwt)):t===rT&&(o=n===dwt,a=n===pwt,s=n===vwt),{leftButton:o,middleButton:a,rightButton:s}}function bwt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Pb={srcElement:"root",priority:0};class wwt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Pb;typeof n=="string"||n&&n.addEventListener?l={...Pb,srcElement:n}:n&&(l={...Pb,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,..._wt(t),...bwt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const Swt={events:null,recognizers:null,recognizerOptions:{},Manager:Xbt,touchAction:"none",tabIndex:0};class Twt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=Zbt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...Swt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||Ybt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(VL).forEach(i=>{const o=this.manager.get(i);o&&VL[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new nwt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new owt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new swt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new lwt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=qbt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=UL[t]||t;let u=s.get(l);u||(u=new wwt(this),s.set(l,u),u.recognizerName=Kbt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=UL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function gl(){}const Pwt=({isDragging:e})=>e?"grabbing":"grab",iV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:gl,onResize:gl,onViewStateChange:gl,onInteractionStateChange:gl,onBeforeRender:gl,onAfterRender:gl,onLoad:gl,onError:e=>Wt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:Pwt,getTooltip:null,debug:!1,drawPickingColors:!1};class dA{constructor(t){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),E(this,"_onEvent",r=>{const n=CL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),E(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...iV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Wt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),E$()==="IE"&&Wt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new _y({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&tf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Wt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Wt.removed("onLayerClick","onClick")(),t.initialViewState&&!Pf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return ur(this.viewManager),this.viewManager.views}getViewports(t){return ur(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){ur(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),ur(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new Umt({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>W$({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Jz({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,ZE(t,{enable:!0,copyState:!0})),this.tooltip=new Vbt(this.canvas),ga(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new Dz;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new Twt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in CL)this.eventManager.on(i,this._onEvent);this.viewManager=new ibt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new nbt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new Mbt,this.deckRenderer=new Obt(t),this.deckPicker=new $bt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ga(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Wt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Il.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}E(dA,"defaultProps",iV);E(dA,"VERSION",qpt.VERSION);class Eb{constructor(t,r){E(this,"opts",void 0),E(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function Ewt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function em(e){return e.stride||e.size*e.bytesPerElement}function oV(e,t){t.offset&&Wt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=em(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function Awt(e,t){const r=oV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class Cwt{constructor(t,r,n){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&_gt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=Ewt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Pe(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*em(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),tf.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=Awt(this.getAccessor(),r||{});return n[t]=new Eb(this,o.high),n["".concat(t,"64Low")]=i?new Eb(this,o.low):new Float32Array(this.size),n}if(r){const n=oV(this.getAccessor(),r);return{[t]:new Eb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Pe?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=em(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=em(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Sb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Sb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=tf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?Sb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Wt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const QL=[],tI=[];function ky(e,t=0,r=1/0){let n=QL;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(tI.length=e.length,n=tI):n=QL,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function aV(e){return e&&e[Symbol.asyncIterator]}function sV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const m=h*l+u;for(let y=0;y<r;y++)d[y]=e[m+y];return d}const p=o[h],v=o[h+1]||c;let g;if(a){g=new Array(v-p);for(let m=p;m<v;m++){const y=m*l+u;d=new Array(r);for(let _=0;_<r;_++)d[_]=e[y+_];g[m-p]=d}}else if(l===r)g=e.subarray(p*r+u,v*r+u);else{g=new e.constructor((v-p)*r);let m=0;for(let y=p;y<v;y++){const _=y*l+u;for(let w=0;w<r;w++)g[m++]=e[_+w]}}return g}}const Mwt=[],rm=[[0,1/0]];function kwt(e,t){if(e===rm||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function Ab(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function xwt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Ab({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;Ab({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&Ab({source:[],target:t,start:s,size:r,getData:l}),t}const Lwt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function lV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...Lwt[r],...t,...e,type:r}}function uV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function cV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function fV(e){e.push(e.shift())}function pA(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function hV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=pA(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const m=o;o=(y,_)=>r.normalizeConstant(m(y,_))}const p=h?(m,y)=>o(d,y):(m,y)=>o(d.subarray(m,m+s),y),v=e.getData({length:n}),g=new Float32Array(f);xwt({source:v,target:g,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<g.byteLength+l&&e.reallocate(g.byteLength+l),e.subData({data:g,offset:l})}class vA extends Cwt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:rm}),E(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return lV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=kwt(this.state.updateRanges,[n,i])}else this.state.updateRanges=rm}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Mwt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==rm),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;ur(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=sV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);ur(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=ky(r,n,i);for(const y of g){m.index++;let _=p(y,m);if(d&&(_=d.call(this,_)),f){const w=(m.index<f.length-1?f[m.index+1]:a)-f[m.index];if(_&&Array.isArray(_[0])){let T=v;for(const S of _)t._normalizeValue(S,u,T),T+=c}else _&&_.length>c?u.set(_,v):(t._normalizeValue(_,m.target,0),J2t({target:u,source:m.target,start:v,count:w}));v+=w*c}else t._normalizeValue(_,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class Iwt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.transition=new Y0(n),this.attribute=r,this.attributeInTransition=new vA(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=Rwt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;fV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)hV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=pA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:uV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const Owt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Rwt(e,t){const r=cV(t.size);return new lA(e,{vs:Owt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class Dwt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new Y0(n),this.attribute=r,this.attributeInTransition=new vA(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=Fwt(t),this.framebuffer=Bwt(t,this.texture),this.transform=Nwt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)hV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=pA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:uV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),fV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),Ty(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function Nwt(e,t,r){const n=cV(t.size);return new lA(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function Fwt(e){return new vn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Bwt(e,t){return new nr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const $wt={interpolation:Iwt,spring:Dwt};class zwt{constructor(t,{id:r,timeline:n}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=lA.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Wt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=$wt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Wt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const eI="attributeManager.invalidate",Vwt="attributeManager.updateStart",Uwt="attributeManager.updateEnd",Gwt="attribute.updateStart",jwt="attribute.allocate",Wwt="attribute.updateEnd";class Hwt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new zwt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Lr(eI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Lr(eI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Lr(Vwt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Wt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Lr(Uwt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new vA(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Lr(Gwt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Lr(jwt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Lr(Wwt,r,n))}}class Xwt extends Y0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=Gl(r,n,a)}}const rI=1e-5;function nI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function Ywt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=nI(e[a],t[a],r[a],n,i);return o}return nI(e,t,r,n,i)}function iI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class qwt extends Y0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=Ywt(o,a,r,n,i);const l=iI(s,r),u=iI(s,a);l<rI&&u<rI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const Zwt={interpolation:Xwt,spring:qwt};class Kwt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=lV(i),!i)return;const a=Zwt[i.type];if(!a){Wt.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function Jwt(e){const t=gA(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function Qwt(e,t){const r=dV({newProps:e,oldProps:t,propTypes:gA(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=eSt(e,t);let i=!1;return n||(i=rSt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:nSt(e,t),transitionsChanged:tSt(e,t)}}function tSt(e,t){if(!e.transitions)return!1;const r={},n=gA(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&iT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function dV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=iT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=iT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function iT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function eSt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function rSt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&oI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&oI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function nSt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function oI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,dV({oldProps:i,newProps:n,triggerName:r})}function gA(e){const t=e[u1],r=t&&t.constructor;return r?r._propTypes:{}}const iSt="count(): argument not an object",oSt="count(): argument not a container";function aSt(e){if(!lSt(e))throw new Error(iSt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(sSt(e))return Object.keys(e).length;throw new Error(oSt)}function sSt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function lSt(e){return e!==null&&typeof e=="object"}function uSt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const cSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},oT={};function fSt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof vn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new vn(r,{...t,parameters:{...cSt,...n,...e.props.textureParameters}});return oT[i.id]=!0,i}function hSt(e){!e||!(e instanceof vn)||oT[e.id]&&(e.delete(),delete oT[e.id])}const dSt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||d0(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Cb(e,t)}},accessor:{validate(e,t){const r=f1(e);return r==="function"||r===f1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Cb(e,t)}},array:{validate(e,t){return t.optional&&!e||d0(e)},equal(e,t,r){return r.compare?Cb(e,t):e===t}},object:{equal(e,t,r){return r.compare?Pf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>fSt(r,e),release:e=>{hSt(e)}}};function Cb(e,t){if(e===t)return!0;if(!d0(e)||!d0(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function pSt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=vSt(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function vSt(e,t){switch(f1(t)){case"object":return wh(e,t);case"array":return wh(e,{type:"array",value:t,compare:!1});case"boolean":return wh(e,{type:"boolean",value:t});case"number":return wh(e,{type:"number",value:t});case"function":return wh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function wh(e,t){return"type"in t?{name:e,...dSt[t.type],...t}:"value"in t?{name:e,type:f1(t.value),...t}:{name:e,type:"object",value:t}}function d0(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function f1(e){return d0(e)?"array":e===null?"null":typeof e}function gSt(e,t){const r=pV(e.constructor),n=Object.create(r);n[u1]=e,n[iu]={},n[ps]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function pV(e){const t=h1(e,"_mergedDefaultProps");return t||(mSt(e),e._mergedDefaultProps)}function mSt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=pV(r),i=h1(e,"defaultProps")||{},o=pSt(i),a=ySt(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};bSt(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};_St(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function ySt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=SSt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function _St(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])vV(this,o)||(this[o]=n);Wt.deprecated(i,t[r].join("/"))()}})}function bSt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=wSt(a))}e[Fc]=r,e[iu]={},Object.defineProperties(e,n)}function wSt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||aV(t)?this[iu][e]=t:this[ps][e]=t},get(){if(this[ps]){if(e in this[ps])return this[ps][e]||this[Fc][e];if(e in this[iu]){const t=this[u1]&&this[u1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Fc][e]}}return this[Fc][e]}}}function vV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h1(e,t){return vV(e,t)&&e[t]}function SSt(e){const t=h1(e,"layerName")||h1(e,"componentName");return t||Wt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let TSt=0;class mA{constructor(...t){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=gSt(this,t),this.id=this.props.id,this.count=TSt++}clone(t){const{props:r}=this,n={};for(const i in r[Fc])i in r[ps]?n[i]=r[ps][i]:i in r[iu]&&(n[i]=r[iu][i]);return new this.constructor({...r,...n,...t})}}E(mA,"componentName","Component");E(mA,"defaultProps",{});const PSt=Object.freeze({});class ESt{constructor(t){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||PSt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[ps]||{},n=t[iu]||t,i=t[Fc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(aV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class ASt extends ESt{constructor({attributeManager:t,layer:r}){super(r),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const CSt="layer.changeFlag",MSt="layer.initialize",kSt="layer.update",xSt="layer.finalize",LSt="layer.matched",aI=2**24-1,ISt=Object.freeze([]),OSt=X0(({oldViewport:e,viewport:t})=>e.equals(t));let Qi=new Uint8ClampedArray(0);const RSt={data:{type:"data",value:ISt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:r1(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):r1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:H0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:le.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Io extends mA{constructor(...t){super(...t),E(this,"internalState",null),E(this,"lifecycle",dc.NO_STATE),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ur(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Xz(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=Gz(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return ur(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){ur(this.internalState);const n=this.internalState.viewport||this.context.viewport;return K2t(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===le.DEFAULT||t===le.LNGLAT||t===le.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){ur(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:aSt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=uSt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!OSt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(Qi.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>aI&&Wt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Qi=tf.allocate(Qi,r,{size:3,copy:!0,maxCount:Math.max(r,aI)});const i=Math.floor(Qi.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),Qi[a*3+0]=o[0],Qi[a*3+1]=o[1],Qi[a*3+2]=o[2]}t.value=Qi.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==Qi.buffer&&(n.value=Qi.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ur(!this.internalState),ur(Number.isFinite(this.props.coordinateSystem)),Lr(MSt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new ASt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Wt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Kwt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Lr(LSt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Lr(kSt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Lr(xSt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];ga(o.gl,{polygonOffset:l}),Qn(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Lr(CSt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=Qwt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){Jwt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new Hwt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(Io,"defaultProps",RSt);E(Io,"layerName","Layer");const DSt="compositeLayer.renderLayers";class xy extends Io{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y,_subLayerProps:_}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y},T=_&&t.id&&_[t.id],S=T&&T.updateTriggers,P=t.id||"sublayer";if(T){const C=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const M in T){const k=A[M]||C[M];k&&k.type==="accessor"&&(T[M]=this.getSubLayerAccessor(T[M]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(P),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const C of g){const A=C.getSubLayerProps.call(this,C);A&&Object.assign(w,A,{updateTriggers:Object.assign(w.updateTriggers,A.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=Ay(o,Boolean),this.internalState.subLayers=n}Lr(DSt,this,i,n);for(const o of n)o.parent=this}}E(xy,"layerName","CompositeLayer");const Cv=Math.PI/180,sI=180/Math.PI,nm=6370972,Sc=256;function NSt(){const e=Sc/nm,t=Math.PI/180*Sc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class FSt extends Rs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Nr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Cv),c.rotateZ(-n*Cv),c.scale(f/l);const h=Math.atan(.5/u),d=Sc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:NSt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return Ti.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=Mb(l,[i,s,a,1]);else{const d=Mb(l,[i,s,-1,1]),p=Mb(l,[i,s,1,1]),v=((n||0)/nm+1)*Sc,g=gb(Ez([],d,p)),m=gb(d),y=gb(p),_=(4*m*y-(g-m-y)**2)/16,w=4*_/g,T=Math.sqrt(m-w),S=Math.sqrt(Math.max(0,v*v-w)),P=(T-S)/Math.sqrt(g);u=K1t([],d,p,P)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Cv,a=n*Cv,s=Math.cos(a),l=(i/nm+1)*Sc;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=Az(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*sI,u=a*sI,c=(o/Sc-1)*nm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Mb(e,t){const r=Tf([],t,e);return sA(r,r,1/r[3]),r}class gV{constructor(t){E(this,"opts",void 0),E(this,"typedArrayManager",void 0),E(this,"indexStarts",[0]),E(this,"vertexStarts",[0]),E(this,"vertexCount",0),E(this,"instanceCount",0),E(this,"attributes",void 0),E(this,"_attributeDefs",void 0),E(this,"data",void 0),E(this,"getGeometry",void 0),E(this,"geometryBuffer",void 0),E(this,"buffers",void 0),E(this,"positionSize",void 0),E(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=tf,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(ur(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?sV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=ky(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Pe){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const BSt=new Uint16Array([0,2,1,0,3,2]),$St=new Float32Array([0,1,0,0,1,0,1,1]);function zSt(e,t){if(!t)return VSt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),g=USt(e,d,v);u[c*3+0]=g[0],u[c*3+1]=g[1],u[c*3+2]=g[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function VSt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:BSt,texCoords:$St}}function USt(e,t,r){return Gl(Gl(e[0],e[1],r),Gl(e[3],e[2],r),t)}const GSt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,jSt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,WSt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(jSt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),HSt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:le.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class yA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:GSt,fs:WSt,modules:[yu,_u]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=XSt(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return lI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),zSt(r,this.context.viewport.resolution)}_getModel(t){return t?new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=le;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!lI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=Os([o[0],o[1]]),l=Os([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}E(yA,"layerName","BitmapLayer");E(yA,"defaultProps",HSt);function XSt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function lI(e){return Number.isFinite(e[0])}const YSt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,qSt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ZSt=1024,KSt=4,uI=()=>{},JSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function QSt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function t3t(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function p0(e){return e&&(e.id||e.url)}function e3t(e,t,r){const n=e.width,i=e.height,o=rz(e,{width:t,height:r});return vgt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function cI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=p0(i);e[a]={...i,x:o,y:r}}}function r3t({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=p0(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(cI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&cI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:QSt(o+i+t)}}function n3t(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=ky(e);for(const a of i){o.index++;const s=t(a,o),l=p0(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class i3t{constructor(t,{onUpdate:r=uI,onError:n=uI}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",KSt),E(this,"_canvasWidth",ZSt),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?p0(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(n3t(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=r3t({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new vn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||JSt})),this._texture.height!==this._canvasHeight&&(this._texture=e3t(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,r1(n.url,$$,this._loadOptions).then(i=>{const o=p0(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=t3t(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const mV=[0,0,0,255],o3t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:mV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class q0 extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:YSt,fs:qSt,modules:[yu,_u]})}initializeState(){this.state={iconManager:new i3t(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:mV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Is[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Wt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}E(q0,"defaultProps",o3t);E(q0,"layerName","IconLayer");const a3t=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,s3t=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,l3t=[0,0,0,255],u3t={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:l3t},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class _A extends Io{getShaders(){return super.getShaders({vs:a3t,fs:s3t,modules:[yu,_u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Is[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}E(_A,"layerName","LineLayer");E(_A,"defaultProps",u3t);const c3t=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,f3t=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,fI=[0,0,0,255],h3t={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:fI},getLineColor:{type:"accessor",value:fI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class bA extends Io{getShaders(){return super.getShaders({vs:c3t,fs:f3t,modules:[yu,_u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Is[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Is[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}E(bA,"defaultProps",h3t);E(bA,"layerName","ScatterplotLayer");const yV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function _V(e,t,r={}){return d3t(e,r)!==t?(v3t(e,r),!0):!1}function d3t(e,t={}){return Math.sign(p3t(e,t))}function p3t(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function v3t(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Ei(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function aT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function v0(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function sT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function im(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function bV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=v0(e,0,r,a);let h,d;const p=SV(f,i,o,[]),v=[];Ei(u,f);for(let g=1;g<l;g++){for(h=v0(e,g,r,a,h),d=im(h,p);d;){sT(f,h,d,p,v);const m=im(v,p);m&&(sT(f,v,m,p,v),d=m),Ei(u,v),aT(f,v),m3t(p,i,d),n&&u.length>r&&(u=[],c.push(u),Ei(u,f)),d=im(h,p)}Ei(u,h),aT(f,h)}return n?c:c[0]}const hI=0,g3t=1;function Mv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function wV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(g3t):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();y3t(f,n,d[0]||f.length,u),c=SV(u[0],i,o,c);const p=im(u[1],c);if(p){let v=dI(f,h,n,0,d[0]||f.length,c,p);const g={pos:v[0].pos,types:v[0].types,holes:[]},m={pos:v[1].pos,types:v[1].types,holes:[]};l.push(g,m);for(let y=0;y<d.length;y++)v=dI(f,h,n,d[y],d[y+1]||f.length,c,p),v[0]&&(g.holes.push(g.pos.length),g.pos=Mv(g.pos,v[0].pos),a&&(g.types=Mv(g.types,v[0].types))),v[1]&&(m.holes.push(m.pos.length),m.pos=Mv(m.pos,v[1].pos),a&&(m.types=Mv(m.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function dI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const g=v0(e,s-1,r,n);let m=Math.sign(a&8?g[1]-o[3]:g[0]-o[2]),y=t&&t[s-1],_=0,w=0;for(let T=0;T<s;T++)d=v0(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&m&&m!==p&&(sT(g,d,a,o,h),Ei(l,h)&&c.push(y),Ei(u,h)&&f.push(y)),p<=0?(Ei(l,d)&&c.push(v),_-=p):c.length&&(c[c.length-1]=hI),p>=0?(Ei(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=hI),aT(g,d),m=p,y=v;return[_?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function SV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function m3t(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function y3t(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const _3t=85.051129;function b3t(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);TV(a,r,0,i-n);const s=bV(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)PV(l,r);return s}function w3t(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=S3t(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];TV(a,n,d,u),T3t(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=wV(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)PV(f.positions,n);return c}function S3t(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function T3t(e,t,r,n,i=_3t){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=v0(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Ei(e,s),s[1]=Math.sign(s[1])*i,Ei(e,s),s[0]=o,Ei(e,s)}}function TV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function PV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function P3t(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?bV(i,{size:t,gridResolution:r}):n?b3t(i,{size:t}):i}const E3t=1,A3t=2,kb=4;class C3t extends gV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?P3t(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(pI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&pI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=kb,n[o+a-2]=kb):(n[o]+=E3t,n[o+a-2]+=A3t),n[o+a-1]=kb}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function pI(e){return Array.isArray(e[0])}const M3t=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,k3t=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,EV=[0,0,0,255],x3t={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:EV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},xb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class wA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:M3t,fs:k3t,modules:[yu,_u]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:xb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:xb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:xb,defaultValue:EV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new C3t({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Is[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}E(wA,"defaultProps",x3t);E(wA,"layerName","PathLayer");var SA={exports:{}};SA.exports=Ly;SA.exports.default=Ly;function Ly(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=AV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=D3t(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return g0(o,a,r,s,l,d,0),a}function AV(e,t,r,n,i){var o,a;if(i===cT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=vI(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=vI(o,e[o],e[o+1],a);return a&&Iy(a,a.next)&&(y0(a),a=a.next),a}function ou(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Iy(r,r.next)||Ue(r.prev,r,r.next)===0)){if(y0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function g0(e,t,r,n,i,o,a){if(!!e){!a&&o&&z3t(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?I3t(e,n,i,o):L3t(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),y0(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=O3t(ou(e),t,r),g0(e,t,r,n,i,o,2)):a===2&&R3t(e,t,r,n,i,o):g0(ou(e),t,r,n,i,o,1);break}}}}function L3t(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Tc(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function I3t(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=lT(d,p,t,r,n),y=lT(v,g,t,r,n),_=e.prevZ,w=e.nextZ;_&&_.z>=m&&w&&w.z<=y;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&Tc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Tc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=m;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&Tc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=y;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Tc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function O3t(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Iy(i,o)&&CV(i,n,n.next,o)&&m0(i,o)&&m0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),y0(n),y0(n.next),n=e=o),n=n.next}while(n!==e);return ou(n)}function R3t(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&G3t(a,s)){var l=MV(a,s);a=ou(a,a.next),l=ou(l,l.next),g0(a,t,r,n,i,o,0),g0(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function D3t(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=AV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(U3t(u));for(i.sort(N3t),o=0;o<i.length;o++)r=F3t(i[o],r);return r}function N3t(e,t){return e.x-t.x}function F3t(e,t){var r=B3t(e,t);if(!r)return t;var n=MV(r,e);return ou(n,n.next),ou(r,r.next)}function B3t(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&Tc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),m0(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&$3t(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function $3t(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function z3t(e,t,r,n){var i=e;do i.z===0&&(i.z=lT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,V3t(i)}function V3t(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function lT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function U3t(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Tc(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function G3t(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!j3t(e,t)&&(m0(e,t)&&m0(t,e)&&W3t(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||Iy(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Iy(e,t){return e.x===t.x&&e.y===t.y}function CV(e,t,r,n){var i=xv(Ue(e,t,r)),o=xv(Ue(e,t,n)),a=xv(Ue(r,n,e)),s=xv(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&kv(e,r,t)||o===0&&kv(e,n,t)||a===0&&kv(r,e,n)||s===0&&kv(r,t,n))}function kv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function xv(e){return e>0?1:e<0?-1:0}function j3t(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&CV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function m0(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function W3t(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function MV(e,t){var r=new uT(e.i,e.x,e.y),n=new uT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function vI(e,t,r,n){var i=new uT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function y0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ly.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(cT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(cT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function cT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}Ly.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Lv=yV.CLOCKWISE,gI=yV.COUNTER_CLOCKWISE,vs={isClosed:!0};function H3t(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function ed(e){return"positions"in e?e.positions:e}function om(e){return"holeIndices"in e?e.holeIndices:null}function X3t(e){return Array.isArray(e[0])}function Y3t(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function q3t(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Z3t(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function mI(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!q3t(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return vs.start=t,vs.end=o,vs.size=n,_V(e,i,vs),o}function yI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!Z3t(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return vs.start=t,vs.end=l,vs.size=n,_V(e,a,vs),l}function K3t(e,t){H3t(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=yI(r,a,i,t,o[s-1],o[s],s===0?Lv:gI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!X3t(e))return yI(r,0,e,t,0,r.length,Lv),r;if(!Y3t(e)){let i=0;for(const[o,a]of e.entries())i=mI(r,i,a,t,o===0?Lv:gI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return mI(r,0,e,t,Lv),r}function J3t(e,t,r){let n=om(e);n&&(n=n.map(o=>o/t));let i=ed(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return SA.exports(i,n,t)}class Q3t extends gV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=K3t(t,this.positionSize);return this.opts.resolution?wV(ed(r),om(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?w3t(ed(r),om(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(_I(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return ed(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&_I(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=J3t(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=ed(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&om(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function _I(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const kV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,tTt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(kV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),eTt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(kV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),rTt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,d1=[0,0,0,255],nTt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:d1},getLineColor:{type:"accessor",value:d1},material:!0},Iv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class TA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?tTt:eTt,fs:rTt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[yu,d_t,_u]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===le.DEFAULT&&(n=le.LNGLAT),this.setState({numInstances:0,polygonTesselator:new Q3t({preproject:n===le.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||QE(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Iv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Iv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Iv,accessor:"getFillColor",defaultValue:d1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Iv,accessor:"getLineColor",defaultValue:d1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new ma(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new ma(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new mu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}E(TA,"defaultProps",nTt);E(TA,"layerName","SolidPolygonLayer");function iTt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function oTt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?aTt(e,n,r):null}function aTt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function sTt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const lTt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,bI=192/256,wI=[],uTt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class PA extends q0{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:lTt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Wt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:bI,outlineBuffer:i?Math.max(n,bI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):wI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):wI}}E(PA,"defaultProps",uTt);E(PA,"layerName","MultiIconLayer");var EA={exports:{}};EA.exports=Z0;EA.exports.default=Z0;var Bc=1e20;function Z0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function cTt(e,t,r,n,i,o,a){o.fill(Bc,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Bc;else if(f===0)o[c]=Bc,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function fTt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}Z0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return cTt(d,o,s,a,l,this.gridOuter,this.gridInner),SI(this.gridOuter,o,s,this.f,this.v,this.z),SI(this.gridInner,o,s,this.f,this.v,this.z),fTt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};Z0.prototype.draw=function(e){return this._draw(e,!1).data};Z0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function SI(e,t,r,n,i,o){for(var a=0;a<t;a++)TI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)TI(e,s*t,1,t,n,i,o)}function TI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Bc,a[1]=Bc,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Bc}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const hTt=32,dTt=[];function pTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function vTt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:pTt(s+(l+1)*c)}}function xV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function LV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=xV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function gTt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=xV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=LV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function mTt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?LV(e,i,o,r,n,a):gTt(e,i,o,r,n,a),a}function yTt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Wt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=hTt)}o[0]=a,o[1]=s}function PI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let g=0;g<=a;g++){const m=o[g];if((m===`
`||g===a)&&(v=g),v>p){const y=c?mTt(o,r,n,i,p,v):dTt;for(let _=0;_<=y.length;_++){const w=_===0?p:y[_-1],T=_<y.length?y[_]:v;yTt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}m===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function _Tt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,g=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class IV{constructor(t=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function bTt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Id={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:bTt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},EI=1024,wTt=.9,AI=1.2,OV=3;let p1=new IV(OV);function STt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=p1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function TTt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function CI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function PTt(e){Wt.assert(Number.isFinite(e)&&e>=OV,"Invalid cache limit"),p1=new IV(e)}class ETt{constructor(){E(this,"props",{...Id}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return AI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=STt(this._key,this.props.characterSet),i=p1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,p1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=EI);const h=f.getContext("2d");CI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:g}=vTt({getFontWidth:m=>h.measureText(m).width,fontHeight:a*AI,buffer:s,characterSet:r,maxCanvasWidth:EI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const m=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(m,0,0)}if(CI(h,i,a,o),l){const m=new EA.exports(a,s,u,c,i,o),y=h.getImageData(0,0,m.size,m.size);for(const _ of r)TTt(m.draw(_),y),h.putImageData(y,d[_].x-s,d[_].y+s)}else for(const m of r)h.fillText(m,d[m].x,d[m].y+a*wTt);return{xOffset:v,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const ATt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,CTt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,MTt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class AA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:ATt,fs:CTt,modules:[yu,_u]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Is[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new mu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}E(AA,"defaultProps",MTt);E(AA,"layerName","TextBackgroundLayer");const MI={start:1,middle:0,end:-1},kI={top:1,center:0,bottom:-1},Lb=[0,0,0,255],kTt=1,xTt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Lb},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Id.characterSet},fontFamily:Id.fontFamily,fontWeight:Id.fontWeight,lineHeight:kTt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Lb},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Lb},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class CA extends xy{constructor(...t){super(...t),E(this,"state",void 0),E(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=PI(f,l,a,s,i),p=MI[typeof u=="function"?u(r,n):u],v=kI[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),E(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,g]}=PI(f,l,a,s,i),m=MI[typeof u=="function"?u(r,n):u],y=kI[typeof c=="function"?c(r,n):c],_=h.length,w=new Array(_*2);let T=0;for(let S=0;S<_;S++){const P=(1-m)*(v-p[S])/2;w[T++]=(m-1)*v/2+P+h[S],w[T++]=(y-1)*g/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new ETt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=_Tt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=ky(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:_,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:C,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:R,updateTriggers:B}=this.props,z=this.getSubLayerClass("characters",PA),N=this.getSubLayerClass("background",AA);return[_&&new N({getFillColor:v,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:R&&{getPosition:R.getPosition,getAngle:R.getAngle,getSize:R.getSize,getFillColor:R.getBackgroundColor,getLineColor:R.getBorderColor,getLineWidth:R.getBorderWidth,getPixelOffset:R.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new z({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Id.smoothing,outlineWidth:S,outlineColor:P,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C*i,sizeUnits:A,sizeMinPixels:M*i,sizeMaxPixels:k*i,transitions:R&&{getPosition:R.getPosition,getAngle:R.getAngle,getColor:R.getColor,getSize:R.getSize,getPixelOffset:R.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){PTt(t)}}E(CA,"defaultProps",xTt);E(CA,"layerName","TextLayer");const am={circle:{type:bA,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:q0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:CA,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},sm={type:wA,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},fT={type:TA,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Sh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Ib(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function LTt(e){if(Array.isArray(e))return e;switch(Wt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Wt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function xI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Wt.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Wt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];LI(f,n,t,s,a)}}else LI(l,n,t,s,a)}return n}function LI(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!OTt(o,a)){Wt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const ITt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function OTt(e,t){let r=ITt[e];for(Wt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function RV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Ov(e){return e.geometry.coordinates}function RTt(e,t){const r=RV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Ov,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Ov,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Ov,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Ov,r}function DTt(e,t){const r=RV(),{points:n,lines:i,polygons:o}=e,a=sTt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const NTt=["points","linestrings","polygons"],FTt={...Sh(am.circle),...Sh(am.icon),...Sh(am.text),...Sh(sm),...Sh(fT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class MA extends xy{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=DTt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=LTt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=xI(n,i,u);for(const f in l)a[f].push(iTt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=xI(n,i);const s=RTt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=NTt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,fT.type);if(o){const a=Ib(this,fT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,sm.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,sm.type);if(a||s){const l=Ib(this,sm.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=am[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Ib(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=oTt(o,a);return t(s,i)}}}E(MA,"layerName","GeoJsonLayer");E(MA,"defaultProps",FTt);class BTt{constructor(t){E(this,"index",void 0),E(this,"isVisible",void 0),E(this,"isSelected",void 0),E(this,"parent",void 0),E(this,"children",void 0),E(this,"content",void 0),E(this,"state",void 0),E(this,"layers",void 0),E(this,"id",void 0),E(this,"bbox",void 0),E(this,"zoom",void 0),E(this,"userData",void 0),E(this,"_abortController",void 0),E(this,"_loader",void 0),E(this,"_loaderId",void 0),E(this,"_isLoaded",void 0),E(this,"_isCancelled",void 0),E(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Wt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Ir={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},II=new _t,$Tt=new _t;class kA{constructor(t=[0,0,0],r=[0,0,0],n){E(this,"center",void 0),E(this,"halfDiagonal",void 0),E(this,"minimum",void 0),E(this,"maximum",void 0),n=n||II.copy(t).add(r).scale(.5),this.center=new _t(n),this.halfDiagonal=new _t(r).subtract(this.center),this.minimum=new _t(t),this.maximum=new _t(r)}clone(){return new kA(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=$Tt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Ir.INSIDE:o+i<0?Ir.OUTSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=II.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Th=new _t,OI=new _t;class xA{constructor(t=[0,0,0],r=0){E(this,"center",void 0),E(this,"radius",void 0),this.radius=-0,this.center=new _t,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Th.from(r),this.center=new _t().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new xA(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=Th.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return OI.copy(a).scale((-n+l)/s).add(r),this.center.copy(OI),this.radius=l,this}expand(t){const n=Th.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=myt(Th,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Th.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Ir.OUTSIDE:o<n?Ir.INTERSECTING:Ir.INSIDE}}const zTt=new _t,VTt=new _t,Rv=new _t,Dv=new _t,Nv=new _t,UTt=new _t,GTt=new _t,jo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class LA{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){E(this,"center",void 0),E(this,"halfAxes",void 0),this.center=new _t().from(t),this.halfAxes=new wr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new _t(t).len(),new _t(r).len(),new _t(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new _t(t).normalize(),o=new _t(r).normalize(),a=new _t(n).normalize();return new SL().fromMatrix3(new wr([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new SL(n),o=new wr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new _t().from(t),this.halfAxes=o,this}clone(){return new LA(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new xA){const r=this.halfAxes,n=r.getColumn(0,Rv),i=r.getColumn(1,Dv),o=r.getColumn(2,Nv),a=zTt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[jo.COLUMN0ROW0]+a*i[jo.COLUMN0ROW1]+s*i[jo.COLUMN0ROW2])+Math.abs(o*i[jo.COLUMN1ROW0]+a*i[jo.COLUMN1ROW1]+s*i[jo.COLUMN1ROW2])+Math.abs(o*i[jo.COLUMN2ROW0]+a*i[jo.COLUMN2ROW1]+s*i[jo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Ir.OUTSIDE:u>=l?Ir.INSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=VTt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Rv),o=n.getColumn(1,Dv),a=n.getColumn(2,Nv),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Rv),u=s.getColumn(1,Dv),c=s.getColumn(2,Nv),f=UTt.copy(l).add(u).add(c).add(a),h=GTt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Rv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Dv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Nv);return i.transformAsPoint(t),this.halfAxes=new wr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const RI=new _t,DI=new _t;class ef{constructor(t=[0,0,1],r=0){E(this,"normal",void 0),E(this,"distance",void 0),this.normal=new _t,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return f0(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=RI.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),f0(So(this.normal.len(),1)),this.distance=i,this}clone(){return new ef(this.normal,this.distance)}equals(t){return So(this.distance,t.distance)&&So(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=DI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=RI.from(t);const n=this.getPointDistance(t),i=DI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const NI=[new _t([1,0,0]),new _t([0,1,0]),new _t([0,0,1])],FI=new _t,jTt=new _t;new ef(new _t(1,0,0),0);class oa{constructor(t=[]){E(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*NI.length;const r=t.center,n=t.radius;let i=0;for(const o of NI){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new ef),s||(s=this.planes[i+1]=new ef);const l=FI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=FI.copy(o).scale(n).add(r),c=jTt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Ir.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Ir.OUTSIDE:return Ir.OUTSIDE;case Ir.INTERSECTING:r=Ir.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(f0(Number.isFinite(r),"parentPlaneMask is required."),r===oa.MASK_OUTSIDE||r===oa.MASK_INSIDE)return r;let n=oa.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===Ir.OUTSIDE)return oa.MASK_OUTSIDE;l===Ir.INTERSECTING&&(n|=a)}return n}}E(oa,"MASK_OUTSIDE",4294967295);E(oa,"MASK_INSIDE",0);E(oa,"MASK_INDETERMINATE",2147483647);new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;const uo=new wr,WTt=new wr,HTt=new wr,Fv=new wr,BI=new wr;function XTt(e,t={}){const r=Oz.EPSILON20,n=10;let i=0,o=0;const a=WTt,s=HTt;a.identity(),s.copy(e);const l=r*YTt(s);for(;o<n&&qTt(s)>l;)ZTt(s,Fv),BI.copy(Fv).transpose(),s.multiplyRight(Fv),s.multiplyLeft(BI),a.multiplyRight(Fv),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function YTt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const hT=[1,0,0],dT=[2,2,1];function qTt(e){let t=0;for(let r=0;r<3;++r){const n=e[uo.getElementIndex(dT[r],hT[r])];t+=2*n*n}return Math.sqrt(t)}function ZTt(e,t){const r=Oz.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[uo.getElementIndex(dT[u],hT[u])]);c>n&&(i=u,n=c)}const o=hT[i],a=dT[i];let s=1,l=0;if(Math.abs(e[uo.getElementIndex(a,o)])>r){const u=e[uo.getElementIndex(a,a)],c=e[uo.getElementIndex(o,o)],f=e[uo.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return wr.IDENTITY.to(t),t[uo.getElementIndex(o,o)]=t[uo.getElementIndex(a,a)]=s,t[uo.getElementIndex(a,o)]=l,t[uo.getElementIndex(o,a)]=-l,t}const Ha=new _t,KTt=new _t,JTt=new _t,QTt=new _t,tPt=new _t,ePt=new wr,rPt={diagonal:new wr,unitary:new wr};function nPt(e,t=new LA){if(!e||e.length===0)return t.halfAxes=new wr([0,0,0,0,0,0,0,0,0]),t.center=new _t,t;const r=e.length,n=new _t(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const A of e){const M=Ha.copy(A).subtract(n);o+=M.x*M.x,a+=M.x*M.y,s+=M.x*M.z,l+=M.y*M.y,u+=M.y*M.z,c+=M.z*M.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=ePt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=XTt(f,rPt),d=t.halfAxes.copy(h);let p=d.getColumn(0,JTt),v=d.getColumn(1,QTt),g=d.getColumn(2,tPt),m=-Number.MAX_VALUE,y=-Number.MAX_VALUE,_=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Ha.copy(A),m=Math.max(Ha.dot(p),m),y=Math.max(Ha.dot(v),y),_=Math.max(Ha.dot(g),_),w=Math.min(Ha.dot(p),w),T=Math.min(Ha.dot(v),T),S=Math.min(Ha.dot(g),S);p=p.multiplyByScalar(.5*(w+m)),v=v.multiplyByScalar(.5*(T+y)),g=g.multiplyByScalar(.5*(S+_)),t.center.copy(p).add(v).add(g);const P=KTt.set(m-w,y-T,_-S).multiplyByScalar(.5),C=new wr([P[0],0,0,0,P[1],0,0,0,P[2]]);return t.halfAxes.multiplyRight(C),t}const Pc=512,$I=3,DV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],NV=DV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),iPt=NV.concat([[.25,.5],[.75,.5]]);class Ec{constructor(t,r,n){E(this,"x",void 0),E(this,"y",void 0),E(this,"z",void 0),E(this,"childVisible",void 0),E(this,"selected",void 0),E(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Ec(t,r,n),new Ec(t,r+1,n),new Ec(t+1,r,n),new Ec(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=Pc/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?iPt:this.z<2?NV:DV,u=[];for(const c of l){const f=pT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return nPt(u)}const i=Math.pow(2,this.z),o=Pc/i,a=this.x*o+r*Pc,s=Pc-(this.y+1)*o;return new kA([a,s,t[0]],[a+o,s+o,t[1]])}}function oPt(e,t,r,n){const i=e instanceof FSt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new ef(d.clone().negate(),p)),a=new oa(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Mo&&e.pitch<=60?t:0;if(n){const[d,p,v,g]=n,m=Os([d,g]),y=Os([v,p]);n=[m[0],Pc-m[1],y[0],Pc-y[1]]}const f=new Ec(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Mo&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-$I););for(h.offset=1;f.update(h)&&!(++h.offset>$I););}return f.getSelected()}const _a=512,aPt=[-1/0,-1/0,1/0,1/0],sPt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function FV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function lPt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function uPt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=lPt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function cPt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function v1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=v1({viewport:e,z:t[0],cullRect:r}),l=v1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function fPt(e,t,r){return r?FV(e,r).map(i=>i*t/_a):e.map(n=>n*t/_a)}function IA(e,t){return Math.pow(2,e)*_a/t}function pT(e,t,r){const n=IA(r,_a),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function zI(e,t,r,n){const i=IA(r,n);return[e/i*_a,t/i*_a]}function hPt(e,t,r,n,i=_a){if(e.isGeospatial){const[u,c]=pT(t,r,n),[f,h]=pT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=zI(t,r,n,i),[s,l]=zI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function dPt(e,t,r,n,i){const o=cPt(e,null,n),a=IA(t,r),[s,l,u,c]=fPt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function pPt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=_a,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(_a/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=FV(i,a)),e.isGeospatial?oPt(e,u,n,i):dPt(e,u,o,c||aPt,s)}const VI=1,Oy=2,vPt="never",gPt="no-overlap",OA="best-available",mPt=5,yPt={[OA]:bPt,[gPt]:wPt,[vPt]:()=>{}};class _Pt{constructor(t){E(this,"opts",void 0),E(this,"_requestScheduler",void 0),E(this,"_cache",void 0),E(this,"_dirty",void 0),E(this,"_tiles",void 0),E(this,"_cacheByteSize",void 0),E(this,"_viewport",void 0),E(this,"_zRange",void 0),E(this,"_selectedTiles",void 0),E(this,"_frameNumber",void 0),E(this,"_modelMatrix",void 0),E(this,"_modelMatrixInverse",void 0),E(this,"_maxZoom",void 0),E(this,"_minZoom",void 0),E(this,"onTileLoad",void 0),E(this,"_getCullBounds",X0(v1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new u0t({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Nr,this._modelMatrixInverse=new Nr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Nr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!So(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=v1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return pPt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:hPt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||OA,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:yPt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:mPt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new BTt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function bPt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!BV(t)&&RA(t);for(const t of e)t.isVisible=Boolean(t.state&Oy)}function wPt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&BV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&Oy),r.children&&(r.isVisible||r.state&VI))for(const n of r.children)n.state=VI;else r.isSelected&&RA(r)}function BV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=Oy,!0;t=t.parent}return!1}function RA(e){for(const t of e.children)t.isLoaded||t.content?t.state|=Oy:RA(t)}const SPt={TilesetClass:_Pt,data:{type:"data",value:[]},dataComparator:sPt.equals,renderSubLayers:{type:"function",value:e=>new MA(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:OA,zRange:null,maxRequests:6,zoomOffset:0};class DA extends xy{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?uPt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=Ay(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}E(DA,"defaultProps",SPt);E(DA,"layerName","TileLayer");var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.calcRdx=EPt;bu.isFunction=CPt;var TPt=bu.isNumber=MPt;bu.toVector=kPt;bu.isArray=void 0;var PPt=Array.prototype.concat,$V=Object.prototype.toString;function EPt(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}var APt=Array.isArray||function(t){return $V.call(t)==="[object Array]"};bu.isArray=APt;function CPt(e){return $V.call(e)==="[object Function]"}function MPt(e){return typeof e=="number"?e-e===0:!1}function kPt(e){return PPt.apply([],e)}const xPt={setup(){const e=xt(),t=se(),r=Po(),n=F1();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panToPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panToPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panToPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new Cy({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){console.log("iconsCalc");let e=[];return this.iconData&&this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]})}),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.clickedObject.key in this.gameStore._tnk2tk){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(!TPt(r.job))return;const n=this.userStore.pzJobs[r.job];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o})}}return e}},methods:{makeIconImg:hY,formatFixed:Ft,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.towns;let i=new jh((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new q0({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>e.taken?[0,0,0,255]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.countNodesTaken},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new _A({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new DA({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new yA(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new dA({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new fA({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},LPt={id:"deck-canvas",ref:"canvas"},IPt={id:"hack"};function OPt(e,t,r,n,i,o){return O(),D(W,null,[b("canvas",LPt,null,512),b("div",IPt,L(o.iconsCalc.length)+" icons",1)],64)}const RPt=$e(xPt,[["render",OPt],["__scopeId","data-v-a056ba81"]]);const DPt={setup(){const e=se();return{gameStore:xt(),userStore:e}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Ni,formatFixed:Ft,strShortenLeft:gY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now();let t=[];this.gameStore.towns.forEach(n=>{const i=this.gameStore.dijDiscountedNearestPlantzones(n,10);t[n]=i});let r=[];for(const[n,i]of Object.entries(t))i.forEach(([o,a,s])=>{if(this.userStore.workedPlantzones.has(o.toString()))return;const l=this.gameStore.profitPzTownArtisans(o,n,a);l.path=s,l.connected&&r.push(l)});return r.sort((n,i)=>i.dailyPerCp-n.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),r}}},NA=e=>(en("data-v-0f680346"),e=e(),rn(),e),NPt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},FPt={key:0},BPt=["href"],$Pt=["src","data-key"],zPt={class:"right"},VPt={key:1},UPt=NA(()=>b("tr",null,[b("th",{rowspan:"2"},"town"),b("th",{rowspan:"2"},"job"),b("th",{rowspan:"2"},"M$/day"),b("th",{colspan:"2"},"CP"),b("th",{rowspan:"2"},"Efficiency")],-1)),GPt=NA(()=>b("tr",null,[b("th",null,"\xA0\xA0\u{1F5FA}\uFE0F\xA0\xA0"),b("th",null,"\u{1F6CF}\uFE0F\u{1F4E6}")],-1)),jPt=["onClick"],WPt={class:""},HPt={class:"hlim parent"},XPt=["onClick"],YPt={class:"hlim right"},qPt=["src"],ZPt={key:1,class:"hlim left"},KPt={class:"tar"},JPt={class:"tar"},QPt={class:"tar"},tEt={class:"tar"},eEt={class:"fsxs"},rEt=NA(()=>b("tr",null,[b("th",null,"town"),b("th",null,"job"),b("th",null,"worker"),b("th",null,"M$/day"),b("th",null,"\u{1F5FA}\uFE0FCP"),b("th",null,"M$/day/CP")],-1)),nEt=["onClick"],iEt={class:"hlim parent"},oEt=["onClick"],aEt={class:"hlim right"},sEt=["src"],lEt={class:"tac"},uEt=["title"],cEt={class:"tac"},fEt=["title"];function hEt(e,t,r,n,i,o){const a=de("RouterLink");return O(),D(W,null,[b("nav",NPt,[b("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:Yr({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),b("span",{onClick:t[1]||(t[1]=s=>e.activeTab="ranking"),class:Yr({tab:1,green:e.activeTab!="ranking"})},"Worst Taken",2),b("span",{onClick:t[2]||(t[2]=s=>e.activeTab="next"),class:Yr({tab:1,green:e.activeTab!="next"})},"Best Untaken",2)]),e.activeTab=="daily"?(O(),D("div",FPt,[b("table",null,[(O(!0),D(W,null,Nt(n.userStore.jobsTally,(s,l)=>(O(),D("tr",null,[b("td",null,[b("a",{href:this.userStore.itemUrl+l},[b("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,$Pt),U(" "+L(n.gameStore.uloc.item[l]),1)],8,BPt)]),b("td",zPt,L(o.formatFixed(s,s<1?2:s<10?1:0)),1)]))),256))])])):ut("",!0),e.activeTab=="ranking"?(O(),D("table",VPt,[UPt,GPt,(O(!0),D(W,null,Nt(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(O(),D("tr",null,[b("td",null,[b("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,jPt)]),b("td",WPt,[b("div",HPt,[s.job in n.userStore.pzJobs?(O(),D(W,{key:0},[b("span",{class:"hlim left clickable",onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job].pos)},L(n.gameStore.parentNodeName(s.job)),9,XPt),b("span",YPt,[(O(!0),D(W,null,Nt(n.gameStore.plantzones[s.job].itemkeys,c=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(c),class:"iconitem"},null,8,qPt)]),_:2},1032,["to"]))),256))])],64)):(O(),D("span",ZPt,L(n.gameStore.workerJobDescription(s)),1))])]),b("td",KPt,L(o.formatFixed(l,2)),1),b("td",JPt,L(o.formatFixed(n.userStore.workerSharedCp(s),2)),1),b("td",QPt,L(o.formatFixed(n.userStore.workerSharedLodgingCp(s),2)),1),b("td",tEt,L(o.formatFixed(u,2)),1)]))),256))])):ut("",!0),e.activeTab=="next"?(O(),D(W,{key:2},[b("span",eEt,"Compares 10 nearest (by CP) untaken nodes near each town. Uses stats of median 40lvl artisan. Doesn't include "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" costs.",1),b("table",null,[rEt,(O(!0),D(W,null,Nt(o.untakenPlantzonesNearestCpTownProfit,s=>(O(),D("tr",null,[b("td",null,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.nodeName(s.tnk)),9,nEt)]),b("td",null,[b("div",iEt,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.key].pos),class:"hlim left clickable"},L(n.gameStore.parentNodeName(s.key)),9,oEt),b("span",aEt,[(O(!0),D(W,null,Nt(s.itemkeys,l=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,sEt)]),_:2},1032,["to"]))),256))])])]),b("td",lEt,[s.alt_workers?(O(),D("abbr",{key:0,class:"tooltip",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day = ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,uEt)):ut("",!0)]),b("td",null,L(o.formatFixed(s.priceDaily,2)),1),b("td",cEt,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`)},L(o.formatFixed(s.cp)),9,fEt)]),b("td",null,L(o.formatFixed(s.dailyPerCp,2)),1)]))),256))])],64)):ut("",!0)],64)}const dEt=$e(DPt,[["render",hEt],["__scopeId","data-v-0f680346"]]);const pEt={setup(){const e=xt(),t=se(),r=Po(),n=F1();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:O7,Town:HY,Plantzone:gq,ModalDialog:bP,WorkerEdit:g$,WorkerSendSelection:Bht,LodgingSelection:Yht,HousesSelection:Bdt,NodeMap:RPt,EmpireOverview:dEt,FloatingModifierEdit:UE},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendSelection:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:"0",housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panToPaPos:null,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Ni,formatFixed:Ft,randBetween:us,levelup:hd,townNearestCpPlantzonesProfit(e,t,r,n){const i=Date.now();let o=[];const a=this.gameStore.tk2tnk(e);return this.gameStore.dijDiscountedNearestPlantzones(a,80).forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.pzSelectionEntry(l,e,a,u,c,r,n);f.profit.dist>1e6||o.push(f)}),o.sort((l,u)=>u.dailyPerCp-l.dailyPerCp),console.log("cpt: townNearestCpPlantzonesProfit took",Date.now()-i,"ms"),o.slice(0,t)},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.gameStore.uloc.town[e].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),r=this.userStore.townWorkers(e).length+1;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:7572,label:t+r,level:1,wspdSheet:115,mspdBase:5,mspdSheet:0,luckSheet:6,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),hd(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){const t=this.gameStore.workerStatsOnPlantzone(e);this.sendSelection={worker:e,jobs:this.townNearestCpPlantzonesProfit(this.gameStore.tnk2tk(e.tnk),16,e,t)},this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{if(delete n.tk,"wspdLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const i=this.gameStore.workerStatic[n.charkey],o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,n.mspdBase=i.mspd/100,delete n.mspdLvlup}if("luckLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),this.gameStore.jobIsPz(n.job)&&!(n.job in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk ${n.job}`),n.job=null)}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))}},mounted(){this.panToHash()}},we=e=>(en("data-v-e1179be6"),e=e(),rn(),e),vEt=we(()=>b("button",null,"import",-1)),gEt=we(()=>b("br",null,null,-1)),mEt={style:{width:"24em"}},yEt=U("Test with workspeed: "),_Et={id:"canvas-limiter"},bEt={key:0},wEt=["src"],SEt=we(()=>b("br",null,null,-1)),TEt={id:"topleft"},PEt=we(()=>b("summary",null,"Empire",-1)),EEt={id:"leftside"},AEt={key:0,id:"mapObjDetail"},CEt=we(()=>b("div",null,"\u02C5",-1)),MEt=[CEt],kEt={id:"clickedTownInfo",class:"vscrollable"},xEt={key:0},LEt={key:0,id:"clickedNodeInfo"},IEt=U(),OEt=we(()=>b("abbr",{title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),REt={key:0,class:"fsxs"},DEt=U(" shared by active nodejobs: "),NEt=["checked"],FEt=U(" zero-cost connection to nearest town (invested for droprate) "),BEt={key:1,id:"clickedPlantzoneInfo"},$Et={id:"rightside"},zEt={id:"totals"},VEt={class:"fsxs"},UEt=we(()=>b("br",null,null,-1)),GEt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},jEt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},WEt=we(()=>b("br",null,null,-1)),HEt=we(()=>b("br",null,null,-1)),XEt=we(()=>b("br",null,null,-1)),YEt={class:"fsxs"},qEt=U(" invested for droprate: "),ZEt=["title"],KEt=we(()=>b("br",null,null,-1)),JEt=we(()=>b("br",null,null,-1)),QEt=we(()=>b("br",null,null,-1)),tAt=we(()=>b("br",null,null,-1)),eAt=we(()=>b("br",null,null,-1)),rAt=we(()=>b("br",null,null,-1)),nAt=we(()=>b("br",null,null,-1)),iAt={class:"fsxs"},oAt=we(()=>b("br",null,null,-1)),aAt=we(()=>b("br",null,null,-1)),sAt=we(()=>b("br",null,null,-1)),lAt=we(()=>b("br",null,null,-1)),uAt=U(" (M$/day/CP) "),cAt={class:"fsxs"},fAt=we(()=>b("br",null,null,-1)),hAt=we(()=>b("br",null,null,-1)),dAt=we(()=>b("br",null,null,-1)),pAt=we(()=>b("br",null,null,-1)),vAt=we(()=>b("div",{style:{clear:"both"}},null,-1)),gAt={id:"workerlist"},mAt=we(()=>b("summary",null,"All towns/workers list",-1)),yAt=U(" show: "),_At={class:"switch mauto"},bAt=we(()=>b("span",{class:"slider"},null,-1)),wAt=U(" stats after skills "),SAt={class:"switch mauto"},TAt=we(()=>b("span",{class:"slider"},null,-1)),PAt=U(" efficiency ");function EAt(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkerSendSelection"),u=de("LodgingSelection"),c=de("HousesSelection"),f=de("FloatingModifierEdit"),h=de("NodeMap"),d=de("EmpireOverview"),p=de("Town"),v=de("Plantzone");return O(),D(W,null,[kt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:Ee(()=>[kt(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),kt(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:Ee(()=>[kt(l,{options:e.sendSelection,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["options","show"])]),_:1},8,["show"]),kt(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:Ee(()=>[kt(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),kt(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:Ee(()=>[kt(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),kt(s,{show:e.importDialogVisible,"onUpdate:show":t[10]||(t[10]=g=>e.importDialogVisible=g)},{default:Ee(()=>[b("form",{onSubmit:t[9]||(t[9]=mm(g=>o.fileImport(g),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[8]||(t[8]=g=>o.fileImport())}),vEt,gEt],32)]),_:1},8,["show"]),kt(s,{show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},{default:Ee(()=>[kt(f,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[11]||(t[11]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),b("div",mEt,[yEt,Tt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[12]||(t[12]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.modifierDialogWspd,void 0,{number:!0}]]),U(" "+L(e.modifierDialogWspd),1)])]),_:1},8,["show"]),b("main",null,[b("div",_Et,[kt(h,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[14]||(t[14]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[15]||(t[15]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[16]||(t[16]=g=>e.panToPzk=g),panToPaPos:e.panToPaPos,"onUpdate:panToPaPos":t[17]||(t[17]=g=>e.panToPaPos=g),onPanAnywhere:t[18]||(t[18]=g=>e.panToPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panToPaPos"]),e.hoverInfo&&e.hoverInfo.object?(O(),D("div",{key:0,id:"tooltip",style:Rl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[U(L(e.hoverInfo.object.key)+" "+L(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+L(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(O(),D("span",bEt,[(O(!0),D(W,null,Nt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,g=>(O(),D("img",{src:o.makeIconSrc(g),class:"iconitem"},null,8,wEt))),256))])):ut("",!0),SEt],4)):ut("",!0),b("div",TEt,[b("details",null,[PEt,kt(d,{onPanToPaPos:t[19]||(t[19]=g=>e.panToPaPos=g)})])]),b("div",EEt,[e.clickedNode?(O(),D("div",AEt,[b("div",{class:"rolldown",onClick:t[20]||(t[20]=g=>e.clickedNode=null)},MEt),b("div",kEt,[e.clickedNode.key in n.gameStore._tnk2tk&&n.gameStore.tnk2tk(e.clickedNode.key)in n.gameStore.lodgingPerTown?(O(),D("table",xEt,[kt(p,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(e.clickedNode.key)],tk:n.gameStore.tnk2tk(e.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[21]||(t[21]=g=>e.panToPaPos=g)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"])])):ut("",!0)]),!(n.gameStore.tnk2tk[e.clickedNode.key]in n.gameStore.lodgingPerTown)&&!(e.clickedNode.key in n.gameStore.plantzoneDrops)?(O(),D("div",LEt,[b("p",null,[U(L(n.gameStore.uloc.node[e.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(e.clickedNode.key)?(O(),D(W,{key:0},[b("s",null,L(e.clickedNode.thisCpCost)+"CP",1),IEt,OEt],64)):(O(),D(W,{key:1},[U(L(e.clickedNode.thisCpCost)+"CP ",1)],64))]),e.clickedNode.key in n.userStore.currentNodesJobs?(O(),D("p",REt,[DEt,(O(!0),D(W,null,Nt(n.userStore.currentNodesJobs[e.clickedNode.key],g=>(O(),D("p",null,L(o.formatFixed(100*n.userStore.pzJobs[g].profit.priceDaily/n.userStore.currentNodesCashflow[e.clickedNode.key]))+"% - "+L(n.gameStore.plantzoneName(g))+" @ "+L(o.formatFixed(n.userStore.pzJobs[g].profit.priceDaily,2))+" M$/day ",1))),256))])):ut("",!0),e.prerelease_zerocost?(O(),D(W,{key:1},[b("input",{type:"checkbox",onChange:t[22]||(t[22]=g=>n.userStore.modifyGrindTakens(g,e.clickedNode.key)),checked:n.userStore.grindTakenSet.has(e.clickedNode.key)},null,40,NEt),FEt],64)):ut("",!0)])):ut("",!0),e.clickedNode.key in n.gameStore.plantzoneDrops?(O(),D("div",BEt,[kt(v,{pzk:e.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):ut("",!0)])):ut("",!0)]),b("div",$Et,[b("div",zEt,[b("details",null,[b("summary",null,"Total workers: "+L(n.userStore.countWorkers),1),b("p",VEt,[U(" nodes: "+L(n.userStore.workedPlantzones.size)+" ",1),UEt,n.userStore.workersFarmingCount?(O(),D(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(O(),D("abbr",jEt,"\u26A0\uFE0F")):ut("",!0):(O(),D("abbr",GEt,"\u26A0\uFE0F")),U(" farming: "+L(n.userStore.workersFarmingCount)+" ",1),WEt],64)):ut("",!0),n.userStore.workersWorkshopCount?(O(),D(W,{key:1},[U(" workshop: "+L(n.userStore.workersWorkshopCount)+" ",1),HEt],64)):ut("",!0),n.userStore.workersCustomCount?(O(),D(W,{key:2},[U(" custom: "+L(n.userStore.workersCustomCount)+" ",1),XEt],64)):ut("",!0),n.userStore.workersIdleCount?(O(),D(W,{key:3},[U(" \u26A0\uFE0F idle: "+L(n.userStore.workersIdleCount),1)],64)):ut("",!0)])]),b("details",null,[b("summary",null,"Total CP: "+L(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),b("p",YEt,[n.userStore.autotakenGrindNodesCP?(O(),D(W,{key:0},[qEt,b("abbr",{title:n.userStore.grindTakenDesc},L(n.userStore.autotakenGrindNodesCP),9,ZEt),KEt],64)):ut("",!0),U(" nodes: "+L(n.userStore.autotakenNodesCP)+" ",1),JEt,n.userStore.farmingEnable?(O(),D(W,{key:1},[U(" farming: "+L(n.userStore.farmingCP)+" ",1),QEt],64)):ut("",!0),n.userStore.workersWorkshopCount?(O(),D(W,{key:2},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),tAt],64)):ut("",!0),n.userStore.workersCustomCount?(O(),D(W,{key:3},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalCP))+" ",1),eAt],64)):ut("",!0),n.userStore.prerelease_housesconfig?(O(),D(W,{key:4},[U(" lodgage: "+L(n.userStore.lodgage)+" ",1),rAt],64)):(O(),D(W,{key:5},[U(" lodging: "+L(n.userStore.haveLodging.cp.total)+" ",1),nAt],64))])]),b("details",null,[b("summary",null,"Total M$/day: "+L(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),b("p",iAt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),oAt,n.userStore.workersFarmingCount?(O(),D(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),aAt],64)):ut("",!0),n.userStore.workersWorkshopCount?(O(),D(W,{key:1},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),sAt],64)):ut("",!0),n.userStore.workersCustomCount?(O(),D(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),lAt],64)):ut("",!0)])]),b("details",null,[b("summary",null,"Total efficiency: "+L(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),uAt,b("p",cAt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),fAt,n.userStore.farmingEnable?(O(),D(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),hAt],64)):ut("",!0),n.userStore.workersWorkshopCount?(O(),D(W,{key:1},[U(" workshop: "+L(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),dAt],64)):ut("",!0),n.userStore.workersCustomCount?(O(),D(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),pAt],64)):ut("",!0)])])]),vAt,b("div",gAt,[b("details",null,[mAt,yAt,b("label",_At,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerStatsForPz=g)},null,512),[[Kr,n.userStore.displayWorkerStatsForPz]]),bAt,wAt]),b("label",SAt,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[Kr,n.userStore.displayProfitPerCp]]),TAt,PAt]),b("button",{onClick:t[25]||(t[25]=g=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[26]||(t[26]=g=>o.fileExport())},"export"),ut("",!0),b("button",{onClick:t[28]||(t[28]=g=>o.fireAll())},"fire all"),b("table",null,[(O(!0),D(W,null,Nt(n.gameStore.lodgingPerTown,(g,m)=>(O(),fa(p,{o:g,tk:m,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[29]||(t[29]=y=>e.panToPaPos=y)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"]))),256))])])])])])])],64)}const AAt=$e(pEt,[["render",EAt],["__scopeId","data-v-e1179be6"]]);const CAt={setup(){const e=se(),t=xt(),r=Po(),n=F1();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,isGiant:!1}),methods:{makeIconSrc:Ni,formatFixed:Ft,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key;let i=this.gameStore.dijkstraNearestTowns(n,2);i.sort((s,l)=>s[1]-l[1]);let o={},a=[];for(let s=0;s<i.length;s++){const[l,u]=i[s],c=this.gameStore.profitPzTownArtisans(n,l,u);if(c.connected){if(a.push(c),!("dailyPerCp"in o)){o=c;continue}if(c.dailyPerCp>o.dailyPerCp){o=c;break}}}if(!("alt_workers"in o))throw new Error(`Failed to calc alt_workers for pzk=${n}`);a.sort((s,l)=>l.dailyPerCp-s.dailyPerCp),o.alt_towns=a,t.push(o)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit;return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},ii=e=>(en("data-v-858efcdd"),e=e(),rn(),e),MAt=ii(()=>b("div",{id:"toptext"},[b("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with Farm Knowledge skill. Home page has more tiers, levels, and skills. "),b("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. "),b("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. "),b("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Modifiers as well. ")],-1)),kAt={class:"scroll"},xAt=ii(()=>b("tr",null,[b("th",{rowspan:"2"},"Node"),b("th",{colspan:"3"},"cycle drops"),b("th",{colspan:"3"},"best town"),b("th",{colspan:"2"},"best worker"),b("th",{rowspan:"2"},"workload"),b("th",{colspan:"3"},"daily"),b("th",{rowspan:"2"},[b("abbr",{class:"tooltip",title:"assigned on Home page?"},"\u{1F3E0}")])],-1)),LAt=U("unlucky ("),IAt=U(" with giant bonus)"),OAt=ii(()=>b("th",null,"lucky",-1)),RAt=ii(()=>b("th",null,"$ value",-1)),DAt=ii(()=>b("th",null,"name",-1)),NAt=ii(()=>b("th",null,"walk",-1)),FAt=ii(()=>b("th",null,"CP",-1)),BAt=ii(()=>b("th",null,"type",-1)),$At=ii(()=>b("th",null,"wspd",-1)),zAt=ii(()=>b("th",null,"cycles",-1)),VAt=ii(()=>b("th",null,"M$",-1)),UAt=ii(()=>b("th",null,"M$/CP",-1)),GAt=["id"],jAt=["src"],WAt=["src"],HAt={class:"tac"},XAt=["src"],YAt={class:"tac"},qAt={class:"tac"},ZAt=["title"],KAt={class:"tac"},JAt={class:"tac"},QAt={class:"tac"},tCt=["title"],eCt={class:"tac"},rCt={class:"tac"},nCt={class:"tac"},iCt={class:"tac"},oCt={class:"tac"},aCt={class:"tac"},sCt={key:0,class:"tooltip",title:"all good"},lCt=["title"],uCt=["title"],cCt={key:1,class:"tooltip",title:"not assigned"};function fCt(e,t,r,n,i,o){const a=de("RouterLink");return O(),D("main",null,[MAt,b("div",kAt,[b("table",null,[xAt,b("tr",null,[b("th",null,[LAt,Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>e.isGiant=s)},null,512),[[Kr,e.isGiant]]),IAt]),OAt,RAt,DAt,NAt,FAt,BAt,$At,zAt,VAt,UAt]),(O(!0),D(W,null,Nt(o.allPlantzonesNearestCpTownProfit_sorted,s=>(O(),D("tr",{id:"drops"+s.key},[b("td",null,[kt(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),b("td",null,[e.isGiant?(O(!0),D(W,{key:0},Nt(s.unlucky_gi,(l,u)=>(O(),D("div",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[U(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,jAt),U(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256)):(O(!0),D(W,{key:1},Nt(s.unlucky,(l,u)=>(O(),D("div",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[U(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,WAt),U(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256))]),b("td",HAt,[(O(!0),D(W,null,Nt(s.lucky,(l,u)=>(O(),D("div",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[U(L(o.formatFixed(l,2))+"\xA0",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,XAt)]),_:2},1032,["to"])]))),256))]),b("td",YAt,L(o.formatFixed(s.cycleValue,0)),1),b("td",qAt,[b("abbr",{class:"tooltip",title:s.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.priceDaily,2)} M$/day / ${o.formatFixed(l.cp)} CP = ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/s.dailyPerCp)}%`).join(`
`)},L(n.gameStore.nodeName(s.tnk)),9,ZAt)]),b("td",KAt,L(o.formatFixed(s.dist,0)),1),b("td",JAt,L(s.cp),1),b("td",QAt,[b("abbr",{class:"tooltip",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,tCt)]),b("td",eCt,L(o.formatFixed(s.wspd+5,1)),1),b("td",rCt,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(O(),D(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(O(),D(W,{key:1},[U(L(o.formatFixed(s.activeWorkload,2)),1)],64))]),b("td",nCt,L(o.formatFixed(s.cyclesDaily,1)),1),b("td",iCt,L(o.formatFixed(s.priceDaily,2)),1),b("td",oCt,L(o.formatFixed(s.dailyPerCp,3)),1),b("td",aCt,[n.userStore.workedPlantzones.has(s.key.toString())?(O(),D(W,{key:0},[n.userStore.pzJobs[s.key].worker.charkey==s.charkey?(O(),D(W,{key:0},[n.userStore.pzJobs[s.key].worker.tnk==s.tnk?(O(),D("abbr",sCt,"\u2714\uFE0F")):(O(),D("abbr",{key:1,class:"tooltip",title:`town used: ${n.gameStore.nodeName(n.userStore.pzJobs[s.key].worker.tnk)}
suggested: ${n.gameStore.nodeName(s.tnk)}`},"\u26A0\uFE0F",8,lCt))],64)):(O(),D("abbr",{key:1,class:"tooltip",title:`worker used: ${n.gameStore.uloc.char[n.userStore.pzJobs[s.key].worker.charkey]}
suggested: ${n.gameStore.uloc.char[s.charkey]}`},"\u26A0\uFE0F",8,uCt))],64)):(O(),D("abbr",cCt,"\u274C"))])],8,GAt))),256))])])])}const hCt=$e(CAt,[["render",fCt],["__scopeId","data-v-858efcdd"]]),dCt={setup(){const e=xt(),t=se(),r=Po();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},pCt=b("br",null,null,-1),vCt=b("br",null,null,-1),gCt=b("tr",null,[b("th"),b("th",null,"Town / House"),b("th",null,"Lodging"),b("th",null,"CP")],-1),mCt=b("td",null,null,-1),yCt={class:"header"},_Ct=U(" P2W: "),bCt=["onUpdate:modelValue"],wCt=["onUpdate:modelValue"],SCt=["href"];function TCt(e,t,r,n,i,o){return O(),D("main",null,[U(" Total lodging slots: "+L(n.userStore.haveLodging.slots.total),1),pCt,U(" Total CP spent: "+L(n.userStore.haveLodging.cp.total),1),vCt,b("table",null,[gCt,(O(!0),D(W,null,Nt(n.gameStore.lodgingPerTown,(a,s)=>(O(),D(W,null,[b("tr",null,[mCt,b("td",null,[b("span",yCt,L(n.gameStore.uloc.town[s]),1),_Ct,Tt(b("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,bCt),[[pe,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),b("td",null,L(n.userStore.haveLodging.slots.perTown[s]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[s]),1)]),(O(!0),D(W,null,Nt(a.houses,l=>(O(),D("tr",null,[b("td",null,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,wCt),[[Kr,n.userStore.lodgingTaken[l.key]]])]),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+l.key},L(n.gameStore.uloc.char[l.key]),9,SCt)]),b("td",null,L(l.lodgingSpaces),1),b("td",null,L(l.CP),1)]))),256))],64))),256))])])}const PCt=$e(dCt,[["render",TCt]]);const ECt={setup(){const e=xt(),t=se(),r=Po();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:bP,FloatingModifierEdit:UE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:Ft,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}}}},Vi=e=>(en("data-v-71ddcc88"),e=e(),rn(),e),ACt=Vi(()=>b("button",null,"import",-1)),CCt=Vi(()=>b("br",null,null,-1)),MCt=U(" Test on node: "),kCt=["value"],xCt=Vi(()=>b("br",null,null,-1)),LCt=U(" With workspeed: "),ICt={id:"toptext"},OCt=Vi(()=>b("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view.",-1)),RCt=Vi(()=>b("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),DCt=Vi(()=>b("p",null,"If unspecified, 0% modifier will be used (= max workload = min cycles per day)",-1)),NCt=Vi(()=>b("summary",null,"Advanced",-1)),FCt=U("allow floating modifiers "),BCt=Vi(()=>b("tr",null,[b("th",null,"#"),b("th",null,"Modifier%"),b("th",null,"Contains nodes")],-1)),$Ct={class:"center"},zCt={class:"center"},VCt={key:0,class:"switch mauto"},UCt=["onUpdate:modelValue"],GCt=Vi(()=>b("span",{class:"slider"},null,-1)),jCt=U(" floating"),WCt=Vi(()=>b("br",null,null,-1)),HCt=["onClick"],XCt=U(" constant"),YCt=Vi(()=>b("br",null,null,-1)),qCt=["onUpdate:modelValue"];function ZCt(e,t,r,n,i,o){const a=de("ModalDialog"),s=de("FloatingModifierEdit"),l=de("RouterLink");return O(),D(W,null,[kt(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Ee(()=>[b("form",{onSubmit:t[1]||(t[1]=mm(u=>o.fileImport(u),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),ACt],32)]),_:1},8,["show"]),kt(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Ee(()=>[kt(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),CCt,MCt,Tt(b("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(O(!0),D(W,null,Nt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(O(),D("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},L(n.gameStore.plantzoneName(u))+" - "+L(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,kCt))),256))],512),[[cn,e.floatingDialogWkld]]),xCt,LCt,Tt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.floatingDialogWspd,void 0,{number:!0}]]),U(" "+L(e.floatingDialogWspd),1)]),_:1},8,["show"]),b("div",ICt,[OCt,RCt,DCt,b("details",null,[NCt,b("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),b("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),b("label",null,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Kr,n.userStore.allowFloating]]),FCt])])]),b("table",null,[BCt,(O(!0),D(W,null,Nt(n.gameStore.regionGroups,(u,c)=>(O(),D("tr",null,[b("td",$Ct,L(c),1),b("td",zCt,[n.userStore.allowFloating?(O(),D("label",VCt,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,UCt),[[Kr,n.userStore.useFloatingModifiers[c]]]),GCt])):ut("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(O(),D(W,{key:1},[jCt,WCt,U(" ~"+L(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),b("button",{onClick:f=>o.showDialog(c)},"edit",8,HCt)],64)):(O(),D(W,{key:2},[XCt,YCt,Tt(b("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,qCt),[[pe,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),b("td",null,[(O(!0),D(W,null,Nt(u,f=>(O(),D("div",null,[kt(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),U(" "+L(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(O(),D(W,{key:0},[U(" \u2933 "+L(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(O(),D(W,{key:1},[U(" \u2192 "+L(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const KCt=$e(ECt,[["render",ZCt],["__scopeId","data-v-71ddcc88"]]),JCt={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:Ft,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},QCt=b("h3",null,"\u{1F3ED}Workshops config",-1),tMt={class:"sa"},eMt=b("tr",null,[b("th",null,"House"),b("th",null,"label"),b("th",null,"worktype"),b("th",null,"workload"),b("th",null,[U("$/cycle "),b("abbr",{title:"use Sho's Workshop Profitability Calculator"},"\u2139\uFE0F")]),b("th",null,[U("CP "),b("abbr",{title:"full cost of operating the workshop (including connection houses)"},"\u2139\uFE0F")]),b("th",null,"action")],-1),rMt=["onUpdate:modelValue"],nMt=["onUpdate:modelValue"],iMt=cP('<option value="unk">unknown</option><option value="jewelry">jewelry</option><option value="mass">mass</option><option value="weap">weapon</option><option value="tool">tool</option><option value="furn">furniture</option><option value="costume">costume</option><option value="refine">refine</option><option value="siege">siege</option><option value="mount">mount</option><option value="exclus">exclusive</option><option value="pack_produce">pack_produce</option><option value="pack_herb">pack_herb</option><option value="pack_mushr">pack_mushr</option><option value="pack_fish">pack_fish</option><option value="pack_timber">pack_timber</option><option value="pack_ore">pack_ore</option>',17),oMt=[iMt],aMt=["onUpdate:modelValue"],sMt=["onUpdate:modelValue"],lMt=["onUpdate:modelValue"],uMt=["onClick"],cMt=U(" new entry:"),fMt=b("br",null,null,-1),hMt={class:"borderless"},dMt=b("td",null,"town",-1),pMt=["value"],vMt=b("td",null,"usage",-1),gMt=["value"],mMt=b("td",null,"level",-1),yMt=["value"],_Mt=b("td",null,"house",-1),bMt=["value"],wMt=["disabled"],SMt={key:0,class:"fsxs"};function TMt(e,t,r,n,i,o){return O(),D(W,null,[QCt,b("table",tMt,[eMt,(O(!0),D(W,null,Nt(n.userStore.userWorkshops,(a,s)=>(O(),D("tr",null,[b("td",null,L(n.gameStore.uloc.char[s]),1),b("td",null,[Tt(b("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,rMt),[[pe,a.label,void 0,{number:!0}]])]),b("td",null,[Tt(b("select",{"onUpdate:modelValue":l=>a.industry=l},oMt,8,nMt),[[cn,a.industry]])]),b("td",null,[Tt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,aMt),[[pe,a.manualWorkload,void 0,{number:!0}]])]),b("td",null,[Tt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,sMt),[[pe,a.manualCycleIncome,void 0,{number:!0}]])]),b("td",null,[Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":l=>a.manualCp=l},null,8,lMt),[[pe,a.manualCp,void 0,{number:!0}]])]),b("td",null,[b("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,uMt)])]))),256))]),cMt,fMt,b("table",hMt,[b("tr",null,[dMt,b("td",null,[Tt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(O(!0),D(W,null,Nt(o.filteredTowns,a=>(O(),D("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,pMt))),256))],512),[[cn,e.filterTown]])])]),b("tr",null,[vMt,b("td",null,[Tt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(O(!0),D(W,null,Nt(o.filteredUsages,a=>(O(),D("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,gMt))),256))],512),[[cn,e.filterUsage]])])]),b("tr",null,[mMt,b("td",null,[Tt(b("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(O(!0),D(W,null,Nt(o.filteredLevels,a=>(O(),D("option",{value:a},L(a>=0?a+"+":"any"),9,yMt))),256))],512),[[cn,e.filterLevel]])])]),b("tr",null,[_Mt,b("td",null,[Tt(b("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(O(!0),D(W,null,Nt(o.filteredHouses,a=>(O(),D("option",{value:a},L(a)+" "+L(n.gameStore.uloc.char[a])+" "+L(a in n.userStore.userWorkshops?"\u{1F451}":""),9,bMt))),256))],512),[[cn,e.selectedHouse]])])])]),b("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,wMt),e.selectedHouse in n.userStore.userWorkshops?(O(),D("span",SMt," already in list! ")):ut("",!0)],64)}const PMt=$e(JCt,[["render",TMt]]);const EMt={setup(){const e=xt(),t=se(),r=Po();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:bP,WorkerEdit:g$,WorkshopsConfig:PMt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Ni,formatFixed:Ft,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},mn=e=>(en("data-v-6e620cb9"),e=e(),rn(),e),AMt={id:"toptext"},CMt=U(" Enable \u{1F33B}Farming "),MMt=U(" (reserve 80 CP for 10 large fences)."),kMt=mn(()=>b("br",null,null,-1)),xMt=U(" Total profit:"),LMt=mn(()=>b("br",null,null,-1)),IMt=U(" 10 workers: "),OMt=U(" M$/day (use "),RMt=mn(()=>b("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),DMt=U(" to estimate) "),NMt=mn(()=>b("br",null,null,-1)),FMt=U(" 0 workers: "),BMt=U(" M$/day (half growth speed) "),$Mt=mn(()=>b("div",{class:"spacer"},null,-1)),zMt={key:1},VMt={class:"sa"},UMt=U(" Default worker for hire: "),GMt=U(" "+L(" ")+" "),jMt=mn(()=>b("label",{for:"f"},"Random Artisan Goblin",-1)),WMt=U(" "+L(" ")+" "),HMt=U(" "+L(" ")+" "),XMt=mn(()=>b("label",{for:"t"},"Custom",-1)),YMt=mn(()=>b("br",null,null,-1)),qMt=U(" Tax: "),ZMt=cP('<option value="0.65" data-v-6e620cb9>0.65 (0)</option><option value="0.65325" data-v-6e620cb9>0.65325 (1000)</option><option value="0.6565" data-v-6e620cb9>0.6565 (4000)</option><option value="0.65975" data-v-6e620cb9>0.65975 (7000)</option><option value="0.65975" data-v-6e620cb9>0.69225 (7000 + ring)</option><option value="0.845" data-v-6e620cb9>0.845 (0 + VP)</option><option value="0.84825" data-v-6e620cb9>0.84825 (1000 + VP)</option><option value="0.8515" data-v-6e620cb9>0.8515 (4000 + VP)</option><option value="0.85475" data-v-6e620cb9>0.85475 (7000 + VP)</option><option value="0.88725" data-v-6e620cb9>0.88725 (7000 + ring + VP)</option><option value="1" data-v-6e620cb9>1 (test)</option>',11),KMt=[ZMt],JMt=U(" Language: "),QMt=mn(()=>b("option",null,"en",-1)),tkt=mn(()=>b("option",null,"ru",-1)),ekt=[QMt,tkt],rkt=U(" Server: "),nkt=cP("<option data-v-6e620cb9>NA</option><option data-v-6e620cb9>EU</option><option data-v-6e620cb9>RU</option><option data-v-6e620cb9>KR</option><option data-v-6e620cb9>JP</option><option data-v-6e620cb9>TH</option><option data-v-6e620cb9>TW</option><option data-v-6e620cb9>SA</option><option data-v-6e620cb9>SEA</option><option data-v-6e620cb9>MENA</option><option data-v-6e620cb9>CEU</option><option data-v-6e620cb9>CNA</option>",12),ikt=[nkt],okt=U(" Market API status: "),akt={key:2},skt={key:3},lkt=U(" \xA0"),ukt=mn(()=>b("div",{class:"spacer"},null,-1)),ckt=mn(()=>b("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),fkt=mn(()=>b("p",null,"If the item is for self use, select Keep and/or enter Custom price:",-1)),hkt={class:"scrollable"},dkt=mn(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Market"),b("th",null,"Custom"),b("th",null,"Keep"),b("th",null,"Value")],-1)),pkt=["id"],vkt=["href"],gkt=["src","data-key"],mkt=U(" "+L(" ")+" "),ykt={key:0},_kt=["title"],bkt={class:"right"},wkt=["href"],Skt=["onUpdate:modelValue"],Tkt={class:"center"},Pkt=["disabled","onUpdate:modelValue"],Ekt={class:"right"};function Akt(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkshopsConfig");return O(),D(W,null,[kt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=u=>e.workerDialogVisible=u)},{default:Ee(()=>[kt(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),kt(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[2]||(t[2]=u=>e.workshopsConfigVisible=u)},{default:Ee(()=>[kt(l)]),_:1},8,["show"]),b("main",null,[b("div",AMt,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=u=>n.userStore.farmingEnable=u)},null,512),[[Kr,n.userStore.farmingEnable]]),CMt,n.userStore.farmingEnable?(O(),D(W,{key:0},[MMt,kMt,xMt,LMt,IMt,Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[4]||(t[4]=u=>n.userStore.farmingProfit=u)},null,512),[[pe,n.userStore.farmingProfit,void 0,{number:!0}]]),OMt,RMt,DMt,NMt,FMt,Tt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[5]||(t[5]=u=>n.userStore.farmingBareProfit=u)},null,512),[[pe,n.userStore.farmingBareProfit,void 0,{number:!0}]]),BMt,$Mt],64)):(O(),D("br",zMt)),b("p",VMt,[b("button",{onClick:t[6]||(t[6]=u=>e.workshopsConfigVisible=!0)},"\u{1F3ED}Workshops config")]),UMt,Tt(b("input",{type:"radio",name:"dw",id:"f",value:!1,"onUpdate:modelValue":t[7]||(t[7]=u=>n.userStore.useDefaultWorker=u)},null,512),[[ud,n.userStore.useDefaultWorker]]),GMt,jMt,WMt,Tt(b("input",{type:"radio",name:"dw",id:"t",value:!0,"onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.useDefaultWorker=u)},null,512),[[ud,n.userStore.useDefaultWorker]]),HMt,XMt,U(" ("+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),b("button",{onClick:t[9]||(t[9]=u=>e.workerDialogVisible=!0)},"edit"),YMt,qMt,Tt(b("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedTax=u)},KMt,512),[[cn,n.userStore.selectedTax]]),JMt,Tt(b("select",{"onUpdate:modelValue":t[11]||(t[11]=u=>n.userStore.selectedLang=u),onChange:t[12]||(t[12]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},ekt,544),[[cn,n.userStore.selectedLang]]),rkt,Tt(b("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.selectedRegion=u),onChange:t[14]||(t[14]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},ikt,544),[[cn,n.userStore.selectedRegion]]),okt,n.marketStore.ready?(O(),D("span",akt,"\u2713")):(O(),D("span",skt,"\u274C")),lkt,b("button",{onClick:t[15]||(t[15]=u=>o.reload())},"reload"),ukt,ckt,fkt]),b("div",hkt,[b("table",null,[dkt,(O(!0),D(W,null,Nt(n.gameStore.itemKeys,u=>(O(),D("tr",{id:"item"+u},[b("td",null,[b("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,gkt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,vkt),mkt,u in n.marketStore.calculatedPrices?(O(),D("span",ykt,[b("abbr",{title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>n.gameStore.uloc.item[c]+" x"+o.formatFixed(f,3)).join(`
`)},"\u2139\uFE0F",8,_kt)])):ut("",!0)]),b("td",bkt,[u in n.marketStore.apiPrices?(O(),D("a",{key:0,href:this.marketStore.itemPriceUrl(u)},L(o.formatFixed(n.marketStore.apiPrices[u])),9,wkt)):(O(),D(W,{key:1},[U(L(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),b("td",null,[Tt(b("input",{type:"number",class:"mid right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,Skt),[[pe,n.userStore.customPrices[u],void 0,{number:!0}]])]),b("td",Tkt,[Tt(b("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,Pkt),[[Kr,n.userStore.keepItems[u]]])]),b("td",Ekt,L(o.formatFixed(n.marketStore.prices[u])),1)],8,pkt))),256))])])])],64)}const Ckt=$e(EMt,[["render",Akt],["__scopeId","data-v-6e620cb9"]]);const Mkt={setup(){const e=xt(),t=se(),r=Po();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:Ft},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},kkt=b("div",{id:"toptext"},[b("p",null,"Using 150/10/10 worker")],-1),xkt=b("tr",null,[b("th",null,"Node/Town"),b("th",null,"connect"),b("th",null,"distance"),b("th",null,"M$/day"),b("th",null,"M$/day/CP")],-1),Lkt={colspan:"5"};function Ikt(e,t,r,n,i,o){return O(),D(W,null,[kkt,b("table",null,[xkt,(O(!0),D(W,null,Nt(n.gameStore.plantzones,(a,s)=>(O(),D(W,null,[b("tr",null,[b("td",Lkt,[b("h3",null,L(s)+" "+L(a.name),1)])]),(O(!0),D(W,null,Nt(o.plantzonesNearestCpTownsProfits150[s],l=>(O(),D("tr",null,[b("td",null,L(n.gameStore.nodeName(l.tnk)),1),b("td",null,L(l.cp)+"CP ",1),b("td",null,L(o.formatFixed(l.dist,0)),1),b("td",null,L(o.formatFixed(l.priceDaily,2)),1),b("td",null,L(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const Okt=$e(Mkt,[["render",Ikt]]),Rkt={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:[-1],usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Ni,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},Dkt={id:"toptext"},Nkt=U(" Town: "),Fkt=["value"],Bkt=U(" Usage: "),$kt=["value"],zkt={key:0},Vkt=b("summary",null,"Craftables",-1),Ukt=["href"],Gkt=["src","data-key"],jkt=b("tr",null,[b("th",null,"town"),b("th",null,"node"),b("th",null,"name"),b("th",null,"CP"),b("th",null,"usage/level")],-1),Wkt={key:0},Hkt=["href"],Xkt=U(L(" "));function Ykt(e,t,r,n,i,o){return O(),D("main",null,[b("div",Dkt,[Nkt,Tt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(O(!0),D(W,null,Nt(e.towns,a=>(O(),D("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,Fkt))),256))],512),[[cn,e.filterTown]]),Bkt,Tt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(O(!0),D(W,null,Nt(e.usages,a=>(O(),D("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,$kt))),256))],512),[[cn,e.filterUsage]]),e.filterUsage!=-1?(O(),D("details",zkt,[Vkt,(O(!0),D(W,null,Nt(this.houseCrafts[e.filterUsage].groups,(a,s)=>(O(),D("div",null,[U(" level "+L(s+1)+": ",1),b("table",null,[(O(!0),D(W,null,Nt(a,l=>(O(),D("tr",null,[(O(!0),D(W,null,Nt(this.craftItems[l],u=>(O(),D("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,Gkt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,Ukt))),256))]))),256))])]))),256))])):ut("",!0)]),b("table",null,[jkt,(O(!0),D(W,null,Nt(e.houses,(a,s)=>(O(),D(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(O(),D("tr",Wkt,[b("td",null,L(a.affTown),1),b("td",null,L(a.parentNode),1),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,Hkt)]),b("td",null,L(a.CP)+" ("+L(a.CPfull)+")",1),b("td",null,[(O(!0),D(W,null,Nt(a.CraftList,(l,u)=>(O(),D("span",null,[U(L(n.gameStore.uloc.housetype[u]),1),b("sup",null,L(l),1),Xkt]))),256))])])):ut("",!0)],64))),256))])])}const qkt=$e(Rkt,[["render",Ykt]]);Br([vf,fst,yf,mf,_f]);const Zkt={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{VChart:bf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready||!this.bestLookup.success)return e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:Ft}},K0=e=>(en("data-v-0aa4b1f8"),e=e(),rn(),e),Kkt={class:"limit"},Jkt={id:"controls"},Qkt=K0(()=>b("p",null,[U("data from "),b("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),t4t=U(" town "),e4t=["value"],r4t={id:"fluid"},n4t={id:"sliders"},i4t=K0(()=>b("span",{class:"lodging"},"lodging",-1)),o4t=U(" needed: "),a4t=["max"],s4t=K0(()=>b("br",null,null,-1)),l4t=K0(()=>b("span",{class:"storage"},"storage",-1)),u4t=U(" needed: "),c4t=["max"],f4t={id:"cost"},h4t=K0(()=>b("div",{style:{clear:"both"}},null,-1)),d4t={key:0,id:"houselist"};function p4t(e,t,r,n,i,o){const a=de("v-chart");return O(),D("main",null,[b("div",Kkt,[b("div",Jkt,[Qkt,this.gameStore.ready?(O(),D(W,{key:0},[t4t,Tt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.tk=s)},[(O(!0),D(W,null,Nt(this.gameStore._tk2tnk,(s,l)=>(O(),D("option",{value:l},L(n.gameStore.uloc.town[l]),9,e4t))),256))],512),[[cn,e.tk]])],64)):ut("",!0),b("div",r4t,[b("div",n4t,[i4t,o4t,Tt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,a4t),[[pe,e.wantLodging,void 0,{number:!0}]]),U(" "+L(e.wantLodging)+" \u2192 "+L(o.bestLookup?o.bestLookup.lodging:"?")+" found ",1),s4t,l4t,u4t,Tt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[2]||(t[2]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,c4t),[[pe,e.wantStorage,void 0,{number:!0}]]),U(" "+L(e.wantStorage)+" \u2192 "+L(o.bestLookup?o.bestLookup.storage:"?")+" found ",1)]),b("div",f4t," cost: "+L(o.bestLookup?o.bestLookup.cost:"?")+" CP ",1)])]),h4t,o.bestLookup?(O(),D("div",d4t,[(O(!0),D(W,null,Nt(o.bestLookup.indices,(s,l)=>(O(),D(W,null,[o.bestLookup.states[l]>0?(O(),D("p",{key:0,class:Yr({storage:o.bestLookup.states[l]==1,lodging:o.bestLookup.states[l]==2})},L(n.gameStore.uloc.char[s]),3)):ut("",!0)],64))),256))])):ut("",!0),kt(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const v4t=$e(Zkt,[["render",p4t],["__scopeId","data-v-0aa4b1f8"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g4t=typeof Object.defineProperty=="function"?Object.defineProperty:null,m4t=g4t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y4t=m4t;function _4t(){try{return y4t({},"x",{}),!0}catch{return!1}}var b4t=_4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w4t=Object.defineProperty,S4t=w4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Af=Object.prototype,UI=Af.toString,GI=Af.__defineGetter__,jI=Af.__defineSetter__,T4t=Af.__lookupGetter__,P4t=Af.__lookupSetter__;function E4t(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||UI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||UI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(T4t.call(e,t)||P4t.call(e,t)?(n=e.__proto__,e.__proto__=Af,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&GI&&GI.call(e,t,r.get),a&&jI&&jI.call(e,t,r.set),e}var A4t=E4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C4t=b4t,M4t=S4t,k4t=A4t,vT;C4t()?vT=M4t:vT=k4t;var zV=vT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x4t=zV;function L4t(e,t,r){x4t(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var I4t=L4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O4t=I4t,R4t=O4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D4t=zV;function N4t(e,t,r){D4t(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var F4t=N4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B4t=F4t,dr=B4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $4t=Math.floor,z4t=$4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V4t=z4t,xn=V4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U4t=xn;function G4t(e){return U4t(e)===e}var j4t=G4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W4t=j4t,Ds=W4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H4t=4294967295>>>0,X4t=H4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y4t=Ds,q4t=X4t;function Z4t(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&Y4t(e.length)&&e.length>=0&&e.length<=q4t}var K4t=Z4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J4t=K4t,Q4t=J4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t6t=Q4t;function e6t(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!t6t(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var r6t=e6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n6t=r6t,i6t=n6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o6t(e){return typeof e=="number"}var VV=o6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a6t(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var s6t=a6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l6t=s6t,u6t=l6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c6t=u6t,f6t=c6t();function h6t(){return f6t&&typeof Symbol.toStringTag=="symbol"}var d6t=h6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p6t=d6t,Ry=p6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v6t=Object.prototype.toString,UV=v6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g6t=UV;function m6t(e){return g6t.call(e)}var y6t=m6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _6t=Object.prototype.hasOwnProperty;function b6t(e,t){return e==null?!1:_6t.call(e,t)}var w6t=b6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S6t=w6t,Dy=S6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T6t=typeof Symbol=="function"?Symbol.toStringTag:"",P6t=T6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E6t=Dy,Ph=P6t,Ob=UV;function A6t(e){var t,r,n;if(e==null)return Ob.call(e);r=e[Ph],t=E6t(e,Ph);try{e[Ph]=void 0}catch{return Ob.call(e)}return n=Ob.call(e),t?e[Ph]=r:delete e[Ph],n}var C6t=A6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M6t=Ry,k6t=y6t,x6t=C6t,gT;M6t()?gT=x6t:gT=k6t;var Ui=gT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L6t=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I6t=L6t,FA=I6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O6t=FA,R6t=O6t.prototype.toString,D6t=R6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N6t=D6t;function F6t(e){try{return N6t.call(e),!0}catch{return!1}}var B6t=F6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $6t=Ry,z6t=Ui,V6t=FA,U6t=B6t,G6t=$6t();function j6t(e){return typeof e=="object"?e instanceof V6t?!0:G6t?U6t(e):z6t(e)==="[object Number]":!1}var GV=j6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W6t=VV,H6t=GV;function X6t(e){return W6t(e)||H6t(e)}var Y6t=X6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jV=dr,BA=Y6t,q6t=VV,Z6t=GV;jV(BA,"isPrimitive",q6t);jV(BA,"isObject",Z6t);var Cf=BA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WV=dr,$A=i6t,zA=Cf,K6t=$A(zA.isPrimitive),J6t=$A(zA.isObject),VA=$A(zA);WV(VA,"primitives",K6t);WV(VA,"objects",J6t);var Q6t=VA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t5t=Number.POSITIVE_INFINITY,Ne=t5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e5t=FA,r5t=e5t.NEGATIVE_INFINITY,Tr=r5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n5t=Ne,i5t=Tr,o5t=Ds;function a5t(e){return e<n5t&&e>i5t&&o5t(e)}var HV=a5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s5t=Cf.isPrimitive,l5t=HV;function u5t(e){return s5t(e)&&l5t(e)}var XV=u5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c5t=Cf.isObject,f5t=HV;function h5t(e){return c5t(e)&&f5t(e.valueOf())}var YV=h5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d5t=XV,p5t=YV;function v5t(e){return d5t(e)||p5t(e)}var g5t=v5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qV=dr,UA=g5t,m5t=XV,y5t=YV;qV(UA,"isPrimitive",m5t);qV(UA,"isObject",y5t);var Ny=UA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _5t=Ny.isPrimitive;function b5t(e){return _5t(e)&&e>=0}var ZV=b5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w5t=Ny.isObject;function S5t(e){return w5t(e)&&e.valueOf()>=0}var KV=S5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T5t=ZV,P5t=KV;function E5t(e){return T5t(e)||P5t(e)}var A5t=E5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JV=dr,GA=A5t,C5t=ZV,M5t=KV;JV(GA,"isPrimitive",C5t);JV(GA,"isObject",M5t);var k5t=GA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function x5t(e){return e!==e}var L5t=x5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I5t=L5t,Zt=I5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O5t(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var QV=O5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R5t=QV;function D5t(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return R5t(e,a)}}var N5t=D5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F5t=dr,tU=QV,B5t=N5t;F5t(tU,"factory",B5t);var Ns=tU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $5t=Ui,z5t=typeof Uint32Array=="function";function V5t(e){return z5t&&e instanceof Uint32Array||$5t(e)==="[object Uint32Array]"}var U5t=V5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G5t=U5t,j5t=G5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W5t=4294967295,H5t=W5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X5t=typeof Uint32Array=="function"?Uint32Array:null,Y5t=X5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q5t=j5t,Rb=H5t,WI=Y5t;function Z5t(){var e,t;if(typeof WI!="function")return!1;try{t=[1,3.14,-3.14,Rb+1,Rb+2],t=new WI(t),e=q5t(t)&&t[0]===1&&t[1]===3&&t[2]===Rb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var K5t=Z5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J5t=K5t,Q5t=J5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var txt=typeof Uint32Array=="function"?Uint32Array:void 0,ext=txt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rxt(){throw new Error("not implemented")}var nxt=rxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ixt=Q5t,oxt=ext,axt=nxt,mT;ixt()?mT=oxt:mT=axt;var Mf=mT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sxt=Ui,lxt=typeof Float64Array=="function";function uxt(e){return lxt&&e instanceof Float64Array||sxt(e)==="[object Float64Array]"}var cxt=uxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fxt=cxt,hxt=fxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dxt=typeof Float64Array=="function"?Float64Array:null,pxt=dxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vxt=hxt,HI=pxt;function gxt(){var e,t;if(typeof HI!="function")return!1;try{t=new HI([1,3.14,-3.14,NaN]),e=vxt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var mxt=gxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yxt=mxt,_xt=yxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bxt=typeof Float64Array=="function"?Float64Array:void 0,wxt=bxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sxt(){throw new Error("not implemented")}var Txt=Sxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pxt=_xt,Ext=wxt,Axt=Txt,yT;Pxt()?yT=Ext:yT=Axt;var kf=yT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cxt=Ui,Mxt=typeof Uint8Array=="function";function kxt(e){return Mxt&&e instanceof Uint8Array||Cxt(e)==="[object Uint8Array]"}var xxt=kxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lxt=xxt,Ixt=Lxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oxt=255,Rxt=Oxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dxt=typeof Uint8Array=="function"?Uint8Array:null,Nxt=Dxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fxt=Ixt,Db=Rxt,XI=Nxt;function Bxt(){var e,t;if(typeof XI!="function")return!1;try{t=[1,3.14,-3.14,Db+1,Db+2],t=new XI(t),e=Fxt(t)&&t[0]===1&&t[1]===3&&t[2]===Db-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var $xt=Bxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zxt=$xt,Vxt=zxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uxt=typeof Uint8Array=="function"?Uint8Array:void 0,Gxt=Uxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jxt(){throw new Error("not implemented")}var Wxt=jxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hxt=Vxt,Xxt=Gxt,Yxt=Wxt,_T;Hxt()?_T=Xxt:_T=Yxt;var qxt=_T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zxt=Ui,Kxt=typeof Uint16Array=="function";function Jxt(e){return Kxt&&e instanceof Uint16Array||Zxt(e)==="[object Uint16Array]"}var Qxt=Jxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tLt=Qxt,eLt=tLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rLt=65535,nLt=rLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iLt=typeof Uint16Array=="function"?Uint16Array:null,oLt=iLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aLt=eLt,Nb=nLt,YI=oLt;function sLt(){var e,t;if(typeof YI!="function")return!1;try{t=[1,3.14,-3.14,Nb+1,Nb+2],t=new YI(t),e=aLt(t)&&t[0]===1&&t[1]===3&&t[2]===Nb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var lLt=sLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uLt=lLt,cLt=uLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fLt=typeof Uint16Array=="function"?Uint16Array:void 0,hLt=fLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dLt(){throw new Error("not implemented")}var pLt=dLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vLt=cLt,gLt=hLt,mLt=pLt,bT;vLt()?bT=gLt:bT=mLt;var yLt=bT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Lt=qxt,bLt=yLt,wLt={uint16:bLt,uint8:_Lt},SLt=wLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qI=SLt,eU;function TLt(){var e,t;return e=new qI.uint16(1),e[0]=4660,t=new qI.uint8(e.buffer),t[0]===52}eU=TLt();var PLt=eU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ELt=PLt,xf=ELt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ALt=xf,wT;ALt===!0?wT=1:wT=0;var CLt=wT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MLt=Mf,kLt=kf,xLt=CLt,rU=new kLt(1),LLt=new MLt(rU.buffer);function ILt(e){return rU[0]=e,LLt[xLt]}var OLt=ILt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RLt=OLt,oi=RLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DLt=xf,ST;DLt===!0?ST=1:ST=0;var NLt=ST;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FLt=Mf,BLt=kf,$Lt=NLt,TT=new BLt(1),zLt=new FLt(TT.buffer);function VLt(e,t){return TT[0]=e,zLt[$Lt]=t>>>0,TT[0]}var ULt=VLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GLt=ULt,J0=GLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jLt=1023,wu=jLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WLt=.34657359027997264,HLt=WLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XLt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var YLt=XLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qLt=Zt,Fb=oi,Bv=J0,ZI=Ne,ZLt=Tr,KLt=wu,JLt=HLt,QLt=YLt,tIt=709.782712893384,Bb=.6931471803691238,$b=19082149292705877e-26,KI=1.4426950408889634,eIt=38.816242111356935,rIt=1.0397207708399179;function nIt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===ZI||qLt(e))return e;if(e===ZLt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=eIt){if(r)return-1;if(s>=tIt)return ZI}if(o=Fb(s)|0,s>JLt)s<rIt?r?(n=e+Bb,i=-$b,h=-1):(n=e-Bb,i=$b,h=1):(r?h=KI*e-.5:h=KI*e+.5,h|=0,c=h,n=e-c*Bb,i=c*$b),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*QLt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=Fb(s)+(h<<20)|0,s=Bv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Bv(c,n),s=c-(f-e)):(n=KLt-h<<20|0,c=Bv(c,n),s=e-(f+c),s+=1),n=Fb(s)+(h<<20)|0,Bv(s,n)))}var iIt=nIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oIt=iIt,Lf=oIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aIt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var sIt=aIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var lIt=Zt,JI=oi,QI=J0,uIt=Ne,cIt=Tr,tO=wu,fIt=sIt,zb=.6931471803691238,Vb=19082149292705877e-26,hIt=.41421356237309503,dIt=-.2928932188134525,pIt=1862645149230957e-24,vIt=5551115123125783e-32,gIt=9007199254740992,mIt=.6666666666666666;function yIt(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||lIt(e))return NaN;if(e===-1)return cIt;if(e===uIt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<hIt){if(n<pIt)return n<vIt?e:e-e*e*.5;e>dIt&&(c=0,i=e,r=1)}return c!==0&&(n<gIt?(u=1+e,r=JI(u),c=(r>>20)-tO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=JI(u),c=(r>>20)-tO,o=0),r&=1048575,r<434334?u=QI(u,r|1072693248):(c+=1,u=QI(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*Vb,c*zb+o):(l=t*(1-mIt*i),c*zb-(l-(c*Vb+o)-i)):(a=i/(2+i),s=a*a,l=s*fIt(s),c===0?i-(t-a*(t+l)):c*zb-(t-(a*(t+l)+(c*Vb+o))-i))}var _It=yIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bIt=_It,Ln=bIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wIt=Math.sqrt,SIt=wIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TIt=SIt,tr=TIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PIt=.7853981633974483,nU=PIt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EIt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var AIt=EIt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CIt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var MIt=CIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var kIt=Zt,xIt=tr,eO=nU,LIt=AIt,IIt=MIt,OIt=6123233995736766e-32;function RIt(e){var t,r,n,i,o;if(kIt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*IIt(r),r=xIt(r+r),o=eO-r,r=r*i-OIt,o-=r,o+=eO;else{if(n<1e-8)return e;r=n*n,o=r*LIt(r),o=n*o+n}return t?-o:o}var DIt=RIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NIt=DIt,jA=NIt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FIt(e){return Math.abs(e)}var BIt=FIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $It=BIt,he=$It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zIt=Math.ceil,VIt=zIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UIt=VIt,iU=UIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GIt=xn,jIt=iU;function WIt(e){return e<0?jIt(e):GIt(e)}var HIt=WIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XIt=HIt,WA=XIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YIt=1023,qIt=YIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZIt=-1023,KIt=ZIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JIt=-1074,QIt=JIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tOt=Ne,eOt=Tr;function rOt(e){return e===tOt||e===eOt}var nOt=rOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=nOt,If=iOt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oOt=2147483648>>>0,aOt=oOt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sOt=2147483647>>>0,Fy=sOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lOt=xf,oU,PT,ET;lOt===!0?(PT=1,ET=0):(PT=0,ET=1);oU={HIGH:PT,LOW:ET};var uOt=oU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cOt=Mf,fOt=kf,aU=uOt,sU=new fOt(1),rO=new cOt(sU.buffer),hOt=aU.HIGH,dOt=aU.LOW;function pOt(e,t,r,n){return sU[0]=e,t[n]=rO[hOt],t[n+r]=rO[dOt],t}var lU=pOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vOt=lU;function gOt(e){return vOt(e,[0>>>0,0>>>0],1,0)}var mOt=gOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yOt=dr,uU=mOt,_Ot=lU;yOt(uU,"assign",_Ot);var HA=uU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bOt=xf,cU,AT,CT;bOt===!0?(AT=1,CT=0):(AT=0,CT=1);cU={HIGH:AT,LOW:CT};var wOt=cU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SOt=Mf,TOt=kf,fU=wOt,hU=new TOt(1),nO=new SOt(hU.buffer),POt=fU.HIGH,EOt=fU.LOW;function AOt(e,t){return nO[POt]=e,nO[EOt]=t,hU[0]}var COt=AOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MOt=COt,XA=MOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kOt=aOt,xOt=Fy,LOt=HA,IOt=oi,OOt=XA,Ub=[0,0];function ROt(e,t){var r,n;return LOt.assign(e,Ub,1,0),r=Ub[0],r&=xOt,n=IOt(t),n&=kOt,r|=n,OOt(r,Ub[1])}var DOt=ROt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NOt=DOt,YA=NOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FOt=22250738585072014e-324,Su=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BOt=Su,$Ot=If,zOt=Zt,VOt=he,UOt=4503599627370496;function GOt(e,t,r,n){return zOt(e)||$Ot(e)?(t[n]=e,t[n+r]=0,t):e!==0&&VOt(e)<BOt?(t[n]=e*UOt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var dU=GOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jOt=dU;function WOt(e){return jOt(e,[0,0],1,0)}var HOt=WOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XOt=dr,pU=HOt,YOt=dU;XOt(pU,"assign",YOt);var qOt=pU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZOt=2146435072,KOt=ZOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JOt=oi,QOt=KOt,tRt=wu;function eRt(e){var t=JOt(e);return t=(t&QOt)>>>20,t-tRt|0}var rRt=eRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nRt=rRt,iRt=nRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oRt=Ne,aRt=Tr,sRt=wu,lRt=qIt,uRt=KIt,cRt=QIt,fRt=Zt,hRt=If,dRt=YA,pRt=qOt.assign,vRt=iRt,gRt=HA,mRt=XA,yRt=2220446049250313e-31,_Rt=2148532223>>>0,Gb=[0,0],jb=[0,0];function bRt(e,t){var r,n;return t===0||e===0||fRt(e)||hRt(e)?e:(pRt(e,Gb,1,0),e=Gb[0],t+=Gb[1],t+=vRt(e),t<cRt?dRt(0,e):t>lRt?e<0?aRt:oRt:(t<=uRt?(t+=52,n=yRt):n=1,gRt.assign(e,jb,1,0),r=jb[0],r&=_Rt,r|=t+sRt<<20,n*mRt(r,jb[1])))}var wRt=bRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SRt=wRt,Of=SRt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TRt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var PRt=TRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ERt=Of,ARt=PRt;function CRt(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*ARt(i),a=1-(t-n*o/(2-o)-e),ERt(a,r)}var MRt=CRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var kRt=Zt,iO=WA,xRt=Tr,oO=Ne,LRt=MRt,IRt=.6931471803691238,ORt=19082149292705877e-26,aO=1.4426950408889634,RRt=709.782712893384,DRt=-745.1332191019411,vU=1/(1<<28),NRt=-vU;function FRt(e){var t,r,n;return kRt(e)||e===oO?e:e===xRt?0:e>RRt?oO:e<DRt?0:e>NRt&&e<vU?1+e:(e<0?n=iO(aO*e-.5):n=iO(aO*e+.5),t=e-n*IRt,r=n*ORt,LRt(t,r,n))}var BRt=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=BRt,Ve=$Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zRt=Ds;function VRt(e){return zRt(e/2)}var URt=VRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GRt=URt,jRt=GRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sO=jRt;function WRt(e){return e>0?sO(e-1):sO(e+1)}var HRt=WRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XRt=HRt,qA=XRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YRt=xf,MT;YRt===!0?MT=0:MT=1;var qRt=MT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZRt=Mf,KRt=kf,JRt=qRt,kT=new KRt(1),QRt=new ZRt(kT.buffer);function tDt(e,t){return kT[0]=e,QRt[JRt]=t>>>0,kT[0]}var eDt=tDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rDt=eDt,Q0=rDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nDt(e){return e|0}var iDt=nDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oDt=iDt,gU=oDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var lO=qA,aDt=YA,sDt=Tr,$v=Ne;function lDt(e,t){return t===sDt?$v:t===$v?0:t>0?lO(t)?e:0:lO(t)?aDt($v,e):$v}var uDt=lDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var cDt=Fy,fDt=oi,hDt=1072693247,zv=1e300,Vv=1e-300;function dDt(e,t){var r,n;return n=fDt(e),r=n&cDt,r<=hDt?t<0?zv*zv:Vv*Vv:t>0?zv*zv:Vv*Vv}var pDt=dDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vDt=he,uO=Ne;function gDt(e,t){return e===-1?(e-e)/(e-e):e===1?1:vDt(e)<1==(t===uO)?0:uO}var mDt=gDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yDt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var _Dt=yDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var bDt=oi,Uv=Q0,cO=J0,wDt=wu,SDt=_Dt,TDt=1048575,fO=1048576,PDt=1072693248,EDt=536870912,ADt=524288,CDt=20,MDt=9007199254740992,kDt=.9617966939259756,xDt=.9617967009544373,LDt=-7028461650952758e-24,IDt=[1,1.5],ODt=[0,.5849624872207642],RDt=[0,1350039202129749e-23];function DDt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C;return S=0,r<fO&&(t*=MDt,S-=53,r=bDt(t)),S+=(r>>CDt)-wDt|0,P=r&TDt|0,r=P|PDt|0,P<=235662?C=0:P<767610?C=1:(C=0,S+=1,r-=fO),t=cO(t,r),c=IDt[C],w=t-c,T=1/(t+c),i=w*T,a=Uv(i,0),n=(r>>1|EDt)+ADt,n+=C<<18,l=cO(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,_=o*o*SDt(o),_+=s*(a+i),o=a*a,l=3+o+_,l=Uv(l,0),u=_-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=Uv(h,0),d=T-(h-w),p=xDt*h,v=LDt*h+d*kDt+RDt[C],f=ODt[C],y=S,g=p+v+f+y,g=Uv(g,0),m=v-(g-y-f-p),e[0]=g,e[1]=m,e}var NDt=DDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FDt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var BDt=FDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var $Dt=Q0,zDt=BDt,VDt=1.4426950408889634,UDt=1.4426950216293335,GDt=19259629911266175e-24;function jDt(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*zDt(i),a=UDt*i,s=i*GDt-o*VDt,n=a+s,n=$Dt(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var WDt=jDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HDt=.6931471805599453,XDt=HDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YDt=1048575,qDt=YDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZDt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var KDt=ZDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var JDt=oi,hO=J0,QDt=Q0,t8t=gU,e8t=Of,r8t=XDt,dO=wu,pO=Fy,vO=qDt,n8t=KDt,gO=1048576,i8t=1071644672,Eh=20,o8t=.6931471824645996,a8t=-1904654299957768e-24;function s8t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&pO|0,d=(h>>Eh)-dO|0,f=0,h>i8t&&(f=e+(gO>>d+1)>>>0,d=((f&pO)>>Eh)-dO|0,n=(f&~(vO>>d))>>>0,o=hO(0,n),f=(f&vO|gO)>>Eh-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=QDt(o,0),s=o*o8t,l=(r-(o-t))*r8t+o*a8t,c=s+l,u=l-(c-s),o=c*c,i=c-o*n8t(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=JDt(c),e=t8t(e),e+=f<<Eh>>>0,e>>Eh<=0?c=e8t(c,f):c=hO(c,e),c}var l8t=s8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var mO=Zt,yO=qA,_O=If,u8t=Ds,bO=tr,c8t=he,Wb=HA,f8t=Q0,wO=gU,h8t=Tr,d8t=Ne,Hb=Fy,p8t=uDt,v8t=pDt,g8t=mDt,m8t=NDt,y8t=WDt,_8t=l8t,b8t=1072693247,w8t=1105199104,S8t=1139802112,SO=1083179008,T8t=1072693248,P8t=1083231232,E8t=3230714880>>>0,TO=31,Xa=1e300,Ya=1e-300,A8t=8008566259537294e-32,Wo=[0,0],PO=[0,0];function mU(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g,m;if(mO(e)||mO(t))return NaN;if(Wb.assign(t,Wo,1,0),s=Wo[0],l=Wo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return bO(e);if(t===-.5)return 1/bO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(_O(t))return g8t(e,t)}if(Wb.assign(e,Wo,1,0),o=Wo[0],a=Wo[1],a===0){if(o===0)return p8t(e,t);if(e===1)return 1;if(e===-1&&yO(t))return-1;if(_O(e))return e===h8t?mU(-0,-t):t<0?0:d8t}if(e<0&&u8t(t)===!1)return(e-e)/(e-e);if(i=c8t(e),r=o&Hb|0,n=s&Hb|0,u=o>>>TO|0,c=s>>>TO|0,u&&yO(t)?u=-1:u=1,n>w8t){if(n>S8t)return v8t(e,t);if(r<b8t)return c===1?u*Xa*Xa:u*Ya*Ya;if(r>T8t)return c===0?u*Xa*Xa:u*Ya*Ya;p=y8t(PO,i)}else p=m8t(PO,i,r);if(f=f8t(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,Wb.assign(v,Wo,1,0),g=wO(Wo[0]),m=wO(Wo[1]),g>=SO){if((g-SO|m)!==0||d+A8t>v-h)return u*Xa*Xa}else if((g&Hb)>=P8t&&((g-E8t|m)!==0||d<=v-h))return u*Ya*Ya;return v=_8t(g,h,d),u*v}var C8t=mU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M8t=C8t,er=M8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k8t=2.718281828459045,Rf=k8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x8t=2220446049250313e-31,Ma=x8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L8t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var I8t=L8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var EO=Zt,O8t=Ln,R8t=tr,D8t=he,N8t=Ve,Xb=er,F8t=Rf,Yb=Ma,qb=I8t,Zb=10.900511;function B8t(e,t){var r,n,i,o,a,s,l;return EO(e)||EO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Yb?(a=l/e,a/=t,a):l===e&&t<Yb?1/t:l===t&&e<Yb?1/e:(e<t&&(s=t,t=e,e=s),n=e+Zb-.5,i=t+Zb-.5,o=l+Zb-.5,a=qb(e)*(qb(t)/qb(l)),r=e-.5-t,D8t(t*r)<o*100&&e>100?a*=N8t(r*O8t(-t/o)):a*=Xb(n/o,r),o>1e10?a*=Xb(n/o*(i/o),t):a*=Xb(n*i/(o*o),t),a*=R8t(F8t/i),a))}var $8t=B8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z8t=$8t,yU=z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V8t=Ne;function U8t(e){return e===0&&1/e===V8t}var G8t=U8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j8t=G8t,W8t=j8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AO=W8t,Kb=Zt,H8t=Tr,Gv=Ne;function X8t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Kb(e)||Kb(t)?NaN:e===Gv||t===Gv?Gv:e===t&&e===0?AO(e)?e:t:e>t?e:t;for(n=H8t,o=0;o<r;o++){if(i=arguments[o],Kb(i)||i===Gv)return i;(i>n||i===n&&i===0&&AO(i))&&(n=i)}return n}var Y8t=X8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q8t=Y8t,Tu=q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z8t=Tr;function K8t(e){return e===0&&1/e===Z8t}var J8t=K8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q8t=J8t,_U=Q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CO=_U,Jb=Zt,jv=Tr,t7t=Ne;function e7t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Jb(e)||Jb(t)?NaN:e===jv||t===jv?jv:e===t&&e===0?CO(e)?e:t:e<t?e:t;for(n=t7t,o=0;o<r;o++){if(i=arguments[o],Jb(i)||i===jv)return i;(i<n||i===n&&i===0&&CO(i))&&(n=i)}return n}var r7t=e7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n7t=r7t,Fs=n7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i7t=17976931348623157e292,Df=i7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o7t=2147483647,a7t=o7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s7t=1.5707963267948966,ZA=s7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l7t=3.141592653589793,Bs=l7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u7t(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var c7t=u7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f7t(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var h7t=f7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var d7t=c7t,p7t=h7t;function v7t(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*d7t(o),n+=i*i*p7t(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var g7t=v7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m7t=g7t,bU=m7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var MO=-.16666666666666632,y7t=.00833333333332249,_7t=-.0001984126982985795,b7t=27557313707070068e-22,w7t=-25050760253406863e-24,S7t=158969099521155e-24;function T7t(e,t){var r,n,i,o;return o=e*e,i=o*o,r=y7t+o*(_7t+o*b7t)+o*i*(w7t+o*S7t),n=o*e,t===0?e+n*(MO+o*r):e-(o*(.5*t-n*r)-t-n*MO)}var P7t=T7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E7t=P7t,wU=E7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A7t=xf,xT;A7t===!0?xT=0:xT=1;var C7t=xT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M7t=Mf,k7t=kf,x7t=C7t,SU=new k7t(1),L7t=new M7t(SU.buffer);function I7t(e){return SU[0]=e,L7t[x7t]}var O7t=I7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R7t=O7t,D7t=R7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function N7t(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var F7t=N7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B7t=F7t,$7t=B7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7t=$7t;function V7t(e){return z7t(0,e)}var U7t=V7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G7t=U7t,j7t=G7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var W7t=xn,Wv=Of,By=j7t,TU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],H7t=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Qb=16777216,tw=5960464477539063e-23,Hv=By(20),kO=By(20),Xv=By(20),gr=By(20);function PU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,g,m;for(h=o,m=n[r],g=r,d=0;g>0;d++)c=tw*m|0,gr[d]=m-Qb*c|0,m=n[g-1]+c,g-=1;if(m=Wv(m,i),m-=8*W7t(m*.125),v=m|0,m-=v,f=0,i>0?(d=gr[r-1]>>24-i,v+=d,gr[r-1]-=d<<24-i,f=gr[r-1]>>23-i):i===0?f=gr[r-1]>>23:m>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)g=gr[d],u===0?g!==0&&(u=1,gr[d]=16777216-g):gr[d]=16777215-g;if(i>0)switch(i){case 1:gr[r-1]&=8388607;break;case 2:gr[r-1]&=4194303;break}f===2&&(m=1-m,u!==0&&(m-=Wv(1,i)))}if(m===0){for(g=0,d=r-1;d>=o;d--)g|=gr[d];if(g===0){for(p=1;gr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=TU[a+d],c=0,g=0;g<=s;g++)c+=e[g]*l[s+(d-g)];n[d]=c}return r+=p,PU(e,t,r,n,i,o,a,s,l)}}if(m===0)for(r-=1,i-=24;gr[r]===0;)r-=1,i-=24;else m=Wv(m,-i),m>=Qb?(c=tw*m|0,gr[r]=m-Qb*c|0,r+=1,i+=24,gr[r]=c):gr[r]=m|0;for(c=Wv(1,i),d=r;d>=0;d--)n[d]=c*gr[d],c*=tw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=H7t[p]*n[d+p];Xv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=Xv[d];for(f===0?t[0]=c:t[0]=-c,c=Xv[0]-c,d=1;d<=r;d++)c+=Xv[d];return f===0?t[1]=c:t[1]=-c,v&7}function X7t(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?Hv[c]=0:Hv[c]=TU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*Hv[s+(c-f)];kO[c]=i}return l=o,PU(e,t,l,kO,u,o,a,s,Hv)}var Y7t=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q7t=Math.round,Z7t=q7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K7t=Z7t,$y=K7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var J7t=$y,xO=oi,Q7t=.6366197723675814,t9t=1.5707963267341256,e9t=6077100506506192e-26,r9t=6077100506303966e-26,n9t=20222662487959506e-37,i9t=20222662487111665e-37,o9t=84784276603689e-45,LO=2047;function a9t(e,t,r){var n,i,o,a,s,l,u;return i=J7t(e*Q7t),a=e-i*t9t,s=i*e9t,u=t>>20|0,r[0]=a-s,n=xO(r[0]),l=u-(n>>20&LO),l>16&&(o=a,s=i*r9t,a=o-s,s=i*n9t-(o-a-s),r[0]=a-s,n=xO(r[0]),l=u-(n>>20&LO),l>49&&(o=a,s=i*i9t,a=o-s,s=i*o9t-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var s9t=a9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var l9t=oi,u9t=D7t,c9t=XA,f9t=Y7t,Yv=s9t,h9t=0,d9t=16777216,qa=1.5707963267341256,Ol=6077100506506192e-26,qv=2*Ol,Zv=3*Ol,Kv=4*Ol,p9t=2147483647,v9t=2146435072,g9t=1048575,m9t=598523,y9t=1072243195,_9t=1073928572,b9t=1074752122,w9t=1074977148,S9t=1075183036,T9t=1075388923,P9t=1075594811,E9t=1094263291,Ah=[0,0,0],Ch=[0,0];function A9t(e,t){var r,n,i,o,a,s,l,u;if(i=l9t(e),o=i&p9t|0,o<=y9t)return t[0]=e,t[1]=0,0;if(o<=b9t)return(o&g9t)===m9t?Yv(e,o,t):o<=_9t?e>0?(u=e-qa,t[0]=u-Ol,t[1]=u-t[0]-Ol,1):(u=e+qa,t[0]=u+Ol,t[1]=u-t[0]+Ol,-1):e>0?(u=e-2*qa,t[0]=u-qv,t[1]=u-t[0]-qv,2):(u=e+2*qa,t[0]=u+qv,t[1]=u-t[0]+qv,-2);if(o<=P9t)return o<=S9t?o===w9t?Yv(e,o,t):e>0?(u=e-3*qa,t[0]=u-Zv,t[1]=u-t[0]-Zv,3):(u=e+3*qa,t[0]=u+Zv,t[1]=u-t[0]+Zv,-3):o===T9t?Yv(e,o,t):e>0?(u=e-4*qa,t[0]=u-Kv,t[1]=u-t[0]-Kv,4):(u=e+4*qa,t[0]=u+Kv,t[1]=u-t[0]+Kv,-4);if(o<E9t)return Yv(e,o,t);if(o>=v9t)return t[0]=NaN,t[1]=NaN,0;for(r=u9t(e),n=(o>>20)-1046,u=c9t(o-(n<<20|0),r),s=0;s<2;s++)Ah[s]=u|0,u=(u-Ah[s])*d9t;for(Ah[2]=u,a=3;Ah[a-1]===h9t;)a-=1;return l=f9t(Ah,Ch,n,a),e<0?(t[0]=-Ch[0],t[1]=-Ch[1],-l):(t[0]=Ch[0],t[1]=Ch[1],l)}var C9t=A9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M9t=C9t,EU=M9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var k9t=oi,IO=bU,ew=wU,x9t=EU,L9t=2147483647,I9t=2146435072,O9t=1072243195,R9t=1045430272,Ho=[0,0];function D9t(e){var t,r;if(t=k9t(e),t&=L9t,t<=O9t)return t<R9t?e:ew(e,0);if(t>=I9t)return NaN;switch(r=x9t(e,Ho),r&3){case 0:return ew(Ho[0],Ho[1]);case 1:return IO(Ho[0],Ho[1]);case 2:return-ew(Ho[0],Ho[1]);default:return-IO(Ho[0],Ho[1])}}var N9t=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F9t=N9t,tp=F9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B9t=2.5066282746310007,zy=B9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $9t(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var z9t=$9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var V9t=zy,OO=er,U9t=Ve,G9t=z9t,j9t=143.01608;function W9t(e){var t,r,n;return t=1/e,t=1+t*G9t(t),r=U9t(e),e>j9t?(n=OO(e,.5*e-.25),r=n*(n/r)):r=OO(e,e-.5)/r,V9t*r*t}var H9t=W9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X9t=.5772156649015329,Y9t=X9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var q9t=Y9t;function Z9t(e,t){return t/((1+q9t*e)*e)}var K9t=Z9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function J9t(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var Q9t=J9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var tNt=Zt,eNt=Ds,rNt=_U,RO=he,nNt=xn,iNt=tp,DO=Ne,NO=Tr,FO=Bs,BO=H9t,$O=K9t,oNt=Q9t;function aNt(e){var t,r,n,i;if(eNt(e)&&e<0||e===NO||tNt(e))return NaN;if(e===0)return rNt(e)?NO:DO;if(e>171.61447887182297)return DO;if(e<-170.5674972726612)return 0;if(r=RO(e),r>33)return e>=0?BO(e):(n=nNt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*iNt(FO*i),t*FO/(RO(i)*BO(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return $O(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return $O(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*oNt(e))}var sNt=aNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lNt=sNt,Oo=lNt;const uNt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cNt=Zt,fNt=Ds,hNt=Oo,dNt=Ne,pNt=uNt,vNt=170;function gNt(e){return cNt(e)?NaN:fNt(e)?e<0?NaN:e<=vNt?pNt[e]:dNt:hNt(e+1)}var mNt=gNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yNt=mNt,AU=yNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Nt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var bNt=_Nt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wNt=bNt,SNt=wNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TNt=SNt,PNt=TNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ENt=10.900511,ep=ENt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var zO=PNt,ANt=Oo,VO=Ln,UO=he,GO=Ve,jO=er,CNt=Ma,MNt=Rf,kNt=ep,WO=170,xNt=4269068009004705e289;function CU(e,t){var r,n,i;return e<CNt?t>WO?(n=CU(t,WO-t),n*=e,n*=xNt,1/n):1/(e*ANt(e+t)):(i=e+kNt-.5,e+t===e?UO(t)<10?r=GO((.5-e)*VO(t/i)):r=1:(UO(t)<10?r=GO((.5-e)*VO(t/i)):r=jO(i/(i+t),e-.5),r*=zO(e)/zO(e+t)),r*=jO(MNt/(i+t),t),r)}var LNt=CU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var INt=he,HO=xn,XO=Oo,YO=AU,ONt=LNt,qO=170;function RNt(e,t){var r,n,i;if(e<=0||e+t<=0)return XO(e)/XO(e+t);if(n=HO(t),n===t){if(i=HO(e),i===e&&e<=qO&&e+t<=qO)return YO(i-1)/YO(n+i-1);if(INt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return ONt(e,t)}var DNt=RNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NNt=DNt,KA=NNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FNt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var BNt=FNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Nt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var zNt=$Nt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ZO=oi,VNt=J0,UNt=Zt,GNt=wu,jNt=Tr,WNt=BNt,HNt=zNt,Jv=.6931471803691238,Qv=19082149292705877e-26,XNt=0x40000000000000,YNt=.3333333333333333,KO=1048575,qNt=2146435072,ZNt=1048576,KNt=1072693248;function JNt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?jNt:UNt(e)||e<0?NaN:(r=ZO(e),o=0,r<ZNt&&(o-=54,e*=XNt,r=ZO(e)),r>=qNt?e+e:(o+=(r>>20)-GNt|0,r&=KO,l=r+614244&1048576|0,e=VNt(e,r|l^KNt),o+=l>>20|0,s=e-1,(KO&2+r)<3?s===0?o===0?0:o*Jv+o*Qv:(a=s*s*(.5-YNt*s),o===0?s-a:o*Jv-(a-o*Qv-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*WNt(f),n=h*HNt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*Jv-(t-(c*(t+a)+o*Qv)-s)):o===0?s-c*(s-a):o*Jv-(c*(s-a)-o*Qv-s))))}var QNt=JNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tFt=QNt,Se=tFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var eFt=oi,rw=bU,JO=wU,rFt=EU,Xo=[0,0],nFt=2147483647,iFt=1072243195,oFt=1044381696,aFt=2146435072;function sFt(e){var t,r;if(t=eFt(e),t&=nFt,t<=iFt)return t<oFt?1:rw(e,0);if(t>=aFt)return NaN;switch(r=rFt(e,Xo),r&3){case 0:return rw(Xo[0],Xo[1]);case 1:return-JO(Xo[0],Xo[1]);case 2:return-rw(Xo[0],Xo[1]);default:return JO(Xo[0],Xo[1])}}var lFt=sFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uFt=lFt,JA=uFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cFt=Zt,fFt=If,QO=JA,nw=tp,hFt=he,Mh=YA,kh=Bs;function dFt(e){var t,r;return cFt(e)?NaN:fFt(e)?NaN:(r=e%2,t=hFt(r),t===0||t===1?Mh(0,r):t<.25?nw(kh*r):t<.75?(t=.5-t,Mh(QO(kh*t),r)):t<1.25?(r=Mh(1,r)-r,nw(kh*r)):t<1.75?(t-=1.5,-Mh(QO(kh*t),r)):(r-=Mh(2,r),nw(kh*r)))}var pFt=dFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vFt=pFt,gFt=vFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mFt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var yFt=mFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Ft(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var bFt=_Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wFt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var SFt=wFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TFt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var PFt=TFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EFt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var AFt=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CFt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var MFt=CFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kFt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var xFt=kFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LFt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var IFt=LFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OFt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var RFt=OFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DFt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var NFt=DFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var FFt=Zt,BFt=If,$Ft=he,Ju=Se,zFt=WA,VFt=gFt,UFt=Bs,iw=Ne,GFt=yFt,jFt=bFt,WFt=SFt,HFt=PFt,XFt=AFt,YFt=MFt,qFt=xFt,ZFt=IFt,KFt=RFt,JFt=NFt,QFt=.07721566490153287,tBt=.3224670334241136,eBt=1,rBt=-.07721566490153287,nBt=.48383612272381005,iBt=-.1475877229945939,oBt=.06462494023913339,aBt=-.07721566490153287,sBt=1,lBt=.4189385332046727,tg=1.4616321449683622,uBt=4503599627370496,cBt=0x400000000000000,fBt=8470329472543003e-37,tR=1.4616321449683622,hBt=-.12148629053584961,dBt=-3638676997039505e-33;function pBt(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(FFt(e)||BFt(e))return e;if(e===0)return iw;if(e<0?(t=!0,e=-e):t=!1,e<fBt)return-Ju(e);if(t){if(e>=uBt||(u=VFt(e),u===0))return iw;r=Ju(UFt/$Ft(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-Ju(e),e>=tg-1+.27?(f=1-e,n=0):e>=tg-1-.27?(f=e-(tR-1),n=1):(f=e,n=2)):(d=0,e>=tg+.27?(f=2-e,n=0):e>=tg-.27?(f=e-tR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=QFt+h*GFt(h),o=h*(tBt+h*jFt(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=nBt+c*XFt(c),o=iBt+c*YFt(c),i=oBt+c*qFt(c),s=h*a-(dBt-c*(o+f*i)),d+=hBt+s;break;case 2:a=f*(aBt+f*ZFt(f)),o=sBt+f*KFt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=zFt(e),f=e-n,s=f*(rBt+f*HFt(f)),l=eBt+f*WFt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=Ju(h)}else e<cBt?(u=Ju(e),h=1/e,f=h*h,c=lBt+h*JFt(f),d=(e-.5)*(u-1)+c):d=e*(Ju(e)-1);return t&&(d=r-d),d}var vBt=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gBt=vBt,Nf=gBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mBt=14901161193847656e-24,yBt=mBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Bt=709.782712893384,Pu=_Bt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bBt=Ve;function wBt(e,t){var r,n,i,o;if(i=bBt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var SBt=wBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TBt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var PBt=TBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EBt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var ABt=EBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CBt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var MBt=CBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kBt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var xBt=kBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LBt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var IBt=LBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OBt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var RBt=OBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DBt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var NBt=DBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FBt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var BBt=FBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var $Bt=Zt,eR=Ve,zBt=Q0,VBt=Ne,UBt=Tr,GBt=PBt,jBt=ABt,WBt=MBt,HBt=xBt,XBt=IBt,YBt=RBt,qBt=NBt,ZBt=BBt,eg=1e-300,KBt=13877787807814457e-33,rR=.8450629115104675,JBt=.12837916709551256,QBt=1,t$t=-.0023621185607526594,e$t=1,r$t=-.009864944034847148,n$t=1,i$t=-.0098649429247001,o$t=1;function a$t(e){var t,r,n,i,o,a,s,l;if($Bt(e))return NaN;if(e===VBt)return 0;if(e===UBt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<KBt?1-e:(n=e*e,i=JBt+n*GBt(n),o=QBt+n*jBt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=t$t+o*WBt(o),l=e$t+o*HBt(o),t?1+rR+s/l:1-rR-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=r$t+o*XBt(o),o=n$t+o*YBt(o);else{if(e<-6)return 2-eg;i=i$t+o*qBt(o),o=o$t+o*ZBt(o)}return n=zBt(r,0),i=eR(-(n*n)-.5625)*eR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-eg:eg*eg}var s$t=a$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l$t=s$t,MU=l$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var u$t=MU,nR=tr,c$t=Ve,f$t=Bs;function h$t(e,t){var r,n,i,o,a;if(o=u$t(nR(t)),o!==0&&e>1){for(n=c$t(-t)/nR(f$t*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var d$t=h$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p$t=-708.3964185322641,Ff=p$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qu=Ve,rg=er,v$t=Se,iR=Pu,oR=Ff;function g$t(e,t){var r,n;return n=e*v$t(t),t>=1?n<iR&&-t>oR?r=rg(t,e)*Qu(-t):e>=1?r=rg(t/Qu(t/e),e):r=Qu(n-t):n>oR?r=rg(t,e)*Qu(-t):t/e<iR?r=rg(t/Qu(t/e),e):r=Qu(n-t),r}var m$t=g$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y$t=6.283185307179586,kU=y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _$t(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var b$t=_$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w$t(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var S$t=w$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T$t(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var P$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E$t(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var A$t=E$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function C$t(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var M$t=C$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k$t(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var x$t=k$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L$t(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var I$t=L$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O$t(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var R$t=O$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D$t(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var N$t=D$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var F$t=Ns,B$t=MU,ow=tr,$$t=Ve,z$t=Se,V$t=kU,U$t=b$t,G$t=S$t,j$t=P$t,W$t=A$t,H$t=M$t,X$t=x$t,Y$t=I$t,q$t=R$t,Z$t=N$t,ui=[0,0,0,0,0,0,0,0,0,0];function K$t(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-z$t(1+n)+n,o=e*i,a=ow(2*i),t<e&&(a=-a),ui[0]=U$t(a),ui[1]=G$t(a),ui[2]=j$t(a),ui[3]=W$t(a),ui[4]=H$t(a),ui[5]=X$t(a),ui[6]=Y$t(a),ui[7]=q$t(a),ui[8]=Z$t(a),ui[9]=-.0005967612901927463,r=F$t(ui,1/e),r*=$$t(-o)/ow(V$t*e),t<e&&(r=-r),r+=B$t(ow(o))/2,r}var J$t=K$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q$t=eval,tzt=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ezt=tzt;function rzt(){var e;try{ezt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var nzt=rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var izt=nzt,xU=izt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ng=he,ozt=Ma,azt=1e6;function szt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||ozt,o=s.maxTerms||azt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,ng(n*a)>=ng(i)||--o===0)break}else do i=e(),a+=i;while(ng(n*a)<ng(i)&&--o);return a}var lzt=szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aR=he,uzt=Ma,czt=1e6;function fzt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||uzt,i=a.maxTerms||czt,o=a.initialValue||0;do n=e(),o+=n;while(aR(r*o)<aR(n)&&--i);return o}var hzt=fzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dzt=xU,pzt=lzt,vzt=hzt,LT;dzt()?LT=pzt:LT=vzt;var QA=LT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function gzt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var mzt=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yzt=QA,_zt=mzt;function bzt(e,t,r){var n,i;return r=r||0,i=_zt(e,t),n=yzt(i,{initialValue:r}),n}var wzt=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Szt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var Tzt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Pzt=Tzt,Ezt=Pzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Azt=Ezt,Vy=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Czt=Vy,Mzt=Nf,kzt=Oo,xzt=Ln,Lzt=tr,Izt=he,Za=Ve,xh=er,aw=Tu,sw=Fs,sR=Se,ig=Pu,Lh=Ff,lw=ep,Ozt=Rf;function Rzt(e,t){var r,n,i,o,a,s,l;return i=e+lw-.5,l=(t-e-lw+.5)/i,e<1?t<=Lh?Za(e*sR(t)-t-Mzt(e)):xh(t,e)*Za(-t)/kzt(e):(Izt(l*l*e)<=100&&e>150?(r=e*(xzt(l)-l)+t*(.5-lw)/i,r=Za(r)):(o=e*sR(t/i),a=e-t,sw(o,a)<=Lh||aw(o,a)>=ig?(n=a/e,sw(o,a)/2>Lh&&aw(o,a)/2<ig?(s=xh(t/i,e/2)*Za(a/2),r=s*s):sw(o,a)/4>Lh&&aw(o,a)/4<ig&&t>e?(s=xh(t/i,e/4)*Za(a/4),r=s*s,r*=r):n>Lh&&n<ig?r=xh(t*Za(n)/i,e):r=Za(o+a)):r=xh(t/i,e)*Za(a)),r*=Lzt(i/Ozt)/Czt(e),r)}var Dzt=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lR=Zt,uR=he,Nzt=Lf,Fzt=Se,Bzt=er,$zt=WA;function zzt(e,t){var r;if(lR(e)||lR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((uR(t*(e-1))<.5||uR(t)<.2)&&(r=Fzt(e)*t,r<.5))return Nzt(r)}else if($zt(t)!==t)return NaN;return Bzt(e,t)-1}var Vzt=zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uzt=Vzt,Gzt=Uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jzt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var Wzt=jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hzt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var Xzt=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yzt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var qzt=Yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uw=Se,Zzt=Ma,Kzt=Wzt,Jzt=Xzt,Qzt=qzt,tVt=.15896368026733398,eVt=.5281534194946289,rVt=.45201730728149414;function nVt(e,t,r){var n,i,o,a;if(e<Zzt)return-uw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=uw(e);while(e>=3);r=e-2}return o=r*(e+1),a=Kzt(r),i+=o*tVt+o*a,i}return e<1&&(i+=-uw(e),r=t,t=e,e+=1),e<=1.5?(o=Jzt(t),n=t*r,i+=n*eVt+n*o,i):(o=r*t,a=Qzt(-r),i+=o*rVt+o*a,i)}var iVt=nVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var cR=Oo,fR=Lf,oVt=Ln,aVt=Zt,hR=iVt;function sVt(e){return aVt(e)?NaN:e<0?e<-.5?cR(1+e)-1:fR(-oVt(e)+hR(e+2,e+1,e)):e<2?fR(hR(e+1,e,e-1)):cR(1+e)-1}var lVt=sVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uVt=lVt,cVt=uVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function fVt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var hVt=fVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dVt=Gzt,pVt=QA,vVt=cVt,gVt=hVt;function mVt(e,t,r){var n,i,o,a,s;return i=vVt(e),o=(i+1)/e,a=dVt(t,e),i-=a,i/=e,s=gVt(e,t),a+=1,n=r?o:0,i=-a*pVt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var yVt=mVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Vt=11754943508222875e-54,Uy=_Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g1=he,vo=Uy,bVt=Ma,wVt=1e6;function SVt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=vo),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=vo),s=u[1]+u[0]/s,s===0&&(s=vo),l=1/l,i=s*l,a*=i);while(g1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=vo),s=u[1]+u[0]/s,s===0&&(s=vo),l=1/l,i=s*l,a*=i);while(u&&g1(i-1)>t&&--r);return o/a}function TVt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=vo),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=vo),a=l[1]+l[0]/a,a===0&&(a=vo),s=1/s,i=a*s,o*=i);while(l&&g1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=vo),a=l[1]+l[0]/a,a===0&&(a=vo),s=1/s,i=a*s,o*=i);while(l&&g1(i-1)>t&&--r);return o}function PVt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||wVt,i=n.tolerance||bVt,n.keep?TVt(e,i,r):SVt(e,i,r)}var EVt=PVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LU=he,AVt=Ma,$c=Uy,CVt=1e6;function MVt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=$c),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=$c),o=l[1]+l[0]/o,o===0&&(o=$c),a=1/a,n=o*a,s*=n);while(l&&LU(n-1)>t&&--r);return i/s}function kVt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=$c),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=$c),i=s[1]+s[0]/i,i===0&&(i=$c),o=1/o,n=i*o,a*=n);while(s&&LU(n-1)>t&&--r);return a}function xVt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||AVt,r=n.maxIter||CVt,n.keep?kVt(e,i,r):MVt(e,i,r)}var LVt=xVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IVt=xU,OVt=EVt,RVt=LVt,IT;IVt()?IT=OVt:IT=RVt;var IU=IT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function DVt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var NVt=DVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var FVt=IU,BVt=NVt;function $Vt(e,t){var r=BVt(e,t);return 1/(t-e+1+FVt(r))}var zVt=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VVt=Nf,UVt=xn,Ih=Oo,dR=he,GVt=Ve,pR=er,ci=Se,jVt=yBt,vR=Df,WVt=zy,gR=Pu,HVt=Ne,XVt=SBt,YVt=d$t,mR=m$t,qVt=J$t,cw=wzt,yR=Dzt,ZVt=yVt,_R=zVt,KVt=170;function OU(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=KVt&&!o)return f&&t*4<e?(h=t*ci(e)-e,h+=ci(_R(t,e))):!f&&t>4*e?(h=t*ci(e)-e,s=0,h+=ci(cw(t,e,s)/t)):(h=OU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=ci(h)-t+(t-.5)*ci(t),h+=ci(WVt)):(h=t*ci(e)-e,s=0,h+=ci(cw(t,e,s)/t)):h=ci(h)+VVt(t)),h>gR?HVt:GVt(h);switch(c=t<30&&t<=e+1&&e<gR,c?(m=UVt(t),d=m===t,l=d?!1:dR(m-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<jVt&&t>1?a=6:e<.5?-.4/ci(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=dR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=XVt(t,e),o===!1&&(h*=Ih(t));break;case 1:h=YVt(t,e),o===!1&&(h*=Ih(t));break;case 2:h=o?yR(t,e):mR(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:Ih(t),o||h>=1||vR*h>s?(s/=h,o||t<1||vR/t>s?(s*=-t,i=!0):s=0):s=0)),h*=cw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,g=ZVt(t,e,f),h=g[0],y=g[1],f=!1,o&&(h/=y);break;case 4:h=o?yR(t,e):mR(t,e),h!==0&&(h*=_R(t,e));break;case 5:h=qVt(t,e),e>=t&&(f=!f);break;case 6:h=o?pR(e,t)/Ih(t+1):pR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Ih(t),h=v-h),h}var JVt=OU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QVt=JVt,RU=QVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tc=Ve,og=er,tUt=Se,bR=Pu,wR=Ff;function eUt(e,t){var r,n;return n=e*tUt(t),t>=1?n<bR&&-t>wR?r=og(t,e)*tc(-t):e>=1?r=og(t/tc(t/e),e):r=tc(n-t):n>wR?r=og(t,e)*tc(-t):t/e<bR?r=og(t/tc(t/e),e):r=tc(n-t),r}var rUt=eUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nUt=Vy,iUt=Nf,oUt=Oo,aUt=Ln,sUt=tr,lUt=he,Ka=Ve,Oh=er,fw=Tu,hw=Fs,SR=Se,ag=Pu,Rh=Ff,dw=ep,uUt=Rf;function cUt(e,t){var r,n,i,o,a,s,l;return i=e+dw-.5,l=(t-e-dw+.5)/i,e<1?t<=Rh?Ka(e*SR(t)-t-iUt(e)):Oh(t,e)*Ka(-t)/oUt(e):(lUt(l*l*e)<=100&&e>150?(r=e*(aUt(l)-l)+t*(.5-dw)/i,r=Ka(r)):(o=e*SR(t/i),a=e-t,hw(o,a)<=Rh||fw(o,a)>=ag?(n=a/e,hw(o,a)/2>Rh&&fw(o,a)/2<ag?(s=Oh(t/i,e/2)*Ka(a/2),r=s*s):hw(o,a)/4>Rh&&fw(o,a)/4<ag&&t>e?(s=Oh(t/i,e/4)*Ka(a/4),r=s*s,r*=r):n>Rh&&n<ag?r=Oh(t*Ka(n)/i,e):r=Ka(o+a)):r=Oh(t/i,e)*Ka(a)),r*=sUt(i/uUt)/nUt(e),r)}var fUt=cUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hUt=KA,TR=AU,dUt=RU,pUt=Ln,sg=he,PR=er,vUt=Se,gUt=Su,ER=Ma,mUt=rUt,yUt=fUt,Ja=new Array(30);function _Ut(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C;if(h=t-1,P=e+h/2,n<.35?g=pUt(-n):g=vUt(r),C=-P*g,y=yUt(t,C),y<=gUt)return i;for(a?(s=y/hUt(e,t),s/=PR(P,t)):s=mUt(t,C)/PR(P,t),s*=o,Ja[0]=1,_=dUt(C,t,!0,!0),_/=y,c=i+s*_,u=1,d=g/2,d*=d,p=1,m=4*P*P,f=t,T=1;T<Ja.length;++T){for(u+=2,Ja[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,Ja[T]+=v*Ja[T-w]/TR(l),l+=2;if(Ja[T]/=T,Ja[T]+=h/TR(u),_=(f*(f+1)*_+(C+f+1)*p)/m,p*=d,f+=2,S=s*Ja[T]*_,c+=S,S>1){if(sg(S)<sg(ER*c))break}else if(sg(S/ER)<sg(c))break}return c}var bUt=_Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function wUt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var SUt=wUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pw=he,AR=Tu,TUt=Ne;function PUt(e,t){var r,n,i;if(r=arguments.length,r===0)return TUt;if(r===2)return AR(pw(e),pw(t));for(n=[],i=0;i<r;i++)n.push(pw(arguments[i]));return AR.apply(null,n)}var EUt=PUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AUt=EUt,CUt=AUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vw=he,CR=Fs,MUt=Ne;function kUt(e,t){var r,n,i;if(r=arguments.length,r===0)return MUt;if(r===2)return CR(vw(e),vw(t));for(n=[],i=0;i<r;i++)n.push(vw(arguments[i]));return CR.apply(null,n)}var xUt=kUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LUt=xUt,IUt=LUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gw=Vy,OUt=CUt,RUt=IUt,MR=Lf,Qa=Ln,kR=tr,lg=he,to=Ve,eo=er,DUt=Fs,Fn=Se,ro=Pu,ec=Ff,mw=ep,NUt=Rf;function FUt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(!i)return eo(r,e)*eo(n,t);if(m=e+t,l=e+mw-.5,u=t+mw-.5,c=m+mw-.5,o=gw(m),o/=gw(e)*gw(t),o*=kR(u/NUt),o*=kR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,RUt(f,h)<.2)if(f*h>0||DUt(e,t)<1)lg(f)<.1?o*=to(e*Qa(f)):o*=eo(r*c/l,e),lg(h)<.1?o*=to(t*Qa(h)):o*=eo(n*c/u,t);else if(OUt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=MR(s*Qa(h)),d=f+d+d*f,d=e*Qa(d),o*=to(d)):(d=MR(Qa(f)/s),d=h+d+d*h,d=t*Qa(d),o*=to(d));else if(lg(f)<lg(h))if(y=e*Qa(f)+t*Fn(n*c/u),y<=ec||y>=ro){if(y+=Fn(o),y>=ro)return NaN;o=to(y)}else o*=to(y);else if(y=t*Qa(h)+e*Fn(r*c/l),y<=ec||y>=ro){if(y+=Fn(o),y>=ro)return NaN;o=to(y)}else o*=to(y);else if(v=r*c/l,g=n*c/u,f=e*Fn(v),h=t*Fn(g),f>=ro||f<=ec||h>=ro||h<=ec)if(e<t)if(p=eo(g,t/e),d=e*(Fn(v)+Fn(p)),d<ro&&d>ec)o*=eo(p*v,e);else{if(h+=f+Fn(o),h>=ro)return NaN;o=to(h)}else if(p=eo(v,e/t),d=(Fn(p)+Fn(g))*t,d<ro&&d>ec)o*=eo(p*g,t);else{if(h+=f+Fn(o),h>=ro)return NaN;o=to(h)}else o*=eo(v,e)*eo(g,t);return o}var tC=FUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BUt=IU,$Ut=tC,zUt={keep:!0,maxIter:1e3};function VUt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function UUt(e,t,r,n,i,o){var a,s,l;return a=$Ut(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=VUt(e,t,r,n),s=BUt(l,zUt),a/s)}var GUt=UUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yw=Ds,xR=Zt,jUt=qA,WUt=$y;function DU(e,t){var r,n;if(xR(e)||xR(t))return NaN;if(!yw(e)||!yw(t))return NaN;if(t<0)return 0;if(e<0)return r=DU(-e+t-1,t),jUt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return yw(r)?r:WUt(r)}var HUt=DU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XUt=HUt,YUt=XUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var LR=YUt,ml=xn,Dh=er,qUt=Su;function ZUt(e,t,r,n){var i,o,a,s,l;if(o=Dh(r,e),o>qUt)for(s=o,l=ml(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=ml(e*r),a<=t+1&&(a=ml(t+2)),o=Dh(r,a)*Dh(n,e-a),o*=LR(ml(e),ml(a)),o===0)for(l=a-1;l>t;l--)o+=Dh(r,l)*Dh(n,e-l),o*=LR(ml(e),ml(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var KUt=ZUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JUt=tC;function QUt(e,t,r,n,i,o,a){var s,l,u,c;if(s=JUt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var tGt=QUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _w=Vy,eGt=QA,rGt=Ln,nGt=tr,bw=Ve,ug=er,Nh=Se,iGt=Su,IR=Pu,OR=Ff,ww=ep,oGt=Rf,RR={maxTerms:100};function aGt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function sGt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+ww-.5,u=t+ww-.5,c=d+ww-.5,s=_w(d)/(_w(e)*_w(t)),f=Nh(c/u)*(t-.5),h=Nh(r*c/l)*e,f>OR&&f<IR&&h>OR&&h<IR?(e*t<u*10?s*=bw((t-.5)*rGt(e/u)):s*=ug(c/u,t-.5),s*=ug(r*c/l,e),s*=nGt(l/oGt),o&&(o[1]=s*ug(a,t))):(s=Nh(s)+f+h+(Nh(l)-1)/2,o&&(o[1]=bw(s+t*Nh(a))),s=bw(s))):s=ug(r,e),s<iGt?n:(p=aGt(e,t,r,s),RR.initialValue=n,eGt(p,RR))}var lGt=sGt,uGt=Zt,cGt=Lf,cg=xn,DR=Ln,NR=jA,Bn=yU,Sw=tr,fGt=Ve,Fh=er,hGt=Tu,FR=Fs,fg=Df,BR=Su,dGt=a7t,pGt=ZA,NU=Bs,ts=bUt,Tw=SUt,vGt=tC,$R=GUt,gGt=KUt,Bh=tGt,no=lGt,mGt=1/NU;function yGt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_;if(_=1-e,p=s,v=s+a,o[v]=-1,uGt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?fg/2:BR*2,i?(o[p]=n?1:Bn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?fg/2:BR*2,i?o[p]=0:o[p]=n?1:Bn(t,r),o):t===.5&&r===.5?(o[v]=mGt*Sw(_*e),y=NR(Sw(i?_:e)),y/=pGt,n||(y*=NU),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r===1?t===1?(o[p]=i?_:e,o[v]=1,o):(o[v]=t*Fh(e,t-1),_<.5?y=i?-cGt(t*DR(-_)):fGt(t*DR(-_)):y=i?-(Fh(e,t)-1):Fh(e,t),n||(y/=t),o[p]=y,o):(FR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),hGt(t,r)<=1?t>=FR(.2,r)||Fh(e,t)<=.9?i?(c=-(n?1:Bn(t,r)),i=!1,c=-no(t,r,e,c,n,o,_)):c=no(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Bn(t,r)),i=!1,c=-no(t,r,e,c,n,o,_)):c=no(t,r,e,0,n,o,_):(n?u=1:u=Tw(t+r,t,20),c=Bh(t,r,e,_,20,n,o),i?(c-=n?1:Bn(t,r),i=!1,c=-ts(t+20,r,e,_,c,u,n)):c=ts(t+20,r,e,_,c,u,n))):r<=1||e<.1&&Fh(r*e,t)<=.7?i?(c=-(n?1:Bn(t,r)),i=!1,c=-no(t,r,e,c,n,o,_)):c=no(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Bn(t,r)),i=!1,c=-no(t,r,e,c,n,o,_)):c=no(t,r,e,0,n,o,_):t>=15?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ts(t,r,e,_,c,1,n)):c=ts(t,r,e,_,0,1,n):(n?u=1:u=Tw(t+r,t,20),c=Bh(t,r,e,_,20,n,o),i?(c-=n?1:Bn(t,r),i=!1,c=-ts(t+20,r,e,_,c,u,n)):c=ts(t+20,r,e,_,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*_-r,l<0&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r<40?cg(t)===t&&cg(r)===r&&t<dGt-100?(g=t-1,m=r+g,c=gGt(m,g,e,_),n||(c*=Bn(t,r))):r*e<=.7?i?(c=-(n?1:Bn(t,r)),i=!1,c=-no(t,r,e,c,n,o,_)):c=no(t,r,e,0,n,o,_):t>15?(m=cg(r),m===r&&(m-=1),f=r-m,n?u=1:u=Tw(t+f,f,m),c=Bh(f,t,_,e,m,n),c=ts(t,f,e,_,c,1,n),c/=u):n?(m=cg(r),f=r-m,f<=0&&(m-=1,f+=1),c=Bh(f,t,_,e,m,n),c+=Bh(t,f,e,_,20,n),i&&(c-=1),c=ts(t+20,f,e,_,c,1,n),i&&(c=-c,i=!1)):c=$R(t,r,e,_,n,o):c=$R(t,r,e,_,n,o)),o[v]<0&&(o[v]=vGt(t,r,e,_,!0)),h=_*e,o[v]!==0&&(fg*h<o[v]?o[v]=fg/2:o[v]/=h),o[p]=i?(n?1:Bn(t,r))-c:c,o))}var FU=yGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Gt=FU;function bGt(e,t,r,n,i){return _Gt(e,t,r,n,i,[0,0],1,0)}var wGt=bGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SGt=dr,BU=wGt,TGt=FU;SGt(BU,"assign",TGt);var $U=BU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PGt=$U.assign;function EGt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,PGt(e,t,r,n,i,o,1,0),o[0]}var AGt=EGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CGt=AGt,eC=CGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MGt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var kGt=MGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xGt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var LGt=xGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IGt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var OGt=IGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RGt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var DGt=RGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NGt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var FGt=NGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BGt=Zt,zR=tr,VR=Se,$Gt=Ne,zGt=Tr,VGt=kGt,UGt=LGt,GGt=OGt,jGt=DGt,WGt=FGt,HGt=.08913147449493408,XGt=2.249481201171875,YGt=.807220458984375,qGt=.9399557113647461,ZGt=.9836282730102539;function KGt(e){var t,r,n,i,o;return BGt(e)?NaN:e===0?$Gt:e===2?zGt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=VGt(e),t*(i*HGt+i*o)):n>=.25?(i=zR(-2*VR(n)),n-=.25,o=UGt(n),t*(i/(XGt+o))):(n=zR(-VR(n)),n<3?(r=n-1.125,o=GGt(r),t*(YGt*n+o*n)):n<6?(r=n-3,o=jGt(r),t*(qGt*n+o*n)):(r=n-6,o=WGt(r),t*(ZGt*n+o*n))))}var JGt=KGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QGt=JGt,rp=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var tjt=Zt,UR=jA,ejt=tr,GR=nU,rjt=6123233995736766e-32;function njt(e){var t;return tjt(e)?NaN:e<-1||e>1?NaN:e>.5?2*UR(ejt(.5-.5*e)):(t=GR-UR(e),t+=rjt,t+=GR,t)}var ijt=njt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ojt=ijt,ajt=ojt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sjt=1.4142135623730951,rC=sjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ljt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var ujt=ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cjt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var fjt=cjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hjt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var djt=hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pjt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var vjt=pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gjt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var mjt=gjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yjt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var _jt=yjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bjt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var wjt=bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sjt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var Tjt=Sjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pjt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var Ejt=Pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ajt=KA,Cjt=Ns,Mjt=tr,kjt=Bs,xjt=ujt,Ljt=fjt,Ijt=djt,Ojt=vjt,Rjt=mjt,Djt=_jt,Njt=wjt,Fjt=Tjt,Bjt=Ejt,$jt=0,io=[1,0,0,0,0,0,0,0,0,0];function zjt(e,t){var r,n;return n=Ajt(e/2,.5)*Mjt(e*kjt)*(t-.5),r=1/e,io[1]=xjt(r),io[2]=Ljt(r),io[3]=Ijt(r),io[4]=Ojt(r),io[5]=Rjt(r),io[6]=Djt(r),io[7]=Njt(r),io[8]=Fjt(r),io[9]=Bjt(r),$jt+n*Cjt(io,n*n)}var Vjt=zjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ujt=KA,Gjt=Ns,jR=tr,jjt=er,Wjt=Bs,es=[0,0,0,0,0,0,0];function Hjt(e,t){var r,n,i,o,a,s,l,u;return u=Ujt(e/2,.5)*jR(e*Wjt)*t,o=e+2,a=e+4,s=e+6,es[0]=1,es[1]=-(e+1)/(2*o),o*=e+2,es[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,es[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,es[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,es[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,es[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=jR(e),i=jjt(l*u,1/e),n=i*i,r=Gjt(es,n),r*=l,r/=i,-r}var Xjt=Hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var WR=rp,Yjt=Lf,HR=tr,qjt=er,Zjt=ZA,XR=rC;function Kjt(e,t){var r,n,i,o,a,s,l;return e>1e20?-WR(2*t)*XR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*HR(r*Zjt)*e,l=qjt(o*2*t,2/e),l>.05+r?(s=-WR(2*t)*XR,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=Yjt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=HR(e*l),-a)}var Jjt=Kjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YR=rp,qR=xn,Pw=Of,ZR=$y,Qjt=ajt,hg=tr,tWt=he,KR=JA,eWt=er,rWt=tp,JR=rC,QR=Bs,tD=Vjt,dg=Xjt,Ew=Jjt,eD=268435456,nWt=1/3,iWt=2*53/3,oWt=.8549879733383485;function aWt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,qR(e)===e&&e<20)switch(i=Pw(1,iWt),qR(e)){case 1:t===.5?s=0:s=-KR(QR*t)/rWt(QR*t);break;case 2:s=(2*t-1)/hg(2*t*r);break;case 4:l=4*t*r,o=hg(l),v=4*KR(Qjt(o)/3)/o,g=hg(v-4),s=t-.5<0?-g:g;break;case 6:if(t<1e-150)return(a?-1:1)*Ew(e,t);m=4*(t-t*t),y=eWt(m,nWt),p=6*(1+oWt*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*m*d-270*f+2187)/(5*(4*m*h-216*p-243));while(tWt((p-c)/p)>i);p=hg(p-e),s=t-.5<0?-p:p;break;default:e>eD?s=YR(2*t)*JR:e<3?(n=.2742-e*.0242143,t>n?s=tD(e,t):s=dg(e,t)):(n=Pw(1,ZR(e/-.654)),t>n?s=Ew(e,t):s=dg(e,t))}else e>eD?s=-YR(2*t)*JR:e<3?(n=.2742-e*.0242143,t>n?s=tD(e,t):s=dg(e,t)):(n=Pw(1,ZR(e/-.654)),t>n?s=Ew(e,t):s=dg(e,t));return a?-s:s}var sWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lWt=sWt;function uWt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=lWt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var cWt=uWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pg=Ns,fWt=rp,rD=tr,hWt=Ve,Yo=rC,ze=[0,0,0,0,0,0,0],$h=[0,0,0,0];function dWt(e,t,r){var n,i,o,a,s,l,u;return n=fWt(2*r),n/=-rD(e/2),$h[0]=n,l=t-e,a=l*l,s=a*l,ze[0]=-l*Yo/2,ze[1]=(1-2*l)/8,ze[2]=-(l*Yo/48),ze[3]=-1/192,ze[4]=-l*Yo/3840,ze[5]=0,ze[6]=0,$h[1]=pg(ze,n),ze[0]=l*Yo*(3*l-2)/12,ze[1]=(20*a-12*l+1)/128,ze[2]=l*Yo*(20*l-1)/960,ze[3]=(16*a+30*l-15)/4608,ze[4]=l*Yo*(21*l+32)/53760,ze[5]=(-(32*a)+63)/368640,ze[6]=-l*Yo*(120*l+17)/25804480,$h[2]=pg(ze,n),ze[0]=l*Yo*(-75*a+80*l-16)/480,ze[1]=(-1080*s+868*a-90*l-45)/9216,ze[2]=l*Yo*(-1190*a+84*l+373)/53760,ze[3]=(-2240*s-2508*a+2100*l-165)/368640,ze[4]=0,ze[5]=0,ze[6]=0,$h[3]=pg(ze,n),o=pg($h,1/e),i=o*o,u=-hWt(-i/2),i===0?.5:(1+o*rD((1+u)/i))/2}var pWt=dWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nD=Se,vWt=Df,vg=vWt/4;function gWt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-vg,-vg]:n===0?[-vg,-vg]:(o=nD(n)+t*nD(a)+e,i=1/n-t/a,[o,i])}}var zU=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mWt=Zt;function yWt(e){return e===0||mWt(e)?e:e<0?-1:1}var _Wt=yWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bWt=_Wt,VU=bWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iD=VU,gg=he,wWt=Of,Aw=Df;function SWt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=wWt(1,1-i),h=Aw,s=Aw,l=Aw,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),iD(a)*iD(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,gg(h*2)>gg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&gg(c*u)<gg(h));return c}var UU=SWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TWt(e){return e===0?-1:-1+e*(-5+e*5)}var PWt=TWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EWt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var AWt=EWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CWt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var MWt=CWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kWt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var xWt=kWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LWt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var IWt=LWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OWt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var RWt=OWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DWt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var NWt=DWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FWt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var BWt=FWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Wt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var zWt=$Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VWt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var UWt=VWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GWt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var jWt=GWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WWt(e){return e===0?1:1+e*(-13+e*13)}var HWt=WWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XWt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var YWt=XWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rc=Ns,qWt=rp,ZWt=he,KWt=Ve,oD=Se,JWt=tr,QWt=tp,tHt=JA,eHt=zU,rHt=UU,nHt=PWt,iHt=AWt,oHt=MWt,aHt=xWt,sHt=IWt,lHt=RWt,uHt=NWt,cHt=BWt,fHt=zWt,hHt=UWt,dHt=jWt,pHt=HWt,vHt=YWt,ee=[0,0,0,0,0,0],zh=[0,0,0,0];function gHt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S;return s=qWt(2*e)/-JWt(t/2),w=QWt(r),_=tHt(r),zh[0]=s,m=w*w,y=_*_,v=w*_,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ee[0]=(2*m-1)/(3*v),ee[1]=-nHt(m)/(36*p),ee[2]=iHt(m)/(1620*d),ee[3]=oHt(m)/(6480*h),ee[4]=aHt(m)/(90720*f),ee[5]=0,zh[1]=rc(ee,s),ee[0]=-sHt(m)/(405*d),ee[1]=lHt(m)/(2592*h),ee[2]=-uHt(m)/(204120*f),ee[3]=-cHt(m)/(2099520*c),ee[4]=0,ee[5]=0,zh[2]=rc(ee,s),ee[0]=fHt(m)/(102060*f),ee[1]=-hHt(m)/(20995200*c),ee[2]=dHt(m)/(36741600*u),ee[3]=0,ee[4]=0,ee[5]=0,zh[3]=rc(ee,s),l=rc(zh,1/t),o=_/w,o*=o,g=-(l*l)/(2*m)+oD(m)+y*oD(y)/m,ZWt(l)<.7?(ee[0]=m,ee[1]=v,ee[2]=(1-2*m)/3,ee[3]=pHt(m)/(36*v),ee[4]=vHt(m)/(270*p),ee[5]=0,S=rc(ee,l)):(T=KWt(g),ee[0]=T,ee[1]=o,ee[2]=0,ee[3]=3*o*(3*o+1)/6,ee[4]=4*o*(4*o+1)*(4*o+2)/24,ee[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=rc(ee,T),(S-m)*l<0&&(S=1-S)),l<0?(i=0,n=m):(i=m,n=1),(S<i||S>n)&&(S=(i+n)/2),a=eHt(-g,o),S=rHt(a,S,i,n,32,100),S}var mHt=gHt,m1={exports:{}},OT={exports:{}},_0=1e3,b0=_0*60,w0=b0*60,S0=w0*24,yHt=S0*365.25,_Ht=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return bHt(e);if(r==="number"&&isNaN(e)===!1)return t.long?SHt(e):wHt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bHt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yHt;case"days":case"day":case"d":return r*S0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*w0;case"minutes":case"minute":case"mins":case"min":case"m":return r*b0;case"seconds":case"second":case"secs":case"sec":case"s":return r*_0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wHt(e){return e>=S0?Math.round(e/S0)+"d":e>=w0?Math.round(e/w0)+"h":e>=b0?Math.round(e/b0)+"m":e>=_0?Math.round(e/_0)+"s":e+"ms"}function SHt(e){return mg(e,S0,"day")||mg(e,w0,"hour")||mg(e,b0,"minute")||mg(e,_0,"second")||e+" ms"}function mg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=_Ht,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,_){if(y==="%%")return y;g++;var w=t.formatters[_];if(typeof w=="function"){var T=p[g];y=w.call(f,T),p.splice(g,1),g--}return y}),t.formatArgs.call(f,p);var m=c.log||t.log||console.log.bind(console);m.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(OT,OT.exports);(function(e,t){t=e.exports=OT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(m1,m1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var THt=34028234663852886e22,Gy=THt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PHt=m1.exports,aD=RU,EHt=he,AHt=Ve,sD=Se,CHt=Gy,lD=PHt("gammaincinv:higher_newton");function MHt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_,w,T;T=e,y=1,_=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*sD(T)+T+o,l>sD(CHt))return lD("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=AHt(l)}else w=-a*T;s?(v=aD(T,t,!0,!1),c=-w*(v-n)):(g=aD(T,t,!0,!0),c=w*(g-i)),w=c,n>1e-120||_>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,y=EHt(T/e-1),_+=1,T=e,T<0&&(T=u,_=100)}while(y>2e-14&&_<35);return(y>2e-14||_>99)&&lD("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),m=T||0,m}var kHt=MHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xHt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var LHt=xHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IHt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var OHt=IHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RHt=he,DHt=Ve,uD=Se,NHt=Ns,FHt=LHt,BHt=OHt,$Ht=1e-8,zHt=.08333333333333333,VHt=.008333333333333333,nc=[1,0,0,0,0,0];function UHt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=DHt(-1-u),o=FHt(l)):e<1?(l=e,o=BHt(l)):(l=11+u,a=uD(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,nc[1]=(2-a)*.5,nc[2]=(-9*a+6+2*t)/6,nc[3]=-(3*r+36*a-22*t-12)*zHt,nc[4]=(60+350*t-300*a-125*r+12*n)/60,nc[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*VHt,o+=a*l*NHt(nc,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+uD(s))/(s-1),l=RHt(s/o-1),s=o;while(l>$Ht)}return o}var GU=UHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GHt=.9189385332046728,jU=GHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jHt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function WHt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+jHt[a],a-=1;while(a>=0);return(n-o)/2}var HHt=WHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XHt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qHt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var ZHt=qHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cw=Nf,yg=Se,Mw=jU,KHt=Uy,JHt=Gy,QHt=HHt,tXt=YHt,eXt=ZHt,rXt=.30865217988013566;function nXt(e){var t;return e<KHt?JHt:e<1?Cw(e+1)-(e+.5)*yg(e)+e-Mw:e<2?Cw(e)-(e-.5)*yg(e)+e-Mw:e<3?Cw(e-1)-(e-.5)*yg(e)+e-Mw+yg(e-1):e<12?(t=18/(e*e)-1,QHt(17,t)/(12*e)):(t=1/(e*e),e<1e3?tXt(t)/(rXt+t)/e:eXt(t)/e)}var iXt=nXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cD=Ve,oXt=Oo,aXt=Se,sXt=Gy,lXt=zy,uXt=iXt;function cXt(e){return e>=3?cD(uXt(e)):e>0?oXt(e)/(cD(-e+(e-.5)*aXt(e))*lXt):sXt}var fXt=cXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hXt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var dXt=hXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pXt=he,vXt=Se,gXt=GU,mXt=dXt;function yXt(e){var t;return pXt(e)<1?mXt(e):(t=gXt(e),vXt(e/(t-1))/e)}var _Xt=yXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bXt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var wXt=bXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SXt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var TXt=SXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PXt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var EXt=PXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AXt=Se,CXt=wXt,MXt=TXt,kXt=EXt;function xXt(e){var t,r;return e<-5?(r=e*e,t=AXt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?CXt(e):e<2?MXt(e):e<1e3?(r=1/e,kXt(e)/(-12*e)):-1/(12*e)}var LXt=xXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IXt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var OXt=IXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RXt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var DXt=RXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NXt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var FXt=NXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BXt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var $Xt=BXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zXt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var VXt=zXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fD=Se,UXt=OXt,GXt=DXt,jXt=FXt,WXt=$Xt,HXt=VXt;function XXt(e){var t,r;return e<-8?(t=e*e,r=fD(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?UXt(e)/(e*e):e<-2?GXt(e):e<2?jXt(e):e<10?(t=1/e,WXt(t)/(e*e)):e<100?(t=1/e,HXt(t)/(e*e)):-fD(e)/(12*e*e*e)}var YXt=XXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qXt=m1.exports,hD=Ns,fi=Nf,ZXt=rp,dD=Oo,_g=tr,pD=he,ic=Ve,KXt=Fs,JXt=er,$n=Se,QXt=zy,tYt=Gy,eYt=kU,rYt=kHt,vD=GU,gD=fXt,nYt=_Xt,iYt=LXt,oYt=YXt,aYt=qXt("gammaincinv:compute"),rs=.5,kw=.3333333333333333,sYt=.25,mD=.2,yD=.16666666666666666,lYt=.08333333333333333,uYt=.041666666666666664,zn=[0,0,0,0,0];function cYt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,R,B,z,N,j,Z,q,tt,Pt,Ot,bt,wt,Ht,Y,nt,K,pt,St,At;if(t<rs?(a=!0,s=t,pt=-1):(a=!1,s=r,pt=1),Y=0,pD(e-1)<1e-4&&(nt=0,a?t<.001?(q=t*t,z=q*t,Z=z*t,S=Z*t,T=S*t,P=t+q*rs+z*kw+Z*sYt+S*mD+T*yD):P=-$n(1-t):P=-$n(r),e===1?(Y=2,Pt=P):(o=fi(e),Y=1)),r<1e-30&&e<rs&&(nt=0,P=-$n(r*dD(e))+(e-1)*$n(-$n(r*dD(e))),Y=1,o=fi(e)),e>1&&e<500&&t<1e-80){for(nt=0,l=1/e,n=1/(e+1),P=(fi(e+1)+$n(t))*l,P=ic(P),g=P,Ht=0;Ht<10;Ht++)P=g*ic(P*l)*JXt(1-P*n,l);Y=1,o=fi(e)}if(u=1/e*($n(t)+fi(e+1)),u<$n(mD*(1+e))&&Y===0&&(K=ic(u),nt=0,C=e*e,tt=C*e,N=tt*e,m=e+1,d=m*m,h=m*d,f=d*d,y=e+2,c=y*y,_=e+3,zn[0]=1,zn[1]=1/m,zn[2]=rs*(3*e+5)/(d*y),zn[3]=kw*(31+8*C+33*e)/(h*y*_),zn[4]=uYt*(2888+1179*tt+125*N+3971*C+5661*e)/(f*c*_*(e+4)),P=K*hD(zn,K),o=fi(e),Y=1),e<10&&Y===0&&(p=_g(e)/(gD(e)*QXt),v=KXt(.02,p),r<v&&(nt=0,bt=1-e,R=bt*bt,B=R*bt,w=_g(-2/e*$n(r/p)),P=e*vD(w),wt=$n(P),P>5?(A=wt*wt,M=A*wt,k=M*wt,K=1/P,zn[0]=wt-1,zn[1]=(3*bt-2*bt*wt+A-2*wt+2)*rs,zn[2]=(24*bt*wt-11*R-24*bt-6*A+12*wt-12-9*bt*A+6*R*wt+2*M)*yD,zn[3]=(-12*B*wt+8.04*bt*A-114*R*wt+(72+36*A)+(3*k-72*wt+162)*(bt-168*bt*wt)-(12*M+25*B)-(22*bt*M+36*R*A+120*R))*lYt,zn[4]=0,P=P-wt+bt*K*hD(zn,K)):(K=1/P,A=wt*wt,Ot=wt-1,St=wt-bt*K*Ot,St<P&&(P-=St)),o=fi(e),Y=1)),pD(s-rs)<1e-5&&Y===0&&(nt=0,l=1/e,P=e-kw+(.019753086419753086+.007211444248481286*l)*l,o=fi(e),Y=1),e<1&&Y===0&&(nt=0,a?P=ic(1/e*($n(s)+fi(e+1))):P=ic(1/e*($n(1-s)+fi(e+1))),o=fi(e),Y=1),Y===0)if(nt=1,l=1/e,K=ZXt(2*s),w=pt*K/_g(e*rs),K<tYt)w+=(nYt(w)+(iYt(w)+oYt(w)*l)*l)*l,P=e*vD(w),At=w,j=-_g(e/eYt)*ic(-rs*e*At*At)/gD(e),i=1/j;else return aYt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(Pt=rYt(P,e,nt,t,r,o,i,a)),Pt}var fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _D=Zt,hYt=Uy,bD=Ne,wD=fYt;function dYt(e,t,r){return _D(e)||_D(t)?NaN:t<hYt?NaN:e>1||e<0?NaN:r===!0?e===0?bD:e===1?0:wD(t,1-e,e):e===0?0:e===1?bD:wD(t,e,1-e)}var pYt=dYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vYt=pYt,gYt=vYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mYt=5e-324,yYt=mYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var SD=gYt,TD=Se,_Yt=tr,bYt=yYt,wYt=zU,SYt=UU;function TYt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,R,B,z,N,j,Z;return r<n?l=SD(r,t,!0):l=SD(n,t,!1),l/=e,m=t/e,N=_Yt(1+m),T=N*N,S=T*N,P=T*T,C=S*T,A=S*S,M=P*S,k=P*P,R=C*P,c=C*C,z=l-m,y=z*z,_=y*z,w=y*y,B=N+1,f=B*B,h=B*f,d=f*f,p=(N+2)*(N-1)/(3*N),p+=(S+9*T+21*N+5)*z/(36*T*B),p-=(P-13*S+69*T+167*N+46)*y/(1620*f*S),p-=(7*C+21*P+70*S+26*T-93*N-31)*_/(6480*h*P),p-=(75*A+202*C+188*P-888*S-1345*T+118*N+138)*w/(272160*d*C),v=(28*P+131*S+402*T+581*N+208)*(N-1)/(1620*B*S),v-=(35*A-154*C-623*P-1636*S-3983*T-3514*N-925)*z/(12960*f*P),v-=(2132*M+7915*A+16821*C+35066*P+87490*S+141183*T+95993*N+21640)*y/(816480*C*h),v-=(11053*k+53308*M+117010*A+163924*C+116188*P-258428*S-677042*T-481940*N-105497)*_/(14696640*d*A),g=-((3592*M+8375*A-1323*C-29198*P-89578*S-154413*T-116063*N-29632)*(N-1))/(816480*C*f),g-=(442043*R+2054169*k+3803094*M+3470754*A+2141568*C-2393568*P-19904934*S-34714674*T-23128299*N-5253353)*z/(146966400*A*h),g-=(116932*c+819281*R+2378172*k+4341330*M+6806004*A+10622748*C+18739500*P+30651894*S+30869976*T+15431867*N+2919016)*y/(146966400*d*M),u=l+p/e+v/(e*e)+g/(e*e*e),u<=0&&(u=bYt),j=u-m*TD(u)+(1+m)*TD(1+m)-m,i=1/(1+m),a=u<m?i:0,s=u<m?1:i,Z=(a+s)/2,o=wYt(j,m),SYt(o,Z,a,s,32,100)}var PYt=TYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rr=he,EYt=Of,xw=VU,AYt=Tu,Lw=Df;function CYt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T;_=0,s=!1,f=t,c=EYt(1,1-i),p=AYt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=_,u=l,l=p,y=e(f),_=y[0],w=y[1],T=y[2],d-=1,_===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),xw(h)*xw(_)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=_/w:(v=2*_,m=2*w-_*(T/w),rr(m)<1&&rr(v)>=rr(m)*Lw?p=_/w:p=v/m,p*w/_<0&&(p=_/w,rr(p)>2*rr(t)&&(p=(p<0?-1:1)*2*rr(t)))),a=rr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,rr(p)>f&&(p=xw(p)*f),u=p*3),t=f,f-=p,f<r){if(rr(r)<1&&rr(f)>1&&Lw/rr(f)<rr(r)?g=1e3:g=f/r,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(rr(n)<1&&rr(f)>1&&Lw/rr(f)<rr(n)?g=1e3:g=f/n,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&rr(f*c)<rr(p));return f}var MYt=CYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kYt=$U.assign,xYt=he,LYt=Df,Iw=Su;function IYt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],kYt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=Iw*64),o===0&&(o=Iw*64),l=s*(-(c*e)+(t-2)*o+1),xYt(l)<c*o*LYt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*Iw*64),[u,s,l]}}var OYt=IYt,RYt=Ns,PD=eC,Ow=Lf,ED=Ln,DYt=jA,oc=yU,AD=tr,NYt=he,CD=Ve,oo=er,MD=tp,FYt=Tu,BYt=Fs,kD=Se,Rw=Su,xD=ZA,LD=Ma,$Yt=cWt,zYt=pWt,VYt=mHt,UYt=PYt,GYt=MYt,jYt=OYt,WYt=32,HYt=1e3,yl=[0,0,0,0,0];function XYt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,R,B,z,N,j;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(N=0,s=0,u=1,e===.5){if(t===.5)return N=MD(r*xD),N*=N,j=MD(n*xD),j*=j,[N,j];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)C={},N=$Yt(e,r,C),j=C.value;else{if(t===1)return r<n?e>1?(N=oo(r,1/e),j=-Ow(kD(r)/e)):(N=oo(r,1/e),j=1-N):(N=CD(ED(-n)/e),j=-Ow(ED(-n)/e)),o&&(v=j,j=N,N=v),[N,j];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=BYt(e,t),f=FYt(e,t),AD(h)>f-h&&h>5?(N=zYt(e,t,r),j=1-N):(R=e+t,l=DYt(AD(e/R)),a=h/R,a>=.2&&a<=.8&&R>=10?(p=oo(r,1/e),p<.0025&&e+t<200?N=p*oo(e*oc(e,t),1/e):N=VYt(r,R,l),j=1-N):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=oc(e,t)),d===0?j=1:(j=oo(t*n*d,1/t),N=1-j)),j>1e-5&&(N=UYt(e,t,r,n),j=1-N));else if(e<1&&t<1){if(P=(1-e)/(2-e-t),_=PD(P,e,t)-r,NYt(_)/r<LD*3)return o?[1-P,P]:[P,1-P];_<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,P=1-P),S=oo(e*r*oc(e,t),1/e),N=S/(1+S),j=1/(1+S),N>P&&(N=P),u=P}else e>1&&t>1?(P=(e-1)/(e+t-2),g=(t-1)/(e+t-2),T=PD(P,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=g,g=P,P=v,o=!o),w=kD(r*e*oc(e,t))/e,N=CD(w),j=N<.9?1-N:-Ow(w),t<e&&N<.2&&(m=e-1,y=t-1,A=e*e,M=e*A,k=t*t,yl[0]=0,yl[1]=1,yl[2]=y/m,m*=m,yl[3]=y*(3*e*t+5*t+A-e-4)/(2*(e+2)*m),m*=e+1,yl[4]=y*(33*e*k+31*k+8*A*k-30*e*t-47*t+11*A*t+6*M*t+18+4*e-M+A*A-10*A),yl[4]/=3*(e+3)*(e+2)*m,N=RYt(yl,N)),N>P&&(N=P),u=P):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),oo(r,1/e)<.5?(N=oo(r*e*oc(e,t),1/e),N===0&&(N=Rw),j=1-N):(j=oo(1-oo(r,t*oc(e,t)),1/t),j===0&&(j=Rw),N=1-j))}return N>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=j,j=N,N=v,o=!o,B=1-u,z=1-s,s=B,u=z),s===0&&(o?(s=LD,N<s&&(N=s)):s=Rw,N<s&&(N=s)),i=WYt,N<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=jYt(e,t,r<n?r:n,r>=n),N=GYt(c,N,s,u,i,HYt),N===s&&(N=0),o?[1-N,N]:[N,1-N]}var YYt=XYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qYt=YYt,ZYt=qYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dw=Zt,ID=ZYt;function KYt(e,t,r,n){return Dw(e)||Dw(t)||Dw(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?ID(t,r,1-e,e)[0]:ID(t,r,e,1-e)[0]}var JYt=KYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QYt=JYt,WU=QYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tqt=WU,Nw=Zt;function eqt(e,t,r){return Nw(e)||Nw(t)||Nw(r)||t<=0||r<=0||e<0||e>1?NaN:tqt(e,t,r)}var rqt=eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nqt(e){return t;function t(){return e}}var iqt=nqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oqt=iqt,jy=oqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aqt=jy,sqt=WU,Fw=Zt;function lqt(e,t){if(Fw(e)||Fw(t)||e<=0||t<=0)return aqt(NaN);return r;function r(n){return Fw(n)||n<0||n>1?NaN:sqt(n,e,t)}}var uqt=lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cqt=dr,HU=rqt,fqt=uqt;cqt(HU,"factory",fqt);var hqt=HU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dqt=xn;function pqt(e){return dqt(e)===e&&e>=0}var vqt=pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gqt=vqt,Wy=gqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mqt=Wy,yqt=eC,Bw=Zt,_qt=xn,bqt=Ne;function wqt(e,t,r){return Bw(e)||Bw(t)||Bw(r)||r<0||r>1||!mqt(t)||t===bqt?NaN:e<0?0:e>=t?1:(e=_qt(e+1e-7),yqt(r,e+1,t-e,!0,!0))}var Sqt=wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tqt=Wy,Pqt=jy,Eqt=eC,$w=Zt,Aqt=xn,Cqt=Ne;function Mqt(e,t){if($w(e)||$w(t)||t<0||t>1||!Tqt(e)||e===Cqt)return Pqt(NaN);return r;function r(n){return $w(n)?NaN:n<0?0:n>=e?1:(n=Aqt(n+1e-7),Eqt(t,n+1,e-n,!0,!0))}}var kqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xqt=dr,XU=Sqt,Lqt=kqt;xqt(XU,"factory",Lqt);var Iqt=XU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var YU=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],Oqt=YU.length;function Rqt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<Oqt;o++)r=n,n=i,i=t*n-r+YU[o];return(i-r)*.5}var Dqt=Rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Nqt=er,Fqt=Dqt,Bqt=9490626562425156e-8,$qt=3745194030963158e291;function zqt(e){return e<10?NaN:e>=$qt?0:e<Bqt?Fqt(2*Nqt(10/e,2)-1)/e:1/(e*12)}var Vqt=zqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Uqt=Nf,OD=Ln,zw=Oo,Gqt=Tu,jqt=Fs,bg=Se,Wqt=jU,Hqt=Tr,RD=Ne,Vh=Vqt;function Xqt(e,t){var r,n,i;return n=jqt(e,t),i=Gqt(e,t),n<0?NaN:n===0?RD:i===RD?Hqt:n>=10?(r=Vh(n)+Vh(i)-Vh(n+i),-.5*bg(i)+Wqt+r+(n-.5)*bg(n/(n+i))+i*OD(-n/(n+i))):i>=10?(r=Vh(i)-Vh(n+i),Uqt(n)+r+n-n*bg(n+i)+(i-.5)*OD(-n/(n+i))):bg(zw(n)*(zw(i)/zw(n+i)))}var Yqt=Xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qqt=Yqt,Zqt=qqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DD=Ds,ND=Zt,Kqt=Zqt,Jqt=he,FD=Se,BD=Tr;function RT(e,t){return ND(e)||ND(t)?NaN:!DD(e)||!DD(t)?NaN:e<0?RT(-e+t-1,t):t<0?BD:t===0?0:t===1?FD(Jqt(e)):e<t?BD:e-t<2?RT(e,e-t):-FD(e+1)-Kqt(e-t+1,t+1)}var Qqt=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tZt=Qqt,qU=tZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $D=Wy,eZt=qU,Vw=Zt,rZt=Ln,nZt=Ve,iZt=Se,oZt=Ne;function aZt(e,t,r){var n;return Vw(e)||Vw(t)||Vw(r)||r<0||r>1||!$D(t)||t===oZt?NaN:$D(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=eZt(t,e),n+=e*iZt(r)+(t-e)*rZt(-r),nZt(n)):0}var sZt=aZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zD=Zt;function lZt(e,t){return zD(e)||zD(t)?NaN:e===t?1:0}var uZt=lZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cZt=jy,VD=Zt;function fZt(e){if(VD(e))return cZt(NaN);return t;function t(r){return VD(r)?NaN:r===e?1:0}}var hZt=fZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dZt=dr,ZU=uZt,pZt=hZt;dZt(ZU,"factory",pZt);var vZt=ZU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UD=Wy,gZt=jy,mZt=qU,GD=vZt.factory,Uw=Zt,yZt=Ln,_Zt=Ve,bZt=Se,wZt=Ne;function SZt(e,t){if(Uw(e)||Uw(t)||!UD(e)||e===wZt||t<0||t>1)return gZt(NaN);if(t===0||e===0)return GD(0);if(t===1)return GD(e);return r;function r(n){var i;return Uw(n)?NaN:UD(n)?n>e?0:(i=mZt(e,n),i+=n*bZt(t)+(e-n)*yZt(-t),_Zt(i)):0}}var TZt=SZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PZt=dr,KU=sZt,EZt=TZt;PZt(KU,"factory",EZt);var AZt=KU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CZt=Ui,DT;function MZt(e){return CZt(e)==="[object Array]"}Array.isArray?DT=Array.isArray:DT=MZt;var kZt=DT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xZt=kZt,JU=xZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LZt=JU;function IZt(e){return typeof e=="object"&&e!==null&&!LZt(e)}var OZt=IZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RZt=OZt,DZt=RZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NZt=/./,FZt=NZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){return typeof e=="boolean"}var QU=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Zt=Boolean.prototype.toString,zZt=$Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VZt=zZt;function UZt(e){try{return VZt.call(e),!0}catch{return!1}}var GZt=UZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jZt=Ry,WZt=Ui,HZt=GZt,XZt=jZt();function YZt(e){return typeof e=="object"?e instanceof Boolean?!0:XZt?HZt(e):WZt(e)==="[object Boolean]":!1}var tG=YZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qZt=QU,ZZt=tG;function KZt(e){return qZt(e)||ZZt(e)}var JZt=KZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eG=dr,nC=JZt,QZt=QU,tKt=tG;eG(nC,"isPrimitive",QZt);eG(nC,"isObject",tKt);var rG=nC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eKt(){return new Function("return this;")()}var rKt=eKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nKt=typeof self=="object"?self:null,iKt=nKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oKt=typeof window=="object"?window:null,aKt=oKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sKt=typeof pS=="object"?pS:null,lKt=sKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uKt=rG.isPrimitive,cKt=rKt,jD=iKt,WD=aKt,HD=lKt;function fKt(e){if(arguments.length){if(!uKt(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return cKt()}if(jD)return jD;if(WD)return WD;if(HD)return HD;throw new Error("unexpected error. Unable to resolve global object.")}var hKt=fKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dKt=hKt,pKt=dKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vKt=pKt,XD=vKt(),gKt=XD.document&&XD.document.childNodes,mKt=gKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yKt=Int8Array,_Kt=yKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bKt=FZt,wKt=mKt,SKt=_Kt;function TKt(){return typeof bKt=="function"||typeof SKt=="object"||typeof wKt=="function"}var PKt=TKt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EKt(){return/^\s*function\s*([^(]*)/i}var nG=EKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AKt=nG,CKt=AKt(),MKt=CKt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kKt=dr,iG=nG,xKt=MKt;kKt(iG,"REGEXP",xKt);var LKt=iG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IKt=JU;function OKt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!IKt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var RKt=OKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DKt=RKt,NKt=DKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FKt(e){return e!==null&&typeof e=="object"}var BKt=FKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Kt=dr,zKt=NKt,iC=BKt,VKt=zKt(iC);$Kt(iC,"isObjectLikeArray",VKt);var UKt=iC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GKt=UKt;function jKt(e){return GKt(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var WKt=jKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HKt=WKt,XKt=HKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YKt=Ui,qKt=LKt.REGEXP,ZKt=XKt;function KKt(e){var t,r,n;if(r=YKt(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=qKt.exec(n.toString()),t)return t[1]}return ZKt(e)?"Buffer":r}var JKt=KKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QKt=JKt,oG=QKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tJt=oG;function eJt(e){var t;return e===null?"null":(t=typeof e,t==="object"?tJt(e).toLowerCase():t)}var rJt=eJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nJt=oG;function iJt(e){return nJt(e).toLowerCase()}var oJt=iJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aJt=PKt,sJt=rJt,lJt=oJt,uJt=aJt()?lJt:sJt,cJt=uJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fJt=cJt;function hJt(e){return fJt(e)==="function"}var dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=dJt,aG=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vJt=Object.getPrototypeOf,gJt=vJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mJt(e){return e.__proto__}var yJt=mJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Jt=Ui,bJt=yJt;function wJt(e){var t=bJt(e);return t||t===null?t:_Jt(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var SJt=wJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TJt=aG,PJt=gJt,EJt=SJt,NT;TJt(Object.getPrototypeOf)?NT=PJt:NT=EJt;var AJt=NT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CJt=AJt;function MJt(e){return e==null?null:(e=Object(e),CJt(e))}var kJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xJt=kJt,LJt=xJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IJt=DZt,YD=aG,OJt=LJt,lm=Dy,RJt=Ui,DJt=Object.prototype;function NJt(e){var t;for(t in e)if(!lm(e,t))return!1;return!0}function FJt(e){var t;return IJt(e)?(t=OJt(e),t?!lm(e,"constructor")&&lm(t,"constructor")&&YD(t.constructor)&&RJt(t.constructor)==="[object Function]"&&lm(t,"isPrototypeOf")&&YD(t.isPrototypeOf)&&(t===DJt||NJt(e)):!0):!1}var BJt=FJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Jt=BJt,sG=$Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zJt(e){return typeof e=="string"}var lG=zJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VJt=String.prototype.valueOf,UJt=VJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GJt=UJt;function jJt(e){try{return GJt.call(e),!0}catch{return!1}}var WJt=jJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HJt=Ry,XJt=Ui,YJt=WJt,qJt=HJt();function ZJt(e){return typeof e=="object"?e instanceof String?!0:qJt?YJt(e):XJt(e)==="[object String]":!1}var uG=ZJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KJt=lG,JJt=uG;function QJt(e){return KJt(e)||JJt(e)}var tQt=QJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cG=dr,oC=tQt,eQt=lG,rQt=uG;cG(oC,"isPrimitive",eQt);cG(oC,"isObject",rQt);var nQt=oC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iQt=Cf.isPrimitive,oQt=Zt;function aQt(e){return iQt(e)&&oQt(e)}var fG=aQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sQt=Cf.isObject,lQt=Zt;function uQt(e){return sQt(e)&&lQt(e.valueOf())}var hG=uQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cQt=fG,fQt=hG;function hQt(e){return cQt(e)||fQt(e)}var dQt=hQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dG=dr,aC=dQt,pQt=fG,vQt=hG;dG(aC,"isPrimitive",pQt);dG(aC,"isObject",vQt);var gQt=aC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qD=Cf.isPrimitive,mQt=sG,yQt=nQt.isPrimitive,ZD=gQt,Gw=Dy;function _Qt(e,t){return mQt(t)?Gw(t,"alpha")&&(e.alpha=t.alpha,!qD(e.alpha)||ZD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Gw(t,"alternative")&&(e.alternative=t.alternative,!yQt(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Gw(t,"p")&&(e.p=t.p,!qD(e.p)||ZD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var bQt=_Qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wQt=Ny.isPrimitive;function SQt(e){return wQt(e)&&e>0}var pG=SQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TQt=Ny.isObject;function PQt(e){return TQt(e)&&e.valueOf()>0}var vG=PQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EQt=pG,AQt=vG;function CQt(e){return EQt(e)||AQt(e)}var MQt=CQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gG=dr,sC=MQt,kQt=pG,xQt=vG;gG(sC,"isPrimitive",kQt);gG(sC,"isObject",xQt);var LQt=sC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IQt=9007199254740991,OQt=IQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RQt=308,DQt=RQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NQt=-308,FQt=NQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BQt=-324,$Qt=BQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KD=Zt,wg=If,JD=er,zQt=he,QD=$y,VQt=OQt,t8=DQt,UQt=FQt,GQt=$Qt,jQt=VQt+1,e8=1e308;function WQt(e,t){var r,n;return KD(e)||KD(t)||wg(t)?NaN:wg(e)||e===0||t<GQt||zQt(e)>jQt&&t<=0?e:t>t8?0*e:t<UQt?(r=JD(10,-(t+t8)),n=e*e8*r,wg(n)?e:QD(n)/e8/r):(r=JD(10,-t),n=e*r,wg(n)?e:QD(n)/r)}var HQt=WQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XQt=HQt,YQt=XQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qQt=LQt,ZQt=sG,KQt=rG.isPrimitive,r8=Dy,Sg=YQt;function JQt(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!ZQt(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(r8(e,"digits")){if(!qQt(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(r8(e,"decision")){if(!KQt(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+Sg(this.pValue,-r)+`
`,n+="    statistic: "+Sg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+Sg(this.ci[0],-r)+","+Sg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var QQt=JQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qo=R4t,tte=Q6t,n8=k5t,mG=hqt,ete=xn,rte=iU,ac=Iqt,jw=AZt,i8=bQt,nte=QQt,o8=1+1e-7;function a8(e,t,r){return e===0?0:mG(r,e,t-e+1)}function s8(e,t,r){return e===t?1:mG(1-r,e+1,t-e)}function ite(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},tte(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=i8(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!n8(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!n8(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=i8(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=ac(h,c,f),r=[0,s8(h,c,e)];break;case"greater":n=1-ac(h-1,c,f),r=[a8(h,c,e),1];break;case"two-sided":if(l=jw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=rte(u);p<=c;p++)jw(p,c,f)<=l*o8&&(d+=1);n=ac(h,c,f)+(1-ac(c-d,c,f))}else{for(d=0,p=0;p<=ete(u);p++)jw(p,c,f)<=l*o8&&(d+=1);n=ac(d-1,c,f)+(1-ac(h-1,c,f))}r=[a8(h,c,e/2),s8(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},qo(s,"rejected",n<=e),qo(s,"alpha",e),qo(s,"pValue",n),qo(s,"statistic",i),qo(s,"ci",r),qo(s,"nullValue",f),qo(s,"alternative",o),qo(s,"method","Exact binomial test"),qo(s,"print",nte),s}var ote=ite;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ate=ote,yG=ate;const ste=Array.prototype.concat,_G=Object.prototype.toString;function bG(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const ko=Array.isArray||function(t){return _G.call(t)==="[object Array]"};function T0(e){return _G.call(e)==="[object Function]"}function Sr(e){return typeof e=="number"?e-e===0:!1}function lte(e){return ste.apply([],e)}const wG={calcRdx:bG,isArray:ko,isFunction:T0,isNumber:Sr,toVector:lte};let ri=Math.random;function SG(e){if(typeof e!="function")throw new TypeError("fn is not a function");ri=e}function Hy(e){return e.length||1}function TG(e){return e[0].length||1}function ute(e){return{rows:Hy(e),cols:TG(e)}}function lC(e,t){return ko(t)?t.map(r=>lC(e,r)):e[t]}function PG(e,t){return lC(e,t)}function y1(e,t){if(ko(t)){const n=Ie(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Ie(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function EG(e,t){return y1(e,t).map(r=>r[0])}function cte(e){const t=Hy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function fte(e){for(var t=Hy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Ss(e){var t=[],r,n,i,o,a;for(ko(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function Qr(e,t,r){var n,i,o,a,s;for(ko(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function Xy(e,t,r){var n,i,o,a,s;for(ko(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function uC(e,t){return Qr(e,t,!0)}function Bf(e,t,r){var n=new Array(e),i,o;for(T0(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function AG(){return 0}function hte(){return 1}function dte(e,t){return e===t?1:0}function Ro(e,t){return Sr(t)||(t=e),Bf(e,t,AG)}function pte(e,t){return Sr(t)||(t=e),Bf(e,t,hte)}function vte(e,t){return Sr(t)||(t=e),Bf(e,t,ri)}function au(e,t){return Sr(t)||(t=e),Bf(e,t,dte)}function gte(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function mte(e){return uC(e,AG)}function CG(e,t,r,n){T0(n)||(n=!1);var i=[],o=bG(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Ie(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function Jo(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return Yy(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Sr(t.row)){if(Sr(t.col))return e[t.row][t.col];var o=PG(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Sr(t.col)){var a=EG(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function rd(e,t,r){var n,i;if(Sr(t.row)){if(Sr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Ie(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(Sr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Ie(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Ie(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Ie(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function yte(e){var t=Ro(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function Yy(e){return e.map(function(t){return Sr(t)?t:t.map(function(r){return r})})}const _te=Object.freeze(Object.defineProperty({__proto__:null,utils:wG,get random_fn(){return ri},setRandom:SG,rows:Hy,cols:TG,dimensions:ute,row:lC,rowa:PG,col:y1,cola:EG,diag:cte,antidiag:fte,transpose:Ss,map:Qr,cumreduce:Xy,alter:uC,create:Bf,zeros:Ro,ones:pte,rand:vte,identity:au,symmetric:gte,clear:mte,seq:CG,arange:Ie,slice:Jo,sliceAssign:rd,diagonal:yte,copy:Yy},Symbol.toStringTag,{value:"Module"}));function $f(e,t){return e-t}function l8(e,t,r){return Math.max(t,Math.min(e,r))}function tn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function bte(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function qy(e){for(var t=ar(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function wte(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function MG(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function cC(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function fC(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Ste(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function ar(e){return tn(e)/e.length}function Tte(e){return qy(e)/e.length}function Pte(e){return Math.pow(MG(e),1/e.length)}function FT(e){var t=e.length,r=e.slice().sort($f);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function Ete(e){return Xy(e,function(t,r){return t+r})}function Ate(e){return Xy(e,function(t,r){return t*r})}function Cte(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function BT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort($f),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function Mte(e){var t=e.length,r=e.slice().sort($f),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function kte(e){return fC(e)-cC(e)}function kG(e,t){return qy(e)/(e.length-(t?1:0))}function xG(e){var t=e.reduce(function(n,i){return n+qy(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function xte(e){for(var t=ar(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function ba(e,t){return Math.sqrt(kG(e,t))}function LG(e){return Math.sqrt(xG(e))}function Lte(e){for(var t=ar(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return ar(r)}function Ite(e){for(var t=FT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return FT(r)}function Ote(e){return ba(e)/ar(e)}function Rte(e){var t=e.length,r=e.slice().sort($f);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Dte(e,t,r,n){var i=e.slice().sort($f),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(l8(c,1,a-1)),h=l8(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function Nte(e,t,r){var n=e.slice().sort($f),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function Fte(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function Bte(e,t){t=t||4;var r=cC(e),n=(fC(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function IG(e,t){var r=ar(e),n=ar(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return tn(o)/(i-1)}function OG(e,t){return IG(e,t)/ba(e,1)/ba(t,1)}function $te(e,t){return e=BT(e),t=BT(t),OG(e,t)}function hC(e,t){for(var r=ar(e),n=ba(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function zte(e){return hC(e,3)}function Vte(e){return hC(e,4)-3}const Ute=Object.freeze(Object.defineProperty({__proto__:null,sum:tn,sumsqrd:bte,sumsqerr:qy,sumrow:wte,product:MG,min:cC,max:fC,unique:Ste,mean:ar,meansqerr:Tte,geomean:Pte,median:FT,cumsum:Ete,cumprod:Ate,diff:Cte,rank:BT,mode:Mte,range:kte,variance:kG,pooledvariance:xG,deviation:xte,stdev:ba,pooledstdev:LG,meandev:Lte,meddev:Ite,coeffvar:Ote,quartiles:Rte,quantiles:Dte,percentile:Nte,percentileOfScore:Fte,histogram:Bte,covariance:IG,corrcoeff:OG,spearmancoeff:$te,stanMoment:hC,skewness:zte,kurtosis:Vte},Symbol.toStringTag,{value:"Module"}));function Gte(e,t,r){return e<t||e>r?0:1/(r-t)}function jte(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function Wte(e,t,r){return t+e*(r-t)}function Hte(e,t){return .5*(e+t)}function Xte(e,t){return ar(e)}function Yte(){throw new Error("mode is not yet implemented")}function RG(e,t){return e/2+t/2+(t/2-e/2)*(2*ri()-1)}function qte(e,t){return Math.pow(t-e,2)/12}const Zte=Object.freeze(Object.defineProperty({__proto__:null,pdf:Gte,cdf:jte,inv:Wte,mean:Hte,median:Xte,mode:Yte,sample:RG,variance:qte},Symbol.toStringTag,{value:"Module"}));function Kte(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function Jte(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function Qte(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function tee(e,t){return t<=e?NaN:(e+t)/2}function eee(e,t){return t<=e?NaN:(e+t)/2}function ree(){throw new Error("mode is not yet implemented")}function nee(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*RG(0,1))}function iee(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const oee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kte,cdf:Jte,inv:Qte,mean:tee,median:eee,mode:ree,sample:nee,variance:iee},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function DG(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function xi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function aee(e,t){return zf(e,t)*xi(e)}function zf(e,t){var r=Ge(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function um(e){return e<0?NaN:Ge(e+1)}function Wl(e){return e<0?NaN:xi(e+1)}function dC(e,t){return e>170||t>170?Math.exp(NG(e,t)):Wl(e)/Wl(t)/Wl(e-t)}function NG(e,t){return um(e)-um(t)-um(e-t)}function see(e,t){return Wl(e)/Wl(e-t)}function Zy(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(pC(e,t)):xi(e)*xi(t)/xi(e+t)}function pC(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function $T(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Ky(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=zf(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function Jy(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function FG(e){return 1-Jy(e)}function vC(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=FG(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function np(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,g,m;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),g=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*g))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,g=c+f,e<c/g?d=Math.pow(t*g*e,1/t):d=1-Math.pow(r*g*(1-e),1/r)),m=-Ge(t)-Ge(r)+Ge(t+r);a<10;a++){if(d===0||d===1)return d;if(h=ip(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+m),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function ip(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*$T(e,t,r)/t:1-n*$T(1-e,r,t)/r}function Eu(e,t){var r,n,i,o,a;if(t||(t=e),e)return Bf(e,t,function(){return Eu()});do r=ri(),n=1.7156*(ri()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function xo(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=Ro(t,r),u.alter(function(){return xo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Eu(),s=1+o*l;while(s<=0);s=s*s*s,a=ri()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ri();while(a===0);return Math.pow(a,1/n)*i*s}const lee=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:DG,gammafn:xi,gammap:aee,lowRegGamma:zf,factorialln:um,factorial:Wl,combination:dC,combinationln:NG,permutation:see,betafn:Zy,betaln:pC,betacf:$T,gammapinv:Ky,erf:Jy,erfc:FG,erfcinv:vC,ibetainv:np,ibeta:ip,randn:Eu,randg:xo},Symbol.toStringTag,{value:"Module"}));function uee(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/Zy(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-pC(t,r))}function _1(e,t,r){return e>1||e<0?(e>1)*1:ip(e,t,r)}function cee(e,t,r){return np(e,t,r)}function fee(e,t){return e/(e+t)}function hee(e,t){return np(.5,e,t)}function dee(e,t){return(e-1)/(e+t-2)}function pee(e,t){var r=xo(e);return r/(r+xo(t))}function vee(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const gee=Object.freeze(Object.defineProperty({__proto__:null,pdf:uee,cdf:_1,inv:cee,mean:fee,median:hee,mode:dee,sample:pee,variance:vee},Symbol.toStringTag,{value:"Module"}));function u8(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function BG(e,t,r){return r===0||r===1?t*r===e?1:0:dC(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function mee(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(Ge(l)-Ge(s)-Ge(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*u8(o,a,s,i):n=1-u*u8(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const yee=Object.freeze(Object.defineProperty({__proto__:null,pdf:BG,cdf:mee},Symbol.toStringTag,{value:"Module"}));function _ee(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function bee(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function wee(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function See(e){return e}function Tee(e){return e}function Pee(e,t){return Eu()*Math.sqrt(1/(2*randg(.5)))*t+e}const Eee=Object.freeze(Object.defineProperty({__proto__:null,pdf:_ee,cdf:bee,inv:wee,median:See,mode:Tee,sample:Pee},Symbol.toStringTag,{value:"Module"}));function Aee(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/Zy(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*BG((t-2)/2,(t+r-2)/2,n))}function b1(e,t,r){return e<0?0:ip(t*e/(t*e+r),t/2,r/2)}function Cee(e,t,r){return r/(t*(1/np(e,t/2,r/2)-1))}function Mee(e,t){return t>2?t/(t-2):void 0}function kee(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function xee(e,t){var r=xo(e/2)*2,n=xo(t/2)*2;return r/e/(n/t)}function Lee(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const Iee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Aee,cdf:b1,inv:Cee,mean:Mee,mode:kee,sample:xee,variance:Lee},Symbol.toStringTag,{value:"Module"}));function Oee(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function Ree(e,t){return e<0?0:zf(t/2,e/2)}function Dee(e,t){return 2*Ky(e,.5*t)}function Nee(e){return e}function Fee(e){return e*Math.pow(1-2/(9*e),3)}function Bee(e){return e-2>0?e-2:0}function $ee(e){return xo(e/2)*2}function zee(e){return 2*e}const Vee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Oee,cdf:Ree,inv:Dee,mean:Nee,median:Fee,mode:Bee,sample:$ee,variance:zee},Symbol.toStringTag,{value:"Module"}));function Uee(e,t){return e<0?0:t*Math.exp(-t*e)}function Gee(e,t){return e<0?0:1-Math.exp(-t*e)}function jee(e,t){return-Math.log(1-e)/t}function Wee(e){return 1/e}function Hee(e){return 1/e*Math.log(2)}function Xee(){return 0}function Yee(e){return-1/e*Math.log(ri())}function qee(e){return Math.pow(e,-2)}const Zee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Uee,cdf:Gee,inv:jee,mean:Wee,median:Hee,mode:Xee,sample:Yee,variance:qee},Symbol.toStringTag,{value:"Module"}));function Kee(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function Jee(e,t,r){return e<0?0:zf(t,e/r)}function Qee(e,t,r){return Ky(e,t)*r}function tre(e,t){return e*t}function ere(e,t){if(e>1)return(e-1)*t}function rre(e,t){return xo(e)*t}function nre(e,t){return e*t*t}const ire=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kee,cdf:Jee,inv:Qee,mean:tre,mode:ere,sample:rre,variance:nre},Symbol.toStringTag,{value:"Module"}));function nd(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?nd(t-r-n+e,t,t-r,t-n):nd(n-e,t,t-r,n);if(n*2>t)return nd(r-e,t,r,t-n);if(r<n)return nd(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function id(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?id(t-r-n+e,t,t-r,t-n):1-id(n-e-1,t,t-r,n);if(n*2>t)return 1-id(r-e-1,t,r,t-n);if(r<n)return id(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const ore=Object.freeze(Object.defineProperty({__proto__:null,pdf:nd,cdf:id},Symbol.toStringTag,{value:"Module"}));function are(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function sre(e,t,r){return e<=0?0:1-zf(t,r/e)}function lre(e,t,r){return r/Ky(1-e,t)}function ure(e,t){return e>1?t/(e-1):void 0}function cre(e,t){return t/(e+1)}function fre(e,t){return t/xo(e)}function hre(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const dre=Object.freeze(Object.defineProperty({__proto__:null,pdf:are,cdf:sre,inv:lre,mean:ure,mode:cre,sample:fre,variance:hre},Symbol.toStringTag,{value:"Module"}));function pre(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function vre(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function gre(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function mre(e,t){return t*xi(1+1/e)*xi(t)/xi(1+1/e+t)}function yre(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function _re(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function bre(){throw new Error("variance not yet implemented")}const wre=Object.freeze(Object.defineProperty({__proto__:null,pdf:pre,cdf:vre,inv:gre,mean:mre,median:yre,mode:_re,variance:bre},Symbol.toStringTag,{value:"Module"}));function Sre(e){return e/Math.abs(e)}function Tre(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Pre(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function Ere(e){return e}function Are(e){return e}function Cre(e){return e}function Mre(e,t){return 2*t*t}function kre(e,t){var r=ri()-.5;return e-t*Sre(r)*Math.log(1-2*Math.abs(r))}const xre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Tre,cdf:Pre,mean:Ere,median:Are,mode:Cre,variance:Mre,sample:kre},Symbol.toStringTag,{value:"Module"}));function Lre(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function Ire(e,t,r){return e<0?0:.5+.5*Jy((Math.log(e)-t)/Math.sqrt(2*r*r))}function Ore(e,t,r){return Math.exp(-1.4142135623730951*r*vC(2*e)+t)}function Rre(e,t){return Math.exp(e+t*t/2)}function Dre(e){return Math.exp(e)}function Nre(e,t){return Math.exp(e-t*t)}function Fre(e,t){return Math.exp(Eu()*t+e)}function Bre(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const $re=Object.freeze(Object.defineProperty({__proto__:null,pdf:Lre,cdf:Ire,inv:Ore,mean:Rre,median:Dre,mode:Nre,sample:Fre,variance:Bre},Symbol.toStringTag,{value:"Module"}));function $G(e,t,r){return e!==e>>>0?!1:e<0?0:dC(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function zre(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=$G(i,t,r);return n}const Vre=Object.freeze(Object.defineProperty({__proto__:null,pdf:$G,cdf:zre},Symbol.toStringTag,{value:"Module"}));function zG(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*Zy(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function Qo(e,t){var r=t/2;return ip((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function w1(e,t){var r=np(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function Ure(e){return e>1?0:void 0}function Gre(){return 0}function jre(){return 0}function Wre(e){return Eu()*Math.sqrt(e/(2*xo(e/2)))}function Hre(e){return e>2?e/(e-2):e>1?1/0:void 0}const Xre=Object.freeze(Object.defineProperty({__proto__:null,pdf:zG,cdf:Qo,inv:w1,mean:Ure,median:Gre,mode:jre,sample:Wre,variance:Hre},Symbol.toStringTag,{value:"Module"}));function Yre(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function yi(e,t,r){return .5*(1+Jy((e-t)/Math.sqrt(2*r*r)))}function zT(e,t,r){return-1.4142135623730951*r*vC(2*e)+t}function qre(e){return e}function Zre(e){return e}function Kre(e){return e}function Jre(e,t){return Eu()*t+e}function Qre(e,t){return t*t}const tne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Yre,cdf:yi,inv:zT,mean:qre,median:Zre,mode:Kre,sample:Jre,variance:Qre},Symbol.toStringTag,{value:"Module"}));function ene(e,t,r){var n=1e-14;return Math.abs(r)<n?zG(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*(VT(e*Math.sqrt(1+2/t),t+2,r)-VT(e,t,r))}function VT(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return Qo(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=yi(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*_1(u,c+.5,t/2)+h*_1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const rne=Object.freeze(Object.defineProperty({__proto__:null,pdf:ene,cdf:VT},Symbol.toStringTag,{value:"Module"}));function nne(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function ine(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function one(e,t,r){return t/Math.pow(1-e,1/r)}function ane(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function sne(e,t){return e*(t*Math.SQRT2)}function lne(e){return e}function une(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const cne=Object.freeze(Object.defineProperty({__proto__:null,pdf:nne,cdf:ine,inv:one,mean:ane,median:sne,mode:lne,variance:une},Symbol.toStringTag,{value:"Module"}));function dt(...e){return new dt._init(...e)}dt._init=function(...e){if(ko(e[0]))if(ko(e[0][0])){T0(e[1])&&(e[0]=Qr(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=T0(e[1])?Qr(e[0],e[1]):e[0],this.length=1;else if(Sr(e[0]))this[0]=CG.apply(null,e),this.length=1;else{if(e[0]instanceof dt)return dt(e[0].toArray());this[0]=[],this.length=1}return this};dt._init.prototype=dt.prototype;dt._init.constructor=dt;dt.setRandom=SG;const gn=dt.prototype;gn.length=0;gn.push=Array.prototype.push;gn.sort=Array.prototype.sort;gn.splice=Array.prototype.splice;gn.slice=Array.prototype.slice;gn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};gn.map=function(e,t){return dt(Qr(this,e,t))};gn.cumreduce=function(e,t){return dt(Xy(this,e,t))};gn.alter=function(e){return uC(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{gn[e]=function(t){if(t)return t.call(this,gn[e].call(this)),this;const r=dt[e](this);return Array.isArray(r)?dt(r):r}});"row col".split(" ").forEach(e=>{gn[e]=function(t,r){return r?(r.call(this,gn[e].call(this,t)),this):dt(dt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{gn[e]=function(...t){return dt(dt[e](...t))}});function VG(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Wl(e)}function fne(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(VG(n,t));return tn(r)}function hne(e){return e}function dne(e){return e}function pne(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=dt._random_fn();while(t>n);return r-1}function vne(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-DG(r+1))return r}}function gne(e){return e<10?pne(e):vne(e)}const mne=Object.freeze(Object.defineProperty({__proto__:null,pdf:VG,cdf:fne,mean:hne,variance:dne,sample:gne},Symbol.toStringTag,{value:"Module"}));function yne(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function _ne(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function bne(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function wne(e,t,r){return(e+t+r)/3}function Sne(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Tne(e,t,r){return r}function Pne(e,t,r){var n=ri();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function Ene(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const Ane=Object.freeze(Object.defineProperty({__proto__:null,pdf:yne,cdf:_ne,inv:bne,mean:wne,median:Sne,mode:Tne,sample:Pne,variance:Ene},Symbol.toStringTag,{value:"Module"}));function c8(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*yi(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var g;e>u?g=c:g=f;for(var m=p,y=(l-p)/g,_=m+y,w=0,T=r-1,S=1;S<=g;S++){for(var P=0,C=.5*(_+m),A=.5*(_-m),M=1;M<=n;M++){var k,R;i<M?(k=n-M+1,R=h[k-1]):(k=M,R=-h[k-1]);var B=A*R,z=C+B,N=z*z;if(N>s)break;var j=2*yi(z,0,1),Z=2*yi(z,e,1),q=j*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[k-1]*Math.exp(-(.5*N))*Math.pow(q,T),P+=q)}P*=2*A*r/Math.sqrt(2*Math.PI),w+=P,m=_,_+=y}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function Cne(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,g=1.208,m=1.4142,y=120,_=.5-.5*e,w=Math.sqrt(Math.log(1/(_*_))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-v/r+g*T/r),T*(S*Math.log(t-1)+m)}function Od(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,g=.125,m=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return c8(e,n,i);var _=r*.5,w=_*Math.log(r)-r*Math.log(2)-Ge(_),T=_-1,S=r*.25,P;r<=u?P=d:r<=c?P=p:r<=f?P=v:P=g,w+=Math.log(P);for(var C=0,A=1;A<=50;A++){for(var M=0,k=(2*A-1)*P,R=1;R<=o;R++){var B,z;a<R?(B=R-a-1,z=w+T*Math.log(k+m[B]*P)-(m[B]*P+k)*S):(B=R-1,z=w+T*Math.log(k-m[B]*P)+(m[B]*P-k)*S);var N;if(z>=s){a<R?N=e*Math.sqrt((m[B]*P+k)*.5):N=e*Math.sqrt((-(m[B]*P)+k)*.5);var j=c8(N,n,i),Z=j*y[B]*Math.exp(z);M+=Z}}if(A*P>=1&&M<=l)break;C+=M}if(M>l)throw new Error("tukey.cdf failed to converge");return C>1&&(C=1),C}function Mne(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=Cne(e,i,r),l=Od(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Od(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Od(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const kne=Object.freeze(Object.defineProperty({__proto__:null,cdf:Od,inv:Mne},Symbol.toStringTag,{value:"Module"}));function xne(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function Lne(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function Ine(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function UG(e,t){return e*xi(1+1/t)}function One(e,t){return e*Math.pow(Math.log(2),1/t)}function Rne(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Dne(e,t){return e*Math.pow(-Math.log(ri()),1/t)}function Nne(e,t){return e*e*xi(1+2/t)-Math.pow(UG(e,t),2)}const Fne=Object.freeze(Object.defineProperty({__proto__:null,pdf:xne,cdf:Lne,inv:Ine,mean:UG,median:One,mode:Rne,sample:Dne,variance:Nne},Symbol.toStringTag,{value:"Module"})),Bne=Object.freeze(Object.defineProperty({__proto__:null,arcsine:oee,beta:gee,binomial:yee,cauchy:Eee,centralF:Iee,chisquare:Vee,exponential:Zee,gamma:ire,hypgeom:ore,invgamma:dre,kumaraswamy:wre,laplace:xre,lognormal:$re,negbin:Vre,noncentralt:rne,normal:tne,pareto:cne,poisson:mne,studentt:Xre,triangular:Ane,tukey:kne,uniform:Zte,weibull:Fne},Symbol.toStringTag,{value:"Module"}));function UT(){const e=[...arguments];return Sr(e[1])?(e[0]-e[1])/e[2]:(e[0]-ar(e[1]))/ba(e[1],e[2])}function gC(){const e=[...arguments];let t;return ko(e[1])?(t=UT(e[0],e[1],e[3]),e[2]===1?yi(-Math.abs(t),0,1):yi(-Math.abs(t),0,1)*2):e.length>2?(t=UT(e[0],e[1],e[2]),e[3]===1?yi(-Math.abs(t),0,1):yi(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?yi(-Math.abs(t),0,1):yi(-Math.abs(t),0,1)*2)}function GT(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-ar(e[1]))/(ba(e[1],!0)/Math.sqrt(e[1].length))}function $ne(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(GT(e[0],e[1],e[2],e[3])),e[4]===1?Qo(-t,e[3]-1):Qo(-t,e[3]-1)*2):Sr(e[1])?(t=Math.abs(e[0]),e[2]===1?Qo(-t,e[1]-1):Qo(-t,e[1]-1)*2):(t=Math.abs(GT(e[0],e[1])),e[2]===1?Qo(-t,e[1].length-1):Qo(-t,e[1].length-1)*2)}function zne(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=ar(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(ar(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=ar(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function Vne(){var e=[...arguments],t,r,n,i;if(Sr(e[0]))return 1-b1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-b1(o,t,r)}function Une(e,t,r){return 1-b1(e,t,r)}function jT(){var e=[...arguments],t,r,n,i,o;return Sr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=ar(e[0]),r=ar(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function GG(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=jT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=jT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Od(t,n,r-n)}function Gne(e){for(var t=LG(e),r=e.map(l=>ar(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=GG(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function jne(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(zT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(zT(e[1]/2,0,1)*ba(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Wne(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(w1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(w1(e[1]/2,e[2].length-1)*ba(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Hne(e,t){return e<t}function jG(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function Xne(e,t,r,n){const i=jG(e,t,r,n);return gC(i,1)}function Yne(e,t,r,n){const i=jG(e,t,r,n);return gC(i,2)}const qne=Object.freeze(Object.defineProperty({__proto__:null,zscore:UT,ztest:gC,tscore:GT,ttest:$ne,anovafscore:zne,anovaftest:Vne,ftest:Une,qscore:jT,qtest:GG,tukeyhsd:Gne,normalci:jne,tci:Wne,significant:Hne,oneSidedDifferenceOfProportions:Xne,twoSidedDifferenceOfProportions:Yne},Symbol.toStringTag,{value:"Module"}));function Di(e){return ko(e)||e.constructor.name==="jStat"}function hn(e,t){return Di(t)?(Di(t[0])||(t=[t]),Qr(e,function(r,n,i){return r+t[n][i]})):Qr(e,function(r){return r+t})}function su(e,t){return Di(t)?(Di(t[0])||(t=[t]),Qr(e,function(r,n,i){return r-t[n][i]||0})):Qr(e,function(r){return r-t})}function WT(e,t){return Di(t)?(Di(t[0])||(t=[t]),Jt(e,Lo(t))):Qr(e,function(r){return r/t})}function Jt(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=Ro(i,r=Di(t)?t[0].length:o);let s=0;if(Di(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return Qr(e,function(l){return l*t})}function Zne(e,t){return Jt(e.map(r=>[r]),[t])}function S1(e,t){Di(e[0])||(e=[e]),Di(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Ss(e):e,n=t[0].length===1&&t.length!==1?Ss(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function HT(e,t){return Qr(e,r=>Math.pow(r,t))}function Kne(e){return Qr(e,t=>Math.exp(t))}function Jne(e){return Qr(e,t=>Math.log(t))}function Qne(e){return Qr(e,t=>Math.abs(t))}function rf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Di(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function tie(e,t){return Math.acos(S1(e,t)/(rf(e)*rf(t)))}function mC(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Lo(e){for(var t=e.length,r=e[0].length,n=au(t,r),i=WG(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function eie(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function rie(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=mC(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function WG(e,t){var r=mC(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function nie(e,t){var r=e[0].length,n=Ro(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r-1,-1,-1).forEach(function(a){i=Ie(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-tn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function iie(e,t){var r=e[0].length,n=Ro(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r).forEach(function(a){i=Ie(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-tn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function oie(e){var t=e.length,r=au(t),n=Ro(e.length,e[0].length),i;return Ie(t).forEach(function(o){n[0][o]=e[0][o]}),Ie(1,t).forEach(function(o){Ie(o).forEach(function(a){i=Ie(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-tn(i))/n[a][a]}),Ie(o,t).forEach(function(a){i=Ie(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-tn(i)})}),[r,n]}function aie(e){var t=e.length,r=Ro(e.length,e[0].length),n;return Ie(t).forEach(function(i){n=Ie(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-tn(n)),Ie(i+1,t).forEach(function(o){n=Ie(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-tn(n))/r[i][i]})}),r}function sie(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=Jt(Jt(Lo(u),hn(s,l)),-1),f=Jt(Lo(u),t),c=r,d=hn(Jt(h,r),f),i=2;Math.abs(rf(su(d,c)))>n;)c=d,d=hn(Jt(h,c),f),i++;return d}function lie(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=Jt(Jt(Lo(hn(l,a)),s),-1),f=Jt(Lo(hn(l,a)),t),c=r,d=hn(Jt(h,r),f),i=2;Math.abs(rf(su(d,c)))>n;)c=d,d=hn(Jt(h,c),f),i=i+1;return d}function uie(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=Jt(Lo(hn(u,Jt(s,i))),su(Jt(u,1-i),Jt(l,i))),h=Jt(Jt(Lo(hn(u,Jt(s,i))),t),i),f=r,p=hn(Jt(d,r),h),o=2;Math.abs(rf(su(p,f)))>n;)f=p,p=hn(Jt(d,f),h),o++;return p}function cie(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=Ro(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=su(au(t,r),Jt(Jt(i,Ss(i)),2)),e=Jt(o,Jt(e,o))}return e}function HG(e){var t=e.length,r=e[0].length,n=Ro(r,r);e=Yy(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(tn(Ie(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=tn(Ie(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function fie(e){e=Yy(e);var t=e.length,r=au(t);return Ie(t-1,-1,-1).forEach(function(n){rd(r,{row:n},WT(Jo(r,{row:n}),e[n][n])),rd(e,{row:n},WT(Jo(e,{row:n}),e[n][n])),Ie(n).forEach(function(i){var o=Jt(e[i][n],-1),a=Jo(e,{row:i}),s=Jt(Jo(e,{row:n}),o);rd(e,{row:i},hn(a,s));var l=Jo(r,{row:i}),u=Jt(Jo(r,{row:n}),o);rd(r,{row:i},hn(l,u))})}),r}function XG(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=HG(e),o=e[0].length,a=Jo(n,{col:{end:o}}),s=Jo(i,{row:{end:o}}),l=fie(s),u=Ss(a);u[0].length===void 0&&(u=[u]);var c=Jt(Jt(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function YG(e){for(var t=1,r=e.length,n=au(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=au(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=Jt(n,h),o=Jt(Jt(Lo(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function hie(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function die(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function pie(e,t,r,n){function i(p,v){for(var g=0,m=p.length,y;g<m;g++)p[g]===v&&(y=g);return y}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function vie(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function gie(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function mie(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function yie(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=Jt(Lo(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+HT(r-e[o],2)*u[o]+(r-e[o])*HT(r-e[o],2)*h[o]}function _ie(){throw new Error("gauss_quadrature not yet implemented")}function bie(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=tn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=Ss(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=S1([h[n]],[h[i]])/(r-1);for(l=YG(d),p=l[0],s=l[1],v=Ss(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Ss(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=S1([v[n]],[f[i]]);return[e,s,v,c]}const wie=Object.freeze(Object.defineProperty({__proto__:null,add:hn,subtract:su,divide:WT,multiply:Jt,outer:Zne,dot:S1,pow:HT,exp:Kne,log:Jne,abs:Qne,norm:rf,angle:tie,aug:mC,inv:Lo,det:eie,gauss_elimination:rie,gauss_jordan:WG,triaUpSolve:nie,triaLowSolve:iie,lu:oie,cholesky:aie,gauss_jacobi:sie,gauss_seidel:lie,SOR:uie,householder:cie,QR:HG,lstsq:XG,jacobi:YG,rungekutta:hie,romberg:die,richardson:pie,simpson:vie,hermite:gie,lagrange:mie,cubic_spline:yie,gauss_quadrature:_ie,PCA:bie},Symbol.toStringTag,{value:"Module"}));function Sie(e){var t=e[0].length,r=Ie(t).map(function(n){var i=Ie(t).filter(function(o){return o!==n});return qG(y1(e,n).map(function(o){return o[0]}),y1(e,i))});return r}function qG(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=XG(t,e),a=Jt(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=su(e,a),l=ar(e),u=tn(a.map(function(d){return Math.pow(d-l,2)})),c=tn(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Tie(e){var t=Sie(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=Qo(l,e.df_resid);return(u>.5?1-u:u)*2}),a=w1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function Pie(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return _1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function Eie(e,t){var r=qG(e,t),n=Tie(r),i=Pie(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const Aie={ols:Eie},Cie=Object.freeze(Object.defineProperty({__proto__:null,models:Aie},Symbol.toStringTag,{value:"Module"}));Object.assign(dt,_te,Ute,qne,wie,Cie,lee);for(const[e,t]of Object.entries(Bne)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),dt[e]=r,dt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?dt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?dt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){dt.prototype[e]=function(){return dt(dt.map(this,function(t){return dt[e](t)}))}});dt.prototype.randn=function(){return dt(dt.randn.apply(null,arguments))};const yC=wG.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(yC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=dt[r](s[a]);return o}return dt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(yC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=dt[r](s[a]);return n===!0?dt[r](dt.utils.toVector(o)):o}return dt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(yC(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,dt.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return dt[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));dt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};dt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?dt.normal.cdf(-i,0,1):dt.normal.cdf(-i,0,1)*2};dt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};dt.prototype.ttest=function(t,r){return r===1?1-dt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):dt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};dt.prototype.anovafscore=function(){return dt.anovafscore(this.toArray())};dt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return dt.ftest(this.anovafscore(),this.length-1,t-this.length)};dt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};dt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{dt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,dt.prototype[e].call(n,t)),this):typeof dt[e](this,t)=="number"?dt[e](this,t):dt(dt[e](this,t))}});dt.jStat=dt;function _C(e,t,r){const n=t;let i=[];for(let o=0;o<=r;o++){const a=dt.binomial.pdf(o,r,e/r);if(a<0)return null;const s=a*n;s<.01||i.push([o,s])}return i}function Mie(e,t){let r={};if(e)for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a]);return i}function bC(e,t,r,n,i){return n?xie(e,t,r):kie(e,t,r,i)}function kie(e,t,r,n){const o=r+2,a=Object.keys(e).sort((d,p)=>e[p][1]-e[d][1]);let s={},l=0;if(a.forEach(d=>{const p=e[d][0];if(n&&p=="0")return;const v=e[d][1],g=p in t?t[p]:0;(v>=5||g>=5||l<o)&&(s[p]={y_model:v,y_observed:g},l++)}),Object.keys(s).length==0)return console.log("can't compute chiSquared: discarded",s),{chisq:void 0,pval:NaN};let c=0,f=0;for(const[d,{y_model:p,y_observed:v}]of Object.entries(s)){const g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:NaN};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}function xie(e,t,r,n){if(this.stats.len<=5)return console.log("can't compute chiSquared: count <",5),{chisq:0,pval:1};let o={},a=0,s=0,l=e.length,u=0;for(;l--;){let d=e[l][0];if(a+=e[l][1],s+=d in t?t[d]:0,s>=5){o[d]={bell:a,hist:s},a=0,s=0,u=d;break}}for(const[d,p]of e){if(d==u)break;a+=p,s+=d in t?t[d]:0,s>=5&&(o[d]={bell:a,hist:s},a=0,s=0)}o[u].bell+=a,o[u].hist+=s;let c=0,f=0;for(const[d,{bell:p,hist:v}]of Object.entries(o)){let g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:1};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}function ZG(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}Br([vf,vy,N0,F0,yf,mf,_f,B0,yy,my,gy,$0]);const Lie={data:()=>({selected_np:1,selected_n:10}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:bf},methods:{formatFixed:Ft,isGoodVal:fo,formatKMG:yP,makeBinomialArray:_C,loss:bC,applyGiantBonus:ZG,makeModelA(e,t){let r={np:e,n:t};return r.bell=this.makeBinomialArray(e,this.stats.len,t,this.stats.generalSigmas),r.bell?(this.isGiant&&this.applyGiantBonus(r.bell),r.loss=this.loss(r.bell,this.histogram.map,2),r):null},tuneModelA(e,t){let r=[t];t===void 0&&(r=[1,10,20,40,110,120,140,150],r=r.filter(i=>i>=e&&i<=this.stats.max*5));let n={n:NaN,loss:{chisq:NaN,pval:NaN}};return r.forEach(i=>{const o=this.makeModelA(e,i);if(!o)return;const a=fo(o.loss.pval)&&(!fo(n.loss.pval)||o.loss.pval>n.loss.pval),s=fo(o.loss.chisq)&&(!fo(n.loss.chisq)||o.loss.chisq<n.loss.chisq);(a||s)&&(n=o)}),n},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(n=>{const i=n[0],o=n[1],a=o/e,s=t*Math.sqrt(a*(1-a)/e),l=Math.max(0,a-s)*e,u=Math.min(1,a+s)*e;r.push([i,o,l,u])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of r)if(Math.floor(this.sweepRange.range/a)<20){t=a;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let a=n;a<=this.sweepRange.hi;a+=t){let s=this.tuneModelA(a,void 0);a>this.sweepRange.init&&a<this.sweepRange.init+t&&o.push([this.sweepRange.init,e.loss.chisq,e.loss.pval,s.n]),o.push([a,s.loss.chisq,s.loss.pval,s.n]),s.loss.chisq<i.loss.chisq&&(i=s)}return isFinite(i.loss.chisq)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Ft(r[0],2)}<br/>n=${Ft(r[3],2)}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},$s=e=>(en("data-v-90485a5f"),e=e(),rn(),e),Iie=U(" with giant bonus"),Oie=$s(()=>b("span",{class:"title"},"Model A",-1)),Rie=$s(()=>b("span",null,[U(": all points were taken from a single distribution with "),b("i",null,"np = M")],-1)),Die={style:{float:"left"}},Nie=U(" Sweeping through "),Fie=$s(()=>b("i",null,"np",-1)),Bie={key:0,id:"chartSweep"},$ie={key:1},zie={style:{padding:"1em"}},Vie=$s(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),Uie=$s(()=>b("td",null,"Best fit:",-1)),Gie=$s(()=>b("td",null,"Manual:",-1)),jie=U(" np: "),Wie=["value","min","max","step"],Hie=U(" n: "),Xie=["value","min"],Yie=$s(()=>b("br",null,null,-1)),qie={id:"chartHisto",style:{float:"left"}},Zie=$s(()=>b("div",{style:{clear:"both"}},null,-1));function Kie(e,t,r,n,i,o){const a=de("v-chart");return O(),D(W,null,[b("p",null,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[Kr,r.isGiant]]),Iie]),Oie,Rie,b("div",null,[b("div",Die,[Nie,Fie,U(" values in "+L(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+L(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(O(),D("div",Bie,[kt(a,{option:o.makeChartASweep},null,8,["option"])])):(O(),D("div",$ie," [failed] ")),b("div",zie,[b("table",null,[Vie,o.modelASweep.result?(O(),D("tr",{key:0,class:Yr({strike:r.stats.aBad})},[Uie,b("td",null,L(o.formatFixed(o.modelASweep.result.np,4)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.n)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):ut("",!0),b("tr",null,[Gie,b("td",null,L(o.formatFixed(e.selected_np,4)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelA.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelA.loss.pval,4)),1)])]),jie,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Wie),Hie,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,Xie),Yie])]),b("div",qie,[o.modelA.bell?(O(),fa(a,{key:0,option:o.makeChartHist},null,8,["option"])):(O(),D(W,{key:1},[U(" [failed to build the requested distribution np="+L(o.modelA.np)+" n="+L(o.modelA.n)+" ] ",1)],64))]),Zie])],64)}const Jie=$e(Lie,[["render",Kie],["__scopeId","data-v-90485a5f"]]);Br([vf,vy,N0,F0,plt,yf,mf,_f,B0,yy,my,gy,$0]);const Qie={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:bf},methods:{formatFixed:Ft,formatKMG:yP,makeBinomialArray:_C,loss:bC,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t,this.stats.generalSigmas);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=1 in r&&Object.keys(r).length==2&&1 in i&&Object.keys(i).length==1,a=this.histogramLuckOnly.err[0][1],s=this.histogramLuckOnly.err[0][2];if(r[0]<a){const l={...i};l[0]=a,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>s){const l={...i};l[0]=s,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(o){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=yG(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue):n.loss.binomtest=NaN}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*3));let n={np:0,n:1,loss:{chisq:1e99,pval:0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;const a=o.loss.pval&&n.loss.pval&&o.loss.pval>n.loss.pval,s=o.loss.chisq&&n.loss.chisq&&o.loss.chisq<.9999*n.loss.chisq;(a||s)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{chisq:1e99,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.loss.chisq,l.loss.pval,l.n]);const u=l.loss.pval&&o.loss.pval&&l.loss.pval>o.loss.pval,c=l.loss.chisq<o.loss.chisq;(u||c)&&(o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelB.bell}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,3)},showSymbol:!1},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Ft(r[0],2)}<br/>n=${Ft(r[3])}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e}}},Do=e=>(en("data-v-2d1b7899"),e=e(),rn(),e),toe=Do(()=>b("span",{class:"title"},"Model B",-1)),eoe=Do(()=>b("span",null,[U(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),b("i",null,"np"),U(", that \u03BB"),b("i",null,"np"),U(" = M")],-1)),roe=U("Sweeping through "),noe=Do(()=>b("i",null,"np",-1)),ioe={style:{float:"left"}},ooe={key:0,id:"chartSweep"},aoe={style:{padding:"1em"}},soe={style:{float:"left"}},loe=Do(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),uoe={key:0},coe=Do(()=>b("td",null,"Best fit:",-1)),foe=Do(()=>b("td",null,"Manual:",-1)),hoe=U(" np\u1D38: "),doe=["value","min","max","step"],poe=U(" n\u1D38: "),voe=["value"],goe=Do(()=>b("div",{style:{clear:"both"}},null,-1)),moe={key:0,id:"chartHisto"},yoe=Do(()=>b("br",null,null,-1)),_oe={key:0},boe=U(" Corresponding range for "),woe=Do(()=>b("i",null,"np",-1)),Soe={key:1},Toe=Do(()=>b("div",{style:{clear:"both"}},null,-1));function Poe(e,t,r,n,i,o){const a=de("v-chart");return O(),D(W,null,[toe,eoe,o.modelB?(O(),D(W,{key:0},[b("p",null,[roe,noe,U(" values in "+L(o.formatFixed(this.sweep_lo,2))+"\u2026"+L(o.formatFixed(this.sweep_hi,2))+" range:",1)]),b("div",ioe,[o.modelBSweep?(O(),D("div",ooe,[kt(a,{option:o.makeChartBSweep},null,8,["option"])])):ut("",!0),b("div",aoe,[b("div",soe,[b("table",null,[loe,o.modelBSweep.result?(O(),D("tr",uoe,[coe,b("td",null,L(o.formatFixed(o.modelBSweep.result.np,3)),1),b("td",null,L(o.modelBSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):ut("",!0),b("tr",null,[foe,b("td",null,L(o.formatFixed(e.selected_np,3)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelB.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelB.loss.pval,4)),1)])]),b("p",null,[hoe,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,doe),poe,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,voe)])]),goe])]),o.modelB.bell?(O(),D("div",moe,[kt(a,{option:o.makeChartBHist},null,8,["option"]),U(" Bin 0 has 1-\u03BB \u2248 "+L(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+L(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),yoe,U(" Depending on \u03BB could potentially be "+L(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+L(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(O(),D("p",_oe,[boe,woe,U(": "+L(o.formatFixed(o.npRangeForBinary.min,2))+"\u2026"+L(o.formatFixed(o.npRangeForBinary.max,2)),1)])):ut("",!0)])):(O(),D("div",Soe," bad parameters ")),Toe],64)):ut("",!0)],64)}const Eoe=$e(Qie,[["render",Poe],["__scopeId","data-v-2d1b7899"]]);Br([vf,vy,N0,F0,yf,mf,_f,B0,yy,my,gy,$0]);class Aoe{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.loss.chisq,o.loss.pval,o.n]);return t}}const Coe={data:()=>({selected_npL:1,selected_npU:1,selected_n:10}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:bf},methods:{isGoodVal:fo,formatFixed:Ft,formatKMG:yP,makeBinomialArray:_C,sumDistributions:Mie,loss:bC,applyGiantBonus:ZG,l2u(e,t,r){return r/(1-t)-t*e/(1-t)},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-30;s<=30;s++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+s*n;if(u<0||c<u)continue;const f=this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),e.put(u,c,d)),d.loss.chisq<a.model.loss.chisq&&(a={il:s,iu:l,model:d})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max&&o<this.stats.max*8));let i={n:0,loss:{chisq:1/0,pval:0}};return n.forEach(o=>{const a={npL:e,n:o,npU:r};a.bellL=this.makeBinomialArray(e,this.stats.lucky.len,o),a.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),this.isGiant&&this.applyGiantBonus(a.bellU),a.bell=this.sumDistributions(a.bellL,a.bellU),a.loss=this.loss(a.bell,this.histogram.map,3);const s=fo(a.loss.pval)&&(!fo(i.loss.pval)||a.loss.pval>i.loss.pval),l=fo(a.loss.chisq)&&(!fo(i.loss.chisq)||a.loss.chisq<i.loss.chisq);(s||l)&&(i=a)}),i||console.log("makemodelC failed",e,r,t),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:this.stats.mean};return this.isGiant&&(e.u_init>10?(e.u_lo/=1.684,e.u_init/=1.684,e.u_hi/=1.684,e.l_init/=1.684):e.u_init>1&&(e.u_lo/=1.684,e.u_init/=1.684,e.u_hi/=1,e.l_init/=1.684)),e},modelCSweep(){if(isNaN(this.stats.mean))return!1;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<n&&(i=n);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let a=new Aoe;a.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(a,e,n,i,o,r);const s=a.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:a,psGridDots:s}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>Ft(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>Ft(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const m=l,y=l/e;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}else{const m=u*e,y=u;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.chisq,max:this.modelCSweep.result.loss.chisq*2,dimension:2,text:["\u03C7\xB2",""]}:{min:0,max:this.modelCSweep.result.loss.pval,dimension:3,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(m){const y=m.data;return`np\u1D41=${Ft(y[0],2)}<br/>np\u1D38=${Ft(y[1],2)}<br/>n=${Ft(y[4],2)}<br/>\u03C7\xB2=${y[2].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(y[3],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:m=>`${m[1]} \u2192 ${Ft(m[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi,this.l2u(this.sweepRange.u_hi,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo,this.l2u(this.sweepRange.u_lo,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},ka=e=>(en("data-v-b4316b01"),e=e(),rn(),e),Moe=U(" with giant bonus"),koe=ka(()=>b("span",{class:"title"},"Model C",-1)),xoe=ka(()=>b("br",null,null,-1)),Loe={style:{float:"left"}},Ioe={key:0,style:{width:"570px",height:"270px"}},Ooe={style:{padding:"1em"}},Roe={style:{float:"left"}},Doe=ka(()=>b("tr",null,[b("th"),b("th",null,"np\u1D41"),b("th",null,"np\u1D38"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),Noe=ka(()=>b("td",null,"Best fit:",-1)),Foe=ka(()=>b("td",null,"Manual:",-1)),Boe=["value","min","max","step"],$oe=U(" np\u1D41 "),zoe=ka(()=>b("br",null,null,-1)),Voe=["value","min","max","step"],Uoe=U(" np\u1D38 "),Goe=ka(()=>b("br",null,null,-1)),joe=["value"],Woe=U(" n "),Hoe=ka(()=>b("div",{style:{clear:"both"}},null,-1)),Xoe={key:0,id:"chartHisto",style:{float:"left"}},Yoe=ka(()=>b("div",{style:{clear:"both"}},null,-1));function qoe(e,t,r,n,i,o){const a=de("v-chart");return O(),D(W,null,[b("p",null,[Tt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[Kr,r.isGiant]]),Moe]),koe,b("span",null,": some points were taken from a distribution L, and the rest from distribution U, so \u03BB np\u1D38 + (1 - \u03BB) np\u1D41 = M, where \u03BB \u2208 "+L(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(r.stats.lucky.shareHi*100,2))+"%, M \u2208 "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+", and 0 < np\u1D41 < np\u1D38",1),xoe,b("div",Loe,[o.modelCSweep?(O(),D("div",Ioe,[kt(a,{option:o.makeChartCGrid},null,8,["option"])])):ut("",!0),b("div",Ooe,[b("div",Roe,[b("table",null,[Doe,o.modelCSweep.result?(O(),D("tr",{key:0,class:Yr({strike:r.stats.dBad})},[Noe,b("td",null,L(o.formatFixed(o.modelCSweep.result.npU,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.npL,2)),1),b("td",null,L(o.modelCSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):ut("",!0),b("tr",null,[Foe,b("td",null,L(o.formatFixed(e.selected_npU,2)),1),b("td",null,L(o.formatFixed(e.selected_npL,2)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelC.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelC.loss.pval,4)),1)])]),b("p",null,[b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Boe),$oe,zoe,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Voe),Uoe,Goe,b("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,joe),Woe])]),Hoe])]),o.modelC.bell?(O(),D("div",Xoe,[kt(a,{option:o.makeChartCHist},null,8,["option"])])):ut("",!0),Yoe],64)}const Zoe=$e(Coe,[["render",qoe],["__scopeId","data-v-b4316b01"]]);Br([vf,vy,N0,F0,yf,mf,_f,B0,yy,my,gy,$0]);const Koe={setup(){const e=xt(),t=_Y(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:bf,DRMA:Jie,DRMB:Eoe,DRMC:Zoe},provide(){return{[Jct]:Ye(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=dt.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,g]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,g]of Object.entries(n))for(let m of g.weights)m>this.stats.generalConfidence/100,m>1-this.stats.generalConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[v,g]of Object.entries(n)){s=Math.min(s,v),l=Math.max(l,v);let{len:m,luckyLen:y,sorted:_,weights:w}=g;a+=y,i.push(..._),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:dt.min(i),max:dt.max(i),range:dt.range(i),mean:dt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:dt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/150*(1-c.mean/150)/c.len*150),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:a,share:a/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},!isNaN(c.lucky.share)){console.log("lucky share binomTest",c.lucky.share);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-this.stats.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-a,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,g]of Object.entries(n)){let{len:m,luckyLen:y,luckeyLen95:_,sorted:w,weights:T}=g;for(let S=0;S<m;S++){const P=w[S],C=T[S];f+=P*(1-C),h+=P*C}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,g]of Object.entries(n)){let{len:m,sorted:y,weights:_}=g;for(let w=0;w<m;w++){const T=_[w],S=y[w]-c.unlucky.mean;d+=S*S*(1-T);const P=y[w]-c.lucky.mean;p+=P*P*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=dt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:Ft,makeIconSrc:Ni,binomialTest:yG,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},nn=e=>(en("data-v-9945467e"),e=e(),rn(),e),Joe={id:"menu"},Qoe={style:{display:"none"}},tae=nn(()=>b("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),eae=nn(()=>b("p",{class:"fsxs"},"Right: #observations used to find out the real parameters",-1)),rae={key:1},nae=nn(()=>b("tr",null,[b("th",{class:"fsxs"},"n"),b("th",{class:"fsxs"},"np\u1D41"),b("th",{class:"fsxs"},"np\u1D38"),b("th",{class:"fsxs"},"item"),b("th",{class:"fsxs"},"normal"),b("th",{class:"fsxs"},"giant")],-1)),iae={class:"fsxs"},oae={class:"fsxs"},aae={class:"fsxs"},sae=["src"],lae={class:"center"},uae=["title","onClick"],cae=["title"],fae={id:"content"},hae=nn(()=>b("tr",null,[b("td",null,"mute"),b("td",null,"luck")],-1)),dae={class:"center"},pae=["onUpdate:modelValue"],vae=U(" Possible luck procs observed with "),gae=nn(()=>b("option",{value:"1.5"},"\xB11.5\u03C3 (86.6%)",-1)),mae=nn(()=>b("option",{value:"2"},"\xB12\u03C3 (95.4%)",-1)),yae=nn(()=>b("option",{value:"2.5"},"\xB12.5\u03C3 (98.8%)",-1)),_ae=nn(()=>b("option",{value:"3"},"\xB13\u03C3 (99.7%)",-1)),bae=[gae,mae,yae,_ae],wae=U(" confidence: "),Sae=nn(()=>b("tr",null,[b("th"),b("th",null,"min"),b("th",null,"max")],-1)),Tae=nn(()=>b("td",null,"count",-1)),Pae=nn(()=>b("td",null,"% of total",-1)),Eae={id:"settings"},Aae=U(" Use model:"),Cae=nn(()=>b("br",null,null,-1)),Mae=nn(()=>b("label",{for:"option1"},[U("A. Same item drop regardless of luck (plants, lumber, ores)"),b("br")],-1)),kae=nn(()=>b("label",{for:"option2"},[U("B. Item only drops when luck procs (sacks, lumbering rares)"),b("br")],-1)),xae=nn(()=>b("label",{for:"option3"},[U("C. Different drops when luck procs and when not (eggs, honey)"),b("br")],-1)),Lae={key:0,id:"modelA",style:{float:"left"}},Iae={key:1},Oae={key:2};function Rae(e,t,r,n,i,o){const a=de("RouterLink"),s=de("DRMA"),l=de("DRMB"),u=de("DRMC");return O(),D("main",null,[b("div",Joe,[b("div",Qoe,L(n.dropratesStore.selected_pzk)+" "+L(n.dropratesStore.selected_ik)+" "+L(n.dropratesStore.selected_specie),1),tae,eae,(O(!0),D(W,null,Nt(i.alldata,(c,f)=>(O(),D(W,null,[f in n.gameStore.plantzoneStatic?(O(),fa(a,{key:0,tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[U(L(f)+" "+L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"])):(O(),D("span",rae,L(f),1)),b("table",null,[nae,(O(!0),D(W,null,Nt(c,(h,d)=>(O(),D("tr",null,[b("td",iae,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones?(O(),D(W,{key:0},[U(L(n.gameStore.plantzones[Number(f)].rolls),1)],64)):ut("",!0)]),b("td",oae,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(O(),D(W,{key:0},[U(L(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):ut("",!0)]),b("td",aae,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(O(),D(W,{key:0},[U(L(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):ut("",!0)]),b("td",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:Ee(()=>[b("span",null,[b("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,sae)])]),_:2},1032,["to"]),U(" "+L(n.gameStore.itemName(d)),1)]),(O(),D(W,null,Nt(["normal","giant"],p=>b("td",lae,[p in h?(O(),D(W,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(O(),D("button",{key:0,title:"item "+d,onClick:v=>o.activate(f,d,p)},L(Object.values(h[p]).flat().length),9,uae)):(O(),D("button",{key:1,title:"item "+d,class:"pressed"},L(Object.values(h[p]).flat().length),9,cae))],64)):ut("",!0)])),64))]))),256))])],64))),256))]),b("div",fae,[b("details",null,[b("summary",null,[U("Dataset: size N = "+L(o.stats.len)+", mean M = "+L(o.formatFixed(o.stats.mean,2))+"\xB1"+L(o.formatFixed(1.96*o.stats.meanErr,2))+", ",1),this.stats.minLuck==this.stats.maxLuck?(O(),D(W,{key:0},[U(L(this.stats.maxLuck),1)],64)):(O(),D(W,{key:1},[U(L(o.formatFixed(this.stats.minLuck,2))+"\u2026"+L(o.formatFixed(this.stats.maxLuck,2)),1)],64)),U("\u{1F340} \u2192 \u03BB \u2208 "+L(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),b("div",null,[b("table",null,[hae,(O(!0),D(W,null,Nt(o.stats.dataRaw,(c,f)=>(O(),D("tr",{class:Yr({strike:i.hide_buckets[f]})},[b("td",dae,[Tt(b("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,pae),[[Kr,i.hide_buckets[f]]])]),b("td",null,L(f),1),(O(!0),D(W,null,Nt(c,h=>(O(),D("td",null,L(h),1))),256))],2))),256))])]),b("p",null,[vae,Tt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.generalSigmas=c)},bae,512),[[cn,i.generalSigmas]]),wae,b("table",null,[Sae,b("tr",null,[Tae,b("td",null,L(o.formatFixed(o.stats.lucky.lenLo,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),b("tr",null,[Pae,b("td",null,L(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),b("div",Eae,[Aae,Cae,Tt(b("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[ud,n.dropratesStore.selected_model]]),Mae,Tt(b("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[ud,n.dropratesStore.selected_model]]),kae,Tt(b("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[ud,n.dropratesStore.selected_model]]),xae]),n.dropratesStore.selected_model=="a"?(O(),D("div",Lae,[kt(s,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):ut("",!0),n.dropratesStore.selected_model=="b"?(O(),D("div",Iae,[kt(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):ut("",!0),n.dropratesStore.selected_model=="c"?(O(),D("div",Oae,[kt(u,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):ut("",!0)])])}const Dae=$e(Koe,[["render",Rae],["__scopeId","data-v-9945467e"]]),Nae=cY({history:CX("/workerman/"),routes:[{path:"/",name:"home",component:AAt},{path:"/plantzones",component:hCt},{path:"/modifiers",component:KCt},{path:"/settings",component:Ckt},{path:"/about",component:()=>LY(()=>import("./AboutView.5125930a.js"),[])},{path:"/othertowns",component:Okt},{path:"/workshops",component:qkt},{path:"/housecraft",component:v4t},{path:"/droprates",component:Dae},{path:"/lodging",component:PCt}]});const wC=RH(MY),Fae=aX();wC.use(Fae);wC.use(Nae);wC.mount("#app");export{W as F,$e as _,b as a,U as b,D as c,kt as d,cP as e,de as f,rn as g,O as o,en as p,IW as r,Ee as w};
