function hj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function HT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const dj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pj=HT(dj);function c8(e){return!!e||e===""}function Il(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=fr(n)?mj(n):Il(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(fr(e))return e;if(Qe(e))return e}}const vj=/;(?![^(]*\))/g,gj=/:(.+)/;function mj(e){const t={};return e.split(vj).forEach(r=>{if(r){const n=r.split(gj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Yr(e){let t="";if(fr(e))t=e;else if(Ft(e))for(let r=0;r<e.length;r++){const n=Yr(e[r]);n&&(t+=n+" ")}else if(Qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function yj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=jl(e[n],t[n]);return r}function jl(e,t){if(e===t)return!0;let r=RC(e),n=RC(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Id(e),n=Id(t),r||n)return e===t;if(r=Ft(e),n=Ft(t),r||n)return r&&n?yj(e,t):!1;if(r=Qe(e),n=Qe(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!jl(e[a],t[a]))return!1}}return String(e)===String(t)}function XT(e,t){return e.findIndex(r=>jl(r,t))}const L=e=>fr(e)?e:e==null?"":Ft(e)||Qe(e)&&(e.toString===d8||!Gt(e.toString))?JSON.stringify(e,f8,2):String(e),f8=(e,t)=>t&&t.__v_isRef?f8(e,t.value):Ec(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:ef(t)?{[`Set(${t.size})`]:[...t.values()]}:Qe(t)&&!Ft(t)&&!p8(t)?String(t):t,Le={},Pc=[],Ei=()=>{},_j=()=>!1,bj=/^on[^a-z]/,S1=e=>bj.test(e),YT=e=>e.startsWith("onUpdate:"),Zr=Object.assign,qT=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},wj=Object.prototype.hasOwnProperty,ae=(e,t)=>wj.call(e,t),Ft=Array.isArray,Ec=e=>S0(e)==="[object Map]",ef=e=>S0(e)==="[object Set]",RC=e=>S0(e)==="[object Date]",Gt=e=>typeof e=="function",fr=e=>typeof e=="string",Id=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",h8=e=>Qe(e)&&Gt(e.then)&&Gt(e.catch),d8=Object.prototype.toString,S0=e=>d8.call(e),Sj=e=>S0(e).slice(8,-1),p8=e=>S0(e)==="[object Object]",ZT=e=>fr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Sg=HT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),T1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Tj=/-(\w)/g,wo=T1(e=>e.replace(Tj,(t,r)=>r?r.toUpperCase():"")),Pj=/\B([A-Z])/g,rf=T1(e=>e.replace(Pj,"-$1").toLowerCase()),P1=T1(e=>e.charAt(0).toUpperCase()+e.slice(1)),s_=T1(e=>e?`on${P1(e)}`:""),Od=(e,t)=>!Object.is(e,t),Tg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},um=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},cm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let DC;const Ej=()=>DC||(DC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let oo;class v8{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&oo&&(this.parent=oo,this.index=(oo.scopes||(oo.scopes=[])).push(this)-1)}run(t){if(this.active){const r=oo;try{return oo=this,t()}finally{oo=r}}}on(){oo=this}off(){oo=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function g8(e){return new v8(e)}function Aj(e,t=oo){t&&t.active&&t.effects.push(e)}const KT=e=>{const t=new Set(e);return t.w=0,t.n=0,t},m8=e=>(e.w&_s)>0,y8=e=>(e.n&_s)>0,Cj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=_s},Mj=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];m8(i)&&!y8(i)?i.delete(e):t[r++]=i,i.w&=~_s,i.n&=~_s}t.length=r}},jw=new WeakMap;let $h=0,_s=1;const Ww=30;let yi;const Ol=Symbol(""),Hw=Symbol("");class JT{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Aj(this,n)}run(){if(!this.active)return this.fn();let t=yi,r=hs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=yi,yi=this,hs=!0,_s=1<<++$h,$h<=Ww?Cj(this):NC(this),this.fn()}finally{$h<=Ww&&Mj(this),_s=1<<--$h,yi=this.parent,hs=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){yi===this?this.deferStop=!0:this.active&&(NC(this),this.onStop&&this.onStop(),this.active=!1)}}function NC(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let hs=!0;const _8=[];function nf(){_8.push(hs),hs=!1}function of(){const e=_8.pop();hs=e===void 0?!0:e}function An(e,t,r){if(hs&&yi){let n=jw.get(e);n||jw.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=KT()),b8(i)}}function b8(e,t){let r=!1;$h<=Ww?y8(e)||(e.n|=_s,r=!m8(e)):r=!e.has(yi),r&&(e.add(yi),yi.deps.push(e))}function la(e,t,r,n,i,o){const a=jw.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Ft(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Ft(e)?ZT(r)&&s.push(a.get("length")):(s.push(a.get(Ol)),Ec(e)&&s.push(a.get(Hw)));break;case"delete":Ft(e)||(s.push(a.get(Ol)),Ec(e)&&s.push(a.get(Hw)));break;case"set":Ec(e)&&s.push(a.get(Ol));break}if(s.length===1)s[0]&&Xw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Xw(KT(l))}}function Xw(e,t){const r=Ft(e)?e:[...e];for(const n of r)n.computed&&FC(n);for(const n of r)n.computed||FC(n)}function FC(e,t){(e!==yi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const kj=HT("__proto__,__v_isRef,__isVue"),w8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Id)),xj=QT(),Lj=QT(!1,!0),Ij=QT(!0),BC=Oj();function Oj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=ce(this);for(let o=0,a=this.length;o<a;o++)An(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(ce)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){nf();const n=ce(this)[t].apply(this,r);return of(),n}}),e}function QT(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?qj:A8:t?E8:P8).get(n))return n;const a=Ft(n);if(!e&&a&&ae(BC,i))return Reflect.get(BC,i,o);const s=Reflect.get(n,i,o);return(Id(i)?w8.has(i):kj(i))||(e||An(n,"get",i),t)?s:He(s)?a&&ZT(i)?s:s.value:Qe(s)?e?C8(s):af(s):s}}const Rj=S8(),Dj=S8(!0);function S8(e=!1){return function(r,n,i,o){let a=r[n];if(Rd(a)&&He(a)&&!He(i))return!1;if(!e&&!Rd(i)&&(Yw(i)||(i=ce(i),a=ce(a)),!Ft(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=Ft(r)&&ZT(n)?Number(n)<r.length:ae(r,n),l=Reflect.set(r,n,i,o);return r===ce(o)&&(s?Od(i,a)&&la(r,"set",n,i):la(r,"add",n,i)),l}}function Nj(e,t){const r=ae(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&la(e,"delete",t,void 0),n}function Fj(e,t){const r=Reflect.has(e,t);return(!Id(t)||!w8.has(t))&&An(e,"has",t),r}function Bj(e){return An(e,"iterate",Ft(e)?"length":Ol),Reflect.ownKeys(e)}const T8={get:xj,set:Rj,deleteProperty:Nj,has:Fj,ownKeys:Bj},zj={get:Ij,set(e,t){return!0},deleteProperty(e,t){return!0}},$j=Zr({},T8,{get:Lj,set:Dj}),tP=e=>e,E1=e=>Reflect.getPrototypeOf(e);function hp(e,t,r=!1,n=!1){e=e.__v_raw;const i=ce(e),o=ce(t);r||(t!==o&&An(i,"get",t),An(i,"get",o));const{has:a}=E1(i),s=n?tP:r?nP:Dd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function dp(e,t=!1){const r=this.__v_raw,n=ce(r),i=ce(e);return t||(e!==i&&An(n,"has",e),An(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function pp(e,t=!1){return e=e.__v_raw,!t&&An(ce(e),"iterate",Ol),Reflect.get(e,"size",e)}function zC(e){e=ce(e);const t=ce(this);return E1(t).has.call(t,e)||(t.add(e),la(t,"add",e,e)),this}function $C(e,t){t=ce(t);const r=ce(this),{has:n,get:i}=E1(r);let o=n.call(r,e);o||(e=ce(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Od(t,a)&&la(r,"set",e,t):la(r,"add",e,t),this}function VC(e){const t=ce(this),{has:r,get:n}=E1(t);let i=r.call(t,e);i||(e=ce(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&la(t,"delete",e,void 0),o}function UC(){const e=ce(this),t=e.size!==0,r=e.clear();return t&&la(e,"clear",void 0,void 0),r}function vp(e,t){return function(n,i){const o=this,a=o.__v_raw,s=ce(a),l=t?tP:e?nP:Dd;return!e&&An(s,"iterate",Ol),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function gp(e,t,r){return function(...n){const i=this.__v_raw,o=ce(i),a=Ec(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?tP:t?nP:Dd;return!t&&An(o,"iterate",l?Hw:Ol),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ca(e){return function(...t){return e==="delete"?!1:this}}function Vj(){const e={get(o){return hp(this,o)},get size(){return pp(this)},has:dp,add:zC,set:$C,delete:VC,clear:UC,forEach:vp(!1,!1)},t={get(o){return hp(this,o,!1,!0)},get size(){return pp(this)},has:dp,add:zC,set:$C,delete:VC,clear:UC,forEach:vp(!1,!0)},r={get(o){return hp(this,o,!0)},get size(){return pp(this,!0)},has(o){return dp.call(this,o,!0)},add:Ca("add"),set:Ca("set"),delete:Ca("delete"),clear:Ca("clear"),forEach:vp(!0,!1)},n={get(o){return hp(this,o,!0,!0)},get size(){return pp(this,!0)},has(o){return dp.call(this,o,!0)},add:Ca("add"),set:Ca("set"),delete:Ca("delete"),clear:Ca("clear"),forEach:vp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=gp(o,!1,!1),r[o]=gp(o,!0,!1),t[o]=gp(o,!1,!0),n[o]=gp(o,!0,!0)}),[e,r,t,n]}const[Uj,Gj,jj,Wj]=Vj();function eP(e,t){const r=t?e?Wj:jj:e?Gj:Uj;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(ae(r,i)&&i in n?r:n,i,o)}const Hj={get:eP(!1,!1)},Xj={get:eP(!1,!0)},Yj={get:eP(!0,!1)},P8=new WeakMap,E8=new WeakMap,A8=new WeakMap,qj=new WeakMap;function Zj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kj(e){return e.__v_skip||!Object.isExtensible(e)?0:Zj(Sj(e))}function af(e){return Rd(e)?e:rP(e,!1,T8,Hj,P8)}function Jj(e){return rP(e,!1,$j,Xj,E8)}function C8(e){return rP(e,!0,zj,Yj,A8)}function rP(e,t,r,n,i){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=Kj(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function ia(e){return Rd(e)?ia(e.__v_raw):!!(e&&e.__v_isReactive)}function Rd(e){return!!(e&&e.__v_isReadonly)}function Yw(e){return!!(e&&e.__v_isShallow)}function M8(e){return ia(e)||Rd(e)}function ce(e){const t=e&&e.__v_raw;return t?ce(t):e}function gi(e){return um(e,"__v_skip",!0),e}const Dd=e=>Qe(e)?af(e):e,nP=e=>Qe(e)?C8(e):e;function k8(e){hs&&yi&&(e=ce(e),b8(e.dep||(e.dep=KT())))}function x8(e,t){e=ce(e),e.dep&&Xw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function A1(e){return L8(e,!1)}function Pg(e){return L8(e,!0)}function L8(e,t){return He(e)?e:new Qj(e,t)}class Qj{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:ce(t),this._value=r?t:Dd(t)}get value(){return k8(this),this._value}set value(t){t=this.__v_isShallow?t:ce(t),Od(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Dd(t),x8(this))}}function mr(e){return He(e)?e.value:e}const tW={get:(e,t,r)=>mr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function I8(e){return ia(e)?e:new Proxy(e,tW)}function qw(e){const t=Ft(e)?new Array(e.length):{};for(const r in e)t[r]=Eg(e,r);return t}class eW{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Eg(e,t,r){const n=e[t];return He(n)?n:new eW(e,t,r)}class rW{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new JT(t,()=>{this._dirty||(this._dirty=!0,x8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=ce(this);return k8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function nW(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=Ei):(n=e.get,i=e.set),new rW(n,i,o||!i,r)}function ds(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){C1(o,t,r)}return i}function Ai(e,t,r,n){if(Gt(e)){const o=ds(e,t,r,n);return o&&h8(o)&&o.catch(a=>{C1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ai(e[o],t,r,n));return i}function C1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){ds(l,null,10,[e,a,s]);return}}iW(e,r,i,n)}function iW(e,t,r,n=!0){console.error(e)}let fm=!1,Zw=!1;const wn=[];let Jo=0;const nd=[];let Vh=null,oc=0;const id=[];let Qa=null,ac=0;const O8=Promise.resolve();let iP=null,Kw=null;function Nd(e){const t=iP||O8;return e?t.then(this?e.bind(this):e):t}function oW(e){let t=Jo+1,r=wn.length;for(;t<r;){const n=t+r>>>1;Fd(wn[n])<e?t=n+1:r=n}return t}function R8(e){(!wn.length||!wn.includes(e,fm&&e.allowRecurse?Jo+1:Jo))&&e!==Kw&&(e.id==null?wn.push(e):wn.splice(oW(e.id),0,e),D8())}function D8(){!fm&&!Zw&&(Zw=!0,iP=O8.then(B8))}function aW(e){const t=wn.indexOf(e);t>Jo&&wn.splice(t,1)}function N8(e,t,r,n){Ft(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),D8()}function sW(e){N8(e,Vh,nd,oc)}function lW(e){N8(e,Qa,id,ac)}function M1(e,t=null){if(nd.length){for(Kw=t,Vh=[...new Set(nd)],nd.length=0,oc=0;oc<Vh.length;oc++)Vh[oc]();Vh=null,oc=0,Kw=null,M1(e,t)}}function F8(e){if(M1(),id.length){const t=[...new Set(id)];if(id.length=0,Qa){Qa.push(...t);return}for(Qa=t,Qa.sort((r,n)=>Fd(r)-Fd(n)),ac=0;ac<Qa.length;ac++)Qa[ac]();Qa=null,ac=0}}const Fd=e=>e.id==null?1/0:e.id;function B8(e){Zw=!1,fm=!0,M1(e),wn.sort((r,n)=>Fd(r)-Fd(n));const t=Ei;try{for(Jo=0;Jo<wn.length;Jo++){const r=wn[Jo];r&&r.active!==!1&&ds(r,null,14)}}finally{Jo=0,wn.length=0,F8(),fm=!1,iP=null,(wn.length||nd.length||id.length)&&B8(e)}}function uW(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(cm))}let s,l=n[s=s_(t)]||n[s=s_(wo(t))];!l&&o&&(l=n[s=s_(rf(t))]),l&&Ai(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Ai(u,e,6,i)}}function z8(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=z8(u,t,!0);c&&(s=!0,Zr(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Ft(o)?o.forEach(l=>a[l]=null):Zr(a,o),n.set(e,a),a)}function k1(e,t){return!e||!S1(t)?!1:(t=t.slice(2).replace(/Once$/,""),ae(e,t[0].toLowerCase()+t.slice(1))||ae(e,rf(t))||ae(e,t))}let Rr=null,x1=null;function hm(e){const t=Rr;return Rr=e,x1=e&&e.type.__scopeId||null,t}function tn(e){x1=e}function en(){x1=null}function Ee(e,t=Rr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&QC(-1);const o=hm(t),a=e(...i);return hm(o),n._d&&QC(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function l_(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const y=hm(e);try{if(r.shapeFlag&4){const w=i||n;g=uo(c.call(w,w,f,o,d,h,p)),m=l}else{const w=t;g=uo(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),m=t.props?l:cW(l)}}catch(w){ad.length=0,C1(w,e,1),g=Ct(bs)}let _=g;if(m&&v!==!1){const w=Object.keys(m),{shapeFlag:T}=_;w.length&&T&7&&(a&&w.some(YT)&&(m=fW(m,a)),_=Bc(_,m))}return r.dirs&&(_=Bc(_),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),g=_,hm(y),g}const cW=e=>{let t;for(const r in e)(r==="class"||r==="style"||S1(r))&&((t||(t={}))[r]=e[r]);return t},fW=(e,t)=>{const r={};for(const n in e)(!YT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function hW(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?GC(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!k1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?GC(n,a,u):!0:!!a;return!1}function GC(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!k1(r,o))return!0}return!1}function dW({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const pW=e=>e.__isSuspense;function vW(e,t){t&&t.pendingBranch?Ft(e)?t.effects.push(...e):t.effects.push(e):lW(e)}function Ag(e,t){if(cr){let r=cr.provides;const n=cr.parent&&cr.parent.provides;n===r&&(r=cr.provides=Object.create(n)),r[e]=t}}function Tn(e,t,r=!1){const n=cr||Rr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function jC(e,t){return oP(e,null,t)}const WC={};function po(e,t,r){return oP(e,t,r)}function oP(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Le){const s=cr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=Yw(e)):ia(e)?(l=()=>e,n=!0):Ft(e)?(c=!0,u=e.some(m=>ia(m)||Yw(m)),l=()=>e.map(m=>{if(He(m))return m.value;if(ia(m))return El(m);if(Gt(m))return ds(m,s,2)})):Gt(e)?t?l=()=>ds(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Ai(e,s,3,[h])}:l=Ei,t&&n){const m=l;l=()=>El(m())}let f,h=m=>{f=g.onStop=()=>{ds(m,s,4)}};if(zd)return h=Ei,t?r&&Ai(t,s,3,[l(),c?[]:void 0,h]):l(),Ei;let d=c?[]:WC;const p=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((y,_)=>Od(y,d[_])):Od(m,d)))&&(f&&f(),Ai(t,s,3,[m,d===WC?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>on(p,s&&s.suspense):v=()=>sW(p);const g=new JT(l,v);return t?r?p():d=g.run():i==="post"?on(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&qT(s.scope.effects,g)}}function gW(e,t,r){const n=this.proxy,i=fr(e)?e.includes(".")?$8(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=cr;zc(this);const s=oP(i,o.bind(n),r);return a?zc(a):Rl(),s}function $8(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function El(e,t){if(!Qe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))El(e.value,t);else if(Ft(e))for(let r=0;r<e.length;r++)El(e[r],t);else if(ef(e)||Ec(e))e.forEach(r=>{El(r,t)});else if(p8(e))for(const r in e)El(e[r],t);return e}function aP(e){return Gt(e)?{setup:e,name:e.name}:e}const od=e=>!!e.type.__asyncLoader,V8=e=>e.type.__isKeepAlive;function mW(e,t){U8(e,"a",t)}function yW(e,t){U8(e,"da",t)}function U8(e,t,r=cr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(L1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)V8(i.parent.vnode)&&_W(n,t,r,i),i=i.parent}}function _W(e,t,r,n){const i=L1(t,e,n,!0);I1(()=>{qT(n[t],i)},r)}function L1(e,t,r=cr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;nf(),zc(r);const s=Ai(t,r,e,a);return Rl(),of(),s});return n?i.unshift(o):i.push(o),o}}const ya=e=>(t,r=cr)=>(!zd||e==="sp")&&L1(e,t,r),bW=ya("bm"),G8=ya("m"),wW=ya("bu"),SW=ya("u"),TW=ya("bum"),I1=ya("um"),PW=ya("sp"),EW=ya("rtg"),AW=ya("rtc");function CW(e,t=cr){L1("ec",e,t)}function Pt(e,t){const r=Rr;if(r===null)return e;const n=R1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Le]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&El(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function Vs(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(nf(),Ai(l,r,8,[e.el,s,e,t]),of())}}const j8="components";function de(e,t){return kW(j8,e,!0,t)||e}const MW=Symbol();function kW(e,t,r=!0,n=!1){const i=Rr||cr;if(i){const o=i.type;if(e===j8){const s=oH(o,!1);if(s&&(s===t||s===wo(t)||s===P1(wo(t))))return o}const a=HC(i[e]||o[e],t)||HC(i.appContext[e],t);return!a&&n?o:a}}function HC(e,t){return e&&(e[t]||e[wo(t)]||e[P1(wo(t))])}function Nt(e,t,r,n){let i;const o=r&&r[n];if(Ft(e)||fr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Qe(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function xW(e,t,r={},n,i){if(Rr.isCE||Rr.parent&&od(Rr.parent)&&Rr.parent.isCE)return Ct("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),R();const a=o&&W8(o(r)),s=ws(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function W8(e){return e.some(t=>vm(t)?!(t.type===bs||t.type===W&&!W8(t.children)):!0)?e:null}const Jw=e=>e?n9(e)?R1(e)||e.proxy:Jw(e.parent):null,dm=Zr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jw(e.parent),$root:e=>Jw(e.root),$emit:e=>e.emit,$options:e=>X8(e),$forceUpdate:e=>e.f||(e.f=()=>R8(e.update)),$nextTick:e=>e.n||(e.n=Nd.bind(e.proxy)),$watch:e=>gW.bind(e)}),LW={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&ae(n,t))return a[t]=1,n[t];if(i!==Le&&ae(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&ae(u,t))return a[t]=3,o[t];if(r!==Le&&ae(r,t))return a[t]=4,r[t];Qw&&(a[t]=0)}}const c=dm[t];let f,h;if(c)return t==="$attrs"&&An(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Le&&ae(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,ae(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&ae(i,t)?(i[t]=r,!0):n!==Le&&ae(n,t)?(n[t]=r,!0):ae(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Le&&ae(e,a)||t!==Le&&ae(t,a)||(s=o[0])&&ae(s,a)||ae(n,a)||ae(dm,a)||ae(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:ae(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let Qw=!0;function IW(e){const t=X8(e),r=e.proxy,n=e.ctx;Qw=!1,t.beforeCreate&&XC(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:w,render:T,renderTracked:S,renderTriggered:P,errorCaptured:C,serverPrefetch:A,expose:M,inheritAttrs:k,components:O,directives:B,filters:$}=t;if(u&&OW(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);Qe(Z)&&(e.data=af(Z))}if(Qw=!0,o)for(const Z in o){const q=o[Z],tt=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):Ei,Tt=!Gt(q)&&Gt(q.set)?q.set.bind(r):Ei,Ot=Ye({get:tt,set:Tt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:bt=>Ot.value=bt})}if(s)for(const Z in s)H8(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Ag(q,Z[q])})}c&&XC(c,e,"c");function j(Z,q){Ft(q)?q.forEach(tt=>Z(tt.bind(r))):q&&Z(q.bind(r))}if(j(bW,f),j(G8,h),j(wW,d),j(SW,p),j(mW,v),j(yW,g),j(CW,C),j(AW,S),j(EW,P),j(TW,y),j(I1,w),j(PW,A),Ft(M))if(M.length){const Z=e.exposed||(e.exposed={});M.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:tt=>r[q]=tt})})}else e.exposed||(e.exposed={});T&&e.render===Ei&&(e.render=T),k!=null&&(e.inheritAttrs=k),O&&(e.components=O),B&&(e.directives=B)}function OW(e,t,r=Ei,n=!1){Ft(e)&&(e=tS(e));for(const i in e){const o=e[i];let a;Qe(o)?"default"in o?a=Tn(o.from||i,o.default,!0):a=Tn(o.from||i):a=Tn(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function XC(e,t,r){Ai(Ft(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function H8(e,t,r,n){const i=n.includes(".")?$8(r,n):()=>r[n];if(fr(e)){const o=t[e];Gt(o)&&po(i,o)}else if(Gt(e))po(i,e.bind(r));else if(Qe(e))if(Ft(e))e.forEach(o=>H8(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&po(i,o,e)}}function X8(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>pm(l,u,a,!0)),pm(l,t,a)),o.set(t,l),l}function pm(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&pm(e,o,r,!0),i&&i.forEach(a=>pm(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=RW[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const RW={data:YC,props:ml,emits:ml,methods:ml,computed:ml,beforeCreate:Gr,created:Gr,beforeMount:Gr,mounted:Gr,beforeUpdate:Gr,updated:Gr,beforeDestroy:Gr,beforeUnmount:Gr,destroyed:Gr,unmounted:Gr,activated:Gr,deactivated:Gr,errorCaptured:Gr,serverPrefetch:Gr,components:ml,directives:ml,watch:NW,provide:YC,inject:DW};function YC(e,t){return t?e?function(){return Zr(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function DW(e,t){return ml(tS(e),tS(t))}function tS(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Gr(e,t){return e?[...new Set([].concat(e,t))]:t}function ml(e,t){return e?Zr(Zr(Object.create(null),e),t):t}function NW(e,t){if(!e)return t;if(!t)return e;const r=Zr(Object.create(null),e);for(const n in t)r[n]=Gr(e[n],t[n]);return r}function FW(e,t,r,n=!1){const i={},o={};um(o,O1,1),e.propsDefaults=Object.create(null),Y8(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:Jj(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function BW(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=ce(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(k1(e.emitsOptions,h))continue;const d=t[h];if(l)if(ae(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=wo(h);i[p]=eS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{Y8(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!ae(t,f)&&((c=rf(f))===f||!ae(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=eS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!ae(t,f)&&!0)&&(delete o[f],u=!0)}u&&la(e,"set","$attrs")}function Y8(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Sg(l))continue;const u=t[l];let c;i&&ae(i,c=wo(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:k1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=ce(r),u=s||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=eS(i,l,f,u[f],e,!ae(u,f))}}return a}function eS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=ae(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(zc(i),n=u[r]=l.call(null,t),Rl())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===rf(r))&&(n=!0))}return n}function q8(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=q8(f,t,!0);Zr(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Pc),Pc;if(Ft(o))for(let c=0;c<o.length;c++){const f=wo(o[c]);qC(f)&&(a[f]=Le)}else if(o)for(const c in o){const f=wo(c);if(qC(f)){const h=o[c],d=a[f]=Ft(h)||Gt(h)?{type:h}:h;if(d){const p=JC(Boolean,d.type),v=JC(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||ae(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function qC(e){return e[0]!=="$"}function ZC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function KC(e,t){return ZC(e)===ZC(t)}function JC(e,t){return Ft(t)?t.findIndex(r=>KC(r,e)):Gt(t)&&KC(t,e)?0:-1}const Z8=e=>e[0]==="_"||e==="$stable",sP=e=>Ft(e)?e.map(uo):[uo(e)],zW=(e,t,r)=>{if(t._n)return t;const n=Ee((...i)=>sP(t(...i)),r);return n._c=!1,n},K8=(e,t,r)=>{const n=e._ctx;for(const i in e){if(Z8(i))continue;const o=e[i];if(Gt(o))t[i]=zW(i,o,n);else if(o!=null){const a=sP(o);t[i]=()=>a}}},J8=(e,t)=>{const r=sP(t);e.slots.default=()=>r},$W=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=ce(t),um(t,"_",r)):K8(t,e.slots={})}else e.slots={},t&&J8(e,t);um(e.slots,O1,1)},VW=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Le;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(Zr(i,t),!r&&s===1&&delete i._):(o=!t.$stable,K8(t,i)),a=t}else t&&(J8(e,t),a={default:1});if(o)for(const s in i)!Z8(s)&&!(s in a)&&delete i[s]};function Q8(){return{app:null,config:{isNativeTag:_j,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let UW=0;function GW(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!Qe(i)&&(i=null);const o=Q8(),a=new Set;let s=!1;const l=o.app={_uid:UW++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:sH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=Ct(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,R1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function rS(e,t,r,n,i=!1){if(Ft(e)){e.forEach((h,d)=>rS(h,t&&(Ft(t)?t[d]:t),r,n,i));return}if(od(n)&&!i)return;const o=n.shapeFlag&4?R1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Le?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(fr(u)?(c[u]=null,ae(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))ds(l,s,12,[a,c]);else{const h=fr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Ft(v)&&qT(v,o):Ft(v)?v.includes(o)||v.push(o):h?(c[l]=[o],ae(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,ae(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,on(p,r)):p()}}}const on=vW;function jW(e){return WW(e)}function WW(e,t){const r=Ej();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ei,cloneNode:p,insertStaticContent:v}=e,g=(z,G,X,J=null,Q=null,lt=null,vt=!1,at=null,it=!!G.dynamicChildren)=>{if(z===G)return;z&&!Uf(z,G)&&(J=pt(z),wt(z,Q,lt,!0),z=null),G.patchFlag===-2&&(it=!1,G.dynamicChildren=null);const{type:rt,ref:Rt,shapeFlag:kt}=G;switch(rt){case lP:m(z,G,X,J);break;case bs:y(z,G,X,J);break;case Cg:z==null&&_(G,X,J,vt);break;case W:B(z,G,X,J,Q,lt,vt,at,it);break;default:kt&1?S(z,G,X,J,Q,lt,vt,at,it):kt&6?$(z,G,X,J,Q,lt,vt,at,it):(kt&64||kt&128)&&rt.process(z,G,X,J,Q,lt,vt,at,it,At)}Rt!=null&&Q&&rS(Rt,z&&z.ref,lt,G||z,!G)},m=(z,G,X,J)=>{if(z==null)n(G.el=s(G.children),X,J);else{const Q=G.el=z.el;G.children!==z.children&&u(Q,G.children)}},y=(z,G,X,J)=>{z==null?n(G.el=l(G.children||""),X,J):G.el=z.el},_=(z,G,X,J)=>{[z.el,z.anchor]=v(z.children,G,X,J,z.el,z.anchor)},w=({el:z,anchor:G},X,J)=>{let Q;for(;z&&z!==G;)Q=h(z),n(z,X,J),z=Q;n(G,X,J)},T=({el:z,anchor:G})=>{let X;for(;z&&z!==G;)X=h(z),i(z),z=X;i(G)},S=(z,G,X,J,Q,lt,vt,at,it)=>{vt=vt||G.type==="svg",z==null?P(G,X,J,Q,lt,vt,at,it):M(z,G,Q,lt,vt,at,it)},P=(z,G,X,J,Q,lt,vt,at)=>{let it,rt;const{type:Rt,props:kt,shapeFlag:Dt,transition:zt,patchFlag:Kt,dirs:ge}=z;if(z.el&&p!==void 0&&Kt===-1)it=z.el=p(z.el);else{if(it=z.el=a(z.type,lt,kt&&kt.is,kt),Dt&8?c(it,z.children):Dt&16&&A(z.children,it,null,J,Q,lt&&Rt!=="foreignObject",vt,at),ge&&Vs(z,null,J,"created"),kt){for(const Te in kt)Te!=="value"&&!Sg(Te)&&o(it,Te,null,kt[Te],lt,z.children,J,Q,K);"value"in kt&&o(it,"value",null,kt.value),(rt=kt.onVnodeBeforeMount)&&Wi(rt,J,z)}C(it,z,z.scopeId,vt,J)}ge&&Vs(z,null,J,"beforeMount");const me=(!Q||Q&&!Q.pendingBranch)&&zt&&!zt.persisted;me&&zt.beforeEnter(it),n(it,G,X),((rt=kt&&kt.onVnodeMounted)||me||ge)&&on(()=>{rt&&Wi(rt,J,z),me&&zt.enter(it),ge&&Vs(z,null,J,"mounted")},Q)},C=(z,G,X,J,Q)=>{if(X&&d(z,X),J)for(let lt=0;lt<J.length;lt++)d(z,J[lt]);if(Q){let lt=Q.subTree;if(G===lt){const vt=Q.vnode;C(z,vt,vt.scopeId,vt.slotScopeIds,Q.parent)}}},A=(z,G,X,J,Q,lt,vt,at,it=0)=>{for(let rt=it;rt<z.length;rt++){const Rt=z[rt]=at?rs(z[rt]):uo(z[rt]);g(null,Rt,G,X,J,Q,lt,vt,at)}},M=(z,G,X,J,Q,lt,vt)=>{const at=G.el=z.el;let{patchFlag:it,dynamicChildren:rt,dirs:Rt}=G;it|=z.patchFlag&16;const kt=z.props||Le,Dt=G.props||Le;let zt;X&&Us(X,!1),(zt=Dt.onVnodeBeforeUpdate)&&Wi(zt,X,G,z),Rt&&Vs(G,z,X,"beforeUpdate"),X&&Us(X,!0);const Kt=Q&&G.type!=="foreignObject";if(rt?k(z.dynamicChildren,rt,at,X,J,Kt,lt):vt||tt(z,G,at,null,X,J,Kt,lt,!1),it>0){if(it&16)O(at,G,kt,Dt,X,J,Q);else if(it&2&&kt.class!==Dt.class&&o(at,"class",null,Dt.class,Q),it&4&&o(at,"style",kt.style,Dt.style,Q),it&8){const ge=G.dynamicProps;for(let me=0;me<ge.length;me++){const Te=ge[me],Pr=kt[Te],Ui=Dt[Te];(Ui!==Pr||Te==="value")&&o(at,Te,Pr,Ui,Q,z.children,X,J,K)}}it&1&&z.children!==G.children&&c(at,G.children)}else!vt&&rt==null&&O(at,G,kt,Dt,X,J,Q);((zt=Dt.onVnodeUpdated)||Rt)&&on(()=>{zt&&Wi(zt,X,G,z),Rt&&Vs(G,z,X,"updated")},J)},k=(z,G,X,J,Q,lt,vt)=>{for(let at=0;at<G.length;at++){const it=z[at],rt=G[at],Rt=it.el&&(it.type===W||!Uf(it,rt)||it.shapeFlag&70)?f(it.el):X;g(it,rt,Rt,null,J,Q,lt,vt,!0)}},O=(z,G,X,J,Q,lt,vt)=>{if(X!==J){for(const at in J){if(Sg(at))continue;const it=J[at],rt=X[at];it!==rt&&at!=="value"&&o(z,at,rt,it,vt,G.children,Q,lt,K)}if(X!==Le)for(const at in X)!Sg(at)&&!(at in J)&&o(z,at,X[at],null,vt,G.children,Q,lt,K);"value"in J&&o(z,"value",X.value,J.value)}},B=(z,G,X,J,Q,lt,vt,at,it)=>{const rt=G.el=z?z.el:s(""),Rt=G.anchor=z?z.anchor:s("");let{patchFlag:kt,dynamicChildren:Dt,slotScopeIds:zt}=G;zt&&(at=at?at.concat(zt):zt),z==null?(n(rt,X,J),n(Rt,X,J),A(G.children,X,Rt,Q,lt,vt,at,it)):kt>0&&kt&64&&Dt&&z.dynamicChildren?(k(z.dynamicChildren,Dt,X,Q,lt,vt,at),(G.key!=null||Q&&G===Q.subTree)&&t9(z,G,!0)):tt(z,G,X,Rt,Q,lt,vt,at,it)},$=(z,G,X,J,Q,lt,vt,at,it)=>{G.slotScopeIds=at,z==null?G.shapeFlag&512?Q.ctx.activate(G,X,J,vt,it):D(G,X,J,Q,lt,vt,it):j(z,G,it)},D=(z,G,X,J,Q,lt,vt)=>{const at=z.component=tH(z,J,Q);if(V8(z)&&(at.ctx.renderer=At),eH(at),at.asyncDep){if(Q&&Q.registerDep(at,Z),!z.el){const it=at.subTree=Ct(bs);y(null,it,G,X)}return}Z(at,z,G,X,Q,lt,vt)},j=(z,G,X)=>{const J=G.component=z.component;if(hW(z,G,X))if(J.asyncDep&&!J.asyncResolved){q(J,G,X);return}else J.next=G,aW(J.update),J.update();else G.el=z.el,J.vnode=G},Z=(z,G,X,J,Q,lt,vt)=>{const at=()=>{if(z.isMounted){let{next:Rt,bu:kt,u:Dt,parent:zt,vnode:Kt}=z,ge=Rt,me;Us(z,!1),Rt?(Rt.el=Kt.el,q(z,Rt,vt)):Rt=Kt,kt&&Tg(kt),(me=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&Wi(me,zt,Rt,Kt),Us(z,!0);const Te=l_(z),Pr=z.subTree;z.subTree=Te,g(Pr,Te,f(Pr.el),pt(Pr),z,Q,lt),Rt.el=Te.el,ge===null&&dW(z,Te.el),Dt&&on(Dt,Q),(me=Rt.props&&Rt.props.onVnodeUpdated)&&on(()=>Wi(me,zt,Rt,Kt),Q)}else{let Rt;const{el:kt,props:Dt}=G,{bm:zt,m:Kt,parent:ge}=z,me=od(G);if(Us(z,!1),zt&&Tg(zt),!me&&(Rt=Dt&&Dt.onVnodeBeforeMount)&&Wi(Rt,ge,G),Us(z,!0),kt&&ft){const Te=()=>{z.subTree=l_(z),ft(kt,z.subTree,z,Q,null)};me?G.type.__asyncLoader().then(()=>!z.isUnmounted&&Te()):Te()}else{const Te=z.subTree=l_(z);g(null,Te,X,J,z,Q,lt),G.el=Te.el}if(Kt&&on(Kt,Q),!me&&(Rt=Dt&&Dt.onVnodeMounted)){const Te=G;on(()=>Wi(Rt,ge,Te),Q)}(G.shapeFlag&256||ge&&od(ge.vnode)&&ge.vnode.shapeFlag&256)&&z.a&&on(z.a,Q),z.isMounted=!0,G=X=J=null}},it=z.effect=new JT(at,()=>R8(rt),z.scope),rt=z.update=()=>it.run();rt.id=z.uid,Us(z,!0),rt()},q=(z,G,X)=>{G.component=z;const J=z.vnode.props;z.vnode=G,z.next=null,BW(z,G.props,J,X),VW(z,G.children,X),nf(),M1(void 0,z.update),of()},tt=(z,G,X,J,Q,lt,vt,at,it=!1)=>{const rt=z&&z.children,Rt=z?z.shapeFlag:0,kt=G.children,{patchFlag:Dt,shapeFlag:zt}=G;if(Dt>0){if(Dt&128){Ot(rt,kt,X,J,Q,lt,vt,at,it);return}else if(Dt&256){Tt(rt,kt,X,J,Q,lt,vt,at,it);return}}zt&8?(Rt&16&&K(rt,Q,lt),kt!==rt&&c(X,kt)):Rt&16?zt&16?Ot(rt,kt,X,J,Q,lt,vt,at,it):K(rt,Q,lt,!0):(Rt&8&&c(X,""),zt&16&&A(kt,X,J,Q,lt,vt,at,it))},Tt=(z,G,X,J,Q,lt,vt,at,it)=>{z=z||Pc,G=G||Pc;const rt=z.length,Rt=G.length,kt=Math.min(rt,Rt);let Dt;for(Dt=0;Dt<kt;Dt++){const zt=G[Dt]=it?rs(G[Dt]):uo(G[Dt]);g(z[Dt],zt,X,null,Q,lt,vt,at,it)}rt>Rt?K(z,Q,lt,!0,!1,kt):A(G,X,J,Q,lt,vt,at,it,kt)},Ot=(z,G,X,J,Q,lt,vt,at,it)=>{let rt=0;const Rt=G.length;let kt=z.length-1,Dt=Rt-1;for(;rt<=kt&&rt<=Dt;){const zt=z[rt],Kt=G[rt]=it?rs(G[rt]):uo(G[rt]);if(Uf(zt,Kt))g(zt,Kt,X,null,Q,lt,vt,at,it);else break;rt++}for(;rt<=kt&&rt<=Dt;){const zt=z[kt],Kt=G[Dt]=it?rs(G[Dt]):uo(G[Dt]);if(Uf(zt,Kt))g(zt,Kt,X,null,Q,lt,vt,at,it);else break;kt--,Dt--}if(rt>kt){if(rt<=Dt){const zt=Dt+1,Kt=zt<Rt?G[zt].el:J;for(;rt<=Dt;)g(null,G[rt]=it?rs(G[rt]):uo(G[rt]),X,Kt,Q,lt,vt,at,it),rt++}}else if(rt>Dt)for(;rt<=kt;)wt(z[rt],Q,lt,!0),rt++;else{const zt=rt,Kt=rt,ge=new Map;for(rt=Kt;rt<=Dt;rt++){const Vr=G[rt]=it?rs(G[rt]):uo(G[rt]);Vr.key!=null&&ge.set(Vr.key,rt)}let me,Te=0;const Pr=Dt-Kt+1;let Ui=!1,ip=0;const Bs=new Array(Pr);for(rt=0;rt<Pr;rt++)Bs[rt]=0;for(rt=zt;rt<=kt;rt++){const Vr=z[rt];if(Te>=Pr){wt(Vr,Q,lt,!0);continue}let In;if(Vr.key!=null)In=ge.get(Vr.key);else for(me=Kt;me<=Dt;me++)if(Bs[me-Kt]===0&&Uf(Vr,G[me])){In=me;break}In===void 0?wt(Vr,Q,lt,!0):(Bs[In-Kt]=rt+1,In>=ip?ip=In:Ui=!0,g(Vr,G[In],X,null,Q,lt,vt,at,it),Te++)}const op=Ui?HW(Bs):Pc;for(me=op.length-1,rt=Pr-1;rt>=0;rt--){const Vr=Kt+rt,In=G[Vr],zs=Vr+1<Rt?G[Vr+1].el:J;Bs[rt]===0?g(null,In,X,zs,Q,lt,vt,at,it):Ui&&(me<0||rt!==op[me]?bt(In,X,zs,2):me--)}}},bt=(z,G,X,J,Q=null)=>{const{el:lt,type:vt,transition:at,children:it,shapeFlag:rt}=z;if(rt&6){bt(z.component.subTree,G,X,J);return}if(rt&128){z.suspense.move(G,X,J);return}if(rt&64){vt.move(z,G,X,At);return}if(vt===W){n(lt,G,X);for(let kt=0;kt<it.length;kt++)bt(it[kt],G,X,J);n(z.anchor,G,X);return}if(vt===Cg){w(z,G,X);return}if(J!==2&&rt&1&&at)if(J===0)at.beforeEnter(lt),n(lt,G,X),on(()=>at.enter(lt),Q);else{const{leave:kt,delayLeave:Dt,afterLeave:zt}=at,Kt=()=>n(lt,G,X),ge=()=>{kt(lt,()=>{Kt(),zt&&zt()})};Dt?Dt(lt,Kt,ge):ge()}else n(lt,G,X)},wt=(z,G,X,J=!1,Q=!1)=>{const{type:lt,props:vt,ref:at,children:it,dynamicChildren:rt,shapeFlag:Rt,patchFlag:kt,dirs:Dt}=z;if(at!=null&&rS(at,null,X,z,!0),Rt&256){G.ctx.deactivate(z);return}const zt=Rt&1&&Dt,Kt=!od(z);let ge;if(Kt&&(ge=vt&&vt.onVnodeBeforeUnmount)&&Wi(ge,G,z),Rt&6)nt(z.component,X,J);else{if(Rt&128){z.suspense.unmount(X,J);return}zt&&Vs(z,null,G,"beforeUnmount"),Rt&64?z.type.remove(z,G,X,Q,At,J):rt&&(lt!==W||kt>0&&kt&64)?K(rt,G,X,!1,!0):(lt===W&&kt&384||!Q&&Rt&16)&&K(it,G,X),J&&Ht(z)}(Kt&&(ge=vt&&vt.onVnodeUnmounted)||zt)&&on(()=>{ge&&Wi(ge,G,z),zt&&Vs(z,null,G,"unmounted")},X)},Ht=z=>{const{type:G,el:X,anchor:J,transition:Q}=z;if(G===W){Y(X,J);return}if(G===Cg){T(z);return}const lt=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(z.shapeFlag&1&&Q&&!Q.persisted){const{leave:vt,delayLeave:at}=Q,it=()=>vt(X,lt);at?at(z.el,lt,it):it()}else lt()},Y=(z,G)=>{let X;for(;z!==G;)X=h(z),i(z),z=X;i(G)},nt=(z,G,X)=>{const{bum:J,scope:Q,update:lt,subTree:vt,um:at}=z;J&&Tg(J),Q.stop(),lt&&(lt.active=!1,wt(vt,z,G,X)),at&&on(at,G),on(()=>{z.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},K=(z,G,X,J=!1,Q=!1,lt=0)=>{for(let vt=lt;vt<z.length;vt++)wt(z[vt],G,X,J,Q)},pt=z=>z.shapeFlag&6?pt(z.component.subTree):z.shapeFlag&128?z.suspense.next():h(z.anchor||z.el),St=(z,G,X)=>{z==null?G._vnode&&wt(G._vnode,null,null,!0):g(G._vnode||null,z,G,null,null,null,X),F8(),G._vnode=z},At={p:g,um:wt,m:bt,r:Ht,mt:D,mc:A,pc:tt,pbc:k,n:pt,o:e};let st,ft;return t&&([st,ft]=t(At)),{render:St,hydrate:st,createApp:GW(St,st)}}function Us({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function t9(e,t,r=!1){const n=e.children,i=t.children;if(Ft(n)&&Ft(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=rs(i[o]),s.el=a.el),r||t9(a,s))}}function HW(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const XW=e=>e.__isTeleport,W=Symbol(void 0),lP=Symbol(void 0),bs=Symbol(void 0),Cg=Symbol(void 0),ad=[];let _i=null;function R(e=!1){ad.push(_i=e?null:[])}function YW(){ad.pop(),_i=ad[ad.length-1]||null}let Bd=1;function QC(e){Bd+=e}function e9(e){return e.dynamicChildren=Bd>0?_i||Pc:null,YW(),Bd>0&&_i&&_i.push(e),e}function N(e,t,r,n,i,o){return e9(b(e,t,r,n,i,o,!0))}function ws(e,t,r,n,i){return e9(Ct(e,t,r,n,i,!0))}function vm(e){return e?e.__v_isVNode===!0:!1}function Uf(e,t){return e.type===t.type&&e.key===t.key}const O1="__vInternal",r9=({key:e})=>e!=null?e:null,Mg=({ref:e,ref_key:t,ref_for:r})=>e!=null?fr(e)||He(e)||Gt(e)?{i:Rr,r:e,k:t,f:!!r}:e:null;function b(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&r9(t),ref:t&&Mg(t),scopeId:x1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(cP(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=fr(r)?8:16),Bd>0&&!a&&_i&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&_i.push(l),l}const Ct=qW;function qW(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===MW)&&(e=bs),vm(e)){const s=Bc(e,t,!0);return r&&cP(s,r),Bd>0&&!o&&_i&&(s.shapeFlag&6?_i[_i.indexOf(e)]=s:_i.push(s)),s.patchFlag|=-2,s}if(aH(e)&&(e=e.__vccOpts),t){t=ZW(t);let{class:s,style:l}=t;s&&!fr(s)&&(t.class=Yr(s)),Qe(l)&&(M8(l)&&!Ft(l)&&(l=Zr({},l)),t.style=Il(l))}const a=fr(e)?1:pW(e)?128:XW(e)?64:Qe(e)?4:Gt(e)?2:0;return b(e,t,r,n,i,a,o,!0)}function ZW(e){return e?M8(e)||O1 in e?Zr({},e):e:null}function Bc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?KW(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&r9(s),ref:t&&t.ref?r&&i?Ft(i)?i.concat(Mg(t)):[i,Mg(t)]:Mg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Bc(e.ssContent),ssFallback:e.ssFallback&&Bc(e.ssFallback),el:e.el,anchor:e.anchor}}function U(e=" ",t=0){return Ct(lP,null,e,t)}function uP(e,t){const r=Ct(Cg,null,e);return r.staticCount=t,r}function ut(e="",t=!1){return t?(R(),ws(bs,null,e)):Ct(bs,null,e)}function uo(e){return e==null||typeof e=="boolean"?Ct(bs):Ft(e)?Ct(W,null,e.slice()):typeof e=="object"?rs(e):Ct(lP,null,String(e))}function rs(e){return e.el===null||e.memo?e:Bc(e)}function cP(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ft(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),cP(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(O1 in t)?t._ctx=Rr:i===3&&Rr&&(Rr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Rr},r=32):(t=String(t),n&64?(r=16,t=[U(t)]):r=8);e.children=t,e.shapeFlag|=r}function KW(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Yr([t.class,n.class]));else if(i==="style")t.style=Il([t.style,n.style]);else if(S1(i)){const o=t[i],a=n[i];a&&o!==a&&!(Ft(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Wi(e,t,r,n=null){Ai(e,t,7,[r,n])}const JW=Q8();let QW=0;function tH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||JW,o={uid:QW++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new v8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:q8(n,i),emitsOptions:z8(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=uW.bind(null,o),e.ce&&e.ce(o),o}let cr=null;const fP=()=>cr||Rr,zc=e=>{cr=e,e.scope.on()},Rl=()=>{cr&&cr.scope.off(),cr=null};function n9(e){return e.vnode.shapeFlag&4}let zd=!1;function eH(e,t=!1){zd=t;const{props:r,children:n}=e.vnode,i=n9(e);FW(e,r,i,t),$W(e,n);const o=i?rH(e,t):void 0;return zd=!1,o}function rH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=gi(new Proxy(e.ctx,LW));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?iH(e):null;zc(e),nf();const o=ds(n,e,0,[e.props,i]);if(of(),Rl(),h8(o)){if(o.then(Rl,Rl),t)return o.then(a=>{tM(e,a,t)}).catch(a=>{C1(a,e,0)});e.asyncDep=o}else tM(e,o,t)}else i9(e,t)}function tM(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=I8(t)),i9(e,r)}let eM;function i9(e,t,r){const n=e.type;if(!e.render){if(!t&&eM&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Zr(Zr({isCustomElement:o,delimiters:s},a),l);n.render=eM(i,u)}}e.render=n.render||Ei}zc(e),nf(),IW(e),of(),Rl()}function nH(e){return new Proxy(e.attrs,{get(t,r){return An(e,"get","$attrs"),t[r]}})}function iH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=nH(e))},slots:e.slots,emit:e.emit,expose:t}}function R1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(I8(gi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in dm)return dm[r](e)}}))}function oH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function aH(e){return Gt(e)&&"__vccOpts"in e}const Ye=(e,t)=>nW(e,t,zd);function hP(e,t,r){const n=arguments.length;return n===2?Qe(t)&&!Ft(t)?vm(t)?Ct(e,null,[t]):Ct(e,t):Ct(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&vm(r)&&(r=[r]),Ct(e,t,r))}const sH="3.2.37",lH="http://www.w3.org/2000/svg",Sl=typeof document<"u"?document:null,rM=Sl&&Sl.createElement("template"),uH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Sl.createElementNS(lH,e):Sl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Sl.createTextNode(e),createComment:e=>Sl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Sl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{rM.innerHTML=n?`<svg>${e}</svg>`:e;const s=rM.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function cH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function fH(e,t,r){const n=e.style,i=fr(r);if(r&&!i){for(const o in r)nS(n,o,r[o]);if(t&&!fr(t))for(const o in t)r[o]==null&&nS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const nM=/\s*!important$/;function nS(e,t,r){if(Ft(r))r.forEach(n=>nS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=hH(e,t);nM.test(r)?e.setProperty(rf(n),r.replace(nM,""),"important"):e[n]=r}}const iM=["Webkit","Moz","ms"],u_={};function hH(e,t){const r=u_[t];if(r)return r;let n=wo(t);if(n!=="filter"&&n in e)return u_[t]=n;n=P1(n);for(let i=0;i<iM.length;i++){const o=iM[i]+n;if(o in e)return u_[t]=o}return t}const oM="http://www.w3.org/1999/xlink";function dH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(oM,t.slice(6,t.length)):e.setAttributeNS(oM,t,r);else{const o=pj(t);r==null||o&&!c8(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function pH(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=c8(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[o9,vH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let iS=0;const gH=Promise.resolve(),mH=()=>{iS=0},yH=()=>iS||(gH.then(mH),iS=o9());function Qo(e,t,r,n){e.addEventListener(t,r,n)}function _H(e,t,r,n){e.removeEventListener(t,r,n)}function bH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=wH(t);if(n){const u=o[t]=SH(n,i);Qo(e,s,u,l)}else a&&(_H(e,s,a,l),o[t]=void 0)}}const aM=/(?:Once|Passive|Capture)$/;function wH(e){let t;if(aM.test(e)){t={};let r;for(;r=e.match(aM);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[rf(e.slice(2)),t]}function SH(e,t){const r=n=>{const i=n.timeStamp||o9();(vH||i>=r.attached-1)&&Ai(TH(n,r.value),t,5,[n])};return r.value=e,r.attached=yH(),r}function TH(e,t){if(Ft(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const sM=/^on[a-z]/,PH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?cH(e,n,i):t==="style"?fH(e,r,n):S1(t)?YT(t)||bH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):EH(e,t,n,i))?pH(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),dH(e,t,n,i))};function EH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&sM.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||sM.test(t)&&fr(r)?!1:t in e}const Ss=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ft(t)?r=>Tg(t,r):t};function AH(e){e.target.composing=!0}function lM(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pe={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Ss(i);const o=n||i.props&&i.props.type==="number";Qo(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=cm(s)),e._assign(s)}),r&&Qo(e,"change",()=>{e.value=e.value.trim()}),t||(Qo(e,"compositionstart",AH),Qo(e,"compositionend",lM),Qo(e,"change",lM))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Ss(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&cm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Cn={deep:!0,created(e,t,r){e._assign=Ss(r),Qo(e,"change",()=>{const n=e._modelValue,i=$c(e),o=e.checked,a=e._assign;if(Ft(n)){const s=XT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(ef(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(a9(e,o))})},mounted:uM,beforeUpdate(e,t,r){e._assign=Ss(r),uM(e,t,r)}};function uM(e,{value:t,oldValue:r},n){e._modelValue=t,Ft(t)?e.checked=XT(t,n.props.value)>-1:ef(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=jl(t,a9(e,!0)))}const sd={created(e,{value:t},r){e.checked=jl(t,r.props.value),e._assign=Ss(r),Qo(e,"change",()=>{e._assign($c(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Ss(n),t!==r&&(e.checked=jl(t,n.props.value))}},ln={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=ef(t);Qo(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?cm($c(a)):$c(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Ss(n)},mounted(e,{value:t}){cM(e,t)},beforeUpdate(e,t,r){e._assign=Ss(r)},updated(e,{value:t}){cM(e,t)}};function cM(e,t){const r=e.multiple;if(!(r&&!Ft(t)&&!ef(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=$c(o);if(r)Ft(t)?o.selected=XT(t,a)>-1:o.selected=t.has(a);else if(jl($c(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function $c(e){return"_value"in e?e._value:e.value}function a9(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const CH=["ctrl","shift","alt","meta"],MH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>CH.some(r=>e[`${r}Key`]&&!t.includes(r))},gm=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=MH[t[i]];if(o&&o(r,t))return}return e(r,...n)},kH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Gf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Gf(e,!0),n.enter(e)):n.leave(e,()=>{Gf(e,!1)}):Gf(e,t))},beforeUnmount(e,{value:t}){Gf(e,t)}};function Gf(e,t){e.style.display=t?e._vod:"none"}const xH=Zr({patchProp:PH},uH);let fM;function LH(){return fM||(fM=jW(xH))}const IH=(...e)=>{const t=LH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=OH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function OH(e){return fr(e)?document.querySelector(e):e}var RH=!1;function mp(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function c_(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function DH(){return s9().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s9(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const NH=typeof Proxy=="function",FH="devtools-plugin:setup",BH="plugin:settings:set";let Eu,oS;function zH(){var e;return Eu!==void 0||(typeof window<"u"&&window.performance?(Eu=!0,oS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Eu=!0,oS=global.perf_hooks.performance):Eu=!1),Eu}function $H(){return zH()?oS.now():Date.now()}class VH{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return $H()}},r&&r.on(BH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function l9(e,t){const r=e,n=s9(),i=DH(),o=NH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(FH,e,t);else{const a=o?new VH(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let aS;const $d=e=>aS=e,u9=Symbol("pinia");function Wl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var yo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(yo||(yo={}));const is=typeof window<"u",hM=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function UH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function dP(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){h9(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function c9(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function kg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const xg=typeof navigator=="object"?navigator:{userAgent:""},f9=(()=>/Macintosh/.test(xg.userAgent)&&/AppleWebKit/.test(xg.userAgent)&&!/Safari/.test(xg.userAgent))(),h9=is?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!f9?GH:"msSaveOrOpenBlob"in xg?jH:WH:()=>{};function GH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?c9(n.href)?dP(e,t,r):(n.target="_blank",kg(n)):kg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){kg(n)},0))}function jH(e,t="download",r){if(typeof e=="string")if(c9(e))dP(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){kg(n)})}else navigator.msSaveOrOpenBlob(UH(e,r),t)}function WH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return dP(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(hM.HTMLElement))||"safari"in hM,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||f9)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function lr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function pP(e){return"_a"in e&&"install"in e}function d9(){if(!("clipboard"in navigator))return lr("Your browser doesn't support the Clipboard API","error"),!0}function p9(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(lr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function HH(e){if(!d9())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),lr("Global state copied to clipboard.")}catch(t){if(p9(t))return;lr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function XH(e){if(!d9())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),lr("Global state pasted from clipboard.")}catch(t){if(p9(t))return;lr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function YH(e){try{h9(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Fo;function qH(){Fo||(Fo=document.createElement("input"),Fo.type="file",Fo.accept=".json");function e(){return new Promise((t,r)=>{Fo.onchange=async()=>{const n=Fo.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Fo.oncancel=()=>t(null),Fo.onerror=r,Fo.click()})}return e}async function ZH(e){try{const r=await(await qH())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),lr(`Global state imported from "${i.name}".`)}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function hi(e){return{_custom:{display:e}}}const v9="\u{1F34D} Pinia (root)",sS="_root";function KH(e){return pP(e)?{id:sS,label:v9}:{id:e.$id,label:e.$id}}function JH(e){if(pP(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function QH(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:hi(e.type),key:hi(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function tX(e){switch(e){case yo.direct:return"mutation";case yo.patchFunction:return"$patch";case yo.patchObject:return"$patch";default:return"unknown"}}let hc=!0;const Lg=[],yl="pinia:mutations",Mr="pinia",mm=e=>"\u{1F34D} "+e;function eX(e,t){l9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Lg,app:e},r=>{typeof r.now!="function"&&lr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:yl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Mr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{HH(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await XH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{YH(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await ZH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),lr(`Store "${n}" reset.`)):lr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):lr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:mm(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:ce(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:mm(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Mr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):v9.toLowerCase().includes(n.filter.toLowerCase())):i).map(KH)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Mr){const i=n.nodeId===sS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=JH(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Mr){const o=n.nodeId===sS?t:t._s.get(n.nodeId);if(!o)return lr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;pP(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),hc=!1,n.set(o,a,n.state.value),hc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return lr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return lr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",hc=!1,n.set(o,a,n.state.value),hc=!0}})})}function rX(e,t){Lg.includes(mm(t.$id))||Lg.push(mm(t.$id)),l9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Lg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=g9++;r.addTimelineEvent({layerId:yl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:hi(t.$id),action:hi(l),args:u},groupId:c}}),a(f=>{Tl=void 0,r.addTimelineEvent({layerId:yl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:hi(t.$id),action:hi(l),args:u,result:f},groupId:c}})}),s(f=>{Tl=void 0,r.addTimelineEvent({layerId:yl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:hi(t.$id),action:hi(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{po(()=>mr(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Mr),hc&&r.addTimelineEvent({layerId:yl,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Tl}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Mr),!hc)return;const u={time:n(),title:tX(s),data:{store:hi(t.$id),...QH(a)},groupId:Tl};Tl=void 0,s===yo.patchFunction?u.subtitle="\u2935\uFE0F":s===yo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:yl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=gi(a=>{i(a),r.addTimelineEvent({layerId:yl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:hi(t.$id),info:hi("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`"${t.$id}" store installed \u{1F195}`)})}let g9=0,Tl;function dM(e,t){const r=t.reduce((n,i)=>(n[i]=ce(e)[i],n),{});for(const n in r)e[n]=function(){const i=g9,o=new Proxy(e,{get(...a){return Tl=i,Reflect.get(...a)},set(...a){return Tl=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function nX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){dM(t,Object.keys(r.actions));const n=t._hotUpdate;ce(t)._hotUpdate=function(i){n.apply(this,arguments),dM(t,Object.keys(i._hmrPayload.actions))}}rX(e,t)}}function iX(){const e=g8(!0),t=e.run(()=>A1({}));let r=[],n=[];const i=gi({install(o){$d(i),i._a=o,o.provide(u9,i),o.config.globalProperties.$pinia=i,is&&eX(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!RH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return is&&!0&&typeof Proxy<"u"&&i.use(nX),i}function m9(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];Wl(i)&&Wl(n)&&!He(n)&&!ia(n)?e[r]=m9(i,n):e[r]=n}return e}const oX=()=>{};function pM(e,t,r,n=oX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&fP()&&I1(i),i}function Au(e,...t){e.slice().forEach(r=>{r(...t)})}function lS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];Wl(i)&&Wl(n)&&e.hasOwnProperty(r)&&!He(n)&&!ia(n)?e[r]=lS(i,n):e[r]=n}return e}const aX=Symbol("pinia:skipHydration");function sX(e){return!Wl(e)||!e.hasOwnProperty(aX)}const{assign:vi}=Object;function vM(e){return!!(He(e)&&e.effect)}function gM(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=qw(n?A1(i?i():{}).value:r.state.value[e]);return vi(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=gi(Ye(()=>{$d(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=uS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{vi(h,f)})},l}function uS(e,t,r={},n,i,o){let a;const s=vi({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!P._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=gi([]),h=gi([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=A1({});let g;function m(A){let M;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),M={type:yo.patchFunction,storeId:e,events:d}):(lS(n.state.value[e],A),M={type:yo.patchObject,payload:A,storeId:e,events:d});const k=g=Symbol();Nd().then(()=>{g===k&&(u=!0)}),c=!0,Au(f,M,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function _(){a.stop(),f=[],h=[],n._s.delete(e)}function w(A,M){return function(){$d(n);const k=Array.from(arguments),O=[],B=[];function $(Z){O.push(Z)}function D(Z){B.push(Z)}Au(h,{args:k,name:A,store:P,after:$,onError:D});let j;try{j=M.apply(this&&this.$id===e?this:P,k)}catch(Z){throw Au(B,Z),Z}return j instanceof Promise?j.then(Z=>(Au(O,Z),Z)).catch(Z=>(Au(B,Z),Promise.reject(Z))):(Au(O,j),j)}}const T=gi({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:pM.bind(null,h),$patch:m,$reset:y,$subscribe(A,M={}){const k=pM(f,A,M.detached,()=>O()),O=a.run(()=>po(()=>n.state.value[e],B=>{(M.flush==="sync"?c:u)&&A({storeId:e,type:yo.direct,events:d},B)},vi({},l,M)));return k},$dispose:_},P=af(vi(is?{_customProperties:gi(new Set),_hmrPayload:T}:{},S));n._s.set(e,P);const C=n._e.run(()=>(a=g8(),a.run(()=>t())));for(const A in C){const M=C[A];if(He(M)&&!vM(M)||ia(M))i?mp(v.value,A,Eg(C,A)):o||(p&&sX(M)&&(He(M)?M.value=p[A]:lS(M,p[A])),n.state.value[e][A]=M),T.state.push(A);else if(typeof M=="function"){const k=i?M:w(A,M);C[A]=k,T.actions[A]=M,s.actions[A]=M}else vM(M)&&(T.getters[A]=o?r.getters[A]:M,is&&(C._getters||(C._getters=gi([]))).push(A))}vi(P,C),vi(ce(P),C),Object.defineProperty(P,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");m(M=>{vi(M,A)})}});{P._hotUpdate=gi(M=>{P._hotUpdating=!0,M._hmrPayload.state.forEach(k=>{if(k in P.$state){const O=M.$state[k],B=P.$state[k];typeof O=="object"&&Wl(O)&&Wl(B)?m9(O,B):M.$state[k]=B}mp(P,k,Eg(M.$state,k))}),Object.keys(P.$state).forEach(k=>{k in M.$state||c_(P,k)}),u=!1,c=!1,n.state.value[e]=Eg(M._hmrPayload,"hotState"),c=!0,Nd().then(()=>{u=!0});for(const k in M._hmrPayload.actions){const O=M[k];mp(P,k,w(k,O))}for(const k in M._hmrPayload.getters){const O=M._hmrPayload.getters[k],B=o?Ye(()=>($d(n),O.call(P,P))):O;mp(P,k,B)}Object.keys(P._hmrPayload.getters).forEach(k=>{k in M._hmrPayload.getters||c_(P,k)}),Object.keys(P._hmrPayload.actions).forEach(k=>{k in M._hmrPayload.actions||c_(P,k)}),P._hmrPayload=M._hmrPayload,P._getters=M._getters,P._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};is&&["_p","_hmrPayload","_getters","_customProperties"].forEach(M=>{Object.defineProperty(P,M,{value:P[M],...A})})}return n._p.forEach(A=>{if(is){const M=a.run(()=>A({store:P,app:n._a,pinia:n,options:s}));Object.keys(M||{}).forEach(k=>P._customProperties.add(k)),vi(P,M)}else vi(P,a.run(()=>A({store:P,app:n._a,pinia:n,options:s})))}),P.$state&&typeof P.$state=="object"&&typeof P.$state.constructor=="function"&&!P.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${P.$id}".`),p&&o&&r.hydrate&&r.hydrate(P.$state,p),u=!0,c=!0,P}function T0(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=fP();if(s=s||u&&Tn(u9),s&&$d(s),!aS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=aS,s._s.has(n)||(o?uS(n,t,i,s):gM(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?uS(f,t,i,s,!0):gM(f,vi({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(is&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const sc=typeof window<"u";function lX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ce=Object.assign;function f_(e,t){const r={};for(const n in t){const i=t[n];r[n]=xi(i)?i.map(e):e(i)}return r}const ld=()=>{},xi=Array.isArray,uX=/\/$/,cX=e=>e.replace(uX,"");function h_(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=pX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function fX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function mM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function hX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Vc(t.matched[n],r.matched[i])&&y9(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Vc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function y9(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!dX(e[r],t[r]))return!1;return!0}function dX(e,t){return xi(e)?yM(e,t):xi(t)?yM(t,e):e===t}function yM(e,t){return xi(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function pX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Vd;(function(e){e.pop="pop",e.push="push"})(Vd||(Vd={}));var ud;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ud||(ud={}));function vX(e){if(!e)if(sc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cX(e)}const gX=/^[^#]+#/;function mX(e,t){return e.replace(gX,"#")+t}function yX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const D1=()=>({left:window.pageXOffset,top:window.pageYOffset});function _X(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=yX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function _M(e,t){return(history.state?history.state.position-t:-1)+e}const cS=new Map;function bX(e,t){cS.set(e,t)}function wX(e){const t=cS.get(e);return cS.delete(e),t}let SX=()=>location.protocol+"//"+location.host;function _9(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),mM(l,"")}return mM(r,e)+n+i}function TX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=_9(e,location),p=r.value,v=t.value;let g=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:g,type:Vd.pop,direction:g?g>0?ud.forward:ud.back:ud.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ce({},h.state,{scroll:D1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function bM(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?D1():null}}function PX(e){const{history:t,location:r}=window,n={value:_9(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:SX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ce({},t.state,bM(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ce({},i.value,t.state,{forward:l,scroll:D1()});o(c.current,c,!0);const f=Ce({},bM(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function EX(e){e=vX(e);const t=PX(e),r=TX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ce({location:"",base:e,go:n,createHref:mX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function AX(e){return typeof e=="string"||e&&typeof e=="object"}function b9(e){return typeof e=="string"||typeof e=="symbol"}const Ma={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},w9=Symbol("");var wM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wM||(wM={}));function Uc(e,t){return Ce(new Error,{type:e,[w9]:!0},t)}function Bo(e,t){return e instanceof Error&&w9 in e&&(t==null||!!(e.type&t))}const SM="[^/]+?",CX={sensitive:!1,strict:!1,start:!0,end:!0},MX=/[.+*?^${}()[\]/\\]/g;function kX(e,t){const r=Ce({},CX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(MX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;o.push({name:p,repeatable:v,optional:g});const y=m||SM;if(y!==SM){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let _=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),i+=_,d+=20,g&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(xi(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=xi(m)?m.join("/"):m;if(!y)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function xX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function LX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=xX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(TM(n))return 1;if(TM(i))return-1}return i.length-n.length}function TM(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const IX={type:0,value:""},OX=/[a-zA-Z0-9_]/;function RX(e){if(!e)return[[]];if(e==="/")return[[IX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:OX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function DX(e,t,r){const n=kX(RX(e.path),r),i=Ce(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function NX(e,t){const r=[],n=new Map;t=EM({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=BX(c);p.aliasOf=h&&h.record;const v=EM(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of _)g.push(Ce({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let m,y;for(const _ of g){const{path:w}=_;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";_.path=f.record.path+(w&&S+w)}if(m=DX(_,f,v),h?h.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),d&&c.name&&!PM(m)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],m,h&&h.children[S])}h=h||m,l(m)}return y?()=>{a(y)}:ld}function a(c){if(b9(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&LX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!S9(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!PM(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Uc(1,{location:c});v=h.record.name,d=Ce(FX(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw Uc(1,{location:c,currentLocation:f});v=h.record.name,d=Ce({},f.params,c.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:$X(g)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function FX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function BX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:zX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function zX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function PM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function $X(e){return e.reduce((t,r)=>Ce(t,r.meta),{})}function EM(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function S9(e,t){return t.children.some(r=>r===e||S9(e,r))}const T9=/#/g,VX=/&/g,UX=/\//g,GX=/=/g,jX=/\?/g,P9=/\+/g,WX=/%5B/g,HX=/%5D/g,E9=/%5E/g,XX=/%60/g,A9=/%7B/g,YX=/%7C/g,C9=/%7D/g,qX=/%20/g;function vP(e){return encodeURI(""+e).replace(YX,"|").replace(WX,"[").replace(HX,"]")}function ZX(e){return vP(e).replace(A9,"{").replace(C9,"}").replace(E9,"^")}function fS(e){return vP(e).replace(P9,"%2B").replace(qX,"+").replace(T9,"%23").replace(VX,"%26").replace(XX,"`").replace(A9,"{").replace(C9,"}").replace(E9,"^")}function KX(e){return fS(e).replace(GX,"%3D")}function JX(e){return vP(e).replace(T9,"%23").replace(jX,"%3F")}function QX(e){return e==null?"":JX(e).replace(UX,"%2F")}function ym(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function tY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(P9," "),a=o.indexOf("="),s=ym(a<0?o:o.slice(0,a)),l=a<0?null:ym(o.slice(a+1));if(s in t){let u=t[s];xi(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function AM(e){let t="";for(let r in e){const n=e[r];if(r=KX(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(xi(n)?n.map(o=>o&&fS(o)):[n&&fS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function eY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=xi(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const rY=Symbol(""),CM=Symbol(""),gP=Symbol(""),M9=Symbol(""),hS=Symbol("");function jf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function ns(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Uc(4,{from:r,to:t})):f instanceof Error?s(f):AX(f)?s(Uc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function d_(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(nY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(ns(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=lX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&ns(h,r,n,o,a)()}))}}return i}function nY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function MM(e){const t=Tn(gP),r=Tn(M9),n=Ye(()=>t.resolve(mr(e.to))),i=Ye(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(Vc.bind(null,c));if(h>-1)return h;const d=kM(l[u-2]);return u>1&&kM(c)===d&&f[f.length-1].path!==d?f.findIndex(Vc.bind(null,l[u-2])):h}),o=Ye(()=>i.value>-1&&aY(r.params,n.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&y9(r.params,n.value.params));function s(l={}){return oY(l)?t[mr(e.replace)?"replace":"push"](mr(e.to)).catch(ld):Promise.resolve()}return{route:n,href:Ye(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const iY=aP({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:MM,setup(e,{slots:t}){const r=af(MM(e)),{options:n}=Tn(gP),i=Ye(()=>({[xM(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[xM(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:hP("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),lc=iY;function oY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function aY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!xi(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function kM(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const xM=(e,t,r)=>e!=null?e:t!=null?t:r,sY=aP({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Tn(hS),i=Ye(()=>e.route||n.value),o=Tn(CM,0),a=Ye(()=>{let u=mr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ye(()=>i.value.matched[a.value]);Ag(CM,Ye(()=>a.value+1)),Ag(rY,s),Ag(hS,i);const l=A1();return po(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Vc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return LM(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=hP(h,Ce({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return LM(r.default,{Component:g,route:u})||g}}});function LM(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const k9=sY;function lY(e){const t=NX(e.routes,e),r=e.parseQuery||tY,n=e.stringifyQuery||AM,i=e.history,o=jf(),a=jf(),s=jf(),l=Pg(Ma);let u=Ma;sc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=f_.bind(null,Y=>""+Y),f=f_.bind(null,QX),h=f_.bind(null,ym);function d(Y,nt){let K,pt;return b9(Y)?(K=t.getRecordMatcher(Y),pt=nt):pt=Y,t.addRoute(pt,K)}function p(Y){const nt=t.getRecordMatcher(Y);nt&&t.removeRoute(nt)}function v(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,nt){if(nt=Ce({},nt||l.value),typeof Y=="string"){const ft=h_(r,Y,nt.path),z=t.resolve({path:ft.path},nt),G=i.createHref(ft.fullPath);return Ce(ft,z,{params:h(z.params),hash:ym(ft.hash),redirectedFrom:void 0,href:G})}let K;if("path"in Y)K=Ce({},Y,{path:h_(r,Y.path,nt.path).path});else{const ft=Ce({},Y.params);for(const z in ft)ft[z]==null&&delete ft[z];K=Ce({},Y,{params:f(Y.params)}),nt.params=f(nt.params)}const pt=t.resolve(K,nt),St=Y.hash||"";pt.params=c(h(pt.params));const At=fX(n,Ce({},Y,{hash:ZX(St),path:pt.path})),st=i.createHref(At);return Ce({fullPath:At,hash:St,query:n===AM?eY(Y.query):Y.query||{}},pt,{redirectedFrom:void 0,href:st})}function y(Y){return typeof Y=="string"?h_(r,Y,l.value.path):Ce({},Y)}function _(Y,nt){if(u!==Y)return Uc(8,{from:nt,to:Y})}function w(Y){return P(Y)}function T(Y){return w(Ce(y(Y),{replace:!0}))}function S(Y){const nt=Y.matched[Y.matched.length-1];if(nt&&nt.redirect){const{redirect:K}=nt;let pt=typeof K=="function"?K(Y):K;return typeof pt=="string"&&(pt=pt.includes("?")||pt.includes("#")?pt=y(pt):{path:pt},pt.params={}),Ce({query:Y.query,hash:Y.hash,params:"path"in pt?{}:Y.params},pt)}}function P(Y,nt){const K=u=m(Y),pt=l.value,St=Y.state,At=Y.force,st=Y.replace===!0,ft=S(K);if(ft)return P(Ce(y(ft),{state:St,force:At,replace:st}),nt||K);const z=K;z.redirectedFrom=nt;let G;return!At&&hX(n,pt,K)&&(G=Uc(16,{to:z,from:pt}),Tt(pt,pt,!0,!1)),(G?Promise.resolve(G):A(z,pt)).catch(X=>Bo(X)?Bo(X,2)?X:tt(X):Z(X,z,pt)).then(X=>{if(X){if(Bo(X,2))return P(Ce({replace:st},y(X.to),{state:St,force:At}),nt||z)}else X=k(z,pt,!0,st,St);return M(z,pt,X),X})}function C(Y,nt){const K=_(Y,nt);return K?Promise.reject(K):Promise.resolve()}function A(Y,nt){let K;const[pt,St,At]=uY(Y,nt);K=d_(pt.reverse(),"beforeRouteLeave",Y,nt);for(const ft of pt)ft.leaveGuards.forEach(z=>{K.push(ns(z,Y,nt))});const st=C.bind(null,Y,nt);return K.push(st),Cu(K).then(()=>{K=[];for(const ft of o.list())K.push(ns(ft,Y,nt));return K.push(st),Cu(K)}).then(()=>{K=d_(St,"beforeRouteUpdate",Y,nt);for(const ft of St)ft.updateGuards.forEach(z=>{K.push(ns(z,Y,nt))});return K.push(st),Cu(K)}).then(()=>{K=[];for(const ft of Y.matched)if(ft.beforeEnter&&!nt.matched.includes(ft))if(xi(ft.beforeEnter))for(const z of ft.beforeEnter)K.push(ns(z,Y,nt));else K.push(ns(ft.beforeEnter,Y,nt));return K.push(st),Cu(K)}).then(()=>(Y.matched.forEach(ft=>ft.enterCallbacks={}),K=d_(At,"beforeRouteEnter",Y,nt),K.push(st),Cu(K))).then(()=>{K=[];for(const ft of a.list())K.push(ns(ft,Y,nt));return K.push(st),Cu(K)}).catch(ft=>Bo(ft,8)?ft:Promise.reject(ft))}function M(Y,nt,K){for(const pt of s.list())pt(Y,nt,K)}function k(Y,nt,K,pt,St){const At=_(Y,nt);if(At)return At;const st=nt===Ma,ft=sc?history.state:{};K&&(pt||st?i.replace(Y.fullPath,Ce({scroll:st&&ft&&ft.scroll},St)):i.push(Y.fullPath,St)),l.value=Y,Tt(Y,nt,K,st),tt()}let O;function B(){O||(O=i.listen((Y,nt,K)=>{if(!Ht.listening)return;const pt=m(Y),St=S(pt);if(St){P(Ce(St,{replace:!0}),pt).catch(ld);return}u=pt;const At=l.value;sc&&bX(_M(At.fullPath,K.delta),D1()),A(pt,At).catch(st=>Bo(st,12)?st:Bo(st,2)?(P(st.to,pt).then(ft=>{Bo(ft,20)&&!K.delta&&K.type===Vd.pop&&i.go(-1,!1)}).catch(ld),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(st,pt,At))).then(st=>{st=st||k(pt,At,!1),st&&(K.delta&&!Bo(st,8)?i.go(-K.delta,!1):K.type===Vd.pop&&Bo(st,20)&&i.go(-1,!1)),M(pt,At,st)}).catch(ld)}))}let $=jf(),D=jf(),j;function Z(Y,nt,K){tt(Y);const pt=D.list();return pt.length?pt.forEach(St=>St(Y,nt,K)):console.error(Y),Promise.reject(Y)}function q(){return j&&l.value!==Ma?Promise.resolve():new Promise((Y,nt)=>{$.add([Y,nt])})}function tt(Y){return j||(j=!Y,B(),$.list().forEach(([nt,K])=>Y?K(Y):nt()),$.reset()),Y}function Tt(Y,nt,K,pt){const{scrollBehavior:St}=e;if(!sc||!St)return Promise.resolve();const At=!K&&wX(_M(Y.fullPath,0))||(pt||!K)&&history.state&&history.state.scroll||null;return Nd().then(()=>St(Y,nt,At)).then(st=>st&&_X(st)).catch(st=>Z(st,Y,nt))}const Ot=Y=>i.go(Y);let bt;const wt=new Set,Ht={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:w,replace:T,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:D.add,isReady:q,install(Y){const nt=this;Y.component("RouterLink",lc),Y.component("RouterView",k9),Y.config.globalProperties.$router=nt,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>mr(l)}),sc&&!bt&&l.value===Ma&&(bt=!0,w(i.location).catch(St=>{}));const K={};for(const St in Ma)K[St]=Ye(()=>l.value[St]);Y.provide(gP,nt),Y.provide(M9,af(K)),Y.provide(hS,l);const pt=Y.unmount;wt.add(Y),Y.unmount=function(){wt.delete(Y),wt.size<1&&(u=Ma,O&&O(),O=null,l.value=Ma,bt=!1,j=!1),pt()}}};return Ht}function Cu(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function uY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>Vc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>Vc(u,l))||i.push(l))}return[r,n,i]}function Di(e){return`data/icons/item/${e}.webp`}function cY(e){return`<img src="${Di(e)}" class="iconitem" />`}function Bt(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function os(e,t){return e+(t-e)*Math.random()}function fY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function hY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function dY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function pY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function vY(e){const t=/\d+/g;return e.match(t).join("-")}function mP(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function cd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=os(i.wspd_lo,i.wspd_hi)/1e6,o+=os(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=os(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const se=T0({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdBase:5,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},prerelease_housesconfig:1}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=xt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!xt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=fY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=xt(),t=Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]);return console.log("floatingRegionGroups",t),t},modHists(){const e={},t=xt();for(const r of Object.keys(t.regionGroups))if(this.allowFloating&&this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}else this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];return e},medianModifiers(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){let n=0;const i=this.modHists[r].length;if(i%2)n=this.modHists[r][(i-1)/2];else{const o=this.modHists[r][(i-1-1)/2],a=this.modHists[r][(i-1+1)/2];n=(o+a)/2}e[r]=n}return e},medianWorkloads(){const e={},t=xt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=xt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=xt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=xt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=xt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>e.displayWorkerStatsForPz?xt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=xt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=xt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes getter",t),t},pzJobs(e){const t={},r=xt(),n=new Set([...e.autotakenGrindNodes]);return this.workingWorkers.forEach(i=>{if(!i||!r.jobIsPz(i.job))return;const o=i.job;if(!o)return;const a=r.workerStatsOnPlantzone(i),s=r.profitPzTownStats(o,i.tnk,a.wspd,a.mspd,a.luck,r.isGiant(i.charkey)),[l,u]=r.dijkstraPath(o,i.tnk,n);l&&l.forEach(c=>n.add(c)),t[o]={pzk:o,worker:i,profit:s,usedPath:l}}),t},currentNodesJobs(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(r):t[i]=[r]);return t},currentNodesCashflow(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i]+=n.profit.priceDaily:t[i]=n.profit.priceDaily);return t},nodeSharing(e){const t={},r={};for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(function(o){let a=0;o in nodesJobs?(r[o]+=i.profit.priceDaily,i.profit.priceDaily>a?nodesJobs[o].push(n):(a=i.profit.priceDaily,nodesJobs[o].unshift(n))):(r[o]=i.profit.priceDaily,nodesJobs[o]=[n])});return{jobs:t,cashFlows:r}},pzjobsSharedCP(e){const t={},r=xt();for(const[n,i]of Object.entries(e.pzJobs))t[n]=0,i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n]+=s});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerCP(e){return(e.farmingProfit-e.farmingBareProfit)/10},workerBringsItemkeys:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[worker.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.tnk);t[o]=new Set([...t[o],...r.plantzones[i.job].itemkeys])}return t},baseStorage(e){return e.selectedRegion=="RU"?8:16},townInfra:e=>(t,r,n)=>{const i=xt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?2:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townsInfra(e){const t={},r=xt();return r.ready&&r.towns.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},workerIncome:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job))return e.pzJobs[t.job].profit.priceDaily;if(r.jobIsFarming(t.job))return e.farmingProfitPerCP;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t)}},workerSharedCp:e=>t=>{const r=xt();if(r.jobIsPz(t.job))return e.pzjobsSharedCP[t.job];if(r.jobIsFarming(t.job))return 0;if(r.jobIsCustom(t.job))return t.job[2];if(r.jobIsWorkshop(t.job)){const n=e.workersWorkshop.filter(i=>i.job.hk==t.job.hk).length;return e.userWorkshops[t.job.hk].manualCp/n}},workerSharedLodgingCp:e=>t=>{const r=xt();if(!r.ready)return;const n=e.workerIncome(t),i=r.tnk2tk(t.tnk),o=e.prerelease_housesconfig?e.townsInfra[i].cost:e.haveLodging.cp.perTown[i],a=e.townsTotalIncome[i].income;let s;if(a>0)s=n/a*o;else{const l=e.userWorkers.filter(u=>r.tnk2tk(u.tnk)==i).length;s=1/l*o}return s},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t)/(e.workerSharedCp(t)+e.workerSharedLodgingCp(t));return isNaN(r)&&console.log("workerIncomePerCp ret NaN (NaN income / 0 cp?) for worker",t.label),r},workersSortedByIncomePerCp(e){const t=Date.now(),r=[];return e.workingWorkers.forEach(n=>{r.push({w:n,i:e.workerIncome(n),ipc:e.workerIncomePerCp(n)})}),r.sort((n,i)=>i.ipc-n.ipc),console.log("workersSortedByIncomePerCp took",Date.now()-t,"ms"),r},townsTotalIncome(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]={income:0,mapCp:0});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].income+=e.workerIncome(i),t[o].mapCp+=e.workerSharedCp(i)}for(const[n,i]of Object.entries(t)){const o=e.prerelease_housesconfig?e.townsInfra[n].cost:e.haveLodging.cp.perTown[n];i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(o=>t.add(o));const r=xt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenGrindNodesCP(e){const t=xt(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodesCP(e){const t=xt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgingCp(n.worker);return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+(e.prerelease_housesconfig?e.lodgage:e.haveLodging.cp.total)+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},jobsUsingNodes:e=>t=>{const r=xt(),n=t.filter(a=>!r.townSet.has(a)),i=new Set(n),o=[];for(const[a,s]of Object.entries(e.pzJobs))s.usedPath.filter(u=>i.has(u)).length&&o.push(s);return o},workerPzStats(e){const t=xt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},pzProfitsBefore(e){const t=e.pzJobsTotalDailyProfit,r=e.autotakenNodesCP,n=e.pzJobsTotalLodgingCost,i=e.pzJobsDailyProfitPerCp;return{daily:t,cp:r,lodgingCp:n,dailyPerCp:i}},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=xt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return console.log("jobsTally getter"),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),So=T0({id:"market",state:()=>({ready:!1,apiPrices:[],calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=se(),r=`https://apiv2.bdolytics.com/${t.selectedLang}/${t.selectedRegion}/market/central-market-data`,n=await(await fetch(r)).json(),i=xt(),o=new Set(i.itemKeys),a={};n.data.forEach(s=>{o.has(s.item_id)&&(a[s.item_id]=s.price)});for(const s of Object.keys(i.vendorPrices))t.keepItems[s]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:se().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=se(),r=xt();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var dS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x9={exports:{}},L9={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g;i=Math.floor,f=Math.min,n=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,_,w,T){var S;if(_==null&&(_=0),T==null&&(T=n),_<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);_<w;)S=i((_+w)/2),T(y,m[S])<0?w=S:_=S+1;return[].splice.apply(m,[_,_-_].concat(y)),y},s=function(m,y,_){return _==null&&(_=n),m.push(y),v(m,0,m.length-1,_)},a=function(m,y){var _,w;return y==null&&(y=n),_=m.pop(),m.length?(w=m[0],m[0]=_,g(m,0,y)):w=_,w},u=function(m,y,_){var w;return _==null&&(_=n),w=m[0],m[0]=y,g(m,0,_),w},l=function(m,y,_){var w;return _==null&&(_=n),m.length&&_(m[0],y)<0&&(w=[m[0],y],y=w[0],m[0]=w[1],g(m,0,_)),y},o=function(m,y){var _,w,T,S,P,C;for(y==null&&(y=n),S=function(){C=[];for(var A=0,M=i(m.length/2);0<=M?A<M:A>M;0<=M?A++:A--)C.push(A);return C}.apply(this).reverse(),P=[],w=0,T=S.length;w<T;w++)_=S[w],P.push(g(m,_,y));return P},p=function(m,y,_){var w;if(_==null&&(_=n),w=m.indexOf(y),w!==-1)return v(m,0,w,_),g(m,w,_)},h=function(m,y,_){var w,T,S,P,C;if(_==null&&(_=n),T=m.slice(0,y),!T.length)return T;for(o(T,_),C=m.slice(y),S=0,P=C.length;S<P;S++)w=C[S],l(T,w,_);return T.sort(_).reverse()},d=function(m,y,_){var w,T,S,P,C,A,M,k,O;if(_==null&&(_=n),y*10<=m.length){if(S=m.slice(0,y).sort(_),!S.length)return S;for(T=S[S.length-1],M=m.slice(y),P=0,A=M.length;P<A;P++)w=M[P],_(w,T)<0&&(c(S,w,0,null,_),S.pop(),T=S[S.length-1]);return S}for(o(m,_),O=[],C=0,k=f(y,m.length);0<=k?C<k:C>k;0<=k?++C:--C)O.push(a(m,_));return O},v=function(m,y,_,w){var T,S,P;for(w==null&&(w=n),T=m[_];_>y;){if(P=_-1>>1,S=m[P],w(T,S)<0){m[_]=S,_=P;continue}break}return m[_]=T},g=function(m,y,_){var w,T,S,P,C;for(_==null&&(_=n),T=m.length,C=y,S=m[y],w=2*y+1;w<T;)P=w+1,P<T&&!(_(m[w],m[P])<0)&&(w=P),m[y]=m[w],y=w,w=2*y+1;return m[y]=S,v(m,C,y,_)},r=function(){m.push=s,m.pop=a,m.replace=u,m.pushpop=l,m.heapify=o,m.updateItem=p,m.nlargest=h,m.nsmallest=d;function m(y){this.cmp=y!=null?y:n,this.nodes=[]}return m.prototype.push=function(y){return s(this.nodes,y,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return e.exports=y()}(this,function(){return r})}).call(dS)})(L9);(function(e){e.exports=L9.exports})(x9);const Uh=gY(x9.exports),xt=T0({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},towns:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>this.skillData[i].tier!=4&&!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnIndustry(e,t){return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=se(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(i=>+i)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json();const t=await(await fetch("data/manual/plantzone_uniques.json")).json();this.itemKeys=t.sort((i,o)=>i-o),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.hk2nk=await(await fetch("data/hk2nk.json")).json(),this.tk2nk=await(await fetch("data/distances_tk2nk.json")).json(),this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.towns=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795],this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795};const r={};for(const[i,o]of Object.entries(this._tk2tnk))r[o]=i;this._tnk2tk=r;const n={};for(const[i,o]of Object.entries(this.plantzoneStatic))if(i in this.plantzoneDrops){const a=o.regiongroup;a in n?n[a].push(i):n[a]=[i]}this.regionGroups=n,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[i,o]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[i]=Object.keys(o).sort((a,s)=>a-s);this.giantSpecies=new Set([2,4,8]),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e/0)}},tnk2tk(e){if(this.ready){if(e in this._tnk2tk)return this._tnk2tk[e];console.log("unknown tnk",e)}},dijTownsInCpRadius(e,t){let r=new Uh((s,l)=>n[s]-n[l]),n={[e]:this.nodes[e].CP},i={[e]:[e]};r.push(e);for(var o;r.size()&&(o=r.pop(),!(n[o]>=t));)this.links[o].forEach(s=>{const l=n[o]+this.nodes[s].CP;s in n?l<n[s]&&(n[s]=l,i[s]=[...i[o],s]):(n[s]=l,i[s]=[...i[o],s],r.push(s))});const a={};return this.towns.forEach(s=>{s in n&&(a[s]=n[s])}),a},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=se();let n=new Set,i=new Uh((u,c)=>o[u]-o[c]),o={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},a={[e]:[e]};i.push(e);for(var s;i.size()&&(s=i.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=o[s]+c;u in o?f<o[u]&&(o[u]=f,a[u]=[...a[s],u]):(o[u]=f,i.push(u),a[u]=[...a[s],u])});const l=[];return n.forEach(u=>{l.push([u,o[u],a[u]])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];let n={[e]:this.nodes[e].CP},i={[e]:[e]},o=new Uh((s,l)=>n[s]-n[l]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(s=>{this.nodes[s]==null&&console.log("dijkstraPath: no exploration node",s);const l=r&&r.has(s)?0:this.nodes[s].CP,u=n[a]+l;s in n?u<n[s]&&(n[s]=u,i[s]=[...i[a],s]):(n[s]=u,i[s]=[...i[a],s],o.push(s))});return[i[t],n[t]]},dijkstraNearestTowns(e,t,r,n){if(!this.ready)return;let i=new Set,o=new Uh((c,f)=>a[c]-a[f]),a={[e]:this.nodes[e].CP},s={[e]:[e]};o.push(e);for(var l;o.size()&&(l=o.pop(),!(this.townSet.has(l)&&(!n||l!=1343)&&(i.add(l),i.size==t)));)this.links[l].forEach(c=>{this.nodes[c]==null&&console.log("dijkstraNearestTowns: no exploration node",c);const f=r&&r.has(c)?0:this.nodes[c].CP,h=a[l]+f;c in a?h<a[c]&&(a[c]=h,s[c]=[...s[l],c]):(o.push(c),a[c]=h,s[c]=[...s[l],c])});const u=[];return i.forEach(c=>{u.push([c,a[c],s[c]])}),u},plantzoneNearestTownsFreeWorkersProfits(e,t){const r=se(),n=[];return this.dijkstraNearestTowns(e,t,r.autotakenNodes).forEach(([o,a,s])=>{const l=this._tnk2tk[o];r.getFreeWorkers(l).forEach(c=>{const f=this.workerStatsOnPlantzone(c);n.push(this.pzSelectionEntry(e,l,o,a,s,c,f))})}),n.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),n},pzSelectionEntry(e,t,r,n,i,o,a){const s=se(),l=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),u=this.plantzones[e].itemkeys,c=new Set([...s.townsStoreItemkeys[t],...u]).size,f=s.townsInfra[t],h=s.townInfra(t,s.townWorkingWorkers(t).length+1,c),d=h.cost-f.cost,p=`old: ${f.wantLodging} \u{1F6CF}\uFE0F ${f.wantStorage} \u{1F4E6} ${Bt(f.cost)}CP
new: ${h.wantLodging} \u{1F6CF}\uFE0F ${h.wantStorage} \u{1F4E6} ${Bt(h.cost)}CP`,v={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:d,infraTooltip:p,cp:n+d,profit:l,w:o,statsOnPz:a};return v.dailyPerCp=s.jobEfficiencyDelta(v.profit.priceDaily,n+d),v},farmSelectionEntry(e){const t=se(),r=t.townsInfra[e],i=t.townsStoreItemkeys[e].size,o=t.townInfra(e,t.townWorkingWorkers(e).length+1,i),a=o.cost-r.cost,s=`old: ${r.wantLodging} \u{1F6CF}\uFE0F ${r.wantStorage} \u{1F4E6} ${Bt(r.cost)}CP
new: ${o.wantLodging} \u{1F6CF}\uFE0F ${o.wantStorage} \u{1F4E6} ${Bt(o.cost)}CP`;return{townCp:a,infraTooltip:s,dailyPerCp:t.jobEfficiencyDelta(t.farmingProfitPerCP,a)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=se(),s=So(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitWorkshopWorker(e,t,r){const n=se(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a;return 24*60/l*t.manualCycleIncome/1e6},itemName(e){if(!this.ready)return e;const t=se();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=se();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return e},pzDistance(e,t){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1];return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this.hk2nk[t],n=this._tnk2tk[e];return this.tk2nk[n][r]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},isTown(e){return[1,2].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e){const t=e.job;if(this.jobIsIdle(t))return"idle";if(this.jobIsPz(t))return this.uloc.node[t];if(this.jobIsFarming(t))return"["+this.jobIcon(t)+"]";if(this.jobIsCustom(t))return"["+this.jobIcon(t)+"] "+t[3];if(this.jobIsWorkshop(t)){const n=xt().uloc.char[t.hk],i=vY(n);return"["+this.jobIcon(t)+"] "+i}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=hY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i}},getters:{uloc(){const e=se();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townSet(){return new Set(this.towns)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return console.log("housesPerTown",e),e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return console.log("townUpperLimits",e),e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=So(),r=se();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky);a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi),a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms",n),n}}}),N1=T0({id:"map",state:()=>({target:[0,0],zoom:-8})}),mY=T0({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const ze=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},yY={class:"wrapper"},_Y=U("Home"),bY=U("Plantzones"),wY=U("Modifiers"),SY=U("Settings"),TY=U("About"),PY={async beforeCreate(){xt().fetchData();const t=se(),r=localStorage.getItem("user");t.migrate(r);const n=So(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=N1(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},EY=Object.assign(PY,{__name:"App",setup(e){return(t,r)=>(R(),N(W,null,[b("header",null,[b("div",yY,[b("nav",null,[Ct(mr(lc),{to:"/"},{default:Ee(()=>[_Y]),_:1}),Ct(mr(lc),{to:"/plantzones"},{default:Ee(()=>[bY]),_:1}),Ct(mr(lc),{to:"/modifiers"},{default:Ee(()=>[wY]),_:1}),Ct(mr(lc),{to:"/settings"},{default:Ee(()=>[SY]),_:1}),Ct(mr(lc),{to:"/about"},{default:Ee(()=>[TY]),_:1})])])]),Ct(mr(k9))],64))}}),AY=ze(EY,[["__scopeId","data-v-14b67078"]]),CY="modulepreload",MY=function(e){return"/workerman/"+e},IM={},kY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=MY(i),i in IM)return;IM[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":CY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const xY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean},data:()=>({}),methods:{formatFixed:Bt,percentageToColor:dY}},LY=U(" @ "),IY=U(" idle ");function OY(e,t,r,n,i,o){return R(),N("tr",null,[b("td",null,[b("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),b("td",null,L(r.w.label),1),b("td",{style:Il(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),5),b("td",{style:Il(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),5),b("td",{style:Il(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),5),b("td",null,[b("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),b("td",null,[r.w.job?(R(),N(W,{key:0},[typeof r.w.job=="number"?(R(),N("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("pan",this.gameStore.nodes[r.w.job].pos)),class:"clickable"},L(n.gameStore.workerJobDescription(r.w)),1)):(R(),N(W,{key:1},[U(L(n.gameStore.workerJobDescription(r.w)),1)],64)),LY,n.userStore.displayProfitPerCp?(R(),N(W,{key:2},[U(L(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(R(),N(W,{key:3},[U(L(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(R(),N(W,{key:1},[IY],64))]),b("td",null,[r.w.job?(R(),N("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(R(),N("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))])])}const I9=ze(xY,[["render",OY],["__scopeId","data-v-c2fd2972"]]);const RY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{o:Object,tk:String},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:I9},data:()=>({}),methods:{formatFixed:Bt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},yP=e=>(tn("data-v-bf156dd7"),e=e(),en(),e),DY={colspan:"2"},NY=U(" worker "),FY=yP(()=>b("td",null,"\u{1F528}",-1)),BY=yP(()=>b("td",null,"\u{1F9B6}",-1)),zY=yP(()=>b("td",null,"\u{1F340}",-1)),$Y=U(" \xA0 "),VY={colspan:"8"},UY=U(" empty slot ");function GY(e,t,r,n,i,o){const a=de("Worker");return R(),N(W,null,[b("tr",null,[b("td",DY,[NY,n.userStore.prerelease_housesconfig?(R(),N("button",{key:0,onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")):ut("",!0)]),FY,BY,zY,b("td",{colspan:"3",class:Yr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})},[b("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},L(n.gameStore.uloc.town[r.tk]),1),U(" "+L()+" ",1),n.userStore.displayProfitPerCp?(R(),N(W,{key:0},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(R(),N(W,{key:1},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),$Y,n.userStore.prerelease_housesconfig?(R(),N(W,{key:2},[U(L(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),b("span",null,L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),U(" \u{1F4E6} "+L(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),b("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk))}," config ")],64)):(R(),N(W,{key:3},[U(L(n.userStore.haveLodging.slots.perTown[r.tk])+" \u{1F6CF}\uFE0F / "+L(n.userStore.haveLodging.cp.perTown[r.tk])+" CP ",1),b("button",{onClick:t[3]||(t[3]=s=>this.$emit("selectLodging",r.tk))}," lodging ")],64))],2)]),(R(!0),N(W,null,Nt(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(R(),ws(a,{w:s,homeless:!0,class:Yr({homeless:!n.userStore.prerelease_housesconfig&&l>n.userStore.haveLodging.slots.perTown[r.tk]-1}),onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPan:t[4]||(t[4]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","onFire","onEdit","onSend"]))),256)),n.userStore.prerelease_housesconfig?ut("",!0):(R(),N(W,{key:0},[n.userStore.townFreeLodgingCount(r.tk)>0?(R(!0),N(W,{key:0},Nt(n.userStore.townFreeLodgingCount(r.tk),s=>(R(),N("tr",null,[b("td",VY,[UY,n.userStore.townFreeLodgingCount(r.tk)>0?(R(),N("button",{key:0,onClick:t[5]||(t[5]=l=>this.$emit("hireWorker",r.tk))}," hire ")):ut("",!0)])]))),256)):ut("",!0)],64))],64)}const jY=ze(RY,[["render",GY],["__scopeId","data-v-bf156dd7"]]);const WY={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{},data:()=>({}),methods:{formatFixed:Bt,makeIconSrc:Di},computed:{freeWorkers(){return this.gameStore.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter((r,n,i)=>n===i.findIndex(o=>o.tnk===r.tnk&&JSON.stringify(o.statsOnPz)===JSON.stringify(r.statsOnPz)))}}},P0=e=>(tn("data-v-d1f3351b"),e=e(),en(),e),HY={key:0},XY=["src"],YY=U(" workload: "),qY={id:"plantzoneWorkerInfo"},ZY=P0(()=>b("br",null,null,-1)),KY=P0(()=>b("abbr",{title:"\u03A3 of connection nodes costs shared proportionally between all active jobs using them + full cost of this node"},"\u2139\uFE0F",-1)),JY=P0(()=>b("br",null,null,-1)),QY=["title"],tq=P0(()=>b("br",null,null,-1)),eq=["title"],rq=U(" worker: none "),nq=U(" Nearest towns with idle workers: "),iq={key:0},oq=P0(()=>b("tr",null,[b("th",null,"town"),b("th",null,"walk"),b("th",null,[U("worker "),b("abbr",{title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1)),aq={key:0},sq={class:"fsxs"},lq=["title"],uq=U("+"),cq=["title"],fq=["onClick","disabled"],hq=U(" None ");function dq(e,t,r,n,i,o){const a=de("RouterLink");return R(),N(W,null,[b("div",null,[Ct(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),U(" "+L(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(R(),N("span",HY,[(R(!0),N(W,null,Nt(this.gameStore.plantzones[r.pzk].itemkeys,s=>(R(),ws(a,{tag:"a",to:{path:"./settings",hash:"#item"+s}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(s),class:"iconitem"},null,8,XY)]),_:2},1032,["to"]))),256)),U(" [\u{1F340}"+L(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2))+"x] ",1)])):ut("",!0)]),b("div",null,[YY,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(R(),N(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),b("button",{onClick:t[0]||(t[0]=s=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(R(),N(W,{key:1},[U(L(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),Pt(b("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=s),min:"0",max:"100",step:"1",class:"w42em"},null,512),[[pe,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),b("div",qY,[n.userStore.workedPlantzones.has(r.pzk.toString())?(R(),N(W,{key:0},[U(" worker: "+L(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+L(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(R(),N(W,{key:0},[b("button",{onClick:t[2]||(t[2]=s=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),b("button",{onClick:t[3]||(t[3]=s=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):ut("",!0),ZY,U(" connection cost: "+L(o.formatFixed(n.userStore.pzjobsSharedCP[r.pzk],3))+" CP ",1),KY,JY,U(" "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" cost: "+L(o.formatFixed(n.userStore.workerSharedLodgingCp(n.userStore.pzJobs[r.pzk].worker),3))+" CP ",1),b("abbr",{title:n.userStore.prerelease_housesconfig?"total lodgage costs of hometown shared proportionally between all active jobs from that town":"total lodging costs of hometown shared between all active jobs from that town"},"\u2139\uFE0F",8,QY),tq,U(" efficiency: "+L(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),b("abbr",{title:n.userStore.prerelease_housesconfig?"income / (connectionCost + lodgageCost)":"income / (connectionCost + lodgingCost)"},"\u2139\uFE0F",8,eq)],64)):(R(),N(W,{key:1},[rq],64))]),b("div",null,[nq,o.freeWorkers.length?(R(),N("table",iq,[oq,(R(!0),N(W,null,Nt(o.freeWorkers,s=>(R(),N(W,null,[s.profit.dist<1e6?(R(),N("tr",aq,[b("td",null,L(n.gameStore.nodeName(s.tnk)),1),b("td",null,L(o.formatFixed(s.profit.dist)),1),b("td",null,[U(L(s.w.label)+" ",1),b("span",sq,L(o.formatFixed(s.statsOnPz.wspd,2))+"\u{1F528} "+L(o.formatFixed(s.statsOnPz.mspd,2))+"\u{1F9B6} "+L(o.formatFixed(s.statsOnPz.luck,2))+"\u{1F340} ",1)]),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,lq),uq,b("abbr",{title:s.infraTooltip},L(s.townCp),9,cq),U("="+L(s.cp),1)]),b("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>n.userStore.assignWorker(s.w,s.pz.key),disabled:n.userStore.workedPlantzones.has(r.pzk.toString())}," assign ",8,fq)])])):ut("",!0)],64))),256))])):(R(),N(W,{key:1},[hq],64))])],64)}const pq=ze(WY,[["render",dq],["__scopeId","data-v-d1f3351b"]]);const vq={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function gq(e,t,r,n,i,o){return Pt((R(),N("div",{onClick:t[1]||(t[1]=gm(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[b("div",{onClick:t[0]||(t[0]=gm(()=>{},["stop"])),class:"dialog_content"},[xW(e.$slots,"default",{},void 0,!0)])],512)),[[kH,r.show]])}const _P=ze(vq,[["render",gq],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pS=function(e,t){return pS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pS(e,t)};function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mq=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),yq=function(){function e(){this.browser=new mq,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),_l=new yq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(_l.wxa=!0,_l.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?_l.worker=!0:typeof navigator>"u"?(_l.node=!0,_l.svgSupported=!0):_q(navigator.userAgent,_l);function _q(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Xt=_l;var bP=12,bq="sans-serif",Hl=bP+"px "+bq,wq=20,Sq=100,Tq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Pq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-wq)/Sq;t[n]=i}return t}var Eq=Pq(Tq),au={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=au.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Hl),e.measureText(r);r=r||"",n=n||Hl;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||bP,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Eq[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},O9=su(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),R9=su(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),sf=Object.prototype.toString,F1=Array.prototype,Aq=F1.forEach,Cq=F1.filter,wP=F1.slice,Mq=F1.map,OM=function(){}.constructor,yp=OM?OM.prototype:null,SP="__proto__",kq=2311;function D9(){return kq++}function TP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function $t(e){if(e==null||typeof e!="object")return e;var t=e,r=sf.call(e);if(r==="[object Array]"){if(!hd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=$t(e[n])}}else if(R9[r]){if(!hd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!O9[r]&&!hd(e)&&!_m(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==SP&&(t[a]=$t(e[a]))}return t}function ie(e,t,r){if(!It(t)||!It(e))return r?$t(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==SP){var i=e[n],o=t[n];It(o)&&It(i)&&!ct(o)&&!ct(i)&&!_m(o)&&!_m(i)&&!RM(o)&&!RM(i)&&!hd(o)&&!hd(i)?ie(i,o,r):(r||!(n in e))&&(e[n]=$t(t[n]))}return e}function xq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=ie(r,e[n],t);return r}function ot(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==SP&&(e[r]=t[r]);return e}function te(e,t,r){for(var n=ve(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}au.createCanvas;function ue(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Lq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Ni(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else te(e,t,r)}function Fr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function F(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Aq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Mt(e,t,r){if(!e)return[];if(!t)return PP(e);if(e.map&&e.map===Mq)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function su(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function yr(e,t,r){if(!e)return[];if(!t)return PP(e);if(e.filter&&e.filter===Cq)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ve(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Iq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(wP.call(arguments)))}}var Vt=yp&&Ut(yp.bind)?yp.call.bind(yp.bind):Iq;function _e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(wP.call(arguments)))}}function ct(e){return Array.isArray?Array.isArray(e):sf.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Et(e){return typeof e=="string"}function vS(e){return sf.call(e)==="[object String]"}function be(e){return typeof e=="number"}function It(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function RM(e){return!!O9[sf.call(e)]}function Mn(e){return!!R9[sf.call(e)]}function _m(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function B1(e){return e.colorStops!=null}function Oq(e){return e.image!=null}function Rq(e){return sf.call(e)==="[object RegExp]"}function bm(e){return e!==e}function bi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function qt(e,t){return e!=null?e:t}function fd(e,t,r){return e!=null?e:t!=null?t:r}function PP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return wP.apply(e,t)}function N9(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Li(e,t){if(!e)throw new Error(t)}function vo(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var F9="__ec_primitive__";function wm(e){e[F9]=!0}function hd(e){return e[F9]}var Dq=function(){function e(t){this.data={};var r=ct(t);this.data={};var n=this;t instanceof e?t.each(i):t&&F(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ve(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new Dq(e)}function B9(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function z1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ot(r,t),r}function z9(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function ht(e,t){return e.hasOwnProperty(t)}function Dr(){}var Nq=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gS=function(e,t){return gS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},gS(e,t)};function Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");gS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function lf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Fq(e,t){return e[0]=t[0],e[1]=t[1],e}function Bq(e){return[e[0],e[1]]}function DM(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $9(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function zq(e){return Math.sqrt($q(e))}function $q(e){return e[0]*e[0]+e[1]*e[1]}function p_(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function EP(e,t){var r=zq(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function mS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Vq=mS;function Uq(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Ac=Uq;function qr(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function dc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function pc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Mu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),Gq=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Mu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new Mu(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Mu(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Mu(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Mu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Mu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const jq=Gq;var Wq=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Fi=Wq;var Hq=Math.log(2);function yS(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/Hq);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*yS(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function NM(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=yS(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*yS(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var FM="___zrEVENTSAVED",v_=[];function Xq(e,t,r,n,i){return _S(v_,t,n,i,!0)&&_S(e,r,v_[0],v_[1])}function _S(e,t,r,n,i){if(t.getBoundingClientRect&&Xt.domSupported&&!V9(t)){var o=t[FM]||(t[FM]={}),a=Yq(t,o),s=qq(a,o,i);if(s)return s(e,r,n),!0}return!1}function Yq(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function qq(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?NM(s,a):NM(a,s))}function V9(e){return e.nodeName.toUpperCase()==="CANVAS"}var Zq=/([&<>"'])/g,Kq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hn(e){return e==null?"":(e+"").replace(Zq,function(t,r){return Kq[r]})}var Jq=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,g_=[],Qq=Xt.browser.firefox&&+Xt.browser.version.split(".")[0]<39;function bS(e,t,r,n){return r=r||{},n?BM(e,t,r):Qq&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):BM(e,t,r),r}function BM(e,t,r){if(Xt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(V9(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(_S(g_,e,n,i)){r.zrX=g_[0],r.zrY=g_[1];return}}r.zrX=r.zrY=0}function AP(e){return e||window.event}function Un(e,t,r){if(t=AP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&bS(e,a,t,r)}else{bS(e,t,t,r);var o=tZ(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Jq.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function tZ(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function eZ(e,t,r,n){e.addEventListener(t,r,n)}function rZ(e,t,r,n){e.removeEventListener(t,r,n)}var Xl=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function zM(e){return e.which===2||e.which===3}var nZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=bS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in m_)if(m_.hasOwnProperty(r)){var n=m_[r](this._track,t);if(n)return n}},e}();function $M(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function iZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var m_={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=$M(n)/$M(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=iZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Gc(){return[1,0,0,1,0,0]}function CP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function U9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Cc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function wS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function MP(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function oZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function $1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var aZ=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const xe=aZ;var _p=Math.min,bp=Math.max,Gs=new xe,js=new xe,Ws=new xe,Hs=new xe,Wf=new xe,Hf=new xe,sZ=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=_p(t.x,this.x),n=_p(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=bp(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=bp(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=Gc();return wS(o,o,[-r.x,-r.y]),oZ(o,o,[n,i]),wS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),g=Math.abs(u-i),m=Math.abs(s-c),y=Math.abs(f-a),_=Math.min(v,g),w=Math.min(m,y);o<l||u<i?_>p&&(p=_,v<g?xe.set(Hf,-v,0):xe.set(Hf,g,0)):_<d&&(d=_,v<g?xe.set(Wf,v,0):xe.set(Wf,-g,0)),s<c||f<a?w>p&&(p=w,m<y?xe.set(Hf,0,-m):xe.set(Hf,0,y)):_<d&&(d=_,m<y?xe.set(Wf,0,m):xe.set(Wf,0,-y))}return r&&xe.copy(r,h?Wf:Hf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Gs.x=Ws.x=r.x,Gs.y=Hs.y=r.y,js.x=Hs.x=r.x+r.width,js.y=Ws.y=r.y+r.height,Gs.transform(n),Hs.transform(n),js.transform(n),Ws.transform(n),t.x=_p(Gs.x,js.x,Ws.x,Hs.x),t.y=_p(Gs.y,js.y,Ws.y,Hs.y);var l=bp(Gs.x,js.x,Ws.x,Hs.x),u=bp(Gs.y,js.y,Ws.y,Hs.y);t.width=l-t.x,t.height=u-t.y},e}();const oe=sZ;var G9="silent";function lZ(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:uZ}}function uZ(){Xl(this.event)}var cZ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Fi),Xf=function(){function e(t,r){this.x=t,this.y=r}return e}(),fZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],y_=new oe(0,0,0,0),j9=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Xf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new cZ,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new jq(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(F(fZ,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=W9(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Xf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Xf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=lZ(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Xf(r,n);if(VM(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new oe(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(y_.copy(h.getBoundingRect()),h.transform&&y_.applyTransform(h.transform),y_.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var y=r+g*Math.cos(m),_=n+g*Math.sin(m);if(VM(s,a,y,_,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new nZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Xf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Fi);F(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){j9.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=W9(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||Vq(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function hZ(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?G9:!0}return!1}function VM(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=hZ(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==G9)){t.target=a;break}}}function W9(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const dZ=j9;var H9=32,Yf=7;function pZ(e){for(var t=0;e>=H9;)t|=e&1,e>>=1;return e+t}function UM(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;vZ(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function vZ(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function GM(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function __(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function b_(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function gZ(e,t){var r=Yf,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=b_(e[g],e,p,v,0,t);p+=y,v-=y,v!==0&&(m=__(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)a[m]=e[d+m];var y=0,_=v,w=d;if(e[w++]=e[_++],--g===0){for(m=0;m<p;m++)e[w+m]=a[y+m];return}if(p===1){for(m=0;m<g;m++)e[w+m]=e[_+m];e[w+g]=a[y];return}for(var T=r,S,P,C;;){S=0,P=0,C=!1;do if(t(e[_],a[y])<0){if(e[w++]=e[_++],P++,S=0,--g===0){C=!0;break}}else if(e[w++]=a[y++],S++,P=0,--p===1){C=!0;break}while((S|P)<T);if(C)break;do{if(S=b_(e[_],a,y,p,0,t),S!==0){for(m=0;m<S;m++)e[w+m]=a[y+m];if(w+=S,y+=S,p-=S,p<=1){C=!0;break}}if(e[w++]=e[_++],--g===0){C=!0;break}if(P=__(a[y],e,_,g,0,t),P!==0){for(m=0;m<P;m++)e[w+m]=e[_+m];if(w+=P,_+=P,g-=P,g===0){C=!0;break}}if(e[w++]=a[y++],--p===1){C=!0;break}T--}while(S>=Yf||P>=Yf);if(C)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[w+m]=e[_+m];e[w+g]=a[y]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[w+m]=a[y+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)a[m]=e[v+m];var y=d+p-1,_=g-1,w=v+g-1,T=0,S=0;if(e[w--]=e[y--],--p===0){for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m];return}if(g===1){for(w-=p,y-=p,S=w+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[_];return}for(var P=r;;){var C=0,A=0,M=!1;do if(t(a[_],e[y])<0){if(e[w--]=e[y--],C++,A=0,--p===0){M=!0;break}}else if(e[w--]=a[_--],A++,C=0,--g===1){M=!0;break}while((C|A)<P);if(M)break;do{if(C=p-b_(a[_],e,d,p,p-1,t),C!==0){for(w-=C,y-=C,p-=C,S=w+1,T=y+1,m=C-1;m>=0;m--)e[S+m]=e[T+m];if(p===0){M=!0;break}}if(e[w--]=a[_--],--g===1){M=!0;break}if(A=g-__(e[y],a,0,g,g-1,t),A!==0){for(w-=A,_-=A,g-=A,S=w+1,T=_+1,m=0;m<A;m++)e[S+m]=a[T+m];if(g<=1){M=!0;break}}if(e[w--]=e[y--],--p===0){M=!0;break}P--}while(C>=Yf||A>=Yf);if(M)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),g===1){for(w-=p,y-=p,S=w+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[_]}else{if(g===0)throw new Error;for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Ig(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<H9){o=UM(e,r,n,t),GM(e,r,n,r+o,t);return}var a=gZ(e,t),s=pZ(i);do{if(o=UM(e,r,n,t),o<s){var l=i;l>s&&(l=s),GM(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var Sn=1,Gh=2,uc=4,jM=!1;function w_(){jM||(jM=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function WM(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var mZ=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=WM}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Ig(n,WM)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=Sn),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(w_(),c.z=0),isNaN(c.z2)&&(w_(),c.z2=0),isNaN(c.zlevel)&&(w_(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=ue(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const yZ=mZ;var X9;X9=Xt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const SS=X9;var Og={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Og.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Og.bounceIn(e*2)*.5:Og.bounceOut(e*2-1)*.5+.5}};const Y9=Og;var wp=Math.pow,ps=Math.sqrt,Sm=1e-8,q9=1e-4,HM=ps(3),Sp=1/3,co=lf(),Xn=lf(),Mc=lf();function as(e){return e>-Sm&&e<Sm}function Z9(e){return e>Sm||e<-Sm}function or(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function XM(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Tm(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(as(c)&&as(f))if(as(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(as(v)){var g=f/c,p=-s/a+g,m=-g/2;p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m)}else if(v>0){var y=ps(v),_=c*s+1.5*a*(-f+y),w=c*s+1.5*a*(-f-y);_<0?_=-wp(-_,Sp):_=wp(_,Sp),w<0?w=-wp(-w,Sp):w=wp(w,Sp);var p=(-s-(_+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ps(c*c*c)),S=Math.acos(T)/3,P=ps(c),C=Math.cos(S),p=(-s-2*P*C)/(3*a),m=(-s+P*(C+HM*Math.sin(S)))/(3*a),A=(-s+P*(C-HM*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m),A>=0&&A<=1&&(o[d++]=A)}}return d}function K9(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(as(a)){if(Z9(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(as(c))i[0]=-o/(2*a);else if(c>0){var f=ps(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Pm(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function _Z(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;co[0]=l,co[1]=u;for(var y=0;y<1;y+=.05)Xn[0]=or(e,r,i,a,y),Xn[1]=or(t,n,o,s,y),g=Ac(co,Xn),g<d&&(f=y,d=g);d=1/0;for(var _=0;_<32&&!(h<q9);_++)p=f-h,v=f+h,Xn[0]=or(e,r,i,a,p),Xn[1]=or(t,n,o,s,p),g=Ac(Xn,co),p>=0&&g<d?(f=p,d=g):(Mc[0]=or(e,r,i,a,v),Mc[1]=or(t,n,o,s,v),m=Ac(Mc,co),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=or(e,r,i,a,f),c[1]=or(t,n,o,s,f)),ps(d)}function bZ(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=or(e,r,i,a,p),g=or(t,n,o,s,p),m=v-u,y=g-c;f+=Math.sqrt(m*m+y*y),u=v,c=g}return f}function kr(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function YM(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function wZ(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(as(o)){if(Z9(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(as(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ps(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function J9(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Em(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function SZ(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;co[0]=a,co[1]=s;for(var h=0;h<1;h+=.05){Xn[0]=kr(e,r,i,h),Xn[1]=kr(t,n,o,h);var d=Ac(co,Xn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<q9);p++){var v=u-c,g=u+c;Xn[0]=kr(e,r,i,v),Xn[1]=kr(t,n,o,v);var d=Ac(Xn,co);if(v>=0&&d<f)u=v,f=d;else{Mc[0]=kr(e,r,i,g),Mc[1]=kr(t,n,o,g);var m=Ac(Mc,co);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=kr(e,r,i,u),l[1]=kr(t,n,o,u)),ps(f)}function TZ(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=kr(e,r,i,h),p=kr(t,n,o,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var PZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function Q9(e){var t=e&&PZ.exec(e);if(t){var r=t[1].split(","),n=+vo(r[0]),i=+vo(r[1]),o=+vo(r[2]),a=+vo(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Tm(0,n,o,1,l,s)&&or(0,i,a,1,s[0])}}}var EZ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Dr,this.ondestroy=t.ondestroy||Dr,this.onrestart=t.onrestart||Dr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:Y9[t]||Q9(t)},e}();const AZ=EZ;var t7=function(){function e(t){this.value=t}return e}(),CZ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new t7(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),MZ=function(){function e(t){this._list=new CZ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new t7(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const E0=MZ;var qM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ci(e){return e=Math.round(e),e<0?0:e>255?255:e}function kZ(e){return e=Math.round(e),e<0?0:e>360?360:e}function Ud(e){return e<0?0:e>1?1:e}function S_(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ci(parseFloat(t)/100*255):Ci(parseInt(t,10))}function Dl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ud(parseFloat(t)/100):Ud(parseFloat(t))}function T_(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function ss(e,t,r){return e+(t-e)*r}function Vn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function TS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var e7=new E0(20),Tp=null;function ku(e,t){Tp&&TS(Tp,t),Tp=e7.put(e,Tp||t.slice())}function qn(e,t){if(!!e){t=t||[];var r=e7.get(e);if(r)return TS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in qM)return TS(t,qM[n]),ku(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Vn(t,0,0,0,1);return}return Vn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),ku(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Vn(t,0,0,0,1);return}return Vn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),ku(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Vn(t,+u[0],+u[1],+u[2],1):Vn(t,0,0,0,1);c=Dl(u.pop());case"rgb":if(u.length>=3)return Vn(t,S_(u[0]),S_(u[1]),S_(u[2]),u.length===3?c:Dl(u[3])),ku(e,t),t;Vn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Vn(t,0,0,0,1);return}return u[3]=Dl(u[3]),PS(u,t),ku(e,t),t;case"hsl":if(u.length!==3){Vn(t,0,0,0,1);return}return PS(u,t),ku(e,t),t;default:return}}Vn(t,0,0,0,1)}}function PS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Dl(e[1]),i=Dl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Vn(t,Ci(T_(a,o,r+1/3)*255),Ci(T_(a,o,r)*255),Ci(T_(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function xZ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function ZM(e,t){var r=qn(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return oa(r,r.length===4?"rgba":"rgb")}}function P_(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Ci(ss(a[0],s[0],l)),r[1]=Ci(ss(a[1],s[1],l)),r[2]=Ci(ss(a[2],s[2],l)),r[3]=Ud(ss(a[3],s[3],l)),r}}function LZ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=qn(t[i]),s=qn(t[o]),l=n-i,u=oa([Ci(ss(a[0],s[0],l)),Ci(ss(a[1],s[1],l)),Ci(ss(a[2],s[2],l)),Ud(ss(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function E_(e,t,r,n){var i=qn(e);if(e)return i=xZ(i),t!=null&&(i[0]=kZ(t)),r!=null&&(i[1]=Dl(r)),n!=null&&(i[2]=Dl(n)),oa(PS(i),"rgba")}function ES(e,t){var r=qn(e);if(r&&t!=null)return r[3]=Ud(t),oa(r,"rgba")}function oa(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Am(e,t){var r=qn(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function IZ(e){return e.type==="linear"}function OZ(e){return e.type==="radial"}(function(){return Xt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var AS=Array.prototype.slice;function Yo(e,t,r){return(t-e)*r+e}function A_(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=Yo(t[o],r[o],n);return e}function RZ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=Yo(t[a][s],r[a][s],n)}return e}function Pp(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function KM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function DZ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function NZ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:AS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function dd(e){if(Fr(e)){var t=e.length;if(Fr(e[0])){for(var r=[],n=0;n<t;n++)r.push(AS.call(e[n]));return r}return AS.call(e)}return e}function Rg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function FZ(e){return Fr(e&&e[0])?2:1}var Ep=0,Dg=1,r7=2,jh=3,CS=4,MS=5,JM=6;function QM(e){return e===CS||e===MS}function Ap(e){return e===Dg||e===r7}var qf=[0,0,0,0],BZ=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=JM,l=r;if(Fr(r)){var u=FZ(r);s=u,(u===1&&!be(r[0])||u===2&&!be(r[0][0]))&&(a=!0)}else if(be(r)&&!bm(r))s=Ep;else if(Et(r))if(!isNaN(+r))s=Ep;else{var c=qn(r);c&&(l=c,s=jh)}else if(B1(r)){var f=ot({},l);f.colorStops=Mt(r.colorStops,function(d){return{offset:d.offset,color:qn(d.color)}}),IZ(r)?s=CS:OZ(r)&&(s=MS),l=f}o===0?this.valType=s:(s!==this.valType||s===JM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:Y9[n]||Q9(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=Ap(i),u=QM(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?NZ(h,d,i):u&&DZ(h.colorStops,d.colorStops))}if(!s&&i!==MS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===Ep?n[c].additiveValue=n[c].value-p:i===jh?n[c].additiveValue=Pp([],n[c].value,p,-1):Ap(i)&&(n[c].additiveValue=i===Dg?Pp([],n[c].value,p,-1):KM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===jh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var y=n?this._additiveValue:u?qf:t[l];if((Ap(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(Ap(o))o===Dg?A_(y,d[i],p[i],m):RZ(y,d[i],p[i],m);else if(QM(o)){var _=d[i],w=p[i],T=o===CS;t[l]={type:T?"linear":"radial",x:Yo(_.x,w.x,m),y:Yo(_.y,w.y,m),colorStops:Mt(_.colorStops,function(P,C){var A=w.colorStops[C];return{offset:Yo(P.offset,A.offset,m),color:Rg(A_([],P.color,A.color,m))}}),global:w.global},T?(t[l].x2=Yo(_.x2,w.x2,m),t[l].y2=Yo(_.y2,w.y2,m)):t[l].r=Yo(_.r,w.r,m)}else if(u)A_(y,d[i],p[i],m),n||(t[l]=Rg(y));else{var S=Yo(d[i],p[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===Ep?t[n]=t[n]+i:r===jh?(qn(t[n],qf),Pp(qf,qf,i,1),t[n]=Rg(qf)):r===Dg?Pp(t[n],t[n],i,1):r===r7&&KM(t[n],t[n],i,1)},e}(),zZ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){TP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ve(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new BZ(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===jh&&u&&(u=Rg(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,dd(u),i),this._trackKeys.push(s)}l.addKeyframe(t,dd(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new AZ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Mt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=dd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ve(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const kP=zZ;function vc(){return new Date().getTime()}var $Z=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=vc()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(SS(n),!r._paused&&r.update())}SS(n)},t.prototype.start=function(){this._running||(this._time=vc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=vc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=vc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new kP(r,n.loop);return this.addAnimator(i),i},t}(Fi);const VZ=$Z;var UZ=300,C_=Xt.domSupported,M_=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Mt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),ek={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},rk=!1;function kS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function GZ(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function k_(e){e&&(e.zrByTouch=!0)}function jZ(e,t){return Un(e.dom,new WZ(e,t),!0)}function n7(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var WZ=function(){function e(t,r){this.stopPropagation=Dr,this.stopImmediatePropagation=Dr,this.preventDefault=Dr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),di={mousedown:function(e){e=Un(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Un(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Un(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Un(this.dom,e);var t=e.toElement||e.relatedTarget;n7(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){rk=!0,e=Un(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){rk||(e=Un(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Un(this.dom,e),k_(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),di.mousemove.call(this,e),di.mousedown.call(this,e)},touchmove:function(e){e=Un(this.dom,e),k_(e),this.handler.processGesture(e,"change"),di.mousemove.call(this,e)},touchend:function(e){e=Un(this.dom,e),k_(e),this.handler.processGesture(e,"end"),di.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<UZ&&di.click.call(this,e)},pointerdown:function(e){di.mousedown.call(this,e)},pointermove:function(e){kS(e)||di.mousemove.call(this,e)},pointerup:function(e){di.mouseup.call(this,e)},pointerout:function(e){kS(e)||di.mouseout.call(this,e)}};F(["click","dblclick","contextmenu"],function(e){di[e]=function(t){t=Un(this.dom,t),this.trigger(e,t)}});var xS={pointermove:function(e){kS(e)||xS.mousemove.call(this,e)},pointerup:function(e){xS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function HZ(e,t){var r=t.domHandlers;Xt.pointerEventsSupported?F(M_.pointer,function(n){Ng(t,n,function(i){r[n].call(e,i)})}):(Xt.touchEventsSupported&&F(M_.touch,function(n){Ng(t,n,function(i){r[n].call(e,i),GZ(t)})}),F(M_.mouse,function(n){Ng(t,n,function(i){i=AP(i),t.touching||r[n].call(e,i)})}))}function XZ(e,t){Xt.pointerEventsSupported?F(ek.pointer,r):Xt.touchEventsSupported||F(ek.mouse,r);function r(n){function i(o){o=AP(o),n7(e,o.target)||(o=jZ(e,o),t.domHandlers[n].call(e,o))}Ng(t,n,i,{capture:!0})}}function Ng(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,eZ(e.domTarget,t,r,n)}function x_(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&rZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var nk=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),YZ=function(e){Ae(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new nk(r,di),C_&&(i._globalHandlerScope=new nk(document,xS)),HZ(i,i._localHandlerScope),i}return t.prototype.dispose=function(){x_(this._localHandlerScope),C_&&x_(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,C_&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?XZ(this,n):x_(n)}},t}(Fi);const qZ=YZ;var i7=1;Xt.hasGlobalWindow&&(i7=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Cm=i7,LS=.4,IS="#333",OS="#ccc",ZZ="#eee",ik=CP,ok=5e-5;function Xs(e){return e>ok||e<-ok}var Ys=[],xu=[],L_=Gc(),I_=Math.abs,Al=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Xs(this.rotation)||Xs(this.x)||Xs(this.y)||Xs(this.scaleX-1)||Xs(this.scaleY-1)||Xs(this.skewX)||Xs(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&ik(n);return}n=n||Gc(),r?this.getLocalTransform(n):ik(n),t&&(r?Cc(n,t,n):U9(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Ys);var n=Ys[0]<0?-1:1,i=Ys[1]<0?-1:1,o=((Ys[0]-n)*r+n)/Ys[0]||0,a=((Ys[1]-i)*r+i)/Ys[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Gc(),$1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Cc(xu,t.invTransform,r),r=xu);var n=this.originX,i=this.originY;(n||i)&&(L_[4]=n,L_[5]=i,Cc(xu,r,L_),xu[4]-=n,xu[5]-=i,r=xu),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&qr(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&qr(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&I_(t[0]-1)>1e-10&&I_(t[3]-1)>1e-10?Math.sqrt(I_(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){KZ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&MP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),To=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function KZ(e,t){for(var r=0;r<To.length;r++){var n=To[r];e[n]=t[n]}}var ak={};function Pn(e,t){t=t||Hl;var r=ak[t];r||(r=ak[t]=new E0(500));var n=r.get(e);return n==null&&(n=au.measureText(e,t).width,r.put(e,n)),n}function sk(e,t,r,n){var i=Pn(e,t),o=LP(t),a=Wh(0,i,r),s=cc(0,o,n),l=new oe(a,s,i,o);return l}function xP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return sk(i[0],t,r,n);for(var a=new oe(0,0,0,0),s=0;s<i.length;s++){var l=sk(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Wh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function cc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function LP(e){return Pn("\u56FD",e)}function ua(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Mm(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ua(n[0],r.width),u+=ua(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var O_="__zr_normal__",R_=To.concat(["ignore"]),JZ=su(To,function(e,t){return e[t]=!0,e},{ignore:!1}),Lu={},QZ=new oe(0,0,0,0),IP=function(){function e(t){this.id=D9(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=QZ;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Lu,n,c):Mm(Lu,n,c),o.x=Lu.x,o.y=Lu.y,a=Lu.align,s=Lu.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ua(f[0],c.width),d=ua(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;v&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==g.fill||y!==g.stroke||_!==g.autoStroke||a!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=y,g.autoStroke=_,g.align=a,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=Sn,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?OS:IS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&qn(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,oa(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ot(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(It(t))for(var n=t,i=ve(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==O_)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,R_)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(O_,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===O_,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ue(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){TP("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Sn),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,h),g&&g.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Sn)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ue(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=ue(i,t),a=ue(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ot(r,o),o.textConfig&&(n=n||{},ot(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=ot({},i?this.textConfig:n.textConfig),ot(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<R_.length;c++){var f=R_[c],h=o&&JZ[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Al,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ot(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Sn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new kP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=ue(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){D_(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){D_(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=D_(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Sn;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Ni(IP,Fi);Ni(IP,Al);function D_(e,t,r,n,i){r=r||{};var o=[];o7(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function N_(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function tK(e){return Fr(e[0])}function eK(e,t,r){if(Fr(t[r]))if(Fr(e[r])||(e[r]=[]),Mn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),N_(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(tK(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?N_(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else N_(o,i,a);o.length=i.length}else e[r]=t[r]}function rK(e,t){return e===t||Fr(e)&&Fr(t)&&nK(e,t)}function nK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function o7(e,t,r,n,i,o,a,s){for(var l=ve(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!It(o),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],y=n[m];if(y!=null&&r[m]!=null&&(d||o[m]))if(It(y)&&!Fr(y)&&!B1(y)){if(t){s||(r[m]=y,e.updateDuringAnimation(t));continue}o7(e,m,r[m],y,i,o&&o[m],a,s)}else v.push(m);else s||(r[m]=y,e.updateDuringAnimation(t),v.push(m))}var _=v.length;if(!f&&_)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var P=ue(p,T);p.splice(P,1)}}}if(i.force||(v=yr(v,function(k){return!rK(n[k],r[k])}),_=v.length),_>0||i.force&&!a.length){var C=void 0,A=void 0,M=void 0;if(s){A={},h&&(C={});for(var w=0;w<_;w++){var m=v[w];A[m]=r[m],h?C[m]=n[m]:r[m]=n[m]}}else if(h){M={};for(var w=0;w<_;w++){var m=v[w];M[m]=dd(r[m]),eK(r,n,m)}}var T=new kP(r,!1,!1,f?yr(p,function(O){return O.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&C&&T.whenWithKeys(0,C,v),M&&T.whenWithKeys(0,M,v),T.whenWithKeys(u==null?500:u,s?A:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const a7=IP;var s7=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=ue(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=ue(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new oe(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(oe.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(a7);s7.prototype.type="group";const De=s7;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Fg={},l7={};function iK(e){delete l7[e]}function oK(e){if(!e)return!1;if(typeof e=="string")return Am(e,1)<LS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Am(t[i].color,1);return r/=n,r<LS}return!1}var aK=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new yZ,a=n.renderer||"canvas";Fg[a]||(a=ve(Fg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new Fg[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Xt.node&&!Xt.worker&&!l?new qZ(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Xt.touchEventsSupported:!!c,h=44,d;f&&(d=qt(n.pointerSize,h)),this.handler=new dZ(o,s,u,s.root,d),this.animation=new VZ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=oK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=vc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=vc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof De&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,iK(this.id)},e}();function lk(e,t){var r=new aK(D9(),e,t);return l7[r.id]=r,r}function sK(e,t){Fg[e]=t}var uk=1e-4,u7=20;function lK(e){return e.replace(/^\s+|\s+$/g,"")}function ca(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function We(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Et(e)?lK(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),u7),e=(+e).toFixed(t),r?e:+e}function km(e){return e.sort(function(t,r){return t-r}),e}function go(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return uK(e)}function uK(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function cK(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function fK(e,t){var r=Math.max(go(e),go(t)),n=e+t;return r>u7?n:qe(n,r)}function c7(e){var t=Math.PI*2;return(e%t+t)%t}function xm(e){return e>-uk&&e<uk}var hK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function fa(e){if(e instanceof Date)return e;if(Et(e)){var t=hK.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function dK(e){return Math.pow(10,OP(e))}function OP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function f7(e,t){var r=OP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function ck(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Ts(e){var t=parseFloat(e);return t==e&&(t!==0||!Et(e)||e.indexOf("x")<=0)?t:NaN}function pK(e){return!isNaN(Ts(e))}function h7(){return Math.round(Math.random()*9)}function d7(e,t){return t===0?e:d7(t,e%t)}function fk(e,t){return e==null?t:t==null?e:e*t/d7(e,t)}function re(e){throw new Error(e)}function hk(e,t,r){return(t-e)*r+e}var p7="series\0",vK="\0_ec_\0";function Ze(e){return e instanceof Array?e:e==null?[]:[e]}function RS(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var dk=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function A0(e){return It(e)&&!ct(e)&&!(e instanceof Date)?e.value:e}function gK(e){return It(e)&&!(e instanceof Array)}function mK(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();F(t,function(l,u){if(!It(l)){t[u]=null;return}});var s=yK(e,a,r);return(n||i)&&_K(s,e,a,t),n&&bK(s,t),n||i?wK(s,t,i):o&&SK(s,t),TK(s),s}function yK(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Gd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function _K(e,t,r,n){F(n,function(i,o){if(!(!i||i.id==null)){var a=pd(i.id),s=r.get(a);if(s!=null){var l=e[s];Li(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function bK(e,t){F(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Gd(r)&&!Gd(o)&&v7("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function wK(e,t,r){F(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Gd(i.existing)||i.existing&&n.id!=null&&!v7("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function SK(e,t){F(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function TK(e){var t=jt();F(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),F(e,function(r){var n=r.newOption;Li(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),F(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!It(o)){if(a.name=o.name!=null?pd(o.name):i?i.name:p7+n,i)a.id=pd(i.id);else if(o.id!=null)a.id=pd(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function v7(e,t,r){var n=Zn(t[e],null),i=Zn(r[e],null);return n!=null&&i!=null&&n===i}function pd(e){return Zn(e,"")}function Zn(e,t){return e==null?t:Et(e)?e:be(e)||vS(e)?e+"":t}function RP(e){var t=e.name;return!!(t&&t.indexOf(p7))}function Gd(e){return e&&e.id!=null&&pd(e.id).indexOf(vK)===0}function PK(e,t,r){F(e,function(n){var i=n.newOption;It(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=EK(t,i,n.existing,r))})}function EK(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function AK(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=Zn(a[u].seriesId,null);if(f==null)return;for(var h=Ze(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Yl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ct(t.dataIndex)?Mt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ct(t.name)?Mt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Oe(){var e="__ec_inner_"+CK++;return function(t){return t[e]||(t[e]={})}}var CK=h7();function F_(e,t,r){var n=DP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=C0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function DP(e,t){var r;if(Et(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return F(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&ue(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var wi={useDefault:!0,enableAll:!1,enableNone:!1};function C0(e,t,r,n){n=n||wi;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Li(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Li(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function g7(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function MK(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function kK(e){return e==="auto"?Xt.domSupported?"html":"richText":e||"html"}function xK(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(be(n)){var a=hk(r||0,n,i);return qe(a,o?Math.max(go(r||0),go(n)):t)}else{if(Et(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=hk(d,p,i);s[f]=qe(a,o?Math.max(go(d),go(p)):t)}}return s}}var LK=".",qs="___EC__COMPONENT__CONTAINER___",m7="___EC__EXTENDED_CLASS___";function mo(e){var t={main:"",sub:""};if(e){var r=e.split(LK);t.main=r[0]||"",t.sub=r[1]||""}return t}function IK(e){Li(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function OK(e){return!!(e&&e[m7])}function NP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return RK(n)?i=function(o){mt(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Lq(i,this)),ot(i.prototype,r),i[m7]=!0,i.extend=this.extend,i.superCall=FK,i.superApply=BK,i.superClass=n,i}}function RK(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function y7(e,t){e.extend=t.extend}var DK=Math.round(Math.random()*10);function NK(e){var t=["__\0is_clz",DK++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function FK(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function BK(e,t,r){return this.superClass.prototype[t].apply(e,r)}function V1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){IK(i),n.prototype.type=i;var o=mo(i);if(!o.sub)t[o.main]=n;else if(o.sub!==qs){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[qs]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=mo(n),o=[],a=t[i.main];return a&&a[qs]?F(a,function(s,l){l!==qs&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=mo(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return F(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=mo(n),o=t[i.main];return o&&o[qs]};function r(n){var i=t[n.main];return(!i||!i[qs])&&(i=t[n.main]={},i[qs]=!0),i}}function jd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&ue(i,l)>=0||o&&ue(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var zK=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],$K=jd(zK),VK=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return $K(this,t,r)},e}(),DS=new E0(50);function UK(e){if(typeof e=="string"){var t=DS.get(e);return t&&t.image}else return e}function _7(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=DS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!U1(t)&&o.pending.push(a)):(t=au.loadImage(e,pk,pk),t.__zrImageSrc=e,DS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function pk(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function U1(e){return e&&e.width&&e.height}var B_=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function GK(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=b7(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=w7(o[a],i);return o.join(`
`)}function b7(e,t,r,n){n=n||{};var i=ot({},n);i.font=t,r=qt(r,"..."),i.maxIterations=qt(n.maxIterations,2);var o=i.minChar=qt(n.minChar,0);i.cnCharWidth=Pn("\u56FD",t);var a=i.ascCharWidth=Pn("a",t);i.placeholder=qt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=Pn(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function w7(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=Pn(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?jK(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=Pn(e,n)}return e===""&&(e=t.placeholder),e}function jK(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function WK(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=LP(i),s=qt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?S7(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=qt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=b7(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<f.length;g++)f[g]=w7(f[g],v);for(var m=d,y=0,g=0;g<f.length;g++)y=Math.max(Pn(f[g],i),y);c==null&&(c=y);var _=y;return n&&(m+=n[0]+n[2],_+=n[1]+n[3],c+=n[1]+n[3]),l&&(_=c),{lines:f,height:d,outerWidth:_,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:y,contentHeight:h,width:c}}var HK=function(){function e(){}return e}(),vk=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),XK=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function YK(e,t){var r=new XK;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=B_.lastIndex=0,l;(l=B_.exec(e))!=null;){var u=l.index;u>s&&z_(r,e.substring(s,u),t,a),z_(r,l[2],t,a,l[1]),s=B_.lastIndex}s<e.length&&z_(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function g(q,tt,Tt){q.width=tt,q.lineHeight=Tt,f+=Tt,h=Math.max(h,tt)}t:for(var m=0;m<r.lines.length;m++){for(var y=r.lines[m],_=0,w=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],P=S.styleName&&t.rich[S.styleName]||{},C=S.textPadding=P.padding,A=C?C[1]+C[3]:0,M=S.font=P.font||t.font;S.contentHeight=LP(M);var k=qt(P.height,S.contentHeight);if(S.innerHeight=k,C&&(k+=C[0]+C[2]),S.height=k,S.lineHeight=fd(P.lineHeight,t.lineHeight,k),S.align=P&&P.align||t.align,S.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),g(y,w,_),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break t}var O=P.width,B=O==null||O==="auto";if(typeof O=="string"&&O.charAt(O.length-1)==="%")S.percentWidth=O,c.push(S),S.contentWidth=Pn(S.text,M);else{if(B){var $=P.backgroundColor,D=$&&$.image;D&&(D=UK(D),U1(D)&&(S.width=Math.max(S.width,D.width*k/D.height)))}var j=p&&n!=null?n-w:null;j!=null&&j<S.width?!B||j<A?(S.text="",S.width=S.contentWidth=0):(S.text=GK(S.text,j-A,M,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=Pn(S.text,M)):S.contentWidth=Pn(S.text,M)}S.width+=A,w+=S.width,P&&(_=Math.max(_,S.lineHeight))}g(y,w,_)}r.outerWidth=r.width=qt(n,h),r.outerHeight=r.height=qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var S=c[m],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function z_(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ua(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=S7(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],y=new HK;if(y.styleName=i,y.text=m,y.isLineHolder=!m&&!o,typeof a.width=="number"?y.width=a.width:y.width=f?f[g]:Pn(m,l),!g&&!u){var _=(s[s.length-1]||(s[0]=new vk)).tokens,w=_.length;w===1&&_[0].isLineHolder?_[0]=y:(m||!w||o)&&_.push(y)}else s.push(new vk([y]))}}function qK(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var ZK=su(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function KK(e){return qK(e)?!!ZK[e]:!0}function S7(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=Pn(h,t),p=n?!1:!KK(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var NS="__zr_style_"+Math.round(Math.random()*10),Nl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},G1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Nl[NS]=!0;var gk=["z","z2","invisible"],JK=["invisible"],QK=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&tJ(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new oe(0,0,0,0)),n?oe.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new oe(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ot(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Gh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Gh)},t.prototype.styleUpdated=function(){this.__dirty&=~Gh},t.prototype.createStyle=function(r){return z1(Nl,r)},t.prototype.useStyle=function(r){r[NS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[NS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,gk)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ve(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ve(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?JK:gk,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ot(r,n),r},t.prototype.getAnimationStyleProps=function(){return G1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Sn|Gh}(),t}(a7),$_=new oe(0,0,0,0),V_=new oe(0,0,0,0);function tJ(e,t,r){return $_.copy(e.getBoundingRect()),e.transform&&$_.applyTransform(e.transform),V_.width=t,V_.height=r,!$_.intersect(V_)}const lu=QK;var an=Math.min,sn=Math.max,U_=Math.sin,G_=Math.cos,Zs=Math.PI*2,Cp=lf(),Mp=lf(),kp=lf();function eJ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=an(i,n[0]),o=sn(o,n[0]),a=an(a,n[1]),s=sn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function mk(e,t,r,n,i,o){i[0]=an(e,r),i[1]=an(t,n),o[0]=sn(e,r),o[1]=sn(t,n)}var yk=[],_k=[];function rJ(e,t,r,n,i,o,a,s,l,u){var c=K9,f=or,h=c(e,r,i,a,yk);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,yk[d]);l[0]=an(p,l[0]),u[0]=sn(p,u[0])}h=c(t,n,o,s,_k);for(var d=0;d<h;d++){var v=f(t,n,o,s,_k[d]);l[1]=an(v,l[1]),u[1]=sn(v,u[1])}l[0]=an(e,l[0]),u[0]=sn(e,u[0]),l[0]=an(a,l[0]),u[0]=sn(a,u[0]),l[1]=an(t,l[1]),u[1]=sn(t,u[1]),l[1]=an(s,l[1]),u[1]=sn(s,u[1])}function nJ(e,t,r,n,i,o,a,s){var l=J9,u=kr,c=sn(an(l(e,r,i),1),0),f=sn(an(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=an(e,i,h),a[1]=an(t,o,d),s[0]=sn(e,i,h),s[1]=sn(t,o,d)}function iJ(e,t,r,n,i,o,a,s,l){var u=dc,c=pc,f=Math.abs(i-o);if(f%Zs<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(Cp[0]=G_(i)*r+e,Cp[1]=U_(i)*n+t,Mp[0]=G_(o)*r+e,Mp[1]=U_(o)*n+t,u(s,Cp,Mp),c(l,Cp,Mp),i=i%Zs,i<0&&(i=i+Zs),o=o%Zs,o<0&&(o=o+Zs),i>o&&!a?o+=Zs:i<o&&a&&(i+=Zs),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(kp[0]=G_(d)*r+e,kp[1]=U_(d)*n+t,u(s,kp,s),c(l,kp,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ks=[],Js=[],Hi=[],ka=[],Xi=[],Yi=[],j_=Math.min,W_=Math.max,Qs=Math.cos,tl=Math.sin,zo=Math.abs,FS=Math.PI,ts=FS*2,H_=typeof Float32Array<"u",Zf=[];function X_(e){var t=Math.round(e/FS*1e8)/1e8;return t%2*FS}function oJ(e,t){var r=X_(e[0]);r<0&&(r+=ts);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=ts?i=r+ts:t&&r-i>=ts?i=r-ts:!t&&r>i?i=r+(ts-X_(r-i)):t&&r<i&&(i=r-(ts-X_(i-r))),e[0]=r,e[1]=i}var aJ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=zo(n/Cm/t)||0,this._uy=zo(n/Cm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=zo(t-this._xi),i=zo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),Zf[0]=i,Zf[1]=o,oJ(Zf,a),i=Zf[0],o=Zf[1];var s=o-i;return this.addData(ye.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=Qs(o)*n+t,this._yi=tl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&H_&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();H_&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,H_&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Hi[0]=Hi[1]=Xi[0]=Xi[1]=Number.MAX_VALUE,ka[0]=ka[1]=Yi[0]=Yi[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case ye.M:r=i=t[a++],n=o=t[a++],Xi[0]=i,Xi[1]=o,Yi[0]=i,Yi[1]=o;break;case ye.L:mk(r,n,t[a],t[a+1],Xi,Yi),r=t[a++],n=t[a++];break;case ye.C:rJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Xi,Yi),r=t[a++],n=t[a++];break;case ye.Q:nJ(r,n,t[a++],t[a++],t[a],t[a+1],Xi,Yi),r=t[a++],n=t[a++];break;case ye.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=Qs(d)*f+u,o=tl(d)*h+c),iJ(u,c,f,h,d,p,v,Xi,Yi),r=Qs(p)*f+u,n=tl(p)*h+c;break;case ye.R:i=r=t[a++],o=n=t[a++];var g=t[a++],m=t[a++];mk(i,o,i+g,o+m,Xi,Yi);break;case ye.Z:r=i,n=o;break}dc(Hi,Hi,Xi),pc(ka,ka,Yi)}return a===0&&(Hi[0]=Hi[1]=ka[0]=ka[1]=0),new oe(Hi[0],Hi[1],ka[0]-Hi[0],ka[1]-Hi[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case ye.M:o=s=t[h++],a=l=t[h++];break;case ye.L:{var g=t[h++],m=t[h++],y=g-o,_=m-a;(zo(y)>n||zo(_)>i||h===r-1)&&(v=Math.sqrt(y*y+_*_),o=g,a=m);break}case ye.C:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++],S=t[h++],P=t[h++];v=bZ(o,a,w,T,g,m,S,P,10),o=S,a=P;break}case ye.Q:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++];v=TZ(o,a,w,T,g,m,10),o=g,a=m;break}case ye.A:var C=t[h++],A=t[h++],M=t[h++],k=t[h++],O=t[h++],B=t[h++],$=B+O;h+=1,t[h++],p&&(s=Qs(O)*M+C,l=tl(O)*k+A),v=W_(M,k)*j_(ts,Math.abs(B)),o=Qs($)*M+C,a=tl($)*k+A;break;case ye.R:{s=o=t[h++],l=a=t[h++];var D=t[h++],j=t[h++];v=D*2+j*2;break}case ye.Z:{var y=s-o,_=l-a;v=Math.sqrt(y*y+_*_),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,y,_=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y))return;t:for(var S=0;S<a;){var P=n[S++],C=S===1;switch(C&&(u=n[S],c=n[S+1],s=u,l=c),P!==ye.L&&_>0&&(t.lineTo(w,T),_=0),P){case ye.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=zo(f-u),M=zo(h-c);if(A>i||M>o){if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;t.lineTo(u*(1-O)+f*O,c*(1-O)+h*O);break t}g+=k}t.lineTo(f,h),u=f,c=h,_=0}else{var B=A*A+M*M;B>_&&(w=f,T=h,_=B)}break}case ye.C:{var $=n[S++],D=n[S++],j=n[S++],Z=n[S++],q=n[S++],tt=n[S++];if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;Pm(u,$,j,q,O,Ks),Pm(c,D,Z,tt,O,Js),t.bezierCurveTo(Ks[1],Js[1],Ks[2],Js[2],Ks[3],Js[3]);break t}g+=k}t.bezierCurveTo($,D,j,Z,q,tt),u=q,c=tt;break}case ye.Q:{var $=n[S++],D=n[S++],j=n[S++],Z=n[S++];if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;Em(u,$,j,O,Ks),Em(c,D,Z,O,Js),t.quadraticCurveTo(Ks[1],Js[1],Ks[2],Js[2]);break t}g+=k}t.quadraticCurveTo($,D,j,Z),u=j,c=Z;break}case ye.A:var Tt=n[S++],Ot=n[S++],bt=n[S++],wt=n[S++],Ht=n[S++],Y=n[S++],nt=n[S++],K=!n[S++],pt=bt>wt?bt:wt,St=zo(bt-wt)>.001,At=Ht+Y,st=!1;if(d){var k=p[m++];g+k>y&&(At=Ht+Y*(y-g)/k,st=!0),g+=k}if(St&&t.ellipse?t.ellipse(Tt,Ot,bt,wt,nt,Ht,At,K):t.arc(Tt,Ot,pt,Ht,At,K),st)break t;C&&(s=Qs(Ht)*bt+Tt,l=tl(Ht)*wt+Ot),u=Qs(At)*bt+Tt,c=tl(At)*wt+Ot;break;case ye.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ft=n[S++],z=n[S++];if(d){var k=p[m++];if(g+k>y){var G=y-g;t.moveTo(f,h),t.lineTo(f+j_(G,ft),h),G-=ft,G>0&&t.lineTo(f+ft,h+j_(G,z)),G-=z,G>0&&t.lineTo(f+W_(ft-G,0),h+z),G-=ft,G>0&&t.lineTo(f,h+W_(z-G,0));break t}g+=k}t.rect(f,h,ft,z);break;case ye.Z:if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;t.lineTo(u*(1-O)+s*O,c*(1-O)+l*O);break t}g+=k}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const ql=aJ;function Iu(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function sJ(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=_Z(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function lJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=SZ(e,t,r,n,i,o,s,l,null);return c<=u/2}var bk=Math.PI*2;function xp(e){return e%=bk,e<0&&(e+=bk),e}var Kf=Math.PI*2;function uJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%Kf<1e-4)return!0;if(o){var f=n;n=xp(i),i=xp(f)}else n=xp(n),i=xp(i);n>i&&(i+=Kf);var h=Math.atan2(l,s);return h<0&&(h+=Kf),h>=n&&h<=i||h+Kf>=n&&h+Kf<=i}function el(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var xa=ql.CMD,rl=Math.PI*2,cJ=1e-4;function fJ(e,t){return Math.abs(e-t)<cJ}var Wr=[-1,-1,-1],jn=[-1,-1];function hJ(){var e=jn[0];jn[0]=jn[1],jn[1]=e}function dJ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=Tm(t,n,o,s,u,Wr);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=Wr[v],m=g===0||g===1?.5:1,y=or(e,r,i,a,g);y<l||(h<0&&(h=K9(t,n,o,s,jn),jn[1]<jn[0]&&h>1&&hJ(),d=or(t,n,o,s,jn[0]),h>1&&(p=or(t,n,o,s,jn[1]))),h===2?g<jn[0]?f+=d<t?m:-m:g<jn[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<jn[0]?f+=d<t?m:-m:f+=s<d?m:-m)}return f}function pJ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=wZ(t,n,o,s,Wr);if(l===0)return 0;var u=J9(t,n,o);if(u>=0&&u<=1){for(var c=0,f=kr(t,n,o,u),h=0;h<l;h++){var d=Wr[h]===0||Wr[h]===1?.5:1,p=kr(e,r,i,Wr[h]);p<a||(Wr[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=Wr[0]===0||Wr[0]===1?.5:1,p=kr(e,r,i,Wr[0]);return p<a?0:o<t?d:-d}}function vJ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);Wr[0]=-l,Wr[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=rl-1e-4){n=0,i=rl;var c=o?1:-1;return a>=Wr[0]+e&&a<=Wr[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=rl,i+=rl);for(var h=0,d=0;d<2;d++){var p=Wr[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=rl+v),(v>=n&&v<=i||v+rl>=n&&v+rl<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function T7(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],g=p===1;switch(v===xa.M&&p>1&&(r||(s+=el(l,u,c,f,n,i))),g&&(l=o[p],u=o[p+1],c=l,f=u),v){case xa.M:c=o[p++],f=o[p++],l=c,u=f;break;case xa.L:if(r){if(Iu(l,u,o[p],o[p+1],t,n,i))return!0}else s+=el(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case xa.C:if(r){if(sJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=dJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case xa.Q:if(r){if(lJ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=pJ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case xa.A:var m=o[p++],y=o[p++],_=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var P=!!(1-o[p++]);h=Math.cos(T)*_+m,d=Math.sin(T)*w+y,g?(c=h,f=d):s+=el(l,u,h,d,n,i);var C=(n-m)*w/_+m;if(r){if(uJ(m,y,w,T,T+S,P,t,C,i))return!0}else s+=vJ(m,y,w,T,T+S,P,C,i);l=Math.cos(T+S)*_+m,u=Math.sin(T+S)*w+y;break;case xa.R:c=l=o[p++],f=u=o[p++];var A=o[p++],M=o[p++];if(h=c+A,d=f+M,r){if(Iu(c,f,h,f,t,n,i)||Iu(h,f,h,d,t,n,i)||Iu(h,d,c,d,t,n,i)||Iu(c,d,c,f,t,n,i))return!0}else s+=el(h,f,h,d,n,i),s+=el(c,d,c,f,n,i);break;case xa.Z:if(r){if(Iu(l,u,c,f,t,n,i))return!0}else s+=el(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!fJ(u,f)&&(s+=el(l,u,c,f,n,i)||0),s!==0}function gJ(e,t,r){return T7(e,0,!1,t,r)}function mJ(e,t,r,n){return T7(e,t,!0,r,n)}var P7=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Nl),yJ={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},G1.style)},Y_=To.concat(["invisible","culling","z","z2","zlevel","parent"]),_J=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<Y_.length;++s)i[Y_[s]]=this[Y_[s]];i.__dirty|=Sn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ve(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Et(r)){var n=Am(r,0);return n>.5?IS:n>.2?ZZ:OS}else if(r)return OS}return IS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Et(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=Am(r,0)<LS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~uc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new ql(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&uc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),mJ(s,l/u,r,n)))return!0}if(this.hasFill())return gJ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=uc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ot(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&uc)},t.prototype.createStyle=function(r){return z1(P7,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ot({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=ot({},i.shape),ot(u,n.shape)):(u=ot({},o?this.shape:i.shape),ot(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=ot({},this.shape);for(var c={},f=ve(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return yJ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ae(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return $t(r.style)},a.prototype.getDefaultShape=function(){return $t(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Sn|Gh|uc}(),t}(lu);const fe=_J;var bJ=te({strokeFirst:!0,font:Hl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},P7),E7=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return z1(bJ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=xP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(lu);E7.prototype.type="tspan";const BS=E7;var wJ=te({x:0,y:0},Nl),SJ={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},G1.style)};function TJ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var A7=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return z1(wJ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=TJ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return SJ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new oe(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(lu);A7.prototype.type="image";const _a=A7;function PJ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var gc=Math.round;function C7(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(gc(n*2)===gc(i*2)&&(e.x1=e.x2=Cl(n,s,!0)),gc(o*2)===gc(a*2)&&(e.y1=e.y2=Cl(o,s,!0))),e}}function M7(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=Cl(n,s,!0),e.y=Cl(i,s,!0),e.width=Math.max(Cl(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(Cl(i+a,s,!1)-e.y,a===0?0:1)),e}}function Cl(e,t,r){if(!t)return e;var n=gc(e*2);return(n+gc(t))%2===0?n/2:(n+(r?1:-1))/2}var EJ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),AJ={},k7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new EJ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=M7(AJ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?PJ(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(fe);k7.prototype.type="rect";const Ke=k7;var wk={fill:"#000"},Sk=2,CJ={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},G1.style)},x7=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=wk,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,IJ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new oe(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||wk},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ot(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ve(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},ot(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return CJ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Hl,i=r.padding,o=kk(r),a=WK(o,r),s=q_(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",_=v,w=cc(g,a.contentHeight,y);if(s||i){var T=Wh(v,c,m),S=cc(g,u,y);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(_=Mk(v,m,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var P=0,C=!1,A=Ck("fill"in r?r.fill:(C=!0,p.fill)),M=Ak("stroke"in r?r.stroke:!l&&(!p.autoStroke||C)?(P=Sk,p.stroke):null),k=r.textShadowBlur>0,O=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=a.calculatedLineHeight,$=0;$<h.length;$++){var D=this._getOrCreateChild(BS),j=D.createStyle();D.useStyle(j),j.text=h[$],j.x=_,j.y=w,m&&(j.textAlign=m),j.textBaseline="middle",j.opacity=r.opacity,j.strokeFirst=!0,k&&(j.shadowBlur=r.textShadowBlur||0,j.shadowColor=r.textShadowColor||"transparent",j.shadowOffsetX=r.textShadowOffsetX||0,j.shadowOffsetY=r.textShadowOffsetY||0),j.stroke=M,j.fill=A,M&&(j.lineWidth=r.lineWidth||P,j.lineDash=r.lineDash,j.lineDashOffset=r.lineDashOffset||0),j.font=n,Pk(j,r),w+=d,O&&D.setBoundingRect(new oe(Wh(j.x,r.width,j.textAlign),cc(j.y,B,j.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=kk(r),i=YK(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Wh(u,a,h),v=cc(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var y=g+o;q_(r)&&this._renderBackground(r,r,p,v,a,s);for(var _=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,P=S.length,C=T.lineHeight,A=T.width,M=0,k=g,O=y,B=P-1,$=void 0;M<P&&($=S[M],!$.align||$.align==="left");)this._placeToken($,r,C,m,k,"left",_),A-=$.width,k+=$.width,M++;for(;B>=0&&($=S[B],$.align==="right");)this._placeToken($,r,C,m,O,"right",_),A-=$.width,O-=$.width,B--;for(k+=(o-(k-g)-(y-O)-A)/2;M<=B;)$=S[M],this._placeToken($,r,C,m,k+$.width/2,"center",_),k+=$.width,M++;m+=C}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&q_(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=Mk(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(BS),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,y=!1,_=0,w=Ck("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,m.fill)),T=Ak("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||y)?(_=Sk,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=a,g.y=f,S&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||Hl,g.opacity=fd(u.opacity,n.opacity,1),Pk(g,u),T&&(g.lineWidth=fd(u.lineWidth,n.lineWidth,_),g.lineDash=qt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),w&&(g.fill=w);var P=r.contentWidth,C=r.contentHeight;v.setBoundingRect(new oe(Wh(g.x,P,g.textAlign),cc(g.y,C,g.textBaseline),P,C))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Ke),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=o,m.width=a,m.height=s,m.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=qt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(_a),g.onload=function(){p.dirtyStyle()};var _=g.style;_.image=l.image,_.x=i,_.y=o,_.width=a,_.height=s}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=qt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(v||g).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=fd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return LJ(r)&&(n=[r.fontStyle,r.fontWeight,xJ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&vo(n)||r.textFont||r.font},t}(lu),MJ={left:!0,right:1,center:1},kJ={top:1,bottom:1,middle:1},Tk=["fontStyle","fontWeight","fontSize","fontFamily"];function xJ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?bP+"px":e+"px"}function Pk(e,t){for(var r=0;r<Tk.length;r++){var n=Tk[r],i=t[n];i!=null&&(e[n]=i)}}function LJ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function IJ(e){return Ek(e),F(e.rich,Ek),e}function Ek(e){if(e){e.font=x7.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||MJ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||kJ[r]?r:"top";var n=e.padding;n&&(e.padding=N9(e.padding))}}function Ak(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Ck(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function Mk(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function kk(e){var t=e.text;return t!=null&&(t+=""),t}function q_(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Je=x7;var ne=Oe(),OJ=function(e,t,r,n){if(n){var i=ne(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ne(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},xk=1,Lk={},L7=Oe(),FP=Oe(),BP=0,M0=1,j1=2,ti=["emphasis","blur","select"],Ik=["normal","emphasis","blur","select"],RJ=10,DJ=9,Fl="highlight",Bg="downplay",vd="select",zg="unselect",gd="toggleSelect";function Ou(e){return e!=null&&e!=="none"}var Ok=new E0(100);function Rk(e){if(Et(e)){var t=Ok.get(e);return t||(t=ZM(e,-.1),Ok.put(e,t)),t}else if(B1(e)){var r=ot({},e);return r.colorStops=Mt(e.colorStops,function(n){return{offset:n.offset,color:ZM(n.color,-.1)}}),r}return e}function W1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function I7(e){W1(e,"emphasis",j1)}function O7(e){e.hoverState===j1&&W1(e,"normal",BP)}function zP(e){W1(e,"blur",M0)}function R7(e){e.hoverState===M0&&W1(e,"normal",BP)}function NJ(e){e.selected=!0}function FJ(e){e.selected=!1}function Dk(e,t,r){t(e,r)}function ba(e,t,r){Dk(e,t,r),e.isGroup&&e.traverse(function(n){Dk(n,t,r)})}function zS(e,t){switch(t){case"emphasis":e.hoverState=j1;break;case"normal":e.hoverState=BP;break;case"blur":e.hoverState=M0;break;case"select":e.selected=!0}}function BJ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function zJ(e,t,r,n){var i=r&&ue(r,"select")>=0,o=!1;if(e instanceof fe){var a=L7(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Ou(s)||Ou(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ot({},n),u=ot({},u),u.fill=s):!Ou(u.fill)&&Ou(s)?(o=!0,n=ot({},n),u=ot({},u),u.fill=Rk(s)):!Ou(u.stroke)&&Ou(l)&&(o||(n=ot({},n),u=ot({},u)),u.stroke=Rk(l)),n.style=u}}if(n&&n.z2==null){o||(n=ot({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:RJ)}return n}function $J(e,t,r){if(r&&r.z2==null){r=ot({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:DJ)}return r}function VJ(e,t,r){var n=ue(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:BJ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=ot({},r),a=ot({opacity:n?i:o.opacity*.1},a),r.style=a),r}function Z_(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return zJ(this,e,t,r);if(e==="blur")return VJ(this,e,r);if(e==="select")return $J(this,e,r)}return r}function $P(e){e.stateProxy=Z_;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Z_),r&&(r.stateProxy=Z_)}function Nk(e,t){!B7(e,t)&&!e.__highByOuter&&ba(e,I7)}function Fk(e,t){!B7(e,t)&&!e.__highByOuter&&ba(e,O7)}function Wd(e,t){e.__highByOuter|=1<<(t||0),ba(e,I7)}function Hd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&ba(e,O7)}function D7(e){ba(e,zP)}function VP(e){ba(e,R7)}function N7(e){ba(e,NJ)}function F7(e){ba(e,FJ)}function B7(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function z7(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=FP(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){R7(u)}),s&&r.push(o)),a.isBlured=!1}),F(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function $S(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&VP(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){zP(g)}),Fr(t))o(u.getData(),t);else if(It(t))for(var p=ve(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),FP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function VS(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){FP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){zP(o)})}}}function UJ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Yl(i,t);o=(ct(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ne(a);$S(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&$S(n,c,f,r)}}}function UP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ne(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function GJ(e,t,r){var n=ne(e),i=UP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&VS(n.componentMainType,n.componentIndex,r),F(o,function(s){return Nk(s,t)})):($S(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&VS(n.componentMainType,n.componentIndex,r),Nk(e,t))}function jJ(e,t,r){z7(r);var n=ne(e),i=UP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?F(i,function(o){return Fk(o,t)}):Fk(e,t)}function WJ(e,t,r){if(!!jS(t)){var n=t.dataType,i=e.getData(n),o=Yl(i,t);ct(o)||(o=[o]),e[t.type===gd?"toggleSelect":t.type===vd?"select":"unselect"](o,n)}}function Bk(e){var t=e.getAllData();F(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?N7(o):F7(o)})})}function HJ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();F(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function US(e,t,r){GP(e,!0),ba(e,$P),YJ(e,t,r)}function XJ(e){GP(e,!1)}function Zl(e,t,r,n){n?XJ(e):US(e,t,r)}function YJ(e,t,r){var n=ne(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var zk=["emphasis","blur","select"],qJ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Xd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<zk.length;i++){var o=zk[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[qJ[r]]()}}function GP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function GS(e){return!!(e&&e.__highDownDispatcher)}function ZJ(e){var t=Lk[e];return t==null&&xk<=32&&(t=Lk[e]=xk++),t}function jS(e){var t=e.type;return t===vd||t===zg||t===gd}function $k(e){var t=e.type;return t===Fl||t===Bg}function KJ(e){var t=L7(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Ru=ql.CMD,JJ=[[],[],[]],Vk=Math.sqrt,QJ=Math.atan2;function tQ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Ru.M,f=Ru.C,h=Ru.L,d=Ru.R,p=Ru.A,v=Ru.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var g=t[4],m=t[5],y=Vk(t[0]*t[0]+t[1]*t[1]),_=Vk(t[2]*t[2]+t[3]*t[3]),w=QJ(-t[1]/_,t[0]/y);r[a]*=y,r[a++]+=g,r[a]*=_,r[a++]+=m,r[a++]*=y,r[a++]*=_,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],qr(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],qr(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=JJ[l];T[0]=r[a++],T[1]=r[a++],qr(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var K_=Math.sqrt,Lp=Math.sin,Ip=Math.cos,Jf=Math.PI;function Uk(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function WS(e,t){return(e[0]*t[0]+e[1]*t[1])/(Uk(e)*Uk(t))}function Gk(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(WS(e,t))}function jk(e,t,r,n,i,o,a,s,l,u,c){var f=l*(Jf/180),h=Ip(f)*(e-r)/2+Lp(f)*(t-n)/2,d=-1*Lp(f)*(e-r)/2+Ip(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=K_(p),s*=K_(p));var v=(i===o?-1:1)*K_((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,g=v*a*d/s,m=v*-s*h/a,y=(e+r)/2+Ip(f)*g-Lp(f)*m,_=(t+n)/2+Lp(f)*g+Ip(f)*m,w=Gk([1,0],[(h-g)/a,(d-m)/s]),T=[(h-g)/a,(d-m)/s],S=[(-1*h-g)/a,(-1*d-m)/s],P=Gk(T,S);if(WS(T,S)<=-1&&(P=Jf),WS(T,S)>=1&&(P=0),P<0){var C=Math.round(P/Jf*1e6)/1e6;P=Jf*2+C%2*Jf}c.addData(u,y,_,a,s,w,P,f,o)}var eQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,rQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function nQ(e){var t=new ql;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=ql.CMD,l=e.match(eQ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(rQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0,P=void 0,C=r,A=n,M=void 0,k=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,t.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[g++],h=s.L,t.addData(h,r,n);break;case"H":r=d[g++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,t.addData(h,r,n);break;case"V":n=d[g++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,t.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=d[g++],A=d[g++],r=d[g++],n=d[g++],t.addData(h,m,y,C,A,r,n);break;case"s":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=r+d[g++],A=n+d[g++],r+=d[g++],n+=d[g++],t.addData(h,m,y,C,A,r,n);break;case"Q":C=d[g++],A=d[g++],r=d[g++],n=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"q":C=d[g++]+r,A=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"T":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r=d[g++],n=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"t":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"A":_=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r=d[g++],n=d[g++],h=s.A,jk(C,A,r,n,S,P,_,w,T,h,t);break;case"a":_=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r+=d[g++],n+=d[g++],h=s.A,jk(C,A,r,n,S,P,_,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var $7=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(fe);function V7(e){return e.setData!=null}function U7(e,t){var r=nQ(e),n=ot({},t);return n.buildPath=function(i){if(V7(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){tQ(r,i),this.dirtyShape()},n}function iQ(e,t){return new $7(U7(e,t))}function oQ(e,t){var r=U7(e,t),n=function(i){Ae(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}($7);return n}function aQ(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new fe(t);return a.createPathProxy(),a.buildPath=function(s){if(V7(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var sQ=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),G7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new sQ},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(fe);G7.prototype.type="circle";const jP=G7;var lQ=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),j7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new lQ},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(fe);j7.prototype.type="ellipse";const W7=j7;var H7=Math.PI,J_=H7*2,nl=Math.sin,Du=Math.cos,uQ=Math.acos,Er=Math.atan2,Wk=Math.abs,md=Math.sqrt,Hh=Math.max,qi=Math.min,fi=1e-4;function cQ(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<fi))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Op(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/md(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,y=p-h,_=v-d,w=y*y+_*_,T=i-o,S=h*v-p*d,P=(_<0?-1:1)*md(Hh(0,T*T*w-S*S)),C=(S*_-y*P)/w,A=(-S*y-_*P)/w,M=(S*_+y*P)/w,k=(-S*y+_*P)/w,O=C-g,B=A-m,$=M-g,D=k-m;return O*O+B*B>$*$+D*D&&(C=M,A=k),{cx:C,cy:A,x0:-c,y0:-f,x1:C*(i/T-1),y1:A*(i/T-1)}}function fQ(e){var t;if(ct(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function hQ(e,t){var r,n=Hh(t.r,0),i=Hh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=Wk(u-l),p=d>J_&&d%J_;if(p>fi&&(d=p),!(n>fi))e.moveTo(c,f);else if(d>J_-fi)e.moveTo(c+n*Du(l),f+n*nl(l)),e.arc(c,f,n,l,u,!h),i>fi&&(e.moveTo(c+i*Du(u),f+i*nl(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0,P=void 0,C=void 0,A=void 0,M=void 0,k=void 0,O=void 0,B=void 0,$=void 0,D=n*Du(l),j=n*nl(l),Z=i*Du(u),q=i*nl(u),tt=d>fi;if(tt){var Tt=t.cornerRadius;Tt&&(r=fQ(Tt),v=r[0],g=r[1],m=r[2],y=r[3]);var Ot=Wk(n-i)/2;if(_=qi(Ot,m),w=qi(Ot,y),T=qi(Ot,v),S=qi(Ot,g),A=P=Hh(_,w),M=C=Hh(T,S),(P>fi||C>fi)&&(k=n*Du(u),O=n*nl(u),B=i*Du(l),$=i*nl(l),d<H7)){var bt=cQ(D,j,B,$,k,O,Z,q);if(bt){var wt=D-bt[0],Ht=j-bt[1],Y=k-bt[0],nt=O-bt[1],K=1/nl(uQ((wt*Y+Ht*nt)/(md(wt*wt+Ht*Ht)*md(Y*Y+nt*nt)))/2),pt=md(bt[0]*bt[0]+bt[1]*bt[1]);A=qi(P,(n-pt)/(K+1)),M=qi(C,(i-pt)/(K-1))}}}if(!tt)e.moveTo(c+D,f+j);else if(A>fi){var St=qi(m,A),At=qi(y,A),st=Op(B,$,D,j,n,St,h),ft=Op(k,O,Z,q,n,At,h);e.moveTo(c+st.cx+st.x0,f+st.cy+st.y0),A<P&&St===At?e.arc(c+st.cx,f+st.cy,A,Er(st.y0,st.x0),Er(ft.y0,ft.x0),!h):(St>0&&e.arc(c+st.cx,f+st.cy,St,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,n,Er(st.cy+st.y1,st.cx+st.x1),Er(ft.cy+ft.y1,ft.cx+ft.x1),!h),At>0&&e.arc(c+ft.cx,f+ft.cy,At,Er(ft.y1,ft.x1),Er(ft.y0,ft.x0),!h))}else e.moveTo(c+D,f+j),e.arc(c,f,n,l,u,!h);if(!(i>fi)||!tt)e.lineTo(c+Z,f+q);else if(M>fi){var St=qi(v,M),At=qi(g,M),st=Op(Z,q,k,O,i,-At,h),ft=Op(D,j,B,$,i,-St,h);e.lineTo(c+st.cx+st.x0,f+st.cy+st.y0),M<C&&St===At?e.arc(c+st.cx,f+st.cy,M,Er(st.y0,st.x0),Er(ft.y0,ft.x0),!h):(At>0&&e.arc(c+st.cx,f+st.cy,At,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,i,Er(st.cy+st.y1,st.cx+st.x1),Er(ft.cy+ft.y1,ft.cx+ft.x1),h),St>0&&e.arc(c+ft.cx,f+ft.cy,St,Er(ft.y1,ft.x1),Er(ft.y0,ft.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var dQ=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),X7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new dQ},t.prototype.buildPath=function(r,n){hQ(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(fe);X7.prototype.type="sector";const k0=X7;var pQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),Y7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new pQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(fe);Y7.prototype.type="ring";const q7=Y7;function vQ(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)dc(c,c,e[h]),pc(f,f,e[h]);dc(c,c,n[0]),pc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(Bq(e[h]));continue}else l=e[h-1],u=e[h+1];$9(o,u,l),p_(o,o,t);var v=mS(p,l),g=mS(p,u),m=v+g;m!==0&&(v/=m,g/=m),p_(a,o,-v),p_(s,o,g);var y=DM([],p,a),_=DM([],p,s);n&&(pc(y,y,c),dc(y,y,f),pc(_,_,c),dc(_,_,f)),i.push(y),i.push(_)}return r&&i.push(i.shift()),i}function Z7(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=vQ(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var gQ=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),K7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new gQ},t.prototype.buildPath=function(r,n){Z7(r,n,!0)},t}(fe);K7.prototype.type="polygon";const Yd=K7;var mQ=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),J7=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mQ},t.prototype.buildPath=function(r,n){Z7(r,n,!1)},t}(fe);J7.prototype.type="polyline";const Q7=J7;var yQ={},_Q=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),tN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _Q},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=C7(yQ,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(fe);tN.prototype.type="line";const Ps=tN;var rn=[],bQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function Hk(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?XM:or)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?XM:or)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?YM:kr)(e.x1,e.cpx1,e.x2,t),(r?YM:kr)(e.y1,e.cpy1,e.y2,t)]}var eN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new bQ},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Em(i,l,a,h,rn),l=rn[1],a=rn[2],Em(o,u,s,h,rn),u=rn[1],s=rn[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(Pm(i,l,c,a,h,rn),l=rn[1],c=rn[2],a=rn[3],Pm(o,u,f,s,h,rn),u=rn[1],f=rn[2],s=rn[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return Hk(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=Hk(this.shape,r,!0);return EP(n,n)},t}(fe);eN.prototype.type="bezier-curve";const H1=eN;var wQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),rN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new wQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(fe);rN.prototype.type="arc";const WP=rN;var SQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),fe.prototype.getBoundingRect.call(this)},t}(fe);const TQ=SQ;var PQ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const nN=PQ;var EQ=function(e){Ae(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(nN);const HP=EQ;var AQ=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(nN);const CQ=AQ;var il=[0,0],ol=[0,0],Rp=new xe,Dp=new xe,MQ=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new xe;for(var n=0;n<2;n++)this._axes[n]=new xe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);xe.sub(i[0],n[1],n[0]),xe.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Rp.set(1/0,1/0),Dp.set(0,0),!this._intersectCheckOneSide(this,t,Rp,Dp,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Rp,Dp,i,-1)&&(n=!1,i)||i||xe.copy(r,n?Rp:Dp),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,il),this._getProjMinMaxOnAxis(l,r._corners,ol),il[1]<ol[0]||il[0]>ol[1]){if(s=!1,o)return s;var c=Math.abs(ol[0]-il[1]),f=Math.abs(il[0]-ol[1]);Math.min(c,f)>i.len()&&(c<f?xe.scale(i,u,-c*a):xe.scale(i,u,f*a))}else if(n){var c=Math.abs(ol[0]-il[1]),f=Math.abs(il[0]-ol[1]);Math.min(c,f)<n.len()&&(c<f?xe.scale(n,u,c*a):xe.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const Lm=MQ;var kQ=[],xQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new oe(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(kQ)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(lu);const LQ=xQ;var IQ=Oe();function XP(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=qt(n.duration,200),c=qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function YP(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):It(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=XP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function hr(e,t,r,n,i,o){YP("update",e,t,r,n,i,o)}function Po(e,t,r,n,i,o){YP("enter",e,t,r,n,i,o)}function yd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Kl(e,t,r,n,i,o){yd(e)||YP("leave",e,t,r,n,i,o)}function Xk(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Kl(e,{style:{opacity:0}},t,r,n)}function HS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||Xk(i,t,r,n)}):Xk(e,t,r,n)}function iN(e){IQ(e).oldStyle=e.style}var Im=Math.max,Om=Math.min,XS={};function OQ(e){return fe.extend(e)}var RQ=oQ;function DQ(e,t){return RQ(e,t)}function Bi(e,t){XS[e]=t}function oN(e){if(XS.hasOwnProperty(e))return XS[e]}function X1(e,t,r,n){var i=iQ(e,t);return r&&(n==="center"&&(r=sN(r,i.getBoundingRect())),lN(i,r)),i}function aN(e,t,r){var n=new _a({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(sN(t,o))}}});return n}function sN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var NQ=aQ;function lN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function qd(e,t){return C7(e,e,{lineWidth:t}),e}function FQ(e){return M7(e.shape,e.shape,e.style),e}var BQ=Cl;function $g(e,t){for(var r=CP([]);e&&e!==t;)Cc(r,e.getLocalTransform(),r),e=e.parent;return r}function kc(e,t,r){return t&&!Fr(t)&&(t=Al.getLocalTransform(t)),r&&(t=$1([],t)),qr([],e,t)}function uN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=kc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Yk(e){return!e.isGroup}function zQ(e){return e.shape!=null}function cN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){Yk(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return zQ(a)&&(s.shape=ot({},a.shape)),s}var o=n(e);t.traverse(function(a){if(Yk(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),hr(a,l,r,ne(a).dataIndex)}}})}function $Q(e,t){return Mt(e,function(r){var n=r[0];n=Im(n,t.x),n=Om(n,t.x+t.width);var i=r[1];return i=Im(i,t.y),i=Om(i,t.y+t.height),[n,i]})}function VQ(e,t){var r=Im(e.x,t.x),n=Om(e.x+e.width,t.x+t.width),i=Im(e.y,t.y),o=Om(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function qP(e,t,r){var n=ot({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,r),new _a(n)):X1(e.replace("path://",""),n,r,"center")}function UQ(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(fN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function fN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=Q_(c,f,l,u);if(GQ(h))return!1;var d=e-i,p=t-o,v=Q_(d,p,l,u)/h;if(v<0||v>1)return!1;var g=Q_(d,p,c,f)/h;return!(g<0||g>1)}function Q_(e,t,r,n){return e*n-r*t}function GQ(e){return e<=1e-6&&e>=-1e-6}function ZP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Et(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&F(ve(l),function(c){ht(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ne(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:te({content:n,formatterParams:s},i)}}function qk(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function uf(e,t){if(e)if(ct(e))for(var r=0;r<e.length;r++)qk(e[r],t);else qk(e,t)}Bi("circle",jP);Bi("ellipse",W7);Bi("sector",k0);Bi("ring",q7);Bi("polygon",Yd);Bi("polyline",Q7);Bi("rect",Ke);Bi("line",Ps);Bi("bezierCurve",H1);Bi("arc",WP);const jQ=Object.freeze(Object.defineProperty({__proto__:null,updateProps:hr,initProps:Po,removeElement:Kl,removeElementWithFadeOut:HS,isElementRemoved:yd,extendShape:OQ,extendPath:DQ,registerShape:Bi,getShapeClass:oN,makePath:X1,makeImage:aN,mergePath:NQ,resizePath:lN,subPixelOptimizeLine:qd,subPixelOptimizeRect:FQ,subPixelOptimize:BQ,getTransform:$g,applyTransform:kc,transformDirection:uN,groupTransition:cN,clipPointsByRect:$Q,clipRectByRect:VQ,createIcon:qP,linePolygonIntersect:UQ,lineLineIntersect:fN,setTooltipConfig:ZP,traverseElements:uf,Group:De,Image:_a,Text:Je,Circle:jP,Ellipse:W7,Sector:k0,Ring:q7,Polygon:Yd,Polyline:Q7,Rect:Ke,Line:Ps,BezierCurve:H1,Arc:WP,IncrementalDisplayable:LQ,CompoundPath:TQ,LinearGradient:HP,RadialGradient:CQ,BoundingRect:oe,OrientedBoundingRect:Lm,Point:xe,Path:fe},Symbol.toStringTag,{value:"Module"}));var Y1={};function WQ(e,t){for(var r=0;r<ti.length;r++){var n=ti[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function Zk(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<ti.length;u++){var c=ti[u],f=t[c];l[c]=qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function cf(e,t,r,n){r=r||Y1;for(var i=e instanceof Je,o=!1,a=0;a<Ik.length;a++){var s=t[Ik[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Je,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=Zk(r,t),c=t.normal,f=!!c.getShallow("show"),h=fn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Rm(c,r,!1));for(var a=0;a<ti.length;a++){var d=ti[a],s=t[d];if(s){var p=l.ensureState(d),v=!!qt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=fn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=Rm(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(q1(l).setLabelText=function(m){var y=Zk(r,t,m);WQ(l,y)})}else l&&(l.ignore=!0);e.dirty()}function uu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ti.length;n++){var i=ti[n];r[i]=e.getModel([i,t])}return r}function fn(e,t,r,n,i){var o={};return HQ(o,e,r,n,i),t&&ot(o,t),o}function Rm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=qt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function HQ(e,t,r,n,i){r=r||Y1;var o=t.ecModel,a=o&&o.option.textStyle,s=XQ(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);t4(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),t4(e,t,a,r,n,i,!0,!1)}function XQ(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Y1).rich;if(r){t=t||{};for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var Kk=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Jk=["align","lineHeight","width","height","tag","verticalAlign"],Qk=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function t4(e,t,r,n,i,o,a,s){r=!i&&r||Y1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<Kk.length;v++){var g=Kk[v],m=qt(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<Jk.length;v++){var g=Jk[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!a||!n.disableBox){for(var v=0;v<Qk.length;v++){var g=Qk[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var _=t.getShallow("borderType");_!=null&&(e.borderDash=_),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function hN(e,t){var r=t&&t.getModel("textStyle");return vo([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var q1=Oe();function YQ(e,t,r,n){if(!!e){var i=q1(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var qQ=["textStyle","color"],t2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],e2=new Je,ZQ=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(qQ):null)},e.prototype.getFont=function(){return hN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<t2.length;n++)r[t2[n]]=this.getShallow(t2[n]);return e2.useStyle(r),e2.update(),e2.getBoundingRect()},e}();const KQ=ZQ;var dN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],JQ=jd(dN),QQ=function(){function e(){}return e.prototype.getLineStyle=function(t){return JQ(this,t)},e}(),pN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ttt=jd(pN),ett=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return ttt(this,t,r)},e}(),cu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){ie(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t($t(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Xt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();NP(cu);NK(cu);Ni(cu,QQ);Ni(cu,ett);Ni(cu,VK);Ni(cu,KQ);const br=cu;var rtt=Math.round(Math.random()*10);function Z1(e){return[e||"",rtt++].join("_")}function ntt(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=mo(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=mo(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function itt(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(F(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),F(p.successor,v?m:g)}F(h,function(){var y="";throw new Error(y)});function g(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function m(y){h[y]=!0,g(y)}};function r(o){var a={},s=[];return F(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),F(f,function(h){ue(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);ue(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return F(o,function(l){ue(a,l)>=0&&s.push(l)}),s}}function K1(e,t){return ie(ie({},e,!0),t,!0)}const ott={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},att={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Dm="ZH",KP="EN",Zd=KP,Vg={},JP={},vN=Xt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Dm)>-1?Dm:Zd}():Zd;function gN(e,t){e=e.toUpperCase(),JP[e]=new br(t),Vg[e]=t}function stt(e){if(Et(e)){var t=Vg[e.toUpperCase()]||{};return e===Dm||e===KP?$t(t):ie($t(t),$t(Vg[Zd]),!1)}else return ie($t(e),$t(Vg[Zd]),!1)}function ltt(e){return JP[e]}function utt(){return JP[Zd]}gN(KP,ott);gN(Dm,att);var QP=1e3,tE=QP*60,_d=tE*60,Yn=_d*24,e4=Yn*365,Xh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Np="{yyyy}-{MM}-{dd}",r4={year:"{yyyy}",month:"{yyyy}-{MM}",day:Np,hour:Np+" "+Xh.hour,minute:Np+" "+Xh.minute,second:Np+" "+Xh.second,millisecond:Xh.none},r2=["year","month","day","hour","minute","second","millisecond"],mN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function al(e,t){return e+="","0000".substr(0,t-e.length)+e}function xc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function ctt(e){return e===xc(e)}function ftt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function J1(e,t,r,n){var i=fa(e),o=i[eE(r)](),a=i[Lc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[Q1(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[Kd(r)](),f=(c-1)%12+1,h=i[ty(r)](),d=i[ey(r)](),p=i[ry(r)](),v=n instanceof br?n:ltt(n||vN)||utt(),g=v.getModel("time"),m=g.get("month"),y=g.get("monthAbbr"),_=g.get("dayOfWeek"),w=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,al(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,al(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,al(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,al(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,al(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,al(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,al(p,3)).replace(/{S}/g,p+"")}function htt(e,t,r,n,i){var o=null;if(Et(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=ot({},Xh);if(e.level>0)for(var s=0;s<r2.length;++s)a[r2[s]]="{primary|"+a[r2[s]]+"}";var l=r?r.inherit===!1?r:te(r,a):a,u=yN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=mN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ct(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return J1(new Date(e.value),o,i,n)}function yN(e,t){var r=fa(e),n=r[Lc(t)]()+1,i=r[Q1(t)](),o=r[Kd(t)](),a=r[ty(t)](),s=r[ey(t)](),l=r[ry(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function n4(e,t,r){var n=be(e)?fa(e):e;switch(t=t||yN(e,r),t){case"year":return n[eE(r)]();case"half-year":return n[Lc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Lc(r)]()+1)/4);case"month":return n[Lc(r)]();case"day":return n[Q1(r)]();case"half-day":return n[Kd(r)]()/24;case"hour":return n[Kd(r)]();case"minute":return n[ty(r)]();case"second":return n[ey(r)]();case"millisecond":return n[ry(r)]()}}function eE(e){return e?"getUTCFullYear":"getFullYear"}function Lc(e){return e?"getUTCMonth":"getMonth"}function Q1(e){return e?"getUTCDate":"getDate"}function Kd(e){return e?"getUTCHours":"getHours"}function ty(e){return e?"getUTCMinutes":"getMinutes"}function ey(e){return e?"getUTCSeconds":"getSeconds"}function ry(e){return e?"getUTCMilliseconds":"getMilliseconds"}function dtt(e){return e?"setUTCFullYear":"setFullYear"}function _N(e){return e?"setUTCMonth":"setMonth"}function bN(e){return e?"setUTCDate":"setDate"}function wN(e){return e?"setUTCHours":"setHours"}function SN(e){return e?"setUTCMinutes":"setMinutes"}function TN(e){return e?"setUTCSeconds":"setSeconds"}function PN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function EN(e){if(!pK(e))return Et(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function AN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var x0=N9;function YS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&vo(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?fa(e):e;if(isNaN(+l)){if(s)return"-"}else return J1(l,n,r)}if(t==="ordinal")return vS(e)?i(e):be(e)&&o(e)?e+"":"-";var u=Ts(e);return o(u)?EN(u):vS(e)?i(e):typeof e=="boolean"?e+"":"-"}var i4=["a","b","c","d","e","f","g"],n2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function CN(e,t,r){ct(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=i4[o];e=e.replace(n2(a),n2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(n2(i4[l],s),r?Hn(u):u)}return e}function ptt(e,t){var r=Et(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Hn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Hn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Jl(e,t){return t=t||"transparent",Et(e)?e:It(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function o4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Ug=F,vtt=["left","right","top","bottom","width","height"],Fp=[["width","left","right"],["height","top","bottom"]];function rE(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=a+g,p>i||l.newline?(o+=s+r,a=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Ic=rE;_e(rE,"vertical");_e(rE,"horizontal");function Es(e,t,r){r=x0(r||0);var n=t.width,i=t.height,o=We(e.left,n),a=We(e.top,i),s=We(e.right,n),l=We(e.bottom,i),u=We(e.width,n),c=We(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new oe(o+r[3],a+r[0],u,c);return p.margin=r,p}function gtt(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new oe(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Es(te({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function Jd(e){var t=e.layoutMode||e.constructor.layoutMode;return It(t)?t:t?{type:t}:null}function jc(e,t,r){var n=r&&r.ignoreSize;!ct(n)&&(n=[n,n]);var i=a(Fp[0],0),o=a(Fp[1],1);u(Fp[0],e,i),u(Fp[1],e,o);function a(c,f){var h={},d=0,p={},v=0,g=2;if(Ug(c,function(_){p[_]=e[_]}),Ug(c,function(_){s(t,_)&&(h[_]=p[_]=t[_]),l(h,_)&&d++,l(p,_)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var y=c[m];if(!s(h,y)&&s(e,y)){h[y]=e[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Ug(c,function(d){f[d]=h[d]})}}function ny(e){return mtt({},e)}function mtt(e,t){return t&&e&&Ug(vtt,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var ytt=Oe(),ff=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=Z1("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Jd(this),o=i?ny(r):{},a=n.getTheme();ie(r,a.get(this.mainType)),ie(r,this.getDefaultOption()),i&&jc(r,o,i)},t.prototype.mergeOption=function(r,n){ie(this.option,r,!0);var i=Jd(this);i&&jc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!OK(r))return r.defaultOption;var n=ytt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=ie(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return C0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(br);y7(ff,br);V1(ff);ntt(ff);itt(ff,_tt);function _tt(e){var t=[];return F(ff.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Mt(t,function(r){return mo(r).main}),e!=="dataset"&&ue(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=ff;var MN="";typeof navigator<"u"&&(MN=navigator.platform||"");var Nu="rgba(0, 0, 0, 0.2)";const btt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Nu,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Nu,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Nu,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Nu,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Nu,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Nu,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:MN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var kN=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ni="original",Kr="arrayRows",zi="objectRows",wa="keyedColumns",vs="typedArray",xN="unknown",_o="column",hf="row",yn={Must:1,Might:2,Not:3},LN=Oe();function wtt(e){LN(e).datasetMap=jt()}function Stt(e,t,r){var n={},i=IN(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=LN(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),F(e,function(v,g){var m=It(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});F(e,function(v,g){var m=v.name,y=p(v);if(c==null){var _=h.valueWayDim;d(n[m],_,y),d(a,_,y),h.valueWayDim+=y}else if(c===g)d(n[m],0,y),d(o,0,y);else{var _=h.categoryWayDim;d(n[m],_,y),d(a,_,y),h.categoryWayDim+=y}});function d(v,g,m){for(var y=0;y<m;y++)v.push(g+y)}function p(v){var g=v.dimsDef;return g?g.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function IN(e){var t=e.get("data",!0);if(!t)return C0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},wi).models[0]}function Ttt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:C0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},wi).models}function ON(e,t){return Ptt(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Ptt(e,t,r,n,i,o){var a,s=5;if(Mn(e))return yn.Not;var l,u;if(n){var c=n[o];It(c)?(l=c.name,u=c.type):Et(c)&&(l=c)}if(u!=null)return u==="ordinal"?yn.Must:yn.Not;if(t===Kr){var f=e;if(r===hf){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===zi){var v=e;if(!l)return yn.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(a=w(g[l]))!=null)return a}}else if(t===wa){var m=e;if(!l)return yn.Not;var h=m[l];if(!h||Mn(h))return yn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===ni)for(var y=e,d=0;d<y.length&&d<s;d++){var g=y[d],_=A0(g);if(!ct(_))return yn.Not;if((a=w(_[o]))!=null)return a}function w(T){var S=Et(T);if(T!=null&&isFinite(T)&&T!=="")return S?yn.Might:yn.Not;if(S&&T!=="-")return yn.Must}return yn.Not}var Ett=jt();function Att(e,t,r){var n=Ett.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var a4=Oe();Oe();var nE=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ze(this.get("color",!0)),o=this.get("colorLayer",!0);return Mtt(this,a4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){ktt(this,a4)},e}();function Ctt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Mtt(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Ctt(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function ktt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Bp,Qf,s4,l4="\0_ec_inner",xtt=1,RN=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new br(o),this._locale=new br(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=f4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,f4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?s4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&F(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;wtt(this),F(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?$t(f):ie(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Me.topologicalTravel(s,Me.getAllClassMainTypes(),c,this);function c(f){var h=Att(this,f,Ze(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=mK(d,h,p);PK(v,f,Me),i[f]=null,o.set(f,null),a.set(f,0);var g=[],m=[],y=0,_;F(v,function(w,T){var S=w.existing,P=w.newOption;if(!P)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var C=f==="series",A=Me.getClass(f,w.keyInfo.subType,!C);if(!A)return;if(f==="tooltip"){if(_)return;_=!0}if(S&&S.constructor===A)S.name=w.keyInfo.name,S.mergeOption(P,this),S.optionUpdated(P,!1);else{var M=ot({componentIndex:T},w.keyInfo);S=new A(P,this,this,M),ot(S,M),w.brandNew&&(S.__requireNewView=!0),S.init(P,this,this),S.optionUpdated(null,!0)}}S?(g.push(S.option),m.push(S),y++):(g.push(void 0),m.push(void 0))},this),i[f]=g,o.set(f,m),a.set(f,y),f==="series"&&Bp(this)}this._seriesIndices||Bp(this)},t.prototype.getOption=function(){var r=$t(this.option);return F(r,function(n,i){if(Me.hasClass(i)){for(var o=Ze(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Gd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[l4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],F(Ze(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=u4("id",o,s):a!=null?l=u4("name",a,s):l=yr(s,function(u){return!!u}),c4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):yr(this._componentsMap.get(i),function(u){return!!u});return l(c4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?yr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Et(r)?o.get(r):It(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Zn(r,null);return yr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return yr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return yr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){Qf(this),F(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){F(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){Qf(this),F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return F(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return Qf(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){Qf(this);var i=[];F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){Bp(this);var n=this._componentsMap,i=[];n.each(function(o,a){Me.hasClass(a)&&i.push(a)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){F(n.get(o),function(a){a&&(o!=="series"||!Ltt(a,r))&&a.restoreData()})})},t.internalField=function(){Bp=function(r){var n=r._seriesIndices=[];F(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},Qf=function(r){},s4=function(r,n){r.option={},r.option[l4]=xtt,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;It(i)&&i.enabled==null&&(i.enabled=!0),Itt(n,r._theme.option),ie(n,btt,!1),r._mergeOption(n,null)}}(),t}(br);function Ltt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Itt(e,t){var r=e.color&&!e.colorLayer;F(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?ie(e[i],n,!1):$t(n):e[i]==null&&(e[i]=n))})}function u4(e,t,r){if(ct(t)){var n=jt();return F(t,function(o){if(o!=null){var a=Zn(o,null);a!=null&&n.set(o,!0)}}),yr(r,function(o){return o&&n.get(o[e])})}else{var i=Zn(t,null);return yr(r,function(o){return o&&i!=null&&o[e]===i})}}function c4(e,t){return t.hasOwnProperty("subType")?yr(e,function(r){return r&&r.subType===t.subType}):e}function f4(e){var t=jt();return e&&F(Ze(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Ni(RN,nE);const DN=RN;var Ott=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Rtt=function(){function e(t){F(Ott,function(r){this[r]=Vt(t[r],t)},this)}return e}();const NN=Rtt;var i2={},Dtt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];F(i2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){F(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){i2[t]=r},e.get=function(t){return i2[t]},e}();const iE=Dtt;var Ntt=/^(min|max)?(.+)$/,Ftt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(F(Ze(t.series),function(a){a&&a.data&&Mn(a.data)&&wm(a.data)}),F(Ze(t.dataset),function(a){a&&a.source&&Mn(a.source)&&wm(a.source)})),t=$t(t);var i=this._optionBackup,o=Btt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],$t(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=$t(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)ztt(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!Vtt(a,this._currentMediaIndices)&&(s=Mt(a,function(c){return $t(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function Btt(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ct(u)&&F(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),F(l,function(d){return h(d)}),F(n,function(d){return h(d.option)});function h(d){F(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function ztt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return F(e,function(o,a){var s=a.match(Ntt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();$tt(n[u],o,l)||(i=!1)}}),i}function $tt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Vtt(e,t){return e.join(",")===t.join(",")}const Utt=Ftt;var ai=F,Qd=It,h4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function o2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=h4.length;r<n;r++){var i=h4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?ie(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?ie(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function xr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,te(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Yh(e){xr(e,"itemStyle"),xr(e,"lineStyle"),xr(e,"areaStyle"),xr(e,"label"),xr(e,"labelLine"),xr(e,"upperLabel"),xr(e,"edgeLabel")}function Xe(e,t){var r=Qd(e)&&e[t],n=Qd(r)&&r.textStyle;if(n)for(var i=0,o=dk.length;i<o;i++){var a=dk[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function Gn(e){e&&(Yh(e),Xe(e,"label"),e.emphasis&&Xe(e.emphasis,"label"))}function Gtt(e){if(!!Qd(e)){o2(e),Yh(e),Xe(e,"label"),Xe(e,"upperLabel"),Xe(e,"edgeLabel"),e.emphasis&&(Xe(e.emphasis,"label"),Xe(e.emphasis,"upperLabel"),Xe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(o2(t),Gn(t));var r=e.markLine;r&&(o2(r),Gn(r));var n=e.markArea;n&&Gn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!Mn(o))for(var a=0;a<o.length;a++)Gn(o[a]);F(e.categories,function(u){Yh(u)})}if(i&&!Mn(i))for(var a=0;a<i.length;a++)Gn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)Gn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ct(l[a])?(Gn(l[a][0]),Gn(l[a][1])):Gn(l[a]);e.type==="gauge"?(Xe(e,"axisLabel"),Xe(e,"title"),Xe(e,"detail")):e.type==="treemap"?(xr(e.breadcrumb,"itemStyle"),F(e.levels,function(u){Yh(u)})):e.type==="tree"&&Yh(e.leaves)}}function $o(e){return ct(e)?e:e?[e]:[]}function d4(e){return(ct(e)?e[0]:e)||{}}function jtt(e,t){ai($o(e.series),function(n){Qd(n)&&Gtt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),ai(r,function(n){ai($o(e[n]),function(i){i&&(Xe(i,"axisLabel"),Xe(i.axisPointer,"label"))})}),ai($o(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Xe(i,"axisLabel"),Xe(i&&i.axisPointer,"label")}),ai($o(e.calendar),function(n){xr(n,"itemStyle"),Xe(n,"dayLabel"),Xe(n,"monthLabel"),Xe(n,"yearLabel")}),ai($o(e.radar),function(n){Xe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),ai($o(e.geo),function(n){Qd(n)&&(Gn(n),ai($o(n.regions),function(i){Gn(i)}))}),ai($o(e.timeline),function(n){Gn(n),xr(n,"label"),xr(n,"itemStyle"),xr(n,"controlStyle",!0);var i=n.data;ct(i)&&F(i,function(o){It(o)&&(xr(o,"label"),xr(o,"itemStyle"))})}),ai($o(e.toolbox),function(n){xr(n,"iconStyle"),ai(n.feature,function(i){xr(i,"iconStyle")})}),Xe(d4(e.axisPointer),"label"),Xe(d4(e.tooltip).axisPointer,"label")}function Wtt(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Htt(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function p4(e){e&&F(Xtt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Xtt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Ytt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],a2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function th(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<a2.length;r++){var n=a2[r][1],i=a2[r][0];t[n]!=null&&(t[i]=t[n])}}function v4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function g4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function qtt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function FN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&FN(e[r].children,t)}function BN(e,t){jtt(e,t),e.series=Ze(e.series),F(e.series,function(r){if(!!It(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),v4(r.label);var i=r.data;if(i&&!Mn(i))for(var o=0;o<i.length;o++)v4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=Wtt(r,"pointer.color");a!=null&&Htt(r,"itemStyle.color",a)}else if(n==="bar"){th(r),th(r.backgroundStyle),th(r.emphasis);var i=r.data;if(i&&!Mn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(th(i[o]),th(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),g4(r),FN(r.data,g4)}else n==="graph"||n==="sankey"?qtt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&te(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),p4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),F(Ytt,function(r){var n=e[r];n&&(ct(n)||(n=[n]),F(n,function(i){p4(i)}))})}function Ztt(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(Ktt)}function Ktt(e){F(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var y=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=fK(h,y),v=y;break}}}return n[0]=h,n[1]=v,n})})}var iy=function(){function e(t){this.data=t.data||(t.sourceFormat===wa?{}:[]),this.sourceFormat=t.sourceFormat||xN,this.seriesLayoutBy=t.seriesLayoutBy||_o,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&ON(this,n)===yn.Must&&(i.type="ordinal")}}return e}();function oE(e){return e instanceof iy}function qS(e,t,r){r=r||zN(e);var n=t.seriesLayoutBy,i=Qtt(e,r,n,t.sourceHeader,t.dimensions),o=new iy({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:$t(t)});return o}function aE(e){return new iy({data:e,sourceFormat:Mn(e)?vs:ni})}function Jtt(e){return new iy({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:$t(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function zN(e){var t=xN;if(Mn(e))t=vs;else if(ct(e)){e.length===0&&(t=Kr);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ct(i)){t=Kr;break}else if(It(i)){t=zi;break}}}}else if(It(e)){for(var o in e)if(ht(e,o)&&Fr(e[o])){t=wa;break}}return t}function Qtt(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:m4(i),startIndex:a,dimensionsDetectedCount:o};if(t===Kr){var s=e;n==="auto"||n==null?y4(function(u){u!=null&&u!=="-"&&(Et(u)?a==null&&(a=1):a=0)},r,s,10):a=be(n)?n:n?1:0,!i&&a===1&&(i=[],y4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===hf?s.length:s[0]?s[0].length:null}else if(t===zi)i||(i=tet(e));else if(t===wa)i||(i=[],F(e,function(u,c){i.push(c)}));else if(t===ni){var l=A0(e[0]);o=ct(l)&&l.length||1}return{startIndex:a,dimensionsDefine:m4(i),dimensionsDetectedCount:o}}function tet(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return F(r,function(i,o){n.push(o)}),n}}function m4(e){if(!!e){var t=jt();return Mt(e,function(r,n){r=It(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function y4(e,t,r,n){if(t===hf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function $N(e){var t=e.sourceFormat;return t===zi||t===wa}var sl,ll,ul,_4,b4,VN=function(){function e(t,r){var n=oE(t)?t:aE(t);this._source=n;var i=this._data=n.data;n.sourceFormat===vs&&(this._offset=0,this._dimSize=r,this._data=i),b4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;b4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=_4[sE(u,c)];if(ot(a,d),u===vs)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=UN(u,c);a.getItem=Vt(p,null,s,f,h);var v=GN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-a,m=l[h],y=0;y<g;y++){var _=c[y*f+h];m[a+y]=_,_<p&&(p=_),_>v&&(v=_)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};_4=(t={},t[Kr+"_"+_o]={pure:!0,appendData:o},t[Kr+"_"+hf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[zi]={pure:!0,appendData:o},t[wa]={pure:!0,appendData:function(a){var s=this._data;F(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[ni]={appendData:o},t[vs]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),w4=function(e,t,r,n){return e[n]},eet=(sl={},sl[Kr+"_"+_o]=function(e,t,r,n){return e[n+t]},sl[Kr+"_"+hf]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},sl[zi]=w4,sl[wa]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},sl[ni]=w4,sl);function UN(e,t){var r=eet[sE(e,t)];return r}var S4=function(e,t,r){return e.length},ret=(ll={},ll[Kr+"_"+_o]=function(e,t,r){return Math.max(0,e.length-t)},ll[Kr+"_"+hf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},ll[zi]=S4,ll[wa]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},ll[ni]=S4,ll);function GN(e,t){var r=ret[sE(e,t)];return r}var s2=function(e,t,r){return e[t]},net=(ul={},ul[Kr]=s2,ul[zi]=function(e,t,r){return e[r]},ul[wa]=s2,ul[ni]=function(e,t,r){var n=A0(e);return n instanceof Array?n[t]:n},ul[vs]=s2,ul);function jN(e){var t=net[e];return t}function sE(e,t){return e===Kr?e+"_"+t:e}function Wc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return jN(o)(n,a,s)}else{var l=n;return o===ni&&(l=A0(n)),l}}}}var iet=/\{@(.+?)\}/g,WN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ct(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Et(o)){var c=CN(o,l);return c.replace(iet,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Wc(s,t,p);if(a&&ct(a.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=a.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Wc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function T4(e){var t,r;return It(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function bd(e){return new oet(e)}var oet=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ct(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){P4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:P4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ct(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),P4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function gs(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!be(e)&&e!=null&&e!=="-"&&(e=+fa(e)),e==null||e===""?NaN:+e)}var aet=jt({number:function(e){return parseFloat(e)},time:function(e){return+fa(e)},trim:function(e){return Et(e)?vo(e):e}});function HN(e){return aet.get(e)}var XN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},set=function(){function e(t,r){if(!be(r)){var n="";re(n)}this._opFn=XN[t],this._rvalFloat=Ts(r)}return e.prototype.evaluate=function(t){return be(t)?this._opFn(t,this._rvalFloat):this._opFn(Ts(t),this._rvalFloat)},e}(),YN=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=be(t)?t:Ts(t),i=be(r)?r:Ts(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Et(t),l=Et(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),uet=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Ts(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Ts(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function cet(e,t){return e==="eq"||e==="ne"?new uet(e==="eq",t):ht(XN,e)?new set(e,t):null}var fet=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return gs(t,r)},e}();function het(e,t){var r=new fet,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==_o&&re(a);var s=[],l={},u=e.dimensionsDefine;if(u)F(u,function(v,g){var m=v.name,y={index:g,name:m,displayName:v.displayName};if(s.push(y),m!=null){var _="";ht(l,m)&&re(_),l[m]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=UN(i,_o);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(det,null,e)),r.cloneRawData=Vt(pet,null,e);var h=GN(i,_o);r.count=Vt(h,null,n,o,s);var d=jN(i);r.retrieveValue=function(v,g){var m=f(n,o,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=Vt(vet,null,s,l),r.cloneAllDimensionInfo=Vt(get,null,s),r}function det(e){var t=e.sourceFormat;if(!lE(t)){var r="";re(r)}return e.data}function pet(e){var t=e.sourceFormat,r=e.data;if(!lE(t)){var n="";re(n)}if(t===Kr){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===zi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(ot({},r[o]));return i}}function vet(e,t,r){if(r!=null){if(be(r)||!isNaN(r)&&!ht(t,r))return e[r];if(ht(t,r))return t[r]}}function get(e){return $t(e)}var qN=jt();function met(e){e=$t(e);var t=e.type,r="";t||re(r);var n=t.split(":");n.length!==2&&re(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,qN.set(t,e)}function yet(e,t,r){var n=Ze(e),i=n.length,o="";i||re(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=_et(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function _et(e,t,r,n){var i="";t.length||re(i),It(e)||re(i);var o=e.type,a=qN.get(o);a||re(i);var s=Mt(t,function(u){return het(u,a)}),l=Ze(a.transform({upstream:s[0],upstreamList:s,config:$t(e.config)}));return Mt(l,function(u,c){var f="";It(u)||re(f),u.data||re(f);var h=zN(u.data);lE(h)||re(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:_o,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:_o,sourceHeader:0,dimensions:u.dimensions};return qS(u.data,d,null)})}function lE(e){return e===Kr||e===zi}var oy="undefined",bet=typeof Uint32Array===oy?Array:Uint32Array,wet=typeof Uint16Array===oy?Array:Uint16Array,ZN=typeof Int32Array===oy?Array:Int32Array,E4=typeof Float64Array===oy?Array:Float64Array,KN={float:E4,int:ZN,ordinal:Array,number:Array,time:E4},l2;function eh(e){return e>65535?bet:wet}function Fu(){return[1/0,-1/0]}function Tet(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function A4(e,t,r,n,i){var o=KN[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var Pet=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=l2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],$N(i),this._dimensions=Mt(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new KN[r||"float"](this._rawCount),this._rawExtent[o]=Fu(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=Fu());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];A4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=l2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var g=a[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Mt(a,function(y){return y.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Fu()),A4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=eh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=eh(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[t[g]][p];s[g]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ve(t),o=i.length;if(!o)return this;var a=r.count(),s=eh(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var g=d[i[0]],m=0;m<n;m++){var y=g[m];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var g=d[i[0]],_=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],m=0;m<n;m++){var y=g[m],S=_[m];(y>=f&&y<=h||isNaN(y))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var m=0;m<a;m++){var P=r.getRawIndex(m),y=d[i[0]][P];(y>=f&&y<=h||isNaN(y))&&(l[u++]=P)}else for(var m=0;m<a;m++){for(var C=!0,P=r.getRawIndex(m),A=0;A<o;A++){var M=i[A],y=d[M][P];(y<t[M][0]||y>t[M][1])&&(C=!1)}C&&(l[u++]=r.getRawIndex(m))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Fu();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],y=i[v];y&&(y[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(eh(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),g=Math.min(p+l*2,a),m=(g+v)/2,y=0,_=v;_<g;_++){var w=this.getRawIndex(_),T=o[w];isNaN(T)||(y+=T)}y/=g-v;var S=p,P=Math.min(p+l,a),C=p-1,A=o[u];c=-1,h=S;for(var M=-1,k=0,_=S;_<P;_++){var w=this.getRawIndex(_),T=o[w];if(isNaN(T)){k++,M<0&&(M=w);continue}f=Math.abs((C-m)*(T-A)-(C-_)*(y-A)),f>c&&(c=f,h=w)}k>0&&k<P-S&&(d[s++]=Math.min(M,h),h=Math.max(M,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=Fu(),h=new(eh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),y=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[y]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Fu();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&su(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?Tet(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=$t(this._extent),t._rawExtent=$t(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return gs(r[o],this._dimensions[o])}l2={arrayRows:t,objectRows:function(r,n,i,o){return gs(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return gs(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const ZS=Pet;var JN=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(zp(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=Mn(s)?vs:ni,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=qt(f.sourceHeader,h.sourceHeader),v=qt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[qS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var _=m.get("source",!0);i=[qS(_,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&M4(o)}var a,s=[],l=[];return F(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&M4(f),s.push(c),l.push(u._getVersionSign())}),n?a=yet(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[Jtt(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];zp(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new ZS,s.initData(new VN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(zp(t)){var r=IN(t);return r?[r.getSourceManager()]:[]}else return Mt(Ttt(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(zp(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function C4(e){var t=e.option.transform;t&&wm(e.option.transform)}function zp(e){return e.mainType==="series"}function M4(e){throw new Error(e)}var QN="line-height:1";function tF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Hn(n+"")+"px;color:"+Hn(r)+";font-weight:"+Hn(i+""),valueStyle:"font-size:"+Hn(a+"")+"px;color:"+Hn(o)+";font-weight:"+Hn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Eet=[0,10,20,30],Aet=["",`
`,`

`,`


`];function As(e,t){return t.type=e,t}function KS(e){return e.type==="section"}function eF(e){return KS(e)?Cet:Met}function rF(e){if(KS(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return F(e.blocks,function(i){var o=rF(i);o>=t&&(t=o+ +(n&&(!o||KS(i)&&!i.noHeader)))}),t}return 0}function Cet(e,t,r,n){var i=t.noHeader,o=ket(rF(t)),a=[],s=t.blocks||[];Li(!s||ct(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(ht(u,l)){var c=new YN(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}F(s,function(p,v){var g=t.valueFormatter,m=eF(p)(g?ot(ot({},e),{valueFormatter:g}):e,p,v>0?o.html:0,n);m!=null&&a.push(m)});var f=e.renderMode==="richText"?a.join(o.richText):JS(a.join(""),i?r:o.html);if(i)return f;var h=YS(t.header,"ordinal",e.useUTC),d=tF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?nF(e,h,d)+o.richText+f:JS('<div style="'+d+";"+QN+';">'+Hn(h)+"</div>"+f,r)}function Met(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ct(w)?w:[w],Mt(w,function(T,S){return YS(T,ct(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":YS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,g=!s&&o,m=tF(n,i),y=m.nameStyle,_=m.valueStyle;return i==="richText"?(s?"":f)+(o?"":nF(e,h,y))+(a?"":Iet(e,p,v,g,_)):JS((s?"":f)+(o?"":xet(h,!s,y))+(a?"":Let(p,v,g,_)),r)}}function k4(e,t,r,n,i,o){if(!!e){var a=eF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function ket(e){return{html:Eet[e],richText:Aet[e]}}function JS(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+QN+';">'+e+r+"</div>"}function xet(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Hn(e)+"</span>"}function Let(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ct(e)?e:[e],'<span style="'+o+";"+n+'">'+Mt(e,function(a){return Hn(a)}).join("&nbsp;&nbsp;")+"</span>"}function nF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Iet(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ct(t)?t.join("  "):t,o)}function Oet(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Jl(n)}function iF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var u2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=h7()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=ptt({color:r,type:t,renderMode:n,markerId:i});return Et(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ct(r)?F(r,function(o){return ot(n,o)}):ot(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Ret(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ct(s),u=Oet(t,r),c,f,h,d;if(a>1||l&&!a){var p=Det(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=Wc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var g=RP(t),m=g&&t.name||"",y=i.getName(r),_=n?m:y;return As("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[As("nameValue",{markerType:"item",markerColor:u,name:_,noName:!vo(_),value:c,valueType:f})].concat(h||[])})}function Det(e,t,r,n,i){var o=t.getData(),a=su(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?F(n,function(f){c(Wc(o,r,f),f)}):F(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(As("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var La=Oe();function $p(e,t){return e.getName(t)||e.getId(t)}var Net="__universalTransitionEnabled",ay=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=bd({count:Bet,reset:zet}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=La(this).sourceManager=new JN(this);o.prepareSource();var a=this.getInitialData(r,i);L4(a,this),this.dataTask.context.data=a,La(this).dataBeforeProcessed=a,x4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Jd(this),o=i?ny(r):{},a=this.subType;Me.hasClass(a)&&(a+="Series"),ie(r,n.getTheme().get(this.subType)),ie(r,this.getDefaultOption()),RS(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&jc(r,o,i)},t.prototype.mergeOption=function(r,n){r=ie(this.option,r,!0),this.fillDataTextStyle(r.data);var i=Jd(this);i&&jc(this.option,r,i);var o=La(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);L4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,La(this).dataBeforeProcessed=a,x4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!Mn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&RS(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=QS(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return La(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=QS(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}La(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return La(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return La(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Ret({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Xt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=nE.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=$p(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ve(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[$p(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Net])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){It(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=$p(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=$p(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Ni(ay,WN);Ni(ay,nE);y7(ay,Me);function x4(e){var t=e.name;RP(e)||(e.name=Fet(e)||t)}function Fet(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return F(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function Bet(e){return e.model.getRawData().count()}function zet(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),$et}function $et(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function L4(e,t){F(B9(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,_e(Vet,t))})}function Vet(e,t){var r=QS(e);return r&&r.setOutputEnd((t||this).count()),t}function QS(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Eo=ay;var uE=function(){function e(){this.group=new De,this.uid=Z1("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();NP(uE);V1(uE);const ei=uE;function cE(){var e=Oe();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var oF=Oe(),Uet=cE(),fE=function(){function e(){this.group=new De,this.uid=Z1("viewChart"),this.renderTask=bd({plan:Get,reset:jet}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||O4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||O4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){uf(this.group,t)},e.markUpdateMethod=function(t,r){oF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function I4(e,t,r){e&&GS(e)&&(t==="emphasis"?Wd:Hd)(e,r)}function O4(e,t,r){var n=Yl(e,t),i=t&&t.highlightKey!=null?ZJ(t.highlightKey):null;n!=null?F(Ze(n),function(o){I4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){I4(o,r,i)})}NP(fE);V1(fE);function Get(e){return Uet(e.model)}function jet(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&oF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),Wet[l]}var Wet={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Kn=fE;var Nm="\0__throttleOriginMethod",R4="\0__throttleRate",D4="\0__throttleType";function sy(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,g=c||r;c=null,s=n-(g?i:o)-v,clearTimeout(a),g?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function aF(e,t,r,n){var i=e[t];if(!!i){var o=i[Nm]||i,a=i[D4],s=i[R4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=sy(o,r,n==="debounce"),i[Nm]=o,i[D4]=n,i[R4]=r}return i}}function t3(e,t){var r=e[t];r&&r[Nm]&&(r.clear&&r.clear(),e[t]=r[Nm])}var N4=Oe(),F4={itemStyle:jd(pN,!0),lineStyle:jd(dN,!0)},Het={lineStyle:"stroke",itemStyle:"fill"};function sF(e,t){var r=e.visualStyleMapper||F4[t];return r||(console.warn("Unkown style type '"+t+"'."),F4.itemStyle)}function lF(e,t){var r=e.visualDrawType||Het[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Xet={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=sF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=lF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=ot({},a);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},rh=new br,Yet={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=sF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){rh.option=l[n];var u=i(rh),c=a.ensureUniqueItemVisual(s,"style");ot(c,u),rh.option.decal&&(a.setItemVisual(s,"decal",rh.option.decal),rh.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},qet={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),N4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=N4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=lF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},Vp=Math.PI;function Zet(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new De,n=new Ke({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Je({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ke({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new WP({shape:{startAngle:-Vp/2,endAngle:-Vp/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Vp*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Vp*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var Ket=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;F(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Li(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;F(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var y=a.getPerformArgs(g,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),a.updatePayload(g,n),g.perform(y)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||bd({plan:rrt,reset:nrt,count:ort}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||bd({reset:Jet});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Li(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,F(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,bd({reset:Qet,onDirty:ert})));m.context={model:v,overallProgress:f},m.agent=a,m.__block=f,o._pipe(v,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:art(t)}),t.uid=Z1("stageHandler"),r&&(t.visualType=r),t},e}();function Jet(e){e.overallReset(e.ecModel,e.api,e.payload)}function Qet(e){return e.overallProgress&&trt}function trt(){this.agent.dirty(),this.getDownstream().dirty()}function ert(){this.agent&&this.agent.dirty()}function rrt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function nrt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Mt(t,function(r,n){return uF(n)}):irt}var irt=uF(0);function uF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function ort(e){return e.data.count()}function art(e){Fm=null;try{e(t0,cF)}catch{}return Fm}var t0={},cF={},Fm;fF(t0,DN);fF(cF,NN);t0.eachSeriesByType=t0.eachRawSeriesByType=function(e){Fm=e};t0.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Fm=e.subType)};function fF(e,t){for(var r in t.prototype)e[r]=Dr}const hF=Ket;var B4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const srt={color:B4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],B4]};var jr="#B9B8CE",z4="#100C2A",Up=function(){return{axisLine:{lineStyle:{color:jr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},$4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],dF={darkMode:!0,color:$4,backgroundColor:z4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:jr}},textStyle:{color:jr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:jr}},dataZoom:{borderColor:"#71708A",textStyle:{color:jr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:jr}},timeline:{lineStyle:{color:jr},label:{color:jr},controlStyle:{color:jr,borderColor:jr}},calendar:{itemStyle:{color:z4},dayLabel:{color:jr},monthLabel:{color:jr},yearLabel:{color:jr}},timeAxis:Up(),logAxis:Up(),valueAxis:Up(),categoryAxis:Up(),line:{symbol:"circle"},graph:{color:$4},gauge:{title:{color:jr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:jr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};dF.categoryAxis.splitLine.show=!1;const lrt=dF;var urt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Et(t)){var o=mo(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};F(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),e3=["symbol","symbolSize","symbolRotate","symbolOffset"],V4=e3.concat(["symbolKeepAspect"]),crt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<e3.length;a++){var s=e3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ot({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ve(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:o?c:null}}},frt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<V4.length;s++){var l=V4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function pF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function ly(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function hrt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function Bu(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Yl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ct(h)?f.getName(h[0]):f.getName(h),selected:Et(l)?l:ot({},l)})}})}function drt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Bu("map","selectchanged",t,i,n),Bu("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Bu("map","selected",t,i,n),Bu("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Bu("map","unselected",t,i,n),Bu("pie","unselected",t,i,n))})}function mc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var prt=Math.round(Math.random()*9),vrt=typeof Object.defineProperty=="function",grt=function(){function e(){this._id="__ec_inner_"+prt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return vrt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const mrt=grt;var yrt=fe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),_rt=fe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),brt=fe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),wrt=fe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),Srt={line:Ps,rect:Ke,roundRect:Ke,square:Ke,circle:jP,diamond:_rt,pin:brt,arrow:wrt,triangle:yrt},Trt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},r3={};F(Srt,function(e,t){r3[t]=new e});var Prt=fe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Mm(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=r3[n];i||(n="rect",i=r3[n]),Trt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Ert(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Ii(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=aN(e.slice(8),new oe(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=X1(e.slice(7),{},new oe(t,r,n,i),a?"center":"cover"):l=new Prt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Ert,o&&l.setColor(o),l}function vF(e){return ct(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function hE(e,t){if(e!=null)return ct(e)||(e=[e,e]),[We(e[0],t[0])||0,We(qt(e[1],e[0]),t[1])||0]}function Ml(e){return isFinite(e)}function Art(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=Ml(n)?n:0,i=Ml(i)?i:1,o=Ml(o)?o:0,a=Ml(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function Crt(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=Ml(a)?a:.5,s=Ml(s)?s:.5,l=l>=0&&Ml(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function n3(e,t,r){for(var n=t.type==="radial"?Crt(e,t,r):Art(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function Mrt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Gp(e){return parseInt(e,10)}function jp(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||Gp(s[n])||Gp(e.style[n]))-(Gp(s[o])||0)-(Gp(s[a])||0)|0}function krt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:be(e)?[e]:ct(e)?e:null}function gF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&krt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Mt(r,function(o){return o/i}),n/=i)}return[r,n]}var xrt=new ql(!0);function Bm(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function U4(e){return typeof e=="string"&&e!=="none"}function zm(e){var t=e.fill;return t!=null&&t!=="none"}function G4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function j4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function i3(e,t,r){var n=_7(t.image,t.__image,r);if(U1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*Nq),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Lrt(e,t,r,n){var i,o=Bm(r),a=zm(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||xrt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,g=a&&!!h.image,m=o&&!!d.image,y=void 0,_=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(y=f?n3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(_=f?n3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),g&&(w=f||!t.__canvasFillPattern?i3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(T=f||!t.__canvasStrokePattern?i3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=y:g&&(w?e.fillStyle=w:a=!1),v?e.strokeStyle=_:m&&(T?e.strokeStyle=T:o=!1)}var P=t.getGlobalScale();c.setScale(P[0],P[1],t.segmentIgnoreThreshold);var C,A;e.setLineDash&&r.lineDash&&(i=gF(t),C=i[0],A=i[1]);var M=!0;(u||f&uc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),M=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),M&&c.rebuildPath(e,l?s:1),C&&(e.setLineDash(C),e.lineDashOffset=A),n||(r.strokeFirst?(o&&j4(e,r),a&&G4(e,r)):(a&&G4(e,r),o&&j4(e,r))),C&&e.setLineDash([])}function Irt(e,t,r){var n=t.__image=_7(r.image,t.__image,t,t.onload);if(!(!n||!U1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function Ort(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Hl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=gF(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(Bm(r)&&e.strokeText(i,r.x,r.y),zm(r)&&e.fillText(i,r.x,r.y)):(zm(r)&&e.fillText(i,r.x,r.y),Bm(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var W4=["shadowBlur","shadowOffsetX","shadowOffsetY"],H4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function mF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){un(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?Nl.opacity:a}(n||t.blend!==r.blend)&&(o||(un(e,i),o=!0),e.globalCompositeOperation=t.blend||Nl.blend);for(var s=0;s<W4.length;s++){var l=W4[s];(n||t[l]!==r[l])&&(o||(un(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(un(e,i),o=!0),e.shadowColor=t.shadowColor||Nl.shadowColor),o}function X4(e,t,r,n,i){var o=e0(t,i.inHover),a=n?null:r&&e0(r,i.inHover)||{};if(o===a)return!1;var s=mF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(un(e,i),s=!0),U4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(un(e,i),s=!0),U4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(un(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(un(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<H4.length;c++){var f=H4[c],h=f[0];(n||o[h]!==a[h])&&(s||(un(e,i),s=!0),e[h]=o[h]||f[1])}return s}function Rrt(e,t,r,n,i){return mF(e,e0(t,i.inHover),r&&e0(r,i.inHover),n,i)}function yF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Drt(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),yF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function Nrt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var Y4=1,q4=2,Z4=3,K4=4;function Frt(e){var t=zm(e),r=Bm(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function un(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function e0(e,t){return t&&e.__hoverStyle||e.style}function _F(e,t){kl(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function kl(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Sn,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||Mrt(o,a))&&(a&&a.length&&(un(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(un(e,r),e.save(),Drt(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof fe&&t.autoBatch&&Frt(t.style);s||Nrt(i,u.transform)?(un(e,r),yF(e,t)):c||un(e,r);var f=e0(t,r.inHover);t instanceof fe?(r.lastDrawType!==Y4&&(l=!0,r.lastDrawType=Y4),X4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Lrt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof BS?(r.lastDrawType!==Z4&&(l=!0,r.lastDrawType=Z4),X4(e,t,u,l,r),Ort(e,t,f)):t instanceof _a?(r.lastDrawType!==q4&&(l=!0,r.lastDrawType=q4),Rrt(e,t,u,l,r),Irt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==K4&&(l=!0,r.lastDrawType=K4),Brt(e,t,r)),c&&n&&un(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function Brt(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),kl(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),kl(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var c2=new mrt,J4=new E0(100),Q4=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function $m(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&c2.delete(e);var o=c2.get(e);if(o)return o;var a=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,c2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<Q4.length;++h){var d=a[Q4[h]];if(d!=null&&!ct(d)&&!Et(d)&&!be(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=J4.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=wF(a.dashArrayX),m=zrt(a.dashArrayY),y=bF(a.symbol),_=$rt(g),w=SF(m),T=!i&&au.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},P=A(),C;T&&(T.width=P.width*r,T.height=P.height*r,C=T.getContext("2d")),M(),f&&J4.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=P.width,u.svgHeight=P.height;function A(){for(var k=1,O=0,B=_.length;O<B;++O)k=fk(k,_[O]);for(var $=1,O=0,B=y.length;O<B;++O)$=fk($,y[O].length);k*=$;var D=w*_.length*y.length;return{width:Math.max(1,Math.min(k,a.maxTileWidth)),height:Math.max(1,Math.min(D,a.maxTileHeight))}}function M(){C&&(C.clearRect(0,0,T.width,T.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,T.width,T.height)));for(var k=0,O=0;O<m.length;++O)k+=m[O];if(k<=0)return;for(var B=-w,$=0,D=0,j=0;B<P.height;){if($%2===0){for(var Z=D/2%y.length,q=0,tt=0,Tt=0;q<P.width*2;){for(var Ot=0,O=0;O<g[j].length;++O)Ot+=g[j][O];if(Ot<=0)break;if(tt%2===0){var bt=(1-a.symbolSize)*.5,wt=q+g[j][tt]*bt,Ht=B+m[$]*bt,Y=g[j][tt]*a.symbolSize,nt=m[$]*a.symbolSize,K=Tt/2%y[Z].length;pt(wt,Ht,Y,nt,y[Z][K])}q+=g[j][tt],++Tt,++tt,tt===g[j].length&&(tt=0)}++j,j===g.length&&(j=0)}B+=m[$],++D,++$,$===m.length&&($=0)}function pt(St,At,st,ft,z){var G=i?1:r,X=Ii(z,St*G,At*G,st*G,ft*G,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else _F(C,X)}}}}function bF(e){if(!e||e.length===0)return[["rect"]];if(Et(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Et(e[r])){t=!1;break}if(t)return bF([e]);for(var n=[],r=0;r<e.length;++r)Et(e[r])?n.push([e[r]]):n.push(e[r]);return n}function wF(e){if(!e||e.length===0)return[[0,0]];if(be(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!be(e[n])){r=!1;break}if(r)return wF([e]);for(var i=[],n=0;n<e.length;++n)if(be(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Mt(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function zrt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(be(e)){var t=Math.ceil(e);return[t,t]}var r=Mt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function $rt(e){return Mt(e,function(t){return SF(t)})}function SF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Vrt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=$m(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=$m(i,t)}}})}var Urt=new Fi;const pi=Urt;var TF={};function Grt(e,t){TF[e]=t}function jrt(e){return TF[e]}var Wrt=typeof window<"u",Hrt=1,Xrt=800,Yrt=900,qrt=1e3,Zrt=2e3,Krt=5e3,PF=1e3,Jrt=1100,dE=2e3,EF=3e3,Qrt=4e3,uy=4500,tnt=4600,ent=5e3,rnt=6e3,AF=7e3,nnt={PROCESSOR:{FILTER:qrt,SERIES_FILTER:Xrt,STATISTIC:Krt},VISUAL:{LAYOUT:PF,PROGRESSIVE_LAYOUT:Jrt,GLOBAL:dE,CHART:EF,POST_CHART_LAYOUT:tnt,COMPONENT:Qrt,BRUSH:ent,CHART_ITEM:uy,ARIA:rnt,DECAL:AF}},Ar="__flagInMainProcess",nn="__pendingUpdate",f2="__needsUpdateStatus",t6=/^[a-zA-Z0-9_]+$/,h2="__connectUpdateStatus",e6=0,int=1,ont=2;function CF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return kF(this,e,t)}}function MF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return kF(this,e,t)}}function kF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Fi.prototype[t].apply(e,r)}var xF=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Fi),LF=xF.prototype;LF.on=MF("on");LF.off=MF("off");var zu,d2,Wp,Ia,p2,v2,g2,nh,ih,r6,n6,m2,i6,Hp,o6,IF,Rn,a6,OF=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,new urt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Et(n)&&(n=RF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=lk(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:qt(i.useDirtyRect,l),useCoarsePointer:qt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=sy(Vt(u.flush,u),17),n=$t(n),n&&BN(n,!0),o._theme=n,o._locale=stt(i.locale||vN),o._coordSysMgr=new iE;var c=o._api=o6(o);function f(h,d){return h.__prio-d.__prio}return Ig(Um,f),Ig(o3,f),o._scheduler=new hF(o,c,o3,Um),o._messageCenter=new xF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),r6(u,o),n6(u,o),wm(o),o}return t.prototype._onframe=function(){if(!this._disposed){a6(this);var r=this._scheduler;if(this[nn]){var n=this[nn].silent;this[Ar]=!0;try{zu(this),Ia.update.call(this,null,this[nn].updateParams)}catch(l){throw this[Ar]=!1,this[nn]=null,l}this._zr.flush(),this[Ar]=!1,this[nn]=null,nh.call(this,n),ih.call(this,n)}else if(r.unfinished){var i=Hrt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),v2(this,o),r.performVisualTasks(o),Hp(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Ar]){if(this._disposed){this.id;return}var o,a,s;if(It(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Ar]=!0,!this._model||n){var l=new Utt(this._api),u=this._theme,c=this._model=new DN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},a3);var f={seriesTransition:s,optionChanged:!0};if(i)this[nn]={silent:o,updateParams:f},this[Ar]=!1,this.getZr().wakeUp();else{try{zu(this),Ia.update.call(this,null,f)}catch(h){throw this[nn]=null,this[Ar]=!1,h}this._ssr||this._zr.flush(),this[nn]=null,this[Ar]=!1,nh.call(this,o),ih.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Wrt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Xt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return F(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;F(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return F(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(s6[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();F(Sd,function(_,w){if(_.group===i){var T=n?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas($t(r)),S=_.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=au.createCanvas(),m=lk(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var y="";return F(h,function(_){var w=_.left-l,T=_.top-u;y+='<g transform="translate('+w+","+T+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ke({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),F(h,function(_){var w=new _a({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(w)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return p2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return p2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=F_(i,r);return F(a,function(s,l){l.indexOf("Models")>=0&&F(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=F_(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?pF(s,l,n):ly(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;F(ant,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&mc(s,function(p){var v=ne(p);if(v&&v.dataIndex!=null){var g=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ot({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),F(wd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),F(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),drt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&g7(this.getDom(),vE,"");var n=this,i=n._api,o=n._model;F(n._componentsViews,function(a){a.dispose(o,i)}),F(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Sd[n.id]},t.prototype.resize=function(r){if(!this[Ar]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[nn]&&(o==null&&(o=this[nn].silent),i=!0,this[nn]=null),this[Ar]=!0;try{i&&zu(this),Ia.update.call(this,{type:"resize",animation:ot({duration:0},r&&r.animation)})}catch(a){throw this[Ar]=!1,a}this[Ar]=!1,nh.call(this,o),ih.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(It(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!s3[r]){var i=s3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ot({},r);return n.type=wd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(It(n)||(n={silent:!!n}),!!Vm[r.type]&&!!this._model){if(this[Ar]){this._pendingActions.push(r);return}var i=n.silent;g2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Xt.browser.weChat&&this._throttledZrFlush(),nh.call(this,i),ih.call(this,i)}},t.prototype.updateLabelLayout=function(){pi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){zu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),d2(f,!0),d2(f,!1),h.plan()},d2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,y=f._api,_=0;_<v.length;_++)v[_].__alive=!1;h?d.eachComponent(function(S,P){S!=="series"&&w(P)}):d.eachSeries(w);function w(S){var P=S.__requireNewView;S.__requireNewView=!1;var C="_ec_"+S.id+"_"+S.type,A=!P&&g[C];if(!A){var M=mo(S.type),k=h?ei.getClass(M.main,M.sub):Kn.getClass(M.sub);A=new k,A.init(d,y),g[C]=A,v.push(A),m.add(A.group)}S.__viewId=A.__id=C,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,y)}for(var _=0;_<v.length;){var T=v[_];T.__alive?_++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,y),v.splice(_,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Wp=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){F([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var y={mainType:p,query:m};v&&(y.subType=v);var _=d.excludeSeriesId,w;_!=null&&(w=jt(),F(Ze(_),function(S){var P=Zn(S,null);P!=null&&w.set(P,!0)})),g&&g.eachComponent(y,function(S){var P=w&&w.get(S.id)!==null;if(!P)if($k(d))if(S instanceof Eo)d.type===Fl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&UJ(S,d,f._api);else{var C=UP(S.mainType,S.componentIndex,d.name,f._api),A=C.focusSelf,M=C.dispatchers;d.type===Fl&&A&&!d.notBlur&&VS(S.mainType,S.componentIndex,f._api),M&&F(M,function(k){d.type===Fl?Wd(k):Hd(k)})}else jS(d)&&S instanceof Eo&&(WJ(S,d,f._api),Bk(S),Rn(f))},f),g&&g.eachComponent(y,function(S){var P=w&&w.get(S.id)!==null;P||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,g,f._api,d)}},Ia={prepareAndUpdate:function(f){zu(this),Ia.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(!!d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),v2(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),m2(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");v.setBackgroundColor(y),_!=null&&_!=="auto"&&v.setDarkMode(_),pi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,y){if(m!=="series"){var _=h.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var w=_.updateTransform(y,d,p,f);w&&w.update&&v.push(_)}else v.push(_)}});var g=jt();d.eachSeries(function(m){var y=h._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,p,f);_&&_.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),Hp(this,d,p,f,{},g),pi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),Kn.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),m2(this,h,this._api,f,{}),pi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Kn.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),pi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Ia.update.call(this,f)}},p2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,y=F_(v,d),_=0;_<g.length;_++){var w=g[_];if(w[h]&&(m=w[h](v,y,p))!=null)return m}},v2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},g2=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=Vm[v],y=m.actionInfo,_=(y.update||"update").split(":"),w=_.pop(),T=_[0]!=null&&mo(_[0]);this[Ar]=!0;var S=[f],P=!1;f.batch&&(P=!0,S=Mt(f.batch,function($){return $=te(ot({},$),f),$.batch=null,$}));var C=[],A,M=jS(f),k=$k(f);if(k&&z7(this._api),F(S,function($){if(A=m.action($,d._model,d._api),A=A||ot({},$),A.type=y.event||A.type,C.push(A),k){var D=DP(f),j=D.queryOptionMap,Z=D.mainTypeSpecified,q=Z?j.keys()[0]:"series";Wp(d,w,$,q),Rn(d)}else M?(Wp(d,w,$,"series"),Rn(d)):T&&Wp(d,w,$,T.main,T.sub)}),w!=="none"&&!k&&!M&&!T)try{this[nn]?(zu(this),Ia.update.call(this,f),this[nn]=null):Ia[w].call(this,f)}catch($){throw this[Ar]=!1,$}if(P?A={type:y.event||v,escapeConnect:g,batch:C}:A=C[0],this[Ar]=!1,!h){var O=this._messageCenter;if(O.trigger(A.type,A),M){var B={type:"selectchanged",escapeConnect:g,selected:HJ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};O.trigger(B.type,B)}}},nh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();g2.call(this,d,f)}},ih=function(f){!f&&this.trigger("updated")},r6=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[nn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},n6=function(f,h){f.on("mouseover",function(d){var p=d.target,v=mc(p,GS);v&&(GJ(v,d,h._api),Rn(h))}).on("mouseout",function(d){var p=d.target,v=mc(p,GS);v&&(jJ(v,d,h._api),Rn(h))}).on("click",function(d){var p=d.target,v=mc(p,function(y){return ne(y).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=ne(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,_){var w=_.get("zlevel")||0,T=_.get("z")||0,S=_.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:w,z:T,idx:_.componentIndex,type:y,key:S})}),p){var v=h.concat(d),g,m;Ig(v,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),F(v,function(y){var _=f.getComponent(y.type,y.idx),w=y.zlevel,T=y.key;g!=null&&(w=Math.max(g,w)),T?(w===g&&T!==m&&w++,m=T):m&&(w===g&&w++,m=""),g=w,_.setZLevel(w)})}}m2=function(f,h,d,p,v){n(h),i6(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive=!1}),Hp(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},i6=function(f,h,d,p,v,g){F(g||f._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,h,d,p),s(y,m),c(y,m)})},Hp=function(f,h,d,p,v,g){var m=f._scheduler;v=ot(v||{},{updatedSeries:h.getSeries()}),pi.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];w.__alive=!0;var T=w.renderTask;m.updatePayload(T,p),u(_,w),g&&g.get(_.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(y=!0),w.group.silent=!!_.get("silent"),a(_,w),Bk(_)}),m.unfinished=y||m.unfinished,pi.trigger("series:layoutlabels",h,d,v),pi.trigger("series:transition",h,d,v),h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];s(_,w),c(_,w)}),o(f,h),pi.trigger("series:afterupdate",h,d,v)},Rn=function(f){f[f2]=!0,f.getZr().wakeUp()},a6=function(f){!f[f2]||(f.getZr().storage.traverse(function(h){yd(h)||i(h)}),f[f2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===j1&&f.states.emphasis?h.push("emphasis"):f.hoverState===M0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Xt.node&&!Xt.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var y=f.childrenRef(),_=0;_<y.length;_++)p=Math.max(l(y[_],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var w=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!yd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(yd(m))return;if(m instanceof fe&&KJ(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(p){m.stateTransition=g;var _=m.getTextContent(),w=m.getTextGuideLine();_&&(_.stateTransition=g),w&&(w.stateTransition=g)}m.__dirty&&i(m)}})}o6=function(f){return new(function(h){mt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Wd(p,v),Rn(f)},d.prototype.leaveEmphasis=function(p,v){Hd(p,v),Rn(f)},d.prototype.enterBlur=function(p){D7(p),Rn(f)},d.prototype.leaveBlur=function(p){VP(p),Rn(f)},d.prototype.enterSelect=function(p){N7(p),Rn(f)},d.prototype.leaveSelect=function(p){F7(p),Rn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(NN))(f)},IF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[h2]=p}}F(wd,function(d,p){f._messageCenter.on(p,function(v){if(s6[f.group]&&f[h2]!==e6){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];F(Sd,function(y){y!==f&&y.group===f.group&&m.push(y)}),h(m,e6),F(m,function(y){y[h2]!==int&&y.dispatchAction(g)}),h(m,ont)}})})}}(),t}(Fi),pE=OF.prototype;pE.on=CF("on");pE.off=CF("off");pE.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var ant=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Vm={},wd={},o3=[],a3=[],Um=[],RF={},s3={},Sd={},s6={},snt=+new Date-0,vE="_echarts_instance_";function lnt(e,t,r){var n=!(r&&r.ssr);if(n){var i=unt(e);if(i)return i}var o=new OF(e,t,r);return o.id="ec_"+snt++,Sd[o.id]=o,n&&g7(e,vE,o.id),IF(o),pi.trigger("afterinit",o),o}function unt(e){return Sd[MK(e,vE)]}function DF(e,t){RF[e]=t}function NF(e){ue(a3,e)<0&&a3.push(e)}function FF(e,t){mE(o3,e,t,Zrt)}function cnt(e){gE("afterinit",e)}function fnt(e){gE("afterupdate",e)}function gE(e,t){pi.on(e,t)}function fu(e,t,r){Ut(t)&&(r=t,t="");var n=It(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!wd[t]&&(Li(t6.test(n)&&t6.test(t)),Vm[n]||(Vm[n]={action:r,actionInfo:e}),wd[t]=n)}function hnt(e,t){iE.register(e,t)}function dnt(e,t){mE(Um,e,t,PF,"layout")}function hu(e,t){mE(Um,e,t,EF,"visual")}var l6=[];function mE(e,t,r,n,i){if((Ut(t)||It(t))&&(r=t,t=n),!(ue(l6,r)>=0)){l6.push(r);var o=hF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function BF(e,t){s3[e]=t}function pnt(e,t,r){var n=jrt("registerMap");n&&n(e,t,r)}var vnt=met;hu(dE,Xet);hu(uy,Yet);hu(uy,qet);hu(dE,crt);hu(uy,frt);hu(AF,Vrt);NF(BN);FF(Yrt,Ztt);BF("default",Zet);fu({type:Fl,event:Fl,update:Fl},Dr);fu({type:Bg,event:Bg,update:Bg},Dr);fu({type:vd,event:vd,update:vd},Dr);fu({type:zg,event:zg,update:zg},Dr);fu({type:gd,event:gd,update:gd},Dr);DF("light",srt);DF("dark",lrt);function oh(e){return e==null?0:e.length||1}function u6(e){return e}var gnt=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||u6,this._newKeyGetter=i||u6,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=oh(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=oh(u),h=oh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=oh(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=oh(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const zF=gnt;var mnt=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function ynt(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};F(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;y2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),bnt(d.type)&&(o[0]=h),y2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}kN.each(function(g,m){var y=y2(n,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Mt(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new mnt(s,t),r}function y2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function _nt(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function bnt(e){return!(e==="ordinal"||e==="time")}var wnt=function(){function e(t){this.otherDims={},t!=null&&ot(this,t)}return e}();const Gg=wnt;var Snt=Oe(),Tnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},$F=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=GF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=$N(this.source),n=!jF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Tnt[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function VF(e){return e instanceof $F}function UF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=It(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function GF(e){var t=Snt(e);return t.dimNameMap||(t.dimNameMap=UF(e.dimensionsDefine))}function jF(e){return e>30}var ah=It,Oa=Mt,Pnt=typeof Int32Array>"u"?Array:Int32Array,Ent="e\0\0",c6=-1,Ant=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Cnt=["_approximateExtent"],f6,Xp,sh,lh,_2,Yp,b2,Mnt=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;VF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Et(f)?new Gg({name:f}):f instanceof Gg?f:new Gg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();F(a,function(g){v.set(o[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(be(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof ZS&&(o=t),!o){var a=this.dimensions,s=oE(t)||Fr(t)?new VN(t,a.length):t;o=new ZS;var l=Oa(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=ynt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&b2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==vs&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===ni;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&gK(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=Zn(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=Zn(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)b2(this,c);f6(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){ah(t)?ot(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=sh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Xp(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ct(t)?i.getValues(Oa(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?c6:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Oa(lh(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Oa(lh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ve(t);return F(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=Oa(lh(t),this._getStoreDimIndex,this),s=Yp(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=Oa(lh(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=Yp(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=Yp(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new br(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new zF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Xp(t,n)},function(n){return Xp(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},ah(t)?ot(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ct(o)?o=o.slice():ah(o)&&(o=ot({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,ah(r)?ot(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){ah(t)?ot(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ot(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;OJ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){F(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Oa(this.dimensions,this._getDimInfo,this),this.hostModel)),_2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(PP(arguments)))})},e.internalField=function(){f6=function(t){var r=t._invertedIndicesMap;F(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new Pnt(a.categories.length);for(var l=0;l<n.length;l++)n[l]=c6;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},sh=function(t,r,n){return Zn(t._getCategory(r,n),null)},Xp=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=sh(t,t._idDimIdx,r)),n==null&&(n=Ent+r),n},lh=function(t){return ct(t)||(t=t!=null?[t]:[]),t},Yp=function(t){var r=new e(t._schema?t._schema:Oa(t.dimensions,t._getDimInfo,t),t.hostModel);return _2(r,t),r},_2=function(t,r){F(Ant.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,F(Cnt,function(n){t[n]=$t(r[n])}),t._calculationInfo=ot({},r._calculationInfo)},b2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=sh(t,o,r)),l==null&&a!=null&&(i[r]=l=sh(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Bl=Mnt;function WF(e,t){oE(e)||(e=aE(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=xnt(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&jF(a),l=n===e.dimensionsDefine,u=l?GF(e):UF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new ZN(a),d=0;d<h.length;d++)h[d]=-1;function p(A){var M=h[A];if(M<0){var k=n[A],O=It(k)?k:{name:k},B=new Gg,$=O.name;$!=null&&u.get($)!=null&&(B.name=B.displayName=$),O.type!=null&&(B.type=O.type),O.displayName!=null&&(B.displayName=O.displayName);var D=o.length;return h[A]=D,B.storeDimIndex=A,o.push(B),B}return o[M]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(A,M){var k=Ze(A).slice();if(k.length===1&&!Et(k[0])&&k[0]<0){f.set(M,!1);return}var O=f.set(M,[]);F(k,function(B,$){var D=Et(B)?u.get(B):B;D!=null&&D<a&&(O[$]=D,g(p(D),M,$))})});var v=0;F(r,function(A){var M,k,O,B;if(Et(A))M=A,B={};else{B=A,M=B.name;var $=B.ordinalMeta;B.ordinalMeta=null,B=ot({},B),B.ordinalMeta=$,k=B.dimsDef,O=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var D=f.get(M);if(D!==!1){if(D=Ze(D),!D.length)for(var j=0;j<(k&&k.length||1);j++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&D.push(v++)}F(D,function(Z,q){var tt=p(Z);if(l&&B.type!=null&&(tt.type=B.type),g(te(tt,B),M,q),tt.name==null&&k){var Tt=k[q];!It(Tt)&&(Tt={name:Tt}),tt.name=tt.displayName=Tt.name,tt.defaultTooltip=Tt.defaultTooltip}O&&te(tt.otherDims,O)})}});function g(A,M,k){kN.get(M)!=null?A.otherDims[M]=k:(A.coordDim=M,A.coordDimIndex=k,i.set(M,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var w=m||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(s)F(o,function(A){T(A)}),o.sort(function(A,M){return A.storeDimIndex-M.storeDimIndex});else for(var S=0;S<a;S++){var P=p(S),C=P.coordDim;C==null&&(P.coordDim=Lnt(w,i,_),P.coordDimIndex=0,(!m||y<=0)&&(P.isExtraCoord=!0),y--),T(P),P.type==null&&(ON(e,S)===yn.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return knt(o),new $F({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function knt(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function xnt(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return F(t,function(o){var a;It(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function Lnt(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Int=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function Ont(e){var t=e.get("coordinateSystem"),r=new Int(t),n=Rnt[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Rnt={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",wi).models[0],o=e.getReferringComponents("yAxis",wi).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),$u(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),$u(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",wi).models[0];t.coordSysDims=["single"],r.set("single",i),$u(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",wi).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),$u(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),$u(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();F(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),$u(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function $u(e){return e.get("type")==="category"}function Dnt(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;Nnt(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(F(o,function(y,_){Et(y)&&(o[_]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;F(o,function(y){y.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(g),a.appendCalculationDimension(m)):(o.push(g),o.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function Nnt(e){return!VF(e.schema)}function Ql(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function HF(e,t){return Ql(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Fnt(e,t){var r=e.get("coordinateSystem"),n=iE.get(r),i;return t&&t.coordSysDims&&(i=Mt(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=_nt(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Bnt(e,t,r){var n,i;return r&&F(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function L0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=aE(e)):(i=n.getSource(),o=i.sourceFormat===ni);var a=Ont(t),s=Fnt(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?_e(Stt,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=WF(i,c),h=Bnt(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=Dnt(t,{schema:f,store:d}),v=new Bl(f,t);v.setCalculationInfo(p);var g=h!=null&&znt(i)?function(m,y,_,w){return w===h?_:this.defaultDimValueGetter(m,y,_,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,g),v}function znt(e){if(e.sourceFormat===ni){var t=$nt(e.data||[]);return!ct(A0(t))}}function $nt(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var XF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();V1(XF);const Sa=XF;var Vnt=0,Unt=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Vnt}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Mt(n,Gnt);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Et(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function Gnt(e){return It(e)&&e.value!=null?e.value:e+""}const l3=Unt;function u3(e){return e.type==="interval"||e.type==="log"}function jnt(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=f7(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=YF(a),l=i.niceTickExtent=[qe(Math.ceil(e[0]/a)*a,s),qe(Math.floor(e[1]/a)*a,s)];return Wnt(l,e),i}function w2(e){var t=Math.pow(10,OP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,qe(r*t)}function YF(e){return go(e)+2}function h6(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Wnt(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),h6(e,0,t),h6(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function cy(e,t){return e>=t[0]&&e<=t[1]}function fy(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function hy(e,t){return e*(t[1]-t[0])+t[0]}var qF=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new l3({})),ct(i)&&(i=new l3({categories:Mt(i,function(o){return It(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Et(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),cy(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),fy(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(hy(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Sa);Sa.registerClass(qF);const ZF=qF;var cl=qe,KF=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return cy(r,this._extent)},t.prototype.normalize=function(r){return fy(r,this._extent)},t.prototype.scale=function(r){return hy(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=YF(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:cl(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=cl(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:cl(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=cl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=go(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=cl(r.value,i,!0);return EN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=jnt(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=cl(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=cl(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Sa);Sa.registerClass(KF);const I0=KF;var JF=typeof Float32Array<"u",Hnt=JF?Float32Array:Array;function ea(e){return ct(e)?JF?new Float32Array(e):e:new Hnt(e)}var c3="__ec_stack_";function yE(e){return e.get("stack")||c3+e.seriesIndex}function _E(e){return e.dim+e.index}function Xnt(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(te({bandWidth:i,axisKey:n,stackId:c3+o},e));for(var a=eB(t),s=[],o=0;o<e.count;o++){var l=a[n][c3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function QF(e,t){var r=[];return t.eachSeriesByType(e,function(n){rB(n)&&r.push(n)}),r}function Ynt(e){var t={};F(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function tB(e){var t=Ynt(e),r=[];return F(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=We(n.get("barWidth"),s),v=We(n.get("barMaxWidth"),s),g=We(n.get("barMinWidth")||(nB(n)?.5:1),s),m=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:y,axisKey:_E(o),stackId:yE(n)})}),eB(r)}function eB(e){var t={};F(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return F(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ve(o).length;s=Math.max(35-l*4,15)+"%"}var u=We(s,a),c=We(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),F(o,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var w=m.width;y&&(w=Math.min(w,y)),_&&(w=Math.max(w,_)),m.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),_&&_>w&&(w=_),w!==d&&(m.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;F(o,function(m,y){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;F(o,function(m,y){r[i][y]=r[i][y]||{bandWidth:a,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function qnt(e,t,r){if(e&&t){var n=e[_E(t)];return n!=null&&r!=null?n[yE(r)]:n}}function Znt(e,t){var r=QF(e,t),n=tB(r);F(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=yE(i),u=n[_E(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function Knt(e){return{seriesType:e,plan:cE(),reset:function(t){if(!!rB(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=Ql(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=Jnt(i,o),p=nB(t),v=t.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(_,w){for(var T=_.count,S=p&&ea(T*3),P=p&&l&&ea(T*3),C=p&&ea(T),A=n.master.getRect(),M=h?A.width:A.height,k,O=w.getStore(),B=0;(k=_.next())!=null;){var $=O.get(f?g:a,k),D=O.get(s,k),j=d,Z=void 0;f&&(Z=+$-O.get(a,k));var q=void 0,tt=void 0,Tt=void 0,Ot=void 0;if(h){var bt=n.dataToPoint([$,D]);if(f){var wt=n.dataToPoint([Z,D]);j=wt[0]}q=j,tt=bt[1]+y,Tt=bt[0]-j,Ot=m,Math.abs(Tt)<v&&(Tt=(Tt<0?-1:1)*v)}else{var bt=n.dataToPoint([D,$]);if(f){var wt=n.dataToPoint([D,Z]);j=wt[1]}q=bt[0]+y,tt=j,Tt=m,Ot=bt[1]-j,Math.abs(Ot)<v&&(Ot=(Ot<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=tt,S[B+2]=h?Tt:Ot,P&&(P[B]=h?A.x:q,P[B+1]=h?tt:A.y,P[B+2]=M),C[k]=k):w.setItemLayout(k,{x:q,y:tt,width:Tt,height:Ot}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:C,largeBackgroundPoints:P,valueAxisHorizontal:h})}}}}}}function rB(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function nB(e){return e.pipelineContext&&e.pipelineContext.large}function Jnt(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Qnt=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},iB=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return J1(r.value,r4[ftt(xc(this._minLevelUnit))]||r4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return htt(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=ait(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Yn,n[1]+=Yn),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Yn}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=qp.length,l=Math.min(Qnt(qp,this._approxInterval,0,s),s-1);this._interval=qp[l][1],this._minLevelUnit=qp[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return be(r)?r:+fa(r)},t.prototype.contain=function(r){return cy(this.parse(r),this._extent)},t.prototype.normalize=function(r){return fy(this.parse(r),this._extent)},t.prototype.scale=function(r){return hy(r,this._extent)},t.type="time",t}(I0),qp=[["second",QP],["minute",tE],["hour",_d],["quarter-day",_d*6],["half-day",_d*12],["day",Yn*1.2],["half-week",Yn*3.5],["week",Yn*7],["month",Yn*31],["quarter",Yn*95],["half-year",e4/2],["year",e4]];function tit(e,t,r,n){var i=fa(t),o=fa(r),a=function(p){return n4(i,p,n)===n4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function eit(e,t){return e/=Yn,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function rit(e){var t=30*Yn;return e/=t,e>6?6:e>3?3:e>2?2:1}function nit(e){return e/=_d,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function d6(e,t){return e/=t?tE:QP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function iit(e){return f7(e,!0)}function oit(e,t,r){var n=new Date(e);switch(xc(t)){case"year":case"month":n[_N(r)](0);case"day":n[bN(r)](1);case"hour":n[wN(r)](0);case"minute":n[SN(r)](0);case"second":n[TN(r)](0),n[PN(r)](0)}return n.getTime()}function ait(e,t,r,n){var i=1e4,o=mN,a=0;function s(M,k,O,B,$,D,j){for(var Z=new Date(k),q=k,tt=Z[B]();q<O&&q<=n[1];)j.push({value:q}),tt+=M,Z[$](tt),q=Z.getTime();j.push({value:q,notAdd:!0})}function l(M,k,O){var B=[],$=!k.length;if(!tit(xc(M),n[0],n[1],r)){$&&(k=[{value:oit(new Date(n[0]),M,r)},{value:n[1]}]);for(var D=0;D<k.length-1;D++){var j=k[D].value,Z=k[D+1].value;if(j!==Z){var q=void 0,tt=void 0,Tt=void 0,Ot=!1;switch(M){case"year":q=Math.max(1,Math.round(t/Yn/365)),tt=eE(r),Tt=dtt(r);break;case"half-year":case"quarter":case"month":q=rit(t),tt=Lc(r),Tt=_N(r);break;case"week":case"half-week":case"day":q=eit(t),tt=Q1(r),Tt=bN(r),Ot=!0;break;case"half-day":case"quarter-day":case"hour":q=nit(t),tt=Kd(r),Tt=wN(r);break;case"minute":q=d6(t,!0),tt=ty(r),Tt=SN(r);break;case"second":q=d6(t,!1),tt=ey(r),Tt=TN(r);break;case"millisecond":q=iit(t),tt=ry(r),Tt=PN(r);break}s(q,j,Z,tt,Tt,Ot,B),M==="year"&&O.length>1&&D===0&&O.unshift({value:O[0].value-q})}}for(var D=0;D<B.length;D++)O.push(B[D]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=xc(o[d]);if(!!ctt(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?xc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(M,k){return M.value-k.value});for(var g=[],m=0;m<c.length;++m){var y=c[m].value;(m===0||c[m-1].value!==y)&&(g.push(c[m]),y>=n[0]&&y<=n[1]&&f++)}var _=(n[1]-n[0])/t;if(f>_*1.5&&h>_/1.5||(u.push(g),f>_||e===o[d]))break}c=[]}}}for(var w=yr(Mt(u,function(M){return yr(M,function(k){return k.value>=n[0]&&k.value<=n[1]&&!k.notAdd})}),function(M){return M.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var P=w[d],C=0;C<P.length;++C)T.push({value:P[C].value,level:S-d});T.sort(function(M,k){return M.value-k.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Sa.registerClass(iB);const sit=iB;var p6=Sa.prototype,Td=I0.prototype,lit=qe,uit=Math.floor,cit=Math.ceil,Zp=Math.pow,si=Math.log,bE=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new I0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Td.getTicks.call(this,r);return Mt(a,function(s){var l=s.value,u=qe(Zp(this.base,l));return u=l===i[0]&&this._fixMin?Kp(u,o[0]):u,u=l===i[1]&&this._fixMax?Kp(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=si(this.base);r=si(Math.max(0,r))/i,n=si(Math.max(0,n))/i,Td.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=p6.getExtent.call(this);n[0]=Zp(r,n[0]),n[1]=Zp(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=Kp(n[0],o[0])),this._fixMax&&(n[1]=Kp(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=si(r[0])/si(n),r[1]=si(r[1])/si(n),p6.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=dK(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[qe(cit(n[0]/o)*o),qe(uit(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Td.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=si(r)/si(this.base),cy(r,this._extent)},t.prototype.normalize=function(r){return r=si(r)/si(this.base),fy(r,this._extent)},t.prototype.scale=function(r){return r=hy(r,this._extent),Zp(this.base,r)},t.type="log",t}(Sa),oB=bE.prototype;oB.getMinorTicks=Td.getMinorTicks;oB.getLabel=Td.getLabel;function Kp(e,t){return lit(e,go(t))}Sa.registerClass(bE);const fit=bE;var hit=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=Jp(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=Jp(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=Jp(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=Jp(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ct(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ua(l[0],1),ua(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=bm(s)||bm(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[pit[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=dit[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),dit={min:"_determinedMin",max:"_determinedMax"},pit={min:"_dataMin",max:"_dataMax"};function vit(e,t,r){var n=e.rawExtentInfo;return n||(n=new hit(e,t,r),e.rawExtentInfo=n,n)}function Jp(e,t){return t==null?null:bm(t)?NaN:e.parse(t)}function aB(e,t){var r=e.type,n=vit(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=QF("bar",a),l=!1;if(F(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=tB(s),c=git(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function git(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=qnt(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;F(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;F(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function v6(e,t){var r=t,n=aB(e,r),i=n.extent,o=r.get("splitNumber");e instanceof fit&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function mit(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new ZF({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new sit({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Sa.getClass(t)||I0)}}function yit(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function O0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Et(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(wE(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function wE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function _it(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof ZF?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=O0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=bit(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function bit(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new oe(e.x,e.y,o,a);return s}function SE(e){var t=e.get("interval");return t==null?"auto":t}function sB(e){return e.type==="category"&&SE(e.getLabelModel())===0}function wit(e,t){var r={};return F(e.mapDimensionsAll(t),function(n){r[HF(e,n)]=!0}),ve(r)}var Sit=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),g6=[],Tit={registerPreprocessor:NF,registerProcessor:FF,registerPostInit:cnt,registerPostUpdate:fnt,registerUpdateLifecycle:gE,registerAction:fu,registerCoordinateSystem:hnt,registerLayout:dnt,registerVisual:hu,registerTransform:vnt,registerLoading:BF,registerMap:pnt,registerImpl:Grt,PRIORITY:nnt,ComponentModel:Me,ComponentView:ei,SeriesModel:Eo,ChartView:Kn,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){ei.registerClass(e)},registerSeriesModel:function(e){Eo.registerClass(e)},registerChartView:function(e){Kn.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){sK(e,t)}};function Br(e){if(ct(e)){F(e,function(t){Br(t)});return}ue(g6,e)>=0||(g6.push(e),Ut(e)&&(e={install:e}),e.install(Tit))}var r0=Oe();function Pit(e){return e.type==="category"?Ait(e):Mit(e)}function Eit(e,t){return e.type==="category"?Cit(e,t):{ticks:Mt(e.scale.getTicks(),function(r){return r.value})}}function Ait(e){var t=e.getLabelModel(),r=lB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function lB(e,t){var r=uB(e,"labels"),n=SE(t),i=cB(r,n);if(i)return i;var o,a;return Ut(n)?o=dB(e,n):(a=n==="auto"?kit(e):n,o=hB(e,a)),fB(r,n,{labels:o,labelCategoryInterval:a})}function Cit(e,t){var r=uB(e,"ticks"),n=SE(t),i=cB(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=dB(e,n,!0);else if(n==="auto"){var s=lB(e,e.getLabelModel());a=s.labelCategoryInterval,o=Mt(s.labels,function(l){return l.tickValue})}else a=n,o=hB(e,a,!0);return fB(r,n,{ticks:o,tickCategoryInterval:a})}function Mit(e){var t=e.scale.getTicks(),r=O0(e);return{labels:Mt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function uB(e,t){return r0(e)[t]||(r0(e)[t]=[])}function cB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function fB(e,t,r){return e.push({key:t,value:r}),r}function kit(e){var t=r0(e).autoInterval;return t!=null?t:r0(e).autoInterval=e.calculateCategoryInterval()}function xit(e){var t=Lit(e),r=O0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,g=xP(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,y=d/f;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),w=r0(e.model),T=e.getExtent(),S=w.lastAutoInterval,P=w.lastTickCount;return S!=null&&P!=null&&Math.abs(S-_)<=1&&Math.abs(P-a)<=1&&S>_&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?_=S:(w.lastTickCount=a,w.lastAutoInterval=_,w.axisExtent0=T[0],w.axisExtent1=T[1]),_}function Lit(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function hB(e,t,r){var n=O0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=sB(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function dB(e,t,r){var n=e.scale,i=O0(e),o=[];return F(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var m6=[0,1],Iit=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return cK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),y6(n,i.count())),ca(t,m6,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),y6(n,i.count()));var o=ca(t,n,m6,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Eit(this,r),i=n.ticks,o=Mt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return Oit(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Mt(n,function(o){return Mt(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return Pit(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return xit(this)},e}();function y6(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Oit(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;F(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=qe(d),p=qe(p),f?d>p:d<p}}const Rit=Iit;function Dit(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Lm(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function Nit(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new oe(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Lm(p.localRect,p.transform)),f||(f=new Lm(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function _6(e,t,r){var n=au.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var Fit=function(e){Ae(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Cm,typeof r=="string"?a=_6(r,n,i):It(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(z9(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=_6("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new oe(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var _=new oe(0,0,0,0);_.copy(y),a.push(_)}else{for(var w=!1,T=1/0,S=0,P=0;P<a.length;++P){var C=a[P];if(C.intersect(y)){var A=new oe(0,0,0,0);A.copy(C),A.union(y),a[P]=A,w=!0;break}else if(l){u.copy(y),u.union(C);var M=y.width*y.height,k=C.width*C.height,O=u.width*u.height,B=O-M-k;B<T&&(T=B,S=P)}}if(l&&(a[S].union(y),w=!0),!w){var _=new oe(0,0,0,0);_.copy(y),a.push(_)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&Sn||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Sn||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var m=f+1;m<a.length;)a[f].intersect(a[m])?(g=!0,a[f].union(a[m]),a.splice(m,1)):m++;f++}}while(g);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,y){if(a.clearRect(v,g,m,y),n&&n!=="transparent"){var _=void 0;B1(n)?(_=n.__canvasGradient||n3(a,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=_):Oq(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,_=i3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=_||n,a.fillRect(v,g,m,y),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,g,m,y),a.restore())}!i||u?p(0,0,s,l):i.length&&F(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Fi);const S2=Fit;var b6=1e5,fl=314159,Qp=.01,Bit=.001;function zit(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function $it(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Vit=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ot({},n||{}),this.dpr=n.devicePixelRatio||Cm,this._singleCanvas=o,this.root=t;var a=t.style;a&&(z9(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new S2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[fl]=d,d.zlevel=fl,s.push(fl),this._domRoot=t}else{this._width=jp(t,0,n),this._height=jp(t,1,n);var u=this._domRoot=$it(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(b6)),o||(o=n.ctx,o.save()),kl(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(b6)},e.prototype.paintOne=function(t,r){_F(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;SS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(fl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var g=o[v],m=g.ctx,y=a&&g.createRepaintRects(t,r,d._width,d._height),_=n?g.__startIndex:g.__drawIndex,w=!n&&g.incremental&&Date.now,T=w&&Date.now(),S=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,S,y);else if(_===g.__startIndex){var P=t[_];(!P.incremental||!P.notClear||n)&&g.clear(!1,S,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=g.__startIndex);var C,A=function(B){var $={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(C=_;C<g.__endIndex;C++){var D=t[C];if(D.__inHover&&(f=!0),i._doPaintEl(D,g,a,B,$,C===g.__endIndex-1),w){var j=Date.now()-T;if(j>15)break}}$.prevElClipPaths&&m.restore()};if(y)if(y.length===0)C=g.__endIndex;else for(var M=d.dpr,k=0;k<y.length;++k){var O=y[k];m.save(),m.beginPath(),m.rect(O.x*M,O.y*M,O.width*M,O.height*M),m.clip(),A(O),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=C,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Xt.wxa&&F(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(kl(s,t,o,a),t.setPrevPaintRect(l))}else kl(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=fl);var n=this._layers[t];return n||(n=new S2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?ie(n,this._layerConfig[t],!0):this._layerConfig[t-Qp]&&ie(n,this._layerConfig[t-Qp],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!zit(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+Bit,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?Qp:0),this._needsManuallyCompositing),c.__builtin__||TP("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&Sn&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,F(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?ie(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+Qp){var a=this._layers[o];ie(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(ue(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=jp(o,0,i),r=jp(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(fl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[fl].dom;var r=new S2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];kl(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Uit=Vit;function df(e){e.registerPainter("canvas",Uit)}var Git=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new De,i=Ii("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=Ii(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Eo);const jit=Git;function n0(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Wc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Wc(e,t,r[a]));return o.join(" ")}}function pB(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ct(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Wit=function(e){mt(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=Ii(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=Hit,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Wd(this.childAt(0))},t.prototype.downplay=function(){Hd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):hr(h,d,s,n),iN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Po(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=_.get("focus"),d=_.get("blurScope"),p=_.get("disabled"),v=uu(y),g=_.getShallow("scale"),m=y.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=hE(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var S=r.getItemVisual(n,"style"),P=S.fill;if(s instanceof _a){var C=s.style;s.useStyle(ot({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},S))}else s.__isEmptyBrush?s.useStyle(ot({},S)):s.useStyle(S),s.style.decal=null,s.setColor(P,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),M=this._z2;A!=null?M==null&&(this._z2=s.z2,s.z2+=A):M!=null&&(s.z2=M,this._z2=null);var k=a&&a.useNameLabel;cf(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:O,inheritColor:P,defaultOpacity:S.opacity});function O(D){return k?r.getName(D):n0(r,D)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=s.ensureState("emphasis");B.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var $=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;B.scaleX=this._sizeX*$,B.scaleY=this._sizeY*$,this.setSymbolScale(1),Zl(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ne(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&Kl(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Kl(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return vF(r.getItemVisual(n,"symbolSize"))},t}(De);function Hit(e,t){this.parent.drift(e,t)}const dy=Wit;function T2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function w6(e){return e!=null&&!It(e)&&(e={isIgnore:e}),e||{}}function S6(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:uu(t),cursorStyle:t.get("cursor")}}var Xit=function(){function e(t){this.group=new De,this._SymbolCtor=t||dy}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=w6(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=S6(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(T2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!T2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):hr(d,m,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=S6(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=w6(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(T2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){uf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const vB=Xit;function gB(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Yit(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Mt(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return Ql(t,f[0])&&(h=!0,f[0]=d),Ql(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Yit(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:be(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function mB(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function qit(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Zit(e,t,r,n,i,o,a,s){for(var l=qit(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=gB(i,t,a),m=e.getLayout("points")||[],y=t.getLayout("points")||[],_=0;_<l.length;_++){var w=l[_],T=!0,S=void 0,P=void 0;switch(w.cmd){case"=":S=w.idx*2,P=w.idx1*2;var C=m[S],A=m[S+1],M=y[P],k=y[P+1];(isNaN(C)||isNaN(A))&&(C=M,A=k),u.push(C,A),c.push(M,k),f.push(r[S],r[S+1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var O=w.idx,B=g.dataDimsForPoint,$=i.dataToPoint([t.get(B[0],O),t.get(B[1],O)]);P=O*2,u.push($[0],$[1]),c.push(y[P],y[P+1]);var D=mB(g,i,t,O);f.push(D[0],D[1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(O));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,nt){return v[Y]-v[nt]});for(var j=u.length,Z=ea(j),q=ea(j),tt=ea(j),Tt=ea(j),Ot=[],_=0;_<p.length;_++){var bt=p[_],wt=_*2,Ht=bt*2;Z[wt]=u[Ht],Z[wt+1]=u[Ht+1],q[wt]=c[Ht],q[wt+1]=c[Ht+1],tt[wt]=f[Ht],tt[wt+1]=f[Ht+1],Tt[wt]=h[Ht],Tt[wt+1]=h[Ht+1],Ot[_]=d[bt]}return{current:Z,next:q,stackedOnCurrent:tt,stackedOnNext:Tt,status:Ot}}var Ra=Math.min,Da=Math.max;function zl(e,t){return isNaN(e)||isNaN(t)}function f3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=t[v*2],y=t[v*2+1];if(v>=i||v<0)break;if(zl(m,y)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](m,y),f=m,h=y;else{var _=m-u,w=y-c;if(_*_+w*w<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],P=t[T*2+1];S===m&&P===y&&g<n;)g++,T+=o,v+=o,S=t[T*2],P=t[T*2+1],m=t[v*2],y=t[v*2+1],_=m-u,w=y-c;var C=g+1;if(l)for(;zl(S,P)&&C<n;)C++,T+=o,S=t[T*2],P=t[T*2+1];var A=.5,M=0,k=0,O=void 0,B=void 0;if(C>=n||zl(S,P))d=m,p=y;else{M=S-u,k=P-c;var $=m-u,D=S-m,j=y-c,Z=P-y,q=void 0,tt=void 0;if(s==="x"){q=Math.abs($),tt=Math.abs(D);var Tt=M>0?1:-1;d=m-Tt*q*a,p=y,O=m+Tt*tt*a,B=y}else if(s==="y"){q=Math.abs(j),tt=Math.abs(Z);var Ot=k>0?1:-1;d=m,p=y-Ot*q*a,O=m,B=y+Ot*tt*a}else q=Math.sqrt($*$+j*j),tt=Math.sqrt(D*D+Z*Z),A=tt/(tt+q),d=m-M*a*(1-A),p=y-k*a*(1-A),O=m+M*a*A,B=y+k*a*A,O=Ra(O,Da(S,m)),B=Ra(B,Da(P,y)),O=Da(O,Ra(S,m)),B=Da(B,Ra(P,y)),M=O-m,k=B-y,d=m-M*q/tt,p=y-k*q/tt,d=Ra(d,Da(u,m)),p=Ra(p,Da(c,y)),d=Da(d,Ra(u,m)),p=Da(p,Ra(c,y)),M=m-d,k=y-p,O=m+M*tt/q,B=y+k*tt/q}e.bezierCurveTo(f,h,d,p,m,y),f=O,h=B}else e.lineTo(m,y)}u=m,c=y,v+=o}return g}var yB=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),Kit=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new yB},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&zl(i[a*2-2],i[a*2-1]);a--);for(;o<a&&zl(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=f3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=ql.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],_=u?(r-s)/(d-s):(r-l)/(p-l),_<=1&&_>=0){var w=u?(p-l)*_+l:(d-s)*_+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],g=o[f++],m=o[f++],y=o[f++];var T=u?Tm(s,d,v,m,r,c):Tm(l,p,g,y,r,c);if(T>0)for(var S=0;S<T;S++){var P=c[S];if(P<=1&&P>=0){var w=u?or(l,p,g,y,P):or(s,d,v,m,P);return u?[r,w]:[w,r]}}s=m,l=y;break}}},t}(fe),Jit=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(yB),Qit=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Jit},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&zl(i[s*2-2],i[s*2-1]);s--);for(;a<s&&zl(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=f3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);f3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(fe);function _B(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Ke({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(g){i(g,f)}:null;Po(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function bB(e,t,r){var n=e.getArea(),i=qe(n.r0,1),o=qe(n.r,1),a=new k0({shape:{cx:qe(e.cx,1),cy:qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,Po(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function wB(e,t,r,n,i){if(e){if(e.type==="polar")return bB(e,t,r);if(e.type==="cartesian2d")return _B(e,t,r,n,i)}else return null;return null}function pf(e,t){return e.type===t}function T6(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function P6(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function E6(e,t){var r=P6(e),n=r[0],i=r[1],o=P6(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function A6(e){return be(e)?e:e?.5:0}function tot(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=ea(n*2),o=0;o<n;o++){var a=mB(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Na(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function eot(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=LZ(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function rot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Mt(o.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=eot(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";F(h,function(_){_.offset=(_.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new HP(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=g,y}}}function not(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&iot(o,t))){var a=t.mapDimension(o.dim),s={};return F(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function iot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(dy.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function oot(e,t){return isNaN(e)||isNaN(t)}function aot(e){for(var t=e.length/2;t>0&&oot(e[t*2-2],e[t*2-1]);t--);return t-1}function C6(e,t){return[e[t*2],e[t*2+1]]}function sot(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function SB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ti.length;t++)if(e.get([ti[t],"endLabel","show"]))return!0;return!1}function P2(e,t,r,n){if(pf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=SB(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=_B(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return bB(t,r,n)}function lot(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var uot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new De,n=new vB;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,y=r.get("animation"),_=!c.isEmpty(),w=c.get("origin"),T=gB(a,l,w),S=_&&tot(a,l,T),P=r.get("showSymbol"),C=r.get("connectNulls"),A=P&&!h&&not(r,l,a),M=this._data;M&&M.eachItemGraphicEl(function(nt,K){nt.__temp&&(s.remove(nt),M.setItemGraphicEl(K,null))}),P||p.remove(),s.add(m);var k=h?!1:r.get("step"),O;a&&a.getArea&&r.get("clip",!0)&&(O=a.getArea(),O.width!=null?(O.x-=.1,O.y-=.1,O.width+=.2,O.height+=.2):O.r0&&(O.r0-=.5,O.r+=.5)),this._clipShapeForSymbol=O;var B=rot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&k===this._step))P&&p.updateData(l,{isIgnore:A,clipShape:O,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),y&&this._initSymbolLabelAnimation(l,a,O),k&&(f=Na(f,a,k,C),S&&(S=Na(S,a,k,C))),v=this._newPolyline(f),_?g=this._newPolygon(f,S):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Jl(B)),m.setClipPath(P2(this,a,!0,r));else{_&&!g?g=this._newPolygon(f,S):g&&!_&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Jl(B));var $=m.getClipPath();if($){var D=P2(this,a,!1,r);Po($,{shape:D.shape},r)}else m.setClipPath(P2(this,a,!0,r));P&&p.updateData(l,{isIgnore:A,clipShape:O,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),(!T6(this._stackedOnPoints,S)||!T6(this._points,f))&&(y?this._doUpdateAnimation(l,S,a,i,k,w,C):(k&&(f=Na(f,a,k,C),S&&(S=Na(S,a,k,C))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:S})))}var j=r.getModel("emphasis"),Z=j.get("focus"),q=j.get("blurScope"),tt=j.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),Xd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Tt=v.getState("emphasis").style;Tt.lineWidth=+v.style.lineWidth+1}ne(v).seriesIndex=r.seriesIndex,Zl(v,Z,q,tt);var Ot=A6(r.get("smooth")),bt=r.get("smoothMonotone");if(v.setShape({smooth:Ot,smoothMonotone:bt,connectNulls:C}),g){var wt=l.getCalculationInfo("stackedOnSeries"),Ht=0;g.useStyle(te(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),wt&&(Ht=A6(wt.get("smooth"))),g.setShape({smooth:Ot,stackedOnSmooth:Ht,smoothMonotone:bt,connectNulls:C}),Xd(g,r,"areaStyle"),ne(g).seriesIndex=r.seriesIndex,Zl(g,Z,q,tt)}var Y=function(nt){o._changePolyState(nt)};l.eachItemGraphicEl(function(nt){nt&&(nt.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=k,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,n){ne(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Yl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new dy(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Kn.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Yl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Kn.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;zS(this._polyline,r),n&&zS(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Kit({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Qit({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,y=void 0,_=void 0;if(i)if(a){var w=i,T=n.pointToCoord(g);o?(m=w.startAngle,y=w.endAngle,_=-T[1]/180*Math.PI):(m=w.r0,y=w.r,_=T[0])}else{var S=i;o?(m=S.x,y=S.x+S.width,_=d.x):(m=S.y+S.height,y=S.y,_=d.y)}var P=y===m?0:(_-m)/(y-m);l&&(P=1-P);var C=Ut(f)?f(p):c*P+h,A=v.getSymbolPath(),M=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:C}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(SB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Je({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=aot(l);c>=0&&(cf(s,uu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?pB(a,d):n0(a,f)},enableTextSetter:!0},lot(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),y=g.inverse,_=n.shape,w=y?m?_.x:_.y+_.height:m?_.x+_.width:_.y,T=(m?v:0)*(y?-1:1),S=(m?0:-v)*(y?-1:1),P=m?"x":"y",C=sot(f,w,P),A=C.range,M=A[1]-A[0],k=void 0;if(M>=1){if(M>1&&!d){var O=C6(f,A[0]);u.attr({x:O[0]+T,y:O[1]+S}),a&&(k=h.getRawValue(A[0]))}else{var O=c.getPointOn(w,P);O&&u.attr({x:O[0]+T,y:O[1]+S});var B=h.getRawValue(A[0]),$=h.getRawValue(A[1]);a&&(k=xK(i,p,B,$,C.t))}o.lastFrameIndex=A[0]}else{var D=r===1||o.lastFrameIndex>0?A[0]:0,O=C6(f,D);a&&(k=h.getRawValue(D)),u.attr({x:O[0]+T,y:O[1]+S})}a&&q1(u).setLabelText(k)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Zit(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(a&&(d=Na(h.current,i,a,l),p=Na(h.stackedOnCurrent,i,a,l),v=Na(h.next,i,a,l),g=Na(h.stackedOnNext,i,a,l)),E6(d,v)>3e3||c&&E6(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),hr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),hr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],_=h.status,w=0;w<_.length;w++){var T=_[w].cmd;if(T==="="){var S=r.getItemGraphicEl(_[w].idx1);S&&y.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var P=u.shape.__points,C=0;C<y.length;C++){var A=y[C].el,M=y[C].ptIdx*2;A.x=P[M],A.y=P[M+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Kn);const cot=uot;function TE(e,t){return{seriesType:e,plan:cE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Mt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");Ql(n,s[0])&&(s[0]=u),Ql(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=a&&ea(v*l),m=[],y=[],_=d.start,w=0;_<d.end;_++){var T=void 0;if(l===1){var S=c.get(f,_);T=i.dataToPoint(S,null,y)}else m[0]=c.get(f,_),m[1]=c.get(h,_),T=i.dataToPoint(m,null,y);a?(g[w++]=T[0],g[w++]=T[1]):p.setItemLayout(_,T.slice())}a&&p.setLayout("points",g)}}}}}}var fot={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},hot=function(e){return Math.round(e.length/2)};function TB(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Et(o)?p=fot[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,hot))}}}}}function R0(e){e.registerChartView(cot),e.registerSeriesModel(jit),e.registerLayout(TE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,TB("line"))}var PB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Eo);Eo.registerClass(PB);const M6=PB;var dot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return L0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=K1(M6.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(M6);const pot=dot;var vot=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),got=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new vot},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),y=Math.sin(f);p?(r.moveTo(v*a+i,g*a+o),r.arc(v*u+i,g*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+o),r.arc(i,o,s,c,f,!h),r.arc(m*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(fe);const k6=got;function mot(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return Mm(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,y=r?Math.abs(h-d)/2:0,_=Math.cos,w=Math.sin,T=c+h*_(v),S=f+h*w(v),P="left",C="top";switch(s){case"startArc":T=c+(d-l)*_(m),S=f+(d-l)*w(m),P="center",C="top";break;case"insideStartArc":T=c+(d+l)*_(m),S=f+(d+l)*w(m),P="center",C="bottom";break;case"startAngle":T=c+p*_(v)+tv(v,l+y,!1),S=f+p*w(v)+ev(v,l+y,!1),P="right",C="middle";break;case"insideStartAngle":T=c+p*_(v)+tv(v,-l+y,!1),S=f+p*w(v)+ev(v,-l+y,!1),P="left",C="middle";break;case"middle":T=c+p*_(m),S=f+p*w(m),P="center",C="middle";break;case"endArc":T=c+(h+l)*_(m),S=f+(h+l)*w(m),P="center",C="bottom";break;case"insideEndArc":T=c+(h-l)*_(m),S=f+(h-l)*w(m),P="center",C="top";break;case"endAngle":T=c+p*_(g)+tv(g,l+y,!0),S=f+p*w(g)+ev(g,l+y,!0),P="left",C="middle";break;case"insideEndAngle":T=c+p*_(g)+tv(g,-l+y,!0),S=f+p*w(g)+ev(g,-l+y,!0),P="right",C="middle";break;default:return Mm(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=P,n.verticalAlign=C,n}}function yot(e,t,r,n){if(be(n)){e.setTextConfig({rotation:n});return}else if(ct(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function tv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function ev(e,t,r){return t*Math.cos(e)*(r?1:-1)}var E2=Math.max,A2=Math.min;function _ot(e,t){var r=e.getArea&&e.getArea();if(pf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var bot=function(e){mt(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){uf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=wot(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=_ot(u,s);a.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),_=y.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,P=o&&o.type==="changeAxisOrder";function C(k){var O=rv[u.type](s,k),B=Mot(u,f,O);return B.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",_),w[k]=B,B}s.diff(l).add(function(k){var O=s.getItemModel(k),B=rv[u.type](s,k,O);if(m&&C(k),!(!s.hasValue(k)||!R6[u.type](B))){var $=!1;p&&($=x6[u.type](v,B));var D=L6[u.type](r,s,k,B,f,h,c.model,!1,g);d&&(D.forceLabelAnimation=!0),D6(D,s,k,O,B,r,f,u.type==="polar"),S?D.attr({shape:B}):d?I6(d,h,D,B,k,f,!1,!1):Po(D,{shape:B},r,k),s.setItemGraphicEl(k,D),a.add(D),D.ignore=$}}).update(function(k,O){var B=s.getItemModel(k),$=rv[u.type](s,k,B);if(m){var D=void 0;T.length===0?D=C(O):(D=T[O],D.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&D.setShape("r",_),w[k]=D);var j=rv[u.type](s,k),Z=AB(f,j,u);hr(D,{shape:Z},h,k)}var q=l.getItemGraphicEl(O);if(!s.hasValue(k)||!R6[u.type]($)){a.remove(q);return}var tt=!1;if(p&&(tt=x6[u.type](v,$),tt&&a.remove(q)),q?iN(q):q=L6[u.type](r,s,k,$,f,h,c.model,!!q,g),d&&(q.forceLabelAnimation=!0),P){var Tt=q.getTextContent();if(Tt){var Ot=q1(Tt);Ot.prevValue!=null&&(Ot.prevValue=Ot.value)}}else D6(q,s,k,B,$,r,f,u.type==="polar");S?q.attr({shape:$}):d?I6(d,h,q,$,k,f,!0,P):hr(q,{shape:$},r,k,null),s.setItemGraphicEl(k,q),q.ignore=tt,a.add(q)}).remove(function(k){var O=l.getItemGraphicEl(k);O&&HS(O,r,k)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new De);A.removeAll();for(var M=0;M<w.length;++M)A.add(w[M]);a.add(A),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),F6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),F6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&wB(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Mt(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){HS(o,r,ne(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Kn),x6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=E2(t.x,e.x),s=A2(t.x+t.width,i),l=E2(t.y,e.y),u=A2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=A2(t.r,e.r),o=E2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},L6={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Ke({shape:ot({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?k6:k0,c=new u({shape:n,z2:1});c.name="item";var f=EB(i);if(c.calculateTextPosition=mot(f,{isRoundCap:u===k6}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?hr:Po)(c,{shape:p},o)}return c}};function wot(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function I6(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?hr:Po)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?hr:Po)(r,{shape:u},c,i)}function O6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Sot=["x","y","width","height"],Tot=["cx","cy","r","startAngle","endAngle"],R6={cartesian2d:function(e){return!O6(e,Sot)},polar:function(e){return!O6(e,Tot)}},rv={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Eot(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Pot(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function EB(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function D6(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=uu(n);cf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:n0(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,yot(e,d==="outside"?c:d,EB(a),n.get(["label","rotate"]))}YQ(h,f,o.getRawValue(r),function(v){return pB(t,v)});var p=n.getModel(["emphasis"]);Zl(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Xd(e,n),Pot(i)&&(e.style.fill="none",e.style.stroke="none",F(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Eot(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Aot=function(){function e(){}return e}(),N6=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Aot},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(fe);function F6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new N6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new N6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ne(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",B6),f.on("mousemove",B6)),r&&r.push(f)}var B6=sy(function(e){var t=this,r=Cot(t,e.offsetX,e.offsetY);ne(t).dataIndex=r>=0?r:null},30,!1);function Cot(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function AB(e,t,r){if(pf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Mot(e,t,r){var n=e.type==="polar"?k0:Ke;return new n({shape:AB(t,r,e),silent:!0,z2:0})}const kot=bot;function py(e){e.registerChartView(kot),e.registerSeriesModel(pot),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,_e(Znt,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Knt("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,TB("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var xot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Eo);const Lot=xot;var CB=4,Iot=function(){function e(){}return e}(),Oot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Iot},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<CB,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new oe(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(fe),Rot=function(){function e(){this.group=new De}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Oot({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Ii(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<CB;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ne(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Dot=Rot;var Not=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=TE("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new Dot:new vB,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Kn);const Fot=Not;var Bot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const zot=Bot;var h3=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",wi).models[0]},t.type="cartesian2dAxis",t}(Me);Ni(h3,Sit);var MB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},$ot=ie({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},MB),PE=ie({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},MB),Vot=ie({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},PE),Uot=te({logBase:10},PE);const Got={category:$ot,value:PE,time:Vot,log:Uot};var jot={value:1,category:1,time:1,log:1};function z6(e,t,r,n){F(jot,function(i,o){var a=ie(ie({},Got[o],!0),n,!0),s=function(l){mt(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=Jd(this),d=h?ny(c):{},p=f.getTheme();ie(c,p.get(o+"Axis")),ie(c,this.getDefaultOption()),c.type=$6(c),h&&jc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=l3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",$6)}function $6(e){return e.type||(e.data?"category":"value")}var Wot=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Mt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),yr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Hot=Wot;var d3=["x","y"];function V6(e){return e.type==="interval"||e.type==="time"}var Xot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=d3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!V6(r)||!V6(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=$1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new oe(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return qr(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return qr(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new oe(i,o,a,s)},t}(Hot),Yot=function(e){mt(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Rit);const qot=Yot;function p3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),bi(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function U6(e){return e.get("coordinateSystem")==="cartesian2d"}function G6(e){var t={xAxisModel:null,yAxisModel:null};return F(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,wi).models[0];t[n]=o}),t}var C2=Math.log;function Zot(e,t,r){var n=I0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=aB(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=C2(e.base);u=[C2(u[0])/h,C2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],g=u[1];if(c&&f)p=(g-v)/a;else if(c)for(g=u[0]+p*a;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=w2(p),g=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=w2(p),v=u[1]-p*a;else{var m=e.getTicks().length-1;m>a&&(p=w2(p));var y=p*a;g=Math.ceil(u[1]/p)*p,v=qe(g-y),v<0&&u[0]>=0?(v=0,g=qe(y)):g>0&&u[1]<=0&&(g=0,v=-qe(y))}var _=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*_,g+p*w),n.setInterval.call(e,p),(_||w)&&n.setNiceExtent.call(e,v+p,g-p)}var Kot=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=d3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ve(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;u3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(v6(v,p),u3(v)&&(s=d))}c.length&&(s||(s=c.pop(),v6(s.scale,s.model)),F(c,function(g){Zot(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var o={};F(n.x,function(a){j6(n,"y",a,o)}),F(n.y,function(a){j6(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Es(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(F(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=_it(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),F(this._coordsList,function(u){u.calcAffineTransform()});function l(){F(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Jot(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}It(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",wi).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",wi).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,ue(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,F(s.x,function(c,f){F(s.y,function(h,d){var p="x"+f+"y"+d,v=new Xot(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!M2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new qot(c,mit(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){F(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(U6(i)){var o=G6(i),a=o.xAxisModel,s=o.yAxisModel;if(!M2(a,r)||!M2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){F(wit(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return F(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);ue(r,o)<0&&r.push(o),ue(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!U6(i)){var o=G6(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=d3,e}();function M2(e,t){return e.getCoordSysModel()===t}function j6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)W6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&W6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function W6(e){return e&&e.type!=="category"&&e.type!=="time"&&yit(e)}function Jot(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Qot=Kot;var ls=Math.PI,$l=function(){function e(t,r){this.group=new De,this.opt=r,this.axisModel=t,te(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!H6[t]},e.prototype.add=function(t){H6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=c7(r-t),o,a;return xm(i)?(a=n>0?"top":"bottom",o="center"):xm(i-ls)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<ls?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),H6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(qr(s,s,a),qr(l,l,a));var c=ot({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Ps({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});qd(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Et(h)&&(h=[h,h]),(Et(d)||be(d))&&(d=[d,d]);var p=hE(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];F([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(h[y]!=="none"&&h[y]!=null){var _=Ii(h[y],-v/2,-g/2,v,g,c.stroke,!0),w=m.r+m.offset,T=u?l:s;_.attr({rotation:m.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(_)}})}}},axisTickLabel:function(e,t,r,n){var i=rat(r,n,t,e),o=iat(r,n,t,e);if(eat(t,o,i),nat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=Dit(Mt(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Nit(a)}},axisName:function(e,t,r,n){var i=bi(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,Y6(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*ls/180);var p;Y6(o)?h=$l.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=tat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,y=bi(e.nameTruncateMaxWidth,g.maxWidth,p),_=new Je({x:f[0],y:f[1],rotation:h.rotation,silent:$l.isLabelSilent(t),style:fn(s,{text:i,font:v,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(ZP({el:_,componentModel:t,itemName:i}),_.__fullText=i,_.anid="name",t.get("triggerEvent")){var w=$l.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ne(_).eventData=w}n.add(_),_.updateTransform(),r.add(_),_.decomposeTransform()}}};function tat(e,t,r,n){var i=c7(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return xm(i-ls/2)?(a=l?"bottom":"top",o="center"):xm(i-ls*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<ls*1.5&&i>ls/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function eat(e,t,r){if(!sB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Dn(o),Dn(u)):X6(o,a)&&(n?(Dn(a),Dn(c)):(Dn(o),Dn(u))),i===!1?(Dn(s),Dn(f)):X6(l,s)&&(i?(Dn(l),Dn(h)):(Dn(s),Dn(f)))}}function Dn(e){e&&(e.ignore=!0)}function X6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=CP([]);return MP(i,i,-e.rotation),r.applyTransform(Cc([],i,e.getLocalTransform())),n.applyTransform(Cc([],i,t.getLocalTransform())),r.intersect(n)}}function Y6(e){return e==="middle"||e==="center"}function kB(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(qr(a,a,t),qr(s,s,t));var c=new Ps({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});qd(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function rat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=kB(u,t.transform,l,te(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function nat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=te(s.getLineStyle(),te(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=kB(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function iat(e,t,r,n){var i=r.axis,o=bi(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(bi(n.labelRotate,a.get("rotate"))||0)*ls/180,c=$l.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=$l.isLabelSilent(r),p=r.get("triggerEvent");return F(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,_=v.rawLabel,w=a;if(f&&f[m]){var T=f[m];It(T)&&T.textStyle&&(w=new br(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=i.dataToCoord(m),C=new Je({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:fn(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?_:i.type==="value"?m+"":m,g):S})});if(C.anid="label_"+m,p){var A=$l.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=_,A.tickIndex=g,i.type==="category"&&(A.dataIndex=m),ne(C).eventData=A}t.add(C),C.updateTransform(),h.push(C),e.add(C),C.decomposeTransform()}),h}}const xB=$l;function oat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return aat(r,e,t),r.seriesInvolved&&lat(r,e),r}function aat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];F(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=i0(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(F(s.getAxes(),_e(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&F(p.baseAxes,_e(v,d?"cross":!0,h)),d&&F(p.otherAxes,_e(v,"cross",!1))}function v(g,m,y){var _=y.model.getModel("axisPointer",i),w=_.get("show");if(!(!w||w==="auto"&&!g&&!v3(_))){m==null&&(m=_.get("triggerTooltip")),_=g?sat(y,f,i,t,g,m):_;var T=_.get("snap"),S=i0(y.model),P=m||T||y.type==="category",C=e.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:m,involveSeries:P,snap:T,useHandle:v3(_),seriesModels:[],linkGroup:null};u[S]=C,e.seriesInvolved=e.seriesInvolved||P;var A=uat(o,y);if(A!=null){var M=a[A]||(a[A]={axesInfo:{}});M.axesInfo[S]=C,M.mapper=o[A].mapper,C.linkGroup=M}}}})}function sat(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};F(s,function(h){l[h]=$t(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&te(u,f.textStyle)}}return e.model.getModel("axisPointer",new br(l,r,n))}function lat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||F(e.coordSysAxesInfo[i0(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function uat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(k2(o[n+"AxisId"],r.id)||k2(o[n+"AxisIndex"],r.componentIndex)||k2(o[n+"AxisName"],r.name))return i}}function k2(e,t){return e==="all"||ct(e)&&ue(e,t)>=0||e===t}function cat(e){var t=EE(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=v3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function EE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[i0(e)]}function fat(e){var t=EE(e);return t&&t.axisPointerModel}function v3(e){return!!e.get(["handle","show"])}function i0(e){return e.type+"||"+e.id}var q6={},hat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&cat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=fat(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){q6[r]=n},t.getAxisPointerClass=function(r){return r&&q6[r]},t.type="axis",t}(ei);const LB=hat;var g3=Oe();function dat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=g3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=a.getAreaStyle();s=ct(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),_=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(_=g,w=l.y,T=y-_,S=l.height,g=_+T):(_=l.x,w=g,T=l.width,S=y-w,g=w+S);var P=u[p-1].tickValue;P!=null&&h.set(P,d),t.add(new Ke({anid:P!=null?"area_"+P:null,shape:{x:_,y:w,width:T,height:S},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}g3(e).splitAreaColors=h}}}function pat(e){g3(e).splitAreaColors=null}var vat=["axisLine","axisTickLabel","axisName"],gat=["splitArea","splitLine","minorSplitLine"],IB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=p3(s,r),u=new xB(r,ot({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(u3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));F(vat,u.add,u),this._axisGroup.add(u.getGroup()),F(gat,function(f){r.get([f,"show"])&&mat[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||cN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){pat(this)},t.type="cartesianAxis",t}(LB),mat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ct(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,y=f[v].tickValue,_=new Ps({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});qd(_.shape,p.lineWidth),t.add(_)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new Ps({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});qd(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,r,n){dat(e,t,r,n)}},OB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(IB),yat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=OB.type,r}return t.type="yAxis",t}(IB),_at=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Ke({shape:r.coordinateSystem.getRect(),style:te({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ei),Z6={offset:0};function RB(e){e.registerComponentView(_at),e.registerComponentModel(zot),e.registerCoordinateSystem("cartesian2d",Qot),z6(e,"x",h3,Z6),z6(e,"y",h3,Z6),e.registerComponentView(OB),e.registerComponentView(yat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function D0(e){Br(RB),e.registerSeriesModel(Lot),e.registerChartView(Fot),e.registerLayout(TE("scatter"))}var K6="\0_ec_interaction_mutex";function J6(e,t){return!!bat(e)[t]}function bat(e){return e[K6]||(e[K6]={})}fu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Dr);var wat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=te($t(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!zM(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!jg("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||J6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Xl(r.event),DB(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){zM(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=jg("zoomOnMouseWheel",r,this._opt),i=jg("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;x2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);x2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!J6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;x2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Fi);function x2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Xl(n.event),DB(e,t,r,n,i))}function DB(e,t,r,n,i){i.isAvailableBehavior=Vt(jg,null,r,n),e.trigger(t,i)}function jg(e,t,r){var n=r[e];return!e||n&&(!Et(n)||t.event[n+"Key"])}const Sat=wat;function Tat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function Pat(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Eat={axisPointer:1,tooltip:1,brush:1};function Aat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Eat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var Q6=qr,Cat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Al,n._rawTransformable=new Al,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new oe(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new oe(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new oe(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[We(r[0],n.getWidth()),We(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=qr([],o,r),i=qr([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),U9(this.transform||(this.transform=[]),n.transform||Gc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],$1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Al;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?Q6(i,r,o):Fq(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?Q6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=t5(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=t5(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Al);function t5(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const Mat=Cat;function e5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function kat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(e5(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(e5(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function xat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Lat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){Rat(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Dat(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function Iat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function r5(e){return arguments.length?e:Bat}function qh(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Oat(e,t){return Es(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Rat(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Dat(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=L2(s),o=I2(o),s&&o;){i=L2(i),a=I2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(Fat(Nat(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!L2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!I2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function L2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function I2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Nat(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function Fat(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function Bat(e,t){return e.parentNode===t.parentNode?1:2}var zat=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),$at=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zat},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=We(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(fe),Vat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new De,r}return t.prototype.init=function(r,n){this._controller=new Sat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){n5(o,c)&&i5(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!n5(o,c)){h&&a5(u,f,h,s,r);return}i5(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&a5(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];eJ(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new Mat;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Aat(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){Tat(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Pat(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Kn);function n5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function i5(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new dy(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,hr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],y=m.getLayout(),_=m.children.length,w=void 0,T=void 0;if(v.x===y.x&&a.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};w=Math.atan2(S.y-y.y,S.x-y.x),w<0&&(w=Math.PI*2+w),T=S.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-y.y,v.x-y.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<y.x,T&&(w=w-Math.PI)):(T=v.x>y.x,T||(w=w-Math.PI));var P=T?"left":"right",C=s.getModel("label"),A=C.get("rotate"),M=A*(Math.PI/180),k=g.getTextContent();k&&(g.setTextConfig({position:C.get("position")||P,rotation:A==null?-w:M,origin:"center"}),k.setStyle("verticalAlign","middle"))}var O=s.get(["emphasis","focus"]),B=O==="relative"?B9(a.getAncestorsIndices(),a.getDescendantIndices()):O==="ancestor"?a.getAncestorsIndices():O==="descendant"?a.getDescendantIndices():null;B&&(ne(r).focus=B),Uat(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function($){if($!=="blur"){var D=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);D&&D.hoverState===M0||zS(r.__edge,$)}})}function Uat(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new H1({shape:m3(c,f,h,i,i)})),hr(v,{shape:m3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],y=0;y<g.length;y++){var _=g[y].getLayout();m.push([_.x,_.y])}v||(v=n.__edge=new $at({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),hr(v,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),Xd(v,l,"lineStyle"),$P(v),s.add(v))}function o5(e,t,r,n,i){var o=t.tree.root,a=NB(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?Kl(h,{shape:m3(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&Kl(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function NB(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function a5(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=NB(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Kl(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){o5(u,e,n,i,l)}),o5(o,e,n,i,l)}function m3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=qh(u,f),p=qh(u,f+(h-f)*r),v=qh(c,h+(f-h)*r),g=qh(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const Gat=Vat;var Jn=Oe();function jat(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,FB(t,r,e),F(r,function(n){F(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,_e(Wat,e))})}),t.wrapMethod("cloneShallow",_e(Xat,e)),F(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,_e(Hat,e))}),Li(r[t.dataType]===t)}function Wat(e,t){if(Zat(this)){var r=ot({},Jn(this).datas);r[this.dataType]=t,FB(t,r,e)}else AE(t,this.dataType,Jn(this).mainData,e);return t}function Hat(e,t){return e.struct&&e.struct.update(),t}function Xat(e,t){return F(Jn(t).datas,function(r,n){r!==t&&AE(r.cloneShallow(),n,t,e)}),t}function Yat(e){var t=Jn(this).mainData;return e==null||t==null?t:Jn(t).datas[e]}function qat(){var e=Jn(this).mainData;return e==null?[{data:e}]:Mt(ve(Jn(e).datas),function(t){return{type:t,data:Jn(e).datas[t]}})}function Zat(e){return Jn(e).mainData===e}function FB(e,t,r){Jn(e).datas={},F(t,function(n,i){AE(n,i,e,r)})}function AE(e,t,r,n){Jn(r).datas[t]=e,Jn(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Yat,e.getLinkedDataAll=qat}var Kat=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Et(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Jat=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ct(h)?h.length:1),o.push(c);var d=new Kat(Zn(c.name,""),i);f?Qat(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=WF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new Bl(l,r);return u.initData(o),n&&n(u),jat({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Qat(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const tst=Jat;function est(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var rst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new br(i,this,this.ecModel),a=tst.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return As("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=est(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Eo);const nst=rst;function ist(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function uh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function ost(e,t){e.eachSeriesByType("tree",function(r){ast(r,t)})}function ast(e,t){var r=Oat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=r5(function(_,w){return(_.parentNode===w.parentNode?1:2)/_.depth})):(i=r.width,o=r.height,a=r5());var s=e.getData().tree.root,l=s.children[0];if(l){xat(s),ist(l,Lat,a),s.hierNode.modifier=-l.hierNode.prelim,uh(l,Iat);var u=l,c=l,f=l;uh(l,function(_){var w=_.getLayout().x;w<u.getLayout().x&&(u=_),w>c.getLayout().x&&(c=_),_.depth>f.depth&&(f=_)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),uh(l,function(_){g=(_.getLayout().x+d)*p,m=(_.depth-1)*v;var w=qh(g,m);_.setLayout({x:w.x,y:w.y,rawX:g,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),uh(l,function(_){m=(_.getLayout().x+d)*v,g=y==="LR"?(_.depth-1)*p:i-(_.depth-1)*p,_.setLayout({x:g,y:m},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),uh(l,function(_){g=(_.getLayout().x+d)*p,m=y==="TB"?(_.depth-1)*v:o-(_.depth-1)*v,_.setLayout({x:g,y:m},!0)}))}}}function sst(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");ot(s,a)})})}function lst(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=kat(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function ust(e){e.registerChartView(Gat),e.registerSeriesModel(nst),e.registerLayout(ost),e.registerVisual(sst),lst(e)}var o0=F,cst=It,Gm=-1,CE=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=$t(t);this.type=n,this.mappingMethod=r,this._normalizeData=dst[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(O2(i),fst(i)):r==="category"?i.categories?hst(i):O2(i,!0):(Li(r!=="linear"||i.dataExtent),O2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ve(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){It(t)?F(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ct(t)?[]:It(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&o0(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ct(t))t=t.slice();else if(cst(t)){var r=[];o0(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Et(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(iv(f[1],t,c[1]))return a}else if(c[1]===1/0){if(iv(f[0],c[0],t))return a}else if(iv(f[0],c[0],t)&&iv(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:ch("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),Zh.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=P_(r,t.parsedVisual,i),o?i:oa(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return oa(P_(t,this.option.parsedVisual),"rgba")},category:Zh,piecewise:function(t,r){var n=_3.call(this,r);return n==null&&(n=oa(P_(t,this.option.parsedVisual),"rgba")),n},fixed:bl}},colorHue:nv(function(t,r){return E_(t,r)}),colorSaturation:nv(function(t,r){return E_(t,null,r)}),colorLightness:nv(function(t,r){return E_(t,null,null,r)}),colorAlpha:nv(function(t,r){return ES(t,r)}),decal:{applyVisual:ch("decal"),_normalizedToVisual:{linear:null,category:Zh,piecewise:null,fixed:null}},opacity:{applyVisual:ch("opacity"),_normalizedToVisual:y3([0,1])},liftZ:{applyVisual:ch("liftZ"),_normalizedToVisual:{linear:bl,category:bl,piecewise:bl,fixed:bl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:s5,category:Zh,piecewise:function(t,r){var n=_3.call(this,r);return n==null&&(n=s5.call(this,t)),n},fixed:bl}},symbolSize:{applyVisual:ch("symbolSize"),_normalizedToVisual:y3([0,1])}},e}();function fst(e){var t=e.pieceList;e.hasSpecialVisual=!1,F(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function hst(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(o0(t,function(a,s){r[a]=s}),!ct(n)){var i=[];It(n)?o0(n,function(a,s){var l=r[s];i[l!=null?l:Gm]=a}):i[Gm]=n,n=BB(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function O2(e,t){var r=e.visual,n=[];It(r)?o0(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),BB(e,n)}function nv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:y3([0,1])}}function s5(e){var t=this.option.visual;return t[Math.round(ca(e,[0,1],[0,t.length-1],!0))]||{}}function ch(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function Zh(e){var t=this.option.visual;return t[this.option.loop&&e!==Gm?e%t.length:e]}function bl(){return this.option.visual[0]}function y3(e){return{linear:function(t){return ca(t,e,this.option.visual,!0)},category:Zh,piecewise:function(t,r){var n=_3.call(this,r);return n==null&&(n=ca(t,e,this.option.visual,!0)),n},fixed:bl}}function _3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=CE.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function BB(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Mt(t,function(r){var n=qn(r);return n||[0,0,0,1]})),t}var dst={linear:function(e){return ca(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=CE.findPieceIndex(e,t,!0);if(r!=null)return ca(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Gm:t},fixed:Dr};function iv(e,t,r){return e?t<=r:t<r}const hn=CE;var l5=Ps.prototype,R2=H1.prototype,zB=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(zB);function D2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var pst=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zB},t.prototype.buildPath=function(r,n){D2(n)?l5.buildPath.call(this,r,n):R2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return D2(this.shape)?l5.pointAt.call(this,r):R2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=D2(n)?[n.x2-n.x1,n.y2-n.y1]:R2.tangentAt.call(this,r);return EP(i,i)},t}(fe);const vst=pst;var N2=["fromSymbol","toSymbol"];function u5(e){return"_"+e+"Type"}function c5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=vF(i),u=hE(a||0,l),c=Ii(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function gst(e){var t=new vst({name:"line",subPixelOptimize:!0});return b3(t.shape,e),t}function b3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var mst=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=gst(a);s.shape.percent=0,Po(s,{shape:{percent:1}},o,n),this.add(s),F(N2,function(l){var u=c5(l,r,n);this.add(u),this[u5(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};b3(l.shape,s),hr(a,l,o,n),F(N2,function(u){var c=r.getItemVisual(n,u),f=u5(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=c5(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=uu(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;a.useStyle(g),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,F(N2,function(S){var P=this.childOfName(S);if(P){P.setColor(m),P.style.opacity=g.opacity;for(var C=0;C<ti.length;C++){var A=ti[C],M=a.getState(A);if(M){var k=M.style||{},O=P.ensureState(A),B=O.style||(O.style={});k.stroke!=null&&(B[P.__isEmptyBrush?"stroke":"fill"]=k.stroke),k.opacity!=null&&(B.opacity=k.opacity)}}P.markRedraw()}},this);var y=o.getRawValue(n);cf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,P){return o.getFormattedLabel(S,P,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?qe(y):y)+""});var _=this.getTextContent();if(_){var w=c.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=w.get("position")||"middle";var T=w.get("distance");ct(T)||(T=[T,T]),_.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),Zl(this,h,d,f)},t.prototype.highlight=function(){Wd(this)},t.prototype.downplay=function(){Hd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");b3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=$9([],f,c);EP(h,h);function d(M,k){var O=M.__specifiedRotation;if(O==null){var B=l.tangentAt(k);M.attr("rotation",(k===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else M.attr("rotation",O)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,g=o.__labelDistance,m=g[0]*a,y=g[1]*a,_=u/2,w=l.tangentAt(_),T=[w[1],-w[0]],S=l.pointAt(_);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var P=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var C=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(C=Math.PI+C),o.rotation=C}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*m+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*P+c[0],o.y=c[1]+A,p=w[0]<0?"right":"left",o.originX=-m*P,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*P+f[0],o.y=f[1]+A,p=w[0]>=0?"right":"left",o.originX=m*P,o.originY=-A;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(De);const yst=mst;var _st=function(){function e(t){this.group=new De,this._LineCtor=t||yst}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=f5(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=f5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!bst(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(F2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){uf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!F2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!F2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function bst(e){return e.animators&&e.animators.length>0}function f5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:uu(t)}}function h5(e){return isNaN(e[0])||isNaN(e[1])}function F2(e){return e&&!h5(e[0])&&!h5(e[1])}const wst=_st;function Sst(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=Vu(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Vu(s,[0,a]),i=o=Vu(s,[i,o]),n=0}t[0]=Vu(t[0],r),t[1]=Vu(t[1],r);var l=B2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=Vu(t[n],c);var f;return f=B2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=B2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function B2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Vu(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var d5={color:"fill",borderColor:"stroke"},Tst={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},aa=Oe(),Pst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return L0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=aa(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Eo);const Est=Pst;function Ast(e,t){return t=t||[0,0],Mt(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function Cst(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Ast,e)}}}function Mst(e,t){return t=t||[0,0],Mt([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function kst(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Mst,e)}}}function xst(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Lst(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(xst,e)}}}function Ist(e,t){return t=t||[0,0],Mt(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Ost(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(Ist,e)}}}function Rst(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Dst(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||ht(e,"text")))}function Nst(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},ht(n,"text")&&(a.text=n.text),ht(n,"rich")&&(a.rich=n.rich),ht(n,"textFill")&&(a.fill=n.textFill),ht(n,"textStroke")&&(a.stroke=n.textStroke),ht(n,"fontFamily")&&(a.fontFamily=n.fontFamily),ht(n,"fontSize")&&(a.fontSize=n.fontSize),ht(n,"fontStyle")&&(a.fontStyle=n.fontStyle),ht(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=ht(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),ht(n,"textPosition")&&(i.position=n.textPosition),ht(n,"textOffset")&&(i.offset=n.textOffset),ht(n,"textRotation")&&(i.rotation=n.textRotation),ht(n,"textDistance")&&(i.distance=n.textDistance)}return p5(a,e),F(a.rich,function(l){p5(l,l)}),{textConfig:i,textContent:o}}function p5(e,t){!t||(t.font=t.textFont||t.font,ht(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),ht(t,"textAlign")&&(e.align=t.textAlign),ht(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),ht(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),ht(t,"textWidth")&&(e.width=t.textWidth),ht(t,"textHeight")&&(e.height=t.textHeight),ht(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),ht(t,"textPadding")&&(e.padding=t.textPadding),ht(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),ht(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),ht(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),ht(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),ht(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),ht(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),ht(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function v5(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";g5(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,F(t.rich,function(s){g5(s,s)}),n}function g5(e,t){!t||(ht(t,"fill")&&(e.textFill=t.fill),ht(t,"stroke")&&(e.textStroke=t.fill),ht(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),ht(t,"font")&&(e.font=t.font),ht(t,"fontStyle")&&(e.fontStyle=t.fontStyle),ht(t,"fontWeight")&&(e.fontWeight=t.fontWeight),ht(t,"fontSize")&&(e.fontSize=t.fontSize),ht(t,"fontFamily")&&(e.fontFamily=t.fontFamily),ht(t,"align")&&(e.textAlign=t.align),ht(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),ht(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),ht(t,"width")&&(e.textWidth=t.width),ht(t,"height")&&(e.textHeight=t.height),ht(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),ht(t,"padding")&&(e.textPadding=t.padding),ht(t,"borderColor")&&(e.textBorderColor=t.borderColor),ht(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),ht(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),ht(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),ht(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),ht(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),ht(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),ht(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),ht(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),ht(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),ht(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var $B={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},m5=ve($B);su(To,function(e,t){return e[t]=1,e},{});To.join(", ");var jm=["","style","shape","extra"],Hc=Oe();function ME(e,t,r,n,i){var o=e+"Animation",a=XP(e,n,i)||{},s=Hc(t).userDuring;return a.duration>0&&(a.during=s?Vt(Gst,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),ot(a,r[o]),a}function Fst(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Hc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Wst(e,t,f),_5("shape",t,f),_5("extra",t,f),!o&&s&&(jst(e,t,c),y5("shape",e,t,c),y5("extra",e,t,c),Hst(e,t,u,c)),f.style=u,zst(e,f,a),Vst(e,t),s)if(o){var h={};F(jm,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ot(p?h[p]:h,v.enterFrom))});var d=ME("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else $st(e,t,i||0,r,c);Bst(e,t),u?e.dirty():e.markRedraw()}function Bst(e,t){for(var r=Hc(e).leaveToProps,n=0;n<jm.length;n++){var i=jm[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Hc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ot(i?r[i]:r,o.leaveTo))}}function kE(e,t,r,n){if(e){var i=e.parent,o=Hc(e).leaveToProps;if(o){var a=ME("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function Oc(e){return e==="all"}function zst(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function $st(e,t,r,n,i){if(i){var o=ME("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Vst(e,t){ht(t,"silent")&&(e.silent=t.silent),ht(t,"ignore")&&(e.ignore=t.ignore),e instanceof lu&&ht(t,"invisible")&&(e.invisible=t.invisible),e instanceof fe&&ht(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var ao={},Ust={setTransform:function(e,t){return ao.el[e]=t,this},getTransform:function(e){return ao.el[e]},setShape:function(e,t){var r=ao.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=ao.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=ao.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=ao.el.style;if(t)return t[e]},setExtra:function(e,t){var r=ao.el.extra||(ao.el.extra={});return r[e]=t,this},getExtra:function(e){var t=ao.el.extra;if(t)return t[e]}};function Gst(){var e=this,t=e.el;if(!!t){var r=Hc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}ao.el=t,n(Ust)}}function y5(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),Oc(l))ot(a,o);else for(var u=Ze(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if(Oc(s)||ue(s,e)>=0){!a&&(a=n[e]={});for(var d=ve(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Xst(i[f],h)&&(a[f]=h)}}}}}function _5(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ve(n),a=0;a<o.length;a++){var s=o[a];i[s]=dd(n[s])}}function jst(e,t,r){for(var n=t.transition,i=Oc(n)?To:Ze(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function Wst(e,t,r){for(var n=0;n<m5.length;n++){var i=m5[n],o=$B[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<To.length;n++){var s=To[n];t[s]!=null&&(r[s]=t[s])}}function Hst(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!Oc(a)){var l=Ze(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Oc(s)||Oc(a)||ue(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ve(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Xst(e,t){return Fr(e)?e!==t:e!=null&&isFinite(e)}var VB=Oe(),Yst=["percent","easing","shape","style","extra"];function qst(e){e.stopAnimation("keyframe"),e.attr(VB(e))}function UB(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ct(t)){F(t,function(s){UB(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=XP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=VB(e);F(jm,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),F(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ve(f);if(s||(h=yr(h,function(v){return ue(Yst,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;F(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var sa="emphasis",us="normal",xE="blur",LE="select",Cs=[us,sa,xE,LE],z2={normal:["itemStyle"],emphasis:[sa,"itemStyle"],blur:[xE,"itemStyle"],select:[LE,"itemStyle"]},$2={normal:["label"],emphasis:[sa,"label"],blur:[xE,"label"],select:[LE,"label"]},Zst=["x","y"],Kst="e\0\0",Nn={normal:{},emphasis:{},blur:{},select:{}},Jst={cartesian2d:Cst,geo:kst,single:Lst,polar:Ost,calendar:Rst};function w3(e){return e instanceof fe}function S3(e){return e instanceof lu}function Qst(e,t){t.copyTransform(e),S3(t)&&S3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,w3(t)&&w3(e)&&t.setShape(e.shape))}var tlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=b5(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){V2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&kE(h,aa(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);V2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?wB(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=b5(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=V2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){uf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Kn);const elt=tlt;function IE(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=WB(n);r=X1(o,null,i,n.layout||"center"),aa(r).customPathData=o}else if(t==="image")r=new _a({}),aa(r).customImagePath=e.style.image;else if(t==="text")r=new Je({});else if(t==="group")r=new De;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=oN(t);if(!a){var s="";re(s)}r=new a}return aa(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function OE(e,t,r,n,i,o,a){qst(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=Zst);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;ht(u,"textFill")&&(u.fill=u.textFill),ht(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=w3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=$m(f,e)),l.__decalPattern=c}if(S3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Fst(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),UB(t,n.keyframeAnimation,o)}function GB(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),$P(o)}}function rlt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<Cs.length;s++)nlt(n,t,Cs[s])}}function nlt(e,t,r){var n=r===us,i=n?t:Wm(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function b5(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):Jst[o.type](o));for(var s=te({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:P,visual:M,barLayout:k,currentSeriesIndices:O,font:B},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:ilt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Cs.length;v++){var g=Cs[v];d[g]=e.getModel(z2[g]),p[g]=e.getModel($2[g])}function m($){return $===u?c||(c=t.getItemModel($)):t.getItemModel($)}function y($,D){return t.hasItemOption?$===u?f[D]||(f[D]=m($).getModel(z2[D])):m($).getModel(z2[D]):d[D]}function _($,D){return t.hasItemOption?$===u?h[D]||(h[D]=m($).getModel($2[D])):m($).getModel($2[D]):p[D]}return function($,D){return u=$,c=null,f={},h={},i&&i(te({dataIndexInside:$,dataIndex:t.getRawIndex($),actionType:D?D.type:null},l),s)};function w($,D){return D==null&&(D=u),t.getStore().get(t.getDimensionIndex($||0),D)}function T($,D){D==null&&(D=u),$=$||0;var j=t.getDimensionInfo($);if(!j){var Z=t.getDimensionIndex($);return Z>=0?t.getStore().get(Z,D):void 0}var q=t.get(j.name,D),tt=j&&j.ordinalMeta;return tt?tt.categories[q]:q}function S($,D){D==null&&(D=u);var j=t.getItemVisual(D,"style"),Z=j&&j.fill,q=j&&j.opacity,tt=y(D,us).getItemStyle();Z!=null&&(tt.fill=Z),q!=null&&(tt.opacity=q);var Tt={inheritColor:Et(Z)?Z:"#000"},Ot=_(D,us),bt=fn(Ot,null,Tt,!1,!0);bt.text=Ot.getShallow("show")?qt(e.getFormattedLabel(D,us),n0(t,D)):null;var wt=Rm(Ot,Tt,!1);return A($,tt),tt=v5(tt,bt,wt),$&&C(tt,$),tt.legacy=!0,tt}function P($,D){D==null&&(D=u);var j=y(D,sa).getItemStyle(),Z=_(D,sa),q=fn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?fd(e.getFormattedLabel(D,sa),e.getFormattedLabel(D,us),n0(t,D)):null;var tt=Rm(Z,null,!0);return A($,j),j=v5(j,q,tt),$&&C(j,$),j.legacy=!0,j}function C($,D){for(var j in D)ht(D,j)&&($[j]=D[j])}function A($,D){$&&($.textFill&&(D.textFill=$.textFill),$.textPosition&&(D.textPosition=$.textPosition))}function M($,D){if(D==null&&(D=u),ht(d5,$)){var j=t.getItemVisual(D,"style");return j?j[d5[$]]:null}if(ht(Tst,$))return t.getItemVisual(D,$)}function k($){if(o.type==="cartesian2d"){var D=o.getBaseAxis();return Xnt(te({axis:D},$))}}function O(){return r.getCurrentSeriesIndices()}function B($){return hN($,r)}}function ilt(e){var t={};return F(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function V2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=RE(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&Zl(s,n.focus,n.blurScope,n.emphasisDisabled),s}function RE(e,t,r,n,i,o){var a=-1,s=t;t&&jB(t,n,i)&&(a=ue(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=IE(n),s&&Qst(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Nn.normal.cfg=Nn.normal.conOpt=Nn.emphasis.cfg=Nn.emphasis.conOpt=Nn.blur.cfg=Nn.blur.conOpt=Nn.select.cfg=Nn.select.conOpt=null,Nn.isLegacy=!1,alt(u,r,n,i,l,Nn),olt(u,r,n,i,l),OE(e,u,r,n,Nn,i,l),ht(n,"info")&&(aa(u).info=n.info);for(var c=0;c<Cs.length;c++){var f=Cs[c];if(f!==us){var h=Wm(n,f),d=DE(n,h,f);GB(f,u,h,d,Nn)}}return rlt(u,n,i),n.type==="group"&&slt(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function jB(e,t,r){var n=aa(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&flt(o)&&WB(o)!==n.customPathData||i==="image"&&ht(a,"image")&&a.image!==n.customImagePath}function olt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&jB(a,o,n)&&(a=null),a||(a=IE(o),e.setClipPath(a)),OE(null,a,t,o,null,n,i)}}function alt(e,t,r,n,i,o){if(!e.isGroup){w5(r,null,o),w5(r,sa,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=IE(a),e.setTextContent(c)),OE(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<Cs.length;h++){var d=Cs[h];if(d!==us){var p=o[d].conOpt;GB(d,c,p,DE(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function w5(e,t,r){var n=t?Wm(e,t):e,i=t?DE(e,n,sa):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?Wm(s,t):s:null;if(i&&(r.isLegacy||Dst(i,o,!!a,!!l))){r.isLegacy=!0;var u=Nst(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function Wm(e,t){return t?e?e[t]:null:e}function DE(e,t,r){var n=t&&t.style;return n==null&&r===sa&&e&&(n=e.styleEmphasis),n}function slt(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){ult({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),RE(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);llt(t,p,i)}}}function llt(e,t,r){t&&kE(t,aa(e).option,r)}function ult(e){new zF(e.oldChildren,e.newChildren,S5,S5,e).add(T5).update(T5).remove(clt).execute()}function S5(e,t){var r=e&&e.name;return r!=null?r:Kst+t}function T5(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;RE(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function clt(e){var t=this.context,r=t.oldChildren[e];r&&kE(r,aa(r).option,t.seriesModel)}function WB(e){return e&&(e.pathData||e.d)}function flt(e){return e&&(ht(e,"pathData")||ht(e,"d"))}function hlt(e){e.registerChartView(elt),e.registerSeriesModel(Est)}var Pl=Oe(),P5=$t,U2=Vt,dlt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new De,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=_e(E5,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}C5(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=EE(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Pl(t).pointerEl=new jQ[o.type](P5(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Pl(t).labelEl=new Je(P5(r.label));t.add(o),A5(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Pl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Pl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),A5(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=qP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Xl(u.event)},onmousedown:U2(this._onHandleDragMove,this,0,0),drift:U2(this._onHandleDragMove,this),ondragend:U2(this._onHandleDragEnd,this)}),n.add(i)),C5(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ct(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,aF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){E5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,G2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(G2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(G2(i)),Pl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),t3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function E5(e,t,r,n){HB(Pl(r).lastProp,n)||(Pl(r).lastProp=n,t?hr(r,n,e):(r.stopAnimation(),r.attr(n)))}function HB(e,t){if(It(e)&&It(t)){var r=!0;return F(t,function(n,i){r=r&&HB(e[i],n)}),!!r}else return e===t}function A5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function G2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function C5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const plt=dlt;function vlt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function glt(e,t,r,n,i){var o=r.get("value"),a=XB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=x0(s.get("padding")||0),u=s.getFont(),c=xP(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),mlt(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:fn(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function mlt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function XB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:wE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};F(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Et(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function YB(e,t,r){var n=Gc();return MP(n,n,r.rotation),wS(n,n,r.position),kc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function ylt(e,t,r,n,i,o){var a=xB.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),glt(t,n,i,o,{position:YB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function _lt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function blt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var wlt=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=M5(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=vlt(o),d=Slt[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=p3(l.model,i);ylt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=p3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=YB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=M5(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(plt);function M5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Slt={line:function(e,t,r){var n=_lt([t,r[0]],[t,r[1]],k5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:blt([t-n/2,r[0]],[n,i],k5(e))}}};function k5(e){return e.dim==="x"?0:1}const Tlt=wlt;var Plt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const Elt=Plt;var ra=Oe(),Alt=F;function qB(e,t,r){if(!Xt.node){var n=t.getZr();ra(n).records||(ra(n).records={}),Clt(n,t);var i=ra(n).records[e]||(ra(n).records[e]={});i.handler=r}}function Clt(e,t){if(ra(e).initialized)return;ra(e).initialized=!0,r("click",_e(x5,"click")),r("mousemove",_e(x5,"mousemove")),r("globalout",klt);function r(n,i){e.on(n,function(o){var a=xlt(t);Alt(ra(e).records,function(s){s&&i(s,o,a.dispatchAction)}),Mlt(a.pendings,t)})}}function Mlt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function klt(e,t,r){e.handler("leave",null,r)}function x5(e,t,r,n){t.handler(e,r,n)}function xlt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function T3(e,t){if(!Xt.node){var r=t.getZr(),n=(ra(r).records||{})[e];n&&(ra(r).records[e]=null)}}var Llt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";qB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){T3("axisPointer",n)},t.prototype.dispose=function(r,n){T3("axisPointer",n)},t.type="axisPointer",t}(ei);const Ilt=Llt;function ZB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Yl(o,e);if(a==null||a<0||ct(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Mt(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var L5=Oe();function Olt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Wg(i)&&(i=ZB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Wg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Wg(i),h={},d={},p={list:[],map:{}},v={showPointer:_e(Dlt,d),showTooltip:_e(Nlt,p)};F(s.coordSysMap,function(m,y){var _=l||m.containPoint(i);F(s.coordSysAxesInfo[y],function(w,T){var S=w.axis,P=$lt(u,w);if(!f&&_&&(!u||P)){var C=P&&P.value;C==null&&!l&&(C=S.pointToData(i)),C!=null&&I5(w,C,v,!1,h)}})});var g={};return F(c,function(m,y){var _=m.linkGroup;_&&!d[y]&&F(_.axesInfo,function(w,T){var S=d[T];if(w!==m&&S){var P=S.value;_.mapper&&(P=m.axis.scale.parse(_.mapper(P,O5(w),O5(m)))),g[m.key]=P}})}),F(g,function(m,y){I5(c[y],m,v,!0,h)}),Flt(d,c,h),Blt(p,i,e,a),zlt(c,a,r),h}}function I5(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Rlt(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Rlt(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return F(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),F(h,function(g){o.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:o,snapToValue:i}}function Dlt(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Nlt(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=i0(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Flt(e,t,r){var n=r.axesInfo=[];F(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function Blt(e,t,r,n){if(Wg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function zlt(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=L5(n)[i]||{},a=L5(n)[i]={};F(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&F(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];F(o,function(u,c){!a[c]&&l.push(u)}),F(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function $lt(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function O5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Wg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function KB(e){LB.registerAxisPointerClass("CartesianAxisPointer",Tlt),e.registerComponentModel(Elt),e.registerComponentView(Ilt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ct(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=oat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Olt)}function N0(e){Br(RB),Br(KB)}function Vlt(e,t){var r=x0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ke({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Ult=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const Glt=Ult;function JB(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function QB(e){if(!!Xt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var tz=QB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jlt=QB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function ez(e,t){if(!e)return t;t=AN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Wlt(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Hlt=ez(jlt,"transition"),NE=ez(tz,"transform"),Xlt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Xt.transform3dSupported?"will-change:transform;":"");function Ylt(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function qlt(e,t,r){if(!Et(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Jl(t);var o=Ylt(r),a=Math.max(Math.round(i)*1.5,6),s="",l=NE+":",u;ue(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Zlt(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Xt.transformSupported?","+NE+n:",left"+n+",top"+n),Hlt+":"+i}function R5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Xt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Xt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+NE+":"+a+";":[["top",0],["left",0],[tz,a]]}function Klt(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),F(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Jlt(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=iF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(Zlt(i,r)),o&&n.push("background-color:"+o),F(["width","color","radius"],function(d){var p="border-"+d,v=AN(p),g=e.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(Klt(c)),f!=null&&n.push("padding:"+x0(f).join("px ")+"px"),n.join(";")+";"}function D5(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&Xq(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Qlt=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Xt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;D5(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();Un(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Wlt(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Xlt+Jlt(t,!this._firstShow,this._longHide)+R5(o[0],o[1],!0)+("border-color:"+Jl(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Et(o)&&n.get("trigger")==="item"&&!JB(n)&&(s=qlt(n,i,o)),Et(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ct(t)||(t=[t]);for(var l=0;l<t.length;l++)_m(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(D5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=R5(n[0],n[1]);F(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Xt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const tut=Qlt;var eut=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),F5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;It(t)&&re(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Je({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:iF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),F(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),F(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=N5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;F5(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=es(o.borderWidth||0),s=N5(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function es(e){return Math.max(0,e)}function N5(e){var t=es(e.shadowBlur||0),r=es(e.shadowOffsetX||0),n=es(e.shadowOffsetY||0);return{left:es(t-r),right:es(t+r),top:es(t-n),bottom:es(t+n)}}function F5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const rut=eut;var nut=new Ke({shape:{x:-1,y:-1,width:2,height:2}}),iut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Xt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=kK(i.get("renderMode"));this._tooltipContent=o==="richText"?new rut(n):new tut(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Xt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?aF(this,"_updatePosition",50,"fixRate"):t3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");qB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Xt.node||!i.getDom())){var a=B5(o,i);this._ticket="";var s=o.dataByCoordSys,l=lut(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=nut;c.x=o.x,c.y=o.y,c.update(),ne(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=ZB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(B5(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=fh([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;mc(i,function(u){if(ne(u).dataIndex!=null)return s=u,!0;if(ne(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=fh([n.tooltipOption],o),l=this._renderMode,u=[],c=As("section",{blocks:[],noHeader:!0}),f=[],h=new u2;F(r,function(y){F(y.dataByAxis,function(_){var w=i.getComponent(_.axisDim+"Axis",_.axisIndex),T=_.value;if(!(!w||T==null)){var S=XB(T,w.axis,i,_.seriesDataIndices,_.valueLabelOpt),P=As("section",{header:S,noHeader:!vo(S),sortBlocks:!0,blocks:[]});c.blocks.push(P),F(_.seriesDataIndices,function(C){var A=i.getSeriesByIndex(C.seriesIndex),M=C.dataIndexInside,k=A.getDataParams(M);if(!(k.dataIndex<0)){k.axisDim=_.axisDim,k.axisIndex=_.axisIndex,k.axisType=_.axisType,k.axisId=_.axisId,k.axisValue=wE(w.axis,{value:T}),k.axisValueLabel=S,k.marker=h.makeTooltipMarker("item",Jl(k.color),l);var O=T4(A.formatTooltip(M,!0,null)),B=O.frag;if(B){var $=fh([A],o).get("valueFormatter");P.blocks.push($?ot({valueFormatter:$},B):B)}O.text&&f.push(O.text),u.push(k)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=k4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ne(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=fh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),y=new u2;m.marker=y.makeTooltipMarker("item",Jl(m.color),d);var _=T4(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=_.frag,P=S?k4(T?ot({valueFormatter:T},S):S,y,d,w,o.get("useUTC"),v.get("textStyle")):_.text,C="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,P,m,C,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ne(n),a=o.tooltipConfig,s=a.option||{};if(Et(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=fh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new u2;this._showOrMove(h,function(){var g=$t(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Et(h)){var g=r.ecModel.get("useUTC"),m=ct(i)?i[0]:i,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,y&&(d=J1(m.axisValue,d,g)),d=CN(d,i,!0)}else if(Ut(h)){var _=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,_)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ct(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ct(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ct(n))i=We(n[0],u),o=We(n[1],c);else if(It(n)){var v=n;v.width=f[0],v.height=f[1];var g=Es(v,{width:u,height:c});i=g.x,o=g.y,h=null,d=null}else if(Et(n)&&l){var m=sut(n,p,f,r.get("borderWidth"));i=m[0],o=m[1]}else{var m=out(i,o,a,u,c,h?null:20,d?null:20);i=m[0],o=m[1]}if(h&&(i-=z5(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=z5(d)?f[1]/2:d==="bottom"?f[1]:0),JB(r)){var m=aut(i,o,a,u,c);i=m[0],o=m[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&F(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&F(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,a&&F(v,function(m,y){var _=g[y];a=a&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),o&&F(h.seriesDataIndices,function(m){var y=m.seriesIndex,_=n[y],w=o[y];_&&w&&w.data!==_.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Xt.node||!n.getDom()||(t3(this,"_updatePosition"),this._tooltipContent.dispose(),T3("itemTooltip",n))},t.type="tooltip",t}(ei);function fh(e,t,r){var n=t.ecModel,i;r?(i=new br(r,n,n),i=new br(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof br&&(a=a.get("tooltip",!0)),Et(a)&&(a={formatter:a}),a&&(i=new br(a,i,n)))}return i}function B5(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function out(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function aut(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function sut(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function z5(e){return e==="center"||e==="middle"}function lut(e,t,r){var n=DP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=C0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ne(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const uut=iut;function vf(e){Br(KB),e.registerComponentModel(Glt),e.registerComponentView(uut),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Dr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Dr)}var $5=F;function V5(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function U5(e,t,r){var n={};return $5(t,function(o){var a=n[o]=i();$5(e[o],function(s,l){if(!!hn.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new hn(u),l==="opacity"&&(u=$t(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new hn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function cut(e,t,r){var n;F(r,function(i){t.hasOwnProperty(i)&&V5(t[i])&&(n=!0)}),n&&F(r,function(i){t.hasOwnProperty(i)&&V5(t[i])?e[i]=$t(t[i]):delete e[i]})}function fut(e,t,r,n){var i={};return F(e,function(o){var a=hn.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return pF(s,f,T)}function c(T,S){hrt(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=t[v],m=i[v],y=0,_=m.length;y<_;y++){var w=m[y];g[w]&&g[w].applyVisual(p,u,c)}}}}}var hut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),dut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Je({style:fn(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Je({style:fn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){o4(p,"_"+r.get("target"))}),v&&d.on("click",function(){o4(v,"_"+r.get("subtarget"))}),ne(c).eventData=ne(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var m=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=Es(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),o.x=_.x,o.y=_.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),m=o.getBoundingRect();var T=_.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var P=new Ke({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(P)}},t.type="title",t}(ei);function gf(e){e.registerComponentModel(hut),e.registerComponentView(dut)}function rz(e,t){if(!e)return!1;for(var r=ct(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function ov(e){RS(e,"label",["show"])}var av=Oe(),nz=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=av(s)[a];if(!l||!l.data){av(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&ov(l),F(l.data,function(c){c instanceof Array?(ov(c[0]),ov(c[1])):ov(c)}),u=this.createMarkerModelFromSeries(l,this,n),ot(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),av(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return As("section",{header:this.name,blocks:[As("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return av(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Ni(nz,WN.prototype);const Xc=nz;function P3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function put(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function sv(e,t,r,n,i,o){var a=[],s=Ql(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=FE(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=go(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var j2={min:_e(sv,"min"),max:_e(sv,"max"),average:_e(sv,"average"),median:_e(sv,"median")};function Hm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!put(t)&&!ct(t.coord)&&n){var i=n.dimensions,o=iz(t,r,n,e);if(t=$t(t),t.type&&j2[t.type]&&o.baseAxis&&o.valueAxis){var a=ue(i,o.baseAxis.dim),s=ue(i,o.valueAxis.dim),l=j2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)j2[u[c]]&&(u[c]=FE(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function iz(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(vut(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function vut(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Xm(e,t){return e&&e.containData&&t.coord&&!P3(t)?e.containData(t.coord):!0}function gut(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!P3(t)&&!P3(r)?e.containZone(t.coord,r.coord):!0}function mut(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return gs(a,t[o])}:function(r,n,i,o){return gs(r.value,t[o])}}function FE(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var W2=Oe(),yut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){W2(s).keep=!1}),n.eachSeries(function(s){var l=Xc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!W2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){W2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;F(r,function(o){var a=Xc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?D7(l):VP(l))})}})},t.type="marker",t}(ei);const oz=yut;var _ut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Xc);const but=_ut;var lv=Oe(),wut=function(e,t,r,n){var i=e.getData(),o;if(ct(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=bi(n.yAxis,n.xAxis);else{var u=iz(n,i,t,e);s=u.valueAxis;var c=HF(i,u.valueDataDim);l=FE(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=$t(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&be(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var g=[Hm(e,o[0]),Hm(e,o[1]),ot({},o[2])];return g[2].type=g[2].type||null,ie(g[2],g[0]),ie(g[2],g[1]),g};function Ym(e){return!isNaN(e)&&!isFinite(e)}function G5(e,t,r,n){var i=1-e,o=n.dimensions[e];return Ym(t[i])&&Ym(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Sut(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(G5(1,r,n,e)||G5(0,r,n,e)))return!0}return Xm(e,t[0])&&Xm(e,t[1])}function H2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get("x"),i.getWidth()),u=We(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(pf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;Ym(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Ym(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var Tut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Xc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=lv(a).from,u=lv(a).to;l.each(function(c){H2(l,c,!0,o,i),H2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new wst);this.group.add(c.group);var f=Put(a,r,n),h=f.from,d=f.to,p=f.line;lv(n).from=h,lv(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");ct(v)||(v=[v,v]),ct(g)||(g=[g,g]),ct(m)||(m=[m,m]),ct(y)||(y=[y,y]),f.from.each(function(w){_(h,w,!0),_(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ne(w).dataModel=n,w.traverse(function(T){ne(T).dataModel=n})});function _(w,T,S){var P=w.getItemModel(T);H2(w,T,S,r,o);var C=P.getModel("itemStyle").getItemStyle();C.fill==null&&(C.fill=ly(l,"color")),w.setItemVisual(T,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:qt(P.get("symbolOffset",!0),y[S?0:1]),symbolRotate:qt(P.get("symbolRotate",!0),m[S?0:1]),symbolSize:qt(P.get("symbolSize"),g[S?0:1]),symbol:qt(P.get("symbol",!0),v[S?0:1]),style:C})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(oz);function Put(e,t,r){var n;e?n=Mt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ot(ot({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Bl(n,r),o=new Bl(n,r),a=new Bl([],r),s=Mt(r.get("data"),_e(wut,t,e,r));e&&(s=yr(s,_e(Sut,e)));var l=mut(!!e,n);return i.initData(Mt(s,function(u){return u[0]}),null,l),o.initData(Mt(s,function(u){return u[1]}),null,l),a.initData(Mt(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Eut=Tut;function vy(e){e.registerComponentModel(but),e.registerComponentView(Eut),e.registerPreprocessor(function(t){rz(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Aut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Xc);const Cut=Aut;var uv=Oe(),Mut=function(e,t,r,n){var i=Hm(e,n[0]),o=Hm(e,n[1]),a=i.coord,s=o.coord;a[0]=bi(a[0],-1/0),a[1]=bi(a[1],-1/0),s[0]=bi(s[0],1/0),s[1]=bi(s[1],1/0);var l=xq([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function qm(e){return!isNaN(e)&&!isFinite(e)}function j5(e,t,r,n){var i=1-e;return qm(t[i])&&qm(r[i])}function kut(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return pf(e,"cartesian2d")?r&&n&&(j5(1,r,n)||j5(0,r,n))?!0:gut(e,i,o):Xm(e,i)||Xm(e,o)}function W5(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get(r[0]),i.getWidth()),u=We(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(pf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);qm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):qm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var H5=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],xut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Xc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Mt(H5,function(f){return W5(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new De});this.group.add(c.group),this.markKeep(c);var f=Lut(a,r,n);n.setData(f),f.each(function(h){var d=Mt(H5,function(C){return W5(f,h,C,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],_=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];km(y),km(_);var w=!(g[0]>y[1]||g[1]<y[0]||m[0]>_[1]||m[1]<_[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),P=ly(l,"color");S.fill||(S.fill=P,Et(S.fill)&&(S.fill=ES(S.fill,.4))),S.stroke||(S.stroke=P),f.setItemVisual(h,"style",S)}),f.diff(uv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Yd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=uv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?hr(p,{shape:{points:v.points}},n,h):p=new Yd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=uv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),cf(h,uu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Et(v.fill)?ES(v.fill,1):"#000"}),Xd(h,p),Zl(h,null,null,p.get(["emphasis","disabled"])),ne(h).dataModel=n}),uv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(oz);function Lut(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Mt(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ot(ot({},f),{name:u,ordinalMeta:null})});i=Mt(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new Bl(i,r)}else i=[{name:"value",type:"float"}],n=new Bl(i,r);var s=Mt(r.get("data"),_e(Mut,t,e,r));e&&(s=yr(s,_e(kut,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return gs(d,i[h])}:function(u,c,f,h){return gs(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const Iut=xut;function F0(e){e.registerComponentModel(Cut),e.registerComponentView(Iut),e.registerPreprocessor(function(t){rz(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Out=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Rut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ct(n)&&F(n,function(o,a){Et(o)&&(o={type:o}),n[a]=ie(o,Out(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&RP(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Mt(o,function(s){return(Et(s)||be(s))&&(s={name:s}),new br(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;F(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&ue(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const E3=Rut;var Uu=_e,A3=F,cv=De,Dut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new cv),this.group.add(this._selectorGroup=new cv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Es(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Es(te({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Vlt(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),A3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new cv;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(m,v,p,d,n,r,_,T,w,f,o);S.on("click",Uu(X5,v,null,o,h)).on("mouseover",Uu(C3,m.name,null,o,h)).on("mouseout",Uu(M3,m.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(P){if(!c.get(v)&&P.legendVisualProvider){var C=P.legendVisualProvider;if(!C.containName(v))return;var A=C.indexOfName(v),M=C.getItemVisual(A,"style"),k=C.getItemVisual(A,"legendIcon"),O=qn(M.fill);O&&O[3]===0&&(O[3]=.2,M=ot(ot({},M),{fill:oa(O,"rgba")}));var B=this._createItem(P,v,p,d,n,r,{},M,k,f,o);B.on("click",Uu(X5,null,v,o,h)).on("mouseover",Uu(C3,null,v,o,h)).on("mouseout",Uu(M3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();A3(r,function(u){var c=u.type,f=new Je({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);cf(f,{normal:h,emphasis:d},{defaultText:u.title}),US(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),g=a.isSelected(n),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),_=o.get("icon");c=_||c||"roundRect";var w=Nut(c,o,l,u,d,g,h),T=new cv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!_||_==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var P=_==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add(Fut({itemWidth:p,itemHeight:v,icon:c,iconRotate:P,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var C=s==="left"?p+5:-5,A=s,M=a.get("formatter"),k=n;Et(M)&&M?k=M.replace("{name}",n!=null?n:""):Ut(M)&&(k=M(n));var O=o.get("inactiveColor");T.add(new Je({style:fn(S,{text:k,x:C,y:v/2,fill:g?S.getTextColor():O,align:A,verticalAlign:"middle"})}));var B=new Ke({shape:T.getBoundingRect(),invisible:!0}),$=o.getModel("tooltip");return $.get("show")&&ZP({el:B,componentModel:a,itemName:n,itemTooltipOption:$.option}),T.add(B),T.eachChild(function(D){D.silent=!0}),B.silent=!f,this.getContentGroup().add(T),US(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Ic(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Ic("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var _={x:0,y:0};return _[g]=c[g]+p+h[g],_[m]=Math.max(c[m],h[m]),_[y]=Math.min(0,h[y]+d[1-v]),_}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ei);function Nut(e,t,r,n,i,o,a){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),A3(g,function(y,_){g[_]==="inherit"&&(g[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:$m(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Fut(e){var t=e.icon||"roundRect",r=Ii(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function X5(e,t,r,n){M3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),C3(e,t,r,n)}function az(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function C3(e,t,r,n){az(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function M3(e,t,r,n){az(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const sz=Dut;function But(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function hh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();F(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function zut(e){e.registerAction("legendToggleSelect","legendselectchanged",_e(hh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",_e(hh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",_e(hh,"inverseSelect")),e.registerAction("legendSelect","legendselected",_e(hh,"select")),e.registerAction("legendUnSelect","legendunselected",_e(hh,"unSelect"))}function lz(e){e.registerComponentModel(E3),e.registerComponentView(sz),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,But),e.registerSubTypeDefaulter("legend",function(){return"plain"}),zut(e)}var $ut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=ny(r);e.prototype.init.call(this,r,n,i),Y5(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),Y5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=K1(E3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(E3);function Y5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,jc(t,r,{type:"box",ignoreSize:!!i})}const Vut=$ut;var q5=De,X2=["width","height"],Y2=["x","y"],Uut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new q5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new q5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ct(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Je({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",y=qP(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=X2[u],f=Y2[u],h=X2[1-u],d=Y2[1-u];a&&Ic("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=$t(i);a&&(m[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(r,o,m,u,c,h,d,f);if(a){if(s==="end")g[u]+=y[c]+p;else{var _=v[c]+p;g[u]-=_,y[f]-=_}y[c]+=v[c]+p,g[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Ic(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Ic("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],g=[-d.x,-d.y];n||(g[o]=c[u]);var m=[0,0],y=[-p.x,-p.y],_=qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?y[o]+=i[a]-p[a]:m[o]+=p[a]+_}y[1-o]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(y);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-_,0),S[s]=T[s],f.setClipPath(new Ke({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&hr(c,{x:P.contentPosition[0],y:P.contentPosition[1]},v?r:null),this._updatePageInfoView(r,P),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;F(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Et(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=X2[a],l=Y2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[a]=-v.s;for(var g=u+1,m=v,y=v,_=null;g<=h;++g)_=w(c[g]),(!_&&y.e>m.s+o||_&&!T(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=_;for(var g=u-1,m=v,y=v,_=null;g>=-1;--g)_=w(c[g]),(!_||!T(y,_.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=_;return p;function w(S){if(S){var P=S.getBoundingRect(),C=P[l]+S[l];return{s:C,e:C+P[s],i:S.__legendDataIndex}}}function T(S,P){return S.e>=P&&S.s<=P+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(sz);const Gut=Uut;function jut(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Wut(e){Br(lz),e.registerComponentModel(Vut),e.registerComponentView(Gut),jut(e)}function mf(e){Br(lz),Br(Wut)}var Hut={get:function(e,t,r){var n=$t((Xut[e]||{})[t]);return r&&ct(n)?n[n.length-1]:n}},Xut={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const uz=Hut;var Z5=hn.mapVisual,Yut=hn.eachVisual,qut=ct,K5=F,Zut=km,Kut=ca,Jut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&cut(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=U5(this.option.controller,n,r),this.targetVisuals=U5(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ze(r),n},t.prototype.eachTargetSeries=function(r,n){F(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ct(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Et(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=Zut([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});ie(o,i),ie(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){qut(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},K5(p,function(g,m){if(!!hn.isValidType(m)){var y=uz.get(m,"inactive",s);y!=null&&(v[m]=y,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";K5(this.stateList,function(m){var y=this.itemSize,_=f[m];_||(_=f[m]={color:s?p:[p]}),_.symbol==null&&(_.symbol=h&&$t(h)||(s?g:[g])),_.symbolSize==null&&(_.symbolSize=d&&$t(d)||(s?y[0]:[y[0],y[0]])),_.symbol=Z5(_.symbol,function(S){return S==="none"?g:S});var w=_.symbolSize;if(w!=null){var T=-1/0;Yut(w,function(S){S>T&&(T=S)}),_.symbolSize=Z5(w,function(S){return Kut(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const Zm=Jut;var J5=[20,140],Qut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=J5[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=J5[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ct(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),F(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=km((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=Q5(this,"outOfRange",this.getExtent()),i=Q5(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=K1(Zm.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Zm);function Q5(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const tct=Qut;var ect=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=x0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Ke({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=hn.prepareVisualTypes(f);return F(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),hn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;gtt(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ei);const cz=ect;var tx=[["left","right","width"],["top","bottom","height"]];function fz(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=tx[a],l=[0,null,10],u={},c=0;c<3;c++)u[tx[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Es(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function Hg(e,t){return F(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var so=ca,rct=F,ex=Math.min,q2=Math.max,nct=12,ict=6,oct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Je({style:fn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=fz(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new De;u.add(c),c.add(i.outOfRange=rx()),c.add(i.inRange=rx(null,s?ix(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Ke({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=q2(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ua(r.get("handleSize"),o[0]),f=Ii(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=ix(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){Xl(m.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),GP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Je({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Xl(m.event)},ondragend:u,style:fn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ua(r.get("indicatorSize"),i[0]),l=Ii(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof _a){var c=l.style;l.useStyle(ot({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Je({silent:!0,invisible:!0,style:fn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:ict)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():nx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[so(n[0],i,o,!0),so(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];Sst(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[so(o[0],a,s,!0),so(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new HP(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new De(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();rct([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=so(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=kc(i.handleLabelPoints[c],$g(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=so(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var y=kc(c.indicatorLabelPoint,$g(f,this.group)),_=c.indicatorLabel;_.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";_.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var P={x:g,y:v,style:{fill:d}},C={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(P,A),_.animateTo(C,A)}else f.attr(P),_.attr(C);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var k=0;k<M.length;k++)this._api.enterBlur(M[k])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=ex(q2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=ex(q2(a[0],r),a[1]);var l=act(i,s,a),u=[r-l,r+l],c=so(r,a,s,!0),f=[so(u[0],a,s,!0),so(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||nx(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=AK(h,d);this._dispatchHighDown("downplay",Hg(p[0],i)),this._dispatchHighDown("highlight",Hg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(mc(r.target,function(l){var u=ne(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Hg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=$g(n,o?null:this.group);return ct(r)?kc(r,a,i):uN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(cz);function rx(e,t,r,n){return new Yd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Xl(i.event)},ondragend:n})}function act(e,t,r){var n=nct/2,i=e.get("hoverLinkDataSize");return i&&(n=so(i,t,r,!0)/2),n}function nx(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function ix(e){return e==="vertical"?"ns-resize":"ew-resize"}const sct=oct;var lct={type:"selectDataRange",event:"dataRangeSelected",update:"update"},uct=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},cct=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(fut(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(fct,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function fct(e,t,r,n){for(var i=t.targetVisuals[n],o=hn.prepareVisualTypes(i),a={color:ly(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ox=F;function hct(e){var t=e&&e.visualMap;ct(t)||(t=t?[t]:[]),ox(t,function(r){if(!!r){Gu(r,"splitList")&&!Gu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ct(n)&&ox(n,function(i){It(i)&&(Gu(i,"start")&&!Gu(i,"min")&&(i.min=i.start),Gu(i,"end")&&!Gu(i,"max")&&(i.max=i.end))})}})}function Gu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var ax=!1;function hz(e){ax||(ax=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(lct,uct),F(cct,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(hct))}function dct(e){e.registerComponentModel(tct),e.registerComponentView(sct),hz(e)}var pct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],vct[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=$t(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Mt(this._pieceList,function(l){return l=$t(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=hn.listVisualTypes(),o=this.isCategory();F(r.pieces,function(s){F(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),F(n,function(s,l){var u=!1;F(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&F(this.stateList,function(c){(r[c]||(r[c]={}))[l]=uz.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,F(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;F(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=$t(r)},t.prototype.getValueState=function(r){var n=hn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=hn.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return F(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=K1(Zm.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Zm),vct={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),ck(e),F(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;F(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),sx(t,e)},pieces:function(e){var t=this.option;F(t.pieces,function(r,n){It(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=hn.retrieveVisuals(r),e.push(i)},this),sx(t,e),ck(e),F(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function sx(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const gct=pct;var mct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=bi(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),F(c.viewPieceList,function(d){var p=d.piece,v=new De;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Je({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Ic(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:Hg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return fz(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new De,l=this.visualMapModel.textStyleModel;s.add(new Je({style:fn(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Mt(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Ii(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=$t(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,F(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(cz);const yct=mct;function _ct(e){e.registerComponentModel(gct),e.registerComponentView(yct),hz(e)}function bct(e){Br(dct),Br(_ct)}var lx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},wct=function(){function e(t){var r=this._condVal=Et(t)?new RegExp(t):Rq(t)?t:null;if(r==null){var n="";re(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Et(r)?this._condVal.test(t):be(r)?this._condVal.test(t+""):!1},e}(),Sct=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Tct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),Pct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Ect=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Act=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function BE(e,t){if(e===!0||e===!1){var r=new Sct;return r.value=e,r}var n="";return dz(e)||re(n),e.and?ux("and",e,t):e.or?ux("or",e,t):e.not?Cct(e,t):Mct(e,t)}function ux(e,t,r){var n=t[e],i="";ct(n)||re(i),n.length||re(i);var o=e==="and"?new Tct:new Pct;return o.children=Mt(n,function(a){return BE(a,r)}),o.children.length||re(i),o}function Cct(e,t){var r=e.not,n="";dz(r)||re(n);var i=new Ect;return i.child=BE(r,t),i.child||re(n),i}function Mct(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ve(e),a=e.parser,s=a?HN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=ht(lx,u)?lx[u]:u,f=e[u],h=s?s(f):f,d=cet(c,h)||c==="reg"&&new wct(h);d||re(r),i.push(d)}}i.length||re(r);var p=new Act;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function dz(e){return It(e)&&!Fr(e)}var kct=function(){function e(t,r){this._cond=BE(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function xct(e,t){return new kct(e,t)}var Lct={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=xct(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;ht(s,"dimension")||re(l);var c=t.getDimensionInfo(u);return c||re(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},Ict={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ze(r);i.length||re(n);var o=[];F(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&re(n),h!=="asc"&&h!=="desc"&&re(n),p&&p!=="min"&&p!=="max"){var v="";re(v)}if(h!=="asc"&&h!=="desc"){var g="";re(g)}var m=t.getDimensionInfo(f);m||re(n);var y=d?HN(d):null;d&&!y&&re(n),o.push({dimIdx:m.index,parser:y,comparator:new YN(h,p)})});var a=t.sourceFormat;a!==Kr&&a!==zi&&re(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function gy(e){e.registerTransform(Lct),e.registerTransform(Ict)}var Oct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new JN(this),C4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),C4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:_o},t}(Me),Rct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ei);function my(e){e.registerComponentModel(Oct),e.registerComponentView(Rct)}var Z2=null;function Dct(e){return Z2||(Z2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),Z2(e)}var K2=null;function Nct(e){K2||(K2=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),K2(e)}function Fct(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function fv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function pz(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function k3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(pz(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Bct='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',x3=0,Xg=null;function zct(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Uct.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||Km(e)}),a=k3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){Km(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(x3||(Xg=Fct(Bct)),Gct(e),e.__resize_rendered__=k3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),x3++}function $ct(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",zE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--x3&&Xg&&Xg.parentNode.removeChild(Xg)}}function Vct(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Uct(){var e=k3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&($E(this),this.addEventListener("scroll",zE,!0)),this.__resize_rendered__=t,Km(this))}function zE(){var e=this;$E(this),this.__resize_raf__&&Nct(this.__resize_raf__),this.__resize_raf__=Dct(function(){var t=Vct(e);t&&(e.__resize_last__=t,Km(e))})}function Km(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Gct(e){var t=pz(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=fv("div",{className:"resize-triggers"}),n=fv("div",{className:"resize-expand-trigger"}),i=fv("div"),o=fv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},$E(e),e.addEventListener("scroll",zE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function $E(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var qo=function(){return qo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qo.apply(this,arguments)},jct=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Wct(e){return t=Object.create(null),jct.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Hct={autoresize:Boolean},Xct={loading:Boolean,loadingOptions:Object},Yct=/^on[^a-z]/,qct=function(e){return Yct.test(e)},cx=[],dh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=cx.indexOf(o);a===-1&&(a=cx.push(o)-1,dh[a]={}),r=dh[a]&&dh[a][n]?dh[a][n]:dh[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var Zct="ecTheme",yf=aP({name:"echarts",props:qo(qo({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Hct),Xct),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Pg(),i=Pg(),o=Pg(),a=Tn("ecTheme",null),s=Tn("ecInitOptions",null),l=Tn("ecUpdateOptions",null),u=qw(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ye(function(){return o.value||e.option||null}),v=Ye(function(){return e.theme||mr(a)||{}}),g=Ye(function(){return e.initOptions||mr(s)||{}}),m=Ye(function(){return e.updateOptions||mr(l)||{}}),y=Ye(function(){return function(C){var A={};for(var M in C)qct(M)||(A[M]=C[M]);return A}(r)}),_=fP().proxy.$listeners;function w(C){if(n.value){var A=i.value=lnt(n.value,v.value,g.value);e.group&&(A.group=e.group);var M=_;M||(M={},Object.keys(r).filter(function(O){return O.indexOf("on")===0&&O.length>2}).forEach(function(O){var B=O.charAt(2).toLowerCase()+O.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),M[B]=r[O]})),Object.keys(M).forEach(function(O){var B=M[O];if(B){var $=O.toLowerCase();$.charAt(0)==="~"&&($=$.substring(1),B.__once__=!0);var D=A;if($.indexOf("zr:")===0&&(D=A.getZr(),$=$.substring(3)),B.__once__){delete B.__once__;var j=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];j.apply(void 0,Z),D.off($,B)}}D.on($,B)}}),c.value?Nd(function(){A&&!A.isDisposed()&&A.resize(),k()}):k()}function k(){var O=C||p.value;O&&A.setOption(O,m.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;po(f,function(C){typeof S=="function"&&(S(),S=null),C||(S=po(function(){return e.option},function(A,M){A&&(i.value?i.value.setOption(A,qo({notMerge:A.value!==(M==null?void 0:M.value)},m.value)):w())},{deep:!0}))},{immediate:!0}),po([v,g],function(){T(),w()},{deep:!0}),jC(function(){e.group&&i.value&&(i.value.group=e.group)});var P=Wct(i);return function(C,A,M){var k=Tn("ecLoadingOptions",{}),O=Ye(function(){return qo(qo({},mr(k)),M==null?void 0:M.value)});jC(function(){var B=C.value;B&&(A.value?B.showLoading(O.value):B.hideLoading())})}(i,h,d),function(C,A,M){var k=null;po([M,C,A],function(O,B,$){var D=O[0],j=O[1],Z=O[2];D&&j&&Z&&(k=sy(function(){j.resize()},100),zct(D,k)),$(function(){k&&D&&$ct(D,k)})})}(i,c,n),G8(function(){w()}),I1(T),qo({chart:i,root:n,setOption:function(C,A){e.manualUpdate&&(o.value=C),i.value?i.value.setOption(C,A||{}):w(C)},nonEventAttrs:y},P)},render:function(){var e=qo({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",hP("x-vue-echarts",e)}});Br([df,R0,D0,gf,vf,mf,N0,bct,F0]);const Kct={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{VChart:yf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${Bt(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:Bt,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},du=e=>(tn("data-v-4610c876"),e=e(),en(),e),Jct=U(" Observations: "),Qct=du(()=>b("abbr",{title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),tft=du(()=>b("br",null,null,-1)),eft=["value"],rft=du(()=>b("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),nft={class:"fsxs tar"},ift=du(()=>b("th",null,"work time",-1)),oft=du(()=>b("th",null,"workload \u2264",-1)),aft=du(()=>b("th",null,"modifier \u2265",-1)),sft=du(()=>b("th",null,"chance",-1));function lft(e,t,r,n,i,o){const a=de("v-chart");return R(),N(W,null,[Jct,Qct,tft,b("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,eft),b("div",null,[Ct(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),rft,b("table",nft,[b("tr",null,[ift,(R(!0),N(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(R(),N("td",null,L(10*s.tier)+" min",1))),256))]),b("tr",null,[oft,(R(!0),N(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(R(),N("td",null,L(o.formatFixed(s.wld,2)),1))),256))]),b("tr",null,[aft,(R(!0),N(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(R(),N("td",null,L(o.formatFixed(100*s.mod,2)),1))),256))]),b("tr",null,[sft,(R(!0),N(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(R(),N("td",null,L(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const VE=ze(Kct,[["render",lft],["__scopeId","data-v-4610c876"]]);const uft={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{FloatingModifierEdit:VE},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}const t=this.gameStore.wspdBonus(this.workerEditing,e);return console.log("cpt: currentWspdBonus",e,t),t}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Di,formatFixed:Bt,randBetween:os,levelup:cd,spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(g=>g==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,g)=>g.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=this.workerEditing.level-1,n=t-1,i=this.gameStore.workerStatic[this.workerEditing.charkey],o=this.gameStore.workerStatic[e],a=i.wspd_lo*r,l=i.wspd_hi*r-a,u=this.workerEditing.wspdSheet*1e6-i.wspd,c=(u-a)/l||0,f=o.wspd_lo*n,h=o.wspd_hi*n,d=f+(h-f)*c,p=i.mspd_lo*r,v=i.mspd_hi*r,m=((this.workerEditing.mspdSheet/(i.mspd/100)-1)*1e6-p)/(v-p)||0,y=o.mspd_lo*n,_=o.mspd_hi*n,w=y+(_-y)*m,T=i.luck_lo*r,S=i.luck_hi*r,P=this.workerEditing.luckSheet*1e4-i.luck,C=(P-T)/(S-T)||0,A=o.luck_lo*n,M=o.luck_hi*n,k=A+(M-A)*C;console.log(`recalculating levelups: 
        ${o.wspd/1e6}+${n}*[${o.wspd_lo/1e6}\u2026${o.wspd_hi/1e6}]*${Math.round(c*1e3)/10}%\u{1F528} 
        ${o.mspd/100}+${n}*[${o.mspd_lo/1e6}\u2026${o.mspd_hi/1e6}]*${Math.round(m*1e3)/10}%\u{1F9B6} 
        ${o.luck/1e4}+${n}*[${o.luck_lo/1e4}\u2026${o.luck_hi/1e4}]*${Math.round(C*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(o.wspd-i.wspd+d-u)/1e6,this.workerEditing.mspdSheet=o.mspd/100*(1+w/1e6),this.workerEditing.luckSheet+=(o.luck-i.luck+k-P)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,cd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),cd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=os(t.wspd_lo,t.wspd_hi),n+=os(t.mspd_lo,t.mspd_hi),i+=os(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},zr=e=>(tn("data-v-f181a43e"),e=e(),en(),e),cft={key:0,id:"columns"},fft={id:"worker"},hft={class:"borderless"},dft=zr(()=>b("td",null,"name:",-1)),pft={style:{float:"right"}},vft=zr(()=>b("td",null,"type:",-1)),gft=["value"],mft=["value"],yft=zr(()=>b("td",null,"job:",-1)),_ft=U(" idle "),bft={key:0},wft={key:1},Sft=U(" \u270D\uFE0F "),Tft=U(" @ "),Pft=U("M$/day "),Eft=U("CP "),Aft=U(" [\u{1F33B}] "),Cft={class:"fsxs"},Mft=U(" \u270D\uFE0F "),kft=U(" @ "),xft=U("M$/day "),Lft=U("CP "),Ift=U(" UNKNOWN_JOBTYPE "),Oft={key:0},Rft=zr(()=>b("td",null,"$/day:",-1)),Dft={key:0},Nft={key:0},Fft={key:3,class:"fsxs"},Bft={colspan:"2"},zft={class:"borderless"},$ft=zr(()=>b("tr",null,[b("th",null,"stats:"),b("th",null,"sheet"),b("th",null,"+"),b("th",null,"skill"),b("th",null,"="),b("th",null,"final"),b("th")],-1)),Vft={class:"center"},Uft={rowspan:"3"},Gft=zr(()=>b("br",null,null,-1)),jft=zr(()=>b("td",null,null,-1)),Wft=zr(()=>b("td",null,null,-1)),Hft=zr(()=>b("td",null,"\u{1F528}",-1)),Xft={class:"center"},Yft=zr(()=>b("td",null,null,-1)),qft=zr(()=>b("td",null,null,-1)),Zft=zr(()=>b("td",null,"\u{1F9B6}",-1)),Kft={class:"center"},Jft=zr(()=>b("td",null,null,-1)),Qft=zr(()=>b("td",null,null,-1)),tht=zr(()=>b("td",null,"\u{1F340}",-1)),eht={class:"center"},rht=zr(()=>b("td",null,"skills:",-1)),nht={style:{float:"right"}},iht=["disabled"],oht={colspan:"2",s:""},aht=["id","onUpdate:modelValue"],sht=["value"],lht=["src"],uht=U(" use floating modifier for this regionGroup "),cht={key:0,id:"chartPane"};function fht(e,t,r,n,i,o){const a=de("FloatingModifierEdit");return r.workerEditing?(R(),N("div",cft,[b("div",fft,[b("table",hft,[b("tr",null,[dft,b("td",null,[Pt(b("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[pe,r.workerEditing.label]]),U(" lvl."+L(r.workerEditing.level)+" ",1),b("button",{onClick:t[1]||(t[1]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),b("button",{onClick:t[2]||(t[2]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),ut("",!0),b("div",pft,[e.wasChanged&&r.workerInitial?(R(),N("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):ut("",!0)])])]),b("tr",null,[vft,b("td",null,[e.prerelease_charkind?(R(),N("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(R(!0),N(W,null,Nt(n.gameStore.workerStatic,(s,l)=>(R(),N("option",{value:l},L(l)+" "+L(n.gameStore.uloc.char[l])+" "+L(s.wspd/1e6)+" / "+L(s.mspd/100)+" / "+L(s.luck/1e4),9,mft))),256))],40,gft)):(R(),N(W,{key:1},[U(L(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),b("tr",null,[yft,b("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(R(),N(W,{key:0},[_ft],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(R(),N(W,{key:1},[U(L(n.gameStore.plantzoneName(r.workerEditing.job))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(R(),N("span",bft,[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job],2))+" ",1),b("span",{onClick:t[6]||(t[6]=s=>e.showChartPane=!e.showChartPane)},L(e.showChartPane?"\u25C0":"\u25B6"),1)])):(R(),N("span",wft,L(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(R(),N(W,{key:2},[Sft,Pt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[7]||(t[7]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),Tft,Pt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),Pft,Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Eft],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(R(),N(W,{key:3},[Aft],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(R(),N(W,{key:4},[U(L(n.gameStore.workerJobDescription(r.workerEditing))+" ",1),n.userStore.userWorkshops[r.workerEditing.job.hk].label?(R(),N(W,{key:0},[U(' "'+L(n.userStore.userWorkshops[r.workerEditing.job.hk].label)+'" ',1)],64)):ut("",!0),U(" "+L(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" workload ",1),b("span",Cft," ["+L(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(R(),N(W,{key:5},[Mft,Pt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),kft,Pt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),xft,Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Lft],64)):(R(),N(W,{key:6},[Ift],64))])]),r.workerEditing.job?(R(),N("tr",Oft,[Rft,b("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(R(),N(W,{key:0},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(R(),N("span",Dft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Yr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):ut("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(R(),N(W,{key:1},[U(L(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(R(),N(W,{key:2},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(R(),N("span",Nft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Yr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):ut("",!0)],64)):ut("",!0),n.gameStore.isGiant(r.workerEditing.charkey)?(R(),N("span",Fft," with giant bonus ")):ut("",!0)])])):ut("",!0),b("tr",null,[b("td",Bft,[b("table",zft,[$ft,b("tr",Vft,[b("td",Uft,[b("button",{onClick:t[13]||(t[13]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),Gft,b("button",{onClick:t[14]||(t[14]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),b("td",null,[Pt(b("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.wspdSheet]])]),jft,b("td",null,L(o.formatFixed(o.currentWspdBonus,2)),1),Wft,b("td",null,L(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),Hft]),b("tr",Xft,[b("td",null,[Pt(b("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.mspdSheet]])]),Yft,b("td",null,L(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),qft,b("td",null,L(o.formatFixed(r.workerEditing.mspdBase*(r.workerEditing.mspdSheet/r.workerEditing.mspdBase+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),Zft]),b("tr",Kft,[b("td",null,[Pt(b("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.luckSheet]])]),Jft,b("td",null,L(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),Qft,b("td",null,L(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),tht])])])]),b("tr",eht,[rht,b("td",null,[b("div",nht,[r.workerEditing.job?(R(),N("button",{key:0,disabled:!(r.workerEditing.job in n.userStore.pzJobs),onClick:t[18]||(t[18]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,iht)):ut("",!0)])])]),(R(),N(W,null,Nt(9,s=>b("tr",null,[b("td",oht,[Pt(b("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(R(!0),N(W,null,Nt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(R(),N("option",{value:l},L(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,sht))),256))],8,aht),[[ln,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(R(),N("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,lht)):ut("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&typeof r.workerEditing.job=="number"&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating?(R(),N(W,{key:0},[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]=s)},null,512),[[Cn,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]]]),uht],64)):ut("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(R(),N("div",cht,[Ct(a,{rgk:n.gameStore.plantzones[r.workerEditing.job].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job].workload,show:!0},null,8,["rgk","wspd","workload"])])):ut("",!0)])):ut("",!0)}const vz=ze(uft,[["render",fht],["__scopeId","data-v-f181a43e"]]),hht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{options:Object,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:""}),methods:{makeIconSrc:Di,formatFixed:Bt,assignWorker(e,t){this.userStore.assignWorker(e,t),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}}},dht=b("tr",null,[b("th",null,"node"),b("th",null,"workload"),b("th",null,"walk"),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1),pht=["href"],vht=U(L(" ")+" "),ght=["src"],mht=["title"],yht=U("+"),_ht=["title"],bht=["onClick"],wht=b("tr",null,[b("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1),Sht={key:0},Tht=b("td",null,[U(" \u{1F33B} Farm "),b("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10"},"\u2139\uFE0F")],-1),Pht=b("td",null,"x",-1),Eht=b("td",null,"x",-1),Aht=["title"],Cht=b("abbr",{title:"see Settings > Workshops config"},"\u2139\uFE0F",-1),Mht=["onClick"],kht=U(" \u270D\uFE0F Custom job "),xht=b("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually"},"\u2139\uFE0F",-1),Lht={style:{float:"right"}},Iht=U(" label: "),Oht=b("td",null,"x",-1),Rht=b("td",null,"x",-1);function Dht(e,t,r,n,i,o){const a=de("RouterLink");return r.options?(R(),N(W,{key:0},[b("div",null,[U(" Send "+L(r.options.worker.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(R(),N(W,{key:0},[U(L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).luck,2))+"\u{1F340} ",1)],64)):(R(),N(W,{key:1},[U(L(o.formatFixed(r.options.worker.wspdSheet,2))+"\u{1F528} "+L(o.formatFixed(r.options.worker.mspdSheet,2))+"\u{1F9B6} "+L(o.formatFixed(r.options.worker.luckSheet,2))+"\u{1F340} ",1)],64)),U(" ) where? "+L(r.options.jobs.length)+" top untaken nodes near "+L(n.gameStore.uloc.town[n.gameStore.tnk2tk(r.options.worker.tnk)])+": ",1)]),b("table",null,[dht,(R(!0),N(W,null,Nt(r.options.jobs,s=>(R(),N("tr",null,[b("td",null,[b("a",{href:this.userStore.codexNodeUrl+s.pz.key},L(s.pz.name),9,pht),(R(!0),N(W,null,Nt(this.gameStore.plantzones[s.pz.key].itemkeys,l=>(R(),N(W,null,[vht,Ct(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,ght)]),_:2},1032,["to"])],64))),256))]),b("td",null,L(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+L(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),b("td",null,L(o.formatFixed(s.profit.dist,0)),1),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,mht),yht,b("abbr",{title:s.infraTooltip},L(o.formatFixed(s.townCp)),9,_ht),U("="+L(o.formatFixed(s.cp)),1)]),b("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>o.assignWorker(r.options.worker,s.pz.key)},"assign",8,bht)])]))),256)),wht,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(R(),N("tr",Sht,[Tht,Pht,Eht,b("td",null,L(n.userStore.farmingProfitPerCP),1),b("td",null,[b("abbr",{title:n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).infraTooltip},L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).townCp)),9,Aht)]),b("td",null,L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:t[0]||(t[0]=s=>o.assignWorker(r.options.worker,"farming"))},"assign")])])):ut("",!0),(R(!0),N(W,null,Nt(n.userStore.userWorkshops,(s,l)=>(R(),N("tr",null,[(!o.workshopBusy(l)||s.industry=="mass")&&n.gameStore.houseDistance(r.options.worker.tnk,l)<1e6?(R(),N(W,{key:0},[b("td",null,[U(" \u{1F3ED} "+L(n.gameStore.uloc.char[l])+" ",1),Cht]),b("td",null,L(s.manualWorkload),1),b("td",null,L(o.formatFixed(n.gameStore.houseDistance(r.options.worker.tnk,l),0)),1),b("td",null,L(o.formatFixed(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),2)),1),b("td",null,L(n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),1),b("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),3,!0)),1),b("td",null,[b("button",{onClick:u=>o.assignWorkerWorkshop(r.options.worker,l)},"assign",8,Mht)])],64)):ut("",!0)]))),256)),b("tr",null,[b("td",null,[kht,xht,b("div",Lht,[Iht,Pt(b("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[pe,e.customLabel]])])]),Oht,Rht,b("td",null,[Pt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[2]||(t[2]=s=>e.customProfit=s)},null,512),[[pe,e.customProfit,void 0,{number:!0}]])]),b("td",null,[Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[3]||(t[3]=s=>e.customCP=s)},null,512),[[pe,e.customCP,void 0,{number:!0}]])]),b("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(e.customProfit,e.customCP),3,!0)),1),b("td",null,[b("button",{onClick:t[4]||(t[4]=s=>o.assignWorkerCustom(r.options.worker))},"assign")])])])],64)):ut("",!0)}const Nht=ze(hht,[["render",Dht]]),Fht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:Bt}},Bht=U(" Connect to nearest town "),zht=b("tr",null,[b("th",null,"House"),b("th",null,"\u{1F6CF}\uFE0F"),b("th",null,"CP")],-1),$ht=["disabled","onUpdate:modelValue"],Vht=U(" "+L(" ")+" "),Uht=["href"],Ght=["disabled"],jht=U(" P2W slots \u2192 Total: ");function Wht(e,t,r,n,i,o){return r.o?(R(),N(W,{key:0},[b("h3",null,L(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(R(),N(W,{key:0},[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Cn,n.userStore.activateAncado]]),Bht],64)):ut("",!0),b("table",null,[zht,(R(!0),N(W,null,Nt(r.o.houses,a=>(R(),N("tr",null,[b("td",null,[Pt(b("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,$ht),[[Cn,n.userStore.lodgingTaken[a.key]]]),Vht,b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,Uht)]),b("td",null,L(a.lodgingSpaces),1),b("td",null,L(a.CP),1)]))),256)),b("tr",null,[b("td",null,[Pt(b("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,Ght),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),jht]),b("td",null,L(n.userStore.haveLodging.slots.perTown[r.tk]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):ut("",!0)}const Hht=ze(Fht,[["render",Wht]]);const Xht={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>i-n),e.length&&(e.push("S"),e.push("F"));const t=Array(this.userStore.storagePersonal[this.tk]).fill("P");return e.concat(t)}},methods:{formatFixed:Bt,makeIconSrc:Di,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},$r=e=>(tn("data-v-a2e84901"),e=e(),en(),e),Yht=U(" Connect to nearest town "),qht={class:"section"},Zht=$r(()=>b("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),Kht=$r(()=>b("br",null,null,-1)),Jht=U(" - 1 initial"),Qht=$r(()=>b("br",null,null,-1)),tdt=U(" - "),edt=["disabled"],rdt=U(" from P2W"),ndt=$r(()=>b("br",null,null,-1)),idt={key:0},odt={key:1,class:"red"},adt=$r(()=>b("br",null,null,-1)),sdt={class:"section"},ldt={id:"storageParent"},udt={id:"storageLeft"},cdt=$r(()=>b("h3",null,"\u{1F4E6} storage",-1)),fdt=$r(()=>b("br",null,null,-1)),hdt=U(" + 1 Seal + 1 Free slot"),ddt=$r(()=>b("br",null,null,-1)),pdt=U(" + "),vdt=U(" Personal items"),gdt=$r(()=>b("br",null,null,-1)),mdt=$r(()=>b("span",{class:"markInnate underline"},"initial",-1)),ydt=$r(()=>b("br",null,null,-1)),_dt=U(" - "),bdt=U(" "+L(" ")),wdt=$r(()=>b("span",{class:"markP2W underline"},"from P2W",-1)),Sdt=$r(()=>b("br",null,null,-1)),Tdt=$r(()=>b("span",{class:"markProvided underline"},"required",-1)),Pdt={key:1},Edt={key:2,class:"red"},Adt=$r(()=>b("br",null,null,-1)),Cdt=$r(()=>b("span",{class:"markExtra underline"},"extra",-1)),Mdt={id:"storageItemList"},kdt={key:0},xdt={key:0,class:"textItem"},Ldt={key:1,class:"textItem"},Idt=["title"],Odt=["src"],Rdt=["title"];function Ddt(e,t,r,n,i,o){return r.tk>0?(R(),N(W,{key:0},[b("h2",null,L(n.gameStore.uloc.town[r.tk]),1),r.tk==619?(R(),N(W,{key:0},[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Cn,n.userStore.activateAncado]]),Yht],64)):ut("",!0),b("div",qht,[Zht,U(" "+L(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),Kht,Jht,Qht,tdt,Pt(b("input",{type:"number",class:"w42em",min:"0",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,edt),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),rdt,ndt,U(" = "+L(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(R(),N("span",idt,"\u2190 max possible")):ut("",!0),n.userStore.townsInfra[r.tk].errL?(R(),N("span",odt,"\u2190 too much!")):ut("",!0),adt,b("strong",null,L(n.userStore.townsInfra[r.tk].lodging)+" found ",1)]),b("div",sdt,[b("div",ldt,[b("div",udt,[cdt,U(" "+L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),fdt,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(R(),N(W,{key:0},[hdt,ddt],64)):ut("",!0),pdt,Pt(b("input",{type:"number",class:"w42em",min:"0","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[pe,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),vdt,gdt,U(" - "+L(n.userStore.baseStorage)+" ",1),mdt,ydt,_dt,Pt(b("input",{type:"number",class:"w3em",min:"0","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[pe,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),bdt,wdt,Sdt,U(" = "+L(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),Tdt,n.userStore.townsInfra[r.tk].warnS?(R(),N("span",Pdt,"\u2190 max possible")):ut("",!0),n.userStore.townsInfra[r.tk].errS?(R(),N("span",Edt,"\u2190 too much!")):ut("",!0),Adt,b("strong",null,L(n.userStore.townsInfra[r.tk].storage)+" found",1),U(" \u2192 "+L(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),Cdt]),b("div",Mdt,[(R(!0),N(W,null,Nt(o.storageViewCount,a=>(R(),N(W,null,[a>1&&(a-1)%9==0?(R(),N("br",kdt)):ut("",!0),b("div",{class:Yr(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(R(),N("span",xdt)):isNaN(o.ingameSortedItems[a-1])?(R(),N("span",Ldt,L(o.ingameSortedItems[a-1]),1)):(R(),N("abbr",{key:2,title:o.ingameSortedItems[a-1]+" "+n.gameStore.uloc.item[o.ingameSortedItems[a-1]]},[b("img",{src:o.makeIconSrc(o.ingameSortedItems[a-1]),class:"iconitem"},null,8,Odt)],8,Idt))],2)],64))),256))])])]),U(" Found cost: "+L(n.userStore.townsInfra[r.tk].cost)+" CP ",1),n.userStore.townsInfra[r.tk].success?(R(),N("abbr",{key:1,title:o.houseCraftPickedTooltip(r.tk)},"\u2139\uFE0F",8,Rdt)):ut("",!0)],64)):ut("",!0)}const Ndt=ze(Xht,[["render",Ddt],["__scopeId","data-v-a2e84901"]]);function Jm(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const UE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),fx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);fx&&parseFloat(fx[1]);const Fdt="3.2.7";function ha(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const L3=typeof process!="object"||String(process)!=="[object process]"||process.browser,Bdt=typeof window<"u"&&typeof window.orientation<"u",hx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);hx&&parseFloat(hx[1]);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class zdt{constructor(t,r){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){ha(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ha(this.isRunning),this.isRunning=!1,this._reject(t)}}class J2{}const Q2=new Map;function $dt(e){ha(e.source&&!e.url||!e.source&&e.url);let t=Q2.get(e.source||e.url);return t||(e.url&&(t=Vdt(e.url),Q2.set(e.url,t)),e.source&&(t=gz(e.source),Q2.set(e.source,t))),ha(t),t}function Vdt(e){if(!e.startsWith("http"))return e;const t=Udt(e);return gz(t)}function gz(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Udt(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function mz(e,t=!0,r){const n=r||new Set;if(e){if(dx(e))n.add(e);else if(dx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)mz(e[i],t,n)}}return r===void 0?Array.from(n):[]}function dx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const tb=()=>{};class I3{static isSupported(){return typeof Worker<"u"&&L3||typeof J2!==void 0}constructor(t){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:r,source:n,url:i}=t;ha(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=tb,this.onError=o=>console.log(o),this.worker=L3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=tb,this.onError=tb,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||mz(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=$dt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new J2(n,{eval:!1})}else if(this.source)t=new J2(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class Gdt{static isSupported(){return I3.isSupported()}constructor(t){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new zdt(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new I3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Bdt?this.maxMobileConcurrency:this.maxConcurrency}}const jdt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ta{static isSupported(){return I3.isSupported()}static getWorkerFarm(t={}){return ta._workerFarm=ta._workerFarm||new ta({}),ta._workerFarm.setProps(t),ta._workerFarm}constructor(t){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...jdt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new Gdt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(ta,"_workerFarm",void 0);const Wdt="latest";function Hdt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=Wdt);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return ha(i),i}function Xdt(e,t=Fdt){ha(e,"no worker provided");const r=e.version;return!(!t||!r)}function Ydt(e,t){return!ta.isSupported()||!L3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function qdt(e,t,r,n,i){const o=e.id,a=Hdt(e,r),l=ta.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",Zdt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function Zdt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function yz(e){return e&&typeof e=="object"&&e.isBuffer}function Kdt(e){return yz(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function _z(e){if(yz(e))return Kdt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function Jdt(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function Qdt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function t0t(e){const t=[];for await(const r of e)t.push(r);return Qdt(...t)}function px(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class vx{constructor(t,r){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=px(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(px()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class yy{constructor(t){E(this,"id",void 0),E(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof vx?this.stats[r]=t:this.stats[r]=new vx(r,n)),this.stats[r]}}const e0t="Queued Requests",r0t="Active Requests",n0t="Cancelled Requests",i0t="Queued Requests Ever",o0t="Active Requests Ever",a0t={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class s0t{constructor(t={}){E(this,"props",void 0),E(this,"stats",void 0),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"deferredUpdate",null),this.props={...a0t,...t},this.stats=new yy({id:this.props.id}),this.stats.get(e0t),this.stats.get(r0t),this.stats.get(n0t),this.stats.get(i0t),this.stats.get(o0t)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let l0t="";const gx={};function u0t(e){for(const t in gx)if(e.startsWith(t)){const r=gx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(l0t).concat(e)),e}function c0t(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const f0t=e=>typeof e=="boolean",Pd=e=>typeof e=="function",B0=e=>e!==null&&typeof e=="object",mx=e=>B0(e)&&e.constructor==={}.constructor,h0t=e=>e&&typeof e[Symbol.iterator]=="function",d0t=e=>e&&typeof e[Symbol.asyncIterator]=="function",_f=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,bf=e=>typeof Blob<"u"&&e instanceof Blob,p0t=e=>e&&typeof e=="object"&&e.isBuffer,v0t=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||B0(e)&&Pd(e.tee)&&Pd(e.cancel)&&Pd(e.getReader),g0t=e=>B0(e)&&Pd(e.read)&&Pd(e.pipe)&&f0t(e.readable),bz=e=>v0t(e)||g0t(e),m0t=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,y0t=/^([-\w.]+\/[-\w.+]+)/;function _0t(e){const t=y0t.exec(e);return t?t[1]:e}function yx(e){const t=m0t.exec(e);return t?t[1]:""}const b0t=/\?.*/;function _y(e){if(_f(e)){const t=eb(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:_0t(r)||yx(t)}}return bf(e)?{url:eb(e.name||""),type:e.type||""}:typeof e=="string"?{url:eb(e),type:yx(e)}:{url:"",type:""}}function w0t(e){return _f(e)?e.headers["content-length"]||-1:bf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function eb(e){return e.replace(b0t,"")}async function wz(e){if(_f(e))return e;const t={},r=w0t(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=_y(e);i&&(t["content-type"]=i);const o=await P0t(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function S0t(e){if(!e.ok){const t=await T0t(e);throw new Error(t)}}async function T0t(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function P0t(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=E0t(r);return"data:base64,".concat(n)}return null}function E0t(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function _x(e,t){if(typeof e=="string"){e=u0t(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await wz(e)}function Sz(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Ta(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Sz()}const Yg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},hv=Yg.window||Yg.self||Yg.global,ph=Yg.process||{},Tz=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ta();const rb=globalThis;function Pz(e){if(!e&&!Ta())return"Node";if(Sz(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":rb.chrome?"Chrome":rb.safari?"Safari":rb.mozInnerScreenX?"Firefox":"Unknown"}function A0t(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class C0t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",{}),this.storage=A0t(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function M0t(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function k0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function nb(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let Qm;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Qm||(Qm={}));function bx(e){return typeof e=="string"?Qm[e.toUpperCase()]||Qm.WHITE:e}function x0t(e,t,r){return!Ta&&typeof e=="string"&&(t&&(t=bx(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=bx(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function L0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function t1(e,t){if(!e)throw new Error(t||"Assertion failed")}function ju(){let e;if(Ta&&"performance"in hv){var t,r;e=hv==null||(t=hv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in ph){var n;const i=ph==null||(n=ph.hrtime)===null||n===void 0?void 0:n.call(ph);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Wu={debug:Ta&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},I0t={enabled:!0,level:0};function Wn(){}const Sx={},Tx={once:!0};class z0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",Tz),E(this,"_startTs",ju()),E(this,"_deltaTs",ju()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new C0t("__probe-".concat(this.id,"__"),I0t),this.userData={},this.timeStamp("".concat(this.id," started")),L0t(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ju()-this._startTs).toPrecision(10))}getDelta(){return Number((ju()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){t1(t,r)}warn(t){return this._getLogFunction(0,t,Wu.warn,arguments,Tx)}error(t){return this._getLogFunction(0,t,Wu.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Wu.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Wu.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Wu.debug||Wu.info,arguments,Tx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Wn,n&&[n],{tag:N0t(r)}):Wn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?Ta?D0t({image:i,message:o,scale:a}):R0t({image:i,message:o,scale:a}):Wn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Wn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Px({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Wn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Ez(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Px({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,t1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=ju();const a=o.tag||o.message;if(o.once)if(!Sx[a])Sx[a]=ju();else return Wn;return r=O0t(this.id,o.message,o),n.bind(console,r,...o.args)}return Wn}}E(z0,"VERSION",Tz);function Ez(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return t1(Number.isFinite(t)&&t>=0),t}function Px(e){const{logLevel:t,message:r}=e;e.logLevel=Ez(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return t1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function O0t(e,t,r){if(typeof t=="string"){const n=r.time?k0t(M0t(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=x0t(t,r.color,r.background)}return t}function R0t(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Wn}function D0t(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=nb(o,r,n);console.log(...a)},o.src=t,Wn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...nb(t,r,n)),Wn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...nb(o,r,n)),o.src=t.toDataURL(),Wn}return Wn}function N0t(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Ex=new z0({id:"loaders.gl"});class F0t{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class B0t{constructor(){E(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const Az={fetch:null,mimeType:void 0,nothrow:!1,log:new B0t,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:UE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},z0t={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Cz(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const Mz=()=>{const e=Cz();return e.globalOptions=e.globalOptions||{...Az},e.globalOptions};function $0t(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],V0t(e,r),G0t(t,e,n)}function kz(e,t){const r=Mz(),n=e||r;return typeof n.fetch=="function"?n.fetch:B0(n.fetch)?i=>_x(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:_x}function V0t(e,t){Ax(e,null,Az,z0t,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Ax(n,r.id,i,o,t)}}function Ax(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&B0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)Ex.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=U0t(s,i);Ex.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function U0t(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function G0t(e,t,r){const i={...e.options||{}};return j0t(i,r),i.log===null&&(i.log=new F0t),Cx(i,Mz()),Cx(i,t),i}function Cx(e,t){for(const r in t)if(r in t){const n=t[r];mx(n)&&mx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function j0t(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function GE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function jE(e){var t,r;Jm(e,"null loader"),Jm(GE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const xz=()=>{const e=Cz();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function W0t(e){const t=xz();e=Array.isArray(e)?e:[e];for(const r of e){const n=jE(r);t.find(i=>n===i)||t.unshift(n)}}function H0t(){return xz()}const X0t=new z0({id:"loaders.gl"}),Y0t=/\.([^.]+)$/;async function q0t(e,t=[],r,n){if(!Lz(e))return null;let i=Mx(e,t,{...r,nothrow:!0},n);if(i)return i;if(bf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Mx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(Iz(e));return i}function Mx(e,t=[],r,n){if(!Lz(e))return null;if(t&&!Array.isArray(t))return jE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...H0t()),K0t(i);const o=Z0t(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(Iz(e));return o}function Z0t(e,t,r,n){const{url:i,type:o}=_y(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=ib(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||J0t(t,a),l=l||(s?"matched url ".concat(a):""),s=s||ib(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||tpt(t,e),l=l||(s?"matched initial data ".concat(Oz(e)):""),s=s||ib(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;X0t.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function Lz(e){return!(e instanceof Response&&e.status===204)}function Iz(e){const{url:t,type:r}=_y(e);let n="No valid loader found (";n+=t?"".concat(c0t(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?Oz(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function K0t(e){for(const t of e)jE(t)}function J0t(e,t){const r=t&&Y0t.exec(t),n=r&&r[1];return n?Q0t(e,n):null}function Q0t(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function ib(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function tpt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(ept(t,r))return r}else if(ArrayBuffer.isView(t)){if(kx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&kx(t,0,r))return r;return null}function ept(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function kx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>rpt(e,t,r,i))}function rpt(e,t,r,n){if(n instanceof ArrayBuffer)return Jdt(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=O3(e,t,n.length);return n===i;default:return!1}}function Oz(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?O3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?O3(e,0,t):""}function O3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const npt=256*1024;function*ipt(e,t){const r=(t==null?void 0:t.chunkSize)||npt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const opt=256*1024;function*apt(e,t={}){const{chunkSize:r=opt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const spt=1024*1024;async function*lpt(e,t){const r=(t==null?void 0:t.chunkSize)||spt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function xx(e,t){return UE?upt(e,t):cpt(e)}async function*upt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield _z(a)}}catch{r.releaseLock()}}async function*cpt(e,t){for await(const r of e)yield _z(r)}function fpt(e,t){if(typeof e=="string")return ipt(e,t);if(e instanceof ArrayBuffer)return apt(e,t);if(bf(e))return lpt(e,t);if(bz(e))return xx(e,t);if(_f(e))return xx(e.body,t);throw new Error("makeIterator")}const Rz="Cannot convert supplied data type";function hpt(e,t,r){if(t.text&&typeof e=="string")return e;if(p0t(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(Rz)}async function dpt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return hpt(e,t);if(bf(e)&&(e=await wz(e)),_f(e)){const i=e;return await S0t(i),t.binary?await i.arrayBuffer():await i.text()}if(bz(e)&&(e=fpt(e,r)),h0t(e)||d0t(e))return t0t(e);throw new Error(Rz)}function ppt(e,t,r=null){if(r)return r;const n={fetch:kz(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function vpt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function WE(e,t,r,n){ha(!n||typeof n=="object"),t&&!Array.isArray(t)&&!GE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=_y(e),a=vpt(t,n),s=await q0t(e,a,r);return s?(r=$0t(r,s,a,i),n=ppt({url:i,parse:WE,loaders:a},r,n),await gpt(s,e,r,n)):null}async function gpt(e,t,r,n){if(Xdt(e),_f(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await dpt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(Ydt(e,r))return await qdt(e,t,r,n,WE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw ha(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function e1(e,t,r,n){!Array.isArray(t)&&!GE(t)&&(r=t,t=void 0);const i=kz(r);let o=e;return typeof e=="string"&&(o=await i(e)),bf(e)&&(o=await i(e)),await WE(o,t,r)}const mpt="3.2.7",{_parseImageNode:ypt}=globalThis,R3=typeof Image<"u",D3=typeof ImageBitmap<"u",_pt=Boolean(ypt),N3=UE?!0:_pt;function bpt(e){switch(e){case"auto":return D3||R3||N3;case"imagebitmap":return D3;case"image":return R3;case"data":return N3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function wpt(){if(D3)return"imagebitmap";if(R3)return"image";if(N3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Spt(e){const t=Ppt(e);if(!t)throw new Error("Not an image");return t}function Tpt(e){switch(Spt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Ppt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const Ept=/^data:image\/svg\+xml/,Apt=/\.svg((\?|#).*)?$/;function HE(e){return e&&(Ept.test(e)||Apt.test(e))}function Cpt(e,t){if(HE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return Dz(e,t)}function Dz(e,t){if(HE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function Nz(e,t,r){const n=Cpt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await Mpt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function Mpt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const kpt={};let Lx=!0;async function xpt(e,t,r){let n;HE(r)?n=await Nz(e,t,r):n=Dz(e,r);const i=t&&t.imagebitmap;return await Lpt(n,i)}async function Lpt(e,t=null){if((Ipt(t)||!Lx)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),Lx=!1}return await createImageBitmap(e)}function Ipt(e){for(const t in e||kpt)return!1;return!0}const fo=!1,Ed=!0;function Fz(e){const t=$0(e);return Opt(t)||Npt(t)||Rpt(t)||Dpt(t)}function Opt(e){const t=$0(e);return t.byteLength>=24&&t.getUint32(0,fo)===2303741511?{mimeType:"image/png",width:t.getUint32(16,fo),height:t.getUint32(20,fo)}:null}function Rpt(e){const t=$0(e);return t.byteLength>=10&&t.getUint32(0,fo)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Ed),height:t.getUint16(8,Ed)}:null}function Dpt(e){const t=$0(e);return t.byteLength>=14&&t.getUint16(0,fo)===16973&&t.getUint32(2,Ed)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Ed),height:t.getUint32(22,Ed)}:null}function Npt(e){const t=$0(e);if(!(t.byteLength>=3&&t.getUint16(0,fo)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=Fpt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,fo);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,fo),width:t.getUint16(o+7,fo)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,fo)}return null}function Fpt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function $0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function Bpt(e,t){const{mimeType:r}=Fz(e)||{},n=globalThis._parseImageNode;return Jm(n),await n(e,r)}async function zpt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=$pt(i);let s;switch(a){case"imagebitmap":s=await xpt(e,t,o);break;case"image":s=await Nz(e,t,o);break;case"data":s=await Bpt(e);break;default:Jm(!1)}return i==="data"&&(s=Tpt(s)),s}function $pt(e){switch(e){case"auto":case"data":return wpt();default:return bpt(e),e}}const Vpt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],Upt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Gpt={image:{type:"auto",decode:!0}},Bz={id:"image",module:"images",name:"Images",version:mpt,mimeTypes:Upt,extensions:Vpt,parse:zpt,tests:[e=>Boolean(Fz(new DataView(e)))],options:Gpt},Wt=new z0({id:"deck"});let F3={};function jpt(e){F3=e}function Lr(e,t,r,n){Wt.level>0&&F3[e]&&F3[e].call(null,t,r,n)}function Wpt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Hpt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Wpt,parseTextSync:JSON.parse},Ad="8.8.8",qg=globalThis.deck&&globalThis.deck.VERSION;if(qg&&qg!==Ad)throw new Error("deck.gl - multiple versions detected: ".concat(qg," vs ").concat(Ad));qg||(Wt.log(1,"deck.gl ".concat(Ad))(),globalThis.deck={...globalThis.deck,VERSION:Ad,version:Ad,log:Wt,_registerLoggers:jpt},W0t([Hpt,[Bz,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Xpt=globalThis.deck,Lt=new z0({id:"luma.gl"});function Hr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Ypt="Invalid WebGLRenderingContext",qpt="Requires WebGL2";function by(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Qt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Zpt(e){return Qt(e)?e:null}function wy(e){return Hr(by(e),Ypt),e}function Or(e){return Hr(Qt(e),qpt),e}const Kh={};function Kpt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function Jpt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function Qpt(e,t){Kh[e]=!0,t!==void 0&&Kpt(t)}function tvt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(Kh[n]=!0);while(n!==0);for(n in Kh)if(Kh[n])return delete Kh[n],parseInt(n,10);return 0}}const V0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};V0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};V0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const pu=function(t){const r=this;this.gl=t,tvt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{Jpt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};pu.prototype.VERTEX_ARRAY_BINDING_OES=34229;pu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new V0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};pu.prototype.createVertexArrayOES=function(){const t=new V0(this);return this.vertexArrayObjects.push(t),t};pu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};pu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof V0&&t.hasBeenBound&&t.ext===this)};pu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){Qpt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function evt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new pu(this)),this.__OESVertexArrayObject))}}const Ix="OES_element_index",Ox="WEBGL_draw_buffers",rvt="EXT_disjoint_timer_query",nvt="EXT_disjoint_timer_query_webgl2",ivt="EXT_texture_filter_anisotropic",Rx="WEBGL_debug_renderer_info",ovt=35723,avt=4352,svt=36795,lvt=34047,uvt=37445,cvt=37446,Re=e=>Qt(e)?void 0:0,fvt={[3074]:e=>Qt(e)?void 0:36064,[ovt]:e=>Qt(e)?void 0:avt,[35977]:Re,[32937]:Re,[svt]:(e,t)=>{const r=Qt(e)?e.getExtension(nvt):e.getExtension(rvt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[uvt]:(e,t)=>{const r=e.getExtension(Rx);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[cvt]:(e,t)=>{const r=e.getExtension(Rx);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[lvt]:(e,t)=>{const r=e.luma.extensions[ivt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Re,[35071]:Re,[37447]:Re,[36063]:(e,t)=>{if(!Qt(e)){const r=e.getExtension(Ox);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Re,[35374]:Re,[35377]:Re,[34852]:e=>{if(!Qt(e)){const t=e.getExtension(Ox);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Ix)?2147483647:65535,[33001]:e=>e.getExtension(Ix)?16777216:65535,[33e3]:e=>16777216,[37157]:Re,[35373]:Re,[35657]:Re,[36183]:Re,[37137]:Re,[34045]:Re,[35978]:Re,[35979]:Re,[35968]:Re,[35376]:Re,[35375]:Re,[35659]:Re,[37154]:Re,[35371]:Re,[35658]:Re,[35076]:Re,[35077]:Re,[35380]:Re};function hvt(e,t,r){const n=fvt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const dvt="OES_vertex_array_object",zz="ANGLE_instanced_arrays",pvt="WEBGL_draw_buffers",vvt="EXT_disjoint_timer_query",gvt="EXT_texture_filter_anisotropic",mvt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function yvt(e,t){return{webgl2:Qt(e),ext:e.getExtension(t)}}const $z={[dvt]:{meta:{suffix:"OES"},createVertexArray:()=>{Hr(!1,mvt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[zz]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){Hr(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[pvt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Hr(!1)}},[vvt]:{meta:{suffix:"EXT"},createQuery:()=>{Hr(!1)},deleteQuery:()=>{Hr(!1)},beginQuery:()=>{Hr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},ob={readBuffer:(e,t,r)=>{Qt(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=yvt(e,zz);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Qt(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Qt(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[gvt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:hvt,hint(e,t,r,n){return t(r,n)}};function _vt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(evt(e),bvt(e),Svt(e,$z),wvt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=_vt;function bvt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function wvt(e,t){let{target:r,target2:n}=t;Object.keys(ob).forEach(i=>{if(typeof ob[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=ob[i].bind(null,e,o);r[i]=a,n[i]=a}})}function Svt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&Tvt(e,{extension:r,target:e.luma,target2:e})}function Tvt(e,t){let{extension:r,target:n,target2:i}=t;const o=$z[r];Hr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const XE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Fa=(e,t,r)=>t?e.enable(r):e.disable(r),Dx=(e,t,r)=>e.hint(r,t),gn=(e,t,r)=>e.pixelStorei(r,t),Pvt=(e,t)=>{const r=Qt(e)?36009:36160;return e.bindFramebuffer(r,t)},Evt=(e,t)=>e.bindFramebuffer(36008,t);function vh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Avt={[3042]:Fa,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Fa,[2885]:(e,t)=>e.cullFace(t),[2929]:Fa,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Fa,[35723]:Dx,[36006]:Pvt,[2886]:(e,t)=>e.frontFace(t),[33170]:Dx,[2849]:(e,t)=>e.lineWidth(t),[32823]:Fa,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Fa,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Fa,[3088]:(e,t)=>e.scissor(...t),[2960]:Fa,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:gn,[3317]:gn,[37440]:gn,[37441]:gn,[37443]:gn,[3330]:gn,[3332]:gn,[3331]:gn,[36010]:Evt,[3314]:gn,[32878]:gn,[3316]:gn,[3315]:gn,[32877]:gn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=vh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=vh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=vh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=vh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=vh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function je(e,t,r){return t[e]!==void 0?t[e]:r[e]}const Cvt={blendEquation:(e,t,r)=>e.blendEquationSeparate(je(32777,t,r),je(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(je(32969,t,r),je(32968,t,r),je(32971,t,r),je(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(je(32824,t,r),je(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(je(32938,t,r),je(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,je(2962,t,r),je(2967,t,r),je(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,je(34816,t,r),je(36003,t,r),je(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,je(2964,t,r),je(2965,t,r),je(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,je(34817,t,r),je(34818,t,r),je(34819,t,r))},Nx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},Zi=(e,t)=>e.isEnabled(t),Fx={[3042]:Zi,[2884]:Zi,[2929]:Zi,[3024]:Zi,[32823]:Zi,[32926]:Zi,[32928]:Zi,[3089]:Zi,[2960]:Zi,[35977]:Zi};function Vz(e){for(const t in e)return!1;return!0}function Mvt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Bx(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function kvt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function xvt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class Lvt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Ovt(t):Object.assign({},XE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Hr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];da(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){Hr(o!==void 0);const a=t[o],s=this.cache[o];Mvt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function Uz(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(Hr(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new Lvt(e,{copyState:n}),xvt(e);for(const o in Nx){const a=Nx[o];kvt(e,o,a)}Bx(e,"getParameter"),Bx(e,"isEnabled")}return e.state.enable=r,e}function Ivt(e){e.state||Uz(e,{copyState:!1}),e.state.push()}function zx(e){Hr(e.state),e.state.pop()}function da(e,t){if(Hr(by(e),"setParameters requires a WebGL context"),Vz(t))return;const r={};for(const i in t){const o=Number(i),a=Avt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=Cvt[i];o(e,t,n)}}function Ovt(e,t){if(t=t||XE,typeof t=="number"){const i=t,o=Fx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=Fx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Rvt(e){da(e,XE)}function Qn(e,t,r){if(Vz(t))return r(e);const{nocatch:n=!0}=t;Ivt(e),da(e,t);let i;if(n)i=r(e),zx(e);else try{i=r(e)}finally{zx(e)}return i}function Yc(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function ab(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Yc(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Nvt(t,n,i,o,r)}function Dvt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Nvt(e,t,r,n,i){const o=$x(e[0],t,r);let a=Vx(e[1],t,n,i),s=$x(e[0]+1,t,r);const l=s===r-1?s:s-1;s=Vx(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function $x(e,t,r){return Math.min(Math.round(e*t),r-1)}function Vx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const YE=Ta(),Fvt=YE&&typeof document<"u",Gz={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function jz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hr(YE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},Gz,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=Vvt({canvas:o,width:t,height:r,onError:n});return i=$vt(a,e),i?(i=qE(i,e),Uvt(i),i):null}function qE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Gvt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},Gz,t);const{manageState:r,debug:n}=t;return r&&Uz(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Lt.log(1,...o)()}}),YE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Lt.level=Math.max(Lt.level,1)):Lt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Bvt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function zvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=Dvt(t.useDevicePixels);jvt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function $vt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function Vvt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(Fvt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function Uvt(e){const t=Qt(e)?"WebGL2":"WebGL1",r=Bvt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Lt.info(1,"".concat(t).concat(i," context ").concat(n))()}function Gvt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function jvt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Lt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Lt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Cd="8.5.16",Wvt="set luma.log.level=1 (or higher) to trace rendering";class Wz{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new yy({id:t})),this.stats.get(t)}}const xl=new Wz;if(globalThis.luma&&globalThis.luma.VERSION!==Cd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Cd));globalThis.luma||(Ta()&&Lt.log(1,"luma.gl ".concat(Cd," - ").concat(Wvt))(),globalThis.luma=globalThis.luma||{VERSION:Cd,version:Cd,log:Lt,stats:xl,globals:{modules:{},nodeIO:{}}});function Hvt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Xvt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function gt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function sb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return gt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function ms(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const lb={};function Ms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";lb[e]=lb[e]||1;const t=lb[e]++;return"".concat(e,"-").concat(t)}function Ux(e){return gt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function qc(e){let t=!0;for(const r in e){t=!1;break}return t}function Hz(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Lt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Hu="Resource subclass must define virtual methods";class Pa{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wy(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Ms(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=sb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Qt(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?ms(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=ms(this.gl,a[f]))}}return a}setParameter(t,r){t=sb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=sb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return Hz(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Hu)}_deleteHandle(){throw new Error(Hu)}_bindHandle(t){throw new Error(Hu)}_getOptsFromHandle(){throw new Error(Hu)}_getParameter(t,r){throw new Error(Hu)}_setParameter(t,r){throw new Error(Hu)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new Wz}_addStats(){const t=this[Symbol.toStringTag],r=xl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];xl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Yvt="Failed to deduce GL constant from typed array";function B3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Yvt)}}function a0(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function qvt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Zvt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function z3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Lt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const Kvt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Jvt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class bn{static getBytesPerElement(t){return a0(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return gt(t.size),a0(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new bn(Kvt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return bn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return bn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=z3("Accessor",t,Jvt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Gx=10,Xz={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Qvt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Xz},tgt={removedProps:Xz};class Pe extends Pa{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/bn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/bn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=z3("Buffer",t,Qvt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=z3("Buffer",t,tgt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new bn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;gt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Or(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Or(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Or(this.gl);const o=a0(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,gt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(gt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Gx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;gt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Gx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=B3(t);return gt(o),this.setAccessor(new bn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;gt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=a0(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new bn(this.accessor,{type:B3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Lt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Lt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Lt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Lt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new bn(this.accessor,t),this}}const ZE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},Yz={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},qz={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function egt(e,t){const r=ZE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Qt(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function rgt(e,t){const r=ZE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const ngt=[9729,9728],jx=globalThis.WebGLBuffer||function(){};class tu extends Pa{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&egt(t,n),o=o&&(!i||rgt(t,n))),o}constructor(t,r){const{id:n=Ms("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:r,width:f,height:h,depth:m,format:o,type:p,dataFormat:d,border:a,mipmaps:g,parameters:u,compressed:v}),g&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Qn(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let g=null;({data:u,dataType:g}=this._getDataType({data:u,compressed:p}));let m,y=0;if(Qn(this.gl,l,()=>{switch(g){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":m=Or(v),m.bindBuffer(35052,u.handle||u),m.texImage2D(r,i,o,f,h,a,d,c,s),m.bindBuffer(35052,null);break;case"browser-object":Qt(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[_,w]of u.entries())v.compressedTexImage2D(r,_,w.format,w.width,w.height,a,w.data),y+=w.levelSize;break;default:gt(!1,"Unknown image data type")}}),g==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const _=Yz[this.dataFormat]||4,w=qz[this.type]||1;this._trackAllocatedMemory(this.width*this.height*_*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:g={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),gt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const m=i;i=m.data,s=m.shape[0],l=m.shape[1]}i instanceof Pe&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Qn(this.gl,g,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof jx){const m=Or(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(r,u,o,a,s,l,h,f,p),m.bindBuffer(35052,null)}else Qt(this.gl)?Or(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Lt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Pe?{data:r.handle,dataType:"buffer"}:r instanceof jx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=ZE[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},gt(i,"Could not deduced texture size"),gt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),gt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:gt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qt(this.gl)||!this.width||!this.height?!1:!Ux(this.width)||!Ux(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:ngt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let igt="";function ogt(e,t){return gt(typeof e=="string"),e=igt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class dn extends tu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return tu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wy(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:ogt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const $3=[34069,34070,34071,34072,34073,34074];class Zz extends tu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wy(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all($3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),$3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Lt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}Zz.FACES=$3;class agt extends tu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Qn(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Pe&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=Yz[this.dataFormat]||4,p=qz[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const hl="EXT_color_buffer_float",Wx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:hl,bpp:2},[33327]:{gl2:hl,bpp:4},[34842]:{gl2:hl,bpp:8},[33326]:{gl2:hl,bpp:4},[33328]:{gl2:hl,bpp:8},[34836]:{gl2:hl,bpp:16},[35898]:{gl2:hl,bpp:4}};function sgt(e,t,r){const n=r[t];if(!n)return!1;const i=Qt(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class yc extends Pa{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||sgt(t,r,Wx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return gt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Wx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const lgt=256,ugt=1024,cgt=16384,Hx=6144,Xx=6145,Yx=6146,qx=34041,Kz="clear: bad arguments";function KE(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=cgt,r!==!0&&(o.clearColor=r)),n&&(a|=lgt,n!==!0&&(o.clearDepth=n)),i&&(a|=ugt,n!==!0&&(o.clearStencil=n)),gt(a!==0,Kz),Qn(e,o,()=>{e.clear(a)})}function fgt(e){let{framebuffer:t=null,buffer:r=Hx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(e),Qn(e,{framebuffer:t},()=>{switch(r){case Hx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case Xx:e.clearBufferfv(Xx,0,[i]);break;case Yx:e.clearBufferiv(Yx,0,[i]);break;case qx:const[o,a]=i;e.clearBufferfi(qx,0,o,a);break;default:gt(!1,Kz)}})}function hgt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return gt(!1),0}}function Sy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=Jz(e);gt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),gt(p[o]),u=u||p[o].type,a=pgt(a,u,i,s,l),u=u||B3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function Zx(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Sy(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Zvt({data:n,width:i,height:o}));qvt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function dgt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=Jz(e);gt(h);const{gl:p,handle:v}=h,g=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const m=p.bindFramebuffer(36160,v);gt(t);let y=null;if(t instanceof tu&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!g)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Or(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,m||null),d&&h.delete(),y}function Jz(e){return e instanceof nr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Tgt(e),deleteFramebuffer:!0}}function pgt(e,t,r,n,i){if(e)return e;t=t||5121;const o=a0(t,{clamped:!1}),a=hgt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function vgt(e){const t=new dn(e,{format:6408,type:5126,dataFormat:6408}),r=new nr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const Qz={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[vgt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},ggt=2;function mgt(e,t){return JE(e,t)}function JE(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>t$(e,r))}function ygt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in Qz)e.luma.caps[t]===void 0&&(e.luma.caps[t]=t$(e,t));return e.luma.caps}function t$(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=_gt(e,t)),e.luma.caps[t]||Lt.log(ggt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function _gt(e,t){const r=Qz[t];gt(r,t);let n;const i=Qt(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:gt(!1);return n}const Kx="Multiple render targets not supported";class nr extends Pa{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new nr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Or(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Or(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(gt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return gt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Lt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){gt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof yc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(wgt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&KE(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{fgt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Lt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Lt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Lt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Lt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Lt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Lt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Or(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=ms(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?ms(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?ms(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(Zx(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Lt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=Zx(this,{targetMaxHeight:100});return Lt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new dn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new yc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new yc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&gt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof yc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Or(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=bgt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:gt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Zpt(this.gl);r?r.readBuffer(t):gt(t===36064||t===1029,Kx),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Or(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):gt(t.length===1&&(t[0]===36064||t[0]===1029),Kx)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=ygt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function bgt(e){return e<34069?e+34069:e}function wgt(e){return(nr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const Sgt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nr.ATTACHMENT_PARAMETERS=Sgt;function e$(e,t){gt(e instanceof dn||e instanceof Zz||e instanceof agt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function Tgt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new nr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function Zg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const Pgt=35632,Egt=35633;function Agt(e){switch(e){case Pgt:return"fragment";case Egt:return"vertex";default:return"unknown type"}}function Cgt(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||Zg(t)||"(unnamed)",l="".concat(Agt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=Mgt(t);return{shaderName:l,errors:Jx(o,u),warnings:Jx(a,u)}}function Jx(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=r$("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function Mgt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return r$(s,i-l)+r+o})}function r$(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function n$(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const kgt="Shader: GLSL source code must be a JavaScript string";class s0 extends Pa{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return gt(!1),"unknown"}}constructor(t,r){wy(t),gt(typeof r.source=="string",kgt);const n=Zg(r.source,null)||r.id||Ms("unnamed ".concat(s0.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=Zg(r,null);n&&(this.id=Ms(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(s0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Zg(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=Cgt(n,this.source,this.shaderType,this.id);throw Lt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Lt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class ub extends s0{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class cb extends s0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const xgt={[5126]:Fe.bind(null,"uniform1fv",mn,1,Cr),[35664]:Fe.bind(null,"uniform2fv",mn,2,Cr),[35665]:Fe.bind(null,"uniform3fv",mn,3,Cr),[35666]:Fe.bind(null,"uniform4fv",mn,4,Cr),[5124]:Fe.bind(null,"uniform1iv",Ba,1,Cr),[35667]:Fe.bind(null,"uniform2iv",Ba,2,Cr),[35668]:Fe.bind(null,"uniform3iv",Ba,3,Cr),[35669]:Fe.bind(null,"uniform4iv",Ba,4,Cr),[35670]:Fe.bind(null,"uniform1iv",Ba,1,Cr),[35671]:Fe.bind(null,"uniform2iv",Ba,2,Cr),[35672]:Fe.bind(null,"uniform3iv",Ba,3,Cr),[35673]:Fe.bind(null,"uniform4iv",Ba,4,Cr),[35674]:Fe.bind(null,"uniformMatrix2fv",mn,4,Vo),[35675]:Fe.bind(null,"uniformMatrix3fv",mn,9,Vo),[35676]:Fe.bind(null,"uniformMatrix4fv",mn,16,Vo),[35678]:vr,[35680]:vr,[5125]:Fe.bind(null,"uniform1uiv",dv,1,Cr),[36294]:Fe.bind(null,"uniform2uiv",dv,2,Cr),[36295]:Fe.bind(null,"uniform3uiv",dv,3,Cr),[36296]:Fe.bind(null,"uniform4uiv",dv,4,Cr),[35685]:Fe.bind(null,"uniformMatrix2x3fv",mn,6,Vo),[35686]:Fe.bind(null,"uniformMatrix2x4fv",mn,8,Vo),[35687]:Fe.bind(null,"uniformMatrix3x2fv",mn,6,Vo),[35688]:Fe.bind(null,"uniformMatrix3x4fv",mn,12,Vo),[35689]:Fe.bind(null,"uniformMatrix4x2fv",mn,8,Vo),[35690]:Fe.bind(null,"uniformMatrix4x3fv",mn,12,Vo),[35678]:vr,[35680]:vr,[35679]:vr,[35682]:vr,[36289]:vr,[36292]:vr,[36293]:vr,[36298]:vr,[36299]:vr,[36300]:vr,[36303]:vr,[36306]:vr,[36307]:vr,[36308]:vr,[36311]:vr},Lgt={},Igt={},Ogt={},Qx=[0];function QE(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(Qx[0]=e,e=Qx);const i=e.length;if(i%t&&Lt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function mn(e,t){return QE(e,t,Float32Array,Lgt)}function Ba(e,t){return QE(e,t,Int32Array,Igt)}function dv(e,t){return QE(e,t,Uint32Array,Ogt)}function tL(e,t,r){const n=xgt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function Rgt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function Dgt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!Ngt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function Ngt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?Bgt(e):isFinite(e)||e===!0||e===!1||e instanceof tu||e instanceof yc?!0:e instanceof nr?Boolean(e.texture):!1}function Fgt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function Bgt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function vr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Fe(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{gt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Cr(e,t,r,n){e[t](r,n)}function Vo(e,t,r,n){e[t](r,!1,n)}const zgt=5120,$gt=5121,Vgt=5122,Ugt=5123,eL=0,pv=1,Ggt=2,jgt=3,vv=4,Wgt=5,Hgt=6,ir=5126,Xgt=35664,Ygt=35665,qgt=35666,gh=5124,Zgt=35667,Kgt=35668,Jgt=35669,mh=5125,Qgt=36294,tmt=36295,emt=36296,rmt=35670,nmt=35671,imt=35672,omt=35673,amt=35674,smt=35675,lmt=35676,umt=35685,cmt=35686,fmt=35687,hmt=35688,dmt=35689,pmt=35690,V3={[ir]:[ir,1,"float"],[Xgt]:[ir,2,"vec2"],[Ygt]:[ir,3,"vec3"],[qgt]:[ir,4,"vec4"],[gh]:[gh,1,"int"],[Zgt]:[gh,2,"ivec2"],[Kgt]:[gh,3,"ivec3"],[Jgt]:[gh,4,"ivec4"],[mh]:[mh,1,"uint"],[Qgt]:[mh,2,"uvec2"],[tmt]:[mh,3,"uvec3"],[emt]:[mh,4,"uvec4"],[rmt]:[ir,1,"bool"],[nmt]:[ir,2,"bvec2"],[imt]:[ir,3,"bvec3"],[omt]:[ir,4,"bvec4"],[amt]:[ir,8,"mat2"],[umt]:[ir,8,"mat2x3"],[cmt]:[ir,8,"mat2x4"],[smt]:[ir,12,"mat3"],[fmt]:[ir,12,"mat3x2"],[hmt]:[ir,12,"mat3x4"],[lmt]:[ir,16,"mat4"],[dmt]:[ir,16,"mat4x2"],[pmt]:[ir,16,"mat4x3"]};function vmt(e){switch(e){case eL:return eL;case pv:return pv;case jgt:return pv;case Ggt:return pv;case vv:return vv;case Wgt:return vv;case Hgt:return vv;default:return gt(!1),0}}function rL(e){const t=V3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function i$(e,t){switch(e){case zgt:case $gt:case Vgt:case Ugt:e=ir;break}for(const r in V3){const[n,i,o]=V3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class gmt{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Qt(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=rL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new bn(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=rL(n),s=new bn({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const nL=4,mmt=35981,ymt=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class o$ extends Pa{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",ymt),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=mmt}=t;return this.hash=r||"",this.vs=typeof n=="string"?new ub(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new cb(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,gt(this.vs instanceof ub),gt(this.fs instanceof cb),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Or(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new gmt(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:g,samplers:m}=t;if((g||m)&&(Lt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Lt.priority>=r){const y=p?p.id:"default",_="mode=".concat(ms(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(ms(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Lt.log(r,_)()}return gt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const y=vmt(n);d.begin(y)}this._bindTextures(),Qn(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Qt(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt.priority>=2&&Dgt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof nr&&(o=o.texture),o instanceof tu)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&Fgt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new ub({handle:i});break;case 35632:n.fs=new cb({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Ms(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Lt.time(nL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Lt.timeEnd(nL,"linkProgram for ".concat(this._getName()))(),t.debug||Lt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=Rgt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=tL(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=tL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const _mt=34918,bmt=34919,wmt=35007,Smt=36795,Tmt=35976,Pmt=35887,Emt=36202;class r1 extends Pa{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Qt(t),i=JE(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:gt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(wmt)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?Emt:Pmt)}beginTransformFeedbackQuery(){return this.begin(Tmt)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,bmt);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(Smt)}getResult(){return this.gl2.getQueryParameter(this.handle,_mt)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return r1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class a$ extends Pa{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,qc(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Lt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Pe?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let gv=null;function Amt(e){return(!gv||gv.byteLength<e)&&(gv=new ArrayBuffer(e)),gv}function Cmt(e,t){const r=Amt(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function Mmt(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const kmt="elements must be GL.ELEMENT_ARRAY_BUFFER";class _n extends Pa{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qt(t)||Pz()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new _n(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return _n.MAX_ATTRIBUTES=_n.MAX_ATTRIBUTES||t.getParameter(34921),_n.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:_n._setConstantFloatArray(t,r,n);break;case Int32Array:_n._setConstantIntArray(t,r,n);break;case Uint32Array:_n._setConstantUintArray(t,r,n);break;default:gt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return _n.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return gt(!t||t.target===34963,kmt),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(gt(Qt(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!_n.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Pe(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=Cmt(r.constructor,o);Mmt({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:gt(!1)}}static _setConstantIntArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:gt(!1)}}static _setConstantUintArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:gt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return gt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const xmt="VertexArray: attributes must be Buffers or constants (i.e. typed array)",Lmt=/^(.+)__LOCATION_([0-9]+)$/,Imt=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Omt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new _n(t),Hz(this,"VertexArray","v6.0",Imt),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pe(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Pe&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Pe&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Lt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=bn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return gt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=Lmt.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Pe)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Pe){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Pe){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(xmt)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(_n.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){_n.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Pe){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function Rmt(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=l0(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function l0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return Rmt(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function iL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;gt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&fb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&fb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||fb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:l0(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function fb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=Dmt(a);return!o||!s?(t[i]={[r]:s?l0(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function Dmt(e){return e!=null}function Nmt(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=oL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(Fmt(a.name,l))),n[s]=oL(t,i[o],l,r)}}return n}function oL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Pe){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const g=r.divisor>0;v="".concat(g?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(ms(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(l0(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(l0(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function Fmt(e,t){const{type:r,size:n}=t,i=i$(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function Bmt(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=aL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=aL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function aL(e){const{type:t,size:r}=e.accessor,n=i$(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const sL=Ta()&&typeof document<"u";let zmt=0;class $mt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=g=>jz(g),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=xl.get("animation-loop-".concat(zmt++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Lt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return gt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=r1.isSupported(this.gl,["timers"])?new r1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Lt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=sL?new Promise((t,r)=>{if(sL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Xvt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Hvt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?qE(this.props.gl,t):this.onCreateContext(t),!by(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Rvt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&zvt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const U0="vs",tA="fs";function En(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const hb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Vmt(e){const t={};for(const r in e){const n=e[r],i=Umt(n);t[r]=i}return t}function Umt(e){let t=lL(e);return t==="object"?e?"type"in e?Object.assign({},e,hb[e.type]):"value"in e?(t=lL(e.value),Object.assign({type:t},e,hb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},hb[t])}function lL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const Gmt="vs",jmt="fs";class uL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;En(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=Wmt(c),a&&(this.uniforms=Vmt(a))}getModuleSource(t){let r;switch(t){case Gmt:r=this.vs||"";break;case jmt:r=this.fs||"";break;default:En(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&En(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function Wmt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function Hmt(e){return Xmt(l$(e))}function Xmt(e){const t={},r={};return s$({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function s$(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&s$({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function l$(e,t){return e.map(r=>(r instanceof uL||(En(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),En(r.name,"shader module has no name"),r=new uL(r),r.dependencies=l$(r.dependencies)),r))}function Ymt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const qmt=7936,Zmt=7937,Kmt=7938,Jmt=35724,eA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},wl={};Object.keys(eA).forEach(e=>{wl[e]=e});function Qmt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function t1t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||qmt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Zmt);return{gpuVendor:e1t(r,n),vendor:r,renderer:n,version:e.getParameter(Kmt),shadingLanguageVersion:e.getParameter(Jmt)}}function e1t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const db={};function cL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=eA[t];if(En(n,t),!Ymt(r))return!0;if(t in db)return db[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),db[t]=l,l}function r1t(e,t){const r=eA[t];En(r,t);const n=Qmt(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return En(i===!1||i===!0),i}function mv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>r1t(e,r))}function n1t(e){switch(t1t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function i1t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return mv(e,wl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),mv(e,wl.GLSL_DERIVATIVES)&&cL(e,wl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),mv(e,wl.GLSL_FRAG_DATA)&&cL(e,wl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),mv(e,wl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const o1t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,a1t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,s1t={[U0]:o1t,[tA]:a1t},Kg="__LUMA_INJECT_DECLARATIONS__",fL=/void\s+main\s*\([^)]*\)\s*\{\n?/,hL=/}\n?[^{}]*$/,pb=[];function dL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===U0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),pb.length=a.length;for(let l=0,u=a.length;l<u;++l)pb[l]=a[l].injection;const s="".concat(pb.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(Kg,s));break;case"vs:#main-start":i&&(e=e.replace(fL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(hL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(Kg,s));break;case"fs:#main-start":i||(e=e.replace(fL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(hL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(Kg,""),n&&(e=e.replace(/\}\s*$/,o=>o+s1t[t])),e}function U3(e){const t={};return En(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function Zc(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const u$=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],l1t=[...u$,[Zc("attribute"),"in $1"],[Zc("varying"),"out $1"]],u1t=[...u$,[Zc("varying"),"in $1"]],c$=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],c1t=[...c$,[Zc("in"),"attribute $1"],[Zc("out"),"varying $1"]],f1t=[...c$,[Zc("in"),"varying $1"]],G3="gl_FragColor",j3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,h1t=/void\s+main\s*\([^)]*\)\s*\{\n?/;function d1t(e,t,r){switch(t){case 300:return r?n1(e,l1t):p1t(e);case 100:return r?n1(e,c1t):v1t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function n1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function p1t(e){e=n1(e,u1t);const t=e.match(j3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(G3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(h1t,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(G3,"\\b"),"g"),r)}return e}function v1t(e){e=n1(e,f1t);const t=e.match(j3);if(t){const r=t[1];e=e.replace(j3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),G3)}return e}const g1t=`

`.concat(Kg,`

`),f$={[U0]:"vertex",[tA]:"fragment"},m1t=`precision highp float;

`;function y1t(e,t){const{vs:r,fs:n}=t,i=Hmt(t.modules||[]);return{gl:e,vs:pL(e,Object.assign({},t,{source:r,type:U0,modules:i})),fs:pL(e,Object.assign({},t,{source:n,type:tA,modules:i})),getUniforms:_1t(i)}}function pL(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;En(typeof n=="string","shader source must be a string");const h=i===U0,d=n.split(`
`);let p=100,v="",g=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],g=d.slice(1).join(`
`)):v="#version ".concat(p);const m={};o.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,a);let y=c?"".concat(v,`
`).concat(w1t({id:r,source:n,type:i}),`
`).concat(b1t({type:i}),`
`).concat(n1t(e),`
`).concat(i1t(e),`
`).concat(S1t(m),`
`).concat(h?"":m1t,`
`):"".concat(v,`
`);const _=P1t(s),w={},T={},S={};for(const P in l){const C=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],A=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const M=A[2],k=A[3];M?k==="decl"?T[P]=[C]:S[P]=[C]:w[P]=[C]}else S[P]=[C]}for(const P of o){f&&P.checkDeprecations(g,f),y+=P.getModuleSource(i,p);const A=P.injections[i];for(const M in A){const k=M.match(/^(v|f)s:#([\w-]+)$/);if(k){const B=k[2]==="decl"?T:S;B[M]=B[M]||[],B[M].push(A[M])}else w[M]=w[M]||[],w[M].push(A[M])}}return y+=g1t,y=dL(y,i,T),y+=T1t(_[i],w),y+=g,y=dL(y,i,S),y=d1t(y,u?100:p,h),y}function _1t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function b1t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(f$[t].toUpperCase(),`
`)}function w1t(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(f$[n],`

`):""}function S1t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function T1t(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function P1t(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const E1t="void main() {gl_FragColor = vec4(0);}",h$=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,A1t=`#version 300 es
`.concat(h$);function d$(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function p$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?A1t:t>300?"#version ".concat(t,`
`).concat(h$):E1t;const o=k1t(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function C1t(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return En(!1),null}}function M1t(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return En(!1),null}}function k1t(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return En(!1),null}}const x1t=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,L1t={name:"fp32",vs:x1t,fs:null};function u0(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const Xr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function I1t(e,{precision:t=Xr.precision}={}){return e=O1t(e),"".concat(parseFloat(e.toPrecision(t)))}function eu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _r(e,t,r){return D1t(e,n=>Math.max(t,Math.min(r,n)))}function Vl(e,t,r){return eu(e)?e.map((n,i)=>Vl(n,t[i],r)):r*t+(1-r)*e}function bo(e,t,r){const n=Xr.EPSILON;r&&(Xr.EPSILON=r);try{if(e===t)return!0;if(eu(e)&&eu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!bo(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Xr.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Xr.EPSILON=n}}function O1t(e){return Math.round(e/Xr.EPSILON)*Xr.EPSILON}function R1t(e){return e.clone?e.clone():new Array(e.length)}function D1t(e,t,r){if(eu(e)){const n=e;r=r||R1t(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function N1t(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class rA extends N1t(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:eu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Xr)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+I1t(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!bo(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(Xr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function F1t(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function ke(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Md(e,t,r=""){if(Xr.debug&&!F1t(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class v$ extends rA{get x(){return this[0]}set x(t){this[0]=ke(t)}get y(){return this[1]}set y(t){this[1]=ke(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return ke(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return ke(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return u0(t>=0&&t<this.ELEMENTS,"index is out of range"),ke(this[t])}setComponent(t,r){return u0(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var kd=1e-6,Oi=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function B1t(){var e=new Oi(2);return Oi!=Float32Array&&(e[0]=0,e[1]=0),e}function i1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function g$(e,t){return e[0]=-t[0],e[1]=-t[1],e}function m$(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function z1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function $1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=B1t();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function V1t(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function y$(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function U1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function G1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function _$(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function b$(){var e=new Oi(3);return Oi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function j1t(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function vL(e,t,r){var n=new Oi(3);return n[0]=e,n[1]=t,n[2]=r,n}function W1t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function H1t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function X1t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Y1t(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function w$(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jg(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function q1t(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function nA(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function S$(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function T$(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,g=a*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function Z1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function K1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function J1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Q1t(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&w$(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var P$=W1t,E$=j1t,vb=H1t;(function(){var e=b$();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const gb=[0,0,0];let yv;class _t extends v${static get ZERO(){return yv||(yv=new _t(0,0,0),Object.freeze(yv)),yv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&eu(t)?this.copy(t):(Xr.debug&&(ke(t),ke(r),ke(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Xr.debug&&(ke(t.x),ke(t.y),ke(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=ke(t)}angle(t){return Q1t(this,t)}cross(t){return Jg(this,this,t),this.check()}rotateX({radians:t,origin:r=gb}){return Z1t(this,this,r,t),this.check()}rotateY({radians:t,origin:r=gb}){return K1t(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=gb}){return J1t(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return nA(this,this,t),this.check()}transformAsVector(t){return y$(this,this,t),this.check()}transformByMatrix3(t){return S$(this,this,t),this.check()}transformByMatrix2(t){return U1t(this,this,t),this.check()}transformByQuaternion(t){return T$(this,this,t),this.check()}}let _v;class iA extends v${static get ZERO(){return _v||(_v=new iA(0,0,0,0),Object.freeze(_v)),_v}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),eu(t)&&arguments.length===1?this.copy(t):(Xr.debug&&(ke(t),ke(r),ke(n),ke(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Xr.debug&&(ke(t.x),ke(t.y),ke(t.z),ke(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=ke(t)}get w(){return this[3]}set w(t){this[3]=ke(t)}transform(t){return nA(this,this,t),this.check()}transformByMatrix3(t){return _$(this,this,t),this.check()}transformByMatrix2(t){return G1t(this,this,t),this.check()}transformByQuaternion(t){return T$(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class A$ extends rA{toString(){let t="[";if(Xr.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=ke(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function tyt(){var e=new Oi(9);return Oi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function eyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function ryt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function nyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function gL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],_=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+g*a+m*u,e[4]=v*i+g*s+m*c,e[5]=v*o+g*l+m*f,e[6]=y*n+_*a+w*u,e[7]=y*i+_*s+w*c,e[8]=y*o+_*l+w*f,e}function iyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function oyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function mL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ayt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[3]=c-m,e[6]=h+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-u-f,e}var W3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(W3||(W3={}));const syt=Object.freeze([1,0,0,0,1,0,0,0,1]);class wr extends A${static get IDENTITY(){return uyt()}static get ZERO(){return lyt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return W3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(syt)}fromObject(t){return this.check()}fromQuaternion(t){return ayt(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return nyt(this)}transpose(){return eyt(this,this),this.check()}invert(){return ryt(this,this),this.check()}multiplyLeft(t){return gL(this,t,this),this.check()}multiplyRight(t){return gL(this,this,t),this.check()}rotate(t){return oyt(this,this,t),this.check()}scale(t){return Array.isArray(t)?mL(this,this,t):mL(this,this,[t,t]),this.check()}translate(t){return iyt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=z1t(r||[-0,-0],t,this);break;case 3:n=S$(r||[-0,-0,-0],t,this);break;case 4:n=_$(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let bv,wv;function lyt(){return bv||(bv=new wr([0,0,0,0,0,0,0,0,0]),Object.freeze(bv)),bv}function uyt(){return wv||(wv=new wr,Object.freeze(wv)),wv}function cyt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function H3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=r*s-n*a,_=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,P=i*u-o*l,C=c*v-f*p,A=c*g-h*p,M=c*m-d*p,k=f*g-h*v,O=f*m-d*v,B=h*m-d*g,$=y*B-_*O+w*k+T*M-S*A+P*C;return $?($=1/$,e[0]=(s*B-l*O+u*k)*$,e[1]=(i*O-n*B-o*k)*$,e[2]=(v*P-g*S+m*T)*$,e[3]=(h*S-f*P-d*T)*$,e[4]=(l*M-a*B-u*A)*$,e[5]=(r*B-i*M+o*A)*$,e[6]=(g*w-p*P-m*_)*$,e[7]=(c*P-h*w+d*_)*$,e[8]=(a*O-s*M+u*C)*$,e[9]=(n*M-r*O-o*C)*$,e[10]=(p*S-v*w+m*y)*$,e[11]=(f*w-c*S-d*y)*$,e[12]=(s*A-a*k-l*C)*$,e[13]=(r*k-n*A+i*C)*$,e[14]=(v*_-p*T-g*y)*$,e[15]=(c*T-f*_+h*y)*$,e):null}function hyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*a-r*o,y=t*s-n*o,_=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,P=u*p-c*d,C=u*v-f*d,A=u*g-h*d,M=c*v-f*p,k=c*g-h*p,O=f*g-h*v;return m*O-y*k+_*M+w*A-T*C+S*P}function Ul(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],_=r[0],w=r[1],T=r[2],S=r[3];return e[0]=_*n+w*s+T*f+S*v,e[1]=_*i+w*l+T*h+S*g,e[2]=_*o+w*u+T*d+S*m,e[3]=_*a+w*c+T*p+S*y,_=r[4],w=r[5],T=r[6],S=r[7],e[4]=_*n+w*s+T*f+S*v,e[5]=_*i+w*l+T*h+S*g,e[6]=_*o+w*u+T*d+S*m,e[7]=_*a+w*c+T*p+S*y,_=r[8],w=r[9],T=r[10],S=r[11],e[8]=_*n+w*s+T*f+S*v,e[9]=_*i+w*l+T*h+S*g,e[10]=_*o+w*u+T*d+S*m,e[11]=_*a+w*c+T*p+S*y,_=r[12],w=r[13],T=r[14],S=r[15],e[12]=_*n+w*s+T*f+S*v,e[13]=_*i+w*l+T*h+S*g,e[14]=_*o+w*u+T*d+S*m,e[15]=_*a+w*c+T*p+S*y,e}function o1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,g,m;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+g*o+t[14],e[15]=u*n+d*i+m*o+t[15]),e}function oA(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function dyt(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,O,B,$,D;return s<kd?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],y=t[7],_=t[8],w=t[9],T=t[10],S=t[11],P=i*i*c+u,C=o*i*c+a*l,A=a*i*c-o*l,M=i*o*c-a*l,k=o*o*c+u,O=a*o*c+i*l,B=i*a*c+o*l,$=o*a*c-i*l,D=a*a*c+u,e[0]=f*P+v*C+_*A,e[1]=h*P+g*C+w*A,e[2]=d*P+m*C+T*A,e[3]=p*P+y*C+S*A,e[4]=f*M+v*k+_*O,e[5]=h*M+g*k+w*O,e[6]=d*M+m*k+T*O,e[7]=p*M+y*k+S*O,e[8]=f*B+v*$+_*D,e[9]=h*B+g*$+w*D,e[10]=d*B+m*$+T*D,e[11]=p*B+y*$+S*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function C$(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function pyt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function M$(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function vyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function gyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function myt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function yyt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var _yt=yyt;function byt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var wyt=byt;function Syt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],g=t[2],m=n[0],y=n[1],_=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<kd&&Math.abs(v-T)<kd&&Math.abs(g-S)<kd?cyt(e):(c=p-w,f=v-T,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-_*f,o=_*c-m*h,a=m*f-y*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+f*v+h*g),e[15]=1,e)}function Tyt(){var e=new Oi(4);return Oi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Pyt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function aA(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Eyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Ayt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function Cyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function Myt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function kyt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function wf(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function xyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=Tyt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var X3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(X3||(X3={}));const Lyt=45*Math.PI/180,Iyt=1,mb=.1,yb=500,Oyt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Nr extends A${static get IDENTITY(){return Dyt()}static get ZERO(){return Ryt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return X3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=g,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Oyt)}fromObject(t){return this.check()}fromQuaternion(t){return gyt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=mb,far:s=yb}=t;return s===1/0?Nyt(this,r,n,i,o,a):myt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Syt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=mb,far:s=yb}=t;return wyt(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=Lyt,aspect:n=Iyt,focalDistance:i=1,near:o=mb,far:a=yb}=t;yL(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return yL(r),_yt(this,r,n,i,o),this.check()}determinant(){return hyt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return fyt(this,this),this.check()}invert(){return H3(this,this),this.check()}multiplyLeft(t){return Ul(this,t,this),this.check()}multiplyRight(t){return Ul(this,this,t),this.check()}rotateX(t){return C$(this,this,t),this.check()}rotateY(t){return pyt(this,this,t),this.check()}rotateZ(t){return M$(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return dyt(this,this,t,r),this.check()}scale(t){return oA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return o1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=wf(r||[-0,-0,-0,-0],t,this),Md(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=$1t(r||[-0,-0],t,this);break;case 3:i=nA(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=V1t(r||[-0,-0],t,this);break;case 3:n=y$(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Sv,Tv;function Ryt(){return Sv||(Sv=new Nr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Sv)),Sv}function Dyt(){return Tv||(Tv=new Nr,Object.freeze(Tv)),Tv}function yL(e){if(e>Math.PI*2)throw Error("expected radians")}function Nyt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function _L(){var e=new Oi(4);return Oi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Fyt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function k$(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function bL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function Byt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function zyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function $yt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function Vyt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function Qg(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>kd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*i+g*l,e[1]=v*o+g*u,e[2]=v*a+g*c,e[3]=v*s+g*f,e}function Uyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function Gyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function x$(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var jyt=Pyt,Wyt=aA,Hyt=Myt,Xyt=kyt,Yyt=Eyt,qyt=Ayt,L$=Cyt,Zyt=function(){var e=b$(),t=vL(1,0,0),r=vL(0,1,0);return function(n,i,o){var a=w$(i,o);return a<-.999999?(Jg(e,t,i),E$(e)<1e-6&&Jg(e,r,i),Y1t(e,e),k$(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Jg(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,L$(n,n))}}();(function(){var e=_L(),t=_L();return function(r,n,i,o,a,s){return Qg(e,n,a,s),Qg(t,i,o,s),Qg(r,e,t,2*s*(1-s)),r}})();(function(){var e=tyt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],L$(t,x$(t,e))}})();const Kyt=[0,0,0,1];class wL extends rA{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return x$(this,t),this.check()}fromAxisRotation(t,r){return k$(this,t,r),this.check()}identity(){return Fyt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=ke(t)}get y(){return this[1]}set y(t){this[1]=ke(t)}get z(){return this[2]}set z(t){this[2]=ke(t)}get w(){return this[3]}set w(t){this[3]=ke(t)}len(){return Yyt(this)}lengthSquared(){return qyt(this)}dot(t){return Hyt(this,t)}rotationTo(t,r){return Zyt(this,t,r),this.check()}add(t){return jyt(this,this,t),this.check()}calculateW(){return Vyt(this,this),this.check()}conjugate(){return Gyt(this,this),this.check()}invert(){return Uyt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(Xyt(this,t,r,n),this.check())}multiplyRight(t){return bL(this,this,t),this.check()}multiplyLeft(t){return bL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return Byt(this,this,t),this.check()}rotateY(t){return zyt(this,this,t),this.check()}rotateZ(t){return $yt(this,this,t),this.check()}scale(t){return Wyt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=Kyt,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return Qg(this,i,o,a),this.check()}transformVector4(t,r=new iA){return xyt(r,t,this),Md(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const I$={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},SL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,Jyt={lightSources:{}};function _b(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function Qyt(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=_b(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=_b(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=_b(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function O$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jyt;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},Qyt({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return O$({lightSources:t})}return{}}const t_t={name:"lights",vs:SL,fs:SL,getUniforms:O$,defines:{MAX_LIGHTS:3}},e_t=new Uint8Array([0,255,255,255]),r_t={pickingSelectedColor:null,pickingHighlightColor:e_t,pickingActive:!1,pickingAttribute:!1};function n_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r_t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const i_t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,o_t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,a_t={name:"picking",vs:i_t,fs:o_t,getUniforms:n_t},s_t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,l_t={};function u_t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function c_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l_t;if(!("material"in e))return{};const{material:t}=e;return t?u_t(t):{lighting_uEnabled:!1}}const f_t={name:"gouraud-lighting",dependencies:[t_t],vs:s_t,defines:{LIGHTING_VERTEX:1},getUniforms:c_t},h_t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,d_t={name:"transform",vs:h_t,fs:null};class G0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new G0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(_=>this._getHash(_.name)).sort(),d=a.map(_=>this._getHash(_)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),g=[],m=[];for(const _ of p)g.push(this._getHash(_)),g.push(this._getHash(i[_]));for(const _ of v)m.push(this._getHash(_)),m.push(this._getHash(o[_]));const y="".concat(c,"/").concat(f,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[y]){const _=y1t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new o$(this.gl,{hash:y,vs:_.vs,fs:_.fs,varyings:a,bufferMode:s}),this._getUniforms[y]=_.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const p_t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function v_t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=g_t(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Pe(e,l),u],m_t(o,u)}}if(i){const o=i.value||i;gt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Pe(e,{data:o,target:34963}),a]}return n}function g_t(e,t){const{attributeMap:r=p_t}=t||{};return r&&r[e]||e}function m_t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}gt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Xu=2,y_t=1e4,__t="Model needs drawMode and vertexCount",TL=()=>{},b_t={};class pa{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Ms("model")}=r;gt(by(t)),this.id=n,this.gl=t,this.id=r.id||Ms("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||G0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},gt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),__t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return gt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return gt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=v_t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qc(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return KE(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Lt.priority>=Xu&&(u=this._logDrawCallStart(Xu));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Lt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:g}=this,{onBeforeRender:m=TL,onAfterRender:y=TL}=this.props;m(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(b_t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:g,offset:f?d:0}));return y(),Lt.priority>=Xu&&this._logDrawCallEnd(u,l,n),_}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}gt(r instanceof o$,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Omt(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Pe&&r.delete()}}_setAnimationProps(t){this.animated&&gt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(qc(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new a$(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:y_t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Lt.group(Xu,">>> DRAWING MODEL ".concat(this.id),{collapsed:Lt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=Nmt({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=iL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=iL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Lt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Lt.log("UNUSED UNIFORMS",Object.keys(s))();const f=Bmt(this.vertexArray.configuration);Lt.table(t,o)(),Lt.table(t,a)(),Lt.table(t+1,f)(),i&&i.log({logLevel:Xu,message:"Rendered to ".concat(i.id)}),Lt.groupEnd(Xu)()}}class w_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Pe?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&gt(Qt(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new a$(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],gt(n[o]instanceof Pe)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Pe(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const S_t="transform_uSampler_",a1="transform_uSize_",PL="transform_position";function T_t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const g=M_t(d,r);if(g){const{updatedLine:m,inject:y}=g;h[p]=m,c=U3([c,y]),Object.assign(l,g.samplerTextureMap),a--}}n&&!s&&(s=C_t(d,n))}),n){gt(i);const d="".concat(a1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(PL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(PL,`, 0, 1.);
`);c=U3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function P_t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(a1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(a1).concat(s)]=[o,a];return i}function E_t(e){return d$(e,["attribute","in"])}function A_t(e){const t="".concat(S_t).concat(e),r="".concat(a1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function C_t(e,t){const r=d$(e,["varying","out"]);return r&&r.name===t?r.type:null}function M_t(e,t){const r={},n=E_t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=A_t(o),c=C1t(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const k_t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},x_t="transform_output";class L_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=P_t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=Sy(r);if(!t)return n;const i=n.constructor,o=M1t(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof dn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Pe(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new nr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(k_t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=e$(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=T_t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=U3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||p$({version:n$(i),input:this.targetTextureVarying,inputType:a,output:x_t}),f=this.hasSourceTextures||this.targetTextureVarying?[d_t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class sA{static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();gt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new pa(r,Object.assign({},t,{fs:t.fs||p$({version:n$(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){I_t(r)&&(this.bufferTransform=new w_t(t,r)),O_t(r)&&(this.textureTransform=new L_t(t,r)),gt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function I_t(e){return!!(!qc(e.feedbackBuffers)||!qc(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function O_t(e){return!!(!qc(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const EL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class vu{static get DRAW_MODE(){return EL}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Ms("geometry"),drawMode:n=EL.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,gt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(gt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return gt(Number.isFinite(n)),n}}let R_t=1,D_t=1;class R${constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=R_t++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=D_t++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const D$="#define SMOOTH_EDGE_RADIUS 0.5",N_t=`
`.concat(D$,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),F_t=`
`.concat(D$,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),B_t={name:"geometry",vs:N_t,fs:F_t},le={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(le,"IDENTITY",{get:()=>(Wt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Si={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ks={common:0,meters:1,pixels:2},AL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},j0={DRAW:"draw",MASK:"mask"},z_t=Object.keys(le).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(le[e],";")).join(""),$_t=Object.keys(Si).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Si[e],";")).join(""),V_t=Object.keys(ks).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(ks[e],";")).join(""),U_t="".concat(z_t,`
`).concat($_t,`
`).concat(V_t,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function G_t(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function W0(e){let t={},r;return n=>{for(const i in n)if(!G_t(n[i],t[i])){r=e(n),t=n;break}return r}}const CL=[0,0,0,0],j_t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],N$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],W_t=[0,0,0],F$=[0,0,0],H_t=W0(q_t);function B$(e,t,r=F$){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===le.LNGLAT_OFFSETS||t===le.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Si.WEB_MERCATOR:(t===le.LNGLAT||t===le.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Si.WEB_MERCATOR_AUTO_OFFSET:t===le.LNGLAT?n=i:t===le.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Si.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Si.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function X_t(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=CL,l=CL,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=B$(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=wf([],l,a),o=n||o,a=Ul([],i,o),a=Ul([],a,j_t)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function Y_t({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=le.DEFAULT,coordinateOrigin:i=F$,autoWrapLongitude:o=!1}){n===le.DEFAULT&&(n=e.isGeospatial?le.LNGLAT:le.CARTESIAN);const a=H_t({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||N$,a}function q_t({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=X_t(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=wf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:W_t,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:N$,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case le.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case le.LNGLAT:case le.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case le.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const Z_t={};function K_t(e=Z_t){return"viewport"in e?Y_t(e):{}}const lA={name:"project",dependencies:[L1t,B_t],vs:U_t,getUniforms:K_t},J_t=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,gu={name:"project32",dependencies:[lA],vs:J_t};function Q_t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Rc(e,t){const r=wf([],t,e);return aA(r,r,1/r[3]),r}function ML(e,t){const r=e%t;return r<0?t+r:r}function Y3(e,t,r){return e<t?t:e>r?r:e}function t2t(e){return Math.log(e)*Math.LOG2E}const uA=Math.log2||t2t;function va(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Ti=Math.PI,z$=Ti/4,Mi=Ti/180,q3=180/Ti,c0=512,Z3=4003e4,Pv=85.051129,e2t=1.5;function r2t(e){return uA(e)}function xs(e){const[t,r]=e;va(Number.isFinite(t)),va(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Mi,i=r*Mi,o=c0*(n+Ti)/(2*Ti),a=c0*(Ti+Math.log(Math.tan(z$+i*.5)))/(2*Ti);return[o,a]}function Kc(e){const[t,r]=e,n=t/c0*(2*Ti)-Ti,i=2*(Math.atan(Math.exp(r/c0*(2*Ti)-Ti))-z$);return[n*q3,i*q3]}function n2t(e){const{latitude:t}=e;va(Number.isFinite(t));const r=Math.cos(t*Mi);return r2t(Z3*r)-9}function K3(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;va(Number.isFinite(t)&&Number.isFinite(r));const i=c0,o=Math.cos(t*Mi),a=i/360,s=a/o,l=i/Z3/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Mi*Math.tan(t*Mi)/o,f=a*c/2,h=i/Z3*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function $$(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=K3({longitude:r,latitude:n,highPrecision:!0}),c=xs(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=Kc(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function i2t(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=Q_t();o1(s,s,[0,0,-i]),C$(s,s,-r*Mi),M$(s,s,n*Mi);const l=o/t;return oA(s,s,[l,l,l]),a&&o1(s,s,X1t([],a)),s}function o2t(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=s1(e2t)}=e;n!==void 0&&(c=s1(n));const f=c*Mi,h=i*Mi,d=V$(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),g=Math.sin(v)*p/Math.sin(Y3(Math.PI/2-h-v,.01,Math.PI-.01)),m=Math.sin(h)*g+p,y=p*10,_=Math.min(m*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:_}}function s1(e){return 2*Math.atan(.5/e)*q3}function V$(e){return .5/Math.tan(.5*e*Mi)}function U$(e,t){const[r,n,i=0]=e;return va(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Rc(t,[r,n,i,1])}function Ty(e,t,r=0){const[n,i,o]=e;if(va(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Rc(t,[n,i,o,1]);const a=Rc(t,[n,i,0,1]),s=Rc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return m$([],a,s,c)}function G$(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=a2t(e.padding),h=xs([s,Y3(c,-Pv,Pv)]),d=xs([u,Y3(l,-Pv,Pv)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];va(v[0]>0&&v[1]>0);const g=v[0]/p[0],m=v[1]/p[1],y=(f.right-f.left)/2/g,_=(f.top-f.bottom)/2/m,w=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+_],T=Kc(w),S=Math.min(o,uA(Math.abs(Math.min(g,m))));return va(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function a2t(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(va(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const kL=Math.PI/180;function s2t(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*kL:Math.atan(.5/e.altitude),f=(90-e.pitch)*kL;return c>f-.01?(l=xL(e,0,t),u=xL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function xL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Rc(n,[t,0,1,1]),o=Rc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=m$([],i,o,s),u=Kc(l);return u.push(r),u}const LL=512;function l2t(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=ML(i+180,360)-180),(s<-180||s>180)&&(s=ML(s+180,360)-180);const l=uA(r/LL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=Kc([0,u])[1];if(o<c)o=c;else{const f=Kc([0,LL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const u2t=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,c2t=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,f2t=W0(g2t),h2t=W0(m2t),d2t=[0,0,0,1],p2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function v2t(e,t){const[r,n,i]=e,o=Ty([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function g2t({viewport:e,center:t}){return new Nr(e.viewProjectionMatrix).invert().transform(t)}function m2t({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>v2t(a,n));for(const a of t){const s=a.clone().translate(new _t(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Nr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function y2t(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||d2t,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=f2t({viewport:e.viewport,center:t.project_uCenter}),o=[],a=h2t({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new _t(e.viewport.center).negate());t.project_uCoordinateSystem===le.LNGLAT&&t.project_uProjectionMode===Si.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(p2t),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const bb={name:"shadow",dependencies:[lA],vs:u2t,fs:c2t,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?y2t(e,t):{}},mu={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...a_t},_2t=[lA],b2t=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function w2t(e){const t=G0.getDefaultProgramManager(e);for(const r of _2t)t.addDefaultModule(r);for(const r of b2t)t.addShaderHook(r);return t}const S2t=[255,255,255],T2t=1;let P2t=0;class E2t{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:r=S2t}=t,{intensity:n=T2t}=t;this.id=t.id||"ambient-".concat(P2t++),this.color=r,this.intensity=n}}const A2t=[255,255,255],C2t=1,M2t=[0,0,-1];let k2t=0;class IL{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:r=A2t}=t,{intensity:n=C2t}=t,{direction:i=M2t}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(k2t++),this.color=r,this.intensity=n,this.type="directional",this.direction=new _t(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class x2t{constructor(t,r={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Py extends x2t{constructor(...t){super(...t),E(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return da(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&I2t(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const g=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(g)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=j$(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=L2t(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;Qn(t,{scissorTest:!0,scissor:u},()=>KE(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};da(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:g}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:g})}catch(m){h.raiseError(m,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Yc(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function j$(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||j$(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function L2t(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Yc(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function I2t(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;da(e,{viewport:[0,0,t,r]}),e.clear(16640)}class O2t extends Py{constructor(t,r){super(t,r),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new dn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new yc(t,{format:33189,width:1,height:1}),this.fbo=new nr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;Qn(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Yc(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const R2t={color:[255,255,255],intensity:1},OL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],D2t=[0,0,0,200/255];class W${constructor(t={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",D2t),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=G0.getDefaultProgramManager(t),bb&&this.programManager.addDefaultModule(bb)),this.dummyShadowMap||(this.dummyShadowMap=new dn(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(bb),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Nr().lookAt({eye:new _t(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new O2t(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new E2t(R2t),this.directionalLights.push(new IL(OL[0]),new IL(OL[1])))}}class N2t{constructor(t={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const Jc=new N2t;function Jh(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function F2t(e,t){const r=e%t;return r<0?t+r:r}function B2t(e){return[e[12],e[13],e[14]]}function z2t(e){return{left:Yu(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Yu(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Yu(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Yu(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Yu(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Yu(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const RL=new _t;function Yu(e,t,r,n){RL.set(e,t,r);const i=RL.len();return{distance:n/i,normal:new _t(-e/i,-t/i,-r/i)}}function $2t(e){return e-Math.fround(e)}let yh;function wb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;yh=Jc.allocate(yh,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];yh[s+l]=u,yh[s+l+r]=$2t(u)}s+=r*2}return yh.subarray(0,o*r*2)}const V2t=Math.PI/180,U2t=Jh(),DL=[0,0,0],G2t={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function j2t({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Nr().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Nr().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=_r((c+e-f)/2,0,e)-e/2,v=_r((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Ls{constructor(t={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||G2t,this.focalDistance=t.focalDistance||1,this.position=t.position||DL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Si.WEB_MERCATOR:Si.WEB_MERCATOR_AUTO_OFFSET:Si.IDENTITY}equals(t){return t instanceof Ls?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&bo(t.projectionMatrix,this.projectionMatrix)&&bo(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=U$(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=Ty([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=xs(t);return r[1]=_r(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?Kc(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?K3({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,z2t(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=n2t({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||K3({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=DL;if(o&&(s=a?new Nr(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new _t(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=U2t,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Nr().multiplyRight(r).translate(new _t(this.center).negate()),this.projectionMatrix=n||j2t({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*V2t,focalDistance:c,padding:u,near:s,far:l});const f=Jh();Ul(f,f,this.projectionMatrix),Ul(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=H3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=B2t(this.viewMatrixInverse);const h=Jh(),d=Jh();oA(h,h,[this.width/2,-this.height/2,1]),o1(h,h,[1,-1,0]),Ul(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=H3(Jh(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Wt.warn("Pixel project matrix not invertible")()}}E(Ls,"displayName","Viewport");const W2t=512,H2t=4003e4,X2t=Math.PI/180;function NL(e){const t=Math.cos(e*X2t);return W2t/H2t/t}class Ao extends Ls{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:g=1.5}=t;const m=Math.pow(2,i);p=p||1,v=v||1;let y,_=null;c?(g=c[5]/2,y=s1(g)):(t.fovy?(y=t.fovy,g=V$(y)):y=s1(g),_=o2t({width:p,height:v,pitch:o,fovy:y,nearZMultiplier:s,farZMultiplier:l}));let w=i2t({height:v,pitch:o,bearing:a,scale:m,altitude:g});h&&(w=new Nr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,..._,fovy:y,focalDistance:g}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=g,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Ao({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*NL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/NL(n);return[r,n,i]}addMetersToLngLat(t,r){return $$(t,r)}panByPosition(t,r){const n=Ty(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=i1([],i,g$([],n)),a=i1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=s2t(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=G$({width:n,height:i,bounds:t,...r});return new Ao({width:n,height:i,longitude:o,latitude:a,zoom:s})}}E(Ao,"displayName","WebMercatorViewport");function Sb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Ao){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function Y2t(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===le.DEFAULT&&(i=t.isGeospatial?le.LNGLAT:le.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function H$(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=wf([],[a,s,l,1],r)),n){case le.LNGLAT:return Sb([a,s,l],t,o);case le.LNGLAT_OFFSETS:return Sb([a+i[0],s+i[1],l+(i[2]||0)],t,o);case le.METER_OFFSETS:return Sb($$(i,[a,s,l]),t,o);case le.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function q2t(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=Y2t(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=B$(r,n,i),f=H$(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);P$(f,f,h)}return f}const fc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},l1=Symbol.for("component"),Dc=Symbol.for("asyncPropDefaults"),ru=Symbol.for("asyncPropOriginal"),cs=Symbol.for("asyncPropResolved");function Ey(e,t=()=>!0){return Array.isArray(e)?X$(e,t,[]):t(e)?[e]:[]}function X$(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?X$(i,t,r):t(i)&&r.push(i)}return r}function Z2t({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class K2t{constructor(t,r,n){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=e1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class J2t{constructor({gl:t,protocol:r}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new K2t(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const Q2t="layerManager.setLayers",tbt="layerManager.activateViewport";class ebt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",a=>{Lr(tbt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new J2t({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&w2t(t),stats:n||new yy({id:"deck.gl"}),viewport:i||new Ls({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new R$,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Lr(Q2t,this,r,t),this._lastRenderedLayers=t;const n=Ey(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Wt.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Wt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=fc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=fc.MATCHED,r!==t&&(t.lifecycle=fc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=fc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=fc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Sf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Sf(n,i)))return!1}return!0}class rbt{constructor(t){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Ey(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Sf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Wt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const nbt=/([0-9]+\.?[0-9]*)(%|px)/;function za(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=nbt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function $a(e,t){return e.relative?Math.round(e.position*t):e.position}function ur(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Y${constructor(t){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};ur(!l||l instanceof Ls),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=za(n),this._y=za(i),this._width=za(o),this._height=za(a),this._padding=s&&{left:za(s.left||0),right:za(s.right||0),top:za(s.top||0),bottom:za(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Sf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:$a(this._x,t),y:$a(this._y,r),width:$a(this._width,t),height:$a(this._height,r)};return this._padding&&(n.padding={left:$a(this._padding.left,t),top:$a(this._padding.top,r),right:$a(this._padding.right,t),bottom:$a(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class H0{constructor(t){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const FL=()=>{},J3={BREAK:1,SNAP_TO_END:2,IGNORE:3},ibt=e=>e,obt=J3.BREAK;class abt{constructor(t){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new H0(t.timeline),this.onViewStateChange=t.onViewStateChange||FL,this.onStateChange=t.onStateChange||FL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===J3.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===J3.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||ibt,interpolator:o,interruption:r.transitionInterruption||obt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class sbt{constructor(t){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!bo(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];ur(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const lbt=["longitude","latitude","zoom","bearing","pitch"],ubt=["longitude","latitude","zoom"];class Ay extends sbt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:lbt,required:ubt},super(n.transitionProps),E(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=Vl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,Vl(t.around,r.around,n)))}return i}}const Va={transitionDuration:0},cbt=300,Ev=e=>1-(1-e)*(1-e),qu={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},dl={};class q${constructor(t){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new abt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?cbt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(qu.WHEEL,c&&n),this.toggleEvents(qu.PAN,c&&(i||o)),this.toggleEvents(qu.PINCH,c&&(s||l)),this.toggleEvents(qu.TRIPLE_PAN,c&&l),this.toggleEvents(qu.DOUBLE_TAP,c&&a),this.toggleEvents(qu.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Va,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Va,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Ev},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Va,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Ev},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Va,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Va,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Ev},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return dl._startPinchRotation=t.rotation,dl._lastPinchEvent=t,this.updateViewport(n,Va,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:dl._startPinchRotation-n})}return this.updateViewport(r,Va,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),dl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=dl;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Ev},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return dl._startPinchRotation=null,dl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Va:t?{...r,transitionInterpolator:new Ay({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class Z${constructor(t,r){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const BL=5,fbt=1.2;class hbt extends Z${constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:w,normalize:T=!0}=t;ur(Number.isFinite(o)),ur(Number.isFinite(i)),ur(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:w}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=_r(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=_r(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=_r(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,l2t(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>BL&&(h=a/(l-c)*fbt):a<0&&l>BL&&(h=1-s/l),h=_r(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let g=n;return h>0?g=n+h*(p-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:v}}}class dbt extends q${constructor(...t){super(...t),E(this,"ControllerState",hbt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Ay({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class K$ extends Y${get ViewportType(){return Ao}get ControllerType(){return dbt}}E(K$,"displayName","MapView");class pbt extends Py{constructor(t,r){super(t,r),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new dn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,Qn(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===j0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const vbt=new Nr().lookAt({eye:[0,0,1]});function gbt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=_r((u+e-c)/2,0,e)-e/2,p=_r((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Nr().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class mbt extends Ls{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),g=Math.pow(2,f);p={unitsPerMeter:[v/d,g/d,1],metersPerUnit:[d/v,d/g,1]}}super({...t,longitude:void 0,position:s,viewMatrix:vbt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:gbt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=Ty(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=i1([],i,g$([],n)),a=i1([],this.center,o);return{target:this.unprojectFlat(a)}}}class ybt extends Z${constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return _r(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[_r(i[0],n,r),_r(i[1],n,r)]:_r(i,n,r),t.rotationX=_r(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=F2t(s+180,360)-180),t}}class _bt extends ybt{constructor(t){super(t),E(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=_r(a+o,i,n);break;case"Y":s=_r(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return _r(r+o,i,n)}}class bbt extends q${constructor(...t){super(...t),E(this,"ControllerState",_bt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Ay(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class cA extends Y${get ViewportType(){return mbt}get ControllerType(){return bbt}}E(cA,"displayName","OrthographicView");function wbt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=Tbt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function Sbt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Ao){const{longitude:s,latitude:l,zoom:u}=G$({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Ao({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new cA({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function Tbt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class Pbt{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new dn(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===j0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new pbt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=wbt({layers:t.layers,viewport:o}),l||!bo(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=Sbt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Wt.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Ebt=new W$;class Abt{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Sf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new Pbt),t.some(r=>r instanceof W$)||this._internalEffects.push(Ebt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Cbt extends Py{shouldDrawLayer(t){return t.props.operation===j0.DRAW}}const zL={blendFunc:[1,0,32771,0],blendEquation:32774};class J$ extends Py{constructor(...t){super(...t),E(this,"pickZ",void 0),E(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const g=p?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=Qn(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...zL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(_=>_.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:g&&kbt.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===j0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,zL),i.blend=!0,i.blendColor=Mbt(this._colors,t,n)):i.blend=!1,i}}function Mbt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Wt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function kbt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const xbt="deckRenderer.renderLayers";class Lbt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Cbt(t),this.pickLayersPass=new J$(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||nr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Lr(xbt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new nr(this.gl),new nr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const Ibt={pickedColor:null,pickedObjectIndex:-1};function Obt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let g=0;g<l;g++){if(e[h+3]-1>=0){const y=g+a-r,_=y*y+v;_<=c&&(c=_,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),g=f/4-v*l;return{...p,pickedColor:d,pickedX:a+g,pickedY:s+v}}Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Ibt}function Rbt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function Q$({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=Nbt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function Dbt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=Q$(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=tV({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function tV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function Nbt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class Fbt{constructor(t){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new J$(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new nr(n),nr.isSupported(n,{colorBufferFloat:!0}))){const i=new nr(n);i.attach({[36064]:new dn(n,{format:Qt(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Yc(this.gl);if(!h)return{result:[],emptyInfo:Q$({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=ab(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*d),{width:m,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceWidth:m,deviceHeight:y}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],P=new Set;for(let C=0;C<s;C++){let A;if(_){const k=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:_,cullRect:w,effects:f,pass:"picking:".concat(l)});A=Obt({...k,deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceRect:_})}else A={pickedColor:null,pickedObjectIndex:-1};let M;A.pickedLayer&&u&&this.depthFBO&&(M=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&C+1<s&&(P.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=Dbt({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:M,pixelRatio:d});for(const k of T.values())k.layer&&S.push(k);if(!A.pickedColor)break}for(const C of P)C.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Yc(this.gl),p=ab(this.gl,[i,o],!0),v=p.x,g=p.y+p.height,m=ab(this.gl,[i+a,o+s],!0),y=m.x+m.width,_=m.y,w={x:v,y:_,width:y-v,height:g-_},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=Rbt(T),P=new Map,C=Number.isFinite(u);for(let A=0;A<S.length&&!(C&&u&&P.size>=u);A++){const M=S[A];let k={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};k=tV({layer:M.pickedLayer,info:k,mode:l}),P.has(k.object)||P.set(k.object,k)}return Array.from(P.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,g=new(u?Float32Array:Uint8Array)(p*v*4);return Sy(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const Bbt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class zbt{constructor(t){E(this,"el",null),E(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Bbt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Tf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(x,I,V){return setTimeout(_(x,V),I)}function h(x,I,V){return Array.isArray(x)?(d(x,V[I],V),!0):!1}function d(x,I,V){var H;if(!!x)if(x.forEach)x.forEach(I,V);else if(x.length!==i)for(H=0;H<x.length;)I.call(V,x[H],H,x),H++;else for(H in x)x.hasOwnProperty(H)&&I.call(V,x[H],H,x)}function p(x,I,V){var H="DEPRECATED METHOD: "+I+`
`+V+` AT 
`;return function(){var et=new Error("get-stack-trace"),yt=et&&et.stack?et.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yt=t.console&&(t.console.warn||t.console.log);return Yt&&Yt.call(t.console,H,yt),x.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(I),H=1;H<arguments.length;H++){var et=arguments[H];if(et!==i&&et!==null)for(var yt in et)et.hasOwnProperty(yt)&&(V[yt]=et[yt])}return V}:v=Object.assign;var g=p(function(I,V,H){for(var et=Object.keys(V),yt=0;yt<et.length;)(!H||H&&I[et[yt]]===i)&&(I[et[yt]]=V[et[yt]]),yt++;return I},"extend","Use `assign`."),m=p(function(I,V){return g(I,V,!0)},"merge","Use `assign`.");function y(x,I,V){var H=I.prototype,et;et=x.prototype=Object.create(H),et.constructor=x,et._super=H,V&&v(et,V)}function _(x,I){return function(){return x.apply(I,arguments)}}function w(x,I){return typeof x==s?x.apply(I&&I[0]||i,I):x}function T(x,I){return x===i?I:x}function S(x,I,V){d(M(I),function(H){x.addEventListener(H,V,!1)})}function P(x,I,V){d(M(I),function(H){x.removeEventListener(H,V,!1)})}function C(x,I){for(;x;){if(x==I)return!0;x=x.parentNode}return!1}function A(x,I){return x.indexOf(I)>-1}function M(x){return x.trim().split(/\s+/g)}function k(x,I,V){if(x.indexOf&&!V)return x.indexOf(I);for(var H=0;H<x.length;){if(V&&x[H][V]==I||!V&&x[H]===I)return H;H++}return-1}function O(x){return Array.prototype.slice.call(x,0)}function B(x,I,V){for(var H=[],et=[],yt=0;yt<x.length;){var Yt=I?x[yt][I]:x[yt];k(et,Yt)<0&&H.push(x[yt]),et[yt]=Yt,yt++}return V&&(I?H=H.sort(function(pr,Ur){return pr[I]>Ur[I]}):H=H.sort()),H}function $(x,I){for(var V,H,et=I[0].toUpperCase()+I.slice(1),yt=0;yt<o.length;){if(V=o[yt],H=V?V+et:I,H in x)return H;yt++}return i}var D=1;function j(){return D++}function Z(x){var I=x.ownerDocument||x;return I.defaultView||I.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,tt="ontouchstart"in t,Tt=$(t,"PointerEvent")!==i,Ot=tt&&q.test(navigator.userAgent),bt="touch",wt="pen",Ht="mouse",Y="kinect",nt=25,K=1,pt=2,St=4,At=8,st=1,ft=2,z=4,G=8,X=16,J=ft|z,Q=G|X,lt=J|Q,vt=["x","y"],at=["clientX","clientY"];function it(x,I){var V=this;this.manager=x,this.callback=I,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(H){w(x.options.enable,[x])&&V.handler(H)},this.init()}it.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(Z(this.element),this.evWin,this.domHandler)}};function rt(x){var I,V=x.options.inputClass;return V?I=V:Tt?I=Jy:Ot?I=ap:tt?I=Qy:I=zs,new I(x,Rt)}function Rt(x,I,V){var H=V.pointers.length,et=V.changedPointers.length,yt=I&K&&H-et===0,Yt=I&(St|At)&&H-et===0;V.isFirst=!!yt,V.isFinal=!!Yt,yt&&(x.session={}),V.eventType=I,kt(x,V),x.emit("hammer.input",V),x.recognize(V),x.session.prevInput=V}function kt(x,I){var V=x.session,H=I.pointers,et=H.length;V.firstInput||(V.firstInput=Kt(I)),et>1&&!V.firstMultiple?V.firstMultiple=Kt(I):et===1&&(V.firstMultiple=!1);var yt=V.firstInput,Yt=V.firstMultiple,sr=Yt?Yt.center:yt.center,pr=I.center=ge(H);I.timeStamp=c(),I.deltaTime=I.timeStamp-yt.timeStamp,I.angle=Ui(sr,pr),I.distance=Pr(sr,pr),Dt(V,I),I.offsetDirection=Te(I.deltaX,I.deltaY);var Ur=me(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Ur.x,I.overallVelocityY=Ur.y,I.overallVelocity=u(Ur.x)>u(Ur.y)?Ur.x:Ur.y,I.scale=Yt?Bs(Yt.pointers,H):1,I.rotation=Yt?ip(Yt.pointers,H):0,I.maxPointers=V.prevInput?I.pointers.length>V.prevInput.maxPointers?I.pointers.length:V.prevInput.maxPointers:I.pointers.length,zt(V,I);var ji=x.element;C(I.srcEvent.target,ji)&&(ji=I.srcEvent.target),I.target=ji}function Dt(x,I){var V=I.center,H=x.offsetDelta||{},et=x.prevDelta||{},yt=x.prevInput||{};(I.eventType===K||yt.eventType===St)&&(et=x.prevDelta={x:yt.deltaX||0,y:yt.deltaY||0},H=x.offsetDelta={x:V.x,y:V.y}),I.deltaX=et.x+(V.x-H.x),I.deltaY=et.y+(V.y-H.y)}function zt(x,I){var V=x.lastInterval||I,H=I.timeStamp-V.timeStamp,et,yt,Yt,sr;if(I.eventType!=At&&(H>nt||V.velocity===i)){var pr=I.deltaX-V.deltaX,Ur=I.deltaY-V.deltaY,ji=me(H,pr,Ur);yt=ji.x,Yt=ji.y,et=u(ji.x)>u(ji.y)?ji.x:ji.y,sr=Te(pr,Ur),x.lastInterval=I}else et=V.velocity,yt=V.velocityX,Yt=V.velocityY,sr=V.direction;I.velocity=et,I.velocityX=yt,I.velocityY=Yt,I.direction=sr}function Kt(x){for(var I=[],V=0;V<x.pointers.length;)I[V]={clientX:l(x.pointers[V].clientX),clientY:l(x.pointers[V].clientY)},V++;return{timeStamp:c(),pointers:I,center:ge(I),deltaX:x.deltaX,deltaY:x.deltaY}}function ge(x){var I=x.length;if(I===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var V=0,H=0,et=0;et<I;)V+=x[et].clientX,H+=x[et].clientY,et++;return{x:l(V/I),y:l(H/I)}}function me(x,I,V){return{x:I/x||0,y:V/x||0}}function Te(x,I){return x===I?st:u(x)>=u(I)?x<0?ft:z:I<0?G:X}function Pr(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.sqrt(H*H+et*et)}function Ui(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.atan2(et,H)*180/Math.PI}function ip(x,I){return Ui(I[1],I[0],at)+Ui(x[1],x[0],at)}function Bs(x,I){return Pr(I[0],I[1],at)/Pr(x[0],x[1],at)}var op={mousedown:K,mousemove:pt,mouseup:St},Vr="mousedown",In="mousemove mouseup";function zs(){this.evEl=Vr,this.evWin=In,this.pressed=!1,it.apply(this,arguments)}y(zs,it,{handler:function(I){var V=op[I.type];V&K&&I.button===0&&(this.pressed=!0),V&pt&&I.which!==1&&(V=St),this.pressed&&(V&St&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[I],changedPointers:[I],pointerType:Ht,srcEvent:I}))}});var qG={pointerdown:K,pointermove:pt,pointerup:St,pointercancel:At,pointerout:At},ZG={2:bt,3:wt,4:Ht,5:Y},wC="pointerdown",SC="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(wC="MSPointerDown",SC="MSPointerMove MSPointerUp MSPointerCancel");function Jy(){this.evEl=wC,this.evWin=SC,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Jy,it,{handler:function(I){var V=this.store,H=!1,et=I.type.toLowerCase().replace("ms",""),yt=qG[et],Yt=ZG[I.pointerType]||I.pointerType,sr=Yt==bt,pr=k(V,I.pointerId,"pointerId");yt&K&&(I.button===0||sr)?pr<0&&(V.push(I),pr=V.length-1):yt&(St|At)&&(H=!0),!(pr<0)&&(V[pr]=I,this.callback(this.manager,yt,{pointers:V,changedPointers:[I],pointerType:Yt,srcEvent:I}),H&&V.splice(pr,1))}});var KG={touchstart:K,touchmove:pt,touchend:St,touchcancel:At},JG="touchstart",QG="touchstart touchmove touchend touchcancel";function TC(){this.evTarget=JG,this.evWin=QG,this.started=!1,it.apply(this,arguments)}y(TC,it,{handler:function(I){var V=KG[I.type];if(V===K&&(this.started=!0),!!this.started){var H=tj.call(this,I,V);V&(St|At)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}}});function tj(x,I){var V=O(x.touches),H=O(x.changedTouches);return I&(St|At)&&(V=B(V.concat(H),"identifier",!0)),[V,H]}var ej={touchstart:K,touchmove:pt,touchend:St,touchcancel:At},rj="touchstart touchmove touchend touchcancel";function ap(){this.evTarget=rj,this.targetIds={},it.apply(this,arguments)}y(ap,it,{handler:function(I){var V=ej[I.type],H=nj.call(this,I,V);!H||this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}});function nj(x,I){var V=O(x.touches),H=this.targetIds;if(I&(K|pt)&&V.length===1)return H[V[0].identifier]=!0,[V,V];var et,yt,Yt=O(x.changedTouches),sr=[],pr=this.target;if(yt=V.filter(function(Ur){return C(Ur.target,pr)}),I===K)for(et=0;et<yt.length;)H[yt[et].identifier]=!0,et++;for(et=0;et<Yt.length;)H[Yt[et].identifier]&&sr.push(Yt[et]),I&(St|At)&&delete H[Yt[et].identifier],et++;if(!!sr.length)return[B(yt.concat(sr),"identifier",!0),sr]}var ij=2500,PC=25;function Qy(){it.apply(this,arguments);var x=_(this.handler,this);this.touch=new ap(this.manager,x),this.mouse=new zs(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}y(Qy,it,{handler:function(I,V,H){var et=H.pointerType==bt,yt=H.pointerType==Ht;if(!(yt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(et)oj.call(this,V,H);else if(yt&&aj.call(this,H))return;this.callback(I,V,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function oj(x,I){x&K?(this.primaryTouch=I.changedPointers[0].identifier,EC.call(this,I)):x&(St|At)&&EC.call(this,I)}function EC(x){var I=x.changedPointers[0];if(I.identifier===this.primaryTouch){var V={x:I.clientX,y:I.clientY};this.lastTouches.push(V);var H=this.lastTouches,et=function(){var yt=H.indexOf(V);yt>-1&&H.splice(yt,1)};setTimeout(et,ij)}}function aj(x){for(var I=x.srcEvent.clientX,V=x.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var et=this.lastTouches[H],yt=Math.abs(I-et.x),Yt=Math.abs(V-et.y);if(yt<=PC&&Yt<=PC)return!0}return!1}var AC=$(a.style,"touchAction"),CC=AC!==i,MC="compute",kC="auto",t_="manipulation",$s="none",zf="pan-x",$f="pan-y",sp=lj();function e_(x,I){this.manager=x,this.set(I)}e_.prototype={set:function(x){x==MC&&(x=this.compute()),CC&&this.manager.element.style&&sp[x]&&(this.manager.element.style[AC]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(I){w(I.options.enable,[I])&&(x=x.concat(I.getTouchAction()))}),sj(x.join(" "))},preventDefaults:function(x){var I=x.srcEvent,V=x.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var H=this.actions,et=A(H,$s)&&!sp[$s],yt=A(H,$f)&&!sp[$f],Yt=A(H,zf)&&!sp[zf];if(et){var sr=x.pointers.length===1,pr=x.distance<2,Ur=x.deltaTime<250;if(sr&&pr&&Ur)return}if(!(Yt&&yt)&&(et||yt&&V&J||Yt&&V&Q))return this.preventSrc(I)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function sj(x){if(A(x,$s))return $s;var I=A(x,zf),V=A(x,$f);return I&&V?$s:I||V?I?zf:$f:A(x,t_)?t_:kC}function lj(){if(!CC)return!1;var x={},I=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(V){x[V]=I?t.CSS.supports("touch-action",V):!0}),x}var lp=1,On=2,Pu=4,Aa=8,Ro=Aa,Vf=16,Gi=32;function Do(x){this.options=v({},this.defaults,x||{}),this.id=j(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=lp,this.simultaneous={},this.requireFail=[]}Do.prototype={defaults:{},set:function(x){return v(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var I=this.simultaneous;return x=up(x,this),I[x.id]||(I[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=up(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var I=this.requireFail;return x=up(x,this),k(I,x)===-1&&(I.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=up(x,this);var I=k(this.requireFail,x);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var I=this,V=this.state;function H(et){I.manager.emit(et,x)}V<Aa&&H(I.options.event+xC(V)),H(I.options.event),x.additionalEvent&&H(x.additionalEvent),V>=Aa&&H(I.options.event+xC(V))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Gi},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Gi|lp)))return!1;x++}return!0},recognize:function(x){var I=v({},x);if(!w(this.options.enable,[this,I])){this.reset(),this.state=Gi;return}this.state&(Ro|Vf|Gi)&&(this.state=lp),this.state=this.process(I),this.state&(On|Pu|Aa|Vf)&&this.tryEmit(I)},process:function(x){},getTouchAction:function(){},reset:function(){}};function xC(x){return x&Vf?"cancel":x&Aa?"end":x&Pu?"move":x&On?"start":""}function LC(x){return x==X?"down":x==G?"up":x==ft?"left":x==z?"right":""}function up(x,I){var V=I.manager;return V?V.get(x):x}function oi(){Do.apply(this,arguments)}y(oi,Do,{defaults:{pointers:1},attrTest:function(x){var I=this.options.pointers;return I===0||x.pointers.length===I},process:function(x){var I=this.state,V=x.eventType,H=I&(On|Pu),et=this.attrTest(x);return H&&(V&At||!et)?I|Vf:H||et?V&St?I|Aa:I&On?I|Pu:On:Gi}});function cp(){oi.apply(this,arguments),this.pX=null,this.pY=null}y(cp,oi,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var x=this.options.direction,I=[];return x&J&&I.push($f),x&Q&&I.push(zf),I},directionTest:function(x){var I=this.options,V=!0,H=x.distance,et=x.direction,yt=x.deltaX,Yt=x.deltaY;return et&I.direction||(I.direction&J?(et=yt===0?st:yt<0?ft:z,V=yt!=this.pX,H=Math.abs(x.deltaX)):(et=Yt===0?st:Yt<0?G:X,V=Yt!=this.pY,H=Math.abs(x.deltaY))),x.direction=et,V&&H>I.threshold&&et&I.direction},attrTest:function(x){return oi.prototype.attrTest.call(this,x)&&(this.state&On||!(this.state&On)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var I=LC(x.direction);I&&(x.additionalEvent=this.options.event+I),this._super.emit.call(this,x)}});function r_(){oi.apply(this,arguments)}y(r_,oi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$s]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&On)},emit:function(x){if(x.scale!==1){var I=x.scale<1?"in":"out";x.additionalEvent=this.options.event+I}this._super.emit.call(this,x)}});function n_(){Do.apply(this,arguments),this._timer=null,this._input=null}y(n_,Do,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[kC]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime>I.time;if(this._input=x,!H||!V||x.eventType&(St|At)&&!et)this.reset();else if(x.eventType&K)this.reset(),this._timer=f(function(){this.state=Ro,this.tryEmit()},I.time,this);else if(x.eventType&St)return Ro;return Gi},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===Ro&&(x&&x.eventType&St?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function i_(){oi.apply(this,arguments)}y(i_,oi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$s]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&On)}});function o_(){oi.apply(this,arguments)}y(o_,oi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return cp.prototype.getTouchAction.call(this)},attrTest:function(x){var I=this.options.direction,V;return I&(J|Q)?V=x.overallVelocity:I&J?V=x.overallVelocityX:I&Q&&(V=x.overallVelocityY),this._super.attrTest.call(this,x)&&I&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&u(V)>this.options.velocity&&x.eventType&St},emit:function(x){var I=LC(x.offsetDirection);I&&this.manager.emit(this.options.event+I,x),this.manager.emit(this.options.event,x)}});function fp(){Do.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(fp,Do,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[t_]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime<I.time;if(this.reset(),x.eventType&K&&this.count===0)return this.failTimeout();if(H&&et&&V){if(x.eventType!=St)return this.failTimeout();var yt=this.pTime?x.timeStamp-this.pTime<I.interval:!0,Yt=!this.pCenter||Pr(this.pCenter,x.center)<I.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Yt||!yt?this.count=1:this.count+=1,this._input=x;var sr=this.count%I.taps;if(sr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Ro,this.tryEmit()},I.interval,this),On):Ro}return Gi},failTimeout:function(){return this._timer=f(function(){this.state=Gi},this.options.interval,this),Gi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ro&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function No(x,I){return I=I||{},I.recognizers=T(I.recognizers,No.defaults.preset),new a_(x,I)}No.VERSION="2.0.7",No.defaults={domEvents:!1,touchAction:MC,enable:!0,inputTarget:null,inputClass:null,preset:[[i_,{enable:!1}],[r_,{enable:!1},["rotate"]],[o_,{direction:J}],[cp,{direction:J},["swipe"]],[fp],[fp,{event:"doubletap",taps:2},["tap"]],[n_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var uj=1,IC=2;function a_(x,I){this.options=v({},No.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=rt(this),this.touchAction=new e_(this,this.options.touchAction),OC(this,!0),d(this.options.recognizers,function(V){var H=this.add(new V[0](V[1]));V[2]&&H.recognizeWith(V[2]),V[3]&&H.requireFailure(V[3])},this)}a_.prototype={set:function(x){return v(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?IC:uj},recognize:function(x){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(x);var V,H=this.recognizers,et=I.curRecognizer;(!et||et&&et.state&Ro)&&(et=I.curRecognizer=null);for(var yt=0;yt<H.length;)V=H[yt],I.stopped!==IC&&(!et||V==et||V.canRecognizeWith(et))?V.recognize(x):V.reset(),!et&&V.state&(On|Pu|Aa)&&(et=I.curRecognizer=V),yt++}},get:function(x){if(x instanceof Do)return x;for(var I=this.recognizers,V=0;V<I.length;V++)if(I[V].options.event==x)return I[V];return null},add:function(x){if(h(x,"add",this))return this;var I=this.get(x.options.event);return I&&this.remove(I),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var I=this.recognizers,V=k(I,x);V!==-1&&(I.splice(V,1),this.touchAction.update())}return this},on:function(x,I){if(x!==i&&I!==i){var V=this.handlers;return d(M(x),function(H){V[H]=V[H]||[],V[H].push(I)}),this}},off:function(x,I){if(x!==i){var V=this.handlers;return d(M(x),function(H){I?V[H]&&V[H].splice(k(V[H],I),1):delete V[H]}),this}},emit:function(x,I){this.options.domEvents&&cj(x,I);var V=this.handlers[x]&&this.handlers[x].slice();if(!(!V||!V.length)){I.type=x,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var H=0;H<V.length;)V[H](I),H++}},destroy:function(){this.element&&OC(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function OC(x,I){var V=x.element;if(!!V.style){var H;d(x.options.cssProps,function(et,yt){H=$(V.style,yt),I?(x.oldCssProps[H]=V.style[H],V.style[H]=et):V.style[H]=x.oldCssProps[H]||""}),I||(x.oldCssProps={})}}function cj(x,I){var V=r.createEvent("Event");V.initEvent(x,!0,!0),V.gesture=I,I.target.dispatchEvent(V)}v(No,{INPUT_START:K,INPUT_MOVE:pt,INPUT_END:St,INPUT_CANCEL:At,STATE_POSSIBLE:lp,STATE_BEGAN:On,STATE_CHANGED:Pu,STATE_ENDED:Aa,STATE_RECOGNIZED:Ro,STATE_CANCELLED:Vf,STATE_FAILED:Gi,DIRECTION_NONE:st,DIRECTION_LEFT:ft,DIRECTION_RIGHT:z,DIRECTION_UP:G,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:lt,Manager:a_,Input:it,TouchAction:e_,TouchInput:ap,MouseInput:zs,PointerEventInput:Jy,TouchMouseInput:Qy,SingleTouchInput:TC,Recognizer:Do,AttrRecognizer:oi,Tap:fp,Pan:cp,Swipe:o_,Pinch:r_,Rotate:i_,Press:n_,on:S,off:P,each:d,merge:m,extend:g,assign:v,inherit:y,bindFn:_,prefixed:$});var fj=typeof t<"u"?t:typeof self<"u"?self:{};fj.Hammer=No,typeof i=="function"&&i.amd?i(function(){return No}):e.exports?e.exports=No:t[n]=No})(window,document,"Hammer")})(Tf);const $bt=Tf.exports,Ki=hj({__proto__:null,default:$bt},[Tf.exports]),eV=1,rV=2,Q3=4,Vbt={mousedown:eV,mousemove:rV,mouseup:Q3};function Ubt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function Gbt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(Ubt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function jbt(e){e.prototype.handler=function(r){let n=Vbt[r.type];n&eV&&r.button>=0&&(this.pressed=!0),n&rV&&r.which===0&&(n=Q3),this.pressed&&(n&Q3&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}Gbt(Tf.exports.PointerEventInput);jbt(Tf.exports.MouseInput);const Wbt=Tf.exports.Manager;class Cy{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const Hbt=Ki?[[Ki.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ki.Rotate,{enable:!1}],[Ki.Pinch,{enable:!1}],[Ki.Swipe,{enable:!1}],[Ki.Pan,{threshold:0,enable:!1}],[Ki.Press,{enable:!1}],[Ki.Tap,{event:"doubletap",taps:2,enable:!1}],[Ki.Tap,{event:"anytap",enable:!1}],[Ki.Tap,{enable:!1}]]:null,$L={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Xbt={doubletap:["tap"]},Ybt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},fA={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},qbt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},VL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Zbt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",_c=typeof window<"u"?window:global;let tT=!1;try{const e={get passive(){return tT=!0,!0}};_c.addEventListener("test",null,e),_c.removeEventListener("test",null)}catch{tT=!1}const Kbt=Zbt.indexOf("firefox")!==-1,{WHEEL_EVENTS:Jbt}=fA,UL="wheel",GL=4.000244140625,Qbt=40,twt=.25;class ewt extends Cy{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;_c.WheelEvent&&(Kbt&&i.deltaMode===_c.WheelEvent.DOM_DELTA_PIXEL&&(o/=_c.devicePixelRatio),i.deltaMode===_c.WheelEvent.DOM_DELTA_LINE&&(o*=Qbt)),o!==0&&o%GL===0&&(o=Math.floor(o/GL)),i.shiftKey&&o&&(o=o*twt),this.callback({type:UL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(Jbt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,tT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===UL&&(this.options.enable=r)}}const{MOUSE_EVENTS:rwt}=fA,jL="pointermove",WL="pointerover",HL="pointerout",XL="pointerenter",YL="pointerleave";class nwt extends Cy{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(rwt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===jL&&(this.enableMoveEvent=r),t===WL&&(this.enableOverEvent=r),t===HL&&(this.enableOutEvent=r),t===XL&&(this.enableEnterEvent=r),t===YL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(WL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(HL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(XL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(YL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(jL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:iwt}=fA,qL="keydown",ZL="keyup";class owt extends Cy{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:qL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:ZL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(iwt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===qL&&(this.enableDownEvent=r),t===ZL&&(this.enableUpEvent=r)}}const KL="contextmenu";class awt extends Cy{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:KL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===KL&&(this.options.enable=r)}}const eT=1,u1=2,rT=4,swt={pointerdown:eT,pointermove:u1,pointerup:rT,mousedown:eT,mousemove:u1,mouseup:rT},lwt=1,uwt=2,cwt=3,fwt=0,hwt=1,dwt=2,pwt=1,vwt=2,gwt=4;function mwt(e){const t=swt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===rT||t===u1&&!Number.isFinite(r)?(o=i===lwt,a=i===uwt,s=i===cwt):t===u1?(o=Boolean(r&pwt),a=Boolean(r&gwt),s=Boolean(r&vwt)):t===eT&&(o=n===fwt,a=n===hwt,s=n===dwt),{leftButton:o,middleButton:a,rightButton:s}}function ywt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Tb={srcElement:"root",priority:0};class _wt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Tb;typeof n=="string"||n&&n.addEventListener?l={...Tb,srcElement:n}:n&&(l={...Tb,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...mwt(t),...ywt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const bwt={events:null,recognizers:null,recognizerOptions:{},Manager:Wbt,touchAction:"none",tabIndex:0};class wwt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=Ybt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...bwt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||Hbt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys($L).forEach(i=>{const o=this.manager.get(i);o&&$L[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new ewt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new nwt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new owt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new awt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=Xbt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=VL[t]||t;let u=s.get(l);u||(u=new _wt(this),s.set(l,u),u.recognizerName=qbt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=VL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function pl(){}const Swt=({isDragging:e})=>e?"grabbing":"grab",nV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:pl,onResize:pl,onViewStateChange:pl,onInteractionStateChange:pl,onBeforeRender:pl,onAfterRender:pl,onLoad:pl,onError:e=>Wt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:Swt,getTooltip:null,debug:!1,drawPickingColors:!1};class hA{constructor(t){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),E(this,"_onEvent",r=>{const n=AL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),E(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...nV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Wt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Pz()==="IE"&&Wt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new yy({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Jc.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Wt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Wt.removed("onLayerClick","onClick")(),t.initialViewState&&!Sf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return ur(this.viewManager),this.viewManager.views}getViewports(t){return ur(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){ur(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),ur(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new $mt({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>jz({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new K$({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,qE(t,{enable:!0,copyState:!0})),this.tooltip=new zbt(this.canvas),da(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new R$;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new wwt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in AL)this.eventManager.on(i,this._onEvent);this.viewManager=new rbt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new ebt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new Abt,this.deckRenderer=new Lbt(t),this.deckPicker=new Fbt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;da(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Wt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=xl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}E(hA,"defaultProps",nV);E(hA,"VERSION",Xpt.VERSION);class Pb{constructor(t,r){E(this,"opts",void 0),E(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function Twt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function tm(e){return e.stride||e.size*e.bytesPerElement}function iV(e,t){t.offset&&Wt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=tm(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function Pwt(e,t){const r=iV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class Ewt{constructor(t,r,n){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&mgt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=Twt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Pe(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*tm(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Jc.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=Pwt(this.getAccessor(),r||{});return n[t]=new Pb(this,o.high),n["".concat(t,"64Low")]=i?new Pb(this,o.low):new Float32Array(this.size),n}if(r){const n=iV(this.getAccessor(),r);return{[t]:new Pb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Pe?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=tm(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=tm(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=wb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?wb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=Jc.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?wb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Wt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const JL=[],QL=[];function My(e,t=0,r=1/0){let n=JL;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(QL.length=e.length,n=QL):n=JL,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function oV(e){return e&&e[Symbol.asyncIterator]}function aV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const m=h*l+u;for(let y=0;y<r;y++)d[y]=e[m+y];return d}const p=o[h],v=o[h+1]||c;let g;if(a){g=new Array(v-p);for(let m=p;m<v;m++){const y=m*l+u;d=new Array(r);for(let _=0;_<r;_++)d[_]=e[y+_];g[m-p]=d}}else if(l===r)g=e.subarray(p*r+u,v*r+u);else{g=new e.constructor((v-p)*r);let m=0;for(let y=p;y<v;y++){const _=y*l+u;for(let w=0;w<r;w++)g[m++]=e[_+w]}}return g}}const Awt=[],em=[[0,1/0]];function Cwt(e,t){if(e===em||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function Eb(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function Mwt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Eb({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;Eb({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&Eb({source:[],target:t,start:s,size:r,getData:l}),t}const kwt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function sV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...kwt[r],...t,...e,type:r}}function lV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function uV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function cV(e){e.push(e.shift())}function dA(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function fV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=dA(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const m=o;o=(y,_)=>r.normalizeConstant(m(y,_))}const p=h?(m,y)=>o(d,y):(m,y)=>o(d.subarray(m,m+s),y),v=e.getData({length:n}),g=new Float32Array(f);Mwt({source:v,target:g,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<g.byteLength+l&&e.reallocate(g.byteLength+l),e.subData({data:g,offset:l})}class pA extends Ewt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:em}),E(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return sV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=Cwt(this.state.updateRanges,[n,i])}else this.state.updateRanges=em}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Awt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==em),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;ur(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=aV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);ur(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=My(r,n,i);for(const y of g){m.index++;let _=p(y,m);if(d&&(_=d.call(this,_)),f){const w=(m.index<f.length-1?f[m.index+1]:a)-f[m.index];if(_&&Array.isArray(_[0])){let T=v;for(const S of _)t._normalizeValue(S,u,T),T+=c}else _&&_.length>c?u.set(_,v):(t._normalizeValue(_,m.target,0),Z2t({target:u,source:m.target,start:v,count:w}));v+=w*c}else t._normalizeValue(_,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class xwt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.transition=new H0(n),this.attribute=r,this.attributeInTransition=new pA(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=Iwt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;cV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)fV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=dA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:lV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const Lwt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Iwt(e,t){const r=uV(t.size);return new sA(e,{vs:Lwt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class Owt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new H0(n),this.attribute=r,this.attributeInTransition=new pA(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=Dwt(t),this.framebuffer=Nwt(t,this.texture),this.transform=Rwt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)fV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=dA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:lV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),cV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),Sy(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function Rwt(e,t,r){const n=uV(t.size);return new sA(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function Dwt(e){return new dn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Nwt(e,t){return new nr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const Fwt={interpolation:xwt,spring:Owt};class Bwt{constructor(t,{id:r,timeline:n}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=sA.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Wt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=Fwt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Wt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const tI="attributeManager.invalidate",zwt="attributeManager.updateStart",$wt="attributeManager.updateEnd",Vwt="attribute.updateStart",Uwt="attribute.allocate",Gwt="attribute.updateEnd";class jwt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Bwt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Lr(tI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Lr(tI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Lr(zwt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Wt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Lr($wt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new pA(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Lr(Vwt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Lr(Uwt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Lr(Gwt,r,n))}}class Wwt extends H0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=Vl(r,n,a)}}const eI=1e-5;function rI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function Hwt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=rI(e[a],t[a],r[a],n,i);return o}return rI(e,t,r,n,i)}function nI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class Xwt extends H0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=Hwt(o,a,r,n,i);const l=nI(s,r),u=nI(s,a);l<eI&&u<eI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const Ywt={interpolation:Wwt,spring:Xwt};class qwt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=sV(i),!i)return;const a=Ywt[i.type];if(!a){Wt.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function Zwt(e){const t=vA(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function Kwt(e,t){const r=hV({newProps:e,oldProps:t,propTypes:vA(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=Qwt(e,t);let i=!1;return n||(i=tSt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:eSt(e,t),transitionsChanged:Jwt(e,t)}}function Jwt(e,t){if(!e.transitions)return!1;const r={},n=vA(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&nT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function hV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=nT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=nT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function nT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function Qwt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function tSt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&iI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&iI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function eSt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function iI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,hV({oldProps:i,newProps:n,triggerName:r})}function vA(e){const t=e[l1],r=t&&t.constructor;return r?r._propTypes:{}}const rSt="count(): argument not an object",nSt="count(): argument not a container";function iSt(e){if(!aSt(e))throw new Error(rSt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(oSt(e))return Object.keys(e).length;throw new Error(nSt)}function oSt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function aSt(e){return e!==null&&typeof e=="object"}function sSt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const lSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},iT={};function uSt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof dn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new dn(r,{...t,parameters:{...lSt,...n,...e.props.textureParameters}});return iT[i.id]=!0,i}function cSt(e){!e||!(e instanceof dn)||iT[e.id]&&(e.delete(),delete iT[e.id])}const fSt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||f0(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Ab(e,t)}},accessor:{validate(e,t){const r=c1(e);return r==="function"||r===c1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Ab(e,t)}},array:{validate(e,t){return t.optional&&!e||f0(e)},equal(e,t,r){return r.compare?Ab(e,t):e===t}},object:{equal(e,t,r){return r.compare?Sf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>uSt(r,e),release:e=>{cSt(e)}}};function Ab(e,t){if(e===t)return!0;if(!f0(e)||!f0(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function hSt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=dSt(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function dSt(e,t){switch(c1(t)){case"object":return _h(e,t);case"array":return _h(e,{type:"array",value:t,compare:!1});case"boolean":return _h(e,{type:"boolean",value:t});case"number":return _h(e,{type:"number",value:t});case"function":return _h(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function _h(e,t){return"type"in t?{name:e,...fSt[t.type],...t}:"value"in t?{name:e,type:c1(t.value),...t}:{name:e,type:"object",value:t}}function f0(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function c1(e){return f0(e)?"array":e===null?"null":typeof e}function pSt(e,t){const r=dV(e.constructor),n=Object.create(r);n[l1]=e,n[ru]={},n[cs]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function dV(e){const t=f1(e,"_mergedDefaultProps");return t||(vSt(e),e._mergedDefaultProps)}function vSt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=dV(r),i=f1(e,"defaultProps")||{},o=hSt(i),a=gSt(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};ySt(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};mSt(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function gSt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=bSt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function mSt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])pV(this,o)||(this[o]=n);Wt.deprecated(i,t[r].join("/"))()}})}function ySt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=_St(a))}e[Dc]=r,e[ru]={},Object.defineProperties(e,n)}function _St(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||oV(t)?this[ru][e]=t:this[cs][e]=t},get(){if(this[cs]){if(e in this[cs])return this[cs][e]||this[Dc][e];if(e in this[ru]){const t=this[l1]&&this[l1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Dc][e]}}return this[Dc][e]}}}function pV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f1(e,t){return pV(e,t)&&e[t]}function bSt(e){const t=f1(e,"layerName")||f1(e,"componentName");return t||Wt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let wSt=0;class gA{constructor(...t){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=pSt(this,t),this.id=this.props.id,this.count=wSt++}clone(t){const{props:r}=this,n={};for(const i in r[Dc])i in r[cs]?n[i]=r[cs][i]:i in r[ru]&&(n[i]=r[ru][i]);return new this.constructor({...r,...n,...t})}}E(gA,"componentName","Component");E(gA,"defaultProps",{});const SSt=Object.freeze({});class TSt{constructor(t){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||SSt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[cs]||{},n=t[ru]||t,i=t[Dc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(oV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class PSt extends TSt{constructor({attributeManager:t,layer:r}){super(r),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const ESt="layer.changeFlag",ASt="layer.initialize",CSt="layer.update",MSt="layer.finalize",kSt="layer.matched",oI=2**24-1,xSt=Object.freeze([]),LSt=W0(({oldViewport:e,viewport:t})=>e.equals(t));let Ji=new Uint8ClampedArray(0);const ISt={data:{type:"data",value:xSt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:e1(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):e1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:j0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:le.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class xo extends gA{constructor(...t){super(...t),E(this,"internalState",null),E(this,"lifecycle",fc.NO_STATE),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ur(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=H$(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=U$(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return ur(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){ur(this.internalState);const n=this.internalState.viewport||this.context.viewport;return q2t(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===le.DEFAULT||t===le.LNGLAT||t===le.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){ur(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:iSt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=sSt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!LSt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(Ji.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>oI&&Wt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ji=Jc.allocate(Ji,r,{size:3,copy:!0,maxCount:Math.max(r,oI)});const i=Math.floor(Ji.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),Ji[a*3+0]=o[0],Ji[a*3+1]=o[1],Ji[a*3+2]=o[2]}t.value=Ji.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==Ji.buffer&&(n.value=Ji.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ur(!this.internalState),ur(Number.isFinite(this.props.coordinateSystem)),Lr(ASt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new PSt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Wt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new qwt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Lr(kSt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Lr(CSt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Lr(MSt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];da(o.gl,{polygonOffset:l}),Qn(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Lr(ESt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=Kwt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){Zwt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new jwt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(xo,"defaultProps",ISt);E(xo,"layerName","Layer");const OSt="compositeLayer.renderLayers";class ky extends xo{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y,_subLayerProps:_}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y},T=_&&t.id&&_[t.id],S=T&&T.updateTriggers,P=t.id||"sublayer";if(T){const C=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const M in T){const k=A[M]||C[M];k&&k.type==="accessor"&&(T[M]=this.getSubLayerAccessor(T[M]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(P),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const C of g){const A=C.getSubLayerProps.call(this,C);A&&Object.assign(w,A,{updateTriggers:Object.assign(w.updateTriggers,A.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=Ey(o,Boolean),this.internalState.subLayers=n}Lr(OSt,this,i,n);for(const o of n)o.parent=this}}E(ky,"layerName","CompositeLayer");const Av=Math.PI/180,aI=180/Math.PI,rm=6370972,bc=256;function RSt(){const e=bc/rm,t=Math.PI/180*bc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class DSt extends Ls{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Nr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Av),c.rotateZ(-n*Av),c.scale(f/l);const h=Math.atan(.5/u),d=bc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:RSt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return Si.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=Cb(l,[i,s,a,1]);else{const d=Cb(l,[i,s,-1,1]),p=Cb(l,[i,s,1,1]),v=((n||0)/rm+1)*bc,g=vb(P$([],d,p)),m=vb(d),y=vb(p),_=(4*m*y-(g-m-y)**2)/16,w=4*_/g,T=Math.sqrt(m-w),S=Math.sqrt(Math.max(0,v*v-w)),P=(T-S)/Math.sqrt(g);u=q1t([],d,p,P)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Av,a=n*Av,s=Math.cos(a),l=(i/rm+1)*bc;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=E$(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*aI,u=a*aI,c=(o/bc-1)*rm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Cb(e,t){const r=wf([],t,e);return aA(r,r,1/r[3]),r}class vV{constructor(t){E(this,"opts",void 0),E(this,"typedArrayManager",void 0),E(this,"indexStarts",[0]),E(this,"vertexStarts",[0]),E(this,"vertexCount",0),E(this,"instanceCount",0),E(this,"attributes",void 0),E(this,"_attributeDefs",void 0),E(this,"data",void 0),E(this,"getGeometry",void 0),E(this,"geometryBuffer",void 0),E(this,"buffers",void 0),E(this,"positionSize",void 0),E(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=Jc,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(ur(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?aV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=My(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Pe){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const NSt=new Uint16Array([0,2,1,0,3,2]),FSt=new Float32Array([0,1,0,0,1,0,1,1]);function BSt(e,t){if(!t)return zSt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),g=$St(e,d,v);u[c*3+0]=g[0],u[c*3+1]=g[1],u[c*3+2]=g[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function zSt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:NSt,texCoords:FSt}}function $St(e,t,r){return Vl(Vl(e[0],e[1],r),Vl(e[3],e[2],r),t)}const VSt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,USt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,GSt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(USt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),jSt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:le.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class mA extends xo{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:VSt,fs:GSt,modules:[gu,mu]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=WSt(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return sI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),BSt(r,this.context.viewport.resolution)}_getModel(t){return t?new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=le;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!sI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=xs([o[0],o[1]]),l=xs([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}E(mA,"layerName","BitmapLayer");E(mA,"defaultProps",jSt);function WSt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function sI(e){return Number.isFinite(e[0])}const HSt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,XSt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,YSt=1024,qSt=4,lI=()=>{},ZSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function KSt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function JSt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function h0(e){return e&&(e.id||e.url)}function QSt(e,t,r){const n=e.width,i=e.height,o=e$(e,{width:t,height:r});return dgt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function uI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=h0(i);e[a]={...i,x:o,y:r}}}function t3t({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=h0(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(uI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&uI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:KSt(o+i+t)}}function e3t(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=My(e);for(const a of i){o.index++;const s=t(a,o),l=h0(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class r3t{constructor(t,{onUpdate:r=lI,onError:n=lI}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",qSt),E(this,"_canvasWidth",YSt),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?h0(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(e3t(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=t3t({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new dn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||ZSt})),this._texture.height!==this._canvasHeight&&(this._texture=QSt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,e1(n.url,Bz,this._loadOptions).then(i=>{const o=h0(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=JSt(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const gV=[0,0,0,255],n3t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:gV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class X0 extends xo{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:HSt,fs:XSt,modules:[gu,mu]})}initializeState(){this.state={iconManager:new r3t(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:gV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:ks[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Wt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}E(X0,"defaultProps",n3t);E(X0,"layerName","IconLayer");const i3t=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,o3t=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,a3t=[0,0,0,255],s3t={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:a3t},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class yA extends xo{getShaders(){return super.getShaders({vs:i3t,fs:o3t,modules:[gu,mu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:ks[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}E(yA,"layerName","LineLayer");E(yA,"defaultProps",s3t);const l3t=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,u3t=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,cI=[0,0,0,255],c3t={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:cI},getLineColor:{type:"accessor",value:cI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class _A extends xo{getShaders(){return super.getShaders({vs:l3t,fs:u3t,modules:[gu,mu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:ks[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:ks[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}E(_A,"defaultProps",c3t);E(_A,"layerName","ScatterplotLayer");const mV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function yV(e,t,r={}){return f3t(e,r)!==t?(d3t(e,r),!0):!1}function f3t(e,t={}){return Math.sign(h3t(e,t))}function h3t(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function d3t(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Pi(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function oT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function d0(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function aT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function nm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function _V(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=d0(e,0,r,a);let h,d;const p=wV(f,i,o,[]),v=[];Pi(u,f);for(let g=1;g<l;g++){for(h=d0(e,g,r,a,h),d=nm(h,p);d;){aT(f,h,d,p,v);const m=nm(v,p);m&&(aT(f,v,m,p,v),d=m),Pi(u,v),oT(f,v),v3t(p,i,d),n&&u.length>r&&(u=[],c.push(u),Pi(u,f)),d=nm(h,p)}Pi(u,h),oT(f,h)}return n?c:c[0]}const fI=0,p3t=1;function Cv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function bV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(p3t):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();g3t(f,n,d[0]||f.length,u),c=wV(u[0],i,o,c);const p=nm(u[1],c);if(p){let v=hI(f,h,n,0,d[0]||f.length,c,p);const g={pos:v[0].pos,types:v[0].types,holes:[]},m={pos:v[1].pos,types:v[1].types,holes:[]};l.push(g,m);for(let y=0;y<d.length;y++)v=hI(f,h,n,d[y],d[y+1]||f.length,c,p),v[0]&&(g.holes.push(g.pos.length),g.pos=Cv(g.pos,v[0].pos),a&&(g.types=Cv(g.types,v[0].types))),v[1]&&(m.holes.push(m.pos.length),m.pos=Cv(m.pos,v[1].pos),a&&(m.types=Cv(m.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function hI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const g=d0(e,s-1,r,n);let m=Math.sign(a&8?g[1]-o[3]:g[0]-o[2]),y=t&&t[s-1],_=0,w=0;for(let T=0;T<s;T++)d=d0(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&m&&m!==p&&(aT(g,d,a,o,h),Pi(l,h)&&c.push(y),Pi(u,h)&&f.push(y)),p<=0?(Pi(l,d)&&c.push(v),_-=p):c.length&&(c[c.length-1]=fI),p>=0?(Pi(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=fI),oT(g,d),m=p,y=v;return[_?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function wV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function v3t(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function g3t(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const m3t=85.051129;function y3t(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);SV(a,r,0,i-n);const s=_V(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)TV(l,r);return s}function _3t(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=b3t(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];SV(a,n,d,u),w3t(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=bV(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)TV(f.positions,n);return c}function b3t(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function w3t(e,t,r,n,i=m3t){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=d0(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Pi(e,s),s[1]=Math.sign(s[1])*i,Pi(e,s),s[0]=o,Pi(e,s)}}function SV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function TV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function S3t(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?_V(i,{size:t,gridResolution:r}):n?y3t(i,{size:t}):i}const T3t=1,P3t=2,Mb=4;class E3t extends vV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?S3t(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(dI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&dI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=Mb,n[o+a-2]=Mb):(n[o]+=T3t,n[o+a-2]+=P3t),n[o+a-1]=Mb}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function dI(e){return Array.isArray(e[0])}const A3t=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,C3t=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,PV=[0,0,0,255],M3t={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:PV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},kb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class bA extends xo{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:A3t,fs:C3t,modules:[gu,mu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:kb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:kb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:kb,defaultValue:PV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new E3t({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:ks[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}E(bA,"defaultProps",M3t);E(bA,"layerName","PathLayer");var wA={exports:{}};wA.exports=xy;wA.exports.default=xy;function xy(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=EV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=O3t(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return p0(o,a,r,s,l,d,0),a}function EV(e,t,r,n,i){var o,a;if(i===uT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=pI(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=pI(o,e[o],e[o+1],a);return a&&Ly(a,a.next)&&(g0(a),a=a.next),a}function nu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Ly(r,r.next)||Ue(r.prev,r,r.next)===0)){if(g0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function p0(e,t,r,n,i,o,a){if(!!e){!a&&o&&B3t(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?x3t(e,n,i,o):k3t(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),g0(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=L3t(nu(e),t,r),p0(e,t,r,n,i,o,2)):a===2&&I3t(e,t,r,n,i,o):p0(nu(e),t,r,n,i,o,1);break}}}}function k3t(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&wc(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function x3t(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=sT(d,p,t,r,n),y=sT(v,g,t,r,n),_=e.prevZ,w=e.nextZ;_&&_.z>=m&&w&&w.z<=y;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&wc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0||(_=_.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&wc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;_&&_.z>=m;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&wc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;w&&w.z<=y;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&wc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function L3t(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Ly(i,o)&&AV(i,n,n.next,o)&&v0(i,o)&&v0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),g0(n),g0(n.next),n=e=o),n=n.next}while(n!==e);return nu(n)}function I3t(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&V3t(a,s)){var l=CV(a,s);a=nu(a,a.next),l=nu(l,l.next),p0(a,t,r,n,i,o,0),p0(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function O3t(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=EV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push($3t(u));for(i.sort(R3t),o=0;o<i.length;o++)r=D3t(i[o],r);return r}function R3t(e,t){return e.x-t.x}function D3t(e,t){var r=N3t(e,t);if(!r)return t;var n=CV(r,e);return nu(n,n.next),nu(r,r.next)}function N3t(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&wc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),v0(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&F3t(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function F3t(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function B3t(e,t,r,n){var i=e;do i.z===0&&(i.z=sT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,z3t(i)}function z3t(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function sT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function $3t(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function wc(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function V3t(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!U3t(e,t)&&(v0(e,t)&&v0(t,e)&&G3t(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||Ly(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ly(e,t){return e.x===t.x&&e.y===t.y}function AV(e,t,r,n){var i=kv(Ue(e,t,r)),o=kv(Ue(e,t,n)),a=kv(Ue(r,n,e)),s=kv(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&Mv(e,r,t)||o===0&&Mv(e,n,t)||a===0&&Mv(r,e,n)||s===0&&Mv(r,t,n))}function Mv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function kv(e){return e>0?1:e<0?-1:0}function U3t(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&AV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function v0(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function G3t(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function CV(e,t){var r=new lT(e.i,e.x,e.y),n=new lT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function pI(e,t,r,n){var i=new lT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function g0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function lT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}xy.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(uT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(uT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function uT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}xy.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const xv=mV.CLOCKWISE,vI=mV.COUNTER_CLOCKWISE,fs={isClosed:!0};function j3t(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function Qh(e){return"positions"in e?e.positions:e}function im(e){return"holeIndices"in e?e.holeIndices:null}function W3t(e){return Array.isArray(e[0])}function H3t(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function X3t(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Y3t(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function gI(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!X3t(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return fs.start=t,fs.end=o,fs.size=n,yV(e,i,fs),o}function mI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!Y3t(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return fs.start=t,fs.end=l,fs.size=n,yV(e,a,fs),l}function q3t(e,t){j3t(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=mI(r,a,i,t,o[s-1],o[s],s===0?xv:vI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!W3t(e))return mI(r,0,e,t,0,r.length,xv),r;if(!H3t(e)){let i=0;for(const[o,a]of e.entries())i=gI(r,i,a,t,o===0?xv:vI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return gI(r,0,e,t,xv),r}function Z3t(e,t,r){let n=im(e);n&&(n=n.map(o=>o/t));let i=Qh(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return wA.exports(i,n,t)}class K3t extends vV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=q3t(t,this.positionSize);return this.opts.resolution?bV(Qh(r),im(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?_3t(Qh(r),im(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(yI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return Qh(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&yI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=Z3t(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=Qh(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&im(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function yI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const MV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,J3t=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(MV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Q3t=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(MV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),tTt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,h1=[0,0,0,255],eTt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:h1},getLineColor:{type:"accessor",value:h1},material:!0},Lv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class SA extends xo{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?J3t:Q3t,fs:tTt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[gu,f_t,mu]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===le.DEFAULT&&(n=le.LNGLAT),this.setState({numInstances:0,polygonTesselator:new K3t({preproject:n===le.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||JE(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Lv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Lv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Lv,accessor:"getFillColor",defaultValue:h1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Lv,accessor:"getLineColor",defaultValue:h1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new pa(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new pa(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new vu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}E(SA,"defaultProps",eTt);E(SA,"layerName","SolidPolygonLayer");function rTt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function nTt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?iTt(e,n,r):null}function iTt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function oTt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const aTt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,_I=192/256,bI=[],sTt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class TA extends X0{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:aTt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Wt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:_I,outlineBuffer:i?Math.max(n,_I*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):bI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):bI}}E(TA,"defaultProps",sTt);E(TA,"layerName","MultiIconLayer");var PA={exports:{}};PA.exports=Y0;PA.exports.default=Y0;var Nc=1e20;function Y0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function lTt(e,t,r,n,i,o,a){o.fill(Nc,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Nc;else if(f===0)o[c]=Nc,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function uTt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}Y0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return lTt(d,o,s,a,l,this.gridOuter,this.gridInner),wI(this.gridOuter,o,s,this.f,this.v,this.z),wI(this.gridInner,o,s,this.f,this.v,this.z),uTt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};Y0.prototype.draw=function(e){return this._draw(e,!1).data};Y0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function wI(e,t,r,n,i,o){for(var a=0;a<t;a++)SI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)SI(e,s*t,1,t,n,i,o)}function SI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Nc,a[1]=Nc,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Nc}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const cTt=32,fTt=[];function hTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function dTt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:hTt(s+(l+1)*c)}}function kV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function xV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=kV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function pTt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=kV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=xV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function vTt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?xV(e,i,o,r,n,a):pTt(e,i,o,r,n,a),a}function gTt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Wt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=cTt)}o[0]=a,o[1]=s}function TI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let g=0;g<=a;g++){const m=o[g];if((m===`
`||g===a)&&(v=g),v>p){const y=c?vTt(o,r,n,i,p,v):fTt;for(let _=0;_<=y.length;_++){const w=_===0?p:y[_-1],T=_<y.length?y[_]:v;gTt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}m===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function mTt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,g=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class LV{constructor(t=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function yTt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const xd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:yTt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},PI=1024,_Tt=.9,EI=1.2,IV=3;let d1=new LV(IV);function bTt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=d1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function wTt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function AI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function STt(e){Wt.assert(Number.isFinite(e)&&e>=IV,"Invalid cache limit"),d1=new LV(e)}class TTt{constructor(){E(this,"props",{...xd}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return EI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=bTt(this._key,this.props.characterSet),i=d1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,d1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=PI);const h=f.getContext("2d");AI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:g}=dTt({getFontWidth:m=>h.measureText(m).width,fontHeight:a*EI,buffer:s,characterSet:r,maxCanvasWidth:PI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const m=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(m,0,0)}if(AI(h,i,a,o),l){const m=new PA.exports(a,s,u,c,i,o),y=h.getImageData(0,0,m.size,m.size);for(const _ of r)wTt(m.draw(_),y),h.putImageData(y,d[_].x-s,d[_].y+s)}else for(const m of r)h.fillText(m,d[m].x,d[m].y+a*_Tt);return{xOffset:v,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const PTt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,ETt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ATt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class EA extends xo{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:PTt,fs:ETt,modules:[gu,mu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:ks[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new pa(t,{...this.getShaders(),id:this.props.id,geometry:new vu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}E(EA,"defaultProps",ATt);E(EA,"layerName","TextBackgroundLayer");const CI={start:1,middle:0,end:-1},MI={top:1,center:0,bottom:-1},xb=[0,0,0,255],CTt=1,MTt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:xb},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:xd.characterSet},fontFamily:xd.fontFamily,fontWeight:xd.fontWeight,lineHeight:CTt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:xb},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:xb},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class AA extends ky{constructor(...t){super(...t),E(this,"state",void 0),E(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=TI(f,l,a,s,i),p=CI[typeof u=="function"?u(r,n):u],v=MI[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),E(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,g]}=TI(f,l,a,s,i),m=CI[typeof u=="function"?u(r,n):u],y=MI[typeof c=="function"?c(r,n):c],_=h.length,w=new Array(_*2);let T=0;for(let S=0;S<_;S++){const P=(1-m)*(v-p[S])/2;w[T++]=(m-1)*v/2+P+h[S],w[T++]=(y-1)*g/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new TTt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=mTt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=My(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:_,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:C,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:O,updateTriggers:B}=this.props,$=this.getSubLayerClass("characters",TA),D=this.getSubLayerClass("background",EA);return[_&&new D({getFillColor:v,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new $({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:xd.smoothing,outlineWidth:S,outlineColor:P,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C*i,sizeUnits:A,sizeMinPixels:M*i,sizeMaxPixels:k*i,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){STt(t)}}E(AA,"defaultProps",MTt);E(AA,"layerName","TextLayer");const om={circle:{type:_A,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:X0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:AA,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},am={type:bA,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},cT={type:SA,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function bh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Lb(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function kTt(e){if(Array.isArray(e))return e;switch(Wt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Wt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function kI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Wt.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Wt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];xI(f,n,t,s,a)}}else xI(l,n,t,s,a)}return n}function xI(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!LTt(o,a)){Wt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const xTt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function LTt(e,t){let r=xTt[e];for(Wt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function OV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Iv(e){return e.geometry.coordinates}function ITt(e,t){const r=OV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Iv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Iv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Iv,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Iv,r}function OTt(e,t){const r=OV(),{points:n,lines:i,polygons:o}=e,a=oTt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const RTt=["points","linestrings","polygons"],DTt={...bh(om.circle),...bh(om.icon),...bh(om.text),...bh(am),...bh(cT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class CA extends ky{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=OTt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=kTt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=kI(n,i,u);for(const f in l)a[f].push(rTt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=kI(n,i);const s=ITt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=RTt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,cT.type);if(o){const a=Lb(this,cT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,am.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,am.type);if(a||s){const l=Lb(this,am.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=om[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Lb(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=nTt(o,a);return t(s,i)}}}E(CA,"layerName","GeoJsonLayer");E(CA,"defaultProps",DTt);class NTt{constructor(t){E(this,"index",void 0),E(this,"isVisible",void 0),E(this,"isSelected",void 0),E(this,"parent",void 0),E(this,"children",void 0),E(this,"content",void 0),E(this,"state",void 0),E(this,"layers",void 0),E(this,"id",void 0),E(this,"bbox",void 0),E(this,"zoom",void 0),E(this,"userData",void 0),E(this,"_abortController",void 0),E(this,"_loader",void 0),E(this,"_loaderId",void 0),E(this,"_isLoaded",void 0),E(this,"_isCancelled",void 0),E(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Wt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Ir={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},LI=new _t,FTt=new _t;class MA{constructor(t=[0,0,0],r=[0,0,0],n){E(this,"center",void 0),E(this,"halfDiagonal",void 0),E(this,"minimum",void 0),E(this,"maximum",void 0),n=n||LI.copy(t).add(r).scale(.5),this.center=new _t(n),this.halfDiagonal=new _t(r).subtract(this.center),this.minimum=new _t(t),this.maximum=new _t(r)}clone(){return new MA(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=FTt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Ir.INSIDE:o+i<0?Ir.OUTSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=LI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const wh=new _t,II=new _t;class kA{constructor(t=[0,0,0],r=0){E(this,"center",void 0),E(this,"radius",void 0),this.radius=-0,this.center=new _t,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=wh.from(r),this.center=new _t().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new kA(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=wh.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return II.copy(a).scale((-n+l)/s).add(r),this.center.copy(II),this.radius=l,this}expand(t){const n=wh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=vyt(wh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=wh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Ir.OUTSIDE:o<n?Ir.INTERSECTING:Ir.INSIDE}}const BTt=new _t,zTt=new _t,Ov=new _t,Rv=new _t,Dv=new _t,$Tt=new _t,VTt=new _t,Uo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class xA{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){E(this,"center",void 0),E(this,"halfAxes",void 0),this.center=new _t().from(t),this.halfAxes=new wr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new _t(t).len(),new _t(r).len(),new _t(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new _t(t).normalize(),o=new _t(r).normalize(),a=new _t(n).normalize();return new wL().fromMatrix3(new wr([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new wL(n),o=new wr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new _t().from(t),this.halfAxes=o,this}clone(){return new xA(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new kA){const r=this.halfAxes,n=r.getColumn(0,Ov),i=r.getColumn(1,Rv),o=r.getColumn(2,Dv),a=BTt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[Uo.COLUMN0ROW0]+a*i[Uo.COLUMN0ROW1]+s*i[Uo.COLUMN0ROW2])+Math.abs(o*i[Uo.COLUMN1ROW0]+a*i[Uo.COLUMN1ROW1]+s*i[Uo.COLUMN1ROW2])+Math.abs(o*i[Uo.COLUMN2ROW0]+a*i[Uo.COLUMN2ROW1]+s*i[Uo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Ir.OUTSIDE:u>=l?Ir.INSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=zTt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Ov),o=n.getColumn(1,Rv),a=n.getColumn(2,Dv),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Ov),u=s.getColumn(1,Rv),c=s.getColumn(2,Dv),f=$Tt.copy(l).add(u).add(c).add(a),h=VTt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Ov);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Rv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Dv);return i.transformAsPoint(t),this.halfAxes=new wr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const OI=new _t,RI=new _t;class Qc{constructor(t=[0,0,1],r=0){E(this,"normal",void 0),E(this,"distance",void 0),this.normal=new _t,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return u0(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=OI.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),u0(bo(this.normal.len(),1)),this.distance=i,this}clone(){return new Qc(this.normal,this.distance)}equals(t){return bo(this.distance,t.distance)&&bo(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=RI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=OI.from(t);const n=this.getPointDistance(t),i=RI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const DI=[new _t([1,0,0]),new _t([0,1,0]),new _t([0,0,1])],NI=new _t,UTt=new _t;new Qc(new _t(1,0,0),0);class na{constructor(t=[]){E(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*DI.length;const r=t.center,n=t.radius;let i=0;for(const o of DI){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new Qc),s||(s=this.planes[i+1]=new Qc);const l=NI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=NI.copy(o).scale(n).add(r),c=UTt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Ir.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Ir.OUTSIDE:return Ir.OUTSIDE;case Ir.INTERSECTING:r=Ir.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(u0(Number.isFinite(r),"parentPlaneMask is required."),r===na.MASK_OUTSIDE||r===na.MASK_INSIDE)return r;let n=na.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===Ir.OUTSIDE)return na.MASK_OUTSIDE;l===Ir.INTERSECTING&&(n|=a)}return n}}E(na,"MASK_OUTSIDE",4294967295);E(na,"MASK_INSIDE",0);E(na,"MASK_INDETERMINATE",2147483647);new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;const lo=new wr,GTt=new wr,jTt=new wr,Nv=new wr,FI=new wr;function WTt(e,t={}){const r=I$.EPSILON20,n=10;let i=0,o=0;const a=GTt,s=jTt;a.identity(),s.copy(e);const l=r*HTt(s);for(;o<n&&XTt(s)>l;)YTt(s,Nv),FI.copy(Nv).transpose(),s.multiplyRight(Nv),s.multiplyLeft(FI),a.multiplyRight(Nv),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function HTt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const fT=[1,0,0],hT=[2,2,1];function XTt(e){let t=0;for(let r=0;r<3;++r){const n=e[lo.getElementIndex(hT[r],fT[r])];t+=2*n*n}return Math.sqrt(t)}function YTt(e,t){const r=I$.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[lo.getElementIndex(hT[u],fT[u])]);c>n&&(i=u,n=c)}const o=fT[i],a=hT[i];let s=1,l=0;if(Math.abs(e[lo.getElementIndex(a,o)])>r){const u=e[lo.getElementIndex(a,a)],c=e[lo.getElementIndex(o,o)],f=e[lo.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return wr.IDENTITY.to(t),t[lo.getElementIndex(o,o)]=t[lo.getElementIndex(a,a)]=s,t[lo.getElementIndex(a,o)]=l,t[lo.getElementIndex(o,a)]=-l,t}const Ua=new _t,qTt=new _t,ZTt=new _t,KTt=new _t,JTt=new _t,QTt=new wr,tPt={diagonal:new wr,unitary:new wr};function ePt(e,t=new xA){if(!e||e.length===0)return t.halfAxes=new wr([0,0,0,0,0,0,0,0,0]),t.center=new _t,t;const r=e.length,n=new _t(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const A of e){const M=Ua.copy(A).subtract(n);o+=M.x*M.x,a+=M.x*M.y,s+=M.x*M.z,l+=M.y*M.y,u+=M.y*M.z,c+=M.z*M.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=QTt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=WTt(f,tPt),d=t.halfAxes.copy(h);let p=d.getColumn(0,ZTt),v=d.getColumn(1,KTt),g=d.getColumn(2,JTt),m=-Number.MAX_VALUE,y=-Number.MAX_VALUE,_=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Ua.copy(A),m=Math.max(Ua.dot(p),m),y=Math.max(Ua.dot(v),y),_=Math.max(Ua.dot(g),_),w=Math.min(Ua.dot(p),w),T=Math.min(Ua.dot(v),T),S=Math.min(Ua.dot(g),S);p=p.multiplyByScalar(.5*(w+m)),v=v.multiplyByScalar(.5*(T+y)),g=g.multiplyByScalar(.5*(S+_)),t.center.copy(p).add(v).add(g);const P=qTt.set(m-w,y-T,_-S).multiplyByScalar(.5),C=new wr([P[0],0,0,0,P[1],0,0,0,P[2]]);return t.halfAxes.multiplyRight(C),t}const Sc=512,BI=3,RV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],DV=RV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),rPt=DV.concat([[.25,.5],[.75,.5]]);class Tc{constructor(t,r,n){E(this,"x",void 0),E(this,"y",void 0),E(this,"z",void 0),E(this,"childVisible",void 0),E(this,"selected",void 0),E(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Tc(t,r,n),new Tc(t,r+1,n),new Tc(t+1,r,n),new Tc(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=Sc/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?rPt:this.z<2?DV:RV,u=[];for(const c of l){const f=dT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return ePt(u)}const i=Math.pow(2,this.z),o=Sc/i,a=this.x*o+r*Sc,s=Sc-(this.y+1)*o;return new MA([a,s,t[0]],[a+o,s+o,t[1]])}}function nPt(e,t,r,n){const i=e instanceof DSt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new Qc(d.clone().negate(),p)),a=new na(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Ao&&e.pitch<=60?t:0;if(n){const[d,p,v,g]=n,m=xs([d,g]),y=xs([v,p]);n=[m[0],Sc-m[1],y[0],Sc-y[1]]}const f=new Tc(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Ao&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-BI););for(h.offset=1;f.update(h)&&!(++h.offset>BI););}return f.getSelected()}const ga=512,iPt=[-1/0,-1/0,1/0,1/0],oPt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function NV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function aPt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function sPt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=aPt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function lPt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function p1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=p1({viewport:e,z:t[0],cullRect:r}),l=p1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function uPt(e,t,r){return r?NV(e,r).map(i=>i*t/ga):e.map(n=>n*t/ga)}function LA(e,t){return Math.pow(2,e)*ga/t}function dT(e,t,r){const n=LA(r,ga),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function zI(e,t,r,n){const i=LA(r,n);return[e/i*ga,t/i*ga]}function cPt(e,t,r,n,i=ga){if(e.isGeospatial){const[u,c]=dT(t,r,n),[f,h]=dT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=zI(t,r,n,i),[s,l]=zI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function fPt(e,t,r,n,i){const o=lPt(e,null,n),a=LA(t,r),[s,l,u,c]=uPt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function hPt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=ga,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(ga/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=NV(i,a)),e.isGeospatial?nPt(e,u,n,i):fPt(e,u,o,c||iPt,s)}const $I=1,Iy=2,dPt="never",pPt="no-overlap",IA="best-available",vPt=5,gPt={[IA]:yPt,[pPt]:_Pt,[dPt]:()=>{}};class mPt{constructor(t){E(this,"opts",void 0),E(this,"_requestScheduler",void 0),E(this,"_cache",void 0),E(this,"_dirty",void 0),E(this,"_tiles",void 0),E(this,"_cacheByteSize",void 0),E(this,"_viewport",void 0),E(this,"_zRange",void 0),E(this,"_selectedTiles",void 0),E(this,"_frameNumber",void 0),E(this,"_modelMatrix",void 0),E(this,"_modelMatrixInverse",void 0),E(this,"_maxZoom",void 0),E(this,"_minZoom",void 0),E(this,"onTileLoad",void 0),E(this,"_getCullBounds",W0(p1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new s0t({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Nr,this._modelMatrixInverse=new Nr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Nr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!bo(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=p1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return hPt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:cPt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||IA,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:gPt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:vPt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new NTt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function yPt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!FV(t)&&OA(t);for(const t of e)t.isVisible=Boolean(t.state&Iy)}function _Pt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&FV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&Iy),r.children&&(r.isVisible||r.state&$I))for(const n of r.children)n.state=$I;else r.isSelected&&OA(r)}function FV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=Iy,!0;t=t.parent}return!1}function OA(e){for(const t of e.children)t.isLoaded||t.content?t.state|=Iy:OA(t)}const bPt={TilesetClass:mPt,data:{type:"data",value:[]},dataComparator:oPt.equals,renderSubLayers:{type:"function",value:e=>new CA(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:IA,zRange:null,maxRequests:6,zoomOffset:0};class RA extends ky{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?sPt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=Ey(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}E(RA,"defaultProps",bPt);E(RA,"layerName","TileLayer");var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.calcRdx=TPt;yu.isFunction=EPt;var wPt=yu.isNumber=APt;yu.toVector=CPt;yu.isArray=void 0;var SPt=Array.prototype.concat,BV=Object.prototype.toString;function TPt(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}var PPt=Array.isArray||function(t){return BV.call(t)==="[object Array]"};yu.isArray=PPt;function EPt(e){return BV.call(e)==="[object Function]"}function APt(e){return typeof e=="number"?e-e===0:!1}function CPt(e){return SPt.apply([],e)}const MPt={setup(){const e=xt(),t=se(),r=So(),n=N1();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panToPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panToPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panToPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new Ay({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){console.log("iconsCalc");let e=[];return this.iconData&&this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]})}),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.clickedObject.key in this.gameStore._tnk2tk){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(!wPt(r.job))return;const n=this.userStore.pzJobs[r.job];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o})}}return e}},methods:{makeIconImg:cY,formatFixed:Bt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.towns;let i=new Uh((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new X0({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>e.taken?[0,0,0,255]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.countNodesTaken},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new yA({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new RA({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new mA(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new hA({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new cA({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},kPt={id:"deck-canvas",ref:"canvas"},xPt={id:"hack"};function LPt(e,t,r,n,i,o){return R(),N(W,null,[b("canvas",kPt,null,512),b("div",xPt,L(o.iconsCalc.length)+" icons",1)],64)}const IPt=ze(MPt,[["render",LPt],["__scopeId","data-v-a056ba81"]]);const OPt={setup(){const e=se();return{gameStore:xt(),userStore:e}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Di,formatFixed:Bt,strShortenLeft:pY},computed:{untakenPlantzonesNearestCpTownProfit(){const n=Date.now();let i=[];this.gameStore.towns.forEach(a=>{const s=this.gameStore.dijDiscountedNearestPlantzones(a,10);i[a]=s});let o=[];for(const[a,s]of Object.entries(i))s.forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.profitPzTownStats(l,a,150,10,10),h={tnk:a,pz:this.gameStore.plantzones[l],cp:u,path:c,profit:f};h.dailyPerCp=h.profit.priceDaily/u,o.push(h)});return o.sort((a,s)=>s.dailyPerCp-a.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-n,"ms"),o}}},DA=e=>(tn("data-v-6be16c81"),e=e(),en(),e),RPt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},DPt={key:0},NPt=["href"],FPt=["src","data-key"],BPt={class:"right"},zPt={key:1},$Pt=DA(()=>b("tr",null,[b("th",{rowspan:"2"},"town"),b("th",{rowspan:"2"},"job"),b("th",{rowspan:"2"},"M$/day"),b("th",{colspan:"2"},"CP"),b("th",{rowspan:"2"},"Efficiency")],-1)),VPt=DA(()=>b("th",null,"\u{1F4BC}",-1)),UPt=["onClick"],GPt={class:"hlimited"},jPt=["onClick"],WPt=["src"],HPt={key:1,class:"reducible"},XPt={class:"fsxs"},YPt=DA(()=>b("tr",null,[b("th",null,"town"),b("th",null,"job"),b("th",null,"M$/day"),b("th",null,"\u{1F4BC}CP"),b("th",null,"M$/day/CP")],-1)),qPt=["onClick"],ZPt={class:"hlimited"},KPt=["onClick"],JPt=["src"];function QPt(e,t,r,n,i,o){const a=de("RouterLink");return R(),N(W,null,[b("nav",RPt,[b("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:Yr({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),b("span",{onClick:t[1]||(t[1]=s=>e.activeTab="ranking"),class:Yr({tab:1,green:e.activeTab!="ranking"})},"Active Jobs Ranking",2),b("span",{onClick:t[2]||(t[2]=s=>e.activeTab="next"),class:Yr({tab:1,green:e.activeTab!="next"})},"Untaken Ranking",2)]),e.activeTab=="daily"?(R(),N("div",DPt,[b("table",null,[(R(!0),N(W,null,Nt(n.userStore.jobsTally,(s,l)=>(R(),N("tr",null,[b("td",null,[b("a",{href:this.userStore.itemUrl+l},[b("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,FPt),U(" "+L(n.gameStore.uloc.item[l]),1)],8,NPt)]),b("td",BPt,L(o.formatFixed(s,0)),1)]))),256))])])):ut("",!0),e.activeTab=="ranking"?(R(),N("table",zPt,[$Pt,b("tr",null,[VPt,b("th",null,"\u{1F6CF}\uFE0F"+L(n.userStore.prerelease_housesconfig?"\u{1F4E6}":""),1)]),(R(!0),N(W,null,Nt(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(R(),N("tr",null,[b("td",null,[b("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,UPt)]),b("td",null,[b("div",GPt,[s.job in n.userStore.pzJobs?(R(),N(W,{key:0},[b("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job].pos),class:"reducible clickable"},L(n.gameStore.parentNodeName(s.job)),9,jPt),b("span",null,[(R(!0),N(W,null,Nt(n.gameStore.plantzones[s.job].unlucky,(c,f)=>(R(),N(W,null,[f in n.gameStore.vendorPrices?ut("",!0):(R(),ws(a,{key:0,tag:"a",to:{path:"./settings",hash:"#item"+f}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(f),class:"iconitem"},null,8,WPt)]),_:2},1032,["to"]))],64))),256))])],64)):(R(),N("span",HPt,L(n.gameStore.workerJobDescription(s)),1))])]),b("td",null,L(o.formatFixed(l,2)),1),b("td",null,L(o.formatFixed(n.userStore.workerSharedCp(s),2)),1),b("td",null,L(o.formatFixed(n.userStore.workerSharedLodgingCp(s),2)),1),b("td",null,L(o.formatFixed(u,2)),1)]))),256))])):ut("",!0),e.activeTab=="next"?(R(),N(W,{key:2},[b("span",XPt,"Compares 10 nearest (by CP) untaken nodes of each town. Uses a 150/10/10 non-giant worker. Doesn't include "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" costs.",1),b("table",null,[YPt,(R(!0),N(W,null,Nt(o.untakenPlantzonesNearestCpTownProfit,s=>(R(),N("tr",null,[b("td",null,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.nodeName(s.tnk)),9,qPt)]),b("td",null,[b("div",ZPt,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.pz.key].pos),class:"reducible clickable"},L(n.gameStore.parentNodeName(s.pz.key)),9,KPt),b("span",null,[(R(!0),N(W,null,Nt(s.pz.unlucky,(l,u)=>(R(),N(W,null,[u in n.gameStore.vendorPrices?ut("",!0):(R(),ws(a,{key:0,tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,JPt)]),_:2},1032,["to"]))],64))),256))])])]),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,L(o.formatFixed(s.cp)),1),b("td",null,L(o.formatFixed(s.dailyPerCp,2)),1)]))),256))])],64)):ut("",!0)],64)}const tEt=ze(OPt,[["render",QPt],["__scopeId","data-v-6be16c81"]]);const eEt={setup(){const e=xt(),t=se(),r=So(),n=N1();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:I9,Town:jY,Plantzone:pq,ModalDialog:_P,WorkerEdit:vz,WorkerSendSelection:Nht,LodgingSelection:Hht,HousesSelection:Ndt,NodeMap:IPt,EmpireOverview:tEt,FloatingModifierEdit:VE},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendSelection:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:"0",housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panToPaPos:null,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Di,formatFixed:Bt,randBetween:os,levelup:cd,townNearestCpPlantzonesProfit(e,t,r,n){const i=Date.now();let o=[];const a=this.gameStore.tk2tnk(e);return this.gameStore.dijDiscountedNearestPlantzones(a,80).forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.pzSelectionEntry(l,e,a,u,c,r,n);f.profit.dist>1e6||o.push(f)}),o.sort((l,u)=>u.dailyPerCp-l.dailyPerCp),console.log("cpt: townNearestCpPlantzonesProfit took",Date.now()-i,"ms"),o.slice(0,t)},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.gameStore.uloc.town[e].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),r=this.userStore.townWorkers(e).length+1;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:7572,label:t+r,level:1,wspdSheet:115,mspdBase:5,mspdSheet:0,luckSheet:6,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),cd(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){const t=this.gameStore.workerStatsOnPlantzone(e);this.sendSelection={worker:e,jobs:this.townNearestCpPlantzonesProfit(this.gameStore.tnk2tk(e.tnk),16,e,t)},this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{if(delete n.tk,"wspdLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const i=this.gameStore.workerStatic[n.charkey],o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,n.mspdBase=i.mspd/100,delete n.mspdLvlup}if("luckLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`)))}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))}},mounted(){this.panToHash()}},we=e=>(tn("data-v-5acbe40c"),e=e(),en(),e),rEt=we(()=>b("button",null,"import",-1)),nEt=we(()=>b("br",null,null,-1)),iEt={style:{width:"24em"}},oEt=U("Test with workspeed: "),aEt={id:"canvas-limiter"},sEt={key:0},lEt=["src"],uEt=we(()=>b("br",null,null,-1)),cEt={id:"topleft"},fEt=we(()=>b("summary",null,"Empire",-1)),hEt={id:"leftside"},dEt={key:0,id:"mapObjDetail"},pEt=we(()=>b("div",null,"\u02C5",-1)),vEt=[pEt],gEt={id:"clickedTownInfo",class:"vscrollable"},mEt={key:0},yEt={key:0,id:"clickedNodeInfo"},_Et=U(),bEt=we(()=>b("abbr",{title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),wEt={key:0,class:"fsxs"},SEt=U(" shared by active nodejobs: "),TEt=["checked"],PEt=U(" zero-cost connection to nearest town (invested for droprate) "),EEt={key:1,id:"clickedPlantzoneInfo"},AEt={id:"rightside"},CEt={id:"totals"},MEt={class:"fsxs"},kEt=we(()=>b("br",null,null,-1)),xEt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},LEt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},IEt=we(()=>b("br",null,null,-1)),OEt=we(()=>b("br",null,null,-1)),REt=we(()=>b("br",null,null,-1)),DEt={class:"fsxs"},NEt=U(" invested for droprate: "),FEt=["title"],BEt=we(()=>b("br",null,null,-1)),zEt=we(()=>b("br",null,null,-1)),$Et=we(()=>b("br",null,null,-1)),VEt=we(()=>b("br",null,null,-1)),UEt=we(()=>b("br",null,null,-1)),GEt=we(()=>b("br",null,null,-1)),jEt=we(()=>b("br",null,null,-1)),WEt={class:"fsxs"},HEt=we(()=>b("br",null,null,-1)),XEt=we(()=>b("br",null,null,-1)),YEt=we(()=>b("br",null,null,-1)),qEt=we(()=>b("br",null,null,-1)),ZEt=U(" (M$/day/CP) "),KEt={class:"fsxs"},JEt=we(()=>b("br",null,null,-1)),QEt=we(()=>b("br",null,null,-1)),tAt=we(()=>b("br",null,null,-1)),eAt=we(()=>b("br",null,null,-1)),rAt=we(()=>b("div",{style:{clear:"both"}},null,-1)),nAt={id:"workerlist"},iAt=we(()=>b("summary",null,"All towns/workers list",-1)),oAt=U(" show: "),aAt={class:"switch mauto"},sAt=we(()=>b("span",{class:"slider"},null,-1)),lAt=U(" stats after skills "),uAt={class:"switch mauto"},cAt=we(()=>b("span",{class:"slider"},null,-1)),fAt=U(" efficiency ");function hAt(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkerSendSelection"),u=de("LodgingSelection"),c=de("HousesSelection"),f=de("FloatingModifierEdit"),h=de("NodeMap"),d=de("EmpireOverview"),p=de("Town"),v=de("Plantzone");return R(),N(W,null,[Ct(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:Ee(()=>[Ct(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),Ct(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:Ee(()=>[Ct(l,{options:e.sendSelection,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["options","show"])]),_:1},8,["show"]),Ct(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:Ee(()=>[Ct(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),Ct(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:Ee(()=>[Ct(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),Ct(s,{show:e.importDialogVisible,"onUpdate:show":t[10]||(t[10]=g=>e.importDialogVisible=g)},{default:Ee(()=>[b("form",{onSubmit:t[9]||(t[9]=gm(g=>o.fileImport(g),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[8]||(t[8]=g=>o.fileImport())}),rEt,nEt],32)]),_:1},8,["show"]),Ct(s,{show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},{default:Ee(()=>[Ct(f,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[11]||(t[11]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),b("div",iEt,[oEt,Pt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[12]||(t[12]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.modifierDialogWspd,void 0,{number:!0}]]),U(" "+L(e.modifierDialogWspd),1)])]),_:1},8,["show"]),b("main",null,[b("div",aEt,[Ct(h,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[14]||(t[14]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[15]||(t[15]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[16]||(t[16]=g=>e.panToPzk=g),panToPaPos:e.panToPaPos,"onUpdate:panToPaPos":t[17]||(t[17]=g=>e.panToPaPos=g),onPanAnywhere:t[18]||(t[18]=g=>e.panToPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panToPaPos"]),e.hoverInfo&&e.hoverInfo.object?(R(),N("div",{key:0,id:"tooltip",style:Il({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[U(L(e.hoverInfo.object.key)+" "+L(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+L(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(R(),N("span",sEt,[(R(!0),N(W,null,Nt(this.gameStore.plantzones[e.hoverInfo.object.key].unlucky,(g,m)=>(R(),N("img",{src:o.makeIconSrc(m),class:"iconitem"},null,8,lEt))),256))])):ut("",!0),uEt],4)):ut("",!0),b("div",cEt,[b("details",null,[fEt,Ct(d,{onPanToPaPos:t[19]||(t[19]=g=>e.panToPaPos=g)})])]),b("div",hEt,[e.clickedNode?(R(),N("div",dEt,[b("div",{class:"rolldown",onClick:t[20]||(t[20]=g=>e.clickedNode=null)},vEt),b("div",gEt,[e.clickedNode.key in n.gameStore._tnk2tk&&n.gameStore.tnk2tk(e.clickedNode.key)in n.gameStore.lodgingPerTown?(R(),N("table",mEt,[Ct(p,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(e.clickedNode.key)],tk:n.gameStore.tnk2tk(e.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[21]||(t[21]=g=>e.panToPaPos=g)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"])])):ut("",!0)]),!(n.gameStore.tnk2tk[e.clickedNode.key]in n.gameStore.lodgingPerTown)&&!(e.clickedNode.key in n.gameStore.plantzoneDrops)?(R(),N("div",yEt,[b("p",null,[U(L(n.gameStore.uloc.node[e.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(e.clickedNode.key)?(R(),N(W,{key:0},[b("s",null,L(e.clickedNode.thisCpCost)+"CP",1),_Et,bEt],64)):(R(),N(W,{key:1},[U(L(e.clickedNode.thisCpCost)+"CP ",1)],64))]),e.clickedNode.key in n.userStore.currentNodesJobs?(R(),N("p",wEt,[SEt,(R(!0),N(W,null,Nt(n.userStore.currentNodesJobs[e.clickedNode.key],g=>(R(),N("p",null,L(o.formatFixed(100*n.userStore.pzJobs[g].profit.priceDaily/n.userStore.currentNodesCashflow[e.clickedNode.key]))+"% - "+L(n.gameStore.plantzoneName(g))+" @ "+L(o.formatFixed(n.userStore.pzJobs[g].profit.priceDaily,2))+" M$/day ",1))),256))])):ut("",!0),e.prerelease_zerocost?(R(),N(W,{key:1},[b("input",{type:"checkbox",onChange:t[22]||(t[22]=g=>n.userStore.modifyGrindTakens(g,e.clickedNode.key)),checked:n.userStore.grindTakenSet.has(e.clickedNode.key)},null,40,TEt),PEt],64)):ut("",!0)])):ut("",!0),e.clickedNode.key in n.gameStore.plantzoneDrops?(R(),N("div",EEt,[Ct(v,{pzk:e.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):ut("",!0)])):ut("",!0)]),b("div",AEt,[b("div",CEt,[b("details",null,[b("summary",null,"Total workers: "+L(n.userStore.countWorkers),1),b("p",MEt,[U(" nodes: "+L(n.userStore.workedPlantzones.size)+" ",1),kEt,n.userStore.workersFarmingCount?(R(),N(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(R(),N("abbr",LEt,"\u26A0\uFE0F")):ut("",!0):(R(),N("abbr",xEt,"\u26A0\uFE0F")),U(" farming: "+L(n.userStore.workersFarmingCount)+" ",1),IEt],64)):ut("",!0),n.userStore.workersWorkshopCount?(R(),N(W,{key:1},[U(" workshop: "+L(n.userStore.workersWorkshopCount)+" ",1),OEt],64)):ut("",!0),n.userStore.workersCustomCount?(R(),N(W,{key:2},[U(" custom: "+L(n.userStore.workersCustomCount)+" ",1),REt],64)):ut("",!0),n.userStore.workersIdleCount?(R(),N(W,{key:3},[U(" \u26A0\uFE0F idle: "+L(n.userStore.workersIdleCount),1)],64)):ut("",!0)])]),b("details",null,[b("summary",null,"Total CP: "+L(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),b("p",DEt,[n.userStore.autotakenGrindNodesCP?(R(),N(W,{key:0},[NEt,b("abbr",{title:n.userStore.grindTakenDesc},L(n.userStore.autotakenGrindNodesCP),9,FEt),BEt],64)):ut("",!0),U(" nodes: "+L(n.userStore.autotakenNodesCP)+" ",1),zEt,n.userStore.farmingEnable?(R(),N(W,{key:1},[U(" farming: "+L(n.userStore.farmingCP)+" ",1),$Et],64)):ut("",!0),n.userStore.workersWorkshopCount?(R(),N(W,{key:2},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),VEt],64)):ut("",!0),n.userStore.workersCustomCount?(R(),N(W,{key:3},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalCP))+" ",1),UEt],64)):ut("",!0),n.userStore.prerelease_housesconfig?(R(),N(W,{key:4},[U(" lodgage: "+L(n.userStore.lodgage)+" ",1),GEt],64)):(R(),N(W,{key:5},[U(" lodging: "+L(n.userStore.haveLodging.cp.total)+" ",1),jEt],64))])]),b("details",null,[b("summary",null,"Total M$/day: "+L(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),b("p",WEt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),HEt,n.userStore.workersFarmingCount?(R(),N(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),XEt],64)):ut("",!0),n.userStore.workersWorkshopCount?(R(),N(W,{key:1},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),YEt],64)):ut("",!0),n.userStore.workersCustomCount?(R(),N(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),qEt],64)):ut("",!0)])]),b("details",null,[b("summary",null,"Total efficiency: "+L(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),ZEt,b("p",KEt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),JEt,n.userStore.farmingEnable?(R(),N(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),QEt],64)):ut("",!0),n.userStore.workersWorkshopCount?(R(),N(W,{key:1},[U(" workshop: "+L(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),tAt],64)):ut("",!0),n.userStore.workersCustomCount?(R(),N(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),eAt],64)):ut("",!0)])])]),rAt,b("div",nAt,[b("details",null,[iAt,oAt,b("label",aAt,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerStatsForPz=g)},null,512),[[Cn,n.userStore.displayWorkerStatsForPz]]),sAt,lAt]),b("label",uAt,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[Cn,n.userStore.displayProfitPerCp]]),cAt,fAt]),b("button",{onClick:t[25]||(t[25]=g=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[26]||(t[26]=g=>o.fileExport())},"export"),ut("",!0),b("button",{onClick:t[28]||(t[28]=g=>o.fireAll())},"fire all"),b("table",null,[(R(!0),N(W,null,Nt(n.gameStore.lodgingPerTown,(g,m)=>(R(),ws(p,{o:g,tk:m,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[29]||(t[29]=y=>e.panToPaPos=y)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"]))),256))])])])])])])],64)}const dAt=ze(eEt,[["render",hAt],["__scopeId","data-v-5acbe40c"]]);const pAt={setup(){const e=se(),t=xt(),r=So(),n=N1();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,isGiant:!1}),methods:{makeIconSrc:Di,formatFixed:Bt,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)},makeMedianChar(e){const t={},r=this.gameStore.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.isGiant=this.gameStore.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianHuman(e){return this.makeMedianChar(7573)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8036):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):this.makeMedianChar(7571)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const i of Object.values(this.gameStore.plantzones)){const o=i.key;let a=this.gameStore.dijkstraNearestTowns(o,2);a.sort((v,g)=>v[1]-g[1]);let s={};var r,n;for(let v=0;v<a.length;v++){[r,n]=a[v];const g=this.medianGoblin(r);if(s=this.gameStore.profitPzTownStats(o,r,g.wspd,g.mspd,g.luck,!1),s.wspd=g.wspd,s.dist<1e6)break}const l={...i,tnk:r,...s,cp:n,dailyPerCp:s.priceDaily/n,isGiant:!1,kind:"gob"},u=this.medianGiant(r);s=this.gameStore.profitPzTownStats(o,r,u.wspd,u.mspd,u.luck,!0),s.wspd=u.wspd;const c={...i,tnk:r,...s,cp:n,dailyPerCp:s.priceDaily/n,isGiant:!0,kind:"gia"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h=this.medianHuman(r);s=this.gameStore.profitPzTownStats(o,r,h.wspd,h.mspd,h.luck,!1),s.wspd=h.wspd;const d={...i,tnk:r,...s,cp:n,dailyPerCp:s.priceDaily/n,isGiant:!0,kind:"hum"},p=d&&d.dailyPerCp>f.dailyPerCp?d:f;t.push(p)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit;return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},q0=e=>(tn("data-v-57425e9d"),e=e(),en(),e),vAt={id:"toptext"},gAt=q0(()=>b("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), without skills. Home page has more worker types, levels, and skills. ",-1)),mAt=q0(()=>b("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),yAt=q0(()=>b("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. ",-1)),_At=U(" Don't forget to set up your server and prices on Settings page. "),bAt=U(" Show drops with giant bonus "),wAt={class:"scroll"},SAt=q0(()=>b("tr",null,[b("th",{rowspan:"2"},"Node"),b("th",{colspan:"3"},"cycle drops"),b("th",{colspan:"3"},"best town"),b("th",{colspan:"2"},"best worker"),b("th",{rowspan:"2"},"workload"),b("th",{colspan:"3"},"daily"),b("th",{rowspan:"2"},[b("abbr",{title:"in your empire?"},"\u{1F451}")])],-1)),TAt=q0(()=>b("tr",null,[b("th",null,"unlucky"),b("th",null,"lucky"),b("th",null,"$ value"),b("th",null,"name"),b("th",null,"dist"),b("th",null,"CP"),b("th",null,"type"),b("th",null,"wspd"),b("th",null,"cycles"),b("th",null,"M$"),b("th",null,"M$/CP")],-1)),PAt=["id"],EAt=["src"],AAt=["src"],CAt={class:"tac"},MAt=["src"],kAt={class:"tac"},xAt={class:"tac"},LAt={class:"tac"},IAt={class:"tac"},OAt={class:"tac"},RAt={class:"tac"},DAt={class:"tac"},NAt={class:"tac"},FAt={class:"tac"},BAt={class:"tac"},zAt={class:"tac"};function $At(e,t,r,n,i,o){const a=de("RouterLink");return R(),N("main",null,[b("div",vAt,[gAt,mAt,yAt,b("p",null,[_At,Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>e.isGiant=s)},null,512),[[Cn,e.isGiant]]),bAt])]),b("div",wAt,[b("table",null,[SAt,TAt,(R(!0),N(W,null,Nt(o.allPlantzonesNearestCpTownProfit_sorted,s=>(R(),N("tr",{id:"drops"+s.key},[b("td",null,[Ct(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),b("td",null,[e.isGiant?(R(!0),N(W,{key:0},Nt(s.unlucky_gi,(l,u)=>(R(),N("div",null,[Ct(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[U(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,EAt),U(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256)):(R(!0),N(W,{key:1},Nt(s.unlucky,(l,u)=>(R(),N("div",null,[Ct(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[U(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,AAt),U(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256))]),b("td",CAt,[(R(!0),N(W,null,Nt(s.lucky,(l,u)=>(R(),N("div",null,[Ct(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[U(L(o.formatFixed(l,2))+"\xA0",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,MAt)]),_:2},1032,["to"])]))),256))]),b("td",kAt,L(o.formatFixed(s.cycleValue,0)),1),b("td",xAt,L(n.gameStore.nodeName(s.tnk)),1),b("td",LAt,L(o.formatFixed(s.dist,0)),1),b("td",IAt,L(s.cp),1),b("td",OAt,L({gob:"\u{1F47A}",gia:"\u{1F422}",hum:"\u{1F468}"}[s.kind]),1),b("td",RAt,L(o.formatFixed(s.wspd,1)),1),b("td",DAt,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(R(),N(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(R(),N(W,{key:1},[U(L(o.formatFixed(s.activeWorkload,2)),1)],64))]),b("td",NAt,L(o.formatFixed(s.cyclesDaily,1)),1),b("td",FAt,L(o.formatFixed(s.priceDaily,2)),1),b("td",BAt,L(o.formatFixed(s.dailyPerCp,3)),1),b("td",zAt,L(n.userStore.workedPlantzones.has(s.key.toString())?"\u2713":""),1)],8,PAt))),256))])])])}const VAt=ze(pAt,[["render",$At],["__scopeId","data-v-57425e9d"]]),UAt={setup(){const e=xt(),t=se(),r=So();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},GAt=b("br",null,null,-1),jAt=b("br",null,null,-1),WAt=b("tr",null,[b("th"),b("th",null,"Town / House"),b("th",null,"Lodging"),b("th",null,"CP")],-1),HAt=b("td",null,null,-1),XAt={class:"header"},YAt=U(" P2W: "),qAt=["onUpdate:modelValue"],ZAt=["onUpdate:modelValue"],KAt=["href"];function JAt(e,t,r,n,i,o){return R(),N("main",null,[U(" Total lodging slots: "+L(n.userStore.haveLodging.slots.total),1),GAt,U(" Total CP spent: "+L(n.userStore.haveLodging.cp.total),1),jAt,b("table",null,[WAt,(R(!0),N(W,null,Nt(n.gameStore.lodgingPerTown,(a,s)=>(R(),N(W,null,[b("tr",null,[HAt,b("td",null,[b("span",XAt,L(n.gameStore.uloc.town[s]),1),YAt,Pt(b("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,qAt),[[pe,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),b("td",null,L(n.userStore.haveLodging.slots.perTown[s]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[s]),1)]),(R(!0),N(W,null,Nt(a.houses,l=>(R(),N("tr",null,[b("td",null,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,ZAt),[[Cn,n.userStore.lodgingTaken[l.key]]])]),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+l.key},L(n.gameStore.uloc.char[l.key]),9,KAt)]),b("td",null,L(l.lodgingSpaces),1),b("td",null,L(l.CP),1)]))),256))],64))),256))])])}const QAt=ze(UAt,[["render",JAt]]);const tCt={setup(){const e=xt(),t=se(),r=So();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:_P,FloatingModifierEdit:VE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:Bt,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}}}},$i=e=>(tn("data-v-71ddcc88"),e=e(),en(),e),eCt=$i(()=>b("button",null,"import",-1)),rCt=$i(()=>b("br",null,null,-1)),nCt=U(" Test on node: "),iCt=["value"],oCt=$i(()=>b("br",null,null,-1)),aCt=U(" With workspeed: "),sCt={id:"toptext"},lCt=$i(()=>b("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view.",-1)),uCt=$i(()=>b("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),cCt=$i(()=>b("p",null,"If unspecified, 0% modifier will be used (= max workload = min cycles per day)",-1)),fCt=$i(()=>b("summary",null,"Advanced",-1)),hCt=U("allow floating modifiers "),dCt=$i(()=>b("tr",null,[b("th",null,"#"),b("th",null,"Modifier%"),b("th",null,"Contains nodes")],-1)),pCt={class:"center"},vCt={class:"center"},gCt={key:0,class:"switch mauto"},mCt=["onUpdate:modelValue"],yCt=$i(()=>b("span",{class:"slider"},null,-1)),_Ct=U(" floating"),bCt=$i(()=>b("br",null,null,-1)),wCt=["onClick"],SCt=U(" constant"),TCt=$i(()=>b("br",null,null,-1)),PCt=["onUpdate:modelValue"];function ECt(e,t,r,n,i,o){const a=de("ModalDialog"),s=de("FloatingModifierEdit"),l=de("RouterLink");return R(),N(W,null,[Ct(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Ee(()=>[b("form",{onSubmit:t[1]||(t[1]=gm(u=>o.fileImport(u),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),eCt],32)]),_:1},8,["show"]),Ct(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Ee(()=>[Ct(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),rCt,nCt,Pt(b("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(R(!0),N(W,null,Nt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(R(),N("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},L(n.gameStore.plantzoneName(u))+" - "+L(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,iCt))),256))],512),[[ln,e.floatingDialogWkld]]),oCt,aCt,Pt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.floatingDialogWspd,void 0,{number:!0}]]),U(" "+L(e.floatingDialogWspd),1)]),_:1},8,["show"]),b("div",sCt,[lCt,uCt,cCt,b("details",null,[fCt,b("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),b("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),b("label",null,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Cn,n.userStore.allowFloating]]),hCt])])]),b("table",null,[dCt,(R(!0),N(W,null,Nt(n.gameStore.regionGroups,(u,c)=>(R(),N("tr",null,[b("td",pCt,L(c),1),b("td",vCt,[n.userStore.allowFloating?(R(),N("label",gCt,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,mCt),[[Cn,n.userStore.useFloatingModifiers[c]]]),yCt])):ut("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(R(),N(W,{key:1},[_Ct,bCt,U(" ~"+L(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),b("button",{onClick:f=>o.showDialog(c)},"edit",8,wCt)],64)):(R(),N(W,{key:2},[SCt,TCt,Pt(b("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,PCt),[[pe,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),b("td",null,[(R(!0),N(W,null,Nt(u,f=>(R(),N("div",null,[Ct(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[U(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),U(" "+L(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(R(),N(W,{key:0},[U(" \u2933 "+L(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(R(),N(W,{key:1},[U(" \u2192 "+L(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const ACt=ze(tCt,[["render",ECt],["__scopeId","data-v-71ddcc88"]]),CCt={setup(){const e=se();return{gameStore:xt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:Bt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},MCt=b("h3",null,"\u{1F3ED}Workshops config",-1),kCt={class:"sa"},xCt=b("tr",null,[b("th",null,"House"),b("th",null,"label"),b("th",null,"worktype"),b("th",null,"workload"),b("th",null,[U("$/cycle "),b("abbr",{title:"use Sho's Workshop Profitability Calculator"},"\u2139\uFE0F")]),b("th",null,[U("CP "),b("abbr",{title:"full cost of operating the workshop (including connection houses)"},"\u2139\uFE0F")]),b("th",null,"action")],-1),LCt=["onUpdate:modelValue"],ICt=["onUpdate:modelValue"],OCt=uP('<option value="unk">unknown</option><option value="jewelry">jewelry</option><option value="mass">mass</option><option value="weap">weapon</option><option value="tool">tool</option><option value="furn">furniture</option><option value="costume">costume</option><option value="refine">refine</option><option value="siege">siege</option><option value="mount">mount</option><option value="exclus">exclusive</option><option value="pack_produce">pack_produce</option><option value="pack_herb">pack_herb</option><option value="pack_mushr">pack_mushr</option><option value="pack_fish">pack_fish</option><option value="pack_timber">pack_timber</option><option value="pack_ore">pack_ore</option>',17),RCt=[OCt],DCt=["onUpdate:modelValue"],NCt=["onUpdate:modelValue"],FCt=["onUpdate:modelValue"],BCt=["onClick"],zCt=U(" new entry:"),$Ct=b("br",null,null,-1),VCt={class:"borderless"},UCt=b("td",null,"town",-1),GCt=["value"],jCt=b("td",null,"usage",-1),WCt=["value"],HCt=b("td",null,"level",-1),XCt=["value"],YCt=b("td",null,"house",-1),qCt=["value"],ZCt=["disabled"],KCt={key:0,class:"fsxs"};function JCt(e,t,r,n,i,o){return R(),N(W,null,[MCt,b("table",kCt,[xCt,(R(!0),N(W,null,Nt(n.userStore.userWorkshops,(a,s)=>(R(),N("tr",null,[b("td",null,L(n.gameStore.uloc.char[s]),1),b("td",null,[Pt(b("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,LCt),[[pe,a.label,void 0,{number:!0}]])]),b("td",null,[Pt(b("select",{"onUpdate:modelValue":l=>a.industry=l},RCt,8,ICt),[[ln,a.industry]])]),b("td",null,[Pt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,DCt),[[pe,a.manualWorkload,void 0,{number:!0}]])]),b("td",null,[Pt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,NCt),[[pe,a.manualCycleIncome,void 0,{number:!0}]])]),b("td",null,[Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":l=>a.manualCp=l},null,8,FCt),[[pe,a.manualCp,void 0,{number:!0}]])]),b("td",null,[b("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,BCt)])]))),256))]),zCt,$Ct,b("table",VCt,[b("tr",null,[UCt,b("td",null,[Pt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(R(!0),N(W,null,Nt(o.filteredTowns,a=>(R(),N("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,GCt))),256))],512),[[ln,e.filterTown]])])]),b("tr",null,[jCt,b("td",null,[Pt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(R(!0),N(W,null,Nt(o.filteredUsages,a=>(R(),N("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,WCt))),256))],512),[[ln,e.filterUsage]])])]),b("tr",null,[HCt,b("td",null,[Pt(b("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(R(!0),N(W,null,Nt(o.filteredLevels,a=>(R(),N("option",{value:a},L(a>=0?a+"+":"any"),9,XCt))),256))],512),[[ln,e.filterLevel]])])]),b("tr",null,[YCt,b("td",null,[Pt(b("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(R(!0),N(W,null,Nt(o.filteredHouses,a=>(R(),N("option",{value:a},L(a)+" "+L(n.gameStore.uloc.char[a])+" "+L(a in n.userStore.userWorkshops?"\u{1F451}":""),9,qCt))),256))],512),[[ln,e.selectedHouse]])])])]),b("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,ZCt),e.selectedHouse in n.userStore.userWorkshops?(R(),N("span",KCt," already in list! ")):ut("",!0)],64)}const QCt=ze(CCt,[["render",JCt]]);const tMt={setup(){const e=xt(),t=se(),r=So();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:_P,WorkerEdit:vz,WorkshopsConfig:QCt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Di,formatFixed:Bt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},vn=e=>(tn("data-v-6e620cb9"),e=e(),en(),e),eMt={id:"toptext"},rMt=U(" Enable \u{1F33B}Farming "),nMt=U(" (reserve 80 CP for 10 large fences)."),iMt=vn(()=>b("br",null,null,-1)),oMt=U(" Total profit:"),aMt=vn(()=>b("br",null,null,-1)),sMt=U(" 10 workers: "),lMt=U(" M$/day (use "),uMt=vn(()=>b("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),cMt=U(" to estimate) "),fMt=vn(()=>b("br",null,null,-1)),hMt=U(" 0 workers: "),dMt=U(" M$/day (half growth speed) "),pMt=vn(()=>b("div",{class:"spacer"},null,-1)),vMt={key:1},gMt={class:"sa"},mMt=U(" Default worker for hire: "),yMt=U(" "+L(" ")+" "),_Mt=vn(()=>b("label",{for:"f"},"Random Artisan Goblin",-1)),bMt=U(" "+L(" ")+" "),wMt=U(" "+L(" ")+" "),SMt=vn(()=>b("label",{for:"t"},"Custom",-1)),TMt=vn(()=>b("br",null,null,-1)),PMt=U(" Tax: "),EMt=uP('<option value="0.65" data-v-6e620cb9>0.65 (0)</option><option value="0.65325" data-v-6e620cb9>0.65325 (1000)</option><option value="0.6565" data-v-6e620cb9>0.6565 (4000)</option><option value="0.65975" data-v-6e620cb9>0.65975 (7000)</option><option value="0.65975" data-v-6e620cb9>0.69225 (7000 + ring)</option><option value="0.845" data-v-6e620cb9>0.845 (0 + VP)</option><option value="0.84825" data-v-6e620cb9>0.84825 (1000 + VP)</option><option value="0.8515" data-v-6e620cb9>0.8515 (4000 + VP)</option><option value="0.85475" data-v-6e620cb9>0.85475 (7000 + VP)</option><option value="0.88725" data-v-6e620cb9>0.88725 (7000 + ring + VP)</option><option value="1" data-v-6e620cb9>1 (test)</option>',11),AMt=[EMt],CMt=U(" Language: "),MMt=vn(()=>b("option",null,"en",-1)),kMt=vn(()=>b("option",null,"ru",-1)),xMt=[MMt,kMt],LMt=U(" Server: "),IMt=uP("<option data-v-6e620cb9>NA</option><option data-v-6e620cb9>EU</option><option data-v-6e620cb9>RU</option><option data-v-6e620cb9>KR</option><option data-v-6e620cb9>JP</option><option data-v-6e620cb9>TH</option><option data-v-6e620cb9>TW</option><option data-v-6e620cb9>SA</option><option data-v-6e620cb9>SEA</option><option data-v-6e620cb9>MENA</option><option data-v-6e620cb9>CEU</option><option data-v-6e620cb9>CNA</option>",12),OMt=[IMt],RMt=U(" Market API status: "),DMt={key:2},NMt={key:3},FMt=U(" \xA0"),BMt=vn(()=>b("div",{class:"spacer"},null,-1)),zMt=vn(()=>b("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),$Mt=vn(()=>b("p",null,"If the item is for self use, select Keep and/or enter Custom price:",-1)),VMt={class:"scrollable"},UMt=vn(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Market"),b("th",null,"Custom"),b("th",null,"Keep"),b("th",null,"Value")],-1)),GMt=["id"],jMt=["href"],WMt=["src","data-key"],HMt=U(" "+L(" ")+" "),XMt={key:0},YMt=["title"],qMt={class:"right"},ZMt=["href"],KMt=["onUpdate:modelValue"],JMt={class:"center"},QMt=["disabled","onUpdate:modelValue"],tkt={class:"right"};function ekt(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkshopsConfig");return R(),N(W,null,[Ct(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=u=>e.workerDialogVisible=u)},{default:Ee(()=>[Ct(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),Ct(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[2]||(t[2]=u=>e.workshopsConfigVisible=u)},{default:Ee(()=>[Ct(l)]),_:1},8,["show"]),b("main",null,[b("div",eMt,[Pt(b("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=u=>n.userStore.farmingEnable=u)},null,512),[[Cn,n.userStore.farmingEnable]]),rMt,n.userStore.farmingEnable?(R(),N(W,{key:0},[nMt,iMt,oMt,aMt,sMt,Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[4]||(t[4]=u=>n.userStore.farmingProfit=u)},null,512),[[pe,n.userStore.farmingProfit,void 0,{number:!0}]]),lMt,uMt,cMt,fMt,hMt,Pt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[5]||(t[5]=u=>n.userStore.farmingBareProfit=u)},null,512),[[pe,n.userStore.farmingBareProfit,void 0,{number:!0}]]),dMt,pMt],64)):(R(),N("br",vMt)),b("p",gMt,[b("button",{onClick:t[6]||(t[6]=u=>e.workshopsConfigVisible=!0)},"\u{1F3ED}Workshops config")]),mMt,Pt(b("input",{type:"radio",name:"dw",id:"f",value:!1,"onUpdate:modelValue":t[7]||(t[7]=u=>n.userStore.useDefaultWorker=u)},null,512),[[sd,n.userStore.useDefaultWorker]]),yMt,_Mt,bMt,Pt(b("input",{type:"radio",name:"dw",id:"t",value:!0,"onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.useDefaultWorker=u)},null,512),[[sd,n.userStore.useDefaultWorker]]),wMt,SMt,U(" ("+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),b("button",{onClick:t[9]||(t[9]=u=>e.workerDialogVisible=!0)},"edit"),TMt,PMt,Pt(b("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedTax=u)},AMt,512),[[ln,n.userStore.selectedTax]]),CMt,Pt(b("select",{"onUpdate:modelValue":t[11]||(t[11]=u=>n.userStore.selectedLang=u),onChange:t[12]||(t[12]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},xMt,544),[[ln,n.userStore.selectedLang]]),LMt,Pt(b("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.selectedRegion=u),onChange:t[14]||(t[14]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},OMt,544),[[ln,n.userStore.selectedRegion]]),RMt,n.marketStore.ready?(R(),N("span",DMt,"\u2713")):(R(),N("span",NMt,"\u274C")),FMt,b("button",{onClick:t[15]||(t[15]=u=>o.reload())},"reload"),BMt,zMt,$Mt]),b("div",VMt,[b("table",null,[UMt,(R(!0),N(W,null,Nt(n.gameStore.itemKeys,u=>(R(),N("tr",{id:"item"+u},[b("td",null,[b("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,WMt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,jMt),HMt,u in n.marketStore.calculatedPrices?(R(),N("span",XMt,[b("abbr",{title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>n.gameStore.uloc.item[c]+" x"+o.formatFixed(f,3)).join(`
`)},"\u2139\uFE0F",8,YMt)])):ut("",!0)]),b("td",qMt,[u in n.marketStore.apiPrices?(R(),N("a",{key:0,href:this.marketStore.itemPriceUrl(u)},L(o.formatFixed(n.marketStore.apiPrices[u])),9,ZMt)):(R(),N(W,{key:1},[U(L(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),b("td",null,[Pt(b("input",{type:"number",class:"mid right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,KMt),[[pe,n.userStore.customPrices[u],void 0,{number:!0}]])]),b("td",JMt,[Pt(b("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,QMt),[[Cn,n.userStore.keepItems[u]]])]),b("td",tkt,L(o.formatFixed(n.marketStore.prices[u])),1)],8,GMt))),256))])])])],64)}const rkt=ze(tMt,[["render",ekt],["__scopeId","data-v-6e620cb9"]]);const nkt={setup(){const e=xt(),t=se(),r=So();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:Bt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},ikt=b("div",{id:"toptext"},[b("p",null,"Using 150/10/10 worker")],-1),okt=b("tr",null,[b("th",null,"Node/Town"),b("th",null,"connect"),b("th",null,"distance"),b("th",null,"M$/day"),b("th",null,"M$/day/CP")],-1),akt={colspan:"5"};function skt(e,t,r,n,i,o){return R(),N(W,null,[ikt,b("table",null,[okt,(R(!0),N(W,null,Nt(n.gameStore.plantzones,(a,s)=>(R(),N(W,null,[b("tr",null,[b("td",akt,[b("h3",null,L(s)+" "+L(a.name),1)])]),(R(!0),N(W,null,Nt(o.plantzonesNearestCpTownsProfits150[s],l=>(R(),N("tr",null,[b("td",null,L(n.gameStore.nodeName(l.tnk)),1),b("td",null,L(l.cp)+"CP ",1),b("td",null,L(o.formatFixed(l.dist,0)),1),b("td",null,L(o.formatFixed(l.priceDaily,2)),1),b("td",null,L(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const lkt=ze(nkt,[["render",skt]]),ukt={setup(){const e=xt(),t=se();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:[-1],usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Di,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},ckt={id:"toptext"},fkt=U(" Town: "),hkt=["value"],dkt=U(" Usage: "),pkt=["value"],vkt={key:0},gkt=b("summary",null,"Craftables",-1),mkt=["href"],ykt=["src","data-key"],_kt=b("tr",null,[b("th",null,"town"),b("th",null,"node"),b("th",null,"name"),b("th",null,"CP"),b("th",null,"usage/level")],-1),bkt={key:0},wkt=["href"],Skt=U(L(" "));function Tkt(e,t,r,n,i,o){return R(),N("main",null,[b("div",ckt,[fkt,Pt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(R(!0),N(W,null,Nt(e.towns,a=>(R(),N("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,hkt))),256))],512),[[ln,e.filterTown]]),dkt,Pt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(R(!0),N(W,null,Nt(e.usages,a=>(R(),N("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,pkt))),256))],512),[[ln,e.filterUsage]]),e.filterUsage!=-1?(R(),N("details",vkt,[gkt,(R(!0),N(W,null,Nt(this.houseCrafts[e.filterUsage].groups,(a,s)=>(R(),N("div",null,[U(" level "+L(s+1)+": ",1),b("table",null,[(R(!0),N(W,null,Nt(a,l=>(R(),N("tr",null,[(R(!0),N(W,null,Nt(this.craftItems[l],u=>(R(),N("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,ykt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,mkt))),256))]))),256))])]))),256))])):ut("",!0)]),b("table",null,[_kt,(R(!0),N(W,null,Nt(e.houses,(a,s)=>(R(),N(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(R(),N("tr",bkt,[b("td",null,L(a.affTown),1),b("td",null,L(a.parentNode),1),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,wkt)]),b("td",null,L(a.CP)+" ("+L(a.CPfull)+")",1),b("td",null,[(R(!0),N(W,null,Nt(a.CraftList,(l,u)=>(R(),N("span",null,[U(L(n.gameStore.uloc.housetype[u]),1),b("sup",null,L(l),1),Skt]))),256))])])):ut("",!0)],64))),256))])])}const Pkt=ze(ukt,[["render",Tkt]]);Br([df,ust,gf,vf,mf]);const Ekt={setup(){const e=se();return{gameStore:xt(),userStore:e}},components:{VChart:yf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready||!this.bestLookup.success)return e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:Bt}},Z0=e=>(tn("data-v-0aa4b1f8"),e=e(),en(),e),Akt={class:"limit"},Ckt={id:"controls"},Mkt=Z0(()=>b("p",null,[U("data from "),b("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),kkt=U(" town "),xkt=["value"],Lkt={id:"fluid"},Ikt={id:"sliders"},Okt=Z0(()=>b("span",{class:"lodging"},"lodging",-1)),Rkt=U(" needed: "),Dkt=["max"],Nkt=Z0(()=>b("br",null,null,-1)),Fkt=Z0(()=>b("span",{class:"storage"},"storage",-1)),Bkt=U(" needed: "),zkt=["max"],$kt={id:"cost"},Vkt=Z0(()=>b("div",{style:{clear:"both"}},null,-1)),Ukt={key:0,id:"houselist"};function Gkt(e,t,r,n,i,o){const a=de("v-chart");return R(),N("main",null,[b("div",Akt,[b("div",Ckt,[Mkt,this.gameStore.ready?(R(),N(W,{key:0},[kkt,Pt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.tk=s)},[(R(!0),N(W,null,Nt(this.gameStore._tk2tnk,(s,l)=>(R(),N("option",{value:l},L(n.gameStore.uloc.town[l]),9,xkt))),256))],512),[[ln,e.tk]])],64)):ut("",!0),b("div",Lkt,[b("div",Ikt,[Okt,Rkt,Pt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,Dkt),[[pe,e.wantLodging,void 0,{number:!0}]]),U(" "+L(e.wantLodging)+" \u2192 "+L(o.bestLookup?o.bestLookup.lodging:"?")+" found ",1),Nkt,Fkt,Bkt,Pt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[2]||(t[2]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,zkt),[[pe,e.wantStorage,void 0,{number:!0}]]),U(" "+L(e.wantStorage)+" \u2192 "+L(o.bestLookup?o.bestLookup.storage:"?")+" found ",1)]),b("div",$kt," cost: "+L(o.bestLookup?o.bestLookup.cost:"?")+" CP ",1)])]),Vkt,o.bestLookup?(R(),N("div",Ukt,[(R(!0),N(W,null,Nt(o.bestLookup.indices,(s,l)=>(R(),N(W,null,[o.bestLookup.states[l]>0?(R(),N("p",{key:0,class:Yr({storage:o.bestLookup.states[l]==1,lodging:o.bestLookup.states[l]==2})},L(n.gameStore.uloc.char[s]),3)):ut("",!0)],64))),256))])):ut("",!0),Ct(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const jkt=ze(Ekt,[["render",Gkt],["__scopeId","data-v-0aa4b1f8"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wkt=typeof Object.defineProperty=="function"?Object.defineProperty:null,Hkt=Wkt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xkt=Hkt;function Ykt(){try{return Xkt({},"x",{}),!0}catch{return!1}}var qkt=Ykt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zkt=Object.defineProperty,Kkt=Zkt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pf=Object.prototype,VI=Pf.toString,UI=Pf.__defineGetter__,GI=Pf.__defineSetter__,Jkt=Pf.__lookupGetter__,Qkt=Pf.__lookupSetter__;function t4t(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||VI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||VI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(Jkt.call(e,t)||Qkt.call(e,t)?(n=e.__proto__,e.__proto__=Pf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&UI&&UI.call(e,t,r.get),a&&GI&&GI.call(e,t,r.set),e}var e4t=t4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r4t=qkt,n4t=Kkt,i4t=e4t,pT;r4t()?pT=n4t:pT=i4t;var zV=pT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o4t=zV;function a4t(e,t,r){o4t(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var s4t=a4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l4t=s4t,u4t=l4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c4t=zV;function f4t(e,t,r){c4t(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var h4t=f4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d4t=h4t,dr=d4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p4t=Math.floor,v4t=p4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g4t=v4t,kn=g4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m4t=kn;function y4t(e){return m4t(e)===e}var _4t=y4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b4t=_4t,Is=b4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w4t=4294967295>>>0,S4t=w4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T4t=Is,P4t=S4t;function E4t(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&T4t(e.length)&&e.length>=0&&e.length<=P4t}var A4t=E4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C4t=A4t,M4t=C4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k4t=M4t;function x4t(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!k4t(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var L4t=x4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I4t=L4t,O4t=I4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function R4t(e){return typeof e=="number"}var $V=R4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D4t(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var N4t=D4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F4t=N4t,B4t=F4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z4t=B4t,$4t=z4t();function V4t(){return $4t&&typeof Symbol.toStringTag=="symbol"}var U4t=V4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G4t=U4t,Oy=G4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j4t=Object.prototype.toString,VV=j4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W4t=VV;function H4t(e){return W4t.call(e)}var X4t=H4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y4t=Object.prototype.hasOwnProperty;function q4t(e,t){return e==null?!1:Y4t.call(e,t)}var Z4t=q4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K4t=Z4t,Ry=K4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J4t=typeof Symbol=="function"?Symbol.toStringTag:"",Q4t=J4t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t6t=Ry,Sh=Q4t,Ib=VV;function e6t(e){var t,r,n;if(e==null)return Ib.call(e);r=e[Sh],t=t6t(e,Sh);try{e[Sh]=void 0}catch{return Ib.call(e)}return n=Ib.call(e),t?e[Sh]=r:delete e[Sh],n}var r6t=e6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n6t=Oy,i6t=X4t,o6t=r6t,vT;n6t()?vT=o6t:vT=i6t;var Vi=vT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var a6t=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s6t=a6t,NA=s6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l6t=NA,u6t=l6t.prototype.toString,c6t=u6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f6t=c6t;function h6t(e){try{return f6t.call(e),!0}catch{return!1}}var d6t=h6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p6t=Oy,v6t=Vi,g6t=NA,m6t=d6t,y6t=p6t();function _6t(e){return typeof e=="object"?e instanceof g6t?!0:y6t?m6t(e):v6t(e)==="[object Number]":!1}var UV=_6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b6t=$V,w6t=UV;function S6t(e){return b6t(e)||w6t(e)}var T6t=S6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GV=dr,FA=T6t,P6t=$V,E6t=UV;GV(FA,"isPrimitive",P6t);GV(FA,"isObject",E6t);var Ef=FA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jV=dr,BA=O4t,zA=Ef,A6t=BA(zA.isPrimitive),C6t=BA(zA.isObject),$A=BA(zA);jV($A,"primitives",A6t);jV($A,"objects",C6t);var M6t=$A;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k6t=Number.POSITIVE_INFINITY,Ne=k6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x6t=NA,L6t=x6t.NEGATIVE_INFINITY,Tr=L6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I6t=Ne,O6t=Tr,R6t=Is;function D6t(e){return e<I6t&&e>O6t&&R6t(e)}var WV=D6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N6t=Ef.isPrimitive,F6t=WV;function B6t(e){return N6t(e)&&F6t(e)}var HV=B6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z6t=Ef.isObject,$6t=WV;function V6t(e){return z6t(e)&&$6t(e.valueOf())}var XV=V6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U6t=HV,G6t=XV;function j6t(e){return U6t(e)||G6t(e)}var W6t=j6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YV=dr,VA=W6t,H6t=HV,X6t=XV;YV(VA,"isPrimitive",H6t);YV(VA,"isObject",X6t);var Dy=VA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y6t=Dy.isPrimitive;function q6t(e){return Y6t(e)&&e>=0}var qV=q6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z6t=Dy.isObject;function K6t(e){return Z6t(e)&&e.valueOf()>=0}var ZV=K6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J6t=qV,Q6t=ZV;function t5t(e){return J6t(e)||Q6t(e)}var e5t=t5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KV=dr,UA=e5t,r5t=qV,n5t=ZV;KV(UA,"isPrimitive",r5t);KV(UA,"isObject",n5t);var i5t=UA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o5t(e){return e!==e}var a5t=o5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s5t=a5t,Zt=s5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function l5t(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var JV=l5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u5t=JV;function c5t(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return u5t(e,a)}}var f5t=c5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h5t=dr,QV=JV,d5t=f5t;h5t(QV,"factory",d5t);var Os=QV;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p5t=Vi,v5t=typeof Uint32Array=="function";function g5t(e){return v5t&&e instanceof Uint32Array||p5t(e)==="[object Uint32Array]"}var m5t=g5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y5t=m5t,_5t=y5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b5t=4294967295,w5t=b5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S5t=typeof Uint32Array=="function"?Uint32Array:null,T5t=S5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P5t=_5t,Ob=w5t,jI=T5t;function E5t(){var e,t;if(typeof jI!="function")return!1;try{t=[1,3.14,-3.14,Ob+1,Ob+2],t=new jI(t),e=P5t(t)&&t[0]===1&&t[1]===3&&t[2]===Ob-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var A5t=E5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C5t=A5t,M5t=C5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k5t=typeof Uint32Array=="function"?Uint32Array:void 0,x5t=k5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L5t(){throw new Error("not implemented")}var I5t=L5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O5t=M5t,R5t=x5t,D5t=I5t,gT;O5t()?gT=R5t:gT=D5t;var Af=gT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N5t=Vi,F5t=typeof Float64Array=="function";function B5t(e){return F5t&&e instanceof Float64Array||N5t(e)==="[object Float64Array]"}var z5t=B5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $5t=z5t,V5t=$5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U5t=typeof Float64Array=="function"?Float64Array:null,G5t=U5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j5t=V5t,WI=G5t;function W5t(){var e,t;if(typeof WI!="function")return!1;try{t=new WI([1,3.14,-3.14,NaN]),e=j5t(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var H5t=W5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X5t=H5t,Y5t=X5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q5t=typeof Float64Array=="function"?Float64Array:void 0,Z5t=q5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function K5t(){throw new Error("not implemented")}var J5t=K5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q5t=Y5t,txt=Z5t,ext=J5t,mT;Q5t()?mT=txt:mT=ext;var Cf=mT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rxt=Vi,nxt=typeof Uint8Array=="function";function ixt(e){return nxt&&e instanceof Uint8Array||rxt(e)==="[object Uint8Array]"}var oxt=ixt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var axt=oxt,sxt=axt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lxt=255,uxt=lxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cxt=typeof Uint8Array=="function"?Uint8Array:null,fxt=cxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hxt=sxt,Rb=uxt,HI=fxt;function dxt(){var e,t;if(typeof HI!="function")return!1;try{t=[1,3.14,-3.14,Rb+1,Rb+2],t=new HI(t),e=hxt(t)&&t[0]===1&&t[1]===3&&t[2]===Rb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var pxt=dxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vxt=pxt,gxt=vxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mxt=typeof Uint8Array=="function"?Uint8Array:void 0,yxt=mxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _xt(){throw new Error("not implemented")}var bxt=_xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wxt=gxt,Sxt=yxt,Txt=bxt,yT;wxt()?yT=Sxt:yT=Txt;var Pxt=yT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ext=Vi,Axt=typeof Uint16Array=="function";function Cxt(e){return Axt&&e instanceof Uint16Array||Ext(e)==="[object Uint16Array]"}var Mxt=Cxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kxt=Mxt,xxt=kxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lxt=65535,Ixt=Lxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oxt=typeof Uint16Array=="function"?Uint16Array:null,Rxt=Oxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dxt=xxt,Db=Ixt,XI=Rxt;function Nxt(){var e,t;if(typeof XI!="function")return!1;try{t=[1,3.14,-3.14,Db+1,Db+2],t=new XI(t),e=Dxt(t)&&t[0]===1&&t[1]===3&&t[2]===Db-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var Fxt=Nxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bxt=Fxt,zxt=Bxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $xt=typeof Uint16Array=="function"?Uint16Array:void 0,Vxt=$xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uxt(){throw new Error("not implemented")}var Gxt=Uxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jxt=zxt,Wxt=Vxt,Hxt=Gxt,_T;jxt()?_T=Wxt:_T=Hxt;var Xxt=_T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yxt=Pxt,qxt=Xxt,Zxt={uint16:qxt,uint8:Yxt},Kxt=Zxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YI=Kxt,tU;function Jxt(){var e,t;return e=new YI.uint16(1),e[0]=4660,t=new YI.uint8(e.buffer),t[0]===52}tU=Jxt();var Qxt=tU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tLt=Qxt,Mf=tLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eLt=Mf,bT;eLt===!0?bT=1:bT=0;var rLt=bT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nLt=Af,iLt=Cf,oLt=rLt,eU=new iLt(1),aLt=new nLt(eU.buffer);function sLt(e){return eU[0]=e,aLt[oLt]}var lLt=sLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uLt=lLt,ii=uLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cLt=Mf,wT;cLt===!0?wT=1:wT=0;var fLt=wT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hLt=Af,dLt=Cf,pLt=fLt,ST=new dLt(1),vLt=new hLt(ST.buffer);function gLt(e,t){return ST[0]=e,vLt[pLt]=t>>>0,ST[0]}var mLt=gLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yLt=mLt,K0=yLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Lt=1023,_u=_Lt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bLt=.34657359027997264,wLt=bLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SLt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var TLt=SLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var PLt=Zt,Nb=ii,Fv=K0,qI=Ne,ELt=Tr,ALt=_u,CLt=wLt,MLt=TLt,kLt=709.782712893384,Fb=.6931471803691238,Bb=19082149292705877e-26,ZI=1.4426950408889634,xLt=38.816242111356935,LLt=1.0397207708399179;function ILt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===qI||PLt(e))return e;if(e===ELt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=xLt){if(r)return-1;if(s>=kLt)return qI}if(o=Nb(s)|0,s>CLt)s<LLt?r?(n=e+Fb,i=-Bb,h=-1):(n=e-Fb,i=Bb,h=1):(r?h=ZI*e-.5:h=ZI*e+.5,h|=0,c=h,n=e-c*Fb,i=c*Bb),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*MLt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=Nb(s)+(h<<20)|0,s=Fv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Fv(c,n),s=c-(f-e)):(n=ALt-h<<20|0,c=Fv(c,n),s=e-(f+c),s+=1),n=Nb(s)+(h<<20)|0,Fv(s,n)))}var OLt=ILt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RLt=OLt,kf=RLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DLt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var NLt=DLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var FLt=Zt,KI=ii,JI=K0,BLt=Ne,zLt=Tr,QI=_u,$Lt=NLt,zb=.6931471803691238,$b=19082149292705877e-26,VLt=.41421356237309503,ULt=-.2928932188134525,GLt=1862645149230957e-24,jLt=5551115123125783e-32,WLt=9007199254740992,HLt=.6666666666666666;function XLt(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||FLt(e))return NaN;if(e===-1)return zLt;if(e===BLt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<VLt){if(n<GLt)return n<jLt?e:e-e*e*.5;e>ULt&&(c=0,i=e,r=1)}return c!==0&&(n<WLt?(u=1+e,r=KI(u),c=(r>>20)-QI,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=KI(u),c=(r>>20)-QI,o=0),r&=1048575,r<434334?u=JI(u,r|1072693248):(c+=1,u=JI(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*$b,c*zb+o):(l=t*(1-HLt*i),c*zb-(l-(c*$b+o)-i)):(a=i/(2+i),s=a*a,l=s*$Lt(s),c===0?i-(t-a*(t+l)):c*zb-(t-(a*(t+l)+(c*$b+o))-i))}var YLt=XLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qLt=YLt,xn=qLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=Math.sqrt,KLt=ZLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JLt=KLt,tr=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QLt=.7853981633974483,rU=QLt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tIt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var eIt=tIt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rIt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var nIt=rIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var iIt=Zt,oIt=tr,tO=rU,aIt=eIt,sIt=nIt,lIt=6123233995736766e-32;function uIt(e){var t,r,n,i,o;if(iIt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*sIt(r),r=oIt(r+r),o=tO-r,r=r*i-lIt,o-=r,o+=tO;else{if(n<1e-8)return e;r=n*n,o=r*aIt(r),o=n*o+n}return t?-o:o}var cIt=uIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fIt=cIt,GA=fIt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hIt(e){return Math.abs(e)}var dIt=hIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pIt=dIt,he=pIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vIt=Math.ceil,gIt=vIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mIt=gIt,nU=mIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yIt=kn,_It=nU;function bIt(e){return e<0?_It(e):yIt(e)}var wIt=bIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SIt=wIt,jA=SIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TIt=1023,PIt=TIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EIt=-1023,AIt=EIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CIt=-1074,MIt=CIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kIt=Ne,xIt=Tr;function LIt(e){return e===kIt||e===xIt}var IIt=LIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OIt=IIt,xf=OIt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RIt=2147483648>>>0,DIt=RIt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NIt=2147483647>>>0,Ny=NIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FIt=Mf,iU,TT,PT;FIt===!0?(TT=1,PT=0):(TT=0,PT=1);iU={HIGH:TT,LOW:PT};var BIt=iU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zIt=Af,$It=Cf,oU=BIt,aU=new $It(1),eO=new zIt(aU.buffer),VIt=oU.HIGH,UIt=oU.LOW;function GIt(e,t,r,n){return aU[0]=e,t[n]=eO[VIt],t[n+r]=eO[UIt],t}var sU=GIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jIt=sU;function WIt(e){return jIt(e,[0>>>0,0>>>0],1,0)}var HIt=WIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XIt=dr,lU=HIt,YIt=sU;XIt(lU,"assign",YIt);var WA=lU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qIt=Mf,uU,ET,AT;qIt===!0?(ET=1,AT=0):(ET=0,AT=1);uU={HIGH:ET,LOW:AT};var ZIt=uU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KIt=Af,JIt=Cf,cU=ZIt,fU=new JIt(1),rO=new KIt(fU.buffer),QIt=cU.HIGH,tOt=cU.LOW;function eOt(e,t){return rO[QIt]=e,rO[tOt]=t,fU[0]}var rOt=eOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nOt=rOt,HA=nOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=DIt,oOt=Ny,aOt=WA,sOt=ii,lOt=HA,Vb=[0,0];function uOt(e,t){var r,n;return aOt.assign(e,Vb,1,0),r=Vb[0],r&=oOt,n=sOt(t),n&=iOt,r|=n,lOt(r,Vb[1])}var cOt=uOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fOt=cOt,XA=fOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hOt=22250738585072014e-324,bu=hOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dOt=bu,pOt=xf,vOt=Zt,gOt=he,mOt=4503599627370496;function yOt(e,t,r,n){return vOt(e)||pOt(e)?(t[n]=e,t[n+r]=0,t):e!==0&&gOt(e)<dOt?(t[n]=e*mOt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var hU=yOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Ot=hU;function bOt(e){return _Ot(e,[0,0],1,0)}var wOt=bOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SOt=dr,dU=wOt,TOt=hU;SOt(dU,"assign",TOt);var POt=dU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EOt=2146435072,AOt=EOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var COt=ii,MOt=AOt,kOt=_u;function xOt(e){var t=COt(e);return t=(t&MOt)>>>20,t-kOt|0}var LOt=xOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IOt=LOt,OOt=IOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ROt=Ne,DOt=Tr,NOt=_u,FOt=PIt,BOt=AIt,zOt=MIt,$Ot=Zt,VOt=xf,UOt=XA,GOt=POt.assign,jOt=OOt,WOt=WA,HOt=HA,XOt=2220446049250313e-31,YOt=2148532223>>>0,Ub=[0,0],Gb=[0,0];function qOt(e,t){var r,n;return t===0||e===0||$Ot(e)||VOt(e)?e:(GOt(e,Ub,1,0),e=Ub[0],t+=Ub[1],t+=jOt(e),t<zOt?UOt(0,e):t>FOt?e<0?DOt:ROt:(t<=BOt?(t+=52,n=XOt):n=1,WOt.assign(e,Gb,1,0),r=Gb[0],r&=YOt,r|=t+NOt<<20,n*HOt(r,Gb[1])))}var ZOt=qOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KOt=ZOt,Lf=KOt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JOt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var QOt=JOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var tRt=Lf,eRt=QOt;function rRt(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*eRt(i),a=1-(t-n*o/(2-o)-e),tRt(a,r)}var nRt=rRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var iRt=Zt,nO=jA,oRt=Tr,iO=Ne,aRt=nRt,sRt=.6931471803691238,lRt=19082149292705877e-26,oO=1.4426950408889634,uRt=709.782712893384,cRt=-745.1332191019411,pU=1/(1<<28),fRt=-pU;function hRt(e){var t,r,n;return iRt(e)||e===iO?e:e===oRt?0:e>uRt?iO:e<cRt?0:e>fRt&&e<pU?1+e:(e<0?n=nO(oO*e-.5):n=nO(oO*e+.5),t=e-n*sRt,r=n*lRt,aRt(t,r,n))}var dRt=hRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pRt=dRt,Ve=pRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vRt=Is;function gRt(e){return vRt(e/2)}var mRt=gRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yRt=mRt,_Rt=yRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aO=_Rt;function bRt(e){return e>0?aO(e-1):aO(e+1)}var wRt=bRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SRt=wRt,YA=SRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TRt=Mf,CT;TRt===!0?CT=0:CT=1;var PRt=CT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ERt=Af,ARt=Cf,CRt=PRt,MT=new ARt(1),MRt=new ERt(MT.buffer);function kRt(e,t){return MT[0]=e,MRt[CRt]=t>>>0,MT[0]}var xRt=kRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LRt=xRt,J0=LRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IRt(e){return e|0}var ORt=IRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RRt=ORt,vU=RRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var sO=YA,DRt=XA,NRt=Tr,Bv=Ne;function FRt(e,t){return t===NRt?Bv:t===Bv?0:t>0?sO(t)?e:0:sO(t)?DRt(Bv,e):Bv}var BRt=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zRt=Ny,$Rt=ii,VRt=1072693247,zv=1e300,$v=1e-300;function URt(e,t){var r,n;return n=$Rt(e),r=n&zRt,r<=VRt?t<0?zv*zv:$v*$v:t>0?zv*zv:$v*$v}var GRt=URt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jRt=he,lO=Ne;function WRt(e,t){return e===-1?(e-e)/(e-e):e===1?1:jRt(e)<1==(t===lO)?0:lO}var HRt=WRt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XRt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var YRt=XRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qRt=ii,Vv=J0,uO=K0,ZRt=_u,KRt=YRt,JRt=1048575,cO=1048576,QRt=1072693248,tDt=536870912,eDt=524288,rDt=20,nDt=9007199254740992,iDt=.9617966939259756,oDt=.9617967009544373,aDt=-7028461650952758e-24,sDt=[1,1.5],lDt=[0,.5849624872207642],uDt=[0,1350039202129749e-23];function cDt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C;return S=0,r<cO&&(t*=nDt,S-=53,r=qRt(t)),S+=(r>>rDt)-ZRt|0,P=r&JRt|0,r=P|QRt|0,P<=235662?C=0:P<767610?C=1:(C=0,S+=1,r-=cO),t=uO(t,r),c=sDt[C],w=t-c,T=1/(t+c),i=w*T,a=Vv(i,0),n=(r>>1|tDt)+eDt,n+=C<<18,l=uO(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,_=o*o*KRt(o),_+=s*(a+i),o=a*a,l=3+o+_,l=Vv(l,0),u=_-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=Vv(h,0),d=T-(h-w),p=oDt*h,v=aDt*h+d*iDt+uDt[C],f=lDt[C],y=S,g=p+v+f+y,g=Vv(g,0),m=v-(g-y-f-p),e[0]=g,e[1]=m,e}var fDt=cDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hDt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var dDt=hDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var pDt=J0,vDt=dDt,gDt=1.4426950408889634,mDt=1.4426950216293335,yDt=19259629911266175e-24;function _Dt(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*vDt(i),a=mDt*i,s=i*yDt-o*gDt,n=a+s,n=pDt(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var bDt=_Dt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wDt=.6931471805599453,SDt=wDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TDt=1048575,PDt=TDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EDt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var ADt=EDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var CDt=ii,fO=K0,MDt=J0,kDt=vU,xDt=Lf,LDt=SDt,hO=_u,dO=Ny,pO=PDt,IDt=ADt,vO=1048576,ODt=1071644672,Th=20,RDt=.6931471824645996,DDt=-1904654299957768e-24;function NDt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&dO|0,d=(h>>Th)-hO|0,f=0,h>ODt&&(f=e+(vO>>d+1)>>>0,d=((f&dO)>>Th)-hO|0,n=(f&~(pO>>d))>>>0,o=fO(0,n),f=(f&pO|vO)>>Th-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=MDt(o,0),s=o*RDt,l=(r-(o-t))*LDt+o*DDt,c=s+l,u=l-(c-s),o=c*c,i=c-o*IDt(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=CDt(c),e=kDt(e),e+=f<<Th>>>0,e>>Th<=0?c=xDt(c,f):c=fO(c,e),c}var FDt=NDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var gO=Zt,mO=YA,yO=xf,BDt=Is,_O=tr,zDt=he,jb=WA,$Dt=J0,bO=vU,VDt=Tr,UDt=Ne,Wb=Ny,GDt=BRt,jDt=GRt,WDt=HRt,HDt=fDt,XDt=bDt,YDt=FDt,qDt=1072693247,ZDt=1105199104,KDt=1139802112,wO=1083179008,JDt=1072693248,QDt=1083231232,t8t=3230714880>>>0,SO=31,Ga=1e300,ja=1e-300,e8t=8008566259537294e-32,Go=[0,0],TO=[0,0];function gU(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g,m;if(gO(e)||gO(t))return NaN;if(jb.assign(t,Go,1,0),s=Go[0],l=Go[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return _O(e);if(t===-.5)return 1/_O(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(yO(t))return WDt(e,t)}if(jb.assign(e,Go,1,0),o=Go[0],a=Go[1],a===0){if(o===0)return GDt(e,t);if(e===1)return 1;if(e===-1&&mO(t))return-1;if(yO(e))return e===VDt?gU(-0,-t):t<0?0:UDt}if(e<0&&BDt(t)===!1)return(e-e)/(e-e);if(i=zDt(e),r=o&Wb|0,n=s&Wb|0,u=o>>>SO|0,c=s>>>SO|0,u&&mO(t)?u=-1:u=1,n>ZDt){if(n>KDt)return jDt(e,t);if(r<qDt)return c===1?u*Ga*Ga:u*ja*ja;if(r>JDt)return c===0?u*Ga*Ga:u*ja*ja;p=XDt(TO,i)}else p=HDt(TO,i,r);if(f=$Dt(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,jb.assign(v,Go,1,0),g=bO(Go[0]),m=bO(Go[1]),g>=wO){if((g-wO|m)!==0||d+e8t>v-h)return u*Ga*Ga}else if((g&Wb)>=QDt&&((g-t8t|m)!==0||d<=v-h))return u*ja*ja;return v=YDt(g,h,d),u*v}var r8t=gU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n8t=r8t,er=n8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i8t=2.718281828459045,If=i8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o8t=2220446049250313e-31,Ea=o8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a8t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var s8t=a8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var PO=Zt,l8t=xn,u8t=tr,c8t=he,f8t=Ve,Hb=er,h8t=If,Xb=Ea,Yb=s8t,qb=10.900511;function d8t(e,t){var r,n,i,o,a,s,l;return PO(e)||PO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Xb?(a=l/e,a/=t,a):l===e&&t<Xb?1/t:l===t&&e<Xb?1/e:(e<t&&(s=t,t=e,e=s),n=e+qb-.5,i=t+qb-.5,o=l+qb-.5,a=Yb(e)*(Yb(t)/Yb(l)),r=e-.5-t,c8t(t*r)<o*100&&e>100?a*=f8t(r*l8t(-t/o)):a*=Hb(n/o,r),o>1e10?a*=Hb(n/o*(i/o),t):a*=Hb(n*i/(o*o),t),a*=u8t(h8t/i),a))}var p8t=d8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v8t=p8t,mU=v8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g8t=Ne;function m8t(e){return e===0&&1/e===g8t}var y8t=m8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _8t=y8t,b8t=_8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EO=b8t,Zb=Zt,w8t=Tr,Uv=Ne;function S8t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Zb(e)||Zb(t)?NaN:e===Uv||t===Uv?Uv:e===t&&e===0?EO(e)?e:t:e>t?e:t;for(n=w8t,o=0;o<r;o++){if(i=arguments[o],Zb(i)||i===Uv)return i;(i>n||i===n&&i===0&&EO(i))&&(n=i)}return n}var T8t=S8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P8t=T8t,wu=P8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E8t=Tr;function A8t(e){return e===0&&1/e===E8t}var C8t=A8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M8t=C8t,yU=M8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AO=yU,Kb=Zt,Gv=Tr,k8t=Ne;function x8t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Kb(e)||Kb(t)?NaN:e===Gv||t===Gv?Gv:e===t&&e===0?AO(e)?e:t:e<t?e:t;for(n=k8t,o=0;o<r;o++){if(i=arguments[o],Kb(i)||i===Gv)return i;(i<n||i===n&&i===0&&AO(i))&&(n=i)}return n}var L8t=x8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I8t=L8t,Rs=I8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O8t=17976931348623157e292,Of=O8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R8t=2147483647,D8t=R8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N8t=1.5707963267948966,qA=N8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F8t=3.141592653589793,Ds=F8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function B8t(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var z8t=B8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $8t(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var V8t=$8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var U8t=z8t,G8t=V8t;function j8t(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*U8t(o),n+=i*i*G8t(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var W8t=j8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H8t=W8t,_U=H8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var CO=-.16666666666666632,X8t=.00833333333332249,Y8t=-.0001984126982985795,q8t=27557313707070068e-22,Z8t=-25050760253406863e-24,K8t=158969099521155e-24;function J8t(e,t){var r,n,i,o;return o=e*e,i=o*o,r=X8t+o*(Y8t+o*q8t)+o*i*(Z8t+o*K8t),n=o*e,t===0?e+n*(CO+o*r):e-(o*(.5*t-n*r)-t-n*CO)}var Q8t=J8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t9t=Q8t,bU=t9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e9t=Mf,kT;e9t===!0?kT=0:kT=1;var r9t=kT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n9t=Af,i9t=Cf,o9t=r9t,wU=new i9t(1),a9t=new n9t(wU.buffer);function s9t(e){return wU[0]=e,a9t[o9t]}var l9t=s9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u9t=l9t,c9t=u9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f9t(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var h9t=f9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d9t=h9t,p9t=d9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v9t=p9t;function g9t(e){return v9t(0,e)}var m9t=g9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y9t=m9t,_9t=y9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var b9t=kn,jv=Lf,Fy=_9t,SU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],w9t=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Jb=16777216,Qb=5960464477539063e-23,Wv=Fy(20),MO=Fy(20),Hv=Fy(20),gr=Fy(20);function TU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,g,m;for(h=o,m=n[r],g=r,d=0;g>0;d++)c=Qb*m|0,gr[d]=m-Jb*c|0,m=n[g-1]+c,g-=1;if(m=jv(m,i),m-=8*b9t(m*.125),v=m|0,m-=v,f=0,i>0?(d=gr[r-1]>>24-i,v+=d,gr[r-1]-=d<<24-i,f=gr[r-1]>>23-i):i===0?f=gr[r-1]>>23:m>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)g=gr[d],u===0?g!==0&&(u=1,gr[d]=16777216-g):gr[d]=16777215-g;if(i>0)switch(i){case 1:gr[r-1]&=8388607;break;case 2:gr[r-1]&=4194303;break}f===2&&(m=1-m,u!==0&&(m-=jv(1,i)))}if(m===0){for(g=0,d=r-1;d>=o;d--)g|=gr[d];if(g===0){for(p=1;gr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=SU[a+d],c=0,g=0;g<=s;g++)c+=e[g]*l[s+(d-g)];n[d]=c}return r+=p,TU(e,t,r,n,i,o,a,s,l)}}if(m===0)for(r-=1,i-=24;gr[r]===0;)r-=1,i-=24;else m=jv(m,-i),m>=Jb?(c=Qb*m|0,gr[r]=m-Jb*c|0,r+=1,i+=24,gr[r]=c):gr[r]=m|0;for(c=jv(1,i),d=r;d>=0;d--)n[d]=c*gr[d],c*=Qb;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=w9t[p]*n[d+p];Hv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=Hv[d];for(f===0?t[0]=c:t[0]=-c,c=Hv[0]-c,d=1;d<=r;d++)c+=Hv[d];return f===0?t[1]=c:t[1]=-c,v&7}function S9t(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?Wv[c]=0:Wv[c]=SU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*Wv[s+(c-f)];MO[c]=i}return l=o,TU(e,t,l,MO,u,o,a,s,Wv)}var T9t=S9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P9t=Math.round,E9t=P9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A9t=E9t,By=A9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var C9t=By,kO=ii,M9t=.6366197723675814,k9t=1.5707963267341256,x9t=6077100506506192e-26,L9t=6077100506303966e-26,I9t=20222662487959506e-37,O9t=20222662487111665e-37,R9t=84784276603689e-45,xO=2047;function D9t(e,t,r){var n,i,o,a,s,l,u;return i=C9t(e*M9t),a=e-i*k9t,s=i*x9t,u=t>>20|0,r[0]=a-s,n=kO(r[0]),l=u-(n>>20&xO),l>16&&(o=a,s=i*L9t,a=o-s,s=i*I9t-(o-a-s),r[0]=a-s,n=kO(r[0]),l=u-(n>>20&xO),l>49&&(o=a,s=i*O9t,a=o-s,s=i*R9t-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var N9t=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var F9t=ii,B9t=c9t,z9t=HA,$9t=T9t,Xv=N9t,V9t=0,U9t=16777216,Wa=1.5707963267341256,Ll=6077100506506192e-26,Yv=2*Ll,qv=3*Ll,Zv=4*Ll,G9t=2147483647,j9t=2146435072,W9t=1048575,H9t=598523,X9t=1072243195,Y9t=1073928572,q9t=1074752122,Z9t=1074977148,K9t=1075183036,J9t=1075388923,Q9t=1075594811,t7t=1094263291,Ph=[0,0,0],Eh=[0,0];function e7t(e,t){var r,n,i,o,a,s,l,u;if(i=F9t(e),o=i&G9t|0,o<=X9t)return t[0]=e,t[1]=0,0;if(o<=q9t)return(o&W9t)===H9t?Xv(e,o,t):o<=Y9t?e>0?(u=e-Wa,t[0]=u-Ll,t[1]=u-t[0]-Ll,1):(u=e+Wa,t[0]=u+Ll,t[1]=u-t[0]+Ll,-1):e>0?(u=e-2*Wa,t[0]=u-Yv,t[1]=u-t[0]-Yv,2):(u=e+2*Wa,t[0]=u+Yv,t[1]=u-t[0]+Yv,-2);if(o<=Q9t)return o<=K9t?o===Z9t?Xv(e,o,t):e>0?(u=e-3*Wa,t[0]=u-qv,t[1]=u-t[0]-qv,3):(u=e+3*Wa,t[0]=u+qv,t[1]=u-t[0]+qv,-3):o===J9t?Xv(e,o,t):e>0?(u=e-4*Wa,t[0]=u-Zv,t[1]=u-t[0]-Zv,4):(u=e+4*Wa,t[0]=u+Zv,t[1]=u-t[0]+Zv,-4);if(o<t7t)return Xv(e,o,t);if(o>=j9t)return t[0]=NaN,t[1]=NaN,0;for(r=B9t(e),n=(o>>20)-1046,u=z9t(o-(n<<20|0),r),s=0;s<2;s++)Ph[s]=u|0,u=(u-Ph[s])*U9t;for(Ph[2]=u,a=3;Ph[a-1]===V9t;)a-=1;return l=$9t(Ph,Eh,n,a),e<0?(t[0]=-Eh[0],t[1]=-Eh[1],-l):(t[0]=Eh[0],t[1]=Eh[1],l)}var r7t=e7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n7t=r7t,PU=n7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var i7t=ii,LO=_U,tw=bU,o7t=PU,a7t=2147483647,s7t=2146435072,l7t=1072243195,u7t=1045430272,jo=[0,0];function c7t(e){var t,r;if(t=i7t(e),t&=a7t,t<=l7t)return t<u7t?e:tw(e,0);if(t>=s7t)return NaN;switch(r=o7t(e,jo),r&3){case 0:return tw(jo[0],jo[1]);case 1:return LO(jo[0],jo[1]);case 2:return-tw(jo[0],jo[1]);default:return-LO(jo[0],jo[1])}}var f7t=c7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h7t=f7t,Q0=h7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d7t=2.5066282746310007,zy=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function p7t(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var v7t=p7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var g7t=zy,IO=er,m7t=Ve,y7t=v7t,_7t=143.01608;function b7t(e){var t,r,n;return t=1/e,t=1+t*y7t(t),r=m7t(e),e>_7t?(n=IO(e,.5*e-.25),r=n*(n/r)):r=IO(e,e-.5)/r,g7t*r*t}var w7t=b7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S7t=.5772156649015329,T7t=S7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var P7t=T7t;function E7t(e,t){return t/((1+P7t*e)*e)}var A7t=E7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function C7t(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var M7t=C7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var k7t=Zt,x7t=Is,L7t=yU,OO=he,I7t=kn,O7t=Q0,RO=Ne,DO=Tr,NO=Ds,FO=w7t,BO=A7t,R7t=M7t;function D7t(e){var t,r,n,i;if(x7t(e)&&e<0||e===DO||k7t(e))return NaN;if(e===0)return L7t(e)?DO:RO;if(e>171.61447887182297)return RO;if(e<-170.5674972726612)return 0;if(r=OO(e),r>33)return e>=0?FO(e):(n=I7t(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*O7t(NO*i),t*NO/(OO(i)*FO(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return BO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return BO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*R7t(e))}var N7t=D7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F7t=N7t,Lo=F7t;const B7t=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7t=Zt,$7t=Is,V7t=Lo,U7t=Ne,G7t=B7t,j7t=170;function W7t(e){return z7t(e)?NaN:$7t(e)?e<0?NaN:e<=j7t?G7t[e]:U7t:V7t(e+1)}var H7t=W7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X7t=H7t,EU=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y7t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var q7t=Y7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Z7t=q7t,K7t=Z7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J7t=K7t,Q7t=J7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tNt=10.900511,tp=tNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var zO=Q7t,eNt=Lo,$O=xn,VO=he,UO=Ve,GO=er,rNt=Ea,nNt=If,iNt=tp,jO=170,oNt=4269068009004705e289;function AU(e,t){var r,n,i;return e<rNt?t>jO?(n=AU(t,jO-t),n*=e,n*=oNt,1/n):1/(e*eNt(e+t)):(i=e+iNt-.5,e+t===e?VO(t)<10?r=UO((.5-e)*$O(t/i)):r=1:(VO(t)<10?r=UO((.5-e)*$O(t/i)):r=GO(i/(i+t),e-.5),r*=zO(e)/zO(e+t)),r*=GO(nNt/(i+t),t),r)}var aNt=AU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sNt=he,WO=kn,HO=Lo,XO=EU,lNt=aNt,YO=170;function uNt(e,t){var r,n,i;if(e<=0||e+t<=0)return HO(e)/HO(e+t);if(n=WO(t),n===t){if(i=WO(e),i===e&&e<=YO&&e+t<=YO)return XO(i-1)/XO(n+i-1);if(sNt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return lNt(e,t)}var cNt=uNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fNt=cNt,ZA=fNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hNt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var dNt=hNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pNt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var vNt=pNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qO=ii,gNt=K0,mNt=Zt,yNt=_u,_Nt=Tr,bNt=dNt,wNt=vNt,Kv=.6931471803691238,Jv=19082149292705877e-26,SNt=0x40000000000000,TNt=.3333333333333333,ZO=1048575,PNt=2146435072,ENt=1048576,ANt=1072693248;function CNt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?_Nt:mNt(e)||e<0?NaN:(r=qO(e),o=0,r<ENt&&(o-=54,e*=SNt,r=qO(e)),r>=PNt?e+e:(o+=(r>>20)-yNt|0,r&=ZO,l=r+614244&1048576|0,e=gNt(e,r|l^ANt),o+=l>>20|0,s=e-1,(ZO&2+r)<3?s===0?o===0?0:o*Kv+o*Jv:(a=s*s*(.5-TNt*s),o===0?s-a:o*Kv-(a-o*Jv-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*bNt(f),n=h*wNt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*Kv-(t-(c*(t+a)+o*Jv)-s)):o===0?s-c*(s-a):o*Kv-(c*(s-a)-o*Jv-s))))}var MNt=CNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kNt=MNt,Se=kNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xNt=ii,ew=_U,KO=bU,LNt=PU,Wo=[0,0],INt=2147483647,ONt=1072243195,RNt=1044381696,DNt=2146435072;function NNt(e){var t,r;if(t=xNt(e),t&=INt,t<=ONt)return t<RNt?1:ew(e,0);if(t>=DNt)return NaN;switch(r=LNt(e,Wo),r&3){case 0:return ew(Wo[0],Wo[1]);case 1:return-KO(Wo[0],Wo[1]);case 2:return-ew(Wo[0],Wo[1]);default:return KO(Wo[0],Wo[1])}}var FNt=NNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BNt=FNt,KA=BNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zNt=Zt,$Nt=xf,JO=KA,rw=Q0,VNt=he,Ah=XA,Ch=Ds;function UNt(e){var t,r;return zNt(e)?NaN:$Nt(e)?NaN:(r=e%2,t=VNt(r),t===0||t===1?Ah(0,r):t<.25?rw(Ch*r):t<.75?(t=.5-t,Ah(JO(Ch*t),r)):t<1.25?(r=Ah(1,r)-r,rw(Ch*r)):t<1.75?(t-=1.5,-Ah(JO(Ch*t),r)):(r-=Ah(2,r),rw(Ch*r)))}var GNt=UNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jNt=GNt,WNt=jNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HNt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var XNt=HNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YNt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var qNt=YNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZNt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var KNt=ZNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JNt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var QNt=JNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tFt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var eFt=tFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rFt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var nFt=rFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iFt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var oFt=iFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aFt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var sFt=aFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lFt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var uFt=lFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cFt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var fFt=cFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var hFt=Zt,dFt=xf,pFt=he,Zu=Se,vFt=jA,gFt=WNt,mFt=Ds,nw=Ne,yFt=XNt,_Ft=qNt,bFt=KNt,wFt=QNt,SFt=eFt,TFt=nFt,PFt=oFt,EFt=sFt,AFt=uFt,CFt=fFt,MFt=.07721566490153287,kFt=.3224670334241136,xFt=1,LFt=-.07721566490153287,IFt=.48383612272381005,OFt=-.1475877229945939,RFt=.06462494023913339,DFt=-.07721566490153287,NFt=1,FFt=.4189385332046727,Qv=1.4616321449683622,BFt=4503599627370496,zFt=0x400000000000000,$Ft=8470329472543003e-37,QO=1.4616321449683622,VFt=-.12148629053584961,UFt=-3638676997039505e-33;function GFt(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(hFt(e)||dFt(e))return e;if(e===0)return nw;if(e<0?(t=!0,e=-e):t=!1,e<$Ft)return-Zu(e);if(t){if(e>=BFt||(u=gFt(e),u===0))return nw;r=Zu(mFt/pFt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-Zu(e),e>=Qv-1+.27?(f=1-e,n=0):e>=Qv-1-.27?(f=e-(QO-1),n=1):(f=e,n=2)):(d=0,e>=Qv+.27?(f=2-e,n=0):e>=Qv-.27?(f=e-QO,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=MFt+h*yFt(h),o=h*(kFt+h*_Ft(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=IFt+c*SFt(c),o=OFt+c*TFt(c),i=RFt+c*PFt(c),s=h*a-(UFt-c*(o+f*i)),d+=VFt+s;break;case 2:a=f*(DFt+f*EFt(f)),o=NFt+f*AFt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=vFt(e),f=e-n,s=f*(LFt+f*wFt(f)),l=xFt+f*bFt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=Zu(h)}else e<zFt?(u=Zu(e),h=1/e,f=h*h,c=FFt+h*CFt(f),d=(e-.5)*(u-1)+c):d=e*(Zu(e)-1);return t&&(d=r-d),d}var jFt=GFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WFt=jFt,Rf=WFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HFt=14901161193847656e-24,XFt=HFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YFt=709.782712893384,Su=YFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qFt=Ve;function ZFt(e,t){var r,n,i,o;if(i=qFt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var KFt=ZFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JFt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var QFt=JFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tBt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var eBt=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rBt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var nBt=rBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iBt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var oBt=iBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aBt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var sBt=aBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lBt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var uBt=lBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cBt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var fBt=cBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hBt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var pBt=Zt,tR=Ve,vBt=J0,gBt=Ne,mBt=Tr,yBt=QFt,_Bt=eBt,bBt=nBt,wBt=oBt,SBt=sBt,TBt=uBt,PBt=fBt,EBt=dBt,tg=1e-300,ABt=13877787807814457e-33,eR=.8450629115104675,CBt=.12837916709551256,MBt=1,kBt=-.0023621185607526594,xBt=1,LBt=-.009864944034847148,IBt=1,OBt=-.0098649429247001,RBt=1;function DBt(e){var t,r,n,i,o,a,s,l;if(pBt(e))return NaN;if(e===gBt)return 0;if(e===mBt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<ABt?1-e:(n=e*e,i=CBt+n*yBt(n),o=MBt+n*_Bt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=kBt+o*bBt(o),l=xBt+o*wBt(o),t?1+eR+s/l:1-eR-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=LBt+o*SBt(o),o=IBt+o*TBt(o);else{if(e<-6)return 2-tg;i=OBt+o*PBt(o),o=RBt+o*EBt(o)}return n=vBt(r,0),i=tR(-(n*n)-.5625)*tR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-tg:tg*tg}var NBt=DBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FBt=NBt,CU=FBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BBt=CU,rR=tr,zBt=Ve,$Bt=Ds;function VBt(e,t){var r,n,i,o,a;if(o=BBt(rR(t)),o!==0&&e>1){for(n=zBt(-t)/rR($Bt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var UBt=VBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GBt=-708.3964185322641,Df=GBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ku=Ve,eg=er,jBt=Se,nR=Su,iR=Df;function WBt(e,t){var r,n;return n=e*jBt(t),t>=1?n<nR&&-t>iR?r=eg(t,e)*Ku(-t):e>=1?r=eg(t/Ku(t/e),e):r=Ku(n-t):n>iR?r=eg(t,e)*Ku(-t):t/e<nR?r=eg(t/Ku(t/e),e):r=Ku(n-t),r}var HBt=WBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XBt=6.283185307179586,MU=XBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YBt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var qBt=YBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZBt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var KBt=ZBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JBt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var QBt=JBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tzt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var ezt=tzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rzt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var nzt=rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function izt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var ozt=izt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function azt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var szt=azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lzt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var uzt=lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function czt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var fzt=czt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hzt=Os,dzt=CU,iw=tr,pzt=Ve,vzt=Se,gzt=MU,mzt=qBt,yzt=KBt,_zt=QBt,bzt=ezt,wzt=nzt,Szt=ozt,Tzt=szt,Pzt=uzt,Ezt=fzt,li=[0,0,0,0,0,0,0,0,0,0];function Azt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-vzt(1+n)+n,o=e*i,a=iw(2*i),t<e&&(a=-a),li[0]=mzt(a),li[1]=yzt(a),li[2]=_zt(a),li[3]=bzt(a),li[4]=wzt(a),li[5]=Szt(a),li[6]=Tzt(a),li[7]=Pzt(a),li[8]=Ezt(a),li[9]=-.0005967612901927463,r=hzt(li,1/e),r*=pzt(-o)/iw(gzt*e),t<e&&(r=-r),r+=dzt(iw(o))/2,r}var Czt=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mzt=eval,kzt=Mzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xzt=kzt;function Lzt(){var e;try{xzt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var Izt=Lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ozt=Izt,kU=Ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rg=he,Rzt=Ea,Dzt=1e6;function Nzt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||Rzt,o=s.maxTerms||Dzt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,rg(n*a)>=rg(i)||--o===0)break}else do i=e(),a+=i;while(rg(n*a)<rg(i)&&--o);return a}var Fzt=Nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oR=he,Bzt=Ea,zzt=1e6;function $zt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||Bzt,i=a.maxTerms||zzt,o=a.initialValue||0;do n=e(),o+=n;while(oR(r*o)<oR(n)&&--i);return o}var Vzt=$zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uzt=kU,Gzt=Fzt,jzt=Vzt,xT;Uzt()?xT=Gzt:xT=jzt;var JA=xT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Wzt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var Hzt=Wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Xzt=JA,Yzt=Hzt;function qzt(e,t,r){var n,i;return r=r||0,i=Yzt(e,t),n=Xzt(i,{initialValue:r}),n}var Zzt=qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kzt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var Jzt=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qzt=Jzt,t$t=Qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e$t=t$t,$y=e$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var r$t=$y,n$t=Rf,i$t=Lo,o$t=xn,a$t=tr,s$t=he,Ha=Ve,Mh=er,ow=wu,aw=Rs,aR=Se,ng=Su,kh=Df,sw=tp,l$t=If;function u$t(e,t){var r,n,i,o,a,s,l;return i=e+sw-.5,l=(t-e-sw+.5)/i,e<1?t<=kh?Ha(e*aR(t)-t-n$t(e)):Mh(t,e)*Ha(-t)/i$t(e):(s$t(l*l*e)<=100&&e>150?(r=e*(o$t(l)-l)+t*(.5-sw)/i,r=Ha(r)):(o=e*aR(t/i),a=e-t,aw(o,a)<=kh||ow(o,a)>=ng?(n=a/e,aw(o,a)/2>kh&&ow(o,a)/2<ng?(s=Mh(t/i,e/2)*Ha(a/2),r=s*s):aw(o,a)/4>kh&&ow(o,a)/4<ng&&t>e?(s=Mh(t/i,e/4)*Ha(a/4),r=s*s,r*=r):n>kh&&n<ng?r=Mh(t*Ha(n)/i,e):r=Ha(o+a)):r=Mh(t/i,e)*Ha(a)),r*=a$t(i/l$t)/r$t(e),r)}var c$t=u$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sR=Zt,lR=he,f$t=kf,h$t=Se,d$t=er,p$t=jA;function v$t(e,t){var r;if(sR(e)||sR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((lR(t*(e-1))<.5||lR(t)<.2)&&(r=h$t(e)*t,r<.5))return f$t(r)}else if(p$t(t)!==t)return NaN;return d$t(e,t)-1}var g$t=v$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m$t=g$t,y$t=m$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _$t(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var b$t=_$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w$t(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var S$t=w$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T$t(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var P$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lw=Se,E$t=Ea,A$t=b$t,C$t=S$t,M$t=P$t,k$t=.15896368026733398,x$t=.5281534194946289,L$t=.45201730728149414;function I$t(e,t,r){var n,i,o,a;if(e<E$t)return-lw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=lw(e);while(e>=3);r=e-2}return o=r*(e+1),a=A$t(r),i+=o*k$t+o*a,i}return e<1&&(i+=-lw(e),r=t,t=e,e+=1),e<=1.5?(o=C$t(t),n=t*r,i+=n*x$t+n*o,i):(o=r*t,a=M$t(-r),i+=o*L$t+o*a,i)}var O$t=I$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uR=Lo,cR=kf,R$t=xn,D$t=Zt,fR=O$t;function N$t(e){return D$t(e)?NaN:e<0?e<-.5?uR(1+e)-1:cR(-R$t(e)+fR(e+2,e+1,e)):e<2?cR(fR(e+1,e,e-1)):uR(1+e)-1}var F$t=N$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B$t=F$t,z$t=B$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function $$t(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var V$t=$$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var U$t=y$t,G$t=JA,j$t=z$t,W$t=V$t;function H$t(e,t,r){var n,i,o,a,s;return i=j$t(e),o=(i+1)/e,a=U$t(t,e),i-=a,i/=e,s=W$t(e,t),a+=1,n=r?o:0,i=-a*G$t(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var X$t=H$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y$t=11754943508222875e-54,Vy=Y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v1=he,ho=Vy,q$t=Ea,Z$t=1e6;function K$t(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=ho),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=ho),s=u[1]+u[0]/s,s===0&&(s=ho),l=1/l,i=s*l,a*=i);while(v1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=ho),s=u[1]+u[0]/s,s===0&&(s=ho),l=1/l,i=s*l,a*=i);while(u&&v1(i-1)>t&&--r);return o/a}function J$t(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=ho),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=ho),a=l[1]+l[0]/a,a===0&&(a=ho),s=1/s,i=a*s,o*=i);while(l&&v1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=ho),a=l[1]+l[0]/a,a===0&&(a=ho),s=1/s,i=a*s,o*=i);while(l&&v1(i-1)>t&&--r);return o}function Q$t(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||Z$t,i=n.tolerance||q$t,n.keep?J$t(e,i,r):K$t(e,i,r)}var tVt=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xU=he,eVt=Ea,Fc=Vy,rVt=1e6;function nVt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=Fc),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Fc),o=l[1]+l[0]/o,o===0&&(o=Fc),a=1/a,n=o*a,s*=n);while(l&&xU(n-1)>t&&--r);return i/s}function iVt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=Fc),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=Fc),i=s[1]+s[0]/i,i===0&&(i=Fc),o=1/o,n=i*o,a*=n);while(s&&xU(n-1)>t&&--r);return a}function oVt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||eVt,r=n.maxIter||rVt,n.keep?iVt(e,i,r):nVt(e,i,r)}var aVt=oVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sVt=kU,lVt=tVt,uVt=aVt,LT;sVt()?LT=lVt:LT=uVt;var LU=LT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function cVt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var fVt=cVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hVt=LU,dVt=fVt;function pVt(e,t){var r=dVt(e,t);return 1/(t-e+1+hVt(r))}var vVt=pVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gVt=Rf,mVt=kn,xh=Lo,hR=he,yVt=Ve,dR=er,ui=Se,_Vt=XFt,pR=Of,bVt=zy,vR=Su,wVt=Ne,SVt=KFt,TVt=UBt,gR=HBt,PVt=Czt,uw=Zzt,mR=c$t,EVt=X$t,yR=vVt,AVt=170;function IU(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=AVt&&!o)return f&&t*4<e?(h=t*ui(e)-e,h+=ui(yR(t,e))):!f&&t>4*e?(h=t*ui(e)-e,s=0,h+=ui(uw(t,e,s)/t)):(h=IU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=ui(h)-t+(t-.5)*ui(t),h+=ui(bVt)):(h=t*ui(e)-e,s=0,h+=ui(uw(t,e,s)/t)):h=ui(h)+gVt(t)),h>vR?wVt:yVt(h);switch(c=t<30&&t<=e+1&&e<vR,c?(m=mVt(t),d=m===t,l=d?!1:hR(m-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<_Vt&&t>1?a=6:e<.5?-.4/ui(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=hR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=SVt(t,e),o===!1&&(h*=xh(t));break;case 1:h=TVt(t,e),o===!1&&(h*=xh(t));break;case 2:h=o?mR(t,e):gR(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:xh(t),o||h>=1||pR*h>s?(s/=h,o||t<1||pR/t>s?(s*=-t,i=!0):s=0):s=0)),h*=uw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,g=EVt(t,e,f),h=g[0],y=g[1],f=!1,o&&(h/=y);break;case 4:h=o?mR(t,e):gR(t,e),h!==0&&(h*=yR(t,e));break;case 5:h=PVt(t,e),e>=t&&(f=!f);break;case 6:h=o?dR(e,t)/xh(t+1):dR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:xh(t),h=v-h),h}var CVt=IU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MVt=CVt,OU=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ju=Ve,ig=er,kVt=Se,_R=Su,bR=Df;function xVt(e,t){var r,n;return n=e*kVt(t),t>=1?n<_R&&-t>bR?r=ig(t,e)*Ju(-t):e>=1?r=ig(t/Ju(t/e),e):r=Ju(n-t):n>bR?r=ig(t,e)*Ju(-t):t/e<_R?r=ig(t/Ju(t/e),e):r=Ju(n-t),r}var LVt=xVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IVt=$y,OVt=Rf,RVt=Lo,DVt=xn,NVt=tr,FVt=he,Xa=Ve,Lh=er,cw=wu,fw=Rs,wR=Se,og=Su,Ih=Df,hw=tp,BVt=If;function zVt(e,t){var r,n,i,o,a,s,l;return i=e+hw-.5,l=(t-e-hw+.5)/i,e<1?t<=Ih?Xa(e*wR(t)-t-OVt(e)):Lh(t,e)*Xa(-t)/RVt(e):(FVt(l*l*e)<=100&&e>150?(r=e*(DVt(l)-l)+t*(.5-hw)/i,r=Xa(r)):(o=e*wR(t/i),a=e-t,fw(o,a)<=Ih||cw(o,a)>=og?(n=a/e,fw(o,a)/2>Ih&&cw(o,a)/2<og?(s=Lh(t/i,e/2)*Xa(a/2),r=s*s):fw(o,a)/4>Ih&&cw(o,a)/4<og&&t>e?(s=Lh(t/i,e/4)*Xa(a/4),r=s*s,r*=r):n>Ih&&n<og?r=Lh(t*Xa(n)/i,e):r=Xa(o+a)):r=Lh(t/i,e)*Xa(a)),r*=NVt(i/BVt)/IVt(e),r)}var $Vt=zVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VVt=ZA,SR=EU,UVt=OU,GVt=xn,ag=he,TR=er,jVt=Se,WVt=bu,PR=Ea,HVt=LVt,XVt=$Vt,Ya=new Array(30);function YVt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C;if(h=t-1,P=e+h/2,n<.35?g=GVt(-n):g=jVt(r),C=-P*g,y=XVt(t,C),y<=WVt)return i;for(a?(s=y/VVt(e,t),s/=TR(P,t)):s=HVt(t,C)/TR(P,t),s*=o,Ya[0]=1,_=UVt(C,t,!0,!0),_/=y,c=i+s*_,u=1,d=g/2,d*=d,p=1,m=4*P*P,f=t,T=1;T<Ya.length;++T){for(u+=2,Ya[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,Ya[T]+=v*Ya[T-w]/SR(l),l+=2;if(Ya[T]/=T,Ya[T]+=h/SR(u),_=(f*(f+1)*_+(C+f+1)*p)/m,p*=d,f+=2,S=s*Ya[T]*_,c+=S,S>1){if(ag(S)<ag(PR*c))break}else if(ag(S/PR)<ag(c))break}return c}var qVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function ZVt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var KVt=ZVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dw=he,ER=wu,JVt=Ne;function QVt(e,t){var r,n,i;if(r=arguments.length,r===0)return JVt;if(r===2)return ER(dw(e),dw(t));for(n=[],i=0;i<r;i++)n.push(dw(arguments[i]));return ER.apply(null,n)}var tUt=QVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eUt=tUt,rUt=eUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pw=he,AR=Rs,nUt=Ne;function iUt(e,t){var r,n,i;if(r=arguments.length,r===0)return nUt;if(r===2)return AR(pw(e),pw(t));for(n=[],i=0;i<r;i++)n.push(pw(arguments[i]));return AR.apply(null,n)}var oUt=iUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aUt=oUt,sUt=aUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vw=$y,lUt=rUt,uUt=sUt,CR=kf,qa=xn,MR=tr,sg=he,Qi=Ve,to=er,cUt=Rs,Fn=Se,eo=Su,Qu=Df,gw=tp,fUt=If;function hUt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(!i)return to(r,e)*to(n,t);if(m=e+t,l=e+gw-.5,u=t+gw-.5,c=m+gw-.5,o=vw(m),o/=vw(e)*vw(t),o*=MR(u/fUt),o*=MR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,uUt(f,h)<.2)if(f*h>0||cUt(e,t)<1)sg(f)<.1?o*=Qi(e*qa(f)):o*=to(r*c/l,e),sg(h)<.1?o*=Qi(t*qa(h)):o*=to(n*c/u,t);else if(lUt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=CR(s*qa(h)),d=f+d+d*f,d=e*qa(d),o*=Qi(d)):(d=CR(qa(f)/s),d=h+d+d*h,d=t*qa(d),o*=Qi(d));else if(sg(f)<sg(h))if(y=e*qa(f)+t*Fn(n*c/u),y<=Qu||y>=eo){if(y+=Fn(o),y>=eo)return NaN;o=Qi(y)}else o*=Qi(y);else if(y=t*qa(h)+e*Fn(r*c/l),y<=Qu||y>=eo){if(y+=Fn(o),y>=eo)return NaN;o=Qi(y)}else o*=Qi(y);else if(v=r*c/l,g=n*c/u,f=e*Fn(v),h=t*Fn(g),f>=eo||f<=Qu||h>=eo||h<=Qu)if(e<t)if(p=to(g,t/e),d=e*(Fn(v)+Fn(p)),d<eo&&d>Qu)o*=to(p*v,e);else{if(h+=f+Fn(o),h>=eo)return NaN;o=Qi(h)}else if(p=to(v,e/t),d=(Fn(p)+Fn(g))*t,d<eo&&d>Qu)o*=to(p*g,t);else{if(h+=f+Fn(o),h>=eo)return NaN;o=Qi(h)}else o*=to(v,e)*to(g,t);return o}var QA=hUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dUt=LU,pUt=QA,vUt={keep:!0,maxIter:1e3};function gUt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function mUt(e,t,r,n,i,o){var a,s,l;return a=pUt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=gUt(e,t,r,n),s=dUt(l,vUt),a/s)}var yUt=mUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mw=Is,kR=Zt,_Ut=YA,bUt=By;function RU(e,t){var r,n;if(kR(e)||kR(t))return NaN;if(!mw(e)||!mw(t))return NaN;if(t<0)return 0;if(e<0)return r=RU(-e+t-1,t),_Ut(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return mw(r)?r:bUt(r)}var wUt=RU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SUt=wUt,TUt=SUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xR=TUt,vl=kn,Oh=er,PUt=bu;function EUt(e,t,r,n){var i,o,a,s,l;if(o=Oh(r,e),o>PUt)for(s=o,l=vl(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=vl(e*r),a<=t+1&&(a=vl(t+2)),o=Oh(r,a)*Oh(n,e-a),o*=xR(vl(e),vl(a)),o===0)for(l=a-1;l>t;l--)o+=Oh(r,l)*Oh(n,e-l),o*=xR(vl(e),vl(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var AUt=EUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var CUt=QA;function MUt(e,t,r,n,i,o,a){var s,l,u,c;if(s=CUt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var kUt=MUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yw=$y,xUt=JA,LUt=xn,IUt=tr,_w=Ve,lg=er,Rh=Se,OUt=bu,LR=Su,IR=Df,bw=tp,RUt=If,OR={maxTerms:100};function DUt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function NUt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+bw-.5,u=t+bw-.5,c=d+bw-.5,s=yw(d)/(yw(e)*yw(t)),f=Rh(c/u)*(t-.5),h=Rh(r*c/l)*e,f>IR&&f<LR&&h>IR&&h<LR?(e*t<u*10?s*=_w((t-.5)*LUt(e/u)):s*=lg(c/u,t-.5),s*=lg(r*c/l,e),s*=IUt(l/RUt),o&&(o[1]=s*lg(a,t))):(s=Rh(s)+f+h+(Rh(l)-1)/2,o&&(o[1]=_w(s+t*Rh(a))),s=_w(s))):s=lg(r,e),s<OUt?n:(p=DUt(e,t,r,s),OR.initialValue=n,xUt(p,OR))}var FUt=NUt,BUt=Zt,zUt=kf,ug=kn,RR=xn,DR=GA,Bn=mU,ww=tr,$Ut=Ve,Dh=er,VUt=wu,NR=Rs,cg=Of,FR=bu,UUt=D8t,GUt=qA,DU=Ds,Za=qVt,Sw=KVt,jUt=QA,BR=yUt,WUt=AUt,Nh=kUt,ro=FUt,HUt=1/DU;function XUt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_;if(_=1-e,p=s,v=s+a,o[v]=-1,BUt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?cg/2:FR*2,i?(o[p]=n?1:Bn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?cg/2:FR*2,i?o[p]=0:o[p]=n?1:Bn(t,r),o):t===.5&&r===.5?(o[v]=HUt*ww(_*e),y=DR(ww(i?_:e)),y/=GUt,n||(y*=DU),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r===1?t===1?(o[p]=i?_:e,o[v]=1,o):(o[v]=t*Dh(e,t-1),_<.5?y=i?-zUt(t*RR(-_)):$Ut(t*RR(-_)):y=i?-(Dh(e,t)-1):Dh(e,t),n||(y/=t),o[p]=y,o):(NR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),VUt(t,r)<=1?t>=NR(.2,r)||Dh(e,t)<=.9?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ro(t,r,e,c,n,o,_)):c=ro(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ro(t,r,e,c,n,o,_)):c=ro(t,r,e,0,n,o,_):(n?u=1:u=Sw(t+r,t,20),c=Nh(t,r,e,_,20,n,o),i?(c-=n?1:Bn(t,r),i=!1,c=-Za(t+20,r,e,_,c,u,n)):c=Za(t+20,r,e,_,c,u,n))):r<=1||e<.1&&Dh(r*e,t)<=.7?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ro(t,r,e,c,n,o,_)):c=ro(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ro(t,r,e,c,n,o,_)):c=ro(t,r,e,0,n,o,_):t>=15?i?(c=-(n?1:Bn(t,r)),i=!1,c=-Za(t,r,e,_,c,1,n)):c=Za(t,r,e,_,0,1,n):(n?u=1:u=Sw(t+r,t,20),c=Nh(t,r,e,_,20,n,o),i?(c-=n?1:Bn(t,r),i=!1,c=-Za(t+20,r,e,_,c,u,n)):c=Za(t+20,r,e,_,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*_-r,l<0&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r<40?ug(t)===t&&ug(r)===r&&t<UUt-100?(g=t-1,m=r+g,c=WUt(m,g,e,_),n||(c*=Bn(t,r))):r*e<=.7?i?(c=-(n?1:Bn(t,r)),i=!1,c=-ro(t,r,e,c,n,o,_)):c=ro(t,r,e,0,n,o,_):t>15?(m=ug(r),m===r&&(m-=1),f=r-m,n?u=1:u=Sw(t+f,f,m),c=Nh(f,t,_,e,m,n),c=Za(t,f,e,_,c,1,n),c/=u):n?(m=ug(r),f=r-m,f<=0&&(m-=1,f+=1),c=Nh(f,t,_,e,m,n),c+=Nh(t,f,e,_,20,n),i&&(c-=1),c=Za(t+20,f,e,_,c,1,n),i&&(c=-c,i=!1)):c=BR(t,r,e,_,n,o):c=BR(t,r,e,_,n,o)),o[v]<0&&(o[v]=jUt(t,r,e,_,!0)),h=_*e,o[v]!==0&&(cg*h<o[v]?o[v]=cg/2:o[v]/=h),o[p]=i?(n?1:Bn(t,r))-c:c,o))}var NU=XUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YUt=NU;function qUt(e,t,r,n,i){return YUt(e,t,r,n,i,[0,0],1,0)}var ZUt=qUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KUt=dr,FU=ZUt,JUt=NU;KUt(FU,"assign",JUt);var BU=FU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QUt=BU.assign;function tGt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,QUt(e,t,r,n,i,o,1,0),o[0]}var eGt=tGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rGt=eGt,tC=rGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nGt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var iGt=nGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oGt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var aGt=oGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sGt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var lGt=sGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uGt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var cGt=uGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fGt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var hGt=fGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dGt=Zt,zR=tr,$R=Se,pGt=Ne,vGt=Tr,gGt=iGt,mGt=aGt,yGt=lGt,_Gt=cGt,bGt=hGt,wGt=.08913147449493408,SGt=2.249481201171875,TGt=.807220458984375,PGt=.9399557113647461,EGt=.9836282730102539;function AGt(e){var t,r,n,i,o;return dGt(e)?NaN:e===0?pGt:e===2?vGt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=gGt(e),t*(i*wGt+i*o)):n>=.25?(i=zR(-2*$R(n)),n-=.25,o=mGt(n),t*(i/(SGt+o))):(n=zR(-$R(n)),n<3?(r=n-1.125,o=yGt(r),t*(TGt*n+o*n)):n<6?(r=n-3,o=_Gt(r),t*(PGt*n+o*n)):(r=n-6,o=bGt(r),t*(EGt*n+o*n))))}var CGt=AGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MGt=CGt,ep=MGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var kGt=Zt,VR=GA,xGt=tr,UR=rU,LGt=6123233995736766e-32;function IGt(e){var t;return kGt(e)?NaN:e<-1||e>1?NaN:e>.5?2*VR(xGt(.5-.5*e)):(t=UR-VR(e),t+=LGt,t+=UR,t)}var OGt=IGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RGt=OGt,DGt=RGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NGt=1.4142135623730951,eC=NGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FGt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var BGt=FGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zGt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var $Gt=zGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VGt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var UGt=VGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GGt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var jGt=GGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WGt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var HGt=WGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XGt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var YGt=XGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qGt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var ZGt=qGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KGt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var JGt=KGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QGt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var tjt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ejt=ZA,rjt=Os,njt=tr,ijt=Ds,ojt=BGt,ajt=$Gt,sjt=UGt,ljt=jGt,ujt=HGt,cjt=YGt,fjt=ZGt,hjt=JGt,djt=tjt,pjt=0,no=[1,0,0,0,0,0,0,0,0,0];function vjt(e,t){var r,n;return n=ejt(e/2,.5)*njt(e*ijt)*(t-.5),r=1/e,no[1]=ojt(r),no[2]=ajt(r),no[3]=sjt(r),no[4]=ljt(r),no[5]=ujt(r),no[6]=cjt(r),no[7]=fjt(r),no[8]=hjt(r),no[9]=djt(r),pjt+n*rjt(no,n*n)}var gjt=vjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mjt=ZA,yjt=Os,GR=tr,_jt=er,bjt=Ds,Ka=[0,0,0,0,0,0,0];function wjt(e,t){var r,n,i,o,a,s,l,u;return u=mjt(e/2,.5)*GR(e*bjt)*t,o=e+2,a=e+4,s=e+6,Ka[0]=1,Ka[1]=-(e+1)/(2*o),o*=e+2,Ka[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,Ka[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,Ka[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,Ka[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,Ka[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=GR(e),i=_jt(l*u,1/e),n=i*i,r=yjt(Ka,n),r*=l,r/=i,-r}var Sjt=wjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var jR=ep,Tjt=kf,WR=tr,Pjt=er,Ejt=qA,HR=eC;function Ajt(e,t){var r,n,i,o,a,s,l;return e>1e20?-jR(2*t)*HR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*WR(r*Ejt)*e,l=Pjt(o*2*t,2/e),l>.05+r?(s=-jR(2*t)*HR,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=Tjt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=WR(e*l),-a)}var Cjt=Ajt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var XR=ep,YR=kn,Tw=Lf,qR=By,Mjt=DGt,fg=tr,kjt=he,ZR=KA,xjt=er,Ljt=Q0,KR=eC,JR=Ds,QR=gjt,hg=Sjt,Pw=Cjt,tD=268435456,Ijt=1/3,Ojt=2*53/3,Rjt=.8549879733383485;function Djt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,YR(e)===e&&e<20)switch(i=Tw(1,Ojt),YR(e)){case 1:t===.5?s=0:s=-ZR(JR*t)/Ljt(JR*t);break;case 2:s=(2*t-1)/fg(2*t*r);break;case 4:l=4*t*r,o=fg(l),v=4*ZR(Mjt(o)/3)/o,g=fg(v-4),s=t-.5<0?-g:g;break;case 6:if(t<1e-150)return(a?-1:1)*Pw(e,t);m=4*(t-t*t),y=xjt(m,Ijt),p=6*(1+Rjt*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*m*d-270*f+2187)/(5*(4*m*h-216*p-243));while(kjt((p-c)/p)>i);p=fg(p-e),s=t-.5<0?-p:p;break;default:e>tD?s=XR(2*t)*KR:e<3?(n=.2742-e*.0242143,t>n?s=QR(e,t):s=hg(e,t)):(n=Tw(1,qR(e/-.654)),t>n?s=Pw(e,t):s=hg(e,t))}else e>tD?s=-XR(2*t)*KR:e<3?(n=.2742-e*.0242143,t>n?s=QR(e,t):s=hg(e,t)):(n=Tw(1,qR(e/-.654)),t>n?s=Pw(e,t):s=hg(e,t));return a?-s:s}var Njt=Djt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Fjt=Njt;function Bjt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=Fjt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var zjt=Bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dg=Os,$jt=ep,eD=tr,Vjt=Ve,Ho=eC,$e=[0,0,0,0,0,0,0],Fh=[0,0,0,0];function Ujt(e,t,r){var n,i,o,a,s,l,u;return n=$jt(2*r),n/=-eD(e/2),Fh[0]=n,l=t-e,a=l*l,s=a*l,$e[0]=-l*Ho/2,$e[1]=(1-2*l)/8,$e[2]=-(l*Ho/48),$e[3]=-1/192,$e[4]=-l*Ho/3840,$e[5]=0,$e[6]=0,Fh[1]=dg($e,n),$e[0]=l*Ho*(3*l-2)/12,$e[1]=(20*a-12*l+1)/128,$e[2]=l*Ho*(20*l-1)/960,$e[3]=(16*a+30*l-15)/4608,$e[4]=l*Ho*(21*l+32)/53760,$e[5]=(-(32*a)+63)/368640,$e[6]=-l*Ho*(120*l+17)/25804480,Fh[2]=dg($e,n),$e[0]=l*Ho*(-75*a+80*l-16)/480,$e[1]=(-1080*s+868*a-90*l-45)/9216,$e[2]=l*Ho*(-1190*a+84*l+373)/53760,$e[3]=(-2240*s-2508*a+2100*l-165)/368640,$e[4]=0,$e[5]=0,$e[6]=0,Fh[3]=dg($e,n),o=dg(Fh,1/e),i=o*o,u=-Vjt(-i/2),i===0?.5:(1+o*eD((1+u)/i))/2}var Gjt=Ujt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rD=Se,jjt=Of,pg=jjt/4;function Wjt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-pg,-pg]:n===0?[-pg,-pg]:(o=rD(n)+t*rD(a)+e,i=1/n-t/a,[o,i])}}var zU=Wjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hjt=Zt;function Xjt(e){return e===0||Hjt(e)?e:e<0?-1:1}var Yjt=Xjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qjt=Yjt,$U=qjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nD=$U,vg=he,Zjt=Lf,Ew=Of;function Kjt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=Zjt(1,1-i),h=Ew,s=Ew,l=Ew,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),nD(a)*nD(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,vg(h*2)>vg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&vg(c*u)<vg(h));return c}var VU=Kjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jjt(e){return e===0?-1:-1+e*(-5+e*5)}var Qjt=Jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tWt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var eWt=tWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rWt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var nWt=rWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iWt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var oWt=iWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aWt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var sWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lWt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var uWt=lWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cWt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var fWt=cWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hWt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var dWt=hWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pWt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var vWt=pWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gWt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var mWt=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yWt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var _Wt=yWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bWt(e){return e===0?1:1+e*(-13+e*13)}var wWt=bWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SWt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var TWt=SWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tc=Os,PWt=ep,EWt=he,AWt=Ve,iD=Se,CWt=tr,MWt=Q0,kWt=KA,xWt=zU,LWt=VU,IWt=Qjt,OWt=eWt,RWt=nWt,DWt=oWt,NWt=sWt,FWt=uWt,BWt=fWt,zWt=dWt,$Wt=vWt,VWt=mWt,UWt=_Wt,GWt=wWt,jWt=TWt,ee=[0,0,0,0,0,0],Bh=[0,0,0,0];function WWt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S;return s=PWt(2*e)/-CWt(t/2),w=MWt(r),_=kWt(r),Bh[0]=s,m=w*w,y=_*_,v=w*_,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ee[0]=(2*m-1)/(3*v),ee[1]=-IWt(m)/(36*p),ee[2]=OWt(m)/(1620*d),ee[3]=RWt(m)/(6480*h),ee[4]=DWt(m)/(90720*f),ee[5]=0,Bh[1]=tc(ee,s),ee[0]=-NWt(m)/(405*d),ee[1]=FWt(m)/(2592*h),ee[2]=-BWt(m)/(204120*f),ee[3]=-zWt(m)/(2099520*c),ee[4]=0,ee[5]=0,Bh[2]=tc(ee,s),ee[0]=$Wt(m)/(102060*f),ee[1]=-VWt(m)/(20995200*c),ee[2]=UWt(m)/(36741600*u),ee[3]=0,ee[4]=0,ee[5]=0,Bh[3]=tc(ee,s),l=tc(Bh,1/t),o=_/w,o*=o,g=-(l*l)/(2*m)+iD(m)+y*iD(y)/m,EWt(l)<.7?(ee[0]=m,ee[1]=v,ee[2]=(1-2*m)/3,ee[3]=GWt(m)/(36*v),ee[4]=jWt(m)/(270*p),ee[5]=0,S=tc(ee,l)):(T=AWt(g),ee[0]=T,ee[1]=o,ee[2]=0,ee[3]=3*o*(3*o+1)/6,ee[4]=4*o*(4*o+1)*(4*o+2)/24,ee[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=tc(ee,T),(S-m)*l<0&&(S=1-S)),l<0?(i=0,n=m):(i=m,n=1),(S<i||S>n)&&(S=(i+n)/2),a=xWt(-g,o),S=LWt(a,S,i,n,32,100),S}var HWt=WWt,g1={exports:{}},IT={exports:{}},m0=1e3,y0=m0*60,_0=y0*60,b0=_0*24,XWt=b0*365.25,YWt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return qWt(e);if(r==="number"&&isNaN(e)===!1)return t.long?KWt(e):ZWt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function qWt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*XWt;case"days":case"day":case"d":return r*b0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*_0;case"minutes":case"minute":case"mins":case"min":case"m":return r*y0;case"seconds":case"second":case"secs":case"sec":case"s":return r*m0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ZWt(e){return e>=b0?Math.round(e/b0)+"d":e>=_0?Math.round(e/_0)+"h":e>=y0?Math.round(e/y0)+"m":e>=m0?Math.round(e/m0)+"s":e+"ms"}function KWt(e){return gg(e,b0,"day")||gg(e,_0,"hour")||gg(e,y0,"minute")||gg(e,m0,"second")||e+" ms"}function gg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=YWt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,_){if(y==="%%")return y;g++;var w=t.formatters[_];if(typeof w=="function"){var T=p[g];y=w.call(f,T),p.splice(g,1),g--}return y}),t.formatArgs.call(f,p);var m=c.log||t.log||console.log.bind(console);m.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(IT,IT.exports);(function(e,t){t=e.exports=IT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(g1,g1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JWt=34028234663852886e22,Uy=JWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QWt=g1.exports,oD=OU,tHt=he,eHt=Ve,aD=Se,rHt=Uy,sD=QWt("gammaincinv:higher_newton");function nHt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_,w,T;T=e,y=1,_=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*aD(T)+T+o,l>aD(rHt))return sD("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=eHt(l)}else w=-a*T;s?(v=oD(T,t,!0,!1),c=-w*(v-n)):(g=oD(T,t,!0,!0),c=w*(g-i)),w=c,n>1e-120||_>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,y=tHt(T/e-1),_+=1,T=e,T<0&&(T=u,_=100)}while(y>2e-14&&_<35);return(y>2e-14||_>99)&&sD("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),m=T||0,m}var iHt=nHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oHt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var aHt=oHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sHt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var lHt=sHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uHt=he,cHt=Ve,lD=Se,fHt=Os,hHt=aHt,dHt=lHt,pHt=1e-8,vHt=.08333333333333333,gHt=.008333333333333333,ec=[1,0,0,0,0,0];function mHt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=cHt(-1-u),o=hHt(l)):e<1?(l=e,o=dHt(l)):(l=11+u,a=lD(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,ec[1]=(2-a)*.5,ec[2]=(-9*a+6+2*t)/6,ec[3]=-(3*r+36*a-22*t-12)*vHt,ec[4]=(60+350*t-300*a-125*r+12*n)/60,ec[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*gHt,o+=a*l*fHt(ec,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+lD(s))/(s-1),l=uHt(s/o-1),s=o;while(l>pHt)}return o}var UU=mHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yHt=.9189385332046728,GU=yHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Ht=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function bHt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+_Ht[a],a-=1;while(a>=0);return(n-o)/2}var wHt=bHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SHt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var THt=SHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PHt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var EHt=PHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Aw=Rf,mg=Se,Cw=GU,AHt=Vy,CHt=Uy,MHt=wHt,kHt=THt,xHt=EHt,LHt=.30865217988013566;function IHt(e){var t;return e<AHt?CHt:e<1?Aw(e+1)-(e+.5)*mg(e)+e-Cw:e<2?Aw(e)-(e-.5)*mg(e)+e-Cw:e<3?Aw(e-1)-(e-.5)*mg(e)+e-Cw+mg(e-1):e<12?(t=18/(e*e)-1,MHt(17,t)/(12*e)):(t=1/(e*e),e<1e3?kHt(t)/(LHt+t)/e:xHt(t)/e)}var OHt=IHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uD=Ve,RHt=Lo,DHt=Se,NHt=Uy,FHt=zy,BHt=OHt;function zHt(e){return e>=3?uD(BHt(e)):e>0?RHt(e)/(uD(-e+(e-.5)*DHt(e))*FHt):NHt}var $Ht=zHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VHt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var UHt=VHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GHt=he,jHt=Se,WHt=UU,HHt=UHt;function XHt(e){var t;return GHt(e)<1?HHt(e):(t=WHt(e),jHt(e/(t-1))/e)}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qHt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var ZHt=qHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KHt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var JHt=KHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QHt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var tXt=QHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eXt=Se,rXt=ZHt,nXt=JHt,iXt=tXt;function oXt(e){var t,r;return e<-5?(r=e*e,t=eXt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?rXt(e):e<2?nXt(e):e<1e3?(r=1/e,iXt(e)/(-12*e)):-1/(12*e)}var aXt=oXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sXt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var lXt=sXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uXt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var cXt=uXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fXt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var hXt=fXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dXt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var pXt=dXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vXt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var gXt=vXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cD=Se,mXt=lXt,yXt=cXt,_Xt=hXt,bXt=pXt,wXt=gXt;function SXt(e){var t,r;return e<-8?(t=e*e,r=cD(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?mXt(e)/(e*e):e<-2?yXt(e):e<2?_Xt(e):e<10?(t=1/e,bXt(t)/(e*e)):e<100?(t=1/e,wXt(t)/(e*e)):-cD(e)/(12*e*e*e)}var TXt=SXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PXt=g1.exports,fD=Os,ci=Rf,EXt=ep,hD=Lo,yg=tr,dD=he,rc=Ve,AXt=Rs,CXt=er,zn=Se,MXt=zy,kXt=Uy,xXt=MU,LXt=iHt,pD=UU,vD=$Ht,IXt=YHt,OXt=aXt,RXt=TXt,DXt=PXt("gammaincinv:compute"),Ja=.5,Mw=.3333333333333333,NXt=.25,gD=.2,mD=.16666666666666666,FXt=.08333333333333333,BXt=.041666666666666664,$n=[0,0,0,0,0];function zXt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,O,B,$,D,j,Z,q,tt,Tt,Ot,bt,wt,Ht,Y,nt,K,pt,St,At;if(t<Ja?(a=!0,s=t,pt=-1):(a=!1,s=r,pt=1),Y=0,dD(e-1)<1e-4&&(nt=0,a?t<.001?(q=t*t,$=q*t,Z=$*t,S=Z*t,T=S*t,P=t+q*Ja+$*Mw+Z*NXt+S*gD+T*mD):P=-zn(1-t):P=-zn(r),e===1?(Y=2,Tt=P):(o=ci(e),Y=1)),r<1e-30&&e<Ja&&(nt=0,P=-zn(r*hD(e))+(e-1)*zn(-zn(r*hD(e))),Y=1,o=ci(e)),e>1&&e<500&&t<1e-80){for(nt=0,l=1/e,n=1/(e+1),P=(ci(e+1)+zn(t))*l,P=rc(P),g=P,Ht=0;Ht<10;Ht++)P=g*rc(P*l)*CXt(1-P*n,l);Y=1,o=ci(e)}if(u=1/e*(zn(t)+ci(e+1)),u<zn(gD*(1+e))&&Y===0&&(K=rc(u),nt=0,C=e*e,tt=C*e,D=tt*e,m=e+1,d=m*m,h=m*d,f=d*d,y=e+2,c=y*y,_=e+3,$n[0]=1,$n[1]=1/m,$n[2]=Ja*(3*e+5)/(d*y),$n[3]=Mw*(31+8*C+33*e)/(h*y*_),$n[4]=BXt*(2888+1179*tt+125*D+3971*C+5661*e)/(f*c*_*(e+4)),P=K*fD($n,K),o=ci(e),Y=1),e<10&&Y===0&&(p=yg(e)/(vD(e)*MXt),v=AXt(.02,p),r<v&&(nt=0,bt=1-e,O=bt*bt,B=O*bt,w=yg(-2/e*zn(r/p)),P=e*pD(w),wt=zn(P),P>5?(A=wt*wt,M=A*wt,k=M*wt,K=1/P,$n[0]=wt-1,$n[1]=(3*bt-2*bt*wt+A-2*wt+2)*Ja,$n[2]=(24*bt*wt-11*O-24*bt-6*A+12*wt-12-9*bt*A+6*O*wt+2*M)*mD,$n[3]=(-12*B*wt+8.04*bt*A-114*O*wt+(72+36*A)+(3*k-72*wt+162)*(bt-168*bt*wt)-(12*M+25*B)-(22*bt*M+36*O*A+120*O))*FXt,$n[4]=0,P=P-wt+bt*K*fD($n,K)):(K=1/P,A=wt*wt,Ot=wt-1,St=wt-bt*K*Ot,St<P&&(P-=St)),o=ci(e),Y=1)),dD(s-Ja)<1e-5&&Y===0&&(nt=0,l=1/e,P=e-Mw+(.019753086419753086+.007211444248481286*l)*l,o=ci(e),Y=1),e<1&&Y===0&&(nt=0,a?P=rc(1/e*(zn(s)+ci(e+1))):P=rc(1/e*(zn(1-s)+ci(e+1))),o=ci(e),Y=1),Y===0)if(nt=1,l=1/e,K=EXt(2*s),w=pt*K/yg(e*Ja),K<kXt)w+=(IXt(w)+(OXt(w)+RXt(w)*l)*l)*l,P=e*pD(w),At=w,j=-yg(e/xXt)*rc(-Ja*e*At*At)/vD(e),i=1/j;else return DXt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(Tt=LXt(P,e,nt,t,r,o,i,a)),Tt}var $Xt=zXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yD=Zt,VXt=Vy,_D=Ne,bD=$Xt;function UXt(e,t,r){return yD(e)||yD(t)?NaN:t<VXt?NaN:e>1||e<0?NaN:r===!0?e===0?_D:e===1?0:bD(t,1-e,e):e===0?0:e===1?_D:bD(t,e,1-e)}var GXt=UXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jXt=GXt,WXt=jXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HXt=5e-324,XXt=HXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wD=WXt,SD=Se,YXt=tr,qXt=XXt,ZXt=zU,KXt=VU;function JXt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,O,B,$,D,j,Z;return r<n?l=wD(r,t,!0):l=wD(n,t,!1),l/=e,m=t/e,D=YXt(1+m),T=D*D,S=T*D,P=T*T,C=S*T,A=S*S,M=P*S,k=P*P,O=C*P,c=C*C,$=l-m,y=$*$,_=y*$,w=y*y,B=D+1,f=B*B,h=B*f,d=f*f,p=(D+2)*(D-1)/(3*D),p+=(S+9*T+21*D+5)*$/(36*T*B),p-=(P-13*S+69*T+167*D+46)*y/(1620*f*S),p-=(7*C+21*P+70*S+26*T-93*D-31)*_/(6480*h*P),p-=(75*A+202*C+188*P-888*S-1345*T+118*D+138)*w/(272160*d*C),v=(28*P+131*S+402*T+581*D+208)*(D-1)/(1620*B*S),v-=(35*A-154*C-623*P-1636*S-3983*T-3514*D-925)*$/(12960*f*P),v-=(2132*M+7915*A+16821*C+35066*P+87490*S+141183*T+95993*D+21640)*y/(816480*C*h),v-=(11053*k+53308*M+117010*A+163924*C+116188*P-258428*S-677042*T-481940*D-105497)*_/(14696640*d*A),g=-((3592*M+8375*A-1323*C-29198*P-89578*S-154413*T-116063*D-29632)*(D-1))/(816480*C*f),g-=(442043*O+2054169*k+3803094*M+3470754*A+2141568*C-2393568*P-19904934*S-34714674*T-23128299*D-5253353)*$/(146966400*A*h),g-=(116932*c+819281*O+2378172*k+4341330*M+6806004*A+10622748*C+18739500*P+30651894*S+30869976*T+15431867*D+2919016)*y/(146966400*d*M),u=l+p/e+v/(e*e)+g/(e*e*e),u<=0&&(u=qXt),j=u-m*SD(u)+(1+m)*SD(1+m)-m,i=1/(1+m),a=u<m?i:0,s=u<m?1:i,Z=(a+s)/2,o=ZXt(j,m),KXt(o,Z,a,s,32,100)}var QXt=JXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rr=he,tYt=Lf,kw=$U,eYt=wu,xw=Of;function rYt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T;_=0,s=!1,f=t,c=tYt(1,1-i),p=eYt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=_,u=l,l=p,y=e(f),_=y[0],w=y[1],T=y[2],d-=1,_===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),kw(h)*kw(_)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=_/w:(v=2*_,m=2*w-_*(T/w),rr(m)<1&&rr(v)>=rr(m)*xw?p=_/w:p=v/m,p*w/_<0&&(p=_/w,rr(p)>2*rr(t)&&(p=(p<0?-1:1)*2*rr(t)))),a=rr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,rr(p)>f&&(p=kw(p)*f),u=p*3),t=f,f-=p,f<r){if(rr(r)<1&&rr(f)>1&&xw/rr(f)<rr(r)?g=1e3:g=f/r,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(rr(n)<1&&rr(f)>1&&xw/rr(f)<rr(n)?g=1e3:g=f/n,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&rr(f*c)<rr(p));return f}var nYt=rYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iYt=BU.assign,oYt=he,aYt=Of,Lw=bu;function sYt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],iYt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=Lw*64),o===0&&(o=Lw*64),l=s*(-(c*e)+(t-2)*o+1),oYt(l)<c*o*aYt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*Lw*64),[u,s,l]}}var lYt=sYt,uYt=Os,TD=tC,Iw=kf,PD=xn,cYt=GA,nc=mU,ED=tr,fYt=he,AD=Ve,io=er,CD=Q0,hYt=wu,dYt=Rs,MD=Se,Ow=bu,kD=qA,xD=Ea,pYt=zjt,vYt=Gjt,gYt=HWt,mYt=QXt,yYt=nYt,_Yt=lYt,bYt=32,wYt=1e3,gl=[0,0,0,0,0];function SYt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,w,T,S,P,C,A,M,k,O,B,$,D,j;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(D=0,s=0,u=1,e===.5){if(t===.5)return D=CD(r*kD),D*=D,j=CD(n*kD),j*=j,[D,j];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)C={},D=pYt(e,r,C),j=C.value;else{if(t===1)return r<n?e>1?(D=io(r,1/e),j=-Iw(MD(r)/e)):(D=io(r,1/e),j=1-D):(D=AD(PD(-n)/e),j=-Iw(PD(-n)/e)),o&&(v=j,j=D,D=v),[D,j];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=dYt(e,t),f=hYt(e,t),ED(h)>f-h&&h>5?(D=vYt(e,t,r),j=1-D):(O=e+t,l=cYt(ED(e/O)),a=h/O,a>=.2&&a<=.8&&O>=10?(p=io(r,1/e),p<.0025&&e+t<200?D=p*io(e*nc(e,t),1/e):D=gYt(r,O,l),j=1-D):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=nc(e,t)),d===0?j=1:(j=io(t*n*d,1/t),D=1-j)),j>1e-5&&(D=mYt(e,t,r,n),j=1-D));else if(e<1&&t<1){if(P=(1-e)/(2-e-t),_=TD(P,e,t)-r,fYt(_)/r<xD*3)return o?[1-P,P]:[P,1-P];_<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,P=1-P),S=io(e*r*nc(e,t),1/e),D=S/(1+S),j=1/(1+S),D>P&&(D=P),u=P}else e>1&&t>1?(P=(e-1)/(e+t-2),g=(t-1)/(e+t-2),T=TD(P,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=g,g=P,P=v,o=!o),w=MD(r*e*nc(e,t))/e,D=AD(w),j=D<.9?1-D:-Iw(w),t<e&&D<.2&&(m=e-1,y=t-1,A=e*e,M=e*A,k=t*t,gl[0]=0,gl[1]=1,gl[2]=y/m,m*=m,gl[3]=y*(3*e*t+5*t+A-e-4)/(2*(e+2)*m),m*=e+1,gl[4]=y*(33*e*k+31*k+8*A*k-30*e*t-47*t+11*A*t+6*M*t+18+4*e-M+A*A-10*A),gl[4]/=3*(e+3)*(e+2)*m,D=uYt(gl,D)),D>P&&(D=P),u=P):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),io(r,1/e)<.5?(D=io(r*e*nc(e,t),1/e),D===0&&(D=Ow),j=1-D):(j=io(1-io(r,t*nc(e,t)),1/t),j===0&&(j=Ow),D=1-j))}return D>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=j,j=D,D=v,o=!o,B=1-u,$=1-s,s=B,u=$),s===0&&(o?(s=xD,D<s&&(D=s)):s=Ow,D<s&&(D=s)),i=bYt,D<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=_Yt(e,t,r<n?r:n,r>=n),D=yYt(c,D,s,u,i,wYt),D===s&&(D=0),o?[1-D,D]:[D,1-D]}var TYt=SYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PYt=TYt,EYt=PYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rw=Zt,LD=EYt;function AYt(e,t,r,n){return Rw(e)||Rw(t)||Rw(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?LD(t,r,1-e,e)[0]:LD(t,r,e,1-e)[0]}var CYt=AYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MYt=CYt,jU=MYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kYt=jU,Dw=Zt;function xYt(e,t,r){return Dw(e)||Dw(t)||Dw(r)||t<=0||r<=0||e<0||e>1?NaN:kYt(e,t,r)}var LYt=xYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IYt(e){return t;function t(){return e}}var OYt=IYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RYt=OYt,Gy=RYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DYt=Gy,NYt=jU,Nw=Zt;function FYt(e,t){if(Nw(e)||Nw(t)||e<=0||t<=0)return DYt(NaN);return r;function r(n){return Nw(n)||n<0||n>1?NaN:NYt(n,e,t)}}var BYt=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zYt=dr,WU=LYt,$Yt=BYt;zYt(WU,"factory",$Yt);var VYt=WU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UYt=kn;function GYt(e){return UYt(e)===e&&e>=0}var jYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WYt=jYt,jy=WYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HYt=jy,XYt=tC,Fw=Zt,YYt=kn,qYt=Ne;function ZYt(e,t,r){return Fw(e)||Fw(t)||Fw(r)||r<0||r>1||!HYt(t)||t===qYt?NaN:e<0?0:e>=t?1:(e=YYt(e+1e-7),XYt(r,e+1,t-e,!0,!0))}var KYt=ZYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JYt=jy,QYt=Gy,tqt=tC,Bw=Zt,eqt=kn,rqt=Ne;function nqt(e,t){if(Bw(e)||Bw(t)||t<0||t>1||!JYt(e)||e===rqt)return QYt(NaN);return r;function r(n){return Bw(n)?NaN:n<0?0:n>=e?1:(n=eqt(n+1e-7),tqt(t,n+1,e-n,!0,!0))}}var iqt=nqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oqt=dr,HU=KYt,aqt=iqt;oqt(HU,"factory",aqt);var sqt=HU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var XU=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],lqt=XU.length;function uqt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<lqt;o++)r=n,n=i,i=t*n-r+XU[o];return(i-r)*.5}var cqt=uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var fqt=er,hqt=cqt,dqt=9490626562425156e-8,pqt=3745194030963158e291;function vqt(e){return e<10?NaN:e>=pqt?0:e<dqt?hqt(2*fqt(10/e,2)-1)/e:1/(e*12)}var gqt=vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var mqt=Rf,ID=xn,zw=Lo,yqt=wu,_qt=Rs,_g=Se,bqt=GU,wqt=Tr,OD=Ne,zh=gqt;function Sqt(e,t){var r,n,i;return n=_qt(e,t),i=yqt(e,t),n<0?NaN:n===0?OD:i===OD?wqt:n>=10?(r=zh(n)+zh(i)-zh(n+i),-.5*_g(i)+bqt+r+(n-.5)*_g(n/(n+i))+i*ID(-n/(n+i))):i>=10?(r=zh(i)-zh(n+i),mqt(n)+r+n-n*_g(n+i)+(i-.5)*ID(-n/(n+i))):_g(zw(n)*(zw(i)/zw(n+i)))}var Tqt=Sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pqt=Tqt,Eqt=Pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RD=Is,DD=Zt,Aqt=Eqt,Cqt=he,ND=Se,FD=Tr;function OT(e,t){return DD(e)||DD(t)?NaN:!RD(e)||!RD(t)?NaN:e<0?OT(-e+t-1,t):t<0?FD:t===0?0:t===1?ND(Cqt(e)):e<t?FD:e-t<2?OT(e,e-t):-ND(e+1)-Aqt(e-t+1,t+1)}var Mqt=OT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kqt=Mqt,YU=kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BD=jy,xqt=YU,$w=Zt,Lqt=xn,Iqt=Ve,Oqt=Se,Rqt=Ne;function Dqt(e,t,r){var n;return $w(e)||$w(t)||$w(r)||r<0||r>1||!BD(t)||t===Rqt?NaN:BD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=xqt(t,e),n+=e*Oqt(r)+(t-e)*Lqt(-r),Iqt(n)):0}var Nqt=Dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zD=Zt;function Fqt(e,t){return zD(e)||zD(t)?NaN:e===t?1:0}var Bqt=Fqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zqt=Gy,$D=Zt;function $qt(e){if($D(e))return zqt(NaN);return t;function t(r){return $D(r)?NaN:r===e?1:0}}var Vqt=$qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uqt=dr,qU=Bqt,Gqt=Vqt;Uqt(qU,"factory",Gqt);var jqt=qU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VD=jy,Wqt=Gy,Hqt=YU,UD=jqt.factory,Vw=Zt,Xqt=xn,Yqt=Ve,qqt=Se,Zqt=Ne;function Kqt(e,t){if(Vw(e)||Vw(t)||!VD(e)||e===Zqt||t<0||t>1)return Wqt(NaN);if(t===0||e===0)return UD(0);if(t===1)return UD(e);return r;function r(n){var i;return Vw(n)?NaN:VD(n)?n>e?0:(i=Hqt(e,n),i+=n*qqt(t)+(e-n)*Xqt(-t),Yqt(i)):0}}var Jqt=Kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qqt=dr,ZU=Nqt,tZt=Jqt;Qqt(ZU,"factory",tZt);var eZt=ZU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rZt=Vi,RT;function nZt(e){return rZt(e)==="[object Array]"}Array.isArray?RT=Array.isArray:RT=nZt;var iZt=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oZt=iZt,KU=oZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aZt=KU;function sZt(e){return typeof e=="object"&&e!==null&&!aZt(e)}var lZt=sZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uZt=lZt,cZt=uZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fZt=/./,hZt=fZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dZt(e){return typeof e=="boolean"}var JU=dZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pZt=Boolean.prototype.toString,vZt=pZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gZt=vZt;function mZt(e){try{return gZt.call(e),!0}catch{return!1}}var yZt=mZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Zt=Oy,bZt=Vi,wZt=yZt,SZt=_Zt();function TZt(e){return typeof e=="object"?e instanceof Boolean?!0:SZt?wZt(e):bZt(e)==="[object Boolean]":!1}var QU=TZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PZt=JU,EZt=QU;function AZt(e){return PZt(e)||EZt(e)}var CZt=AZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tG=dr,rC=CZt,MZt=JU,kZt=QU;tG(rC,"isPrimitive",MZt);tG(rC,"isObject",kZt);var eG=rC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xZt(){return new Function("return this;")()}var LZt=xZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IZt=typeof self=="object"?self:null,OZt=IZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RZt=typeof window=="object"?window:null,DZt=RZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NZt=typeof dS=="object"?dS:null,FZt=NZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BZt=eG.isPrimitive,zZt=LZt,GD=OZt,jD=DZt,WD=FZt;function $Zt(e){if(arguments.length){if(!BZt(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return zZt()}if(GD)return GD;if(jD)return jD;if(WD)return WD;throw new Error("unexpected error. Unable to resolve global object.")}var VZt=$Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UZt=VZt,GZt=UZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jZt=GZt,HD=jZt(),WZt=HD.document&&HD.document.childNodes,HZt=WZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XZt=Int8Array,YZt=XZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qZt=hZt,ZZt=HZt,KZt=YZt;function JZt(){return typeof qZt=="function"||typeof KZt=="object"||typeof ZZt=="function"}var QZt=JZt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tKt(){return/^\s*function\s*([^(]*)/i}var rG=tKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eKt=rG,rKt=eKt(),nKt=rKt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iKt=dr,nG=rG,oKt=nKt;iKt(nG,"REGEXP",oKt);var aKt=nG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sKt=KU;function lKt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!sKt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var uKt=lKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cKt=uKt,fKt=cKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hKt(e){return e!==null&&typeof e=="object"}var dKt=hKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pKt=dr,vKt=fKt,nC=dKt,gKt=vKt(nC);pKt(nC,"isObjectLikeArray",gKt);var mKt=nC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yKt=mKt;function _Kt(e){return yKt(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var bKt=_Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wKt=bKt,SKt=wKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TKt=Vi,PKt=aKt.REGEXP,EKt=SKt;function AKt(e){var t,r,n;if(r=TKt(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=PKt.exec(n.toString()),t)return t[1]}return EKt(e)?"Buffer":r}var CKt=AKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MKt=CKt,iG=MKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kKt=iG;function xKt(e){var t;return e===null?"null":(t=typeof e,t==="object"?kKt(e).toLowerCase():t)}var LKt=xKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IKt=iG;function OKt(e){return IKt(e).toLowerCase()}var RKt=OKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DKt=QZt,NKt=LKt,FKt=RKt,BKt=DKt()?FKt:NKt,zKt=BKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Kt=zKt;function VKt(e){return $Kt(e)==="function"}var UKt=VKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GKt=UKt,oG=GKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jKt=Object.getPrototypeOf,WKt=jKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HKt(e){return e.__proto__}var XKt=HKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YKt=Vi,qKt=XKt;function ZKt(e){var t=qKt(e);return t||t===null?t:YKt(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var KKt=ZKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JKt=oG,QKt=WKt,tJt=KKt,DT;JKt(Object.getPrototypeOf)?DT=QKt:DT=tJt;var eJt=DT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rJt=eJt;function nJt(e){return e==null?null:(e=Object(e),rJt(e))}var iJt=nJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oJt=iJt,aJt=oJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sJt=cZt,XD=oG,lJt=aJt,sm=Ry,uJt=Vi,cJt=Object.prototype;function fJt(e){var t;for(t in e)if(!sm(e,t))return!1;return!0}function hJt(e){var t;return sJt(e)?(t=lJt(e),t?!sm(e,"constructor")&&sm(t,"constructor")&&XD(t.constructor)&&uJt(t.constructor)==="[object Function]"&&sm(t,"isPrototypeOf")&&XD(t.isPrototypeOf)&&(t===cJt||fJt(e)):!0):!1}var dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=dJt,aG=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vJt(e){return typeof e=="string"}var sG=vJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gJt=String.prototype.valueOf,mJt=gJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yJt=mJt;function _Jt(e){try{return yJt.call(e),!0}catch{return!1}}var bJt=_Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wJt=Oy,SJt=Vi,TJt=bJt,PJt=wJt();function EJt(e){return typeof e=="object"?e instanceof String?!0:PJt?TJt(e):SJt(e)==="[object String]":!1}var lG=EJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AJt=sG,CJt=lG;function MJt(e){return AJt(e)||CJt(e)}var kJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uG=dr,iC=kJt,xJt=sG,LJt=lG;uG(iC,"isPrimitive",xJt);uG(iC,"isObject",LJt);var IJt=iC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OJt=Ef.isPrimitive,RJt=Zt;function DJt(e){return OJt(e)&&RJt(e)}var cG=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NJt=Ef.isObject,FJt=Zt;function BJt(e){return NJt(e)&&FJt(e.valueOf())}var fG=BJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zJt=cG,$Jt=fG;function VJt(e){return zJt(e)||$Jt(e)}var UJt=VJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hG=dr,oC=UJt,GJt=cG,jJt=fG;hG(oC,"isPrimitive",GJt);hG(oC,"isObject",jJt);var WJt=oC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YD=Ef.isPrimitive,HJt=aG,XJt=IJt.isPrimitive,qD=WJt,Uw=Ry;function YJt(e,t){return HJt(t)?Uw(t,"alpha")&&(e.alpha=t.alpha,!YD(e.alpha)||qD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Uw(t,"alternative")&&(e.alternative=t.alternative,!XJt(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Uw(t,"p")&&(e.p=t.p,!YD(e.p)||qD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var qJt=YJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZJt=Dy.isPrimitive;function KJt(e){return ZJt(e)&&e>0}var dG=KJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JJt=Dy.isObject;function QJt(e){return JJt(e)&&e.valueOf()>0}var pG=QJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tQt=dG,eQt=pG;function rQt(e){return tQt(e)||eQt(e)}var nQt=rQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vG=dr,aC=nQt,iQt=dG,oQt=pG;vG(aC,"isPrimitive",iQt);vG(aC,"isObject",oQt);var aQt=aC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sQt=9007199254740991,lQt=sQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uQt=308,cQt=uQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fQt=-308,hQt=fQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dQt=-324,pQt=dQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZD=Zt,bg=xf,KD=er,vQt=he,JD=By,gQt=lQt,QD=cQt,mQt=hQt,yQt=pQt,_Qt=gQt+1,t8=1e308;function bQt(e,t){var r,n;return ZD(e)||ZD(t)||bg(t)?NaN:bg(e)||e===0||t<yQt||vQt(e)>_Qt&&t<=0?e:t>QD?0*e:t<mQt?(r=KD(10,-(t+QD)),n=e*t8*r,bg(n)?e:JD(n)/t8/r):(r=KD(10,-t),n=e*r,bg(n)?e:JD(n)/r)}var wQt=bQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SQt=wQt,TQt=SQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PQt=aQt,EQt=aG,AQt=eG.isPrimitive,e8=Ry,wg=TQt;function CQt(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!EQt(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(e8(e,"digits")){if(!PQt(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(e8(e,"decision")){if(!AQt(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+wg(this.pValue,-r)+`
`,n+="    statistic: "+wg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+wg(this.ci[0],-r)+","+wg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var MQt=CQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xo=u4t,kQt=M6t,r8=i5t,gG=VYt,xQt=kn,LQt=nU,ic=sqt,Gw=eZt,n8=qJt,IQt=MQt,i8=1+1e-7;function o8(e,t,r){return e===0?0:gG(r,e,t-e+1)}function a8(e,t,r){return e===t?1:gG(1-r,e+1,t-e)}function OQt(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},kQt(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=n8(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!r8(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!r8(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=n8(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=ic(h,c,f),r=[0,a8(h,c,e)];break;case"greater":n=1-ic(h-1,c,f),r=[o8(h,c,e),1];break;case"two-sided":if(l=Gw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=LQt(u);p<=c;p++)Gw(p,c,f)<=l*i8&&(d+=1);n=ic(h,c,f)+(1-ic(c-d,c,f))}else{for(d=0,p=0;p<=xQt(u);p++)Gw(p,c,f)<=l*i8&&(d+=1);n=ic(d-1,c,f)+(1-ic(h-1,c,f))}r=[o8(h,c,e/2),a8(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},Xo(s,"rejected",n<=e),Xo(s,"alpha",e),Xo(s,"pValue",n),Xo(s,"statistic",i),Xo(s,"ci",r),Xo(s,"nullValue",f),Xo(s,"alternative",o),Xo(s,"method","Exact binomial test"),Xo(s,"print",IQt),s}var RQt=OQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DQt=RQt,mG=DQt;const NQt=Array.prototype.concat,yG=Object.prototype.toString;function _G(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Co=Array.isArray||function(t){return yG.call(t)==="[object Array]"};function w0(e){return yG.call(e)==="[object Function]"}function Sr(e){return typeof e=="number"?e-e===0:!1}function FQt(e){return NQt.apply([],e)}const bG={calcRdx:_G,isArray:Co,isFunction:w0,isNumber:Sr,toVector:FQt};let ri=Math.random;function wG(e){if(typeof e!="function")throw new TypeError("fn is not a function");ri=e}function Wy(e){return e.length||1}function SG(e){return e[0].length||1}function BQt(e){return{rows:Wy(e),cols:SG(e)}}function sC(e,t){return Co(t)?t.map(r=>sC(e,r)):e[t]}function TG(e,t){return sC(e,t)}function m1(e,t){if(Co(t)){const n=Ie(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Ie(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function PG(e,t){return m1(e,t).map(r=>r[0])}function zQt(e){const t=Wy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function $Qt(e){for(var t=Wy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function ys(e){var t=[],r,n,i,o,a;for(Co(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function Jr(e,t,r){var n,i,o,a,s;for(Co(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function Hy(e,t,r){var n,i,o,a,s;for(Co(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function lC(e,t){return Jr(e,t,!0)}function Nf(e,t,r){var n=new Array(e),i,o;for(w0(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function EG(){return 0}function VQt(){return 1}function UQt(e,t){return e===t?1:0}function Io(e,t){return Sr(t)||(t=e),Nf(e,t,EG)}function GQt(e,t){return Sr(t)||(t=e),Nf(e,t,VQt)}function jQt(e,t){return Sr(t)||(t=e),Nf(e,t,ri)}function iu(e,t){return Sr(t)||(t=e),Nf(e,t,UQt)}function WQt(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function HQt(e){return lC(e,EG)}function AG(e,t,r,n){w0(n)||(n=!1);var i=[],o=_G(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Ie(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function Zo(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return Xy(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Sr(t.row)){if(Sr(t.col))return e[t.row][t.col];var o=TG(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Sr(t.col)){var a=PG(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function td(e,t,r){var n,i;if(Sr(t.row)){if(Sr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Ie(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(Sr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Ie(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Ie(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Ie(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function XQt(e){var t=Io(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function Xy(e){return e.map(function(t){return Sr(t)?t:t.map(function(r){return r})})}const YQt=Object.freeze(Object.defineProperty({__proto__:null,utils:bG,get random_fn(){return ri},setRandom:wG,rows:Wy,cols:SG,dimensions:BQt,row:sC,rowa:TG,col:m1,cola:PG,diag:zQt,antidiag:$Qt,transpose:ys,map:Jr,cumreduce:Hy,alter:lC,create:Nf,zeros:Io,ones:GQt,rand:jQt,identity:iu,symmetric:WQt,clear:HQt,seq:AG,arange:Ie,slice:Zo,sliceAssign:td,diagonal:XQt,copy:Xy},Symbol.toStringTag,{value:"Module"}));function Ff(e,t){return e-t}function s8(e,t,r){return Math.max(t,Math.min(e,r))}function Qr(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function qQt(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function Yy(e){for(var t=ar(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function ZQt(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function CG(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function uC(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function cC(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function KQt(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function ar(e){return Qr(e)/e.length}function JQt(e){return Yy(e)/e.length}function QQt(e){return Math.pow(CG(e),1/e.length)}function NT(e){var t=e.length,r=e.slice().sort(Ff);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function tte(e){return Hy(e,function(t,r){return t+r})}function ete(e){return Hy(e,function(t,r){return t*r})}function rte(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function FT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Ff),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function nte(e){var t=e.length,r=e.slice().sort(Ff),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function ite(e){return cC(e)-uC(e)}function MG(e,t){return Yy(e)/(e.length-(t?1:0))}function kG(e){var t=e.reduce(function(n,i){return n+Yy(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function ote(e){for(var t=ar(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function ma(e,t){return Math.sqrt(MG(e,t))}function xG(e){return Math.sqrt(kG(e))}function ate(e){for(var t=ar(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return ar(r)}function ste(e){for(var t=NT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return NT(r)}function lte(e){return ma(e)/ar(e)}function ute(e){var t=e.length,r=e.slice().sort(Ff);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function cte(e,t,r,n){var i=e.slice().sort(Ff),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(s8(c,1,a-1)),h=s8(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function fte(e,t,r){var n=e.slice().sort(Ff),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function hte(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function dte(e,t){t=t||4;var r=uC(e),n=(cC(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function LG(e,t){var r=ar(e),n=ar(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return Qr(o)/(i-1)}function IG(e,t){return LG(e,t)/ma(e,1)/ma(t,1)}function pte(e,t){return e=FT(e),t=FT(t),IG(e,t)}function fC(e,t){for(var r=ar(e),n=ma(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function vte(e){return fC(e,3)}function gte(e){return fC(e,4)-3}const mte=Object.freeze(Object.defineProperty({__proto__:null,sum:Qr,sumsqrd:qQt,sumsqerr:Yy,sumrow:ZQt,product:CG,min:uC,max:cC,unique:KQt,mean:ar,meansqerr:JQt,geomean:QQt,median:NT,cumsum:tte,cumprod:ete,diff:rte,rank:FT,mode:nte,range:ite,variance:MG,pooledvariance:kG,deviation:ote,stdev:ma,pooledstdev:xG,meandev:ate,meddev:ste,coeffvar:lte,quartiles:ute,quantiles:cte,percentile:fte,percentileOfScore:hte,histogram:dte,covariance:LG,corrcoeff:IG,spearmancoeff:pte,stanMoment:fC,skewness:vte,kurtosis:gte},Symbol.toStringTag,{value:"Module"}));function yte(e,t,r){return e<t||e>r?0:1/(r-t)}function _te(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function bte(e,t,r){return t+e*(r-t)}function wte(e,t){return .5*(e+t)}function Ste(e,t){return ar(e)}function Tte(){throw new Error("mode is not yet implemented")}function OG(e,t){return e/2+t/2+(t/2-e/2)*(2*ri()-1)}function Pte(e,t){return Math.pow(t-e,2)/12}const Ete=Object.freeze(Object.defineProperty({__proto__:null,pdf:yte,cdf:_te,inv:bte,mean:wte,median:Ste,mode:Tte,sample:OG,variance:Pte},Symbol.toStringTag,{value:"Module"}));function Ate(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function Cte(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function Mte(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function kte(e,t){return t<=e?NaN:(e+t)/2}function xte(e,t){return t<=e?NaN:(e+t)/2}function Lte(){throw new Error("mode is not yet implemented")}function Ite(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*OG(0,1))}function Ote(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const Rte=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ate,cdf:Cte,inv:Mte,mean:kte,median:xte,mode:Lte,sample:Ite,variance:Ote},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function RG(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function ki(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function Dte(e,t){return Bf(e,t)*ki(e)}function Bf(e,t){var r=Ge(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function lm(e){return e<0?NaN:Ge(e+1)}function Gl(e){return e<0?NaN:ki(e+1)}function hC(e,t){return e>170||t>170?Math.exp(DG(e,t)):Gl(e)/Gl(t)/Gl(e-t)}function DG(e,t){return lm(e)-lm(t)-lm(e-t)}function Nte(e,t){return Gl(e)/Gl(e-t)}function qy(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(dC(e,t)):ki(e)*ki(t)/ki(e+t)}function dC(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function BT(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Zy(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=Bf(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function Ky(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function NG(e){return 1-Ky(e)}function pC(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=NG(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function rp(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,g,m;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),g=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*g))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,g=c+f,e<c/g?d=Math.pow(t*g*e,1/t):d=1-Math.pow(r*g*(1-e),1/r)),m=-Ge(t)-Ge(r)+Ge(t+r);a<10;a++){if(d===0||d===1)return d;if(h=np(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+m),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function np(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*BT(e,t,r)/t:1-n*BT(1-e,r,t)/r}function Tu(e,t){var r,n,i,o,a;if(t||(t=e),e)return Nf(e,t,function(){return Tu()});do r=ri(),n=1.7156*(ri()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function Mo(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=Io(t,r),u.alter(function(){return Mo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Tu(),s=1+o*l;while(s<=0);s=s*s*s,a=ri()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ri();while(a===0);return Math.pow(a,1/n)*i*s}const Fte=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:RG,gammafn:ki,gammap:Dte,lowRegGamma:Bf,factorialln:lm,factorial:Gl,combination:hC,combinationln:DG,permutation:Nte,betafn:qy,betaln:dC,betacf:BT,gammapinv:Zy,erf:Ky,erfc:NG,erfcinv:pC,ibetainv:rp,ibeta:np,randn:Tu,randg:Mo},Symbol.toStringTag,{value:"Module"}));function Bte(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/qy(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-dC(t,r))}function y1(e,t,r){return e>1||e<0?(e>1)*1:np(e,t,r)}function zte(e,t,r){return rp(e,t,r)}function $te(e,t){return e/(e+t)}function Vte(e,t){return rp(.5,e,t)}function Ute(e,t){return(e-1)/(e+t-2)}function Gte(e,t){var r=Mo(e);return r/(r+Mo(t))}function jte(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Wte=Object.freeze(Object.defineProperty({__proto__:null,pdf:Bte,cdf:y1,inv:zte,mean:$te,median:Vte,mode:Ute,sample:Gte,variance:jte},Symbol.toStringTag,{value:"Module"}));function l8(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function FG(e,t,r){return r===0||r===1?t*r===e?1:0:hC(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function Hte(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(Ge(l)-Ge(s)-Ge(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*l8(o,a,s,i):n=1-u*l8(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const Xte=Object.freeze(Object.defineProperty({__proto__:null,pdf:FG,cdf:Hte},Symbol.toStringTag,{value:"Module"}));function Yte(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function qte(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function Zte(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Kte(e){return e}function Jte(e){return e}function Qte(e,t){return Tu()*Math.sqrt(1/(2*randg(.5)))*t+e}const tee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Yte,cdf:qte,inv:Zte,median:Kte,mode:Jte,sample:Qte},Symbol.toStringTag,{value:"Module"}));function eee(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/qy(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*FG((t-2)/2,(t+r-2)/2,n))}function _1(e,t,r){return e<0?0:np(t*e/(t*e+r),t/2,r/2)}function ree(e,t,r){return r/(t*(1/rp(e,t/2,r/2)-1))}function nee(e,t){return t>2?t/(t-2):void 0}function iee(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function oee(e,t){var r=Mo(e/2)*2,n=Mo(t/2)*2;return r/e/(n/t)}function aee(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const see=Object.freeze(Object.defineProperty({__proto__:null,pdf:eee,cdf:_1,inv:ree,mean:nee,mode:iee,sample:oee,variance:aee},Symbol.toStringTag,{value:"Module"}));function lee(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function uee(e,t){return e<0?0:Bf(t/2,e/2)}function cee(e,t){return 2*Zy(e,.5*t)}function fee(e){return e}function hee(e){return e*Math.pow(1-2/(9*e),3)}function dee(e){return e-2>0?e-2:0}function pee(e){return Mo(e/2)*2}function vee(e){return 2*e}const gee=Object.freeze(Object.defineProperty({__proto__:null,pdf:lee,cdf:uee,inv:cee,mean:fee,median:hee,mode:dee,sample:pee,variance:vee},Symbol.toStringTag,{value:"Module"}));function mee(e,t){return e<0?0:t*Math.exp(-t*e)}function yee(e,t){return e<0?0:1-Math.exp(-t*e)}function _ee(e,t){return-Math.log(1-e)/t}function bee(e){return 1/e}function wee(e){return 1/e*Math.log(2)}function See(){return 0}function Tee(e){return-1/e*Math.log(ri())}function Pee(e){return Math.pow(e,-2)}const Eee=Object.freeze(Object.defineProperty({__proto__:null,pdf:mee,cdf:yee,inv:_ee,mean:bee,median:wee,mode:See,sample:Tee,variance:Pee},Symbol.toStringTag,{value:"Module"}));function Aee(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function Cee(e,t,r){return e<0?0:Bf(t,e/r)}function Mee(e,t,r){return Zy(e,t)*r}function kee(e,t){return e*t}function xee(e,t){if(e>1)return(e-1)*t}function Lee(e,t){return Mo(e)*t}function Iee(e,t){return e*t*t}const Oee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Aee,cdf:Cee,inv:Mee,mean:kee,mode:xee,sample:Lee,variance:Iee},Symbol.toStringTag,{value:"Module"}));function ed(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?ed(t-r-n+e,t,t-r,t-n):ed(n-e,t,t-r,n);if(n*2>t)return ed(r-e,t,r,t-n);if(r<n)return ed(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function rd(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?rd(t-r-n+e,t,t-r,t-n):1-rd(n-e-1,t,t-r,n);if(n*2>t)return 1-rd(r-e-1,t,r,t-n);if(r<n)return rd(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const Ree=Object.freeze(Object.defineProperty({__proto__:null,pdf:ed,cdf:rd},Symbol.toStringTag,{value:"Module"}));function Dee(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function Nee(e,t,r){return e<=0?0:1-Bf(t,r/e)}function Fee(e,t,r){return r/Zy(1-e,t)}function Bee(e,t){return e>1?t/(e-1):void 0}function zee(e,t){return t/(e+1)}function $ee(e,t){return t/Mo(e)}function Vee(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const Uee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Dee,cdf:Nee,inv:Fee,mean:Bee,mode:zee,sample:$ee,variance:Vee},Symbol.toStringTag,{value:"Module"}));function Gee(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function jee(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Wee(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function Hee(e,t){return t*ki(1+1/e)*ki(t)/ki(1+1/e+t)}function Xee(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Yee(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function qee(){throw new Error("variance not yet implemented")}const Zee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Gee,cdf:jee,inv:Wee,mean:Hee,median:Xee,mode:Yee,variance:qee},Symbol.toStringTag,{value:"Module"}));function Kee(e){return e/Math.abs(e)}function Jee(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Qee(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function tre(e){return e}function ere(e){return e}function rre(e){return e}function nre(e,t){return 2*t*t}function ire(e,t){var r=ri()-.5;return e-t*Kee(r)*Math.log(1-2*Math.abs(r))}const ore=Object.freeze(Object.defineProperty({__proto__:null,pdf:Jee,cdf:Qee,mean:tre,median:ere,mode:rre,variance:nre,sample:ire},Symbol.toStringTag,{value:"Module"}));function are(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function sre(e,t,r){return e<0?0:.5+.5*Ky((Math.log(e)-t)/Math.sqrt(2*r*r))}function lre(e,t,r){return Math.exp(-1.4142135623730951*r*pC(2*e)+t)}function ure(e,t){return Math.exp(e+t*t/2)}function cre(e){return Math.exp(e)}function fre(e,t){return Math.exp(e-t*t)}function hre(e,t){return Math.exp(Tu()*t+e)}function dre(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const pre=Object.freeze(Object.defineProperty({__proto__:null,pdf:are,cdf:sre,inv:lre,mean:ure,median:cre,mode:fre,sample:hre,variance:dre},Symbol.toStringTag,{value:"Module"}));function BG(e,t,r){return e!==e>>>0?!1:e<0?0:hC(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function vre(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=BG(i,t,r);return n}const gre=Object.freeze(Object.defineProperty({__proto__:null,pdf:BG,cdf:vre},Symbol.toStringTag,{value:"Module"}));function zG(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*qy(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function Ko(e,t){var r=t/2;return np((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function b1(e,t){var r=rp(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function mre(e){return e>1?0:void 0}function yre(){return 0}function _re(){return 0}function bre(e){return Tu()*Math.sqrt(e/(2*Mo(e/2)))}function wre(e){return e>2?e/(e-2):e>1?1/0:void 0}const Sre=Object.freeze(Object.defineProperty({__proto__:null,pdf:zG,cdf:Ko,inv:b1,mean:mre,median:yre,mode:_re,sample:bre,variance:wre},Symbol.toStringTag,{value:"Module"}));function Tre(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function mi(e,t,r){return .5*(1+Ky((e-t)/Math.sqrt(2*r*r)))}function zT(e,t,r){return-1.4142135623730951*r*pC(2*e)+t}function Pre(e){return e}function Ere(e){return e}function Are(e){return e}function Cre(e,t){return Tu()*t+e}function Mre(e,t){return t*t}const kre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Tre,cdf:mi,inv:zT,mean:Pre,median:Ere,mode:Are,sample:Cre,variance:Mre},Symbol.toStringTag,{value:"Module"}));function xre(e,t,r){var n=1e-14;return Math.abs(r)<n?zG(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*($T(e*Math.sqrt(1+2/t),t+2,r)-$T(e,t,r))}function $T(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return Ko(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=mi(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*y1(u,c+.5,t/2)+h*y1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const Lre=Object.freeze(Object.defineProperty({__proto__:null,pdf:xre,cdf:$T},Symbol.toStringTag,{value:"Module"}));function Ire(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function Ore(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function Rre(e,t,r){return t/Math.pow(1-e,1/r)}function Dre(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function Nre(e,t){return e*(t*Math.SQRT2)}function Fre(e){return e}function Bre(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const zre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ire,cdf:Ore,inv:Rre,mean:Dre,median:Nre,mode:Fre,variance:Bre},Symbol.toStringTag,{value:"Module"}));function dt(...e){return new dt._init(...e)}dt._init=function(...e){if(Co(e[0]))if(Co(e[0][0])){w0(e[1])&&(e[0]=Jr(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=w0(e[1])?Jr(e[0],e[1]):e[0],this.length=1;else if(Sr(e[0]))this[0]=AG.apply(null,e),this.length=1;else{if(e[0]instanceof dt)return dt(e[0].toArray());this[0]=[],this.length=1}return this};dt._init.prototype=dt.prototype;dt._init.constructor=dt;dt.setRandom=wG;const pn=dt.prototype;pn.length=0;pn.push=Array.prototype.push;pn.sort=Array.prototype.sort;pn.splice=Array.prototype.splice;pn.slice=Array.prototype.slice;pn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};pn.map=function(e,t){return dt(Jr(this,e,t))};pn.cumreduce=function(e,t){return dt(Hy(this,e,t))};pn.alter=function(e){return lC(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{pn[e]=function(t){if(t)return t.call(this,pn[e].call(this)),this;const r=dt[e](this);return Array.isArray(r)?dt(r):r}});"row col".split(" ").forEach(e=>{pn[e]=function(t,r){return r?(r.call(this,pn[e].call(this,t)),this):dt(dt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{pn[e]=function(...t){return dt(dt[e](...t))}});function $G(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Gl(e)}function $re(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push($G(n,t));return Qr(r)}function Vre(e){return e}function Ure(e){return e}function Gre(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=dt._random_fn();while(t>n);return r-1}function jre(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-RG(r+1))return r}}function Wre(e){return e<10?Gre(e):jre(e)}const Hre=Object.freeze(Object.defineProperty({__proto__:null,pdf:$G,cdf:$re,mean:Vre,variance:Ure,sample:Wre},Symbol.toStringTag,{value:"Module"}));function Xre(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Yre(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function qre(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function Zre(e,t,r){return(e+t+r)/3}function Kre(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Jre(e,t,r){return r}function Qre(e,t,r){var n=ri();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function tne(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const ene=Object.freeze(Object.defineProperty({__proto__:null,pdf:Xre,cdf:Yre,inv:qre,mean:Zre,median:Kre,mode:Jre,sample:Qre,variance:tne},Symbol.toStringTag,{value:"Module"}));function u8(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*mi(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var g;e>u?g=c:g=f;for(var m=p,y=(l-p)/g,_=m+y,w=0,T=r-1,S=1;S<=g;S++){for(var P=0,C=.5*(_+m),A=.5*(_-m),M=1;M<=n;M++){var k,O;i<M?(k=n-M+1,O=h[k-1]):(k=M,O=-h[k-1]);var B=A*O,$=C+B,D=$*$;if(D>s)break;var j=2*mi($,0,1),Z=2*mi($,e,1),q=j*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[k-1]*Math.exp(-(.5*D))*Math.pow(q,T),P+=q)}P*=2*A*r/Math.sqrt(2*Math.PI),w+=P,m=_,_+=y}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function rne(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,g=1.208,m=1.4142,y=120,_=.5-.5*e,w=Math.sqrt(Math.log(1/(_*_))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-v/r+g*T/r),T*(S*Math.log(t-1)+m)}function Ld(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,g=.125,m=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return u8(e,n,i);var _=r*.5,w=_*Math.log(r)-r*Math.log(2)-Ge(_),T=_-1,S=r*.25,P;r<=u?P=d:r<=c?P=p:r<=f?P=v:P=g,w+=Math.log(P);for(var C=0,A=1;A<=50;A++){for(var M=0,k=(2*A-1)*P,O=1;O<=o;O++){var B,$;a<O?(B=O-a-1,$=w+T*Math.log(k+m[B]*P)-(m[B]*P+k)*S):(B=O-1,$=w+T*Math.log(k-m[B]*P)+(m[B]*P-k)*S);var D;if($>=s){a<O?D=e*Math.sqrt((m[B]*P+k)*.5):D=e*Math.sqrt((-(m[B]*P)+k)*.5);var j=u8(D,n,i),Z=j*y[B]*Math.exp($);M+=Z}}if(A*P>=1&&M<=l)break;C+=M}if(M>l)throw new Error("tukey.cdf failed to converge");return C>1&&(C=1),C}function nne(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=rne(e,i,r),l=Ld(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Ld(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Ld(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const ine=Object.freeze(Object.defineProperty({__proto__:null,cdf:Ld,inv:nne},Symbol.toStringTag,{value:"Module"}));function one(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function ane(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function sne(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function VG(e,t){return e*ki(1+1/t)}function lne(e,t){return e*Math.pow(Math.log(2),1/t)}function une(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function cne(e,t){return e*Math.pow(-Math.log(ri()),1/t)}function fne(e,t){return e*e*ki(1+2/t)-Math.pow(VG(e,t),2)}const hne=Object.freeze(Object.defineProperty({__proto__:null,pdf:one,cdf:ane,inv:sne,mean:VG,median:lne,mode:une,sample:cne,variance:fne},Symbol.toStringTag,{value:"Module"})),dne=Object.freeze(Object.defineProperty({__proto__:null,arcsine:Rte,beta:Wte,binomial:Xte,cauchy:tee,centralF:see,chisquare:gee,exponential:Eee,gamma:Oee,hypgeom:Ree,invgamma:Uee,kumaraswamy:Zee,laplace:ore,lognormal:pre,negbin:gre,noncentralt:Lre,normal:kre,pareto:zre,poisson:Hre,studentt:Sre,triangular:ene,tukey:ine,uniform:Ete,weibull:hne},Symbol.toStringTag,{value:"Module"}));function VT(){const e=[...arguments];return Sr(e[1])?(e[0]-e[1])/e[2]:(e[0]-ar(e[1]))/ma(e[1],e[2])}function vC(){const e=[...arguments];let t;return Co(e[1])?(t=VT(e[0],e[1],e[3]),e[2]===1?mi(-Math.abs(t),0,1):mi(-Math.abs(t),0,1)*2):e.length>2?(t=VT(e[0],e[1],e[2]),e[3]===1?mi(-Math.abs(t),0,1):mi(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?mi(-Math.abs(t),0,1):mi(-Math.abs(t),0,1)*2)}function UT(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-ar(e[1]))/(ma(e[1],!0)/Math.sqrt(e[1].length))}function pne(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(UT(e[0],e[1],e[2],e[3])),e[4]===1?Ko(-t,e[3]-1):Ko(-t,e[3]-1)*2):Sr(e[1])?(t=Math.abs(e[0]),e[2]===1?Ko(-t,e[1]-1):Ko(-t,e[1]-1)*2):(t=Math.abs(UT(e[0],e[1])),e[2]===1?Ko(-t,e[1].length-1):Ko(-t,e[1].length-1)*2)}function vne(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=ar(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(ar(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=ar(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function gne(){var e=[...arguments],t,r,n,i;if(Sr(e[0]))return 1-_1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-_1(o,t,r)}function mne(e,t,r){return 1-_1(e,t,r)}function GT(){var e=[...arguments],t,r,n,i,o;return Sr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=ar(e[0]),r=ar(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function UG(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=GT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=GT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Ld(t,n,r-n)}function yne(e){for(var t=xG(e),r=e.map(l=>ar(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=UG(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function _ne(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(zT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(zT(e[1]/2,0,1)*ma(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function bne(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(b1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(b1(e[1]/2,e[2].length-1)*ma(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function wne(e,t){return e<t}function GG(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function Sne(e,t,r,n){const i=GG(e,t,r,n);return vC(i,1)}function Tne(e,t,r,n){const i=GG(e,t,r,n);return vC(i,2)}const Pne=Object.freeze(Object.defineProperty({__proto__:null,zscore:VT,ztest:vC,tscore:UT,ttest:pne,anovafscore:vne,anovaftest:gne,ftest:mne,qscore:GT,qtest:UG,tukeyhsd:yne,normalci:_ne,tci:bne,significant:wne,oneSidedDifferenceOfProportions:Sne,twoSidedDifferenceOfProportions:Tne},Symbol.toStringTag,{value:"Module"}));function Ri(e){return Co(e)||e.constructor.name==="jStat"}function cn(e,t){return Ri(t)?(Ri(t[0])||(t=[t]),Jr(e,function(r,n,i){return r+t[n][i]})):Jr(e,function(r){return r+t})}function ou(e,t){return Ri(t)?(Ri(t[0])||(t=[t]),Jr(e,function(r,n,i){return r-t[n][i]||0})):Jr(e,function(r){return r-t})}function jT(e,t){return Ri(t)?(Ri(t[0])||(t=[t]),Jt(e,ko(t))):Jr(e,function(r){return r/t})}function Jt(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=Io(i,r=Ri(t)?t[0].length:o);let s=0;if(Ri(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return Jr(e,function(l){return l*t})}function Ene(e,t){return Jt(e.map(r=>[r]),[t])}function w1(e,t){Ri(e[0])||(e=[e]),Ri(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?ys(e):e,n=t[0].length===1&&t.length!==1?ys(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function WT(e,t){return Jr(e,r=>Math.pow(r,t))}function Ane(e){return Jr(e,t=>Math.exp(t))}function Cne(e){return Jr(e,t=>Math.log(t))}function Mne(e){return Jr(e,t=>Math.abs(t))}function tf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Ri(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function kne(e,t){return Math.acos(w1(e,t)/(tf(e)*tf(t)))}function gC(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function ko(e){for(var t=e.length,r=e[0].length,n=iu(t,r),i=jG(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function xne(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function Lne(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=gC(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function jG(e,t){var r=gC(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function Ine(e,t){var r=e[0].length,n=Io(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r-1,-1,-1).forEach(function(a){i=Ie(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-Qr(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function One(e,t){var r=e[0].length,n=Io(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r).forEach(function(a){i=Ie(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-Qr(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function Rne(e){var t=e.length,r=iu(t),n=Io(e.length,e[0].length),i;return Ie(t).forEach(function(o){n[0][o]=e[0][o]}),Ie(1,t).forEach(function(o){Ie(o).forEach(function(a){i=Ie(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-Qr(i))/n[a][a]}),Ie(o,t).forEach(function(a){i=Ie(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-Qr(i)})}),[r,n]}function Dne(e){var t=e.length,r=Io(e.length,e[0].length),n;return Ie(t).forEach(function(i){n=Ie(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-Qr(n)),Ie(i+1,t).forEach(function(o){n=Ie(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-Qr(n))/r[i][i]})}),r}function Nne(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=Jt(Jt(ko(u),cn(s,l)),-1),f=Jt(ko(u),t),c=r,d=cn(Jt(h,r),f),i=2;Math.abs(tf(ou(d,c)))>n;)c=d,d=cn(Jt(h,c),f),i++;return d}function Fne(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=Jt(Jt(ko(cn(l,a)),s),-1),f=Jt(ko(cn(l,a)),t),c=r,d=cn(Jt(h,r),f),i=2;Math.abs(tf(ou(d,c)))>n;)c=d,d=cn(Jt(h,c),f),i=i+1;return d}function Bne(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=Jt(ko(cn(u,Jt(s,i))),ou(Jt(u,1-i),Jt(l,i))),h=Jt(Jt(ko(cn(u,Jt(s,i))),t),i),f=r,p=cn(Jt(d,r),h),o=2;Math.abs(tf(ou(p,f)))>n;)f=p,p=cn(Jt(d,f),h),o++;return p}function zne(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=Io(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=ou(iu(t,r),Jt(Jt(i,ys(i)),2)),e=Jt(o,Jt(e,o))}return e}function WG(e){var t=e.length,r=e[0].length,n=Io(r,r);e=Xy(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(Qr(Ie(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=Qr(Ie(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function $ne(e){e=Xy(e);var t=e.length,r=iu(t);return Ie(t-1,-1,-1).forEach(function(n){td(r,{row:n},jT(Zo(r,{row:n}),e[n][n])),td(e,{row:n},jT(Zo(e,{row:n}),e[n][n])),Ie(n).forEach(function(i){var o=Jt(e[i][n],-1),a=Zo(e,{row:i}),s=Jt(Zo(e,{row:n}),o);td(e,{row:i},cn(a,s));var l=Zo(r,{row:i}),u=Jt(Zo(r,{row:n}),o);td(r,{row:i},cn(l,u))})}),r}function HG(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=WG(e),o=e[0].length,a=Zo(n,{col:{end:o}}),s=Zo(i,{row:{end:o}}),l=$ne(s),u=ys(a);u[0].length===void 0&&(u=[u]);var c=Jt(Jt(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function XG(e){for(var t=1,r=e.length,n=iu(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=iu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=Jt(n,h),o=Jt(Jt(ko(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function Vne(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function Une(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function Gne(e,t,r,n){function i(p,v){for(var g=0,m=p.length,y;g<m;g++)p[g]===v&&(y=g);return y}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function jne(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function Wne(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function Hne(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function Xne(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=Jt(ko(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+WT(r-e[o],2)*u[o]+(r-e[o])*WT(r-e[o],2)*h[o]}function Yne(){throw new Error("gauss_quadrature not yet implemented")}function qne(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=Qr(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=ys(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=w1([h[n]],[h[i]])/(r-1);for(l=XG(d),p=l[0],s=l[1],v=ys(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=ys(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=w1([v[n]],[f[i]]);return[e,s,v,c]}const Zne=Object.freeze(Object.defineProperty({__proto__:null,add:cn,subtract:ou,divide:jT,multiply:Jt,outer:Ene,dot:w1,pow:WT,exp:Ane,log:Cne,abs:Mne,norm:tf,angle:kne,aug:gC,inv:ko,det:xne,gauss_elimination:Lne,gauss_jordan:jG,triaUpSolve:Ine,triaLowSolve:One,lu:Rne,cholesky:Dne,gauss_jacobi:Nne,gauss_seidel:Fne,SOR:Bne,householder:zne,QR:WG,lstsq:HG,jacobi:XG,rungekutta:Vne,romberg:Une,richardson:Gne,simpson:jne,hermite:Wne,lagrange:Hne,cubic_spline:Xne,gauss_quadrature:Yne,PCA:qne},Symbol.toStringTag,{value:"Module"}));function Kne(e){var t=e[0].length,r=Ie(t).map(function(n){var i=Ie(t).filter(function(o){return o!==n});return YG(m1(e,n).map(function(o){return o[0]}),m1(e,i))});return r}function YG(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=HG(t,e),a=Jt(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=ou(e,a),l=ar(e),u=Qr(a.map(function(d){return Math.pow(d-l,2)})),c=Qr(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Jne(e){var t=Kne(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=Ko(l,e.df_resid);return(u>.5?1-u:u)*2}),a=b1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function Qne(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return y1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function tie(e,t){var r=YG(e,t),n=Jne(r),i=Qne(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const eie={ols:tie},rie=Object.freeze(Object.defineProperty({__proto__:null,models:eie},Symbol.toStringTag,{value:"Module"}));Object.assign(dt,YQt,mte,Pne,Zne,rie,Fte);for(const[e,t]of Object.entries(dne)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),dt[e]=r,dt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?dt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?dt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){dt.prototype[e]=function(){return dt(dt.map(this,function(t){return dt[e](t)}))}});dt.prototype.randn=function(){return dt(dt.randn.apply(null,arguments))};const mC=bG.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(mC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=dt[r](s[a]);return o}return dt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(mC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=dt[r](s[a]);return n===!0?dt[r](dt.utils.toVector(o)):o}return dt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(mC(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,dt.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return dt[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));dt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};dt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?dt.normal.cdf(-i,0,1):dt.normal.cdf(-i,0,1)*2};dt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};dt.prototype.ttest=function(t,r){return r===1?1-dt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):dt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};dt.prototype.anovafscore=function(){return dt.anovafscore(this.toArray())};dt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return dt.ftest(this.anovafscore(),this.length-1,t-this.length)};dt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};dt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{dt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,dt.prototype[e].call(n,t)),this):typeof dt[e](this,t)=="number"?dt[e](this,t):dt(dt[e](this,t))}});dt.jStat=dt;function yC(e,t,r){const n=t;let i=[];for(let o=0;o<=r;o++){const a=dt.binomial.pdf(o,r,e/r)*n;a<.001&&(o<this.stats.min||o>this.stats.max)||i.push([o,a])}return i}function nie(e,t){let r={};for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a,`${o}: ${a.toFixed(3)} samples`]);return i}function _C(e,t,r,n,i){return n?oie(e,t,r):iie(e,t,r,i)}function iie(e,t,r,n){const o=r+2,a=Object.keys(e).sort((d,p)=>e[p][1]-e[d][1]);let s={},l=0;if(a.forEach(d=>{const p=e[d][0];if(n&&p=="0")return;const v=e[d][1],g=p in t?t[p]:0;(v>=5&&g>=5||l<o)&&(s[p]={y_model:v,y_observed:g},l++)}),Object.keys(s).length==0)return console.log("can't compute chiSquared: discarded",s),{chisq:void 0,pval:NaN};let c=0,f=0;for(const[d,{y_model:p,y_observed:v}]of Object.entries(s)){const g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:NaN};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}function oie(e,t,r,n){if(this.stats.len<=5)return console.log("can't compute chiSquared: count <",5),{chisq:0,pval:1};let o={},a=0,s=0,l=e.length,u=0;for(;l--;){let d=e[l][0];if(a+=e[l][1],s+=d in t?t[d]:0,s>=5){o[d]={bell:a,hist:s},a=0,s=0,u=d;break}}for(const[d,p]of e){if(d==u)break;a+=p,s+=d in t?t[d]:0,s>=5&&(o[d]={bell:a,hist:s},a=0,s=0)}o[u].bell+=a,o[u].hist+=s;let c=0,f=0;for(const[d,{bell:p,hist:v}]of Object.entries(o)){let g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:1};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}Br([df,py,R0,D0,gf,vf,mf,N0,my,gy,vy,F0]);const aie={data:()=>({selected_np:1,selected_n:10}),props:{stats:Object,histogram:Object},components:{VChart:yf},methods:{formatFixed:Bt,formatKMG:mP,makeBinomBellN:yC,loss:_C,makeModelA(e,t){let r={np:e,n:t};return r.bell=this.makeBinomBellN(e,this.stats.len,t),r.loss=this.loss(r.bell,this.histogram.map,2),r},tuneModelA(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r=r.filter(i=>i>=e&&i<=this.stats.max*5),r.push(this.stats.max));let n={n:0,loss:{chisq:1/0,pval:0}};return r.forEach(i=>{const o=this.makeModelA(e,i);o.loss.chisq<n.loss.chisq&&(n=o,console.log("new best modelA",n))}),n},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){const e=this.makeModelA(this.selected_np,this.selected_n);return console.log("modelA",e),e},modelASweep(){const e=this.stats.mean,t=Math.max(0,this.stats.meanLo),r=this.stats.meanHi,n=this.tuneModelA(e,void 0),i=r-t;let o=10;const a=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const c of a)if(Math.floor(i/c)<20){o=c;break}const s=Math.ceil(t/o)*o;let l=n;const u=[];for(let c=s;c<=r;c+=o){let f=this.tuneModelA(c,void 0);c>e&&c<e+o&&u.push([e,n.loss.chisq,n.loss.pval,f.n]),u.push([c,f.loss.chisq,f.loss.pval,f.n]),f.loss.chisq<l.loss.chisq&&(l=f)}return isFinite(l.loss.chisq)&&(this.selected_np=l.np,this.selected_n=l.n),console.log("modelASweep",t,r,o,s,l,u),{result:l,log:u}},makeChartAHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelA.bell}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,3)},showSymbol:!1}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3],2)}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.stats.meanLo,max:this.stats.meanHi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>this.formatKMG(t)}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Ns=e=>(tn("data-v-b306d5ae"),e=e(),en(),e),sie=Ns(()=>b("span",{class:"title"},"Model A",-1)),lie=Ns(()=>b("span",null,[U(": all points were taken from a single distribution with "),b("i",null,"np = M")],-1)),uie={style:{float:"left"}},cie=U(" Sweeping through "),fie=Ns(()=>b("i",null,"np",-1)),hie={key:0,id:"chartSweep"},die={key:1},pie={style:{padding:"1em"}},vie=Ns(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),gie=Ns(()=>b("td",null,"Best fit:",-1)),mie=Ns(()=>b("td",null,"Manual:",-1)),yie=U(" np: "),_ie=["value","min","max","step"],bie=U(" n: "),wie=["value","min"],Sie=Ns(()=>b("br",null,null,-1)),Tie={id:"chartHisto",style:{float:"left"}},Pie=Ns(()=>b("div",{style:{clear:"both"}},null,-1));function Eie(e,t,r,n,i,o){const a=de("v-chart");return R(),N(W,null,[sie,lie,b("div",null,[b("div",uie,[cie,fie,U(" values in "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+" range: ",1),o.modelASweep.result.np?(R(),N("div",hie,[Ct(a,{option:o.makeChartASweep},null,8,["option"])])):(R(),N("div",die," [failed] ")),b("div",pie,[b("table",null,[vie,o.modelASweep.result?(R(),N("tr",{key:0,class:Yr({strike:r.stats.aBad})},[gie,b("td",null,L(o.formatFixed(o.modelASweep.result.np,4)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.n)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):ut("",!0),b("tr",null,[mie,b("td",null,L(o.formatFixed(e.selected_np,4)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelA.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelA.loss.pval,4)),1)])]),yie,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,_ie),bie,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,wie),Sie])]),b("div",Tie,[o.modelA.bell?(R(),ws(a,{key:0,option:o.makeChartAHist},null,8,["option"])):(R(),N(W,{key:1},[U(" [failed to build the requested distribution np="+L(o.modelA.np)+" n="+L(o.modelA.n)+" ] ",1)],64))]),Pie])],64)}const Aie=ze(aie,[["render",Eie],["__scopeId","data-v-b306d5ae"]]);Br([df,py,R0,D0,hlt,gf,vf,mf,N0,my,gy,vy,F0]);const Cie={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:yf},methods:{formatFixed:Bt,formatKMG:mP,makeBinomBellN:yC,loss:_C,makeModelB(e,t){const r=this.makeBinomBellN(e,this.stats.lucky.len,t),n={np:e,n:t,bell:r},i=this.histogramNonzero.map,o=1 in r&&Object.keys(r).length==2&&1 in i&&Object.keys(i).length==1;if(n.loss=this.loss(n.bell,this.histogramNonzero.map,2,!1,!0),o){const a=this.stats.lucky.len,s=r[1][1],l=i[1],u=s/a;l<=a&&0<u&&u<1?(n.loss.binomtest=mG(l,Math.round(a),{p:u}),n.loss.pval=n.loss.binomtest.pValue):n.loss.binomtest=NaN}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*2));let n={np:0,n:1,loss:{chisq:1e99,pval:0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i),a=o.loss.pval&&n.loss.pval&&o.loss.pval>n.loss.pval,s=o.loss.chisq&&n.loss.chisq&&o.loss.chisq<.9999*n.loss.chisq;(a||s)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},histogramNonzero(){const e={...this.histogram.map};delete e[0];const t=[];for(const[r,n]of Object.entries(e))t.push([r,n]);return{arr:t,map:e}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{chisq:1e99,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.loss.chisq,l.loss.pval,l.n]);const u=l.loss.pval&&o.loss.pval&&l.loss.pval>o.loss.pval,c=l.loss.chisq<o.loss.chisq;(u||c)&&(o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelB.bell}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,3)},showSymbol:!1},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3])}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e}}},Oo=e=>(tn("data-v-9c61113f"),e=e(),en(),e),Mie=Oo(()=>b("span",{class:"title"},"Model B",-1)),kie=Oo(()=>b("span",null,[U(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),b("i",null,"np"),U(", that \u03BB"),b("i",null,"np"),U(" = M")],-1)),xie=U("Sweeping through "),Lie=Oo(()=>b("i",null,"np",-1)),Iie={style:{float:"left"}},Oie={key:0,id:"chartSweep"},Rie={style:{padding:"1em"}},Die={style:{float:"left"}},Nie=Oo(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),Fie={key:0},Bie=Oo(()=>b("td",null,"Best fit:",-1)),zie=Oo(()=>b("td",null,"Manual:",-1)),$ie=U(" np\u1D38: "),Vie=["value","min","max","step"],Uie=U(" n\u1D38: "),Gie=["value"],jie=Oo(()=>b("div",{style:{clear:"both"}},null,-1)),Wie={key:0,id:"chartHisto"},Hie=Oo(()=>b("br",null,null,-1)),Xie={key:0},Yie=U(" Corresponding range for "),qie=Oo(()=>b("i",null,"np",-1)),Zie={key:1},Kie=Oo(()=>b("div",{style:{clear:"both"}},null,-1));function Jie(e,t,r,n,i,o){const a=de("v-chart");return R(),N(W,null,[Mie,kie,o.modelB?(R(),N(W,{key:0},[b("p",null,[xie,Lie,U(" values in "+L(o.formatFixed(this.sweep_lo,2))+"\u2026"+L(o.formatFixed(this.sweep_hi,2))+" range:",1)]),b("div",Iie,[o.modelBSweep?(R(),N("div",Oie,[Ct(a,{option:o.makeChartBSweep},null,8,["option"])])):ut("",!0),b("div",Rie,[b("div",Die,[b("table",null,[Nie,o.modelBSweep.result?(R(),N("tr",Fie,[Bie,b("td",null,L(o.formatFixed(o.modelBSweep.result.np,2)),1),b("td",null,L(o.modelBSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):ut("",!0),b("tr",null,[zie,b("td",null,L(o.formatFixed(e.selected_np,2)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelB.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelB.loss.pval,4)),1)])]),b("p",null,[$ie,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,Vie),Uie,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Gie)])]),jie])]),o.modelB.bell?(R(),N("div",Wie,[Ct(a,{option:o.makeChartBHist},null,8,["option"]),U(" Bin 0 has 1-\u03BB \u2248 "+L(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+L(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Hie,U(" Depending on \u03BB could potentially be "+L(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+L(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(R(),N("p",Xie,[Yie,qie,U(": "+L(o.formatFixed(o.npRangeForBinary.min,2))+"\u2026"+L(o.formatFixed(o.npRangeForBinary.max,2)),1)])):ut("",!0)])):(R(),N("div",Zie," bad parameters ")),Kie],64)):ut("",!0)],64)}const Qie=ze(Cie,[["render",Jie],["__scopeId","data-v-9c61113f"]]);Br([df,py,R0,D0,gf,vf,mf,N0,my,gy,vy,F0]);class toe{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.loss.chisq,o.loss.pval]);return t}}const eoe={data:()=>({selected_npL:1,selected_nL:10,selected_npU:1,selected_nU:10}),props:{stats:Object,histogram:Object},components:{VChart:yf},methods:{formatFixed:Bt,formatKMG:mP,makeBinomBellN:yC,makeBellSum:nie,loss:_C,l2u(e,t,r){return r/(1-t)-t*e/(1-t)},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-15;s<=15;s++)for(let l=-15;l<=15;l++){const u=t+l*n,c=r+s*n;if(u<0||c<u)continue;const f=2.96,h=this.l2u(c/1e4,this.stats.lucky.shareLo,this.stats.mean+f*this.stats.meanErr);if(u/1e4>h)continue;const d=this.l2u(c/1e4,this.stats.lucky.shareHi,this.stats.mean-f*this.stats.meanErr);if(u/1e4<d)continue;let p=e.get(u,c);p===null&&(p=this.makemodelC(c/1e4,void 0,u/1e4,void 0),e.put(u,c,p)),p.loss.chisq<a.model.loss.chisq*.9999&&(a={il:s,iu:l,model:p})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};this.stats.psGridPath.push([t,r/1e4,n/1e4,a.model.loss.chisq]),t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r,n){let i=[t];t===void 0&&(i=[10,20,40,120],i=i.filter(s=>s>=e&&s>=this.stats.max),i.push(this.stats.max));let o=[n];n===void 0&&(o=[10,20,40,120],o=o.filter(s=>s>=r),o.push(this.stats.max));let a={n:0,loss:{chisq:1/0,pval:0}};return i.forEach(s=>{const l=this.makeBinomBellN(e,this.stats.lucky.len,s);o.forEach(u=>{const c={npL:e,nL:s,npU:r,nU:u,bellL:l};c.bellU=this.makeBinomBellN(r,this.stats.unlucky.len,u),c.bell=this.makeBellSum(c.bellL,c.bellU),c.loss=this.loss(c.bell,this.histogram.map,4),c.loss.chisq<.9999*a.loss.chisq&&(a=c)})}),a||console.log("makemodelC failed",e,r),a},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),this.selected_npL=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNpU(e){e<0||(e>this.selected_nU&&(this.selected_nU=Math.ceil(e)),this.selected_npU=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_nL,this.selected_npU,this.selected_nU);return console.log("modelC",e),e},modelCSweep(){if(isNaN(this.stats.mean))return!1;const e=this.stats.mean,t=this.stats.mean;console.log("initU",e);let r=1,n=5e3;this.stats.mean<22&&(n=2500),this.stats.mean<11&&(n=1e3),this.stats.mean<5.5&&(n=500),this.stats.mean<2.2&&(n=200),this.stats.mean<.55&&(n=50);let i=Math.round(e*1e4/n)*n,o=Math.round(t*1e4/n)*n;i<0&&(i=0),o<i&&(o=i);let a=this.makemodelC(o/1e4,void 0,i/1e4,void 0);this.stats.psGridPath=[[0,i/1e4,o/1e4,a.loss.chisq]];let s=new toe;s.put(i,o,a),{round:r,curU:i,curL:o,model:a}=this.findPsRound(s,r,i,o,a,n);const l=s.aslist();return this.selected_npL=a.npL,this.selected_nL=a.nL,this.selected_npU=a.npU,this.selected_nU=a.nU,console.log("modelCSweep",a,this.stats.lucky.mean),{result:a,psGridDotsMap:s,psGridDots:l}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,4)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const m=l,y=l/e;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}else{const m=u*e,y=u;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.chisq,max:this.modelCSweep.result.loss.chisq*2,dimension:2,text:["\u03C7\xB2",""]}:{min:0,max:this.modelCSweep.result.loss.pval,dimension:3,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(m){const y=m.data;return`np\u1D41=${Bt(y[0],2)}<br/>np\u1D38=${Bt(y[1],2)}<br/>\u03C7\xB2=${y[2].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(y[3],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:m=>`${m[1]} \u2192 ${Bt(m[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:"M\xB13\u03C3",coord:[this.stats.mean-2.96*this.stats.meanErr,this.stats.mean-2.96*this.stats.meanErr]},{coord:[this.stats.mean+2.96*this.stats.meanErr,this.stats.mean+2.96*this.stats.meanErr]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.stats.mean+2.96*this.stats.meanErr,this.l2u(this.stats.mean+2.96*this.stats.meanErr,this.stats.lucky.shareLo,this.stats.mean+2.96*this.stats.meanErr)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.stats.mean+2.96*this.stats.meanErr)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.stats.mean-2.96*this.stats.meanErr,this.l2u(this.stats.mean-2.96*this.stats.meanErr,this.stats.lucky.shareHi,this.stats.mean-2.96*this.stats.meanErr)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.stats.mean-2.96*this.stats.meanErr)]}]]}}],visualMap:{...p,...v}}}}},Fs=e=>(tn("data-v-afef32eb"),e=e(),en(),e),roe=Fs(()=>b("span",{class:"title"},"Model C",-1)),noe=Fs(()=>b("br",null,null,-1)),ioe={style:{float:"left"}},ooe={key:0,style:{width:"570px",height:"270px"}},aoe={style:{padding:"1em"}},soe={style:{float:"left"}},loe=Fs(()=>b("tr",null,[b("th"),b("th",null,"np\u1D41"),b("th",null,"n\u1D41"),b("th",null,"np\u1D38"),b("th",null,"n\u1D38"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),uoe=Fs(()=>b("td",null,"Best fit:",-1)),coe=Fs(()=>b("td",null,"Manual:",-1)),foe=U(" np\u1D41: "),hoe=["value","min","max","step"],doe=U(" n\u1D41: "),poe=["value"],voe=Fs(()=>b("br",null,null,-1)),goe=U(" np\u1D38: "),moe=["value","min","max","step"],yoe=U(" n\u1D38: "),_oe=["value"],boe=Fs(()=>b("div",{style:{clear:"both"}},null,-1)),woe={key:0,id:"chartHisto",style:{float:"left"}},Soe=Fs(()=>b("div",{style:{clear:"both"}},null,-1));function Toe(e,t,r,n,i,o){const a=de("v-chart");return R(),N(W,null,[roe,b("span",null,": some points were taken from a distribution L, and the rest from distribution U, so \u03BB np\u1D38 + (1 - \u03BB) np\u1D41 = M, where \u03BB \u2208 "+L(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(r.stats.lucky.shareHi*100,2))+"%, M \u2208 "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+", and 0 < np\u1D41 < np\u1D38",1),noe,b("div",ioe,[o.modelCSweep?(R(),N("div",ooe,[Ct(a,{option:o.makeChartCGrid},null,8,["option"])])):ut("",!0),b("div",aoe,[b("div",soe,[b("table",null,[loe,o.modelCSweep.result?(R(),N("tr",{key:0,class:Yr({strike:r.stats.dBad})},[uoe,b("td",null,L(o.formatFixed(o.modelCSweep.result.npU,2)),1),b("td",null,L(o.modelCSweep.result.nU),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.npL,2)),1),b("td",null,L(o.modelCSweep.result.nL),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):ut("",!0),b("tr",null,[coe,b("td",null,L(o.formatFixed(e.selected_npU,2)),1),b("td",null,L(e.selected_nU),1),b("td",null,L(o.formatFixed(e.selected_npL,2)),1),b("td",null,L(e.selected_nL),1),b("td",null,L(o.formatFixed(o.modelC.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelC.loss.pval,4)),1)])]),b("p",null,[foe,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,hoe),doe,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNU(Number(s.target.value))),value:e.selected_nU,min:1,max:200,step:1,class:"vmid"},null,40,poe),voe,goe,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,moe),yoe,b("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedNL(Number(s.target.value))),value:e.selected_nL,min:1,max:200,step:1,class:"vmid"},null,40,_oe)])]),boe])]),o.modelC.bell?(R(),N("div",woe,[Ct(a,{option:o.makeChartCHist},null,8,["option"])])):ut("",!0),Soe],64)}const Poe=ze(eoe,[["render",Toe],["__scopeId","data-v-afef32eb"]]);Br([df,py,R0,D0,gf,vf,mf,N0,my,gy,vy,F0]);const Eoe={setup(){const e=xt(),t=mY(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:yf,DRMA:Aie,DRMB:Qie,DRMC:Poe},provide(){return{[Zct]:Ye(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},luckyCountConfidence:95.4499736,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=dt.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[p,v]of Object.entries(e))t+=e[p].length,r+=e[p].length;const n=this.weightedDataset;for(let[p,v]of Object.entries(n))for(let g of v.weights)g>this.luckyCountConfidence/100,g>1-this.luckyCountConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[p,v]of Object.entries(n)){s=Math.min(s,p),l=Math.max(l,p);let{len:g,luckyLen:m,sorted:y,weights:_}=v;a+=m,i.push(...y),o.push(..._)}const u={lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:dt.min(i),max:dt.max(i),range:dt.range(i),mean:dt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:dt.stdev(i,!0),bell:[],histo:[]};if(u.meanErr=Math.sqrt(u.mean/150*(1-u.mean/150)/u.len*150),u.meanLo=u.mean-3*u.meanErr,u.meanHi=u.mean+3*u.meanErr,u.lucky={len:a,share:a/u.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},!isNaN(u.lucky.share)){console.log("lucky share binomTest",u.lucky.share);const p=this.binomialTest(Math.round(u.lucky.len),u.len,{p:u.lucky.share,alpha:1-this.luckyCountConfidence/100});u.lucky.shareLo=p.ci[0],u.lucky.shareHi=p.ci[1],u.lucky.lenLo=p.ci[0]*u.len,u.lucky.lenHi=p.ci[1]*u.len}u.unlucky={len:u.len-a,share:1-u.lucky.share,mean:0,std:0};let c=0,f=0;for(const[p,v]of Object.entries(n)){let{len:g,luckyLen:m,luckeyLen95:y,sorted:_,weights:w}=v;for(let T=0;T<g;T++){const S=_[T],P=w[T];c+=S*(1-P),f+=S*P}}u.unlucky.mean=c/u.unlucky.len,u.lucky.mean=f/u.lucky.len;let h=0,d=0;for(const[p,v]of Object.entries(n)){let{len:g,sorted:m,weights:y}=v;for(let _=0;_<g;_++){const w=y[_],T=m[_]-u.unlucky.mean;h+=T*T*(1-w);const S=m[_]-u.lucky.mean;d+=S*S*w}}return u.unlucky.std=Math.sqrt(h/u.unlucky.len),u.lucky.std=Math.sqrt(d/u.lucky.len),console.log("stats",u),u},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=dt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:Bt,makeIconSrc:Di,binomialTest:mG,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ln=e=>(tn("data-v-cf5c7e1e"),e=e(),en(),e),Aoe={id:"menu"},Coe={style:{display:"none"}},Moe=Ln(()=>b("tr",null,[b("th",null,"U"),b("th",null,"L"),b("th"),b("th",null,"normal"),b("th",null,"giant")],-1)),koe=["src"],xoe={class:"center"},Loe=["title","onClick"],Ioe=["title"],Ooe={id:"content"},Roe=Ln(()=>b("tr",null,[b("td",null,"mute"),b("td",null,"luck")],-1)),Doe={class:"center"},Noe=["onUpdate:modelValue"],Foe=U(" Possible luck procs observed with "),Boe=Ln(()=>b("option",{value:"86.6385597"},"86.6% (1.5\u03C3)",-1)),zoe=Ln(()=>b("option",{value:"95.4499736"},"95.4% (2\u03C3)",-1)),$oe=Ln(()=>b("option",{value:"98.7580669"},"98.8% (2.5\u03C3)",-1)),Voe=Ln(()=>b("option",{value:"99.7300203"},"99.7% (3\u03C3)",-1)),Uoe=[Boe,zoe,$oe,Voe],Goe=U(" confidence: "),joe=Ln(()=>b("tr",null,[b("th"),b("th",null,"min"),b("th",null,"max")],-1)),Woe=Ln(()=>b("td",null,"count",-1)),Hoe=Ln(()=>b("td",null,"% of total",-1)),Xoe={id:"settings"},Yoe=U(" Use model:"),qoe=Ln(()=>b("br",null,null,-1)),Zoe=Ln(()=>b("label",{for:"option1"},[U("A. Same item drop regardless of luck (plants, lumber, ores)"),b("br")],-1)),Koe=Ln(()=>b("label",{for:"option2"},[U("B. Item only drops when luck procs (sacks, lumbering rares)"),b("br")],-1)),Joe=Ln(()=>b("label",{for:"option3"},[U("C. Different drops when luck procs and when not (eggs, honey)"),b("br")],-1)),Qoe={key:0,id:"modelA",style:{float:"left"}},tae={key:1},eae={key:2};function rae(e,t,r,n,i,o){const a=de("RouterLink"),s=de("DRMA"),l=de("DRMB"),u=de("DRMC");return R(),N("main",null,[b("div",Aoe,[b("div",Coe,L(n.dropratesStore.selected_pzk)+" "+L(n.dropratesStore.selected_ik)+" "+L(n.dropratesStore.selected_specie),1),(R(!0),N(W,null,Nt(i.alldata,(c,f)=>(R(),N(W,null,[Ct(a,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[U(L(f)+" "+L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),b("table",null,[Moe,(R(!0),N(W,null,Nt(c,(h,d)=>(R(),N("tr",null,[b("td",null,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(R(),N(W,{key:0},[U(L(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):ut("",!0)]),b("td",null,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(R(),N(W,{key:0},[U(L(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):ut("",!0)]),b("td",null,[Ct(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:Ee(()=>[b("span",null,[b("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,koe)])]),_:2},1032,["to"]),U(" "+L(n.gameStore.itemName(d)),1)]),(R(),N(W,null,Nt(["normal","giant"],p=>b("td",xoe,[p in h?(R(),N(W,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(R(),N("button",{key:0,title:"item "+d,onClick:v=>o.activate(f,d,p)},L(Object.values(h[p]).flat().length),9,Loe)):(R(),N("button",{key:1,title:"item "+d,class:"pressed"},L(Object.values(h[p]).flat().length),9,Ioe))],64)):ut("",!0)])),64))]))),256))])],64))),256))]),b("div",Ooe,[b("details",null,[b("summary",null,[U("Dataset: size N = "+L(o.stats.len)+", mean M = "+L(o.formatFixed(o.stats.mean,2))+"\xB1"+L(o.formatFixed(1.96*o.stats.meanErr,2))+", ",1),this.stats.minLuck==this.stats.maxLuck?(R(),N(W,{key:0},[U(L(this.stats.maxLuck),1)],64)):(R(),N(W,{key:1},[U(L(o.formatFixed(this.stats.minLuck,2))+"\u2026"+L(o.formatFixed(this.stats.maxLuck,2)),1)],64)),U("\u{1F340} \u2192 \u03BB \u2208 "+L(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),b("div",null,[b("table",null,[Roe,(R(!0),N(W,null,Nt(o.stats.dataRaw,(c,f)=>(R(),N("tr",{class:Yr({strike:i.hide_buckets[f]})},[b("td",Doe,[Pt(b("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,Noe),[[Cn,i.hide_buckets[f]]])]),b("td",null,L(f),1),(R(!0),N(W,null,Nt(c,h=>(R(),N("td",null,L(h),1))),256))],2))),256))])]),b("p",null,[Foe,Pt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.luckyCountConfidence=c)},Uoe,512),[[ln,i.luckyCountConfidence]]),Goe,b("table",null,[joe,b("tr",null,[Woe,b("td",null,L(o.formatFixed(o.stats.lucky.lenLo,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),b("tr",null,[Hoe,b("td",null,L(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),b("div",Xoe,[Yoe,qoe,Pt(b("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),Zoe,Pt(b("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),Koe,Pt(b("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),Joe]),n.dropratesStore.selected_model=="a"?(R(),N("div",Qoe,[Ct(s,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):ut("",!0),n.dropratesStore.selected_model=="b"?(R(),N("div",tae,[Ct(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):ut("",!0),n.dropratesStore.selected_model=="c"?(R(),N("div",eae,[Ct(u,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):ut("",!0)])])}const nae=ze(Eoe,[["render",rae],["__scopeId","data-v-cf5c7e1e"]]),iae=lY({history:EX("/workerman/"),routes:[{path:"/",name:"home",component:dAt},{path:"/plantzones",component:VAt},{path:"/modifiers",component:ACt},{path:"/settings",component:rkt},{path:"/about",component:()=>kY(()=>import("./AboutView.92a67b91.js"),[])},{path:"/othertowns",component:lkt},{path:"/workshops",component:Pkt},{path:"/housecraft",component:jkt},{path:"/droprates",component:nae},{path:"/lodging",component:QAt}]});const bC=IH(AY),oae=iX();bC.use(oae);bC.use(iae);bC.mount("#app");export{W as F,ze as _,b as a,U as b,N as c,Ct as d,uP as e,de as f,en as g,R as o,tn as p,xW as r,Ee as w};
